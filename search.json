[{"title":"è¿™æ˜¯asdæ–‡ç« ","path":"/2026/01/27/asd/","content":"aå•Šå•Šå•Šå•Šå•Šå•Šå•Šå“ˆå“ˆå“ˆå“ˆ"},{"title":"è¿™æ˜¯æ–‡ç« æ ‡é¢˜","path":"/2026/01/26/2021/","content":"æ–‡ç« æ­£æ–‡ æ¢åšä¸‡èƒ½é’å¹´æ—…åº—David TaoAdeleé‚“ä¸½å›Nujabes"},{"path":"/about/index.html","content":"ğ¹ğ’¶ğ“ƒğ’¸ğ“ ğ’µğ’½ğ’¶ğ“ƒğ‘”ç®€ä»‹è¿åŠ¨é˜…è¯»éŸ³ä¹ä¸“æ°”è‡´æŸ”ï¼Œèƒ½å¦‚å©´å„¿ä¹ï¼Ÿæ¶¤é™¤ç„é‰´ï¼Œèƒ½æ— ç–µä¹ï¼Ÿä¼—äººç†™ç†™ï¼Œå¦‚äº«å¤ªç‰¢ï¼Œæˆ‘ç‹¬æ³Šå…®å…¶æœªå…†ã€‚æ²Œæ²Œå…®å¦‚å©´å„¿ä¹‹æœªå­©ï¼›å‚«å‚«å…®è‹¥æ— æ‰€å½’ã€‚çŸ¥æ­¢è€Œåæœ‰å®šï¼Œå®šè€Œåèƒ½é™ï¼Œé™è€Œåèƒ½å®‰ï¼Œç„¶åèƒ½è™‘ã€‚ä¼—äººçš†æœ‰ä½™ï¼Œè€Œæˆ‘ç‹¬è‹¥é—ã€‚æ— ä»–ï¼Œä¿®èº«é½å®¶æ²»å›½å¹³å¤©ä¸‹ã€‚æ„šäººæœ‰è¶³ä¹è€…ä¸è¶³ä¸ºé“ä¹Ÿæœ¬ç«™æ˜¯@fancyçš„ä¸ªäººç«™ï¼Œåšä¸»ç›®å‰åˆšåˆšè€ƒå®Œç ”ï¼Œåœ¨å®¶ä¸­å‡†å¤‡å‘å±•è‡ªå·±çš„çˆ±å¥½ï¼ŒåŒæ—¶ç»§ç»­ä¿æŒå­¦ä¹ çŠ¶æ€ï¼Œå‘å±•è‡ªå·±çš„æŠ€æœ¯æ ˆã€‚æ— è®ºæ˜¯è´¹æ›¼å­¦ä¹ æ³•è¿˜æ˜¯é€šè¿‡å†™ä½œæ¢³ç†è‡ªå·±ã€è®¤è¯†è‡ªå·±çš„éœ€æ±‚ï¼Œè¾“å‡ºå·²ç»æ˜¯æˆ‘ç¦»ä¸å¼€çš„ç”Ÿæ´»æ–¹å¼ã€‚ä»è¯´è¯´ã€qqç©ºé—´ç§å¯†æ—¥å¿—ã€å¾®ä¿¡å…¬ä¼—å·åˆ°ä¸ªäººç½‘ç«™ï¼Œåšä¸»çš„å†™ä½œéœ€æ±‚å’Œæ–‡å­—ä¹Ÿæ¸æ¸éšæˆé•¿çš„è¶³è¿¹å †å äº†æˆä¸€æ¡æ¸…æ™°å¯è§çš„è·¯â€¦â€¦éå¸¸çƒ­çˆ±è¿åŠ¨ï¼Œå–œæ¬¢çš„å“ç±»å¾ˆå¤šã€‚æœ€å–œçˆ±ç¯®çƒå’Œè·‘æ­¥ï¼Œåœ¨å­¦æ¸¸æ³³å’Œç¾½æ¯›çƒï¼Œæœ€å¸Œæœ›è‡ªå·±çš„èº«ä½“èƒ½å¤Ÿåœ¨åŠŸèƒ½æ€§ã€æŸ”éŸ§ã€æ ¸å¿ƒåŠ›é‡çš„å‘å±•ä¸­è¾¾åˆ°ä¸€ç§è‡ªç„¶çš„åè°ƒã€‚ç”Ÿè€Œå¼ºè€…å¦‚æœæ»¥ç”¨å…¶å¼ºï¼Œå³ä½¿æ˜¯è‡³å¼ºè€…ï¼Œæœ€ç»ˆä¹Ÿè®¸ä¼šè½¬ä¸ºè‡³å¼±ï¼›è€Œå¼±è€…å¦‚æœå‹¤è‡ªé”»ç‚¼ï¼Œå¢ç›Šå…¶æ‰€ä¸èƒ½ï¼Œä¹…ä¹‹ä¹Ÿä¼šå˜è€Œä¸ºå¼ºã€‚å› æ­¤ï¼Œâ€œç”Ÿè€Œå¼ºè€…ä¸å¿…è‡ªå–œä¹Ÿï¼Œç”Ÿè€Œå¼±è€…ä¸å¿…è‡ªæ‚²ä¹Ÿã€‚å¾ç”Ÿè€Œå¼±ä¹ï¼Œæˆ–è€…å¤©ä¹‹è¯±æˆ‘ä»¥è‡³äºå¼ºï¼Œæœªå¯çŸ¥ä¹Ÿè¿åŠ¨ä¹ƒæ˜¯æˆ‘ç”Ÿå‘½åŠ›çš„æºæ³‰ï¼Œæ˜¯æˆ‘å‹¤åŠ æ€è€ƒèƒŒåçš„ç‡ƒæ–™ï¼Œæ˜¯æˆ‘å¾—ä»¥äº²è¿‘è¿™ä¸ªä¸–ç•Œçš„ä¸€ä¸ªä¸å¯æˆ–ç¼ºçš„è§’åº¦ã€‚è±†ç“£IDï¼š211783344 (FancyIsNotPig)ä¹¦åæ¨èæŒ‡æ•°ä»‹ç»The Inner game of tennisâ˜…â˜…â˜…â˜…â˜…ä»è¿åŠ¨å¿ƒæ€åˆ‡å…¥ï¼Œç”±æœ¯å…¥é“ï¼ã€Šè®ºè¯­ã€‹ã€Šå¤§å­¦Â·ä¸­åº¸ã€‹ã€Šé“å¾·ç»ã€‹â˜…â˜…â˜…â˜…â˜…æˆ‘çš„ç²¾ç¥åœ°åŸºçº§è¯»ç‰©ï¼Œæ¯å¹´éƒ½è¦çœ‹å°é•‡å–§åš£â˜…â˜…â˜…â˜…â˜…åŠå…¬å®¤å…¥é—¨ä¹¦ï¼Œæ¶¨çŸ¥è¯†äº†ï¼ä¸åŸè°…ä¹Ÿæ²¡å…³ç³»â˜…â˜…â˜…â˜…â˜†è§£å†³æˆ‘è€ƒç ”æ—¶æƒ…ç»ªé—ªå›çš„å®è—ä¹¦ã€‚æˆ‘ä»¬å†…å¿ƒçš„å†²çªâ˜…â˜…â˜…â˜…â˜†å¿ƒç†å­¦å…¥é—¨ç¬¬ä¸€æœ¬ä¹¦ã€‚ç¨»ç››å’Œå¤«çš„äººç”Ÿå“²å­¦â˜…â˜…â˜…â˜…â˜†å‘Šè¯‰äº†æˆ‘ä½•ä¸ºè¸å®ï¼Œä½•ä¸ºåšäº‹ã€‚äººç±»ç®€å²â˜…â˜…â˜…â˜…â˜†æ´å¯Ÿæ‰€æœ‰åŒ…è£…å™äº‹èƒŒåçš„ç›®çš„ã€‚æ²§æµªä¹‹æ°´â˜…â˜…â˜…â˜…â˜†æ”¾ä¸‹é¢å­ï¼Œèå…¥è§„åˆ™ä½“ç³»ï¼Œå†…å¤–ç»Ÿä¸€ã€‚é‚“å°å¹³æ—¶ä»£â˜…â˜…â˜…â˜…â˜…æ”¿æ²»å…¥é—¨ä¹¦ï¼Œæ‰“å¼€äº†æ–°ä¸–ç•Œã€‚å–œæ¬¢å”±æ­Œã€‚å–œæ¬¢å¬æ­Œã€‚æ¢¦æƒ³æ˜¯èƒ½è‡ªå·±æŒæ¡ä¹å™¨ï¼Œå’Œå¤§å®¶å…±åŒæ„Ÿå—éŸ³ä¹çš„é­…åŠ›ã€‚æ°‘æ—çš„ï¼Œä¼ ç»Ÿçš„ï¼Œçº¢è‰²çš„ï¼Œæµè¡Œçš„ï¼Œå¤å…¸çš„ï¼Œä¸–ç•Œçš„â€¦â€¦æ¢åšä¸‡èƒ½é’å¹´æ—…åº—David TaoAdeleé‚“ä¸½å›Nujabesä¼ä½°ColdplayKanye WestWestlifeç½—å¤§ä½‘CarpentersEaglesç½‘æ˜“äº‘éŸ³ä¹IDï¼š309174330æ–‡ç« é¡¹ç›®å¾®ä¿¡å…¬ä¼—å·csdnçŸ¥ä¹ç•™è¨€ è¿‘æœŸæ—¥ç¨‹ ç»å†äº†åœ¨æœºæ„ä¸­å¤‡ç ”çš„æ´—ç¤¼ï¼Œæˆ‘æ·±çŸ¥è‡ªå·±èº«ä¸Šæœ‰å¾ˆå¤šä¸è¶³ï¼Œå°¤å…¶æ˜¯æœ‰ä¸€äº›è¯¾é¢˜æˆ‘è¿˜åœ¨æœ‰æ„æ— æ„çš„é€ƒé¿ã€‚ä½†æˆ‘æ·±ä¿¡ï¼Œæˆ‘ä¼šåœ¨ä¸€æ¬¡åˆä¸€æ¬¡çš„è·Œå€’ä¸­çˆ¬èµ·æ¥ï¼Œæ…¢æ…¢çš„æˆä¸ºä¸€ä¸ªåœ†èçš„äººã€‚ ç”Ÿå­˜æ¬²ï¼šå®³æ€•ä¸ç¡®å®šï¼Œä¸å®‰å…¨æ„Ÿéœ€è¦ç»§ç»­ä¿®ç‚¼å¿ƒåŠ›ï¼Œåœ¨ä¸å±åŠç°å®ç”Ÿå‘½å¥åº·çš„æƒ…å†µä¸‹å‹‡æ•¢æŒ‘æˆ˜ä»»ä½•æƒ³åšçš„äº‹ã€‚æ‰‹è„šæ‡’æƒ°è‡³æåªè¯´ä¸åšï¼Œåªè®¡åˆ’ä¸æ‰§è¡Œï¼Œå¹»æƒ³å æ®å¤§éƒ¨åˆ†ç²¾åŠ›ã€‚ç¨å¾®åšäº†ä¸€ç‚¹å°±æ€¥åŠŸè¿‘åˆ©ï¼Œæœ‰å§‹æ— ç»ˆã€‚å˜´æ¯”è„‘å­å¿«CPTSDå®Œç¾ä¸»ä¹‰+å†…åœ¨æ‰¹åˆ¤è€…(è‡ªæˆ‘å®¢ä½“åŒ–)+æƒ…ç»ªé—ªå›ã€‚ å¦‚ä½•è”ç³»åšä¸» QQï¼š1415455617 Wechatï¼šchildlikeflow æœ¬ç«™æ²¡æœ‰ä»»ä½•æ¨å¹¿å’Œæ‰“èµé“¾æ¥ï¼Œå¦‚æœæ‚¨è§‰å¾—å“ªä¸ªä½œå“ä¸é”™ï¼Œæ¬¢è¿åœ¨å¯¹åº”çš„æ–‡ç« ä¸‹é¢ç•™è¨€äº’åŠ¨ä¸€ä¸‹ã€‚"},{"title":"script","path":"/wiki/NOTE/script.html","content":"æ¬ ç¼ºçš„çŸ¥è¯†ç‚¹ï¼ˆç®—æ³•ä¸åŒ…æ‹¬åœ¨å†…ï¼‰ï¼š è®¡ç®—æœºç»„æˆåŸç†ï¼š MITS6.004 å“ˆå·¥å¤§ç½‘è¯¾ 135P ã€ŠCSAPPã€‹ æ“ä½œç³»ç»Ÿï¼š å—äº¬å¤§å­¦ç½‘è¯¾ï¼šè®¡ç®—æœºç³»ç»ŸåŸºç¡€(ä¸€)ï¼ˆäºŒï¼‰ ï¼ˆè¢æ˜¥é£ï¼‰ MIT6.S081 MIT 6.828 å“ˆå·¥å¤§ç½‘è¯¾ 32P æ–°ç«¹æ¸…å65P linux ï¼š å…„å¼Ÿè¿112p ã€Šé¸Ÿå“¥çš„linuxç§æˆ¿èœã€‹ ã€Šlinux é«˜æ€§èƒ½æœåŠ¡å™¨ç¼–ç¨‹ã€‹ ã€Šlinux å†…æ ¸è®¾è®¡ä¸å®ç°ã€‹ sql ï¼š å°šç¡…è°·99pè§†é¢‘ + sqlé¢˜ + sqlç¬”è®° é»‘é©¬ç¨‹åºå‘˜ Redis 175p ã€ŠHigh Performance MYSQLã€‹ ã€ŠMYSQLå¿…çŸ¥å¿…ä¼šã€‹ ã€Šmysqlæ˜¯æ€æ ·è¿è¡Œçš„ã€‹ è®¡ç®—æœºç½‘ç»œï¼š æ¹–ç§‘å¤§å¾®è¯¾å ‚73p ã€Šç½‘ç»œæ˜¯æ€æ ·è¿æ¥çš„ã€‹ CS144ç½‘è¯¾ ã€Šå›¾è§£HTTPã€‹ã€Šå›¾è§£TCPIPã€‹ ã€ŠTCPIPç½‘ç»œç¼–ç¨‹ã€‹ ç¼–è¯‘åŸç†ï¼š CS143ç½‘è¯¾ 127P github é¡¹ç›®ï¼štiny-compiler å…¶ä»–ï¼š ã€ŠCPP primerã€‹ ã€ŠSTLæºç å‰–æã€‹ STLæ³›å‹ç¼–ç¨‹ã€C++11æ–°ç‰¹æ€§ã€å†…å­˜ç®¡ç†ä¸åˆ†æ ï¼› ã€Šæ·±åº¦æ¢ç´¢C++å¯¹è±¡æ¨¡å‹ã€‹ç¬¬ä¸‰ç«  ã€Šmore effective c++ã€‹ ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ ã€Šå¤§è¯è®¾è®¡æ¨¡å¼ã€‹ æ‰©å±•ï¼š ã€ŠPOSIXå¤šçº¿ç¨‹ç¨‹åºè®¾è®¡ã€‹ ã€ŠUNIX ç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹ ã€ŠUNIX ç½‘ç»œç¼–ç¨‹ã€‹ TiDBæ•°æ®åº“ï¼ŒMongoDB è§†é¢‘ makefile ï¼ŒCMake CICD ä¾¯æ·C++è§†é¢‘ã€Šç”Ÿå‰æ­»åã€‹ ã€Šç¼–è¯‘åŸç†ã€‹ï¼ˆæœºæ¢°å·¥ä¸šï¼‰ ã€Šæ“ä½œç³»ç»Ÿå¯¼è®ºã€‹ï¼ˆæœºæ¢°å·¥ä¸šï¼‰ ã€Šè®¡ç®—æœºç½‘ç»œ è‡ªé¡¶å‘ä¸‹ã€‹ ï¼ˆæœºæ¢°å·¥ä¸šï¼‰ Wireshark ç½‘ç»œåˆ†æå°±è¿™ä¹ˆç®€å• ã€ŠTCPIPè¯¦è§£ã€‹ ã€Šè®¾è®¡æ•°æ®å¯†é›†å‹åº”ç”¨ã€‹ ã€Šæ•°æ®å¯†é›†å‹åº”ç”¨ç³»ç»Ÿè®¾è®¡ ã€‹ æ¬ ç¼ºçš„å·¥å…·ï¼š VIM QT Git Nginx Docker WSL"},{"title":"Vim å­¦ä¹ ç¬”è®°","path":"/wiki/NOTE/Vim å­¦ä¹ ç¬”è®°.html","content":"Vim å­¦ä¹ ç¬”è®° bç«™ç”¨æˆ·ï¼šæœ¨ç¾½å¯»æ¸… vimæ™®é€šæ¨¡å¼çš„ç†å¿µæ˜¯ï¼šç§»åŠ¨å’Œæ“ä½œç§»åŠ¨ï¼šå°±æ˜¯å…‰æ ‡ç§»åŠ¨ï¼Œå¿«é€Ÿå®šä½å…‰æ ‡æ“ä½œ:æ“ä½œåæ¥èŒƒå›´ï¼Œè¿™ä¸ªèŒƒå›´â‘ ä»¥å½“å‰å…‰æ ‡ä¸ºèµ·ç‚¹ï¼Œä»¥ä¸€æ¬¡ç§»åŠ¨ä¸ºç»ˆç‚¹ã€‚â‘¡å¯ä»¥ä»¥æ–‡æœ¬å¯¹è±¡ä½œä¸ºèŒƒå›´æ–‡æœ¬å¯¹è±¡ï¼šå®˜æ–¹å®šä¹‰ä¸ºåŒå¼•å·â€œâ€ï¼Œå•å¼•å·â€™â€™ï¼Œå¤§æ‹¬å·{}å°æ‹¬å·ã€ã€‘ç­‰é‡Œé¢çš„å†…å®¹ã€‚æ–‡æœ¬å¯¹è±¡æ‰æ˜¯èƒ½æå¤§æé«˜ç¼–è¾‘é€Ÿåº¦çš„å…³é”®ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ææ¸…æ¥švimå¯ä»¥è§£å†³çš„æ–‡ä»¶ç¼–è¾‘é—®é¢˜:ä¸€ä¸ªæ–‡ä»¶å¯¹äºæ“ä½œç³»ç»Ÿæ˜¯æœ€å°çš„å•ä½ï¼Œå¯¹äºé‡Œé¢çš„å­—ç¬¦å´æ˜¯æœ€å¤§çš„å•ä½ã€‚æˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªæ–‡ä»¶é€çº§åˆ†å‰²æ¥æ›´å‡†ç¡®çš„ç¼–è¾‘:å±å¹•ã€æ®µè½ã€è¡Œã€å•è¯ã€å­—ç¬¦ã€‚æˆ‘ä»¬çš„ä¸Šä¸‹å·¦å³hjklå¯¹åº”çš„æ˜¯å­—ç¬¦çº§ã€‚eï¼Œwï¼Œbå¯¹åº”å•è¯çº§ã€‚$ï¼Œ0ï¼Œfå¯¹åº”è¡Œçº§ã€‚{}å¯¹åº”æ®µè½çº§ã€‚åæ­£éšä½ æ€ä¹ˆåˆ†ï¼Œåªè¦èƒ½ç†è§£è¿™äº›éƒ½æ˜¯æ–‡æœ¬å¯¹è±¡å°±å¥½ï¼Œæ–‡æœ¬å¯¹è±¡å¯ä»¥ç¡®å®šæ“ä½œèŒƒå›´ ä¸‰ç§æ¨¡å¼ï¼šæ™®é€šæ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€æ–‡æœ¬ç¼–è¾‘æ¨¡å¼ã€å¯è§†æ¨¡å¼ã€‚ h j k l æ™®é€šæ¨¡å¼ä¸‹çš„æ–‡æœ¬ç§»åŠ¨é”®ã€‚ è¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œå†æŒ‰ç§»åŠ¨é”®ï¼Œå¯ä»¥è·³è¡Œã€‚ æ¯”å¦‚ 4j æ˜¯å‘ä¸‹è·³4è¡Œã€‚ w é”®å¯ä»¥è·³åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œb é”®è·³åˆ°ä¸Šä¸€ä¸ªå•è¯çš„å¼€å¤´ åŒå‡» G ï¼šå›åˆ°æœ€ä¸Šæ–¹ï¼Œå¯¹åº”homeé”® å¤§å†™çš„Gï¼šå›åˆ°æœ€ä¸‹æ–¹ï¼Œå¯¹åº” end é”® Ctrl+U Ctrl+d ï¼šPage Down å‘ä¸‹ç¿»é¡µ å•å‡» f ï¼šå¯»æ‰¾é”®ã€‚ f + å­—æ¯ï¼šå¯»æ‰¾åˆ°æœ€è¿‘çš„å­—æ¯å¼€å¤´çš„å•è¯ä½ç½®ã€‚ å•å‡» yï¼šå¤åˆ¶ yaw: yank all word ï¼Œå¤åˆ¶æ•´ä¸ªå•è¯ y4j: å¤åˆ¶ä¸‹ 4 è¡Œçš„å†…å®¹ yfrï¼šå¤åˆ¶åˆ° r ä¸ºæ­¢çš„å†…å®¹ å•å‡» pï¼šç²˜è´´ å•å‡» dï¼šåˆ é™¤ delete å•å‡» uï¼šæ’¤é”€ undo å•å‡» iï¼šå…‰æ ‡ä¹‹å‰è¾“å…¥ å•å‡» a: å…‰æ ‡ä¹‹åè¾“å…¥ å•å‡» cï¼šchange caw:åˆ é™¤å…‰æ ‡æ‰€åœ¨å¤„çš„è¯å¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ ccåˆ é™¤è¿™ä¸€è¡Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ æŒ‰ v è¿›å…¥å¯è§†æ¨¡å¼"},{"title":"å…¶ä»–DP","path":"/wiki/algorithm/å…¶ä»–DP.html","content":"åŒºé—´dpçŸ³å­åˆå¹¶ æ•°æ®èŒƒå›´ ï¼š 1â‰¤Nâ‰¤300 é—«æ°dpåˆ†æï¼š çŠ¶æ€è¡¨ç¤ºï¼šf(i,j) é›†åˆ ï¼šæ‰€æœ‰å°†[i,j]åˆå¹¶æˆä¸€å †çš„é›†åˆ j-i+1çš„å—ï¼Œå…± !(j-i) ç§å¯èƒ½çš„æƒ…å†µ å±æ€§ ï¼šmin çŠ¶æ€è®¡ç®—ï¼š ( i |i+1|i+2| â€¦ | j-1 | j | ) f(i,j) åˆ’åˆ†ä¾æ®ä¸ºå·¦è¾¹çš„æœ€åä¸€å † çš„ä¸‹æ ‡ æ¯ä¸€ç±»çš„æœ€å°å€¼ ä¸­ï¼Œå†å–æœ€å°å€¼å³ç­”æ¡ˆã€‚ min ( min (i,k) , min (k+1,j) ) åˆ†æç¬¬ k ç±»ï¼š f (i,j) f(i,k) + f(k+1, j) + s[ j ] - s[i-1] æ±‚æƒå€¼æ—¶ï¼Œç”¨å‰ç¼€å’Œä¼˜åŒ–ä¸€ä¸‹ #includeiostreamusing namespace std; const int N = 305;int f[N][N];int s[N];int n;int main(void) cinn; for(int i=1;i=n;i++) scanf(%d,s[i]); for(int i=1;i=n;i++) s[i] += s[i-1]; //åŒºé—´dp ç¬¬ä¸€æ­¥ï¼šæšä¸¾åŒºé—´é•¿åº¦ (åŒºé—´é•¿åº¦ä¸º1ä¸ç”¨æšä¸¾) for(int len = 2;len=n;len++) for(int l=1;l+len-1=n;l++) //æœ€ååªå‰©ä¸€å †ï¼Œæ‰€ä»¥æ˜¯=n int r = l+len-1; f[l][r] = 1e8; //æˆªkç‚¹ for(int k=l;k+1=r;k++) //å¯¹äº[l, k] kå¯ä»¥å–åˆ° l å¯¹äº[k+1, r] ï¼Œå› ä¸ºk+1 = r, æ‰€ä»¥ k = r - 1, å³ k r f[l][r] = min(f[l][r],f[l][k]+f[k+1][r]+s[r]-s[l-1]); coutf[1][n]; f[l] [r] = 1e8 è¿™ä¸€æ­¥ç›¸å½“äºåˆå§‹åŒ–æ‰€æœ‰kçš„é›†åˆä¸ºæœ€å¤§å€¼ï¼Œè¿™äº›é›†åˆè¿˜æ²¡æœ‰èµ‹å€¼ã€‚ ç­”æ¡ˆåˆ™æ˜¯åœ¨æ‰€æœ‰èµ‹å€¼åçš„kçš„é›†åˆä¸­å–æœ€å°å€¼ å¤æ‚åº¦ï¼š n * n *k , O(n^3) ã€‚ n300 , ä¸¤ç™¾ä¸ƒåä¸‡çš„è¿ç®—é‡ã€‚ è®¡æ•°dpæ•´æ•°åˆ’åˆ†ä¸€ä¸ªæ­£æ•´æ•° nå¯ä»¥è¡¨ç¤ºæˆè‹¥å¹²ä¸ªæ­£æ•´æ•°ä¹‹å’Œï¼Œå½¢å¦‚ï¼šnn1+n2+â€¦+nk å…¶ä¸­ n1â‰¥n2â‰¥â€¦â‰¥nk, kâ‰¥1ã€‚ æˆ‘ä»¬å°†è¿™æ ·çš„ä¸€ç§è¡¨ç¤ºç§°ä¸ºæ­£æ•´æ•° n çš„ä¸€ç§åˆ’åˆ†ã€‚ ç°åœ¨ç»™å®šä¸€ä¸ªæ­£æ•´æ•° nï¼Œè¯·ä½ æ±‚å‡º n å…±æœ‰å¤šå°‘ç§ä¸åŒçš„åˆ’åˆ†æ–¹æ³•ã€‚ è¾“å…¥æ ¼å¼ å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•° nã€‚ è¾“å‡ºæ ¼å¼ å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ€»åˆ’åˆ†æ•°é‡ã€‚ ç”±äºç­”æ¡ˆå¯èƒ½å¾ˆå¤§ï¼Œè¾“å‡ºç»“æœè¯·å¯¹ 109+7109+7 å–æ¨¡ã€‚ æ•°æ®èŒƒå›´ 1â‰¤nâ‰¤1000 è¾“å…¥æ ·ä¾‹: è¾“å‡ºæ ·ä¾‹ï¼š dpå†™æ³•ï¼š çŠ¶æ€è¡¨ç¤ºï¼š é›†åˆ ï¼šf( i , j ) : æ‰€æœ‰æ€»å’Œæ˜¯ i ï¼Œæ°å¥½è¡¨ç¤ºæˆ j ä¸ªæ•°çš„å’Œçš„æ–¹æ¡ˆ å±æ€§ ï¼šsum çŠ¶æ€è®¡ç®—ï¼š â€‹ f(i , j) ï¼š æ ¹æ®æœ€å°å€¼æ˜¯1è¿˜æ˜¯æœ€å°å€¼å¤§äº1åˆ’åˆ† â€‹ ï¼ˆæœ€å°å€¼æ˜¯1|æœ€å°å€¼å¤§äº1ï¼‰ æœ€å°å€¼æ˜¯1ï¼šæ•°é‡ç­‰åŒäºf[i-1,j-1] ä¹Ÿå°±æ˜¯æ€»å’Œæ˜¯ i-1,ç”¨ j-1 ä¸ªæ•°è¡¨ç¤ºçš„æ–¹æ¡ˆ æœ€å°å€¼å¤§äº1 ï¼šæ•°é‡ç­‰åŒäº f( i-j , j) å¤§äº1çš„æ¯ä¸ªæ•°ï¼Œå‡å»ä¸€ä¸ª1ï¼Œè¿˜æ˜¯æœ‰jä¸ªæ•°ã€‚ æ‰€ä»¥ç»¼ä¸Šï¼Œsum = f(i , 1) + f(i , 2) + f(i , 3) +... f(i , i) . const int N = 1010, mod = 1e9 + 7;int n;int f[N][N];int main() cin n; f[1][1] = 1; for (int i = 2; i = n; i ++ ) for (int j = 1; j = i; j ++ ) f[i][j] = (f[i - 1][j - 1] + f[i - j][j]) % mod; int res = 0; for (int i = 1; i = n; i ++ ) res = (res + f[n][i]) % mod; cout res endl; return 0; å®Œå…¨èƒŒåŒ…è§£æ³•ï¼š æŠŠè¿™é¢˜æŠ½è±¡æˆï¼Œä¸€ä¸ªå®¹é‡ä¸º n çš„èƒŒåŒ…ï¼Œæœ‰ n ä¸ªç‰©å“ ï¼šä½“ç§¯åˆ†åˆ«æ˜¯1ã€2ã€ 3 â€¦ n ã€‚ çŠ¶æ€è¡¨ç¤ºï¼š é›†åˆ ï¼šf( i , j ) : æ‰€æœ‰ä»1åˆ° i ä¸­é€‰ï¼Œä½“ç§¯æ°å¥½æ˜¯ j çš„é€‰æ³•çš„æ•°é‡ å±æ€§ ï¼šsum çŠ¶æ€è®¡ç®—ï¼š f(i , j) ï¼š æ ¹æ®æœ€åä¸€ä¸ªç‰©å“é€‰æ‹©äº†å‡ ä¸ªæ¥å®šä¹‰åˆ’åˆ†åŒºé—´ã€‚ â€‹ ï¼ˆ0|1|2|3|...|sï¼‰ â€‹ f(i-1,j) | f(i-1,j-i)| f(i-1, j-2i)|...| f(i-1,j - s i) æ•…æœ‰ï¼š f[i] [j] = f[i-1] [j] + f[i-1] [j-i] + f[i-1] [j-2i]+... f[i-1] [j-si] //1f[i] [j-i] = f[i-1] [j-i] + f[i-1] [j-2i]+... f[i-1] [j-si] //2 1-2 f[i] [j] - f[i] [j-i] f[ i-1 ] [j] æ‰€ä»¥å¯å¾— f[i] [j] = f[i] [j-i]+ f[ i-1 ] [j] åŒå®Œå…¨èƒŒåŒ…ä¸€æ ·ï¼Œå‹ç¼©æˆä¸€ç»´ï¼š f[j] = f [j-i]+ f [j] #includeiostreamusing namespace std;const int N = 1010;int n;int f[N][N]; // ä½¿ç”¨å‰iä¸ªæ•°æ°å¥½èƒ½ç»„æˆæ•°jçš„æ–¹æ¡ˆæ•°int mod = 1e9 + 7;int main() cinn; for(int i = 0; i = n; i++) f[i][0] = 1; // ä½¿ç”¨å‰iä¸ªæ•°ç»„æˆ0ï¼Œæ¯ä¸€ä¸ªéƒ½æœ‰1ç§è§£æ³•ï¼ˆéƒ½ä¸é€‰ï¼‰ //f[0][0] = 1; for(int i = 1; i = n; i++) for(int j = 1; j = n; j++) // æ³¨æ„ï¼Œä½¿ç”¨äºŒç»´æ—¶éœ€è¦ä¸€ä¸ªä¼˜åŒ–ï¼Œéœ€è¦è€ƒè™‘å½“iæ¯”jå°æ—¶çš„æƒ…å†µå’Œi=jçš„æƒ…å†µ: //å¦‚æœ ijï¼Œå°±æ„å‘³ç€ä¸€ä¸ªä¹Ÿé€‰ä¸ä¸Šï¼Œåªèƒ½å’Œ (i,i-1) ç›¸åŒã€‚ f[i][j] = (f[i-1][j]) % mod; if(j = i) f[i][j] = (f[i][j] + f[i][j-i]) % mod; // or f[i][j] = (f[i][j-i] + f[i-1][j])%mod; coutf[n][n]; return 0;/*ä¸€ç»´ï¼š cinn; for(int i=1;i=n;i++) f[0] = 1; for(int i=1;i=n;i++) for(int j=i;j=n;j++) f[j] = (f[j]+f[j-i])%mod; coutf[n];*/ æ•°ä½ç»Ÿè®¡dpè®¡æ•°é—®é¢˜ç»™å®šä¸¤ä¸ªæ•´æ•° a å’Œ bï¼Œæ±‚ a å’Œ b ä¹‹é—´çš„æ‰€æœ‰æ•°å­—ä¸­ 0âˆ¼9 çš„å‡ºç°æ¬¡æ•°ã€‚ ä¾‹å¦‚ï¼Œa1024ï¼Œb1032ï¼Œåˆ™ a å’Œ b ä¹‹é—´å…±æœ‰ 99 ä¸ªæ•°å¦‚ä¸‹ï¼š 1024 1025 1026 1027 1028 1029 1030 1031 1032 å…¶ä¸­ 0 å‡ºç° 1010 æ¬¡ï¼Œ1 å‡ºç° 1010 æ¬¡ï¼Œ2 å‡ºç° 77 æ¬¡ï¼Œ3 å‡ºç° 33 æ¬¡ç­‰ç­‰â€¦ è¾“å…¥æ ¼å¼ è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ã€‚ æ¯ç»„æµ‹è¯•æ•°æ®å ä¸€è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° aa å’Œ bbã€‚ å½“è¯»å…¥ä¸€è¡Œä¸º 0 0 æ—¶ï¼Œè¡¨ç¤ºè¾“å…¥ç»ˆæ­¢ï¼Œä¸”è¯¥è¡Œä¸ä½œå¤„ç†ã€‚ è¾“å‡ºæ ¼å¼ æ¯ç»„æ•°æ®è¾“å‡ºä¸€ä¸ªç»“æœï¼Œæ¯ä¸ªç»“æœå ä¸€è¡Œã€‚ æ¯ä¸ªç»“æœåŒ…å«åä¸ªç”¨ç©ºæ ¼éš”å¼€çš„æ•°å­—ï¼Œç¬¬ä¸€ä¸ªæ•°å­—è¡¨ç¤º 0 å‡ºç°çš„æ¬¡æ•°ï¼Œç¬¬äºŒä¸ªæ•°å­—è¡¨ç¤º 1 å‡ºç°çš„æ¬¡æ•°ï¼Œä»¥æ­¤ç±»æ¨ã€‚ æ•°æ®èŒƒå›´ 0a,b100000000 æ ¸å¿ƒæ€æƒ³ï¼šåˆ†æƒ…å†µè®¨è®º æ ¸å¿ƒå‡½æ•° ï¼šcount(n,x) : è®¡ç®— 1~n ï¼Œxå‡ºç°çš„æ¬¡æ•°ã€‚ é¢˜è§£å³ count(b,x) - count(a,x) ã€‚ 1~n , x 1 n abcdefg åˆ†åˆ«æ±‚å‡º1åœ¨æ¯ä¸€ä½ä¸Šå‡ºç°çš„æ¬¡æ•° ä¸¾ä¾‹ï¼š æ±‚1åœ¨ç¬¬4ä½ä¸Šå‡ºç°çš„æ¬¡æ•°ï¼š 1=xxx1yyy = abcdefg xxx 000abc-1 , yyy 000999 ï¼šabc*1000 xxxabc : d1 , abc1yyy abc0efg : 0 d1, yyy000~efg ï¼š efg+1 d1, yyy000~999 : 1000 å¤æ‚åº¦ï¼š10 * 2 * 8 * 10 1600 10ä¸ªæ•°å­—ï¼Œ2æ¬¡è°ƒç”¨å‡½æ•°ï¼Œ8ä½ ï¼Œ 10æ¬¡å‡½æ•°å†…å¾ªç¯ è¾¹ç•Œé—®é¢˜ï¼š æšä¸¾æ•°å­—åœ¨æœ€é«˜ä½ï¼Œæƒ…å†µä¸€ ä¸å­˜åœ¨ 2.æšä¸¾æ•°å­— 0 ï¼Œä»001å¼€å§‹å–åˆ° abc ã€‚å› ä¸ºä¸èƒ½æœ‰å‰å¯¼0ã€‚ #include iostream#include algorithm#include vectorusing namespace std;const int N = 10;int get(vectorint num, int l, int r) //æ•°å­— l~r ä½çš„æ•°å­— int res = 0; //æ³¨æ„ï¼šç”±äºvectoræ˜¯é€†åºå­˜æ•°ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿè¦é€†åº for (int i = l; i = r; i -- ) res = res * 10 + num[i]; return res;int power10(int x) // return 10^x int res = 1; while (x -- ) res *= 10; return res;int count(int n, int x) //1~n ä¸­ xå‡ºç°çš„æ¬¡æ•° if (!n) return 0; //1~0ä¸è®¡æ•° vectorint num; while (n) //åè½¬æ•°ç»„ï¼Œä»å³å¾€å·¦æ•° num.push_back(n % 10); n /= 10; n = num.size();//è®°ä½æ•° int res = 0; //special 1 â†“ for (int i = n - 1 - !x; i = 0; i -- ) //ä»æœ€å·¦è¾¹å¼€å§‹éå†è®¡æ•°:æ±‚xåœ¨ç¬¬iä½çš„æ•°é‡ //ï¼ˆé’ˆå¯¹æ‰€æœ‰èŒƒå›´å†…çš„æŠ½è±¡æ•°) if (i n - 1) res += get(num, n - 1, i + 1) * power10(i); if (!x) res -= power10(i); //special 2 //è¿™é‡Œä¸Šä¸‹æ˜¯ä¸¤ç§æƒ…å†µï¼Œä¸Šä¸ºxå·¦ä½æ˜¯ 00...x~ab..xçš„æƒ…å†µï¼Œä¸‹ä¸ºx..~x..efçš„æƒ…å†µ //é€»è¾‘ä¸Šæ˜¯ä¸¤ä¸ªå¹¶åˆ—å¾ªç¯ï¼Œå¾ªç¯æ¡ä»¶ç›¸åŒæ‰€ä»¥æ”¾åœ¨ä¸€ä¸ªå¾ªç¯ä¸­ã€‚ //1.num[i] x:0 ä¸è®¡æ•°ï¼Œä¸è€ƒè™‘ if (num[i] == x) res += get(num, i - 1, 0) + 1;//2. else if (num[i] x) res += power10(i); return res;int main() int a, b; while (cin a b , a) if (a b) swap(a, b); for (int i = 0; i = 9; i ++ ) cout count(b, i) - count(a - 1, i) ; cout endl; return 0; countå‡½æ•°é‡Œï¼Œä¸¤ä¸ª!xå‡ºç°çš„ä½ç½®å³å¯¹äºä¸¤ä¸ªç‰¹æ®Šæƒ…å†µçš„è§£ã€‚ 1.æšä¸¾æ•°å­—åœ¨æœ€é«˜ä½ï¼Œæƒ…å†µä¸€ ä¸å­˜åœ¨ã€‚ for (int i = n - 1 - !x; i = 0; i -- ) æœ€å·¦ä½ä¸èƒ½æ˜¯ 0 (å‰ç½®0)ï¼Œå¦‚æœ x ä¸º 0ï¼Œåˆ™éå†ä» n-2å¼€å§‹ï¼›ä¸ä¸º 0 åˆ™ä» n-1å¼€å§‹ã€‚ 2.x==0æ—¶ ï¼Œéœ€è¦ä»001å¼€å§‹å–åˆ° abc if (!x) res -= power10(i); æ³¨æ„ï¼š count(b, i) - count(a - 1, i) ;res += get(num, n - 1, i + 1) * power10(i);if (num[i] == x) res += get(num, i - 1, 0) + 1; è¿™ä¸‰ä¸ªè¾¹ç•Œæ˜¯å¦è¦ +1ã€-1 å¾ˆå®¹æ˜“å‡ºå·®é”™ã€‚ æ ‘å½¢dpæ²¡æœ‰ä¸Šå¸çš„èˆä¼šUral å¤§å­¦æœ‰ NN åèŒå‘˜ï¼Œç¼–å·ä¸º 1âˆ¼Nã€‚ ä»–ä»¬çš„å…³ç³»å°±åƒä¸€æ£µä»¥æ ¡é•¿ä¸ºæ ¹çš„æ ‘ï¼Œçˆ¶èŠ‚ç‚¹å°±æ˜¯å­èŠ‚ç‚¹çš„ç›´æ¥ä¸Šå¸ã€‚ æ¯ä¸ªèŒå‘˜æœ‰ä¸€ä¸ªå¿«ä¹æŒ‡æ•°ï¼Œç”¨æ•´æ•° HiHi ç»™å‡ºï¼Œå…¶ä¸­ 1â‰¤iâ‰¤Nã€‚ ç°åœ¨è¦å¬å¼€ä¸€åœºå‘¨å¹´åº†å®´ä¼šï¼Œä¸è¿‡ï¼Œæ²¡æœ‰èŒå‘˜æ„¿æ„å’Œç›´æ¥ä¸Šå¸ä¸€èµ·å‚ä¼šã€‚ åœ¨æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„å‰æä¸‹ï¼Œä¸»åŠæ–¹å¸Œæœ›é‚€è¯·ä¸€éƒ¨åˆ†èŒå‘˜å‚ä¼šï¼Œä½¿å¾—æ‰€æœ‰å‚ä¼šèŒå‘˜çš„å¿«ä¹æŒ‡æ•°æ€»å’Œæœ€å¤§ï¼Œæ±‚è¿™ä¸ªæœ€å¤§å€¼ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° Nã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œç¬¬ i è¡Œè¡¨ç¤º ii å·èŒå‘˜çš„å¿«ä¹æŒ‡æ•° Hiã€‚ æ¥ä¸‹æ¥ Nâˆ’1 è¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸€å¯¹æ•´æ•° L,Kï¼Œè¡¨ç¤º K æ˜¯ L çš„ç›´æ¥ä¸Šå¸ã€‚ï¼ˆæ³¨æ„ä¸€ä¸‹ï¼Œåä¸€ä¸ªæ•°æ˜¯å‰ä¸€ä¸ªæ•°çš„çˆ¶èŠ‚ç‚¹ï¼Œä¸è¦æåï¼‰ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºæœ€å¤§çš„å¿«ä¹æŒ‡æ•°ã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤6000ï¼Œâˆ’128â‰¤Hiâ‰¤127 çŠ¶æ€è¡¨ç¤ºï¼šf(u, 10) é›†åˆ ï¼š f( u , 0 ) : ä»ä»¥uä¸ºæ ¹çš„å­æ ‘å½“ä¸­é€‰æ‹©ï¼Œå¹¶ä¸”ä¸é€‰ u çš„æ–¹æ¡ˆ ; f( u , 1 ) : ä»ä»¥uä¸ºæ ¹çš„å­æ ‘å½“ä¸­é€‰æ‹©ï¼Œå¹¶ä¸”é€‰ u çš„æ–¹æ¡ˆã€‚ å±æ€§ ï¼šmax çŠ¶æ€è®¡ç®—ï¼š f( u , 0 ) : ä¸é€‰ uï¼Œä¸ºäº†æœ€å¤§å€¼ï¼Œè¦é€‰æ‹©å­æ ‘ä¸­çš„æœ€å¤§å€¼ã€‚(å¯¹æ¯ä¸ªå­æ ‘ï¼Œæ—¢å¯ä»¥é€‰ï¼Œä¹Ÿå¯ä»¥ä¸é€‰) f(u , 0) = âˆ‘ max( f( si,1 ) ï¼Œ f( si , 0) ) f( u , 1 ) : å·²ç»é€‰uäº†ï¼Œå­æ ‘ä¸èƒ½é€‰äº†ã€‚ f(u,1) = âˆ‘ f(si,0) æ—¶é—´å¤æ‚åº¦ï¼šæ¯ä¸ªç»“ç‚¹çŠ¶æ€è®¡ç®—çš„æ˜¯å®ƒçš„å„¿å­ï¼Œæ‰€ä»¥è®¡ç®—æ‰€æœ‰çŠ¶æ€ç›¸å½“äºéå†ä¸€éï¼Œå³ O(n) æ­¤é¢˜ç”»å›¾æ›´å¥½ç†è§£ã€‚ ç±»ä¼¼çŠ¶æ€æœºï¼Œä½†å’ŒçŠ¶æ€æœºæ²¡ä»€ä¹ˆå…³ç³»ã€‚ #include cstring#include iostream#include algorithmusing namespace std;const int N = 6010;int n;int happy[N]; //å¼€å¿ƒå€¼int h[N],e[N],ne[N],idx;//é‚»æ¥è¡¨bool has_fa[N];//åˆ¤æ–­æœ‰æ— çˆ¶èŠ‚ç‚¹ï¼Œä»è€Œå¯»æ‰¾æ ¹èŠ‚ç‚¹int f[N][2]; //dpå–½void add(int a, int b) e[idx] = b, ne[idx] = h[a], h[a] = idx ++ ;void dfs(int u) f[u][1] = happy[u]; for (int i = h[u]; ~i; i = ne[i]) //~i = i!=-1 int j = e[i]; dfs(j); f[u][1] += f[j][0]; f[u][0] += max(f[j][0], f[j][1]); int main() scanf(%d, n); for (int i = 1; i = n; i ++ ) scanf(%d, happy[i]); memset(h, -1, sizeof h); for (int i = 0; i n - 1; i ++ ) int a, b; scanf(%d%d, a, b); add(b, a); has_fa[a] = true; int root = 1; while (has_fa[root]) root ++ ; dfs(root); printf(%d , max(f[root][0], f[root][1])); return 0; è®°å¿†åŒ–æœç´¢æ»‘é›ªç»™å®šä¸€ä¸ª R è¡Œ C åˆ—çš„çŸ©é˜µï¼Œè¡¨ç¤ºä¸€ä¸ªçŸ©å½¢ç½‘æ ¼æ»‘é›ªåœºã€‚ çŸ©é˜µä¸­ç¬¬ i è¡Œç¬¬ j åˆ—çš„ç‚¹è¡¨ç¤ºæ»‘é›ªåœºçš„ç¬¬ i è¡Œç¬¬ j åˆ—åŒºåŸŸçš„é«˜åº¦ã€‚ ä¸€ä¸ªäººä»æ»‘é›ªåœºä¸­çš„æŸä¸ªåŒºåŸŸå†…å‡ºå‘ï¼Œæ¯æ¬¡å¯ä»¥å‘ä¸Šä¸‹å·¦å³ä»»æ„ä¸€ä¸ªæ–¹å‘æ»‘åŠ¨ä¸€ä¸ªå•ä½è·ç¦»ã€‚ å½“ç„¶ï¼Œä¸€ä¸ªäººèƒ½å¤Ÿæ»‘åŠ¨åˆ°æŸç›¸é‚»åŒºåŸŸçš„å‰ææ˜¯è¯¥åŒºåŸŸçš„é«˜åº¦ä½äºè‡ªå·±ç›®å‰æ‰€åœ¨åŒºåŸŸçš„é«˜åº¦ã€‚ ä¸‹é¢ç»™å‡ºä¸€ä¸ªçŸ©é˜µä½œä¸ºä¾‹å­ï¼š 1 2 3 4 516 17 18 19 615 24 25 20 714 23 22 21 813 12 11 10 9 åœ¨ç»™å®šçŸ©é˜µä¸­ï¼Œä¸€æ¡å¯è¡Œçš„æ»‘è¡Œè½¨è¿¹ä¸º 24âˆ’17âˆ’2âˆ’1ã€‚ åœ¨ç»™å®šçŸ©é˜µä¸­ï¼Œæœ€é•¿çš„æ»‘è¡Œè½¨è¿¹ä¸º 25âˆ’24âˆ’23âˆ’â€¦âˆ’3âˆ’2âˆ’1ï¼Œæ²¿é€”å…±ç»è¿‡ 2525 ä¸ªåŒºåŸŸã€‚ ç°åœ¨ç»™å®šä½ ä¸€ä¸ªäºŒç»´çŸ©é˜µè¡¨ç¤ºæ»‘é›ªåœºå„åŒºåŸŸçš„é«˜åº¦ï¼Œè¯·ä½ æ‰¾å‡ºåœ¨è¯¥æ»‘é›ªåœºä¸­èƒ½å¤Ÿå®Œæˆçš„æœ€é•¿æ»‘é›ªè½¨è¿¹ï¼Œå¹¶è¾“å‡ºå…¶é•¿åº¦(å¯ç»è¿‡æœ€å¤§åŒºåŸŸæ•°)ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° R å’Œ Cã€‚ æ¥ä¸‹æ¥ R è¡Œï¼Œæ¯è¡ŒåŒ…å« C ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå®Œæ•´çš„äºŒç»´çŸ©é˜µã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºå¯å®Œæˆçš„æœ€é•¿æ»‘é›ªé•¿åº¦ã€‚ æ•°æ®èŒƒå›´ 1â‰¤R,Câ‰¤3000â‰¤çŸ©é˜µä¸­æ•´æ•°â‰¤10000 è¾“å…¥æ ·ä¾‹ï¼š 5 51 2 3 4 516 17 18 19 615 24 25 20 714 23 22 21 813 12 11 10 9 è¾“å‡ºæ ·ä¾‹ï¼š çŠ¶æ€è¡¨ç¤ºï¼šf ( i , j ) äºŒç»´è·¯å¾„å˜›ã€‚ é›†åˆ ï¼šæ‰€æœ‰ä»( i,j )å¼€å§‹æ»‘çš„è·¯å¾„ä¸­çš„æœ€å¤§å€¼ å±æ€§ ï¼šmax çŠ¶æ€è®¡ç®—ï¼š ( â†‘ | â†“ | â† | â†’ ) æ—¶é—´å¤æ‚åº¦ï¼šæ¯ä¸ªç»“ç‚¹çŠ¶æ€è®¡ç®—çš„æ˜¯å®ƒçš„å„¿å­ï¼Œæ‰€ä»¥è®¡ç®—æ‰€æœ‰çŠ¶æ€ç›¸å½“äºéå†ä¸€éï¼Œå³ O(n) å­˜åœ¨ä¸€ä¸ªæœ€å¤§å€¼ï¼Œå¦‚æœæ‰€æœ‰ç»“ç‚¹çš„å€¼éƒ½å‡å»å›ºå®šå€¼ï¼Œè¯¥å€¼ä»ç„¶ä½œä¸ºæœ€å¤§å€¼ã€‚ åŒç†ï¼šå¦‚æœä½ è¦æ±‚ (i , j) ç‚¹çš„æœ€å¤§å€¼ï¼Œå‡è®¾å‘å³éå†ï¼Œåˆ™éœ€è¦ (i+1, j ) çš„æœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„ : f(i , j) = f( i+1 , j) +1ã€‚ ä½†å‘å³éå†åªæ˜¯ä¸€ç§æƒ…å†µã€‚ è€ƒè™‘å››ç§æƒ…å†µçš„å¼å­ä¸ºï¼šf[i][j] = max(f[i][j],f[tx][ty]+1); ä¸¾ä¸ªä¾‹å­ï¼š å¯¹äº 25âˆ’24âˆ’23âˆ’â€¦âˆ’3âˆ’2âˆ’1 ï¼Œè¿™ä¸ªè·¯å¾„çš„æ±‚å–è¿‡ç¨‹å°±æ˜¯ä»å³å¾€å·¦ã€‚ é€’å½’ç¨‹åºä» 25 è°ƒç”¨ï¼Œä¸€ç›´åˆ° 1ï¼Œå†ä»å³å¾€å·¦ åŠ å’Œ å¹¶å›æº¯ã€‚ #includeiostream#includememory.husing namespace std ;const int N = 310;int n,m;int g[N][N];int f[N][N];int dir[4][2] = 0,1,1,0,0,-1,-1,0;int dp(int x,int y) int v = f[x][y]; if(v!=-1) return v; //æ¯ä¸ªç‚¹åªæ±‚ä¸€æ¬¡è·¯å¾„æœ€å¤§å€¼ v = 1; for(int i=0;i4;i++) int tx = x + dir[i][0], ty = y + dir[i][1]; if(tx=1ty=1tx=nty=mg[tx][ty]g[x][y]) v = max(v,dp(tx,ty)+1); return v;int main(void) cinnm; for(int i=1;i=n;i++) for(int j=1;j=m;j++) cing[i][j]; memset(f,-1,sizeof f); int res =0; for(int i=1;i=n;i++) for(int j=1;j=m;j++) res = max(res,dp(i,j)); //dpï¼šæ‰€æœ‰ä»¥(iï¼Œj)ä¸ºèµ·ç‚¹æ»‘çš„è·¯å¾„ä¸­çš„æœ€å¤§å€¼ coutres; return 0; çŠ¶æ€å‹ç¼©dpè’™å¾·é‡Œå®‰çš„æ¢¦æƒ³æ±‚æŠŠ NÃ—M çš„æ£‹ç›˜åˆ†å‰²æˆè‹¥å¹²ä¸ª 1Ã—2 çš„é•¿æ–¹å½¢ï¼Œæœ‰å¤šå°‘ç§æ–¹æ¡ˆã€‚ ä¾‹å¦‚å½“ N2ï¼ŒM4 æ—¶ï¼Œå…±æœ‰ 5 ç§æ–¹æ¡ˆã€‚å½“ N2ï¼ŒM3 æ—¶ï¼Œå…±æœ‰ 3 ç§æ–¹æ¡ˆã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š è¾“å…¥æ ¼å¼ è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•ç”¨ä¾‹ã€‚ æ¯ç»„æµ‹è¯•ç”¨ä¾‹å ä¸€è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° N å’Œ Mã€‚ å½“è¾“å…¥ç”¨ä¾‹ N0ï¼ŒM0 æ—¶ï¼Œè¡¨ç¤ºè¾“å…¥ç»ˆæ­¢ï¼Œä¸”è¯¥ç”¨ä¾‹æ— éœ€å¤„ç†ã€‚ è¾“å‡ºæ ¼å¼ æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹è¾“å‡ºä¸€ä¸ªç»“æœï¼Œæ¯ä¸ªç»“æœå ä¸€è¡Œã€‚ æ•°æ®èŒƒå›´ 1â‰¤N,Mâ‰¤11 è¾“å…¥æ ·ä¾‹ï¼š 1 21 31 42 22 32 42 114 110 0 è¾“å‡ºæ ·ä¾‹ï¼š æœ€çŸ­Hamiltonè·¯å¾„ç»™å®šä¸€å¼  n ä¸ªç‚¹çš„å¸¦æƒæ— å‘å›¾ï¼Œç‚¹ä»0âˆ¼nâˆ’1 æ ‡å·ï¼Œæ±‚èµ·ç‚¹ 0 åˆ°ç»ˆç‚¹ nâˆ’1 çš„æœ€çŸ­ Hamilton è·¯å¾„ã€‚ Hamilton è·¯å¾„çš„å®šä¹‰æ˜¯ä» 0 åˆ° nâˆ’1 ä¸é‡ä¸æ¼åœ°ç»è¿‡æ¯ä¸ªç‚¹æ°å¥½ä¸€æ¬¡ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡Œè¾“å…¥æ•´æ•° nã€‚ æ¥ä¸‹æ¥ n è¡Œæ¯è¡Œ n ä¸ªæ•´æ•°ï¼Œå…¶ä¸­ç¬¬ i è¡Œç¬¬ j ä¸ªæ•´æ•°è¡¨ç¤ºç‚¹ i åˆ° j çš„è·ç¦»ï¼ˆè®°ä¸º a[i,j]ï¼‰ã€‚ å¯¹äºä»»æ„çš„ x,y,zx,y,zï¼Œæ•°æ®ä¿è¯ a[x,x]0ï¼Œa[x,y]a[y,x] å¹¶ä¸” a[x,y]+a[y,z]â‰¥a[x,z]ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€çŸ­ Hamilton è·¯å¾„çš„é•¿åº¦ã€‚ æ•°æ®èŒƒå›´ 1â‰¤nâ‰¤200â‰¤a[i,j]â‰¤107 è¾“å…¥æ ·ä¾‹ï¼š 0 2 4 5 12 0 6 5 34 6 0 8 35 5 8 0 51 3 3 5 0 è¾“å‡ºæ ·ä¾‹ï¼š"},{"title":"è‹±è¯­éšç¬”","path":"/wiki/NOTE/è‹±è¯­éšç¬”.html","content":"Day1 Day2you are such cunning and eccentric. you know society is turbulent now,you still rob the peasantâ€™s beast. This guy is really poverty and just eat cabbage dipped in vinegar everyday. i think you are discriminate with him. he is crude and naive like a primitive person. so you should esteem him in an appropriate way.i will appreciate you for him.i bet you will become a society prime prototype. this will facilitate social atmosphere about personal virtue. believe me. this is social transition. everything is transient. In retrospect, i know you are a earnest man with good prestige precedent. thatâ€™s all. i am not malignant to told above. this is a towel,wipe the sweat off your face and beard. you are thirsty,isnâ€™t you? i am going to buy a beverage for you. è‹±è¯­ä¸­ â€œIâ€ï¼ˆæˆ‘ï¼‰æ— è®ºåœ¨å¥é¦–è¿˜æ˜¯å¥ä¸­ï¼Œå‡éœ€å¤§å†™ï¼Œå±äºåŸºç¡€è¯­æ³•è§„åˆ™ã€‚ Day3During the process of being granted this honor,i encountered many obstacles. An impressive curriculum is no matter how you eminent or having a great deal of wealth,you must heighten your inward stability and spiritual strength, retort that with your actions when faced with doubts. Not being scolded by others is transparent person. Well, i always record my fragmented rational thought in my pamphlet. For those merchant who report revenue in accordance with the law, we should grant the badge to them. This can spur their enthusiasm , credibility and initiative. At that novel murder ,the girl strolled with her friend . it was a damp rainy day. the suspect peep at them and utilize his instrument to approach them without a sound. With a gunshot , all youngsters gallop to all directions. Then that girlâ€™s belly got injured. The criminal suspect linger at the crime scene for a few minutes. Cops think that her good friend has a criminal prone. The public hope to uncover the truth as soon as possible. Otherwise,the citizen(civilian) would fright by the murderer and the cityâ€™s civilization will distort. ä¸ºäº†èƒŒå•è¯ï¼ŒåŠ¨è¯æ²¡åŠ è¿‡å»æ—¶ã€‚ cue plot , rake sake , belly abdomen , mud clay , mechanism merchant mechanical , bandage badge Day4plug bolt , fell brutal reckless ruthless , strip shedding When Little Gezz sent a fax to his foreign friend, he received a photo of an exotic view. He still remembers the embarrassing time he spent fooling around with his friends. He was running, turned around, and wasnâ€™t paying attention to what was behind himâ€”so he bumped into a girl. He apologized for the foolish behavior caused by his carelessness. The head teacher convicted him without hesitation, as this anticipation was what all his classmates had expected. His behavior lowered the schoolâ€™s criterions. embrrassedä¿®é¥°äºº embrrassing ä¿®é¥°ç‰© ï¼Œäº‹ This is the warehouseâ€™s inventory ,please sign your signature . Besides(additionally), this is the directory of your superiors. If something happens,call them promptly. After a short while ,they will come to have a rehearsal. the majority of civilians have their ballot. Because of your vulgarity, recklessness and vanity, you are the exception. You have the typical traits of someone from the lower class. Maybe you have the syndromes of flash back. Even a butcher can become a pilgrim. Awakening is the process of shedding labels and letting go of all attachments. Eating bacon and drinking tea both have a sense of tranquility. Even the most insignificant and marginal matters should be fully immersed in. should be approached with full engagement å…¨èº«å¿ƒæŠ•å…¥ Mr.Detective ,donâ€™t let your hound hound me or else i will put my stick penetrate into it as easily as i would pinch a mosquito. peasant had swept the weed and irrigate the field,the land is slippery and full of damp mud .This will augment cropsâ€™ nutrition and harvest. Letâ€™s look forward to their maturity and ripe. His dad is a navy colonel configuring any naval resources and a magistrate appointed by coalition and summit. He keep us away from strife. Maybe he have internal discounts or coupons. If you want to buy a McLaren, contact with him. granted - appointed column æŸ±å­ä¸“æ  colonel ä¸Šæ ¡ weapon coupon Donâ€™t be pessimistic .This herb can cure the herdâ€™s plague and infections. I have obtained the testimony to prove it by spying day by day. Your thinking is too rigid. When you do pull-ups and hang,donâ€™t shrug definitely. This way you can engage your back muscle and stiff spine. If you just watch and donâ€™t act, youâ€™ll always be a spectator. ï¼ˆä¸€ï¼‰å¿…é¡»åŠ å† è¯çš„æƒ…å†µ ä¸å®šå† è¯ï¼ˆaanï¼‰ï¼šæ³›æŒ‡ â€œä¸€ä¸ªâ€ï¼Œç”¨äºå•æ•°å¯æ•°åè¯å‰ å®šå† è¯ï¼ˆtheï¼‰ï¼šç‰¹æŒ‡ â€œè¿™ä¸ª é‚£ä¸ª è¿™äº› é‚£äº›â€ï¼Œæˆ–æŒ‡ä»£å·²çŸ¥ã€å”¯ä¸€çš„äº‹ç‰© ï¼ˆäºŒï¼‰ä¸åŠ å† è¯ï¼ˆé›¶å† è¯ï¼‰çš„æƒ…å†µ ä¸å¯æ•°åè¯è¡¨æ³›æŒ‡æ—¶ å¤æ•°å¯æ•°åè¯è¡¨æ³›æŒ‡æ—¶ ä¸“æœ‰åè¯å‰ å›ºå®šæ­é…ä¸­ Day5Under the indication of God,Mr.Hospitt alleged to dedicate all his body and mind to the cause(enterprise) as a candleï¼ˆwax) burning itself. He wants to release periodicals periodical . But as soon as he engage in work, he finds he is tired. If the work time is over , He is kidnaped by his phone and social apps , instantaneous lying on the couch. This has become a vicious circle. So this day he goes outing. This aggravate him and he frequently wander alone the inlet when he feel hysteria. Beside the inlet is a cemetery which is full of various tombs. He just thinks that why people are keen to make distinctions even after death? These little cement stones segregate humans from paradise and hell. He fills a jug with water and sprinkles the flowers. Maybe this is the only way to repay nature and console his broken heart because of malpractice. He doesnâ€™t want to become a notorious guy that lives in shames. The tide rolls in and rolls out, just like the ups and downs in life. This time , he deems that he has got the tranquility from the tide waveâ€”â€”not about maintaining fragile perfection but keeping positive even if at lowest ebb. Satire ,cheer , doubt ,urge ,conceitï¼ˆarrogantï¼‰ , inferiorityâ€¦â€¦all voices was receding. Only the peaceful self stands still, accompanied by the gentle breeze, accepting everything. The tide rises and fallsï¼Œ comes and goesâ€¦â€¦ satire , irony Have you digested the superb digest from the periodical that I selected for you carefully? Donâ€™t be harassed by external disturbances.ï¼ˆä½ ç†è§£äº†æˆ‘ä»è¿™ä¸ªæœŸåˆŠç²¾å¿ƒæŒ‘é€‰çš„é«˜è´¨é‡æ‘˜è¦äº†å—ï¼Ÿï¼‰ I managed to wedge the last book into the already full shelf.ï¼ˆæˆ‘å¥½ä¸å®¹æ˜“æŠŠæœ€åä¸€æœ¬ä¹¦å¡è¿›äº†å·²ç»æ»¡äº†çš„ä¹¦æ¶ã€‚ï¼‰We wedged ourselves into the crowded subway car during rush hour. I incorporate a corporation with my partner , and we cooperate coordinately. My duty is to audit bills and Michael is responsible for legal counselï¼ˆlike a attorneyï¼‰. We communicate swiftly and share information transparently .All plights or dilemmasâ€™ intimidation is nothing. We bond with each other. In front of the fence is the river contaminated by litterï¼ˆgarbage,trash) thrown and discarded away by rural neighbours. This is the small river where my parents used to swim and play when they were children. The ecology in rural areas is polluted like this, and no one is taking care of it or disposing of it. rural rival , paw claw flaw. The Formula 1 racing car is roaring and the racing athlete is mutter. Rio is not Brazilâ€™s capital. All people forge a stereotype and prejudice about this tropical city by coincidence without prior agreementï¼ˆä¸çº¦è€ŒåŒï¼‰. and so forth , and so on , etc , the case in point isï¼Œfor instance ,such as . providing â€¦â€¦ in case â€¦â€¦ hence (å› æ­¤ï¼›ä»ç°åœ¨èµ·) henceforth day6 by degree There is an important distinction between this kind of role-playing and what is normally called positive thinking. In the latter, you are telling yourself that you are as good as Michael Jordan, while in the former you are not trying to convince yourself that you are any better than you believe you are. è¡Œä¸º She was discharged from the police force for bad conduct. å®æ–½ Laboratory and field tests have been conducted. å¼•å¯¼ The guide conducted us around the ruins of the ancient city. The whole article highlighted the center, lateral expressed you to dadâ€™s care. The rocket then took a lateral course straight for the Moon. At the gloomy pit (mine cave), this pitmanâ€™s sole(å”¯ä¸€çš„) shoes of the sole(é‹åº•) is worn(ç£¨) flat(å¹³). So he just walking barefoot with many blisters on his foot. After this experience, he detemines to depart the pit and set up a stall. blister swelling sore Numerous anonymous letters of complaint pointed to this man from different perspectives simultaneously. Apparently they are stepping up their demands for local autonomy. The shepherd is tending to his sheep. He sets up the tent at every new place. put the cart before the horse. æœ¬æœ«å€’ç½® Once more, puffs of cooking smoke curled up in the air. The fragrance of food permeated and diffused in the air. But Jake,the school bully who want to torture Dave. Daveâ€™s hands shook as he walked to the tree, where Jake leaned against the trunk, his stern eyes fixed on him.â€Give me your lunch money,â€ he growled, reaching for his bag. Suddenly, a person appeared behind the tree, gazing at him. The mysterious person said â€œF*ck you piece of shit.â€ in an indignant tone. Jake cheeksâ€™ expression changed and his rage started to decay. â€œIâ€¦ Iâ€™m sorry,â€ he murmured, galloping away. The mysterious man is Dave from ten years later who came to cure him. Along the shore, there are many straws and wheat, supporting a group of people. This isle country hasnâ€™t many population, but all domestic resident both have patriotic heart and they hate traitor. They worship their culture, unite as one to repel any conquest. v. hate n. hatred wheat ä¸å¯æ•° literally At the chamber, Louis is lying on the chair ,depressed. A4 paper is prone to scratching his fingers. This prize is set for these sophomores who have good quality as models for students. The recipients of prizes had their names printed in the paper. The mayor would give them a compass embeded with rubies. In the village, I use a water pump to pump water on fixed days of the week. I listen to the sound of sneakers rubbing against the ground,which induces me to play against with my friends on the court. But I still did not idle for a single minute. This apparatus produces explosive missile. According to the statute, It was decreed that the following day would be a holiday. You have breached it and make the staff gloomy(dim) . day7This stock is exceedingly awesome which gives me dividend, i even intend to emigrate. Now with innumerable money , i want to buy a helicopter , hovering around the blue sky like an eagle sheering in front of sheer mountain. every dialect has its own idiom. Every insect has its antenna. Reckon the circumference of this circle and the volume of this sphere or else you are the coward. In this progress you need get the radius or diameter of circle. The love and support of his family sustained him during his time in school. This sustain his argument that â€œlove is biggest power propelling anybodyâ€ my milk is expired and i need handful cash to buy new. Beside i am supposed to dump the trash to dump. In this bizarre serial , This feeble juvenile with worn-out and shabby clothes submerge on bush when detective detect him. Unfortunately, he wrenched his ankle. Because he made the fraud. This mortal has a shield like Captain America and shield all mortal assault. Killer hurl to him. The progressive have progressive and advanced idea. They donâ€™t allowed ambiguous people to join their department even their college dean and colleague in corporation. In this corporation,everyone is a coordinate counterpart. è¿™å¥è¯çš„æ„æ€æ˜¯ â€œåœ¨è¿™å®¶å…¬å¸é‡Œï¼Œæ¯ä¸ªäººéƒ½æ˜¯å½¼æ­¤åä½œçš„å¯¹åº”è§’è‰²â€ã€‚ Even if the tariffs are high, we conclude a transaction and are exempt from reproach from boss. The strategy of alternating negotiations is effective. We get our copyright and we will get the publicity belonging to us . This magic is optical illusion and we canâ€™t find any indicative clue to expose the truth utter. Donâ€™t lower your head, the crown will fall off. Emperor (monarch) is liberal who is keen on supporting jump-rope amateur. House â€˜s ornament is beautiful especially the China knot. wagon withstand the heavy weight .You should replace it with cart. Four seasons remain the same every quarter. bacterium germ mutter murmur abdomen heel day8This projectâ€™s essence is an intrigue. That stupid guy deceived us to come to this bleak site which is so barren that any crops or seeds canâ€™t sprout. He should be sent to gaol. How disappointing that our big deal is postponed again! Henceforth I will never trust this dude. Apply cement and plaster on the wall and then paint it, then pick up the axe to chop, cut and hack woods. This solitary old person gets out of bed with messy hair and sleepy eyes, puts on slippers, picks up a broom and sweeps the floor. Thereâ€™s nothing like a brisk walk on a cold day! You can open the amplifier and play pleasant music. Donâ€™t attempt to tempt me into drinking that poisonous wine. It spills on the table. This is a cheque and thatâ€™s already your legal possession of property. This brutal superior picks up the whip and whips his inferiors to tame them and humiliate them in front of the public, which is snapped by the patriots. The siren of the police car is getting closer and closer. Come to Shandong and you will receive a cordial welcome there. After three hours of intermittent rain, the game was abandoned. Punctual people are discreet about their time and will often add a few extra minutes to give themselves some ample room. This is not a drawback. This wind is spectacular, magnificent, grand, splendid, majestic. He takes a nod. Boss declares his intention and gets unanimous agreement because everyone wants to end this session early. The Golden Hook is a touching story. lap abdomen belly shank butt hip elbow back shoulder ankle kneeï¼Œ forearm ï¼Œupper arm , neck ,eye ear nose mouth, throat,chin brow eyebrow forehead beard chin jaw rib thick thin deep shallow wide narrow bird nest day9Peter is contemplating and groaning while closing the shutter. His intuition tells him that something is wrong. He is thinking why this kid betraysrebels him? Thatâ€™s sarcastic. Peter just endows her and covers her with a quilt(blanket) in the middle of the night when this girl is an infant. Peter thinks she is his intimate intimate. Now he concedes he has been cheateddeceived, which is obviously certified countless times. She clearly said his advent is glittering to her and has the prospect that they can accompany each other. Maybe he is not good at articulating, but he is rigorous. Surely it doesnâ€™t mean that this makes her feel oppressed or inhibited? Is he a dull man? Thinking of this, he becomes irritated and doesnâ€™t want to pay attention to these trivial matters. â€œScrew it! I donâ€™t give it a shit.â€ Next, he wants the woman to reclaim the money for him. The government took a hard line on the strike and tried to rein back inflation. To a society which has lost its orientation, people of all ages and both sexes are boycotting this unreasonable measure. For merchantï¼Œthis hen is the best merchandise. Trim the shrubs with shears. young fellow , based on my experience,your bribe will yield unexpected gains that cannot be express numerical. You will be designated a superior! torture torment suffering oval traydishplatesaucer tubbowlbasinpotpan dumb deaf mute lame limp blind cripple day10This adolescent is undergraduate who is hypocrisy. fabricating a procedure to sign a deed which is unfair for peasant. He is such tiresome and nasty so that I will burn all my contracts with him to ashes. Corruption corrodes public confidence in a political system. oriental has a long and rich history,survived by growing grains. History moves in zigzags and by roundabout ways. This ancient country has huge potential and latent benefits in this field. orthodox recipe is put peeled pea into the pan and fry it. This is perpetual flavor in my hometown. Snow is melting , he contrive to rally us in the valley and exchange the hostage to cops. My patron send me the correspondence that appoint me as an embassy. This elegant lady wearing a pearl necklace and violet wrap(scarf) is a writer. She stuff a lot of new elements and omitted old ones in her literature. It can be seen that she relish this career very much dentist is no need to wear helmet. So he has been layoff and canâ€™t get his allowance. He is ashamed by the scandal which may be his lifetime(lifelong) stain. If it got out now, that would be disastrous. She slipped to the toilet and turned on the projector to project onto the wall. simplicity and plain color is actually the revolutionary design. This is a matter of the utmost choice so that he do his utmost to persuade me not to go. No player has a divine right to be in this team. His ideology is so plain that she could divine what he was thinking just by looking at him. One harsh criticism would send her into the depths of despair. She just thinks she is discarded from community, pleading for her mistake. By the way, maybe you are too rigid to treat her because you always wants to impose your will on other people. merit virtue advantage latent lateral â€¦â€¦ so that â€¦â€¦ ä¸ºäº† soâ€¦â€¦that å¤ªâ€¦â€¦ä»¥è‡³äº hysteria hypocrisy obsolete omit eliminate defect drawback shortcoming flaw disadvantage ï¼ˆåŒºåˆ†claw flaw pawï¼‰ vase drum drug drag divine day11For this robust and vigorous man, his beloved country is filled with his advocates adoring him. The pondâ€˜s water looks transparent, reflecting a faint light. Suddenly there is a little foam on it like the foam on yesterdayâ€™s reservoir. The curtains are tightly closed and there is no light. He is on the mat, stooping to pick up the handy rag then his arm hits the stool leg, creating a bruise that makes him sore. The short paradox information is scattered, which fusses me into thinking. He had no news to impart, just put forward (propose) a proposal, which can be the paradigm. We have been accustomed to his bureaucracy. I feel sorrow for the odds you have suffered, and I make an oath it will never happen again. Please donâ€™t discourage us. She is so fatigued that she was absent for nine consecutive days. Oil and grease will rot and corrode the rubber of your tires. After receiving a summons from court, he even couldnâ€™t summon the energy to get out of bed. Cosmic gauges are innumerable. This circus has tiger specimens. Veins showed through her pale skin. secretary. She intrigues to refute the appeal. Donâ€™t be dubious or suspicious. After the tumour is cured, you should refresh your life and commence to do something different. He was charged with charging unreasonable fees at a car charging station. Set sail and cruise. sole sore gadget guage day12he is shrewd and perceive hazard in advance(ahead of time), calling on everyone to reach a consensus on retreat. After prudent thinking , he proclaimed that bid 2000RMB for the painting. Everyone thought he was clumsy but he thought that he is sober. Police suspect a local gang which distort the truth and incentives of government decisions. Giving you a counsel: you should boil a kettle of hot water and wear a scarf , wrapping your wool overcoat tightly. At last, take off your socks and switch to long stocking. If you disregard me, youâ€™ll get flu. The old woman was proficient in her loom which is auxiliary tool. A clay mould is used for casting bronze and brass statues . The woman looked at me with a twinkle in her brilliant green eyes. You just touched the threshold of this domain and started preparing to surrender. you will lagged behind your peer. This legendary pirate with a glorious history was ultimately expelled. The eagle soaring and hovering. I offered my heart to the bright moon, yet the moon shines on the ditch instead. I must go now. incidentally, if you want that comb Iâ€™ll buy it to you. Just wait for my envelop and come to my banquet. The development of things usually advances in a tortuous way and rises in a spiral manner; it can never be smooth sailing. She cast a worried look, her brow frowned as she thought about the so-called correlation between late nights and poor healthâ€”an idea that tightened its grip on her. Yet she couldnâ€™t ignore her obligation to finish the work, so she stayed grounded and focused on her tasks. He cast the rugby ball to me, and I gripped it. correlation correspond day13 His standpoint swings abruptly and he spit on the ground, conceiving he was innocent without any guilt. She undertakes the task, prepares for the preliminary work with missionary zeal like a clergy(priest) in cathedral, and keeps herself discreet. It seems that her lamp of life flares brightly. Iâ€™d rather not dwell on the past in which I dwelled in the Northwest as a refugee for ten years. There was a moan of pain from the injured man. This toolâ€™s usage is originated by me and I hope itâ€™s intelligible to you guys. It was up to him to take the initiative in repairing relations. This is just an initiative thought. The speech found an echo in the hearts of many of the audience although it was an echo of what she had talked about many times before. You have indulged in cyberspace and been addicted to Grand Theft Auto IV. Thatâ€™s obsessive. This slender girl escaped the slaughter(massacre). This wretched princess was not recognized and mingled with the crowds whose tears mingled with the blood on her face. When enemy troops with rifles launched a radical offensive against the headquarters, the youngster, who regarded the battlefield as his tomb and followed the imitation of the martyrs(predecessor) he admired, was determined to contribute to his country; his exemplary role finally helped invert the battle situation, pushing the armyâ€™s morale to the climax, with cheers of victory hailed around. This girl, whose hair fell over her shoulders in a mass of curls, curled into a ball and went to sleep. The tanker began to spill its cargo of oil. fixture å›ºå®šçš„xx pregnant conceive prudent discreet day14The two corporations have been fused into a single organization. The mayor was present and cut the ribbon for the combination. Two cooperative cooperate with each other cooperative, menacing the other companies. ribbon rubbish Letâ€™s put some music on the stereo. There is a frog in cave. He staggered into the room, naked except for a ragged garment; a glance at his flushed face told everyone he was unwell. His spouse is running in the meadow lawn. Buying a cigarette at grocer The sovereign bureau, which is notable for respecting regional autonomy, will exert strict checks when allowing institutions to enroll students, and no entity is exempt from this rule, inspiring awe among the public. If the steamer is unavailable, taking the shuttle is a practical alternative. Farmers checked the optimum time for harvest via aerial surveys, and the fresh crops were then transported through the mountain corridor to the city; the marks on the box clearly denote their origin and quality. Guests sat in the warm lounge by the fireplace, chatting with the amiable host. Someone accidentally knocked over a razor on the table, and when they reached for it, a vague shadow seemed to vanish at the doorâ€”no one paid it much mind. When writing about capitalism, the professor reminded students to include a detailed bibliography. The school will soon nominate candidates for the academic award, and the competition is expected to be fierce; no one wants their hard work to end up as a forgotten skeleton of an essay. A new monument was built to honor those who fought for water conservation. Nearby, the once dry brook has slowly regained moisture, becoming a small heaven for local wildlife. kidney stomach lung liver day15ç¬¬ä¸€æ®µï¼šèŠ‚æ—¥å‰å¤•çš„å…¬å›­åœºæ™¯ On the eve of the festival, families gathered in the parkâ€”children scramble to sit on the bench, while parents pretend to be amused by their games, though a faint perplex lingers, worried about the remnant tension from the recent small riot. The benign breeze carries the scent of fresh flour from nearby bakery, and the gorgeous sunset casts a warm glow over everyone. ç¬¬äºŒæ®µï¼šç»´æŠ¤å’Œå¹³ä¸æ—¥å¸¸èŠ‚å¥ A militant group once tried to disturb the peace here, but the localsâ€™ reciprocal support helped disperse them quickly. Now, the parkâ€™s attendant checks the infrared cameras regularly, and a locomotiveâ€™s distant horn sometimes breaks the quiet, a gentle reminder of the cityâ€™s rhythm. disperse dispute ç¬¬ä¸‰æ®µï¼šè€äººçš„æ—¥å¸¸ä¸å¤„äº‹æ€åº¦ An old lady keeps a small purse in her bosom, its brim frayed but clean, and she never lets a lapse in attention make her lose it. She doesnâ€™t believe in superstition, but she always asks for consent before sharing her homemade snacks with strangers, her enthusiasm for connecting with others never fading. ç¬¬å››æ®µï¼šè·¯è¾¹æ‘ŠåŒºåŸŸ The government set up a special zone nearby to boost local businesses, with tax breaks as an incentive for new shops. ç¬¬äº”æ®µï¼šå…¬å…±è®¾æ–½ä¸å®‰å…¨æç¤º The community added a slot for reporting safety issues at the entrance. Posters nearby clearly state that any act like rape will be severely punished, to keep the neighborhood safe. ç¬¬å…­æ®µï¼šä¸€ä¸ªçˆ±æ†åˆ†æ˜çš„æ­£å¸¸äºº A sane person will not seek othersâ€™ consent for everything. For the wicked, it always pricks them; for the good, this blow comes like a gentle spring breeze. landlord landlady inhibit inhabit exhibit virtual virtue day16ç¬¬ä¸€æ®µï¼šä¸­ä¸–çºªåŸå ¡çš„å»ºè®¾ä¸é˜²å¾¡ The lord allied with the nearby tribe to consolidate his castleâ€”they used timber and cement to build a solid wall, dug a deep trench around it, and ensured no one could easily breach it. ç¬¬äºŒæ®µï¼šé¡¾é—®çš„å‡æœŸè§„åˆ’ä¸æ—¥å¸¸s The consultant planned a vacation abroad for his vocation (to cooperate with overseas clients), so he first applied for a visa; during the trip, he dined with locals, raised a toast to friendship, and later retrieved a piece of cloth with unique texture to knit a small bag and tie a neat knot. ç¬¬ä¸‰æ®µï¼šæœªå¼€å‘å°å²›çš„è‡ªç„¶æ¢ç´¢ä¸æ™¯è±¡ On the virgin island, a young maiden walked along the shoreâ€”she could sniff the fresh moss on rocks, spot a distant whale spraying water, and used a canvas to sketch the beautiful scenery. spot n. æ–‘ç‚¹æ±¡æ¸ï¼Œ åœ°ç‚¹åœºæ‰€ v.æ³¨æ„åˆ°ï¼Œå‘ç° ç¬¬å››æ®µï¼šå›å›½äº‰è®®å¼•å‘çš„æ¿€çƒˆå†²çª A dispute over treason broke out in the kingdom; the lord mobilize his men to stop the vicious rebelsâ€”some rebels were lash to control them, the intense chaos made people shout in panic, and a few soldiers were even paralyze by fear. ç¬¬äº”æ®µï¼šå»ºç­‘ç¾¤çš„ç»´æŠ¤ä¸å•è°ƒä»»åŠ¡ The solid compound needs regular careâ€”workers ventilate the inner rooms, use a hose to clean the yards, and the muscular guard checks every detail; whereas the monotonous cleaning work feels tedious, everyone knows itâ€™s necessary to keep the place safe. day18ç¬¬ä¸€æ®µï¼šæ•™è‚²åœºæ™¯â€”â€”å­¦ç”Ÿè®­ç»ƒä¸è€ƒæ ¸ The foremost requirement for pupils in the training camp is to control their impulse; they undergo strict drills and face close scrutiny during every proceeding, irrespective of their background.è®­ç»ƒè¥å­¦ç”Ÿçš„é¦–è¦è¦æ±‚æ˜¯æ§åˆ¶å†²åŠ¨ï¼›ä»–ä»¬æ¥å—ä¸¥æ ¼è®­ç»ƒï¼Œæ¯ä¸€é¡¹æµç¨‹éƒ½è¦æ¥å—ç»†è‡´å®¡æŸ¥ï¼Œä¸è®ºå‡ºèº«å¦‚ä½•ã€‚ ç¬¬äºŒæ®µï¼šä¹¡æ‘å†œä¸šåœºæ™¯â€”â€”è‡ªç„¶ä¸åŠ³ä½œ In the humid jungle on the edge of the county, farmers apply fertilizer to the fields, and soon the pear trees blossom; they store mutton and fresh pears in the cellar, while a coil of rope hangs on the porch near the bulb.åœ¨å¿åŸè¾¹ç¼˜æ½®æ¹¿çš„ä¸›æ—é‡Œï¼Œå†œæ°‘ä»¬ç»™ç”°åœ°æ–½è‚¥ï¼Œä¸ä¹…æ¢¨æ ‘ä¾¿å¼€èŠ±äº†ï¼›ä»–ä»¬æŠŠç¾Šè‚‰å’Œæ–°é²œçš„æ¢¨å­˜æ”¾åœ¨åœ°çª–é‡Œï¼Œé—¨å»Šä¸Šé è¿‘ç¯æ³¡çš„åœ°æ–¹æŒ‚ç€ä¸€å·ç»³å­ã€‚ ç¬¬ä¸‰æ®µï¼šåŒ»ç–—å¥åº·åœºæ™¯â€”â€”ç—…ç—‡ä¸è¡¥æ•‘ The toxic plantâ€™s odor can sting the skin and even handicap function of breathing; the doctor wrote a prescription for the remedy, and the thermometer showed the patientâ€™s fever was starting to diminishâ€”the wholesome tea proved apt for recovery.è¿™ç§æœ‰æ¯’æ¤ç‰©çš„æ°”å‘³ä¼šåˆºç—›çš®è‚¤ï¼Œç”šè‡³æŸå®³å‘¼å¸åŠŸèƒ½ï¼›åŒ»ç”Ÿå¼€å…·äº†è¯ç‰©å¤„æ–¹ï¼Œæ¸©åº¦è®¡æ˜¾ç¤ºæ‚£è€…çš„ä½“æ¸©å¼€å§‹ä¸‹é™â€”â€”è¿™æ¬¾æœ‰ç›Šå¥åº·çš„è‰è¯èŒ¶è¢«è¯æ˜éå¸¸é€‚åˆæ¢å¤ã€‚ ç¬¬å››æ®µï¼šç¤¾ä¼šå®‰å…¨åœºæ™¯â€”â€”é˜²èŒƒä¸å¤„ç½® A burglar attempted to break into the enclosure of the joint flat, but the veteran security guard acted without hasty decisionâ€”he used an elastic rope to restrain the thief, which warranted no violent action, and then detached the surveillance footage as evidence.ä¸€åçªƒè´¼è¯•å›¾é—¯å…¥è”åˆåˆ«å¢…çš„å›´æ ï¼Œä½†èµ„æ·±ä¿å®‰å¹¶æœªä»“ä¿ƒè¡ŒåŠ¨â€”â€”ä»–ç”¨å¼¹æ€§ç»³ç´¢åˆ¶æœäº†çªƒè´¼ï¼Œè¿™ç§æ–¹å¼æ— éœ€ä½¿ç”¨æš´åŠ›ï¼Œéšåæ‹†å¸äº†ç›‘æ§å½•åƒä½œä¸ºè¯æ®ã€‚ ç¬¬äº”æ®µï¼šç¤¾äº¤æƒ…æ„Ÿåœºæ™¯â€”â€”å©šç¤¼ä¸æ°›å›´ The bride in a noble dress stood on the verge of the garden, her beauty dazzled everyone; albeit the groom was late due to a trivial matter, she remained tender and didnâ€™t grieve. The humorous toast by the best man evoked bursts of laughter, making the reception warm and joyful.èº«ç€é«˜è´µç¤¼æœçš„æ–°å¨˜ç«™åœ¨èŠ±å›­è¾¹ç¼˜ï¼Œç¾è²Œä»¤äººçœ©æ™•ï¼›å°½ç®¡æ–°éƒå› çäº‹è¿Ÿåˆ°ï¼Œå¥¹ä¾ç„¶æ¸©æŸ”ï¼Œå¹¶æœªæ‚²ä¼¤ã€‚ä¼´éƒå¹½é»˜çš„ç¥é…’è¯å”¤èµ·é˜µé˜µç¬‘å£°ï¼Œè®©æ¥å¾…ä»ªå¼æ¸©é¦¨åˆæ¬¢ä¹ã€‚ ç¬¬å…­æ®µï¼šèŒä¸šä¸è¡Œä¸šåœºæ™¯â€”â€”èˆªç©ºä¸é©æ–° The aviation company decided to streamline its gross operating procedures; the experimental project, led by a technical veteran, was on the verge of success notwithstanding initial setbacks. Employees needed to assimilate new technical standards quickly, and the internal bulletin used mild satire to criticize inefficient practices, which was apt for promoting change.è¿™å®¶èˆªç©ºå…¬å¸å†³å®šç²¾ç®€å…¶æ€»ä½“è¿è¥æµç¨‹ï¼›å°½ç®¡åˆæœŸé­é‡æŒ«æŠ˜ï¼Œä½†ç”±æŠ€æœ¯è€æ‰‹ä¸»å¯¼çš„å®éªŒæ€§é¡¹ç›®å·²æ¥è¿‘æˆåŠŸã€‚å‘˜å·¥éœ€è¦å¿«é€Ÿå¸æ”¶æ–°çš„æŠ€æœ¯æ ‡å‡†ï¼Œå†…éƒ¨å…¬å‘Šç”¨æ¸©å’Œçš„è®½åˆºæ‰¹è¯„äº†ä½æ•ˆåšæ³•ï¼Œè¿™å¯¹æ¨åŠ¨å˜é©éå¸¸æ°å½“ï¼ˆåˆé€‚ï¼‰ã€‚ irrespective indifferents albeit albeit tender mild county country verge boundary elastic plastic mutton pork chicken beef day19ç¬¬ä¸€æ®µï¼šè¾¹ç•Œå†²çªä¸å¨æ…‘è¡ŒåŠ¨ The enemyâ€™s formidable forces approached the boundary, a daunting threat that filled soldiers with dread; they deployed cannons and swarmed to defend, hoping to deter the invaders. The conspicuous military buildup failed to stop the desperate attack, which nearly led to a catastropheâ€”only international sanctions and last-minute negotiations eased the anguish of war. ç¬¬äºŒæ®µï¼šæœå›­å†œäº‹ä¸å›¢é˜Ÿåä½œ In the sunlit orchard, farmers tended to poultry and picked crisp fruits, while a cohesive team worked to weld broken tools; they stored harvested produce in barrels with tight lids, avoiding thorns on the ground, and the cottageâ€™s chimney curled with thin smoke, marking a peaceful afternoon. ç¬¬ä¸‰æ®µï¼šæ”¿æ²»å†³ç­–ä¸äº‹åŠ¡ç»´åº¦ The premier insisted on adhereing to principles when handling state affairs, emphasizing that every facet of policy must balance justice and practicality. Even in the face of pressure, he maintained diplomatic dignity, refusing to compromise on core interests. ç¬¬å››æ®µï¼šè®¤çŸ¥å¿ƒç†ä¸å…±æƒ…è¡¨è¾¾ Her cognitive ability to distinguish discrete ideas helped her elicit deep empathy from others; when listening to their anguish, she never diminished their feelings, instead respecting their dignity and offering sincere comfort. ç¬¬äº”æ®µï¼šæŠ€æœ¯åº”ç”¨ä¸é£é™©é˜²æ§ The team used a drone to monitor environmental risks, and they had to dilute toxic substances found in the soilâ€”this technical support complemented ground efforts, ensuring the safety of both people and crops. thrust stab poke pierce prick sting bite core interest complement compliment poultry portray day20ç¬¬ä¸€æ®µï¼šæ­£ä¹‰é¢†åŸŸçš„å®¡åˆ¤ä¸æŠ—äº‰ In the arena of social justice, the court delivered a fair verdictâ€”those who had persecuted innocent people and inflicted deep wounds were finally held accountable. Their hatred-driven actions failed to crush the publicâ€™s will; the authority decided to suspend the unjust policies that had fueled conflict, vowing to eliminate such cruelty. ç¬¬äºŒæ®µï¼šæ–‡åŒ–é—äº§çš„ä¼ æ‰¿ä¸æ¨å¹¿ The exquisite ancient artifact embodied the intrinsic value of a lost civilization, not a hollow decoration. A cultural foundation agreed to sponsor its exhibition, distributing a brochure to introduce its history. The ticket seller trumpeted its significance and exemplify how traditional crafts could be passed down(ä¼ æ‰¿) as a precious legacy. ç¬¬ä¸‰æ®µï¼šä¸ªäººé“å¾·ä¸ç”Ÿæ´»æŠ‰æ‹© Adhering to morality means resisting the lure to indulge in selfish desires or deviate from principles. A moderate lifestyle, not extreme behavior, shapes(v.) noble bearing(ä¸¾æ­¢ï¼‰; those who remain indifferent to othersâ€™ hardships will never elevate their spiritual realm. She wore an elegant gown with embroidered sleeves, living in a conveniently located cottage that reflected her simple yet dignified life. ç¬¬å››æ®µï¼šæ”¿æ²»ç»æµçš„äº‹åŠ¡æ¨è¿› The government decided to convene a meeting to discuss the subsidy policy for small businesses. Amid concurrent challenges, experts adjusted the configuration of resources to avoid contingent risks. This measure helped bolster market confidence and provided a strong impetus for economic recovery; thereafter, many enterprises regained vitality. ç¬¬äº”æ®µï¼šæ—¥å¸¸åœºæ™¯çš„ç»†èŠ‚è¡¥å…… The obedient apprentice carefully collected every silver of rare material, fearing to waste anything. His humble bearing and rigorous attitude won the masterâ€™s trust, proving that even trivial actions can reflect oneâ€™s commitment to excellence. lure tempt evoke elicit inflict suspend sustain decoration description embed embody silver sliver suicide subsidy contingent continual exemplify exempt enterprise entrepreneur day21ç¬¬ä¸€æ®µï¼šåŒ»ç–—åœºæ™¯ â€”â€” æ‰‹æœ¯ä¸åº·å¤ The complex surgery in the hospital ward aimed to mend the patientâ€™s injured palm; though he endured great agony during the process, the treatmentâ€™s positive impact soon became evident, and he gradually regained mobility. ç¬¬äºŒæ®µï¼šå±…æ‰€æ—¥å¸¸ â€”â€” èˆ’é€‚ä¸ç”Ÿæ´»ç»†èŠ‚ In the cosy cottage with a reasonable layout, she placed the ancient manuscript on the table, its pages damp with morning dew. Outside, a fluffy lamb grazed nearby, while she sliced fresh cucumber, sprinkled a pinch of powder on the dish, and used a rubber mat to prevent slippingâ€”simple joys filled the air. ç¬¬ä¸‰æ®µï¼šè‡ªç„¶ç°è±¡ â€”â€” æ—¥é£Ÿä¸æœªè§£ä¹‹è°œ A rare eclipse darkened the continent, leaving people pondering the ancient riddle of celestial movements. Such astronomical events were once scarce in recorded history, making this sight both awe-inspiring and thought-provoking. ç¬¬å››æ®µï¼šç¤¾ä¼šç§©åº â€”â€” æ‰¿è¯ºä¸ç¤¼ä»ª During the kingâ€™s long reign, he urged citizens to pledge respect for others, as mutual courtesy would constitute the foundation of a harmonious society. He also warned against petty conflicts that could disrupt public peace. ç¬¬äº”æ®µï¼šæƒ…æ„Ÿä¸æˆé•¿ â€”â€” åšæŒä¸ä»£ä»· She was reluctant to swallow her pride and admit mistakes, but the fear of letting her team collapse forced her to reflect. She then elaborated on her plans during the interim period, adjusting the tempo of work to ensure retention of key tasks. The hard work took a toll on her, but beneath her fatigue, she continued to nurture her skills and grow. parliament(Washington,D.C.) day22ç¬¬ä¸€æ®µï¼šå†²çªä¸æµäº¡çš„å±æœºæ—¶åˆ» Enemy forces launched a sudden raid, triggering a fierce clash that filled people with rage. The authoritarian regime issued a mandate to exile dissenters, while some tried to smuggle relatives to safety to preclude harm from the imminent danger. ç¬¬äºŒæ®µï¼šä¹¡æ‘å°å±‹çš„æ—¥å¸¸å›¾æ™¯ Beyond the hedge stood a cozy cabin by the brook; inside, stacks of lumber leaned against the wall, and a shelf held a bottle of ink and a folded handkerchief. She tasted the spicy sauce, her tongue tingling, and did not presume to add moreâ€”she then tucked the blanket around her knees, listening to the wind rustle through the shed nearby. ç¬¬ä¸‰æ®µï¼šä¸ªäººæƒ…æ„Ÿä¸ç”Ÿæ´»åšå®ˆ The pregnant woman felt weary but refused to give upâ€”she strived to overcome hardships, though some jealous neighbors spread rumors. She clutched her husbandâ€™s handkerchief, showing obedience to moral principles and refusing to struggle with trivial conflicts; a gentle rub of her eyes wiped away fatigue, not despair. ç¬¬å››æ®µï¼šèŒä¸šæŠ€èƒ½ä¸è‰ºæœ¯è¡¨ç° The skilled acrobat wore a bright cap, performing rotary spins and smooth curves alongside linear movementsâ€”his synthesis of skills was deep, not superficial, earning cheers from the crowd as he hoisted a small flag mid-air. ç¬¬äº”æ®µï¼šç¤¾ä¼šè®¤çŸ¥ä¸ç¾¤ä½“å‡èš False propaganda often reinforces stereotypes, but the homogeneous community maintained solidarity to resist such biases. They rejected stale ideas, used monetary support to help those in need, and overcame inertia to promote progress, proving that unity can break prejudice. ç¬¬å…­æ®µï¼šè§„åˆ™ä¸è¡Œä¸ºçš„è¾¹ç•Œ The school mandate required strict obedience to safety rules, which helped preclude accidents during outdoor activities. Students did not presume to violate the regulations, and their steady adherence reflected a sense of responsibility beyond their years. invoke evoke day23å­¦æœ¯ç ”è®¨ä¸è§„èŒƒåšå®ˆ The symposium focused on academic integrity, with experts emphasizing that plagiarismâ€”an overt violation of ethicsâ€”must be firmly rejected. The predominant view was that a coherent research paper should reflect oneâ€™s own speciality, and the implication of improper citation could harm academic credibility; moreover, scholars should guide intermediate researchers to uphold principles. æˆ˜å‹ä½¿å‘½ä¸ä¼ æ‰¿ä¿¡ä»° Comrades gathered in the dim light of a lantern, their faces solemn as they recalled how their predecessors had fought to smash oppression. It was imperative to honor their legacy, and no one dared to evade their responsibilitiesâ€”even when facing a torrent of difficulties, they would not kneel to fate. Their descendants still cherish the spirit of unity, proud to be part of this noble group. è‡ªç„¶è¾¹ç¼˜çš„æˆ·å¤–å›¾æ™¯ On the fringe of the forest, a graceful deer wandered through the underbrush, while a nimble squirrel scurried up a tree. The air was cool, and the branches hung stiff with morning dew; as night fell, the glamor of the starry sky made passersby forget their fatigue, though a faint envy arose for the creatures living freely in nature. äººé™…æ‘©æ“¦ä¸ä½“é¢åšå®ˆ Her decent demeanor and unique glamor often sparked envy, but she never let friction with others turn her furious. When facing the plight of being wronged, she refused to evade communication, believing that sincere dialogue could resolve misunderstandingsâ€”she never let petty conflicts prolong unhappiness. äº‹åŠ¡æ‰§è¡Œä¸åˆåŒè§„èŒƒ The project team comprised professionals from multiple fields; the contract clearly stipulated the timeline, and despatch of materials must be completed on schedule. Due to market changes, costs might fluctuate, so the intermediate supervision link was crucial to avoid delays. All members understood that strict adherence to the agreement was the key to success. day24è‡ªç„¶ç”Ÿæ€ â€”â€” æ²™æ¼ ç‰§åœºçš„æ –æ¯åœ° The camelâ€™s natural habitat in the pasture relies on just enough humidity and moisture to survive; beneath the sand, archaeologists used a spade to uncover a marvelous fossil, evidence of ancient life in this harsh land. The immense desert, though dry, supports a multitude of creatures that have adapted to the bleak resources. åŸå¸‚å›¾æ™¯ â€”â€” è®¾æ–½ä¸åŒºåŸŸç™¾æ€ At the busy intersection near the harbor, a garage stands beside a small pharmacyâ€”residents can bypass the crowded slum area via a new road. Inside the nearby apartments, carpet covers the floors, a clean sheet lies on the bed, and a lamp with a metal rim casts warm light; pipes and a old furnace in the basement ensure basic utilities, while such living conditions are prevalent in the urban fringe. ç¤¾ä¼šæ²»ç† â€”â€” è§„åˆ™ä¸å…¬ç›Šè¡ŒåŠ¨ The social hierarchy did not hinder the charity parade; volunteers marched throughout the city, calling for care for the vulnerable. During the public health crisis, quarantine measures proved to avail, but any attempt to cover up risks was a sin and a disgrace, sparking public outrage that manifested in peaceful protests. The multitude of participants showed solidarity against injustice. å­¦æœ¯ä¼ æ’­ â€”â€” ç†è®ºä¸æŠ€æœ¯åº”ç”¨ Scholars held a discourse on Einsteinâ€™s relativity, discussing how to propagate this profound theory without redundant explanations. The appraisal of the new technology showed it was versatileâ€”it could not only duplicate complex data but also simplify analysis, making it prevalent in scientific research. ä¸ªäººè¡Œæ­¢ â€”â€” æƒ…æ„Ÿä¸è¡ŒåŠ¨é€‰æ‹© She refused to be bound by trivial grievances, choosing to meditate rather than resent othersâ€™ mistakes. Though a rash decision once made her regretful, she soon stride forward to ascend the career ladder; the vibrate of enthusiasm in her heart and the surge of motivation drove her to overcome immense difficulties, proving courage conquers hesitation. èŠ‚æ—¥æ°›å›´ â€”â€” æ—¥å¸¸ä¸æ¬¢åº†æ—¶åˆ» Amid the merry festival, people hung a wreath on the door, wearing fitting costumes and gear for the celebration. A comedian with a funny accent told comic stories that made everyone laughâ€”his jokes were literally the highlight of the party. The joy spread throughout the crowd, and every small interaction availed to strengthen bonds. propaganda immense immerse day25åŒ»ç–—åœºæ™¯ â€”â€” æ²»ç–—ä¸éšæ‚£ä¿®æ­£ This districtâ€˜s therapy center aimed to alleviate patientsâ€™ suffering by addressing underlying health issues, not just symptoms. A massive study tested the hypothesis that a small flaw in treatment protocols had led to unnecessary casualty; doctors rushed to rectify the error, though the (grim reality) was that some harm could scarcely be undone. The magnitude of the neglect shocked staff, who vowed to improve safety measures. ç¤¾åŒºç”Ÿæ´» â€”â€” å¥½å®¢ä¸äººé™…æ¸©æƒ… In the affluent vicinity of the cityâ€™s upper class residents were known for their warm hospitalityâ€”the gracious neighbor often shared homemade cream pastries on her balcony, and even the timid sibling would pat strangersâ€™ shoulders in greeting. The local chancellor made a concession to fund community activities, discouraging children from mischief and promoting mutual respect. No one cared about status whatsoever; kindness was the universal language here. ç»æµä¸å·¥ä½œ â€”â€” ç¹è£ä¸åœæ»å›°å¢ƒ The factory used to prosper, but it began to stagnate due to outdated gear and lack of innovation, eventually falling into a slump. Workers toiled overtime, their sweat soaking through coarse sweaters, as managers debated how to reverse the decline. They had to lubricate old machines and shear redundant costs, but the grim market conditions meant success was uncertain. The factory emitted thick smoke, and some workers chewed tobacco to cope with fatigue, while the magnitude of the crisis weighed on everyone. çªå‘åœºæ™¯ â€”â€” å¥‡ç‰¹ä¸æ­£ä¹‰å¹²é¢„ A peculiar figure in a shady coat wandered the streets, his queer behavior and sham smile raising suspicionsâ€”he seemed to target the vulnerable as prey. When he tried to start a flame near a wooden building, a passerby let out a loud scream, and a brave elder rushed to intervene. The man limped away in panic, his mischief failed. The prophet later used vivid metaphor and sharp rhetoric to warn the community about such dangers. hostage hospitality day26å°å»ºæ—¶ä»£çš„æƒåŠ›åšå¼ˆ In the feudal kingdom, the rebel leader signed a pact with the crownâ€™s heir, which stipulated shared control of the regional axis. The former rulerâ€™s arbitrary decisions had fueled rebellion, and the temporal truce(ä¼‘æˆ˜) aimed to avoid further bloodshedâ€”rebels agreed to lay down arms(æ”¾ä¸‹æ­¦å™¨), while the heir promised to reform unjust laws. å­¤å„¿çš„è’å‡‰å±…æ‰€ The orphan lived in a desolate cottage with a vacant atticï¼ˆé˜æ¥¼ï¼‰; she would preserve leftover bread, spread a slice with butter, and eat in the spacious kitchen. Though life was harsh, she never lost hope, often cleaning the dusty rooms to chase away rats with sharp claws. æ’ç»ƒåœºä¸Šçš„å°æ’æ›² During the drama rehearsal, a actress grew hysterical after her toe was scraped by something, leaving a small lump on her foot. Her face turned pale with pain, while her partner made her blush by cracking a jokeâ€”his striking calmness helped ease the tension, and they resumed practice soon. æ—¥å¸¸ç‰©å“ä¸ç¯å¢ƒç‰¹å¾ His masculine outfit included striped trousers and a leather accessory; the black-and-white stripes were invariably eye-catching. He careful handled the brittle vase, fearing it would shatter if dropped. å¥åº·ä¸æš‚æ—¶çš„æœŸè®¸ She suffered from a chronic illness, but the forthcoming treatment offered a temporal hoper. The doctor advised against arbitrary use of medication, emphasizing that patience would help alleviate symptoms."},{"title":"é«˜æ•°å’Œ408çš„ä¸€äº›ç†è§£","path":"/wiki/NOTE/é«˜æ•°å’Œ408çš„ä¸€äº›ç†è§£.html","content":"æ ‘ æ€§è´¨ æ‰€æœ‰ç»“ç‚¹åº¦æ•°ä¹‹å’Œ+1(æ ¹èŠ‚ç‚¹) n(æ€»ç»“ç‚¹æ•°) åˆå§‹å½’å¹¶æ®µè¦å¢åŠ å‡ ä¸ª0 â‘ nnk+n0 â‘¡nknk+1 äºŒå‰æ ‘ï¼šn0n2+1 å¶èŠ‚ç‚¹æ•° åº¦ä¸º2çš„ç»“ç‚¹æ•°+1 â‘ nn0+n1+n2 â‘¡nn1+2n2+1 â‘ æ‰€æœ‰ç§ç±»ç»“ç‚¹çš„å’Œnæ€»ç»“ç‚¹æ•° â‘¡ç»“ç‚¹æ•° x åº¦æ•° çš„å’Œ +1(æ ¹èŠ‚ç‚¹) næ€»ç»“ç‚¹æ•° (å°æ‹¬å·)ï¼šé»˜è®¤å‘ä¸Šå–æ•´ äºŒå‰æ’åºæ ‘(æŸ¥æ‰¾æ ‘) BST **æŸ¥æ‰¾ï¼š**Olog2(n) æ¬¡æ•°ä¸è¶…è¿‡æ·±åº¦ã€‚ å·¦æ ¹å³ ç›®çš„ä¸æ˜¯æ’åºï¼Œè€Œæ˜¯æé«˜æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚ æ’å…¥ï¼š æ’å…¥åä»ä¸Šå¾€ä¸‹ï¼Œæœ€åçš„ä½ç½®ä¸€å®šæ˜¯å¶èŠ‚ç‚¹ã€‚ä»æ ¹å¼€å§‹æ¯”è¾ƒï¼Œå°å°±å¾€å·¦ï¼Œå¤§å°±å¾€å³ï¼Œæœ€åä¸€å®šæ˜¯å¶å­ç»“ç‚¹ã€‚ åˆ é™¤ï¼š å¶èŠ‚ç‚¹ä¸åŠ¨ï¼› æœ‰ä¸€ä¸ªå·¦å³å­æ ‘ï¼Œåˆ™å­æ ‘æ›¿æ¢è¢«åˆ ç»“ç‚¹ã€‚ æœ‰ä¸¤ä¸ªå­æ ‘ï¼Œç”¨ç›´æ¥ä¸­åºåç»§(å‰é©±)æ›¿æ¢ã€‚ å¹³è¡¡äºŒå‰æ ‘ AVL å®šä¹‰ï¼šå¹³è¡¡å› å­1ã€‚ **æŸ¥æ‰¾ï¼š**Olog2(n) æ¬¡æ•°ä¸è¶…è¿‡æ·±åº¦ã€‚ æ—‹è½¬ï¼šåˆ é™¤çœ‹ä¸ªå¤´ï¼Œæ’å…¥å‘ä¸Šæ‰¾ æ’å…¥ï¼š â‘ å’ŒBSTä¸€æ ·ã€‚ â‘¡è‹¥æ’å…¥åç ´åå¹³è¡¡ï¼Œåˆ™å‘ä¸Šæ‰¾åˆ°æœ€è¿‘çš„æœ€å°ä¸å¹³è¡¡æ ‘(ç¥–å…ˆ)ã€‚ æ ¹æ®ä¸å¹³è¡¡ç¥–å…ˆå’Œæ’å…¥èŠ‚ç‚¹çš„ç›¸å¯¹ä½ç½®è¿›è¡Œï¼ˆLLã€RRã€LRã€RLï¼‰æ—‹è½¬ã€‚ åˆ é™¤ï¼š â‘ å’ŒBSTä¸€æ ·ã€‚ â‘¡è‹¥åˆ é™¤åç ´åå¹³è¡¡ï¼Œåˆ™å‘ä¸Šæ‰¾åˆ°æœ€è¿‘çš„æœ€å°ä¸å¹³è¡¡æ ‘(ç¥–å…ˆ)Zã€‚ æ ¹æ®Zçš„ä¸ªå¤´æœ€é«˜çš„å­©å­Xï¼Œä¸Xä¸ªå¤´æœ€é«˜çš„å­©å­Yï¼ŒXå’ŒYçš„ç›¸å¯¹ä½ç½®è¿›è¡Œï¼ˆLLã€RRã€LRã€RLï¼‰æ—‹è½¬ã€‚ æœ€å¤šæ¬¡æ•°ï¼šæ»¡äºŒå‰æ ‘ æœ€å°‘æ¬¡æ•°ï¼šN11 , N22, NnNn-2+Nn-1+1 Bæ ‘ B-tree **å®šä¹‰ï¼š**å¹³è¡¡å› å­ä¸º0ï¼Œå¤–éƒ¨èŠ‚ç‚¹ä¸ºnullï¼Œå¶å­èŠ‚ç‚¹æŒ‡å†…éƒ¨èŠ‚ç‚¹æœ€åä¸€å±‚ã€‚(ç»ˆç«¯ç»“ç‚¹åŒå¶å­ç»“ç‚¹) BSTã€AVLéƒ½æ˜¯å†…å­˜é‡Œå°æ•°æ®é‡æ£€ç´¢ã€‚Bæ ‘æ›´é€‚åˆå¤§é‡æ•°æ®ï¼ˆæ¶‰åŠç¡¬ç›˜ï¼‰çš„æ£€ç´¢ã€‚ç»“ç‚¹æ˜¯ç¡¬ç›˜ï¼ŒèŠ‚ç‚¹å†…éƒ¨ä»ç¡¬ç›˜è¯»å…¥å†…å­˜åçœ‹åˆ°ã€‚ mé˜¶ æ ¹çš„å…³é”®å­—ï¼š[1,m-1] éæ ¹å…³é”®å­—ï¼š[(m2)-1,m-1] ä»é˜¶æ•°ä¸€åŠå¼€å§‹ å­æ ‘æ˜¯å…³é”®å­—ä¸ªæ•°+1ã€‚ æŸ¥æ‰¾ï¼šå¾ªç¯æŸ¥æ‰¾ï¼šâ‘ ï¼ˆç£ç›˜é‡Œæ“ä½œï¼‰æ¯”è¾ƒåæ‰¾åˆ°å·¦å³å­æ ‘çš„ç»“ç‚¹ï¼Œä»ç£ç›˜è¯»å…¥å†…å­˜ã€‚â‘¡ï¼ˆå†…å­˜é‡Œæ“ä½œï¼‰ç»“ç‚¹å†…éƒ¨æ‰¾ç›®æ ‡å…³é”®å­—ï¼ˆæŠ˜åŠæˆ–é¡ºåºï¼‰ æ’å…¥ï¼š â‘ å®šä½ï¼šæ ¹æ®BSTæŸ¥æ‰¾ç®—æ³•ï¼Œæ‰¾åˆ°å¤–éƒ¨èŠ‚ç‚¹çš„NULLçš„ä½ç½®ã€‚ ï¼ˆä¹¦é‡Œçš„åŸè¯æ˜¯ï¼ŒæŸ¥æ‰¾åˆ°å¶å­èŠ‚ç‚¹NULLåï¼Œå†å®šä½åˆ°çˆ¶ç»“ç‚¹ï¼‰ â‘¡æ’å…¥ï¼šæ’å…¥åæ£€æŸ¥ç»“ç‚¹æ˜¯å¦åœ¨[(m2)-1,m-1]ã€‚è‹¥ä¸ªæ•°å¤§äºm-1ï¼Œè¿›è¡Œåˆ†è£‚ã€‚ â‘¢åˆ†è£‚ï¼šæ ¹æ®(m2)çš„ä½ç½®åˆ†æˆå·¦ä¸­å³ä¸‰éƒ¨åˆ†ã€‚ ä¸­é—´ä½ç½®çš„å…³é”®å­—æ’å…¥çˆ¶èŠ‚ç‚¹ï¼ˆå·¦å³å­æ ‘åˆ†åˆ«ä¸ºå·¦éƒ¨åˆ†å³éƒ¨åˆ†ç»“ç‚¹ï¼‰ã€‚ å·¦éƒ¨åˆ†ç»“ç‚¹ä¿ç•™åŸç»“ç‚¹ã€‚ å³éƒ¨åˆ†èŠ‚ç‚¹ä½œä¸ºçˆ¶ç»“ç‚¹çš„æ–°å³å­æ ‘ã€‚ (m2)æ˜¯ä¸Šå–æ•´ã€‚ æ„å»ºBæ ‘æ—¶ï¼Œè¦å¢åŠ å­æ ‘åªèƒ½é€šè¿‡åˆ†è£‚ã€‚ åˆ†è£‚åçˆ¶èŠ‚ç‚¹å¿…å¢åŠ ä¸€ä¸ªå…³é”®å­—ã€‚ å¢åŠ åè¶…è¶Šä¸Šé™ï¼ˆm2ï¼‰ï¼Œåˆ™ç»§ç»­åˆ†è£‚ã€‚ åˆ é™¤ï¼š æ ¹æ®è¢«åˆ å…ƒç´ æ˜¯â€”â€” éç»ˆç«¯ç»“ç‚¹ï¼šç”¨å‰é©±æˆ–åç»§æ›¿ä»£ã€‚ åˆ é™¤éå¶ç»“ç‚¹å…ƒç´ æœ€ç»ˆéƒ½è½¬æ¢æˆåˆ é™¤å¶ç»“ç‚¹å…ƒç´ ã€‚ï¼ˆç”¨å¶èŠ‚ç‚¹ç»™è¢«åˆ çˆ¶èŠ‚ç‚¹å¡«å‘ï¼‰ ç»ˆç«¯ç»“ç‚¹ï¼šæ ¹æ®è¢«åˆ å…³é”®å­—ç»“ç‚¹çš„ä¸ªæ•°â€”â€” (m2)-1ï¼šåˆ å®Œä¸ä½äºä¸‹é™ï¼Œç›´æ¥åˆ ã€‚ (m2)-1:åˆ å®Œä½äºä¸‹é™ã€‚ ä»ä¸æ»¡è¶³å…³é”®å­—ä¸ªæ•°çš„ç»“ç‚¹è§†è§’çœ‹ï¼š é‚£ä¸ªå­¤é›¶é›¶çš„ç»“ç‚¹çš„è§†è§’ï¼š â‘ æœ‰å…„å¼Ÿå¤Ÿå€Ÿï¼šçˆ¶ä¸‹æ¥ï¼Œå…„ä¸Šå»ã€‚ è¢«åˆ ç»“ç‚¹ç›¸é‚»çš„å…„å¼Ÿå…³é”®å­—ä¸ªæ•°(m2)-1ï¼Œä»¥å³å…„å¼Ÿä¸ºä¾‹ï¼Œè®©è¢«åˆ ç»“ç‚¹åç»§å³çˆ¶ç»“ç‚¹å…³é”®å­—åŠ å…¥è‡ªå·±çš„èŠ‚ç‚¹ï¼Œè€Œåç»§çš„åç»§å¡«è¡¥çˆ¶ç»“ç‚¹å…³é”®å­—åŸä½ç½®ã€‚ å·¦å³å…„å¼Ÿéƒ½å¯ä»¥å€Ÿã€‚ åç»§ å³åŒäº²èŠ‚ç‚¹çš„å…³é”®å­—ï¼Œåç»§çš„åç»§ å³å³å…„å¼Ÿæœ€å·¦è¾¹çš„å…³é”®å­—ã€‚ å·¦å…„å¼Ÿåˆ™æ˜¯å‰é©±å’Œå‰é©±çš„å‰é©±ã€‚ (åŸå› æ˜¯è¦ä¿è¯æœ‰åºçš„æ€§è´¨) â‘¡å·¦å³å…„å¼Ÿéƒ½ä¸å¤Ÿå€Ÿï¼šçˆ¶ä¸‹æ¥ï¼ŒåŒåˆå¹¶ æ­¤æ—¶å·¦å³å…„å¼Ÿçš„å…³é”®å­—éƒ½(m2)-1æˆ–æ— ï¼Œ ï¼Œåˆå¹¶ä¸ºä¸€ä¸ªå­ç»“ç‚¹ã€‚ å·¦å³å…„å¼Ÿéƒ½å¯ä»¥åˆå¹¶ã€‚ï¼ˆå·¦å‰é©±å³åç»§ï¼‰åˆå¹¶æ—¶è¦å¸¦ä¸Šå­æ ‘ã€‚å¸¦å­æ ‘çš„ä½ç½®ä½ è§‚å¯Ÿå…³é”®å­—é¡ºåºå°±èƒ½çŸ¥é“åœ¨å“ªã€‚ åˆå¹¶åçš„åŒäº²èŠ‚ç‚¹ä¸€å®šå°‘äº†ä¸€ä¸ªå…³é”®å­—ï¼Œæˆä¸ºä¸¤ä¸ªåˆå¹¶ç»“ç‚¹çš„ä¸­é—´å…³é”®å­—äº†ã€‚ è‹¥åŒäº²èŠ‚ç‚¹åˆå¹¶åï¼Œå‡å°‘ä¸€ä¸ªå…³é”®å­—å¯¼è‡´(m2)-1ï¼Œåˆ™ç»§ç»­å¾ªç¯è¿™ä¸€æ­¥ï¼ˆåˆ¤æ–­å…„å¼Ÿå¤Ÿå€Ÿæˆ–ä¸å¤Ÿå€Ÿï¼‰ **é«˜åº¦ï¼š**logm(n+1) hlog(m2)((n+1)2)+1 B+æ ‘ é€‚ç”¨äºæ•°æ®åº“æ£€ç´¢ã€‚ ä¸¤å±‚ï¼šåˆ†ä¸ºç›®å½•å±‚ï¼ˆåˆ†æ”¯ï¼‰å’Œæ•°æ®å±‚ï¼ˆå¶å­ï¼‰ å…³é”®å­—é‡å¤ï¼šéå¶èŠ‚ç‚¹åªè´Ÿè´£ç´¢å¼•ï¼ˆå³æŒ‡é’ˆï¼‰ï¼Œæ²¡æœ‰æ•°æ®åœ°å€ã€‚æ‰€ä»¥æŸ¥æ‰¾å°±åƒåç”µæ¢¯ç›´è¾¾ç›®æ ‡å¶å­èŠ‚ç‚¹ã€‚ ä¸¤ä¸ªå¤´æŒ‡é’ˆï¼šæ ¹èŠ‚ç‚¹ä¸€ä¸ªæŒ‡é’ˆï¼Œå¶å­èŠ‚ç‚¹ä¸€ä¸ªæŒ‡é’ˆã€‚ å…³é”®å­—å’Œå­æ ‘ä¸ªæ•°ç›¸ç­‰ï¼šä¸€ä¸ªå…³é”®å­—å¯¹åº”ä¸€ä¸ªå­æ ‘çš„æœ€å¤§å…ƒç´ ã€‚æ•…å…³é”®å­—ä¸ªæ•°æ˜¯m2, æ¯”Bæ ‘+1ã€‚ B+éšæœº+é¡ºåºéƒ½æ”¯æŒã€‚Bä»…æ”¯æŒéšæœº å°æ ¹å † **å®šä¹‰ï¼š**å®Œå…¨äºŒå‰æ ‘ï¼ˆå¶å­å¿…é¡»ä»å·¦åˆ°å³è¿ç»­æ’åˆ—ï¼‰ã€‚ä»»ä¸€èŠ‚ç‚¹å…¶å·¦å³å­©å­ã€‚ èŠ‚ç‚¹içš„å·¦å­©å­ï¼š2i å³å­©å­ï¼š2i+1 çˆ¶èŠ‚ç‚¹:(i2) ä¸‹å–æ•´ éå¶å­ç»“ç‚¹ï¼š1~(n2) **è¾“å‡ºï¼š**è¾“å‡ºå †é¡¶å…ƒç´ åï¼Œå°†å †åº•å…ƒç´ é€å…¥å †é¡¶ï¼Œå†æ…¢æ…¢ä¸‹å ã€‚ **åˆ é™¤ï¼š**åŒè¾“å‡ºã€‚ **æ’å…¥ï¼š**å…ˆæ”¾å †åº•ï¼Œå†é€æ­¥ä¸Šå‡ã€‚ è°ƒæ•´ï¼šæ™®é€šæ•°ç»„å˜æˆæ ¹å †ï¼šä»ä¸‹å¾€ä¸Šçœ‹ã€‚ å°†né™¤ä»¥äºŒ å‘ä¸‹å–ä½™ï¼Œæ‰¾åˆ°æœ€åä¸€ä¸ªéå¶èŠ‚ç‚¹ã€‚å¼€å§‹ä»åå¾€å‰éå†æ‰€æœ‰éå¶ç»“ç‚¹ï¼Œä¸ç¬¦åˆå¤§å°å…³ç³»çš„å°±å’Œå­©å­äº¤æ¢ã€‚ ç©ºé—´å‡ ä½•æ—‹è½¬é¢ï¼š[å¹³é¢æ›²çº¿]ç»•[å¹³é¢ç›´çº¿]ï¼Œç»•xè½´åˆ™xä¸åŠ¨ï¼Œå¦å¤–ä¸€ä¸ªå˜å¹³æ–¹å’Œã€‚æŸ±é¢ï¼šå®šç›´çº¿ä¸ºæ¯çº¿ï¼Œå®šæ›²çº¿ä¸ºå‡†çº¿ å¹³é¢ï¼šç‚¹+æˆªè·æˆªè·å¼ç‚¹+æ³•å‘é‡ç‚¹æ³•å¼ ç›´çº¿ï¼šç‚¹+æ–¹å‘å‘é‡å¯¹ç§°å¼ å‚æ•°æ–¹ç¨‹ æ›²é¢ç§¯åˆ†å·²çŸ¥æ›²é¢çš„æ³•å‘é‡ç”¨æ–¹å‘ä½™å¼¦è¡¨ç¤ºæ˜¯n (cosÎ±,cosÎ²,cosÎ³)ã€‚å…¶ä¸­Î±æ˜¯nä¸xè½´(yozé¢)çš„è§’åº¦ï¼ŒÎ²æ˜¯ä¸yè½´(xozé¢)ï¼ŒÎ³æ˜¯ä¸zè½´(xoyé¢)ã€‚ è€Œæ³•å‘é‡ç”¨ä»£æ•°è¡¨ç¤ºæ˜¯n(-Zx,-Zy,1) (å½“æ›²é¢ä¸ºzz(x,y)æ—¶) ç¬¬ä¸€ç±»æ›²é¢ç§¯åˆ†ï¼Œæ±‚çš„æ˜¯æ›²é¢è¡¨é¢çš„é¢ç§¯ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯é«˜åº¦ä¸º1çš„æ›²é¢è–„ç‰‡çš„è´¨é‡ã€‚æ–¹æ³•æ˜¯å°†ä¸‰ä¸ªæ–¹å‘çš„æ›²é¢é¢ç§¯æŠ•å½±åˆ°ä¸€ä¸ªé¢ä¸Šã€‚ (åˆ©ç”¨æ¢¯åº¦å¾—åˆ°æ³•å‘é‡ï¼Œæ³•å‘é‡ä¸zè½´çš„è§’åº¦Î³å³xoz å’Œ yozå¹³é¢ä¸æŠ•å½±é¢xoyçš„è§’åº¦Î³) ä¸€ä¸ªå¹³é¢dSå’Œå¦ä¸€ä¸ªæŠ•å½±å¹³é¢(å¦‚xoy)çš„å¤¹è§’ï¼Œå³è¯¥å¹³é¢åˆ‡å¹³é¢ä¸å¯¹åº”åæ ‡é¢çš„å¤¹è§’ï¼Œå³åˆ‡å¹³é¢æ³•å‘é‡ä¸å¯¹åº”åæ ‡è½´çš„å¤¹è§’ã€‚ ä¾§è¾¹æ–œè¾¹ cosÎ³ æ³•å‘é‡nzè½´ï¼Œå³dSdxdy cosÎ³ã€‚ è€ŒcosÎ³ cosn , z (nÂ·z)|n|Â·|z| $$d\\sigma dS \\cdot \\cos\\langle \\vec{n}, zè½´ \\rangle dS\\cdot\\frac{\\vec{n}\\cdot z}{|\\vec{n}|\\cdot|{zè½´}|} dS\\cdot\\frac{(-Z_y,-Z_y,1)\\cdot(0,0,1)}{\\sqrt{(-Z_x)^2+(-Z_y)^2+(1)^2}\\cdot\\sqrt{0+0+1^2}}$$ æ•…dS 1cosÎ³ dxdy ã€‚$$dxdy dS\\cdot\\cos\\gamma \\frac{1}{\\cos\\gamma}dxdy dS S\\iint\\limits_{D} \\sqrt{Z_x^2+Z_y^2+1} , dxdy$$ ç¬¬äºŒç±»æ›²é¢ç§¯åˆ†ï¼Œæ±‚çš„æ˜¯å•ä½æ—¶é—´æˆªé¢é€šè¿‡çš„æµä½“è´¨é‡ã€‚ è®¾æµä½“å¯†åº¦ä¸º1ï¼Œvæ˜¯é€Ÿåº¦ sæ˜¯é¢ç§¯ï¼Œåˆ™ mÏvts ï¼Œ(vtæ˜¯é«˜ï¼Œsæ˜¯æˆªé¢é¢ç§¯ï¼Œæ•…vts Vå³ä½“ç§¯ ,mÏV)æ–¹æ³•åŒæ ·æ˜¯æŠ•å½±è½¬æ¢åæ ‡ï¼Œå’Œç¬¬ä¸€ç±»æ›²é¢ç§¯åˆ†ç±»ä¼¼ï¼Œdydz dScosÎ± (æ­¤æ—¶dSdxdy 1cosÎ³) dxdy(cosÎ±cosÎ³) ï¼Œæ­¤æ—¶ç”±æ›²é¢æ³•å‘é‡çš„ä»£æ•°è¡¨ç¤ºå¾—cosÎ±cosÎ³ -Zxã€‚æ•…dydz -Zx dxdyã€‚åŒç†dzdx -Zy dxdyã€‚ å¤‡æ³¨ï¼šè§£å†³ç¬¬äºŒç±»æ›²é¢è¿˜å¯ä»¥åˆ©ç”¨é«˜æ–¯å…¬å¼å’Œæ–¯æ‰˜å…‹æ–¯å…¬å¼ã€‚é«˜æ–¯è¦æ±‚æ›²é¢å…‰æ»‘+ç©ºé—´å°é—­(På¯¹xåå¯¼ï¼ŒQå¯¹yåå¯¼ï¼ŒRå¯¹zåå¯¼, ç§¯åˆ†å¾®å…ƒç»Ÿä¸€ä¸ºdV)ï¼Œæ–¯æ‰˜å…‹æ–¯åˆ™æ˜¯å°†é—­åˆæ›²çº¿ç§¯åˆ†é—®é¢˜è½¬æ¢ä¸ºä»¥è¯¥æ›²çº¿ä¸ºè¾¹ç•Œçš„ç¬¬äºŒç±»æ›²é¢ç§¯åˆ†é—®é¢˜(å…¬å¼+è½¬æ¢æŠ•å½±+äºŒé‡ç§¯åˆ†)ã€‚ å¤šæ’­ip å¤šæ’­æ•°æ®æŠ¥ï¼Œç›®çš„åœ°å€æ˜¯ Ipv4 D ç±»åœ°å€ï¼Œ1110 å¼€å¤´ï¼Œå³ 224 åˆ° 239ã€‚ åˆ†ä¸¤ç§ï¼šæœ¬å±€åŸŸç½‘çš„ç¡¬ä»¶å¤šæ’­ + äº’è”ç½‘çš„å¤šæ’­ã€‚ å±€åŸŸç½‘ç¡¬ä»¶å¤šæ’­ä¸­ï¼Œmac åœ°å€ åªæœ‰ 23 ä½èƒ½ç”¨ä½œå¤šæ’­åœ°å€ï¼Œ æ‰€ä»¥ ip åœ°å€æ˜ å°„åˆ° mac æ—¶ï¼Œåªæœ‰å 23 ä½èƒ½ä¿ç•™ã€‚ è¿™æ„å‘³ç€æ˜ å°„ä¸æ˜¯ä¸€å¯¹ä¸€çš„ã€‚ PPPå’±ä»¬ç›®å‰ç”¨çš„æ‰‹æœºæµé‡ï¼Œå°±æ˜¯æ•°æ®é“¾è·¯å±‚çš„ç‚¹å¯¹ç‚¹ ppp åè®®ã€‚æåˆ° pppï¼Œå°±æƒ³èµ·ä¸¤ä¸ªæ¨¡å—ï¼šlink control protocols å’Œ net control protocol ã€‚ä¸€ä¸ªç½‘ç»œå±‚åè®®å¯¹åº”ä¸€ä¸ª NCPã€‚ ppp é¦–å°¾å®šç•Œç¬¦ï¼š0X7Eppp é¢å‘å­—èŠ‚ï¼Œä¸éœ€è¦åºå·ç¡®è®¤ï¼Œç‚¹å¯¹ç‚¹ä¸éœ€è¦ csma åè®®ï¼Œæ‰€ä»¥æ²¡æœ‰æœ€çŸ­å¸§é•¿é™åˆ¶ï¼ˆ2 åŒ¸ vï¼‰ï¼Œå³ 0-1500B é“¾æ¥è¿‡ç¨‹ï¼šé“¾è·¯é™æ­¢â¡ï¸é“¾è·¯å»ºç«‹â¡ï¸Lcp åå•†æˆåŠŸè¿›å…¥é‰´åˆ«çŠ¶æ€â¡ï¸é‰´åˆ«æˆåŠŸè¿›å…¥ç½‘ç»œå±‚åè®®çŠ¶æ€ï¼Œé…ç½® Ncpâ¡ï¸é“¾è·¯æ‰“å¼€çŠ¶æ€ï¼ˆæ­¤æ—¶å¯ä»¥é€šä¿¡äº†ï¼‰ CSMAï¼ˆä»‹è´¨è®¿é—®ï¼‰csmaca: ä¿¡é“é¢„çº¦ï¼ˆç›‘å¬ï¼‰éšè”½ç«™ï¼šDIFS+RTS+ï¼»SIFS+CTS+ï¼ˆSIFS+æ•°æ®å¸§+SIFS+ACKï¼‰ï¼½ csmacd:è¾¹å‘è¾¹å¬ã€‚äºŒè¿›åˆ¶é€€é¿ç®—æ³•ï¼š0 åˆ° 2 Ï„rã€‚ ï¼ˆ r æ˜¯ 2 çš„ k æ¬¡æ–¹-1k ä¸ºé‡ä¼ æ¬¡æ•°ã€‚ï¼‰ k æœ€é«˜ä¸º 10ï¼Œåˆ°ç¬¬ 16 æ¬¡ä¸æˆåŠŸåˆ™æ”¾å¼ƒå‘é€ã€‚ æœ€çŸ­å¸§é•¿ï¼š2 Ï„ vï¼ˆ10Base æ˜¯ 64Bï¼Œ51.2 å¾®ç§’ï¼‰ 2 Ï„v RTT x V ï¼ˆå¾€è¿”æ—¶å»¶ x æ•°æ®ä¼ æ’­é€Ÿç‡ï¼‰ å¾€è¿”æ—¶å»¶è€Œéå•ç¨‹æ—¶å»¶çš„åŸå› ï¼šå†²çªä¿¡å·éœ€è¦ä»å†²çªç‚¹è¿”å›å‘é€æ–¹ A æ‰èƒ½è¢«æ£€æµ‹åˆ°(è¾¹æ‰“è¾¹å¬)ã€‚ 16 æ˜¯ä¸ªç¥å¥‡æ•°å­—ã€‚rip16 ä¹Ÿæ˜¯ä¸å¯è¾¾ äº‰ç”¨æœŸï¼šå‘é€ 64B(512b)çš„æ—¶é—´ã€‚ ï¼ˆç«¯åˆ°ç«¯å¾€è¿”æ—¶é—´2Ï„ï¼Œåˆç§°ä¸ºç¢°æ’çª—å£ï¼‰ 10Mbits ä»¥å¤ªç½‘æ˜¯ 51.2 å¾®ç§’ çš„å‘é€æ—¶é—´ã€‚ æ³¨æ„æ˜¯bitä½ï¼Œä¸æ˜¯æŒ‰å­—èŠ‚Bã€‚ 100Mbit æ˜¯ 5.12 å¾®ç§’ã€‚åŒæ—¶ä¼šå‡å°‘ç½‘æ®µé•¿åº¦ã€‚ ç¥å¥‡çš„ fancy å…¬å¼ï¼š2 çš„ n æ¬¡æ–¹ -1ã€‚ å®ƒæ˜¯ï¼š1.csmacd åè®®å›é¿ç®—æ³•çš„æœ€å¤§é€€é¿æ—¶é—´ã€‚ï¼ˆç¬¬ n æ¬¡é€€é¿ï¼‰2.è¿ç»­ ARQ åè®® gbn çš„å‘é€çª—å£ä¸Šé™ã€‚ï¼ˆn æ¯”ç‰¹å¯¹å¸§ç¼–å·ï¼‰3.æ»¡äºŒå‰æ ‘çš„ç»“ç‚¹æ•°ï¼ˆé«˜åº¦ä¸º nï¼‰ TCP UDP IP MAC é¦–éƒ¨é•¿åº¦TCP é¦–éƒ¨é•¿åº¦ 20ï½60Bã€‚(4ä½æ•°æ®åç§»å­—æ®µ å³é¦–éƒ¨é•¿åº¦ï¼Œå•ä½ 4Bï¼Œæœ€å¤§ 15x4) UDP é¦–éƒ¨é•¿åº¦ 8B (2 2 2 2) â€”â€”â€”â€”â€”ä»¥å¤ªç½‘ MAC å¸§ï¼šé¦–éƒ¨é•¿åº¦ï¼š18Bï¼ˆä¸ç®—å‰å¯¼ç ï¼‰ 8 B å‰å¯¼ç ï¼ˆ7 B å‰åŒæ­¥ç +1 å¸§å¼€å§‹å®šç•Œç¬¦ï¼‰ 6 ç›®çš„åœ°å€6 æºåœ°å€2 äº¤ä»˜åè®®ç±»å‹4FCS æ£€éªŒç  æ•°æ®ï¼š46-1500ï¼Œï¼ˆ46 æ—¶ä¸ºå¸§æœ€å°é•¿åº¦ 46+1864Bï¼‰ â€”â€”â€”â€”ip æ•°æ®æŠ¥é¦–éƒ¨é•¿åº¦ 20B(å¯å˜é•¿) ä¸‰å•ä½ 4B 1B 8Bæ€»é•¿åº¦ 16 ä½ 10BASEå’Œä¼ è¾“ä»‹è´¨T æ˜¯åŒç»çº¿(Twisted)ï¼ŒF æ˜¯å…‰çº¤(fiber)ï¼Œæ•°å­—æ˜¯åŒè½´ç”µç¼†(cable) åŒç»çº¿ï¼š å±€åŸŸç½‘+ä¼ ç»Ÿç”µè¯ç½‘ï¼Œç»åˆå‡å°‘ç›¸é‚»å¯¼çº¿å¹²æ‰°ï¼ŒåŠ ä¸Šå±è”½å±‚ é€‚ç”¨äºæ¨¡æ‹Ÿä¼ è¾“ï¼ˆæ”¾å¤§å™¨ï¼‰+æ•°å­—ä¼ è¾“(ä¸­ç»§å™¨) å…‰çº¤ï¼š å…‰è„‰å†²ã€‚ å…¨åå°„ç‰¹æ€§ã€‚ é•¿è·ç¦»ï¼šå•æ¨¡å…‰çº¤ã€‚ç›´å¾„å°åˆ°ä¸€ä¸ªæ³¢é•¿ï¼Œå…‰ä¼šå§‹ç»ˆå‘å‰ä¸åå°„ã€‚ï¼ˆç”¨äºåŠå¯¼ä½“æ¿€å…‰ï¼‰ çŸ­è·ç¦»ï¼šå¤šæ¨¡å…‰çº¤ã€‚å…‰æºä¸ºå‘å…‰äºŒæç®¡ã€‚ åŒè½´ç”µç¼†ï¼š å¼ºå±è”½æ€§ï¼šå†…å¯¼ä½“ï¼ˆé“œèŠ¯ï¼‰+å±è”½å±‚+å¡‘æ–™å¤–å±‚ ä¿¡é“å¹³å‡(å®é™…)æ•°æ®ä¼ è¾“é€Ÿç‡ ä¿¡é“åˆ©ç”¨ç‡Ã—ä¿¡é“å¸¦å®½(æœ€å¤§æ•°æ®ä¼ è¾“é€Ÿç‡)â€, å‘é€å‘¨æœŸå†…å‘é€çš„æ•°æ®é‡å‘é€å‘¨æœŸ BGP OSPF IGMPBGPï¼šåˆ†ä¸ºå†…éƒ¨BGPåè®®(å†…éƒ¨)å’Œå¤–éƒ¨BGPåè®®(è‡ªæ²»ç³»ç»Ÿä¹‹é—´)ï¼ŒiBGPå†…éƒ¨ä¼šè¯ï¼ŒeBGPå¤–éƒ¨ä¼šè¯æ‰“å¼€ã€æ›´æ–°ã€ä¿æ´»ã€é€šçŸ¥(open,update,keepalive,notification) OSPFï¼š1.é—®å€™åˆ†ç»„(hello)2.(æ•°æ®åº“)æè¿°åˆ†ç»„3.(é“¾è·¯)çŠ¶æ€åˆ†ç»„ï¼šè¯·æ±‚ã€æ›´æ–°ã€ç¡®è®¤ IGMPï¼šä¼ é€’å¤šæ’­ä¿¡æ¯åè®®å­—æ®µå€¼ä¸º2ï¼ŒDç±»IPåœ°å€ï¼ˆå‰ç¼€ä¸º1110ï¼Œå³224~239ï¼‰ï¼Œå±€åŸŸç½‘ç¡¬ä»¶å¤šæ’­æ—¶å–å23ä½ï¼Œè¿˜èƒ½äº’è”ç½‘å¤šæ’­ è¾¹ç•Œå¯¹é½è¾¹ç•Œå¯¹é½æœ‰ä¸¤ä¸ªè¦æ±‚ï¼š1.æ•´ä½“structæ˜¯æœ€å¤§å˜é‡å¯¹é½å€¼æ•´æ•°å€ï¼›2.æ¯ä¸ªæˆå‘˜è¦æŒ‰ç±»å‹å¤§å°å¯¹é½(char1 short2 int 4)ï¼Œæˆ–è€…è¯´å…¶åœ°å€å¯¹ç±»å‹å¤§å°å–ä½™0 æ‹¥å¡çª—å£æˆ‘çš„æ„æ€æ˜¯ï¼Œæ‹¥å¡æ§åˆ¶çª—å£æ”¶åˆ°ä¸€ä¸ªç¡®è®¤ï¼Œæ‰å¢åŠ ä¸€ä¸ªMSSã€‚æ¯”å¦‚æ…¢å¼€å§‹ä¸º1ï¼Œä¸è¶…è¿‡æ‹¥å¡æ§åˆ¶åˆå§‹é˜ˆå€¼æ—¶ï¼Œç¬¬ä¸€è½®RTTå‘é€1ä¸ªMSSï¼Œå‘é€æ–¹æ”¶åˆ°ä¸€ä¸ªç¡®è®¤åˆ™æ‹¥å¡çª—å£cwndå¢é•¿ä¸º2ã€‚ç¬¬äºŒè½®RTTå‘é€2ä¸ªMSSï¼ŒæœŸé—´æ”¶åˆ°ä¸¤ä¸ªç¡®è®¤åºå·ï¼Œ2+2 4ã€‚ç¬¬ä¸‰è½®RTTå‘é€4ä¸ªMSSï¼ŒæœŸé—´æ”¶åˆ°å››ä¸ªç¡®è®¤åºå·ï¼Œ4+48ã€‚ è¿™ä¸ªæœŸé—´ï¼Œæ‹¥å¡çª—å£cwndæ˜¯ä¸€ä¸ªä¸€ä¸ªå¢é•¿çš„ï¼Œä¾‹å¦‚ç¬¬ä¸‰è½®æ˜¯4+1+1+1+1 8ï¼Œæ”¶åˆ°ä¸€ä¸ªæ¥æ”¶æ–¹ç¡®è®¤ack+1ï¼Œè€Œä¸æ˜¯ç›´æ¥ä»cwnd4æ”¶åˆ°ä¸€ä¸ªç´¯è®¡ç¡®è®¤ç›´æ¥åˆ°8ã€‚ ä¾‹å­ï¼šcwnd 1ï¼Œssthresh 16ã€‚å‘é€æ–¹å‘é€åºå·ä¸º 1-1000 çš„æ•°æ®æ®µï¼ˆ1 ä¸ª MSSï¼‰ã€‚æ¥æ”¶æ–¹æ”¶åˆ°åï¼Œå›å¤ ACK 1001ã€‚è¿™ä¸ªACK 1001å°±æ˜¯ä¸€ä¸ªç´¯è®¡ç¡®è®¤ï¼Œå®ƒç¡®è®¤äº†1-1000è¿™æ®µæ•°æ®ã€‚å‘é€æ–¹æ”¶åˆ°ACK 1001åï¼ŒçŸ¥é“1-1000å·²è¢«ç¡®è®¤ã€‚æ­¤æ—¶ï¼Œâ€œå·²å‘é€ä½†æœªç¡®è®¤â€ çš„çª—å£ä¸ºç©ºã€‚æ ¹æ®æ…¢å¼€å§‹ç®—æ³•ï¼Œå› ä¸ºæœ‰ä¸€ä¸ª MSS çš„æ•°æ®è¢«ç¡®è®¤ï¼Œæ‰€ä»¥cwndå¢åŠ  1ï¼Œå˜ä¸º 2ã€‚å‘é€æ–¹ç°åœ¨å¯ä»¥å‘é€ 2 ä¸ª MSS çš„æ•°æ®ï¼Œå³ 1001-2000 å’Œ 2001-3000ã€‚æ¥æ”¶æ–¹æ”¶åˆ°è¿™ä¸¤ä¸ªæ•°æ®æ®µåï¼Œå›å¤ ACK 3001ã€‚è¿™ä¸ªACK 3001ä¹Ÿæ˜¯ä¸€ä¸ªç´¯è®¡ç¡®è®¤ï¼Œå®ƒç¡®è®¤äº†1-3000è¿™æ®µæ•°æ®ï¼ˆåŒ…æ‹¬äº†ä¹‹å‰çš„1-1000ï¼‰ã€‚å‘é€æ–¹æ”¶åˆ°ACK 3001åï¼ŒçŸ¥é“åˆæœ‰ä¸¤ä¸ªMSS çš„æ•°æ®ï¼ˆ1001-2000 å’Œ 2001-3000ï¼‰è¢«ç¡®è®¤äº†ã€‚å› æ­¤ï¼Œcwndä¼šè¿ç»­å¢åŠ ä¸¤æ¬¡ï¼Œä»2å˜ä¸º4ã€‚ é€»è¾‘åœ°å€æ˜ å°„åˆ°ç‰©ç†åœ°å€è®¡ç®—æœºä¸ºæå‡æ•ˆç‡æˆ–ä¿éšœå®‰å…¨ï¼Œå°†â€œåœ°å€è½¬æ¢â€ä½œä¸ºâ€œå‰ç½®å‡†å¤‡æ­¥éª¤â€ï¼Œä¸â€œæœ€ç»ˆæ˜¯å¦çœŸçš„è¯»å†™æ•°æ®â€è§£è€¦ã€‚ï¼ˆæ•…åœ°å€è½¬æ¢è¿‡ç¨‹ä¸cacheæ— å…³ã€‚ï¼‰ åœ°å€è½¬æ¢è¿‡ç¨‹:è½¬æ¢ä¸€ä¸ªä¸»å­˜é€»è¾‘åœ°å€ï¼Œæ ¹æ®ç¡¬ä»¶åˆ†æˆè™šæ‹Ÿé¡µå·å’Œé¡µå†…åç§»é‡offsetï¼Œæ ¹æ®è™šæ‹Ÿé¡µå·æ‰¾åˆ°é¡µè¡¨å¯¹åº”çš„é¡µè¡¨é¡¹ï¼Œå…ˆçœ‹æœ‰æ•ˆä½æ˜¯å¦ä¸º1ã€‚ å¦‚æœä¸º1ç›´æ¥æŠŠé¡µè¡¨é¡¹é‡Œçš„ç‰©ç†é¡µå·å’Œé€»è¾‘åœ°å€ä¸­çš„offsetç»„åˆæˆä¸ºç‰©ç†åœ°å€ã€‚ å¦‚æœä¸º0ï¼Œä¸çœ‹ç‰©ç†é¡µå·ï¼ˆæ²¡æœ‰æ„ä¹‰ï¼‰ï¼Œå¯åŠ¨ç¼ºé¡µä¸­æ–­ç¨‹åºï¼ŒæŸ¥é¡µè¡¨é¡¹çš„å¤–å­˜ç‰©ç†åœ°å€ï¼Œé€šè¿‡ç½®æ¢ç®—æ³•åˆ†é…ç‰©ç†é¡µæ¡†ï¼ŒæŠŠå¤–å­˜ç‰©ç†é¡µè°ƒå…¥å†…å­˜å¹¶ä¿®æ”¹é¡µè¡¨é¡¹çš„æœ‰æ•ˆä½ã€è®¿é—®ä½ç­‰ã€‚å¤„ç†ç¨‹åºå®Œæˆä¹‹åï¼Œé‡æ–°æ‰§è¡Œå‘ç”Ÿç¼ºé¡µçš„æŒ‡ä»¤ï¼Œå¾—åˆ°è®¿é—®é¡µçš„ç‰©ç†åœ°å€ã€‚ â€”â€”â€”â€”â€”â€” éœ€è¦è½¬æ¢åœ°å€ä½†ä¸éœ€è¦è®¿é—®çš„æƒ…å†µï¼ˆä¸éœ€è¦ä¿®æ”¹cacheï¼‰ CPUæŒ‡ä»¤é¢„å–ï¼ˆæœ€å¸¸è§ï¼‰ï¼šæå‰è½¬åœ°å€ï¼Œä½†æŒ‡ä»¤å¯èƒ½è¢«â€œä¸¢å¼ƒâ€ å†…å­˜ä¿æŠ¤ä¸æƒé™æ£€æŸ¥ï¼šè½¬åœ°å€æ˜¯ä¸ºäº†â€œéªŒè¯åˆæ³•æ€§â€ï¼Œè€Œéâ€œè¯»å†™æ•°æ®â€ å¦‚æœè½¬æ¢ä¹‹åéœ€è¦è¯»å†™ï¼Œåˆ™æ›´æ–°cacheå†…å®¹ã€‚ â€”â€”â€”â€”â€”â€”æ³¨:ç”±äºå®¹é‡ç›¸å·®è¾ƒå¤§â€”â€”ä¸»å­˜ä¸å¤–å­˜çš„ä¿¡æ¯ä¼ è¾“å•ä½æ˜¯ â€œé¡µâ€page æˆ– â€œæ®µâ€ä¸»å­˜ä¸cacheçš„ä¿¡æ¯ä¼ è¾“å•ä½æ˜¯ â€œå—â€ blockã€‚ å®é™…ä¸Š:cache å— cache è¡Œã€‚ç¡¬ç›˜ å— cluster ç°‡ã€‚ å‘é‡ç»„å‘é‡ç»„æ˜¯è§£å†³çº¿æ€§æ–¹ç¨‹ç»„çš„å·¥å…·ã€‚å‘é‡ç»„çš„çº¿æ€§å…³ç³»ä¸çº¿æ€§æ–¹ç¨‹ç»„çš„å¯¹åº”å¦‚ä¸‹: è®¾æœ‰ä¸¤ä¸ªå‘é‡ç»„Aå’ŒBã€‚Aæ˜¯mnçŸ©é˜µï¼ŒBæ˜¯mtçŸ©é˜µã€‚Xå³çº¿æ€§è¡¨ç¤ºçš„ç³»æ•°ï¼Œæ˜¯n*tçŸ©é˜µã€‚ï¼ˆå³ç³»æ•°çŸ©é˜µï¼Œå³[k1k2â€¦â€¦kn]ã€‚æ¯ä¸ªkå¯¹åº”Bä¸­ä¸€ä¸ªåˆ—å‘é‡ç”±Açº¿æ€§è¡¨ç¤ºçš„ç³»æ•°ï¼‰ 1.å‘é‡ç»„é—´çš„çº¿æ€§å…³ç³»ï¼Œå¯¹åº”éé½æ¬¡çº¿æ€§æ–¹ç¨‹AXBã€‚ 1ï¸âƒ£AXBæœ‰è§£ï¼ŒAå¯é€šè¿‡ç³»æ•°çŸ©é˜µXçº¿æ€§è¡¨ç¤ºB2ï¸âƒ£å¦‚æœæ— è§£ï¼Œå³Bä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‘é‡æ— æ³•ç”±Açš„å‘é‡çº¿æ€§ç»„åˆå¾—åˆ° åˆ¤æ–­ä¾æ®:æœ‰æ²¡æœ‰è§£é€šè¿‡çœ‹AçŸ©é˜µä¸ABå¢å¹¿çŸ©é˜µçš„ç§©æ˜¯å¦ç›¸ç­‰ã€‚ æ³¨:1.å¦‚æœä¸¤ä¸ªå‘é‡ç»„ç­‰ä»·ï¼Œå³ç›¸äº’çº¿æ€§è¡¨ç¤ºï¼Œè¿™æ„å‘³ç€ä¸‰ç§©ç›¸ç­‰ã€‚2.Bå¯é€€åŒ–æˆå•ä¸ªå‘é‡bï¼Œå³å‘é‡ç»„Aæ˜¯å¦å¯ä»¥çº¿æ€§è¡¨ç¤ºbçš„é—®é¢˜ã€‚ 2.å‘é‡ç»„Aè‡ªèº«å†…éƒ¨çš„çº¿æ€§å…³ç³»ï¼Œå¯¹åº”é½æ¬¡çº¿æ€§æ–¹ç¨‹ç»„ã€‚å³AX0ã€‚1ï¸âƒ£å¦‚æœæœ‰å”¯ä¸€é›¶è§£ï¼Œå°±æ˜¯å‘é‡ç»„açº¿æ€§æ— å…³ï¼Œåªèƒ½è®©k1k2â€¦â€¦kn0ã€‚2ï¸âƒ£å¦‚æœæ— ç©·å¤šè§£å°±æ˜¯çº¿æ€§ç›¸å…³ã€‚ ä¸Šè¿°å¯¹åº”å…³ç³»çš„æ ¸å¿ƒæ˜¯â€œç§©â€ï¼Œè€Œåˆç­‰è¡Œå˜æ¢æ˜¯æ±‚çŸ©é˜µç§©çš„å…³é”®å·¥å…·ã€‚å› æ­¤ä¸¤è€…æ˜¯åˆ†æçº¿æ€§å…³ç³»ä¸æ–¹ç¨‹ç»„è§£çš„åˆ†æå·¥å…·ã€‚ å…³é”®è·¯å¾„ã€æœ€çŸ­è·¯å¾„(dijkstra,floyd)å…³é”®è·¯å¾„ï¼š æ‹“æ‰‘æ’åº+é€†æ‹“æ‰‘ eteâ†’lteetvâ†’ltv dijkstra: 1.æ¯æ¬¡ä»æœªæ ‡è®°çš„èŠ‚ç‚¹ä¸­,é€‰æ‹©è·ç¦»å‡ºå‘ç‚¹æœ€è¿‘çš„èŠ‚ç‚¹ï¼Œæ”¶å½•åˆ°æœ€ä¼˜è·¯å¾„é›†åˆSä¸­2.è®¡ç®—åˆšåŠ å…¥è·¯å¾„é›†åˆçš„èŠ‚ç‚¹Açš„æ‰€æœ‰é‚»è¿‘èŠ‚ç‚¹Bçš„è·ç¦» (ä¸åŒ…å«æ ‡è®°çš„èŠ‚ç‚¹)è‹¥(èŠ‚ç‚¹Açš„è·ç¦»+èŠ‚ç‚¹Aåˆ°èŠ‚ç‚¹Bçš„è¾¹é•¿) èŠ‚ç‚¹Bçš„è·ç¦»ï¼Œå°±æ›´æ–°èŠ‚ç‚¹Bçš„è·ç¦»å’Œå‰é¢ç‚¹ã€‚ å¼€å§‹é»˜è®¤æ— ç©·ï¼Œç½—åˆ—é¡¶ç‚¹ï¼Œåˆ†ä¸ºç¬¬ä¸€è½®ç¬¬äºŒè½®ç¬¬ä¸‰è½®ï¼Œæ¯ä¸€è½®é›†åˆSå¢åŠ ä¸€ä¸ªé¡¶ç‚¹ï¼Œè¯¥é¡¶ç‚¹ä¸å†å»¶ä¼¸(åé¢å‡ è½®ç©ºç™½)ã€‚ floyd nè¡Œé‚»æ¥çŸ©é˜µè¡¨ç¤ºå¸¦æƒæœ‰å‘å›¾ã€‚æ²¿å¯¹è§’çº¿nè½®åå­—æ¶ï¼Œæ¯è½®å¯¹è§’çº¿a[i] [i]ä¸å˜(å¦åˆ™è‡ªå·±æŒ‡å‘è‡ªå·±äº†)ï¼Œå¯¹è§’çº¿ä¹‹å¤–çš„å…ƒç´ å€¼ä¸åå­—æ¶è¡Œåˆ—ä¹‹å’Œæ¯”è¾ƒï¼Œå°åˆ™æ›¿æ¢ã€‚ Floydå¯ä»¥æ±‚å¸¦è´Ÿæƒè¾¹ä½†ä¸å¸¦è´Ÿç¯å›¾çš„å¤šæºæœ€çŸ­è·¯å¾„ æ›¼å½»æ–¯ç‰¹ç¼–ç å½’é›¶å†…éƒ¨ä¸è·³å˜ã€‚ å½’é›¶å¤–éƒ¨ä¸è·³å˜ï¼Œä¸¤ä¸ªå›ºå®šæ ·å­ï¼›éå½’å¤–éƒ¨é›¶è·³å˜ï¼Œç”¨è·³å˜è¡¨ç¤º 01 æ›¼å½»æ–¯ç‰¹å†…éƒ¨è·³å˜ï¼Œä½œä¸ºæ—¶é’Ÿä¿¡å·ã€‚ æ›¼å½»æ–¯ç‰¹å¤–éƒ¨ä¸è·³å˜ï¼Œä¸¤ä¸ªå›ºå®šæ ·å­ï¼›å·®åˆ†æ›¼å½»æ–¯ç‰¹å¤–éƒ¨ç”¨è·³å˜è¡¨ç¤º 01ã€‚ DHCPã€ICMPã€ARPDHCPå‘ç° æä¾› è¯·æ±‚ ç¡®è®¤æŠ¥æ–‡ å‘ç°ï¼šæº0 ç›®255 æä¾›ï¼šæºæœåŠ¡å™¨åœ°å€ï¼Œç›®255 è¯·æ±‚ï¼šæº0 ç›®255 ç¡®è®¤ï¼šæºæœåŠ¡å™¨åœ°å€ï¼Œç›®255 ICMP:(ç½‘é™…æŠ¥æ–‡æ§åˆ¶åè®®) ç”¨äºæŠ¥å‘Šå·®é”™å’Œå¼‚å¸¸æƒ…å†µã€‚ åˆ†ä¸ºå·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’Œè¯¢é—®æŠ¥æ–‡ã€‚å·®é”™æŠ¥å‘ŠæŠ¥æ–‡ï¼š5ä¸ªç±»å‹ï¼šç»ˆç‚¹ä¸å¯è¾¾ã€æºç‚¹æŠ‘åˆ¶ã€æ—¶é—´è¶…è¿‡ã€å‚æ•°é—®é¢˜ã€æ”¹å˜è·¯ç”±ï¼ˆé‡å®šå‘ï¼‰4ä¸ªä¸å‘é€:ICMPæŠ¥æ–‡è‡ªå·±ã€åç»­åˆ†ç‰‡ã€å¤šæ’­åœ°å€ã€ç‰¹æ®Šåœ°å€çš„ä¸å‘ã€‚ è¯¢é—®æŠ¥æ–‡ï¼šå›é€è¯·æ±‚(å’Œå›ç­”)æ—¶é—´æˆ³è¯·æ±‚(å’Œå›ç­”)åœ°å€æ©ç è¯·æ±‚(å’Œå›ç­”)è·¯ç”±å™¨è¯¢é—®(å’ŒæŠ¥å‘Š) ARPï¼ˆåœ°å€è§£æåè®®ï¼‰ ARPè¯·æ±‚åˆ†ç»„ ï¼ˆå¹¿æ’­ï¼‰ ARPå“åº”åˆ†ç»„ï¼ˆå•æ’­ï¼‰ ARPçœ‹åˆ°äº†IPåœ°å€ï¼Œæ‰€ä»¥è¯´ç½‘ç»œå±‚ NATçœ‹åˆ°äº†ç«¯å£ï¼Œæ‰€ä»¥æ˜¯ä¼ è¾“å±‚ MACæ— æ³•è·¨ç½‘ç»œï¼šä¸»æœºæƒ³æŠŠIPåˆ†ç»„å‘é€åˆ°å¦ä¸€ä¸ªç½‘ç»œï¼Œè¦ç”¨ARPæ‰¾åˆ°ç½‘å…³ï¼ˆç›¸é‚»è·¯ç”±å™¨ï¼‰çš„ç¡¬ä»¶MACåœ°å€ã€‚è€Œä¸”è·¯ç”±å™¨ä¸ä¼šè½¬å‘å¹¿æ’­å¸§ï¼ˆARPæŸ¥è¯¢å¸§ï¼‰ã€‚ç½‘å…³ä¼šæŠŠè‡ªå·±çš„MACå›å¤ç»™ä¸»æœºã€‚åç»­çš„ä¼ æ’­ä»»åŠ¡äº¤ç»™è·¯ç”±å™¨å°±å¥½äº†ã€‚ ä¸­é€”æºåœ°å€å’Œç›®çš„åœ°å€ä¼šæ”¹å˜ã€‚ ç£é“ï¼ˆæŸ±é¢(ç£é“),ç£å¤´(ç›˜é¢),æ‰‡åŒº ï¼‰ ä¸€ä¸ªæ‰‡åŒºçš„å¹³å‡è®¿é—®æ—¶é—´ï¼šå¯»é“æ—¶é—´+æ—‹è½¬å»¶è¿Ÿæ—¶é—´+ä¼ è¾“æ—¶é—´ Tsmxn+s mæ¯è·¨è¶Šä¸€ä¸ªç£é“è€—æ—¶ så¯åŠ¨ç£è‡‚æ—¶é—´ Tr r x12 rä¸€ç§’å‡ è½¬ TtbrN bè¯»å†™å­—èŠ‚æ•°ï¼ŒNä¸€ä¸ªç£é“çš„å­—èŠ‚ IEEEæµ®ç‚¹æ•° é˜¶ç å…¨0 å°¾æ•°é0å°¾æ•°éé›¶ã€é˜¶ç å…¨0æ—¶å±äºã€Œéè§„æ ¼åŒ–æ•°ã€ï¼Œ éšè—ä½ä¸º 0 ä¸”æŒ‡æ•°ä¸º-126è€Œé 0-127ã€‚ å¯ä»¥ç†è§£æˆâ€œéšè—ä½çš„1 ä¹˜åˆ°é˜¶ç ä¸Šäº†â€ã€‚ éšè—ä½å³ç§»(é™¤äºŒ)èµ°ï¼Œé˜¶ç +1ä½ï¼ˆä¹˜äºŒï¼‰ ç›®çš„æ˜¯è®©æœ€å¤§çš„éè§„æ ¼åŒ–æ•° 0.fÃ—2^-126 ï¼ˆå°¾æ•°23ä½å…¨1ï¼‰ï¼Œæ°å¥½èƒ½å’Œæœ€å°è§„æ ¼åŒ–æ•° 1.0Ã—2^-126 æ— ç¼è¡”æ¥ï¼Œä¸ä¼šå‡ºç°æ•°å€¼æ–­å±‚ã€‚ 0f1 é˜¶ç å…¨1ï¼Œå°¾æ•°ä¸º0 æ­£æ— ç©·å¤§ é˜¶ç å…¨1ï¼Œå°¾æ•°é0 æ— å®šä¹‰NaN é˜¶ç å…¨0ï¼Œå°¾æ•°å…¨0 å°±æ˜¯0ï¼ˆæ­£è´Ÿé›¶ï¼‰ é˜¶ç å…¨0ï¼Œå°¾æ•°é0 éè§„æ ¼åŒ–æ•° è§„æ ¼åŒ–æµ®ç‚¹æ•°è¿ç®—æ—¶ï¼Œéœ€è¦è§„æ ¼åŒ–ï¼šç¡®ä¿å°¾æ•°çš„æœ€é«˜ä½åˆšå¥½åœ¨å°æ•°ç‚¹ä¹‹å‰ã€‚ å·¦è§„ï¼šè¿ç®—ç»“æœå°¾æ•°çš„æœ€é«˜æ•°ä½ä¸æ˜¯æœ‰æ•ˆä½ï¼Œå³0.000â€¦â€¦çš„å½¢å¼ï¼Œè¿›è¡Œå·¦è§„ã€‚ å°¾æ•°å·¦ç§»ä¸€ä½ï¼Œé˜¶ç -1 ï¼ˆå¯èƒ½å¤šæ¬¡ï¼‰ å³è§„ï¼šè¿ç®—ç»“æœå°¾æ•°çš„æœ‰æ•ˆä½è¿›åˆ°å°æ•°ç‚¹å‰é¢æ—¶ï¼Œå³è§„ã€‚å³1.xxxçš„å½¢å¼ï¼Œç›¸åŠ æ—¶æœ€é«˜è¿›ä¸€ä½ï¼Œæ•…å³è§„åªéœ€ä¸€æ¬¡ã€‚ å°¾æ•°å³ç§»ä¸€ä½ï¼Œé˜¶ç +1ï¼ˆå¯èƒ½æº¢å‡ºï¼‰ è¿ç®—ï¼š å¯¹é˜¶ â‘ å°é˜¶å‘å¤§é˜¶çœ‹é½ â‘¡ç§»ä½ï¼šå·¦å‡å³åŠ ï¼ˆæ³¨æ„è´Ÿæ•°æ˜¯ç®—æœ¯ç§»ä½ï¼Œå³ç§»åŒç¬¦å·ä½ï¼‰ å°¾æ•°åŠ å‡ éšè—ä½è¦è¿˜åŸåˆ°å°¾æ•° å°¾æ•°è§„æ ¼åŒ– èˆå…¥ â‘ 0èˆ1å…¥: è‹¥èˆå¼ƒéƒ¨åˆ†çš„æœ€é«˜ä½æ˜¯ 0 â†’ ç›´æ¥èˆå»è¿™éƒ¨åˆ†ï¼Œä¿ç•™çš„æœ€ä½ä½ä¸å˜ï¼ˆâ€œ0 èˆâ€ï¼‰ï¼› è‹¥èˆå¼ƒéƒ¨åˆ†çš„æœ€é«˜ä½æ˜¯ 1 â†’ èˆå»è¿™éƒ¨åˆ†çš„åŒæ—¶ï¼Œç»™ä¿ç•™çš„æœ€ä½ä½åŠ  1ï¼ˆâ€œ1 å…¥â€ï¼‰ï¼› â‘¡æ’ç½®1 æº¢å‡ºåˆ¤æ–­ 10,xxx ä¸‹æº¢å‡ºï¼ˆæŒ‰æœºå™¨é›¶å¤„ç†ï¼‰ 01,xxx ä¸Šæº¢å‡º kmpnextæ•°ç»„ï¼šå½“å‰ä½ç½®ä¸åŒ¹é…æ—¶çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚ å¦‚æœæ•°ç»„ä»1å¼€å§‹åˆ™éœ€è¦æ•´ä½“+1,å¦‚æœä»0å¼€å§‹ä¸éœ€è¦ã€‚ æ¨¡å¼ä¸²ä¸ä¸»ä¸²åŒ¹é…çš„å…¬å…±å‰ç¼€ï¼Œæ˜¾ç„¶ä¸åŒ…æ‹¬ä¸åŒ¹é…ä½ç½®ã€‚æ‰€ä»¥æ˜¯ä»å½“å‰ä½ç½®å¾€å‰çœ‹ã€‚ ä¸åŒ¹é…æ—¶ï¼Œè®©æ•°ç»„å’Œè‡ªå·±ä½ç½®çš„nextæ•°ç»„å…ƒç´ çš„æ¨¡å¼ä¸²ä½ç½®æ¯”è¾ƒã€‚ ä¸‹é¢è¿™ä¸ªä¾‹å­å°±æ˜¯ä¸‹æ ‡ä»1å¼€å§‹ è¦æ±‚é‚£ä¸ªnextæ•°ç»„ï¼ˆæœ‰äº›å«next-valæ•°ç»„ï¼‰ï¼š 1.å¿…é¡»å…ˆæ±‚æ¨¡å¼ä¸²S æ¯ä¸€ä¸ªå­—ç¬¦å‰é¢çš„é‚£ä¸ªå­—ç¬¦ä¸²çš„æœ€å¤§å…¬å…±å‰åç¼€é•¿åº¦ï¼Œå°†è¿™ä¸€ç³»åˆ—é•¿åº¦å­˜æˆä¸€ä¸ªæ•°ç»„ï¼Œæ±‚å‡ºæ¥çš„æ¯ä¸ªé•¿åº¦å…¶å®å°±æ˜¯å’Œæ¨¡å¼ä¸²æ¯ä¸€ä¸ªå¯¹åº”ä½ç½®ä¸Šåšæ¯”è¾ƒçš„ä¸‹æ ‡ ã€‚ ä¾‹å¦‚ï¼šæ¨¡å¼ä¸²æ˜¯ ABACABC çš„æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦æ•°ç»„ä¸ºï¼š æˆ‘ä»¬å°†æœ€é•¿å…¬å…±å‰åç¼€é•¿åº¦è®°ä½œLCPSFï¼Œç°åœ¨ä»æ¨¡å¼ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦Aå¼€å§‹ï¼ŒAçš„å‰é¢å­—ç¬¦ä¸²ä¸ºnullï¼Œæ‰€ä»¥Aä¹‹å‰çš„å­ä¸²çš„LCPSFæ˜¯0ï¼›æ¥åˆ°Bï¼ŒBçš„å‰é¢å­—ç¬¦ä¸²æ˜¯Aï¼ŒAæ˜¯å•ç‹¬çš„å­—ç¬¦ä¸å­˜åœ¨å…¬å…±å‰åç¼€ï¼Œæ‰€ä»¥é•¿åº¦ä¹Ÿæ˜¯0ï¼›æ¥åˆ°Aï¼ŒAå‰é¢çš„å­ä¸²æ˜¯ABï¼ŒLCPSFä¸º0ï¼›æ¥åˆ°Cï¼ŒCå‰é¢çš„å­ä¸²æ˜¯ABAï¼ŒLCPSFä¸º1ï¼›æ¥åˆ°Aï¼ŒAå‰é¢çš„å­ä¸²æ˜¯ABACï¼ŒLCPSFä¸º0ï¼›æ¥åˆ°Bï¼ŒBä¹‹å‰å­ä¸²ä¸ºABACAï¼ŒLCPSFä¸º1ï¼›æ¥åˆ°Cï¼ŒCå‰é¢å­ä¸²ä¸ºABACABï¼ŒLCPSFä¸º2ï¼›åˆ°æ­¤è¿™ä¸ªæœ€é•¿å…¬å…±å‰åç¼€æ•°ç»„å°±å‡ºæ¥äº†ã€0,0,0,1,0,1,2ã€‘å°†è¿™ä¸ªæ•°ç»„ä»ç¬¬äºŒä¸ªå€¼å¼€å§‹æ¯ä¸ªå€¼åŠ 1ã€0,1,1,2,1,2,3ã€‘å°±æ˜¯å°†è¦å’Œå­ä¸²å¯¹åº”ä½ç½®æ¯”è¾ƒçš„ä¸‹æ ‡ 2.æ±‚å¾—æ¨¡å¼ä¸²æœ€é•¿å…¬å…±å‰åç¼€çš„æ•°ç»„Tã€nã€‘åï¼ŒæŠŠæ¨¡å¼ä¸²æ¯ä¸ªä½ç½®ä¸Šçš„å­—ç¬¦ä¸è¿™ä¸ªæ•°ç»„å­˜çš„ä¸‹æ ‡å¯¹åº”å­—ç¬¦ä½œæ¯”è¾ƒï¼š ä¸Šé¢æ±‚å‡ºäº†ä¸‹æ ‡æ•°ç»„ã€0,1,1,2,1,2,3ã€‘ç°åœ¨æ¥å’Œæ¨¡å¼ä¸²ABACABCæ¯ä¸ªä½ç½®ä½œæ¯”è¾ƒæ±‚æœ€ç»ˆnext-valæ•°ç»„ï¼š next-valæ•°ç»„ç¬¬ä¸€ä¸ªæ•°ç›´æ¥ä¸º0ã€‚ next-valç¬¬äºŒæ•°ï¼šæ¨¡å¼ä¸²ç¬¬äºŒä¸ªå­—ç¬¦ä¸ºBï¼Œå¯¹åº”çš„ä¸‹æ ‡æ•°ç»„ç¬¬äºŒä¸ªæ•°æ˜¯1ï¼Œé‚£å°±æ˜¯å°†æ¨¡å¼ä¸²çš„ç¬¬1ä¸ªå­—ç¬¦å’ŒBç›¸æ¯”è¾ƒï¼ŒA!B,æ‰€ä»¥ç›´æ¥å°†ä¸‹æ ‡æ•°ç»„ç¬¬äºŒä¸ªæ•°1ä½œä¸ºnext-valæ•°ç»„ç¬¬äºŒä¸ªæ•°çš„å€¼ ç¬¬ä¸‰ä¸ªæ•°ï¼šæ¨¡å¼ä¸²ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºAï¼Œå¯¹åº”ä¸‹æ ‡æ•°ç»„ç¬¬ä¸‰ä¸ªæ•°ä¸º1ï¼Œå–å…¶ä½œä¸ºä¸‹æ ‡ï¼Œæ‰¾åˆ°æ¨¡å¼ä¸²ç¬¬1ä¸ªå­—ç¬¦ä¸ºAï¼ŒAAï¼Œé‚£å–next-valçš„ç¬¬ä¸€ä¸ªæ•°åšä¸ºnext-valç¬¬ä¸‰ä¸ªæ•°çš„å€¼ï¼Œä¹Ÿå°±æ˜¯0 ã€‚ã€‚ã€‚ã€‚ã€‚ä»¥æ­¤ç±»æ¨ï¼Œæ¨¡å¼ä¸²æ¯ä¸€ä¸ªä½ç½®çš„å­—ç¬¦å’Œå¯¹åº”ä¸‹æ ‡ä½ç½®çš„æ•°ç›¸ç­‰å°±å–next-valä¸­å¯¹åº”çš„æ•°å¡«åˆ°next-valä¸­å½“å‰ä½ç½®ï¼Œä¸ç­‰å°±ç›´æ¥å–å½“å‰ä¸‹æ ‡æ•°ç»„çš„å€¼å¡«åˆ°next-valå½“å‰ä½ç½®ä¸­ æ³¨æ„ï¼Œè¿™é‡Œæ‰€æœ‰åºå·ï¼ŒåŒ…æ‹¬æ¨¡å¼ä¸²å’Œä¸‹æ ‡æ•°ç»„çš„æ•°ï¼Œç¬¬ä¸€ä¸ªä½ç½®éƒ½æ˜¯1ï¼Œè€Œä¸æ˜¯å¸¸ç”¨çš„0å¼€å§‹ åºå· 1 2 3 4 5 6 7 æ¨¡å¼ä¸² A B A C A B C ä¸‹æ ‡æ•°ç»„ 0 1 1 2 1 2 3 next-val 0 1 0 2 0 1 3 åºå·ï¼š 1 2 3 4 5 6 7 æ¨¡å¼ä¸² A B A C A B C ä¸‹æ ‡æ•°ç»„ 0 1 1 2 1 2 3 next-val 0 1 0 2 0 1 3 ä¸­ç¼€è½¬å‰åç¼€è½¬å‰ç¼€ï¼šç¬¦å·ç§»åŠ¨åˆ°è‡ªå·±èŒƒå›´å·¦æ‹¬å·çš„å·¦è¾¹ è½¬åç¼€ï¼šç¬¦å·ç§»åŠ¨åˆ°è‡ªå·±èŒƒå›´å³æ‹¬å·çš„å³è¾¹ å¹¶æŸ¥é›†çº¢é»‘æ ‘å¹¶æŸ¥é›† æ¯ä¸ªå­é›†åˆæ˜¯ä¸€æ£µæ ‘ï¼Œæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹å’Œä¸€å †å…ƒç´ ï¼ˆå¶å­ï¼‰ã€‚ å…ƒç´ ä¸‹æ ‡ä¸ºå…ƒç´ åã€‚ å…ƒç´ å€¼ï¼š æ­£å€¼è¡¨ç¤ºè‡ªå·±æ‰€å±é›†åˆæ ¹ç»“ç‚¹çš„ä¸‹æ ‡ã€‚ è´Ÿå€¼è¡¨ç¤ºèŠ‚ç‚¹æ€»æ•°ï¼Œè‡ªå·±æ˜¯ä¸€ä¸ªå­é›†åˆçš„æ ¹ find(S,x):è¿”å›é›†åˆSä¸­å•å…ƒç´ xæ‰€åœ¨é›†åˆçš„æ ¹èŠ‚ç‚¹ä¸‹æ ‡å€¼ã€‚ O(n) ä¼˜åŒ–åâ†’O(log2n) â†’å‹ç¼©è·¯å¾„â†’O(a(n)) Initial(S)ï¼šæŠŠSçš„æ¯ä¸ªå…ƒç´ åˆå§‹åŒ–ä¸ºåªæœ‰ä¸€ä¸ªå•å…ƒç´ çš„é›†åˆ O(n^2^) ä¼˜åŒ–åâ†’O(nlog2n) â†’å‹ç¼©è·¯å¾„â†’O(a(n)) Union(S,root1,root2):Sçš„ä¸¤ä¸ªå­é›†åˆroot2åŠ å…¥root1 Sçš„å­é›†åˆroot2çš„å…ƒç´ å€¼æ”¹ä¸ºroot1çš„ä¸‹æ ‡ã€‚ åŸæœ¬root2å…ƒç´ å€¼æ˜¯è´Ÿå€¼ï¼Œå³ä½œä¸ºå­é›†åˆæ ¹ï¼Œæ‰€åœ¨é›†åˆçš„å…ƒç´ ä¸ªæ•°ã€‚ çº¢é»‘æ ‘ æ€§è´¨ï¼š 1.æ ¹å¶é»‘ 2.é»‘è·¯åŒ 3.ä¸çº¢çº¢ï¼ˆä¸ç›¸é‚»ï¼‰ ç»“è®ºï¼š 1.é»‘é«˜ä¸ºhçš„çº¢é»‘æ ‘è‡³å°‘æœ‰2^h^-1ä¸ªå†…éƒ¨ç»“ç‚¹ã€‚ æœ‰nä¸ªå†…éƒ¨ç»“ç‚¹çš„çº¢é»‘æ ‘é«˜åº¦ h 2log2(n+1) 2.æ ¹åˆ°å¶èŠ‚ç‚¹æœ€é•¿è·¯å¾„ä¸å¤§äºæœ€çŸ­è·¯å¾„2å€ 3.æ–°èŠ‚ç‚¹ï¼šæ ¹æŸ“é»‘ éæ ¹æŸ“çº¢ å„ç§æ€§èƒ½æŒ‡æ ‡ è¿›ç¨‹è°ƒåº¦å•ä½ï¼š cpuåˆ©ç”¨ç‡ï¼Œç³»ç»Ÿååé‡ï¼Œå‘¨è½¬æ—¶é—´ï¼Œç­‰å¾…æ—¶é—´ï¼Œå“åº”æ—¶é—´ ç¬”è®°æœ¬ è®¡ç®—æœºç½‘ç»œï¼š é€Ÿç‡ã€å¸¦å®½ã€ååé‡ã€æ—¶å»¶ï¼ˆå‘é€ä¼ æ’­å¤„ç†æ’é˜Ÿï¼‰ã€æ—¶å»¶å¸¦å®½ç§¯ã€å¾€è¿”æ—¶å»¶ã€ä¿¡é“åˆ©ç”¨ç‡ æµæ°´çº¿ååç‡ã€æµæ°´çº¿åŠ é€Ÿæ¯” ç£ç›˜ï¼š ä¸€ä¸ªæ‰‡åŒºçš„å¹³å‡è®¿é—®ï¼šå¯»é“æ—¶é—´+æ—‹è½¬å»¶è¿Ÿæ—¶é—´+æ•°æ®ä¼ è¾“æ—¶é—´ (æŸ±é¢(ç£é“)ã€ç›˜é¢ï¼ˆç£å¤´ï¼‰ã€æ‰‡é¢) è®¡ç»„æ€§èƒ½æŒ‡æ ‡ï¼š CPIï¼šæ‰§è¡Œä¸€æ¡æŒ‡ä»¤çš„æ—¶é’Ÿå‘¨æœŸæ•° CPUæ‰§è¡Œæ—¶é—´ã€ååé‡ã€å“åº”æ—¶é—´ã€MIPSã€FLOPS è®¡ç»„ç¬¬ä¸€ç« ï¼Œç¬”è®°æœ¬ä¸Šä¹Ÿæœ‰ã€‚ æ•°æ®ç»“æ„ï¼š æ—¶é—´å¤æ‚åº¦ã€ ASL(è®¿é—®æˆåŠŸå¤±è´¥) ,æ•£åˆ—è¡¨ æ’åºç®—æ³•ç¨³å®šæ€§ CRCæ ¡éªŒç ã€æµ·æ˜ç ã€äºŒè¿›åˆ¶é™¤æ³•ip æ•°æ®æŠ¥é¦–éƒ¨æ£€éªŒå’Œudp æ ¡éªŒå’Œ ç åˆ†å¤ç”¨"},{"title":"ç¨‹åºæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„","path":"/wiki/NOTE/ç¨‹åºæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„.html","content":"å‰è¨€ä¸€ä¸ªå°åŸç† CPUåœ¨æ—¶é’Ÿä¿¡å·çš„æ§åˆ¶ä¸‹è§£é‡Šã€æ‰§è¡Œå†…å­˜ä¸­å­˜å‚¨çš„ç¨‹åºï¼ŒæŒ‰ç…§ç¨‹åºä¸­çš„æŒ‡ä»¤ä»å†…å­˜æˆ–IOä¸­æŠŠæ•°æ®è¾“å…¥åˆ°CPUä¸­ï¼Œåœ¨CPUå†…éƒ¨è¿›è¡Œè¿ç®—ï¼Œå†æŠŠè¿ç®—ç»“æœè¾“å‡ºåˆ°å†…å­˜æˆ–IOä¸­ã€‚æ— è®ºæ˜¯å°å‹å¾®å‹è®¡ç®—æœºï¼Œè¿˜æ˜¯ä¸ªäººçš„é«˜æ€§èƒ½è®¡ç®—æœºï¼ŒåŸç†éƒ½åŸºæœ¬ç›¸åŒã€‚ è®¡ç®—æœºçš„ä¸‰ä¸ªæ ¹æœ¬åŸºç¡€ è®¡ç®—æœºæ˜¯æ‰§è¡Œè¾“å…¥ã€è¿ç®—ã€è¾“å‡ºçš„æœºå™¨ã€‚ è®¡ç®—æœºçš„ç¡¬ä»¶ç”±å¤§é‡é›†æˆç”µè·¯ IC(intergrated Circuit) ç»„æˆã€‚æ¯å— IC ä¸Šéƒ½æœ‰å¾ˆå¤šå¼•è„šã€‚ æ— è®ºå¤šä¹ˆå¤æ‚çš„ç¨‹åºï¼Œæœ€ç»ˆéƒ½æ˜¯ç”±ä¸€ä¸ªä¸ª â€œè¾“å…¥ã€è¿ç®—ã€è¾“å‡ºâ€ ç»„åˆå‡ºçš„æµç¨‹å•ä½å®ç°çš„ã€‚ ä¸‰è€…å¿…é¡»æˆå¥—å‡ºç°ï¼Œç¼ºä¸€ä¸å¯ã€‚ ç¨‹åºæ˜¯æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆ æŒ‡ä»¤ï¼šæ§åˆ¶è®¡ç®—æœºè¿›è¡Œè¾“å…¥ã€è¿ç®—ã€è¾“å‡ºçš„å‘½ä»¤ã€‚ æ•°æ®ï¼šåˆ†ä¸¤ç±»ã€‚ä¸€ç±»ä½œä¸ºæŒ‡ä»¤æ‰§è¡Œå¯¹è±¡çš„è¾“å…¥æ•°æ®ï¼Œä¸€ç±»æ˜¯ä»æŒ‡ä»¤çš„æ‰§è¡Œç»“æœå¾—åˆ°çš„è¾“å‡ºæ•°æ®ã€‚ è®¡ç®—æœºçš„å¤„ç†æ–¹å¼å’Œäººä»¬çš„æ€ç»´ä¹ æƒ¯ä¸åŒ â€œæ±‰è¯ºå¡”â€é—®é¢˜ ç¡¬ä»¶å’Œè½¯ä»¶ï¼Œå¥½æ¯”å°éœ¸ç‹æ¸¸æˆæœºå’Œæ’å…¥æ¸¸æˆæœºçš„æ¸¸æˆå¡ä¸€æ ·ã€‚ ä¹Ÿå¯ä»¥æ¯”ä½œäººçš„è‚‰ä½“å’Œç²¾ç¥ã€‚ç¼ºä¸€ä¸å¯ï¼Œç›¸è¾…ç›¸æˆã€‚ åº”ç”¨ æ ¹æ®ä¸‰å¤§åŸåˆ™ç†è§£ä¸€é¡¹â€œä¸å¥½ç†è§£â€çš„è¯ï¼š 2020å¹´2æœˆ14æ—¥ å¾®è½¯å…¬å¸ç‡å…ˆæå‡ºäº†ä½œä¸ºæ–°ä¸€ä»£äº’è”ç½‘å¹³å°çš„*.NET*æŠ€æœ¯ã€‚ä½œä¸º.NETæ ¸å¿ƒçš„XML WebæœåŠ¡ä½¿ç”¨é€šç”¨æŠ€æœ¯SOAPã€XML,ä¿ƒä½¿ä¼ä¸šé—´çš„è®¡ç®—æœºååŒå·¥ä½œã€‚ ä¸‰å¤§åŸåˆ™çš„ç†è§£ï¼š è®¡ç®—æœºåªæ˜¯ä¸ªæ‰§è¡Œç¨‹åºçš„æœºå™¨ï¼Œç¨‹åºæ˜¯æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆã€‚ æŒ‡ä»¤ï¼šSOAPæ˜¯å…³äºè°ƒç”¨æŒ‡ä»¤çš„è§„èŒƒï¼Œ æ•°æ®ï¼šXMLæ˜¯å®šä¹‰æ•°æ®æ ¼å¼çš„è§„èŒƒï¼Œ æ›´æ–¹ä¾¿æ‰§è¡Œç¨‹åºï¼šéƒ¨ç½²åœ¨å…¶ä»–è®¡ç®—æœºä¸Šèƒ½æ‰§è¡ŒæŸç§è¿ç®—çš„ç¨‹åºå«åš XML Web æœåŠ¡ã€‚ TCPIP ç½‘ç»œçš„ç®€å•ç†è§£TCPIPï¼šä¼ è¾“æ§åˆ¶åè®®å’Œç½‘é™…åè®®ï¼šTransmission Control ProtocolInternet Protocolã€‚ LAN ï¼šLocal Area Network ï¼ˆå±€åŸŸç½‘ï¼‰æŠŠåŠå…¬å®¤å†…çš„å°è§„æ¨¡ç½‘ç»œç§°ä½œLANï¼› WANï¼šWide Area Network (å¹¿åŸŸç½‘) æŠŠäº’è”ç½‘ä¸€æ ·è”ç»“ä¼ä¸šå’Œä¼ä¸šçš„å¤§è§„æ¨¡ç½‘ç»œå«åšWANã€‚ ä»¥å®¶ç”¨è·¯ç”±å™¨ä¸ºä¾‹ï¼ŒWANå£è¿å…‰çŒ«ï¼Œä»è€Œè¿æ¥åˆ°ç½‘ç»œã€‚LANå£è¿ç”µè„‘ä¹‹ç±»çš„ç”µå­è®¾å¤‡ï¼Œå³æœ‰çº¿ç½‘ç»œã€‚ MAC : Media Access Controlï¼šæ ‡è¯†ç½‘å¡çš„ç¼–å·ã€‚ å‡ ä¹æ‰€æœ‰ç½‘å¡ä¸Šå¸‚å‰éƒ½åˆ†é…äº†ä¸€ä¸ªä¸å¯å˜æ›´çš„ MAC åœ°å€ã€‚ ç½‘å¡ NIC Network Interface Card ï¼šæ¯ä¸€å—ç½‘å¡çš„ROMï¼ˆRead Only Memory åªè¯»å­˜å‚¨å™¨ï¼‰é‡Œï¼Œéƒ½é¢„å…ˆçƒ§å½•äº†å”¯ä¸€çš„MACåœ°å€ã€‚ ç”±åˆ¶é€ å‚å•†çš„ç¼–å·å’Œäº§å“ç¼–å·ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ‰€ä»¥ç‹¬ä¸€æ— äºŒã€‚ æœåŠ¡å™¨ Server ï¼šæœåŠ¡çš„æä¾›è€…ã€‚ å®¢æˆ·ç«¯ Client ï¼šæœåŠ¡çš„åˆ©ç”¨è€…ã€‚ åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œçš„ç¨‹åºä¸ºå®¢æˆ·ç«¯æä¾›æœåŠ¡ã€‚ é›†çº¿å™¨ Hubï¼šæŠŠå„å°è®¡ç®—æœºçš„ç½‘çº¿ç›¸äº’è¿æ¥åœ¨ä¸€èµ·çš„é›†çº¿è®¾å¤‡ã€‚ è·¯ç”±å™¨ Routerï¼šæŠŠå±€éƒ¨åŒºåŸŸå†…çš„ç½‘ç»œå’Œäº’è”ç½‘è¿æ¥èµ·æ¥çš„è®¾å¤‡ã€‚ è·¯ç”±å™¨åˆ™è´Ÿè´£æŠŠLANæ¥å…¥åˆ°WANä¸Šï¼šä¸€ç«¯è¿æ¥äº’è”ç½‘æä¾›å•†çš„è·¯ç”±å™¨ï¼ŒæœåŠ¡å•†ç»§ç»­å°†ä»–ä»¬çš„è·¯ç”±å™¨è¿æ¥åˆ°å…¶ä»–åœ°æ–¹ï¼Œç›´åˆ°æ±‡å…¥äº’è”ç½‘ä¸»å¹²çº¿ç¼†ä¸Šã€‚ ä»¥ä¼ä¸šå†…çš„LANä¸ºä¸€ä¸ªåŸºæœ¬å•ä½ï¼Œé€šè¿‡æœåŠ¡æä¾›å•†çš„è·¯ç”±å™¨æŠŠä»–ä»¬å’Œå…¶ä»–ä¼ä¸šçš„LANäº’è¿èµ·æ¥ï¼Œå…±åŒç»„æˆäº’è”ç½‘ã€‚ å…‰çŒ« Optical Network Unitï¼ŒONUï¼šé€šå¸¸ç”±ç½‘ç»œæœåŠ¡æä¾›å•†æä¾›ç»™ç”¨æˆ·ã€‚å®ƒå……å½“äº†å°†å…‰çº¤ä¿¡å·è½¬æ¢ä¸ºç”µä¿¡å·çš„æ¡¥æ¢ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è¿æ¥åˆ°å®½å¸¦äº’è”ç½‘ã€‚ å…‰çŒ«é€šå¸¸ä¸å…‰çº¤å…¥æˆ·ï¼ˆFTTHï¼‰è¿æ¥ï¼Œå¹¶å°†å…‰ä¿¡å·è½¬æ¢ä¸ºä»¥å¤ªç½‘ä¿¡å·ï¼Œä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚ IP åœ°å€ï¼šMACåœ°å€èŠ±æ ·ç¹å¤šï¼ŒæŸ¥æ‰¾æ•ˆç‡å¤ªæ…¢ã€‚å› æ­¤å¿…é¡»å¯¹è®¡ç®—æœºè¿›è¡Œåˆ†ç»„ç®¡ç†ï¼Œé™¤äº†ç¡¬ä»¶ä¸Šçš„MACåœ°å€ï¼Œè¿˜éœ€è¦è®¾å®šä¸€ä¸ªè½¯ä»¶ç¼–å·ï¼Œå³IP åœ°å€ã€‚ è®¾å®šå¥½ IP åœ°å€çš„è®¡ç®—æœºä¸º â€ä¸»æœº(Host)â€œ ã€‚è·¯ç”±å™¨ä¹Ÿæ˜¯è®¡ç®—æœºï¼Œä¹Ÿæœ‰IPåœ°å€ã€‚IPåœ°å€çš„å€¼ä¹Ÿæ˜¯ç‹¬ä¸€æ— äºŒçš„ã€‚ IP åœ°å€ä¸­ï¼ŒæŠŠè¡¨ç¤ºåˆ†ç»„ï¼ˆLANï¼‰çš„éƒ¨åˆ†å«åšâ€ç½‘ç»œåœ°å€â€œï¼ŒæŠŠè¡¨ç¤ºè®¡ç®—æœºçš„éƒ¨åˆ†å«åšâ€œä¸»æœºåœ°å€â€ã€‚ **å­ç½‘æ©ç ï¼š**æ ‡è¯†å‡º 32 byte çš„IPåœ°å€é‡Œï¼Œå“ªä¸€ä½åˆ°å“ªä¸€ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œå“ªä¸€ä½åˆ°å“ªä¸€ä½æ˜¯ä¸»æœºåœ°å€ã€‚ è½¬æ¢æˆäºŒè¿›åˆ¶åï¼Œå€¼ä¸º1çš„åˆ™æ˜¯ç½‘ç»œåœ°å€ï¼Œå€¼ä¸º0çš„å³ä¸»æœºåœ°å€ã€‚ DHCP ï¼šDynamic Host Configuration Protocolï¼ˆåŠ¨æ€ä¸»æœºè®¾ç½®åè®®ï¼‰ è®°å½•ç€å¯ä»¥è¢«åˆ†é…åˆ° LAN å†…è®¡ç®—æœºçš„ IP åœ°å€èŒƒå›´å’Œå­ç½‘æ©ç çš„å€¼ é»˜è®¤ç½‘å…³ Gatewayï¼šé€šå¸¸æŠŠè·¯ç”±å™¨ IP åœ°å€è®¾ç½®åœ¨ç½‘å…³ä¸Šã€‚å¯ä»¥è¯´ è·¯ç”±å™¨å°±æ˜¯ä» LAN é€šå¾€äº’è”ç½‘ä¸–ç•Œçš„å…¥å£ï¼ˆç½‘å…³ï¼‰ã€‚ è·¯ç”±å™¨çš„ IP åœ°å€ä¹Ÿå¯ä»¥ä» DHCP æœåŠ¡å™¨è·å–ã€‚ å‘è·¯ç”±å™¨æ›´è¿›ä¸€æ­¥è·¯ç”±å™¨æ˜¯å†³å®šæ•°æ®ä¼ è¾“è·¯å¾„çš„è®¾å¤‡ã€‚ åˆ†ç»„ç®¡ç†ä¸‹ï¼ŒIP åœ°å€ä¸­çš„ç½‘ç»œåœ°å€éƒ¨åˆ†èƒ½ä»£è¡¨ä¸€ä¸ª LAN ä¸­çš„å…¨ä½“è®¡ç®—æœºã€‚ äº’è”ç½‘åˆ™æ˜¯è·¯ç”±å™¨æŠŠå¤šä¸ªLANè¿æ¥èµ·æ¥çš„å¤§ç½‘ã€‚ è·¯ç”±å™¨çš„å·¥ä½œåŸç†æ˜¯æŸ¥çœ‹é™„åŠ åˆ°æ•°æ®ä¸Šçš„IPåœ°å€ä¸­çš„ç½‘ç»œåœ°å€éƒ¨åˆ†ã€‚ ä¸å±äºLANå†…è®¡ç®—æœºçš„ipåœ°å€ï¼Œä¼šè¢«é™„åŠ åˆ°æ•°æ®çš„å‘é€ç›®çš„åœ°å­—æ®µä¸Šã€‚è¿™ä¼šè¢«LANå†…è®¡ç®—æœºå¿½ç•¥ï¼Œä½†ä¸ä¼šè¢«è·¯ç”±å™¨å¿½ç•¥ã€‚ åªè¦ä¸æ˜¯å‘ç»™LANå†…çš„ï¼Œå°±å‘é€åˆ°LANå¤–ã€‚ åˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°çš„ LAN ä¸­çš„è·¯ç”±å™¨äº¤æ¢ç€ä¿¡æ¯ã€‚è¿™ç§ä¿¡æ¯å«åšâ€œè·¯ç”±è¡¨â€ï¼Œç”¨æ¥è®°å½•æ•°æ®åº”è¯¥è½¬å‘åˆ°å“ªé‡Œã€‚ è·¯ç”±å™¨çš„è·¯ç”±è¡¨ä¸­åªä¼šè®°å½•é€šå¾€ç›¸é‚»è·¯ç”±å™¨çš„è·¯å¾„ï¼Œè€Œä¸ä¼šè®°å½•ä¸–ç•Œä¸Šæ‰€æœ‰ä¼ è¾“è·¯å¾„ã€‚ å‡ æ¡å‘½ä»¤ï¼š route print #è¾“å‡ºè·¯å¾„ è¯¥æŒ‡ä»¤å°†è¾“å‡ºäº”åˆ—ï¼š Network Destination ç½‘ç»œç›®æ ‡ Netmask å­ç½‘æ©ç  Gateway Interface æ¥å£ Metric è·ƒç‚¹æ•°ï¼ˆæƒå€¼ï¼‰ æ•°æ®å‘é€çš„ç›®çš„åœ° åŒºåˆ†ç½‘ç»œåœ°å€ä¸»æœºåœ°å€ è·¯ç”±å™¨IPåœ°å€ è·¯ç”±å™¨è¦è½¬å‘çš„ç›®çš„ç«¯å£ è·¯å¾„æƒé‡ï¼Œç”±ç®—æ³•å†³å®šé€‰æ‹©ä¼ è¾“æœ€ä¼˜è·¯å¾„ å¦‚æœç›®çš„åœ°çš„IPå°±åœ¨æœ¬LANä¸­ï¼Œåˆ™æ— éœ€è·¯ç”±å™¨è½¬å‘ï¼Œç›´æ¥åˆ°è¾¾ã€‚ tracert host_name #è¿½è¸ªè·¯ç”±è½¬å‘è¿‡ç¨‹,ä¸»æœºåæ˜¯ä¸€ä¸ªç½‘å€/è®¡ç®—æœºå å¯ä»¥çœ‹åˆ°äº’è”ç½‘æœåŠ¡å•†åˆ°æœ¬è®¡ç®—æœºLANå†…çš„è¿‡ç¨‹ã€‚ DNSæœåŠ¡å™¨DNS ï¼šDomain Name System åŸŸåç³»ç»Ÿã€‚ FQDN ï¼šFully Qualified Domain Name å®Œæ•´é™å®šåŸŸåï¼šæŠŠä¸»æœºåå’ŒåŸŸåç»“åˆèµ·æ¥çš„åŸŸåã€‚ DNS å¦‚åŒåŠ©è®°ç¬¦ä¸€æ ·ï¼Œä»£æ›¿äº†éš¾ä»¥è®°å¿†çš„ IP åœ°å€ã€‚DNS æœåŠ¡å™¨èƒ½å¤Ÿè‡ªåŠ¨æŠŠ FQDN è§£æä¸º IP åœ°å€ï¼ˆæ­¤è¿‡ç¨‹ä¸ºåŸŸåè§£æï¼‰ã€‚ DNS æœåŠ¡å™¨é€šå¸¸éƒ¨ç½²åœ¨å„ä¸ª LAN ä¸­ï¼Œé‡Œé¢è®°å½•ç€ FQDN å’Œ IP åœ°å€çš„å¯¹åº”å…³ç³»è¡¨ã€‚ ä¸–ç•ŒèŒƒå›´å†…ï¼Œå„ä¸ªDNSæœåŠ¡å™¨æ˜¯ç›¸äº’åˆä½œçš„ï¼Œä¸€å°DNSæœåŠ¡å™¨è§£æä¸äº†ï¼Œå°±ä¼šè¯¢é—®å¦ä¸€å°ã€‚è¯¢é—®æˆåŠŸåå°±ä¼šå­˜å‚¨åœ¨æœ¬åœ°DNSæœåŠ¡å™¨ä¸­ã€‚ é€šå¸¸ã€Šä¸»æœºå.åŸŸåã€‹å³FQDNã€‚ nlookup #è¯¢é—®DNSæœåŠ¡å™¨ é»˜è®¤è¾“å‡ºæœ¬æœº LAN å†…çš„ FQDN å’Œ IP åœ°å€ã€‚ ä¹Ÿå¯ä»¥æŸ¥è¯¢å…¶ä»–åŸŸåçš„ FQDN å’ŒIPã€‚ IP åœ°å€å’Œ MAC åœ°å€çš„å¯¹åº”å…³ç³»ä½œä¸ºè¢«æ ‡è¯†ä¸ºæœ€ç»ˆæ¥æ”¶è€…çš„ç½‘å¡æ˜¯MACã€‚ IPåœ°å€è½¬æ¢åˆ°MACåœ°å€ï¼Œéœ€è¦ä¸€ä¸ªç¨‹åºï¼šARPï¼ˆAddress Resolution Protocol åœ°å€è§£æåè®®ï¼‰ ARPä¼šå‘æ‰€æœ‰LANå†…è®¡ç®—æœºå¹¿æ’­ï¼ˆbroadcastï¼‰è¯¢é—®ï¼Œå¦‚æœæœ‰æŸå°è®¡ç®—æœºå›å¤äº† MAC åœ°å€ï¼Œåˆ™è¯¥è®¡ç®—æœºçš„ IP å’Œ MAC å¯¹åº”æ˜ç¡®äº†ã€‚ ä¸ºæé«˜æŸ¥è¯¢æ•ˆç‡ï¼ŒARPä¼šç¼“å­˜ã€‚ç¼“å­˜æ„æˆçš„è¡¨å«ARPç¼“å­˜è¡¨ã€‚ arp -a #æŸ¥è¯¢ARPç¼“å­˜è¡¨ TCP çš„ä½œç”¨ä»¥åŠ TCPIPç½‘ç»œçš„å±‚çº§æ¨¡å‹IP åè®®ï¼šæŒ‡å®šæ•°æ®å‘é€ç›®çš„åœ°çš„IPåœ°å€ ä»¥åŠé€šè¿‡è·¯ç”±å™¨è½¬å‘æ•°æ®ã€‚ TCP åè®®ï¼šé€šè¿‡æ•°æ®å‘é€è€…å’Œæ¥æ”¶è€…ç›¸äº’å›åº”å¯¹æ–¹å‘æ¥çš„ç¡®è®¤ä¿¡æ¯ï¼Œå¯é çš„ä¼ è¾“æ•°æ®ã€‚ï¼ˆæ¡æ‰‹ handshakeï¼‰ TCPåè®®è¿˜æœ‰ä¸€ä¸ªè§„å®šæ˜¯å…ˆæŠŠåŸå§‹çš„å¤§æ•°æ®åˆ†å‰²æˆä»¥â€œåŒ…â€ï¼ˆpacketï¼‰ä¸ºå•ä½çš„æ•°æ®å•å…ƒï¼Œç„¶åå†å‘é€ã€‚æ¥å—è€…åˆ™éœ€è¦æŠŠæ”¶åˆ°çš„åŒ…é‡æ–°æ‹¼è£…åœ¨ä¸€èµ·è¿˜åŸåŸå§‹æ•°æ®ã€‚ è®¡ç®—æœºå‘é€çš„æ•°æ®ï¼Œæ˜¯ä»¥åŒ…ä¸ºå•ä½çš„ï¼Œé™„åŠ äº†å„ç§å„æ ·ä¿¡æ¯çš„æ•°æ®ã€‚ ç¡¬ä»¶ä¸Šå‘é€æ•°æ®çš„æ˜¯ç½‘å¡ï¼Œç½‘å¡ä¹‹ä¸Šæ˜¯è®¾å¤‡é©±åŠ¨ç¨‹åºï¼ˆæ§åˆ¶ç½‘å¡è¿™ç±»ç¡¬ä»¶çš„ç¨‹åºï¼‰ï¼Œé©±åŠ¨ç¨‹åºä¹‹ä¸Šæ˜¯å®ç°äº†IPåè®®çš„ç¨‹åºï¼ŒIPç¨‹åºä¹‹ä¸Šæ˜¯å®ç°TCPåè®®çš„ç¨‹åºï¼Œå†å¾€ä¸Šæ‰æ˜¯åº”ç”¨ç¨‹åºã€‚ TCPåè®®ä½¿ç”¨TCPç«¯å£å·è¯†åˆ«ä¸Šå±‚åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”é¢„å…ˆå®šä¹‰å¥½äº†ä¸€äº›ç«¯å£ç”¨äºä¸“é—¨ç”¨é€”ã€‚ åŸºæœ¬æ¦‚å¿µçš„é˜è¿°æ¦‚å¿µï¼š æœºå™¨è¯­è¨€ï¼šç”¨0å’Œ1ä¸¤ä¸ªäºŒè¿›åˆ¶æ•°ä¹¦å†™çš„ç¼–ç¨‹è¯­è¨€ã€‚ æœ€è´´åˆç¡¬ä»¶ã€‚æœºå™¨è¯­è¨€ç›¸åŒï¼Œä¸åŒçš„CPUç±»å‹ä¼šå¾—åˆ°ä¸åŒçš„ç»“æœã€‚ æ±‡ç¼–è¯­è¨€ï¼šäº¦ç§°ä¸ºç¬¦å·è¯­è¨€ã€‚åœ¨æ±‡ç¼–è¯­è¨€ä¸­ï¼Œç”¨åŠ©è®°ç¬¦ä»£æ›¿æœºå™¨æŒ‡ä»¤çš„æ“ä½œç ï¼Œç”¨åœ°å€ç¬¦å·æˆ–æ•°å­—ä»£æ›¿æŒ‡ä»¤æˆ–æ“ä½œæ•°çš„åœ°å€ äººç±»æ‰€èƒ½è¯»æ‡‚çš„ï¼Œæœ€è´´åˆåº•å±‚çš„è¯­è¨€ã€‚è®¾å¤‡ä¸åŒï¼Œæœºå™¨è¯­è¨€æŒ‡ä»¤é›†ä¹Ÿä¸åŒã€‚ è¯­æ³•ï¼šæ ‡ç­¾ï¼Œæ“ä½œç ï¼Œæ“ä½œæ•°ã€‚ æ ‡ç­¾ä¸ºæŸè¡Œä»£ç å¯¹åº”çš„å†…å­˜åœ°å€èµ·åå­—ã€‚ æ“ä½œç æ˜¯ åšä»€ä¹ˆ çš„æŒ‡ä»¤ã€‚ æ“ä½œæ•°æ˜¯ æŒ‡ä»¤æ‰§è¡Œå¯¹è±¡ã€‚ ç¼–è¯‘ï¼šæŠŠ Cè¯­è¨€ ç­‰ç¼–ç¨‹è¯­è¨€ç¼–å†™çš„æ–‡ä»¶ï¼ˆæºæ–‡ä»¶ï¼‰è½¬æ¢æˆç”¨æœºå™¨è¯­è¨€ï¼ˆåŸç”Ÿä»£ç ï¼‰ç¼–å†™çš„æ–‡ä»¶ã€‚ ç¼–ç ï¼šè®¡ç®—æœºç”¨æ•°å­—è¡¨ç¤ºä¸€åˆ‡ã€‚ ä»¥å­—ç¬¦ä¸¾ä¾‹ï¼šè®¡ç®—æœºå†…éƒ¨ä¼šå…ˆæŠŠæ–‡å­—è½¬æ¢æˆç›¸åº”çš„æ•°å­—å†åšå¤„ç†ï¼Œè¿™æ ·çš„æ•°å­—å«åšâ€œå­—ç¬¦ç¼–ç â€ã€‚ é¢å‘ç»„ä»¶ç¼–ç¨‹ï¼šé€šè¿‡å°†ç»„ä»¶ï¼ˆç¨‹åºé›¶ä»¶ï¼‰ç»„è£…åˆ°ä¸€èµ·å®Œæˆç¨‹åºï¼› é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼šå¯¹ç°å®ä¸–ç•Œçš„ä¸šåŠ¡è¿›è¡Œå»ºæ¨¡ï¼Œå†æŠŠæ¨¡å‹æ¬åˆ°ç¨‹åºä¸­ã€‚ IC å¡ï¼šIC cardã€‚è®¡ç®—æœºå†…éƒ¨ä¸»è¦ç”±å„ç§ IC å…ƒä»¶ ç»„æˆã€‚ åŠŸèƒ½å„å¼‚çš„ IC ä¸»è¦æœ‰ä¸‰ç§ï¼šCPUã€å†…å­˜ã€IO ã€‚ CPUï¼ˆcentral processing unitï¼‰ä¸­å¤®å¤„ç†å™¨ : è¿ç®—æ•°æ®å¹¶æ§åˆ¶å†…å­˜å’ŒIOã€‚ï¼ˆè§£é‡Šæ‰§è¡Œç¨‹åºå†…å®¹ï¼‰ å†…å­˜ï¼šå­˜å‚¨æŒ‡ä»¤å’Œæ•°æ® IOï¼šè´Ÿè´£æ•°æ®çš„è¾“å…¥å’Œè¾“å‡ºå·¥ä½œã€‚ æ—¶é’Ÿä¿¡å·: å«ä¹‰ æ˜¯ ç”±å†…å«æ™¶æŒ¯çš„ã€è¢«ç§°ä¸ºæ—¶é’Ÿå‘ç”Ÿå™¨çš„å…ƒä»¶å‘å‡ºçš„æ»´ç­”æ»´ç­”çš„ç”µä¿¡å·ã€‚ ä½œç”¨ æ˜¯ ä½œä¸ºè®¡æ—¶å™¨ï¼Œä¿è¯ç”µå­ç»„ä»¶åŒæ­¥è¿ä½œã€‚ å•ä½ æ˜¯ Hz é¢‘ç‡ã€‚å³æ—¶é’Ÿå‘ç”Ÿå™¨å‘é€ç»™ CPU çš„ç”µä¿¡å·çš„é¢‘ç‡ã€‚ æŠŠå‘å‡ºä¸€æ¬¡æ»´ç­”çš„æ—¶é—´ç§°ä½œä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚ é¢‘ç‡å¤§å°å¯ä»¥è¡¡é‡CPUçš„è¿è½¬é€Ÿåº¦ã€‚ XMLå®šä¹‰xmlï¼šExtensible Markup Language å¯æ‰©å±•æ ‡è®°è¯­è¨€ ï¼šç”¨äºå®šä¹‰ä»»æ„æ ‡è®°è¯­è¨€çš„å…ƒè¯­è¨€ htmlï¼šHyperText Markup Language è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ ï¼šä¸€èˆ¬ç”¨æ¥æ ‡è®°ç¼–å†™ç½‘é¡µ æŠŠé€šè¿‡æ·»åŠ æ ‡ç­¾ä¸ºæ•°æ®èµ‹äºˆæ„ä¹‰çš„è¡Œä¸ºç§°ä¸º â€æ ‡è®°â€œã€‚ä¸ºæ ‡è®°å®šä¹‰è§„åˆ™çš„è¯­è¨€ å³æ ‡è®°è¯­è¨€ã€‚ htmlç”¨äºç¼–å†™ç½‘é¡µï¼Œæˆ–è€…è¯´å†³å®šäº†å¯ç”¨äºç¼–å†™ç½‘é¡µçš„æ ‡ç­¾ã€‚ ä¼˜åŠ¿å¯ä½¿ç”¨çš„æ ‡ç­¾ç§ç±»å†³å®šäº†æ ‡è®°è¯­è¨€çš„è§„èŒƒåŠç”¨é€”ã€‚ webæµè§ˆå™¨ä¼šå¯¹htmlçš„æ ‡ç­¾è¿›è¡Œè§£æï¼ŒæŠŠç”±å®ƒä»¬æ ‡è®°çš„ä¿¡æ¯æ¸²æŸ“æˆæˆ‘ä»¬ä¹äºé˜…è¯»çš„ç½‘é¡µã€‚ XML çš„æœ€å¤§ä¼˜è¶Šæ€§ä¾¿æ˜¯ï¼Œå…¶ä½¿ç”¨è€…å¯ä»¥éšå¿ƒæ‰€æ¬²çš„åˆ›é€ æ ‡ç­¾ï¼Œè¿™ä¹Ÿæ˜¯å®ƒä½œä¸ºå…ƒè¯­è¨€çš„æ ¹æœ¬ã€‚ XML ä»…ä»…é™å®šäº†è¿›è¡Œæ ‡è®°æ—¶æ ‡ç­¾çš„ä¹¦å†™æ ¼å¼ï¼Œå…¶æ•°æ®æ˜¯çº¯æ–‡æœ¬æ ¼å¼çš„ï¼ŒåªåŒ…å«å­—ç¬¦ã€‚ éµå¾ªxmlçº¦æŸæ‰€å†™çš„æ–‡ä»¶å°±æ˜¯xmlæ–‡ä»¶ã€‚ ç°åœ¨çš„webæœåŠ¡å™¨éƒ½é›†æˆäº†xmlè§£æå™¨ï¼Œå¯ä»¥ç”¨è¿™ä¸ªåŠŸèƒ½æ¥æ£€æŸ¥xmlæ–‡ä»¶çš„ä¹¦å†™æ ¼å¼ã€‚ xmlä¸»è¦ç”¨é€”ï¼šä¸ºåœ¨äº’è”ç½‘ä¸Šäº¤æ¢çš„ä¿¡æ¯èµ‹äºˆæ„ä¹‰ã€‚ W3Cçš„æ¨èæ ‡å‡†æ˜¯ä¸ä¾èµ–äºç‰¹å®šå‚å•†çš„é€šç”¨è§„èŒƒã€‚XMLå³æ˜¯ä¸€ç§é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ ä¸‡ç»´ç½‘è”ç›Ÿï¼ˆWorld Wide Web Consortiumï¼Œç®€ç§° W3Cï¼‰åˆ›å»ºäº1994å¹´ï¼Œæ˜¯WebæŠ€æœ¯é¢†åŸŸå…·æœ‰æƒå¨å’Œå½±å“åŠ›çš„å›½é™…ä¸­ç«‹æ€§æŠ€æœ¯æ ‡å‡†æœºæ„ã€‚ CSVä¹Ÿæ˜¯é€šç”¨çš„æ•°æ®äº¤æ¢æ ¼å¼ä¹‹ä¸€ã€‚ ç¼ºç‚¹ï¼šå› ä¸ºåˆ›é€ äº†æ ‡ç­¾ï¼Œxmlæ–‡ä»¶çš„å°ºå¯¸ä¹Ÿå¾€å¾€æ›´å¤§ã€‚ ç»“æ„å‘½åç©ºé—´ æ ‡ç­¾åå­—ç›¸åŒï¼Œæ¯ä¸ªäººèµ‹äºˆå®ƒçš„æ„ä¹‰å¹¶ä¸ä¸€å®šç›¸åŒã€‚æ‰€ä»¥ä¸€ä¸ªW3Cæ¨èæ ‡å‡†æ˜¯ XMLå‘½åç©ºé—´ï¼ˆNamespace in XMLï¼‰ã€‚ å‘½åç©ºé—´é€šå¸¸æ˜¯ä¸€ä¸ªèƒ½ä»£è¡¨ä¼ä¸šæˆ–ä¸ªäººçš„å­—ç¬¦ä¸²ï¼Œç”¨äºä¿®é¥°é™å®šæ ‡ç­¾çš„åå­—ã€‚ xmlns=namespace_name å®Œæ•´çš„XMLæ–‡æ¡£æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼šXMLå£°æ˜ã€XMLå®ä¾‹ã€DTDï¼ˆDocument Type Definition æ–‡æ¡£ç±»å‹æè¿°ï¼‰ XMLå£°æ˜å½¢å¦‚ï¼š ?xml version=1.0 encoding=Shift_jIS? XMLå®ä¾‹æ˜¯æ–‡æ¡£ä¸­é€šè¿‡æ ‡ç­¾è¢«æ ‡è®°çš„éƒ¨åˆ† DTDè´Ÿè´£å®šä¹‰XMLå®ä¾‹çš„ç»“æ„ å½¢å¦‚ï¼š !DOCTYPE xxx[ä¸€äº›æ ¼å¼è¦æ±‚] å¯ä»¥çœç•¥ã€‚ è§£æXMLçš„ç»„ä»¶ DOMï¼ˆDocument Object Modelï¼Œæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰ SAXï¼ˆSimple API for XML) åˆ†å¸ƒå¼è®¡ç®— SOAPï¼ˆSimple Object Access Protocolï¼Œç®€å•å¯¹è±¡è®¿é—®åè®®ï¼‰å¯ç”¨äº åˆ†å¸ƒå¼è®¡ç®—ã€‚ åˆ†å¸ƒå¼è®¡ç®—ï¼šæŠŠç¨‹åºåˆ†æ•£éƒ¨ç½²åœ¨ç”¨ç½‘ç»œè¿æ¥èµ·æ¥çš„å¤šå°è®¡ç®—æœºä¸Šï¼Œç›¸äº’åä½œï¼Œå‘æŒ¥æ•´ä½“è®¡ç®—èƒ½åŠ› è°ƒç”¨ç¨‹åºæ—¶æ‰€éœ€çš„å‚æ•°ä¿¡æ¯ å’Œ ç¨‹åºæ‰§è¡Œåçš„è¿”å›ç»“æœ éƒ½å¯ä»¥ç”¨é€šç”¨æ•°æ®æ ¼å¼ XML æ ‡è¯†ã€‚ å¾€å¾€å¤šå°è®¡ç®—æœºåä½œä½¿ç”¨æ—¶ï¼ŒXMLè¿™ç§é€šç”¨ä¼ è¾“åè®®ä¼šéå¸¸å®ç”¨ã€‚ å°±å¥½æ¯”ä¸Šå¤§å­¦é‡åˆ°äº”æ¹–å››æµ·çš„æœ‹å‹æ—¶ï¼Œæ™®é€šè¯æ²Ÿé€šå¾€å¾€æœ€æœ‰æ•ˆç‡ã€‚"},{"title":"åŒæŒ‡é’ˆ","path":"/wiki/algorithm/åŒæŒ‡é’ˆ.html","content":"ç¬¬ä¸€å¤©åˆ·é¢˜ã€‚ä¸€ä¸ªå¹³å®çš„å¼€å§‹ï¼Œå¸Œæœ›èƒ½åšæŒä¸‹æ¥ï¼Œä¸æ±‚æ³¢æ¶›æ±¹æ¶Œï¼Œå¤§æµªæ·˜æ²™ï¼Œä½†æ±‚é™æ°´æµæ·±ï¼Œå·æµä¸æ¯ã€‚ å…ˆå­¦ä¹ åŒæŒ‡é’ˆã€‚é¢˜ç›®æ–¹å‘åˆ†ä¸ºä¸¤ä¸ªï¼šé“¾è¡¨å’Œæ•°ç»„ã€‚ åœ¨å¤„ç†æ•°ç»„å’Œé“¾è¡¨ç›¸å…³é—®é¢˜æ—¶ï¼ŒåŒæŒ‡é’ˆæŠ€å·§æ˜¯ç»å¸¸ç”¨åˆ°çš„ï¼ŒåŒæŒ‡é’ˆæŠ€å·§ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šå·¦å³æŒ‡é’ˆå’Œå¿«æ…¢æŒ‡é’ˆã€‚ æ‰€è°“å·¦å³æŒ‡é’ˆï¼Œå°±æ˜¯ä¸¤ä¸ªæŒ‡é’ˆç›¸å‘è€Œè¡Œæˆ–è€…ç›¸èƒŒè€Œè¡Œï¼›è€Œæ‰€è°“å¿«æ…¢æŒ‡é’ˆï¼Œå°±æ˜¯ä¸¤ä¸ªæŒ‡é’ˆåŒå‘è€Œè¡Œï¼Œä¸€å¿«ä¸€æ…¢ã€‚ é“¾è¡¨ä¸­çš„åŒæŒ‡é’ˆç¬¬ä¸€é“ï¼š21.åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨æ€è·¯ä¸€ï¼šç”³è¯·ç¬¬ä¸‰ä¸ªé“¾è¡¨çš„ç©ºé—´ï¼Œæ‹·è´ä¸¤ä¸ªé“¾è¡¨ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚ ä»£ç v1.0ï¼š class Solution public: bool comp(ListNode* l1, ListNode* l2) if(l1-val l2-val) return true; else return false; bool Empty_Judge(ListNode* l) if(l-val==0) return true; else return false; ListNode* mergeTwoLists(ListNode* list1, ListNode* list2) if(Empty_Judge(list1)) return list2; if(Empty_Judge(list2)) return list1; ListNode* list ; ListNode* head = list; while(list1!=nullptrlist2!=nullptr) list = new ListNode; if(comp(list1,list2)) list-val = list2-val; list = list-next; list2 = list2-next; else list-val = list1-val; list = list-next; list1 = list1-next; while(list1!=nullptr) list = new ListNode(list1-val); list=list-next; list1=list1-next; while(list2!=nullptr) list = new ListNode(list2-val); list=list-next; list2=list2-next; return head; ; é—®é¢˜ï¼šè¿”å›çš„ head æ²¡æœ‰ä»»ä½•æ•°å€¼ã€‚ è§£å†³ï¼š é“¾è¡¨åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹å‰éœ€è¦ç©ºé—´ï¼Œå¦åˆ™æŒ‡å‘NULLå°±æ˜¯é‡æŒ‡é’ˆï¼Œä¹Ÿå°±ä¸å¯èƒ½è¿ä¸Šã€‚ ä»£ç å¼€å§‹ï¼Œhead æŒ‡å‘äº†æ²¡æœ‰åˆå§‹åŒ–çš„ list ï¼Œå³æŒ‡å‘ä¸€ä¸ªï¼ˆæŒ‡å‘nullçš„ï¼‰é‡æŒ‡é’ˆï¼Œå®ƒè‡ªå·±ä¹Ÿå˜æˆäº†é‡æŒ‡é’ˆã€‚å¦‚æœåˆå§‹åŒ–å·¥ä½œåšå¥½ï¼Œä¸è§£å†³åç»­è¿æ¥è¿‡ç¨‹çš„â€œå…ˆç”³è¯·ç©ºé—´ï¼Œå†è¿æ¥â€ï¼Œå°±ä¼šåªæœ‰ä¸€ä¸ªæ•°æ®ã€‚ æ¡ä»¶åˆ¤æ–­åˆ†ä¸æ¸… NULL ã€nullptr åŠå…¶èƒŒåçš„ true ã€falseï¼Œé€ æˆä»£ç å†—ä½™ã€‚ Empty_judge å’Œ comp å‡½æ•°æ˜¯å®Œå®Œå…¨å…¨çš„å¤šä½™ä»£ç ï¼Œå› ä¸ºæœ¬å¯ä»¥ç›´æ¥åœ¨åŸä»£ç ä¸­åˆ¤æ–­ã€‚ ä»£ç V2.0ï¼š class Solution public: ListNode* mergeTwoLists(ListNode* list1, ListNode* list2) if(!list1) return list2; if(!list2) return list1; ListNode* list = new ListNode ; ListNode* head = list; while(list1list2) if(list1-val list2-val) list-val = list2-val; list2 = list2-next; else list-val = list1-val; list1 = list1-next; list-next = new ListNode; list = list-next; while(list1) list -val = list1 - val; if(list1-next) list-next = new ListNode; list=list-next; list1=list1-next; while(list2) list -val = list2 - val; if(list2-next) list-next = new ListNode; list=list-next; list2=list2-next; return head; ; è§„é¿äº†é‡æŒ‡é’ˆé—®é¢˜å’Œç›¸å¯¹çš„ä»£ç å†—ä½™é—®é¢˜ã€‚ æ€è·¯äºŒï¼šåœ¨ä¸¤ä¸ªæŒ‡é’ˆç°æœ‰çš„ç©ºé—´ä¸Šï¼Œåªåšç©¿é’ˆå¼•çº¿çš„å·¥ä½œï¼ˆè¿æ¥èµ·æ¥ï¼‰ ListNode* mergeTwoLists(ListNode* list1, ListNode* list2) if(!list1) return list2; //å¯ä»¥çœç•¥ if(!list2) return list1; ListNode* list = new ListNode; ListNode* head = list; while(list1list2) if(list1-val list2-val) list - next = list2; list = list2; //è¿™é‡Œå¯ä»¥é…åˆä¸‹é¢ç®€åŒ– list2 = list2-next; else list - next = list1; list = list1; //ç®€åŒ– list1 = list1-next; //list = list-next list - next = list1 ? list1 : list2; return head - next; é—®é¢˜ï¼š å¼€å§‹çš„åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå¯ä»¥çœç•¥ã€‚ while ä¸­å‡ºç°é‡å¤ç‚¹ï¼ˆåªæ˜¯éœ€è¦ä¸€ç‚¹ç‚¹ç›´è§‰ï¼‰ è§£å†³ï¼š çœ‹æ€è·¯ä¸‰ã€‚ **æ€è·¯ä¸‰ï¼š**labuladong ï¼Œè™šæ‹Ÿå¤´ç»“ç‚¹å€¼å¾—æ³¨æ„ã€‚æ•´ä½“ä¸æ€è·¯äºŒæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ ListNode mergeTwoLists(ListNode l1, ListNode l2) // è™šæ‹Ÿå¤´ç»“ç‚¹ ListNode dummy = new ListNode(-1), p = dummy; ListNode p1 = l1, p2 = l2;while (p1 != null p2 != null) // æ¯”è¾ƒ p1 å’Œ p2 ä¸¤ä¸ªæŒ‡é’ˆ // å°†å€¼è¾ƒå°çš„çš„èŠ‚ç‚¹æ¥åˆ° p æŒ‡é’ˆ if (p1.val p2.val) p.next = p2; p2 = p2.next; else p.next = p1; p1 = p1.next; // p æŒ‡é’ˆä¸æ–­å‰è¿› p = p.next;if (p1 != null) p.next = p1;if (p2 != null) p.next = p2;return dummy.next; } ä»£ç ä¸­è¿˜ç”¨åˆ°ä¸€ä¸ªé“¾è¡¨çš„ç®—æ³•é¢˜ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€Œè™šæ‹Ÿå¤´ç»“ç‚¹ã€æŠ€å·§ï¼Œä¹Ÿå°±æ˜¯ dummy èŠ‚ç‚¹ã€‚ä½ å¯ä»¥è¯•è¯•ï¼Œå¦‚æœä¸ä½¿ç”¨ dummy è™šæ‹ŸèŠ‚ç‚¹ï¼Œä»£ç ä¼šå¤æ‚å¾ˆå¤šï¼Œè€Œæœ‰äº† dummy èŠ‚ç‚¹è¿™ä¸ªå ä½ç¬¦ï¼Œå¯ä»¥é¿å…å¤„ç†ç©ºæŒ‡é’ˆçš„æƒ…å†µï¼Œé™ä½ä»£ç çš„å¤æ‚æ€§ã€‚ æ‹“å±•ï¼š æ€è·¯å››ï¼šé€’å½’ struct ListNode* mergeTwoLists(struct ListNode* l1, struct ListNode* l2) if(l1==NULL) return l2; if(l2==NULL) return l1; if(l1-val l2-val) l1-next = mergeTwoLists(l1-next,l2); return l1; else l2-next = mergeTwoLists(l1,l2-next); return l2; ç±»ä¼¼æ±‰è¯ºå¡”çš„æ€è·¯ã€‚ ç¬¬äºŒé“ï¼šåˆ†å‰²é“¾è¡¨V1.0 class Solution public: ListNode* partition(ListNode* head, int x) //åˆå§‹åŒ– ListNode* tail = head; while(tail-val x ) tail=tail-next; ListNode* temp = tail; ListNode* maxdot = tail;//å¤§äºå€¼å¼€å§‹çš„ç»“ç‚¹ while(head-val x) head = head-next; tail = head; //å°äºå€¼å¼€å§‹çš„ç»“ç‚¹ while(temp) //x if(temp-val x) //å¦‚æœæ˜¯å°äºå€¼ç»“ç‚¹ tail -next = temp; tail = tail-next; //x if(temp-val x temp-next-val x ) tail-next = temp-next; if(temp-next-next) temp-next = temp-next-next; else tail-next = temp-next; temp-next = nullptr; break; temp = temp-next; tail-next = maxdot; return head; ; ç°åœ¨æ€è·¯ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ™° æ€è·¯äºŒï¼šåŒå¤´ç»“ç‚¹ ListNode partition(ListNode head, int x) // å­˜æ”¾å°äº x çš„é“¾è¡¨çš„è™šæ‹Ÿå¤´ç»“ç‚¹ ListNode* dummy1 = new ListNode(-1); // å­˜æ”¾å¤§äºç­‰äº x çš„é“¾è¡¨çš„è™šæ‹Ÿå¤´ç»“ç‚¹ ListNode* dummy2 = new ListNode(-1); // p1, p2 æŒ‡é’ˆè´Ÿè´£ç”Ÿæˆç»“æœé“¾è¡¨ ListNode* p1 = dummy1, p2 = dummy2; // p è´Ÿè´£éå†åŸé“¾è¡¨ï¼Œç±»ä¼¼åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨çš„é€»è¾‘ // è¿™é‡Œæ˜¯å°†ä¸€ä¸ªé“¾è¡¨åˆ†è§£æˆä¸¤ä¸ªé“¾è¡¨ ListNode* p = head; while (p != null) if (p.val = x) p2.next = p; p2 = p2.next; else p1.next = p; p1 = p1.next; // æ–­å¼€åŸé“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹çš„ next æŒ‡é’ˆ ListNode temp = p.next; p.next = null; p = temp; // è¿æ¥ä¸¤ä¸ªé“¾è¡¨ p1.next = dummy2.next; return dummy1.next; åˆ›å»ºä¸¤ä¸ªå¤´ç»“ç‚¹ï¼Œå…ˆæ–­å¼€ï¼Œåè¿æ¥ã€‚ æ€è·¯ä¸‰ï¼šé€’å½’ class Solution public: ListNode* small = nullptr; pairListNode*, ListNode* helper(ListNode* head, int x) if (head == nullptr) return make_pair(nullptr, nullptr); if (head-val x) small = head; pairListNode*, ListNode* next = helper(head-next, x); if (head-val x) head-next = next.first; next.first = head; else head-next = next.second; next.second = head; return next; ListNode* partition(ListNode* head, int x) pairListNode*, ListNode* nodes = helper(head, x); if (nodes.first) small-next = nodes.second; return nodes.first; else return nodes.second; ; å¤§å¤šæ•°é“¾è¡¨é¢˜é€’å½’çš„æ—¶å€™å¯ä»¥æ— è„‘å†™ä¸€å¥ï¼Œç„¶ååªè¦è®©æ€è·¯ä»åå‘å‰è¿›è¡Œå°±å¯ä»¥äº†ã€‚ cppListNode* node = func(head-next); // funcä¸ºé€’å½’å‡½æ•° è¿™é‡Œè¿”å›å€¼é€‰æ‹©äº†ä¸¤ä¸ªpairï¼Œfirstä¿å­˜å°äºxçš„ç»“ç‚¹ï¼Œsecondä¿å­˜å¤§äºxçš„ç»“ç‚¹ã€‚ æ€è·¯å››:åŸåœ°è¿æ¥ // 1 4 3 2 5 2 struct ListNode* partition(struct ListNode* head, int x) if(!head || !head-next) return head; struct ListNode *p = head, *q = head, *temp = NULL; if(p-val x) while(p-next-val x)//æ­¤å¾ªç¯è®© p åˆ°è¾¾æœ€è¿œå°å€¼ 1 p = p-next; if(p-next == NULL) return head; q = p-next; //è®© q åˆ°è¾¾æœ€è¿‘å¤§å€¼ 4 else p = NULL; while(q-next) //qå­˜åœ¨ä¸‹ä¸€ä¸ªç»“ç‚¹ if(q-next-val x) //å¦‚æœæœ€è¿‘å¤§å€¼ä¸‹ä¸€ä¸ªä¸ºå°å€¼ temp = q-next; //tempä¸ºå°å€¼äº† q-next = temp-next;//è·³è¿‡å°å€¼ if(p == NULL) //å¦‚æœèµ·å§‹å€¼ä¸ºå¤§å€¼ï¼ˆå³p ä¸ºç©ºæƒ…å†µï¼‰ temp-next = head; //å¤´æ’æ³•ï¼šç¬¬ä¸€ä¸ªæ’å…¥çš„å°å€¼è¿æ¥èµ·å§‹å¤§å€¼ head = temp; p = head; else//èµ·å§‹å€¼å°å€¼ï¼ˆå­˜åœ¨äº†ï¼‰ temp-next = p-next; //å¤´æ’æ³•ï¼šå°å€¼å p-next = temp; p = temp; else //ä¸ºå¤§å€¼å°±ä¸²ä¸‹å» q = q-next; return head; pæŒ‡é’ˆæŒ‡å‘å°äº x çš„å€¼ï¼Œp null å°±è¿æ¥ç¬¬ä¸€ä¸ªå¤§äºxçš„å€¼ï¼Œp!null å°±æŒ‰é¡ºåºè¿›è¡Œå°¾æ’æ³•ï¼›(åªæ˜¯ p çš„â€å°¾â€æ˜¯ q çš„â€å¤´â€)qæŒ‡é’ˆæŒ‡å‘å¤§äº x çš„å€¼ï¼Œåˆå§‹æ˜¯ç¬¬ä¸€ä¸ªå¤§äºxçš„å€¼ï¼Œ å°¾æ’æ³•ä¾æ¬¡å¾€åæ”¾;temp æœåŠ¡äºpçš„å°¾æ’æ³•ï¼Œä½œä¸ºä¸­é—´å˜é‡ã€‚ï¼ˆq å°¾æ’å¾ªç¯çš„å‰é¢ï¼Œæ˜¯p,q çš„åˆå§‹åŒ–å·¥ä½œï¼Œåˆ†åˆ«æŒ‡å®šå°äºxå€¼çš„å°¾ç«¯ å’Œ å¤§äºxå€¼çš„å°¾ç«¯ï¼‰ ç¬¬ä¸‰é“ï¼šåˆå¹¶Kä¸ªå‡åºé“¾è¡¨æ€è·¯ä¸€ï¼šéå†åˆå¹¶ä¸¤ä¸ªé“¾è¡¨åˆ°ç¬¬ä¸€ä¸ªé“¾è¡¨ä¸­å» class Solution public: ListNode* merge(ListNode* list1,ListNode* list2) //è¿™é‡Œå’Œåˆå¹¶æœ‰åºé“¾è¡¨çš„codeä¸€æ¨¡ä¸€æ · ... ListNode* mergeKLists(vectorListNode* lists) //éå†åˆå¹¶ if(lists.empty()) return nullptr; vectorListNode*::iterator it = lists.begin(); vectorListNode*::iterator next = lists.begin()+1; for(;next!=lists.end();next++) *it = merge(*it,*next); return *it; ; **æ€è·¯äºŒï¼š**labladong ï¼šé…åˆä¼˜å…ˆé˜Ÿåˆ—çš„äºŒå‰å †ï¼Œè·å–æœ€å°kç»“ç‚¹ ListNode mergeKLists(ListNode[] lists) if (lists.length == 0) return null; // è™šæ‹Ÿå¤´ç»“ç‚¹ ListNode* dummy = new ListNode(-1); ListNode* p = dummy; // ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œæœ€å°å † PriorityQueueListNode* pq = new PriorityQueue( lists.length, (a, b)-(a.val - b.val)); // å°† k ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹åŠ å…¥æœ€å°å † for (ListNode head : lists) if (head != null) pq.add(head); while (!pq.isEmpty()) // è·å–æœ€å°èŠ‚ç‚¹ï¼Œæ¥åˆ°ç»“æœé“¾è¡¨ä¸­ ListNode node = pq.poll(); p.next = node; if (node.next != null) pq.add(node.next); // p æŒ‡é’ˆä¸æ–­å‰è¿› p = p.next; return dummy.next; æ€è·¯ä¸‰ï¼šåˆ†æ²»é€’å½’ class Solution public ListNode mergeKLists(ListNode[] lists) if(lists.length == 0) return null; if(lists.length == 1) return lists[0]; if(lists.length == 2) return mergeTwoLists(lists[0],lists[1]); int mid = lists.length/2; ListNode[] l1 = new ListNode[mid]; for(int i = 0; i mid; i++) l1[i] = lists[i]; ListNode[] l2 = new ListNode[lists.length-mid]; for(int i = mid,j=0; i lists.length; i++,j++) l2[j] = lists[i]; return mergeTwoLists(mergeKLists(l1),mergeKLists(l2)); public ListNode mergeTwoLists(ListNode l1, ListNode l2) if (l1 == null) return l2; if (l2 == null) return l1; ListNode head = null; if (l1.val = l2.val) head = l1; head.next = mergeTwoLists(l1.next, l2); else head = l2; head.next = mergeTwoLists(l1, l2.next); return head; æ€è·¯å››ï¼šSTLä¸­çš„ä¼˜å…ˆé˜Ÿåˆ— class Solution public: ListNode* mergeKLists(vectorListNode* lists) auto head = ListNode(0); auto comp = [](ListNode* const a, ListNode* const b)return a-val b-val;; priority_queueListNode*, vectorListNode*, decltype(comp) q(comp); for (auto h : lists) if (h != nullptr) q.push(h); auto p = head; while (!q.empty()) p-next = q.top(); p = p-next; q.pop(); if (p-next != nullptr) q.push(p-next); return head.next; ; ç¬¬å››é“ï¼šå•é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ListNode* removeNthFromEnd(ListNode* head, int n) if(n==0||!head) return head; //0å…ƒç´  æˆ– ä¸åŠ¨ if(!head-next) return NULL; //1å…ƒç´  ä¸” åŠ¨ ListNode* fformer = head; ListNode* former = head; ListNode* latter = head; while(--n0) latter = latter-next; while(latter-next) if(former!=head) fformer = fformer-next; latter = latter - next; former = former - next; //1å…ƒç´  if(former == fformer) head = former-next; //2å…ƒç´  else fformer-next = former-next; //3+å…ƒç´  return head; ç¬¬äº”é“ï¼šé“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ListNode* middleNode(ListNode* head) ListNode* fast = head; ListNode* slow = head; while(fast-next) fast = fast-next; if(fast-next) fast=fast-next; slow = slow-next; return slow; ç¬¬å…­é“ï¼šç›¸äº¤é“¾è¡¨public ListNode getIntersectionNode(ListNode headA, ListNode headB) /** å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ, ç¬¬ä¸€è½®è®©ä¸¤ä¸ªåˆ°è¾¾æœ«å°¾çš„èŠ‚ç‚¹æŒ‡å‘å¦ä¸€ä¸ªé“¾è¡¨çš„å¤´éƒ¨, æœ€åå¦‚æœç›¸é‡åˆ™ä¸ºäº¤ç‚¹(åœ¨ç¬¬ä¸€è½®ç§»åŠ¨ä¸­æ°å¥½æŠ¹é™¤äº†é•¿åº¦å·®) ä¸¤ä¸ªæŒ‡é’ˆç­‰äºç§»åŠ¨äº†ç›¸åŒçš„è·ç¦», æœ‰äº¤ç‚¹å°±è¿”å›, æ— äº¤ç‚¹å°±æ˜¯å„èµ°äº†ä¸¤æ¡æŒ‡é’ˆçš„é•¿åº¦ **/ if(headA == null || headB == null) return null; ListNode pA = headA, pB = headB; // åœ¨è¿™é‡Œç¬¬ä¸€è½®ä½“ç°åœ¨pAå’ŒpBç¬¬ä¸€æ¬¡åˆ°è¾¾å°¾éƒ¨ä¼šç§»å‘å¦ä¸€é“¾è¡¨çš„è¡¨å¤´, è€Œç¬¬äºŒè½®ä½“ç°åœ¨å¦‚æœpAæˆ–pBç›¸äº¤å°±è¿”å›äº¤ç‚¹, ä¸ç›¸äº¤æœ€åå°±æ˜¯null==null while(pA != pB) pA = pA == null ? headB : pA.next; pB = pB == null ? headA : pB.next; return pA; è¿™ä¸ªèµ‹å€¼å’Œ ï¼Ÿæ¡ä»¶åˆ¤æ–­ çš„é…åˆéå¸¸æœ‰è¶£ã€‚ ç®€çŸ­çš„ if è¯­å¥å¯ç”¨ ï¼Ÿæ¥ä»£æ›¿ã€‚ æ€è·¯äºŒï¼š public ListNode getIntersectionNode(ListNode headA, ListNode headB) int lenA = 0, lenB = 0; // è®¡ç®—ä¸¤æ¡é“¾è¡¨çš„é•¿åº¦ for (ListNode p1 = headA; p1 != null; p1 = p1.next) lenA++; for (ListNode p2 = headB; p2 != null; p2 = p2.next) lenB++; // è®© p1 å’Œ p2 åˆ°è¾¾å°¾éƒ¨çš„è·ç¦»ç›¸åŒ ListNode p1 = headA, p2 = headB; if (lenA lenB) for (int i = 0; i lenA - lenB; i++) p1 = p1.next; else for (int i = 0; i lenB - lenA; i++) p2 = p2.next; // çœ‹ä¸¤ä¸ªæŒ‡é’ˆæ˜¯å¦ä¼šç›¸åŒï¼Œp1 == p2 æ—¶æœ‰ä¸¤ç§æƒ…å†µï¼š // 1ã€è¦ä¹ˆæ˜¯ä¸¤æ¡é“¾è¡¨ä¸ç›¸äº¤ï¼Œä»–ä¿©åŒæ—¶èµ°åˆ°å°¾éƒ¨ç©ºæŒ‡é’ˆ // 2ã€è¦ä¹ˆæ˜¯ä¸¤æ¡é“¾è¡¨ç›¸äº¤ï¼Œä»–ä¿©èµ°åˆ°ä¸¤æ¡é“¾è¡¨çš„ç›¸äº¤ç‚¹ while (p1 != p2) p1 = p1.next; p2 = p2.next; return p1; ç¬¬ä¸ƒé“ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç¯å½¢é“¾è¡¨boolean hasCycle(ListNode head) // å¿«æ…¢æŒ‡é’ˆåˆå§‹åŒ–æŒ‡å‘ head ListNode slow = head, fast = head; // å¿«æŒ‡é’ˆèµ°åˆ°æœ«å°¾æ—¶åœæ­¢ while (fast != null fast.next != null) // æ…¢æŒ‡é’ˆèµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆèµ°ä¸¤æ­¥ slow = slow.next; fast = fast.next.next; // å¿«æ…¢æŒ‡é’ˆç›¸é‡ï¼Œè¯´æ˜å«æœ‰ç¯ if (slow == fast) return true; // ä¸åŒ…å«ç¯ return false; ä¸è§£é‡Š ç¬¬å…«é“ï¼šæ‰¾åˆ°ç¯å½¢é“¾è¡¨çš„èµ·ç‚¹æµç¨‹èµ·å§‹åŒä¸Šï¼Œå…ˆè®©å¿«æ…¢æŒ‡é’ˆç›¸é‡ã€‚ è®¾ç›¸é‡ç‚¹è·ç¦»å¤´ç»“ç‚¹ä¸º k ,å³æ…¢æŒ‡é’ˆçš„è·¯ç¨‹ã€‚å¿«æŒ‡é’ˆé€Ÿåº¦æ˜¯æ…¢æŒ‡é’ˆäºŒå€ï¼Œè·¯ç¨‹å³ k+k2k è®¾ç¯å½¢èµ·ç‚¹è·ç¦»ç›¸é‡ç‚¹ä¸º m , åˆ™æ…¢æŒ‡é’ˆè·ç¦»èµ·ç‚¹ k-mã€‚å·§åˆçš„æ˜¯ï¼Œç›¸é‡ç‚¹æŒ‡é’ˆä¸æ–­å‘åèµ°ï¼Œè·ç¦»èµ·ç‚¹åŒæ ·ä¸ºk-m ã€‚ æ‰€ä»¥è®©å…¶ä¸­ä»»æ„ä¸€ä¸ªæŒ‡é’ˆå›åˆ°èµ·ç‚¹ï¼Œç»è¿‡k-mä½ç§»ï¼Œå¦ä¸€ä¸ªæŒ‡é’ˆå°±ä¼šåˆ°è¾¾ç¯å½¢é“¾è¡¨èµ·ç‚¹ã€‚ ListNode detectCycle(ListNode head) ListNode fast, slow; fast = slow = head; while (fast != null fast.next != null) fast = fast.next.next; slow = slow.next; if (fast == slow) break; // ä¸Šé¢çš„ä»£ç ç±»ä¼¼ hasCycle å‡½æ•° if (fast == null || fast.next == null) // fast é‡åˆ°ç©ºæŒ‡é’ˆè¯´æ˜æ²¡æœ‰ç¯ return null; // é‡æ–°æŒ‡å‘å¤´ç»“ç‚¹ slow = head; // å¿«æ…¢æŒ‡é’ˆåŒæ­¥å‰è¿›ï¼Œç›¸äº¤ç‚¹å°±æ˜¯ç¯èµ·ç‚¹ while (slow != fast) fast = fast.next; slow = slow.next; return slow; æ•°ç»„ä¸­çš„åŒæŒ‡é’ˆ åœ¨æ•°ç»„ä¸­å¹¶æ²¡æœ‰çœŸæ­£æ„ä¹‰ä¸Šçš„æŒ‡é’ˆï¼Œä½†æˆ‘ä»¬å¯ä»¥æŠŠç´¢å¼•å½“åšæ•°ç»„ä¸­çš„æŒ‡é’ˆï¼Œè¿™æ ·ä¹Ÿå¯ä»¥åœ¨æ•°ç»„ä¸­æ–½å±•åŒæŒ‡é’ˆæŠ€å·§ã€‚ ç¬¬ä¸€é“ï¼š åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹åŸºæœ¬çš„å¿«æ…¢åŒæŒ‡é’ˆã€‚ int removeDuplicates(int[] nums) if (nums.length == 0) return 0; int slow = 0, fast = 0; while (fast nums.length) if (nums[fast] != nums[slow]) slow++; // ç»´æŠ¤ nums[0..slow] æ— é‡å¤ nums[slow] = nums[fast]; fast++; // æ•°ç»„é•¿åº¦ä¸ºç´¢å¼• + 1 return slow + 1; å¤§åŒå°å¼‚çš„ä¸€ä¸ªé“¾è¡¨é¢˜ï¼š åˆ é™¤æ’åºé“¾è¡¨ä¸­çš„é‡å¤å…ƒç´ ](https://leetcode.cn/problems/remove-duplicates-from-sorted-list/) struct ListNode* deleteDuplicates(struct ListNode* head) typedef struct ListNode ListNode; if(!head) return head; ListNode* slow = head; ListNode* fast = head; while(fast) if(fast-val!=slow-val) slow=slow-next; slow-val=fast-val; fast=fast-next; slow-next = NULL; return head; ç¬¬äºŒé“ï¼šç§»é™¤å…ƒç´ å·¦å³æŒ‡é’ˆï¼š class Solution public: int removeElement(vectorint nums, int val) int j = nums.size() - 1; for (int i = 0; i = j; i++) if (nums[i] == val) swap(nums[i--], nums[j--]); return j + 1; ; å¿«æ…¢æŒ‡é’ˆï¼š while(fastnumsSize) if(nums[fast]!=val) nums[slow] = nums[fast]; slow++; fast++;return slow; æ‰©å±•ï¼šä¿ç•™é‡å¤kä¸ªå…ƒç´ çš„åŸºç¡€ä¸Šåˆ é™¤å¤šä½™å…ƒç´  class Solution public: int work(vectorint nums, int k) int len = 0; for(auto num : nums) if(len k || nums[len-k] != num) nums[len++] = num; return len; int removeDuplicates(vectorint nums) return work(nums, 2); ; ç¬¬ä¸‰é“:ç§»åŠ¨é›¶v1.0 void moveZeroes(vectorint nums) int fast = 0,slow=0; while(fastnums.size()) if(nums[fast]!=0) nums[slow++] = nums[fast]; fast++; while(slowfast) nums[slow++]=0; v2.0 int left = 0;int right = 0;while(right nums.size()) if(nums[right]) swap(nums[left], nums[right]); left++; right++; é‡åˆ°é0ç›´æ¥äº¤æ¢å°±å¯ä»¥ ç¬¬å››é“ï¼šæœ€é•¿å›æ–‡å­ä¸²string longestPalindrome(string s) string res = ; for(int i=0;is.size();i++) string s1=palindrome(s,i,i); string s2=palindrome(s,i,i+1); res = s1.size()res.size()?s1:res; res = s2.size()res.size()?s2:res; return res; string palindrome(string s,int l,int r) while(l=0rs.size()s[l]==s[r]) l--; r++; ; return s.substr(l+1,r-l-1); å·¦å³æŒ‡é’ˆï¼Œå‘ä¸¤ä¾§æ‰©æ•£ã€‚ éå†ä¸­å¿ƒç‚¹ã€‚ ä¸­å¿ƒç‚¹åˆ†å¥‡æ•°ã€å¶æ•°ä¸¤ç§æƒ…å†µï¼Œä¾æ¬¡æ¯”è¾ƒå³å¯ã€‚"},{"title":"Crash Course CS","path":"/wiki/NOTE/Crash Course CS.html","content":"äºŒè¿›åˆ¶byte åœ¨ç”µè„‘ä¸­çš„å•ä½æ¢ç®—ï¼š kilobyte åƒå­—èŠ‚megabyte å…†å­—èŠ‚gigabyte åƒå…†å­—èŠ‚ 1kb2^10^bit 1024byte 1000b 1Mb 2^20^bit 1024kb 1Gb 2^30^bit 1TB1000GB 1GBåäº¿å­—èŠ‚1000MB10^6KB Gb å’Œ GB ä¸€èˆ¬è€Œè¨€GBç”¨äºæ–‡ä»¶ï¼ŒGbç”¨äºé€šä¿¡ã€‚Bä»£è¡¨Byteï¼Œbä»£è¡¨æ¯”ç‰¹bitï¼Œä¸¤è€…æ˜¯å…«å€çš„å…³ç³»ã€‚å¦‚æœè€ƒè™‘åˆ°é€šä¿¡è¿‡ç¨‹ä¸­çš„æ ¡éªŒç ç­‰ä¿¡æ¯ï¼Œè¿™ä¸ªå®é™…å…³ç³»å·®è·æ˜¯åœ¨åå€ã€‚ 1GBpsçš„ä¼ è¾“é€Ÿç‡ï¼ 8Gbps 100MBps ï¼ 800Mbps è¿è¥å•†æ‰€è°“çš„ç™¾å…†å®½å¸¦ï¼Œåƒå…†å®½å¸¦ï¼Œä¹Ÿéƒ½æ˜¯bç»“å°¾ã€‚ç™¾å…†å®½å¸¦ï¼Œå®é™…ä¸Šåªæœ‰12.5MBæ¯ç§’çš„æ–‡ä»¶ä¼ è¾“é€Ÿåº¦ã€‚ 32 ä½ä¸ 64 ä½ç”µè„‘çš„åŒºåˆ« 32 ä½çš„æœ€å¤§æ•°ä¸º 43 äº¿å·¦å³ 32 ä½èƒ½è¡¨ç¤ºçš„æ•°å­—ï¼š0â€”â€”2çš„32æ¬¡æ–¹-1ï¼Œä¸€å…±2çš„32æ¬¡æ–¹ä¸ªæ•° 64 ä½çš„æœ€å¤§æ•°ä¸º 9.2*10^18 æµ®ç‚¹æ•°ï¼ˆFloating Point Numbersï¼‰ï¼š å®šä¹‰ï¼šå°æ•°ç‚¹å¯åœ¨æ•°å­—é—´æµ®åŠ¨çš„æ•°ï¼ˆéæ•´æ•°ï¼‰ è¡¨ç¤ºæ–¹æ³•ï¼šIEEE 754 æ ‡å‡†ä¸‹ ç”¨ç±»ä¼¼ç§‘å­¦è®¡æ•°æ³•çš„æ–¹å¼ï¼Œå­˜å‚¨åè¿›åˆ¶æ•°å€¼ æµ®ç‚¹æ•°æœ‰æ•ˆä½æ•°*æŒ‡æ•° 32 ä½æ•°å­—ä¸­ï¼šç¬¬ 1 ä½è¡¨ç¤ºæ­£è´Ÿï¼Œç¬¬ 2-9 ä½å­˜æŒ‡æ•°ã€‚å‰©ä¸‹ 23 ä½å­˜æœ‰æ•ˆä½æ•° eg.625.90.6259ï¼ˆæœ‰æ•ˆä½æ•°ï¼‰*10^3ï¼ˆæŒ‡æ•°ï¼‰ ç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç -ASCâ…¡ï¼Œç”¨æ¥è¡¨ç¤ºå­—ç¬¦ 1 å…¨ç§°ï¼šç¾å›½ä¿¡æ¯äº¤æ¢æ ‡å‡†ä»£ç  2 ä½œç”¨ï¼šç”¨æ•°å­—ç»™è‹±æ–‡å­—æ¯åŠç¬¦å·ç¼–å· 3 å†…å®¹ï¼š7 ä½ä»£ç ï¼Œå¯å­˜æ”¾ 128 ä¸ªä¸åŒçš„å€¼ã€‚ 4 å›¾ç¤ºï¼š UNICODEï¼Œç»Ÿä¸€æ‰€æœ‰å­—ç¬¦ç¼–ç çš„æ ‡å‡† 1 è¯ç”ŸèƒŒæ™¯ï¼š1992 è¯ç”Ÿï¼Œéšç€è®¡ç®—æœºåœ¨äºšæ´²å…´èµ·ï¼Œéœ€è¦è§£å†³ ASCâ…¡ä¸å¤Ÿè¡¨è¾¾æ‰€æœ‰è¯­è¨€çš„é—®é¢˜ã€‚ ä¸ºæé«˜ä»£ç çš„äº’ç”¨æ€§ï¼Œè€Œè¯ç”Ÿçš„ç¼–ç æ ‡å‡†ã€‚ 2 å†…å®¹ï¼šUNICODE ä¸º 17 ç»„çš„ 16 ä½æ•°å­—ï¼Œæœ‰è¶…è¿‡ 100 ä¸‡ä¸ªä½ç½®ï¼Œå¯æ»¡è¶³æ‰€æœ‰è¯­è¨€çš„å­—ç¬¦éœ€æ±‚ã€‚ ç®—æœ¯é€»è¾‘å•å…ƒ ALUèƒŒæ™¯ è¡¨ç¤ºå’Œå­˜å‚¨æ•°å­—æ˜¯è®¡ç®—æœºçš„é‡è¦åŠŸèƒ½ï¼Œä½†çœŸæ­£çš„ç›®æ ‡æ˜¯è®¡ç®—ï¼Œæœ‰æ„ä¹‰çš„å¤„ç†æ•°å­— â€”â€” æ¯”å¦‚æŠŠä¸¤ä¸ªæ•°å­—ç›¸åŠ ã€‚ è¿™äº›æ“ä½œç”±è®¡ç®—æœºçš„â€ç®—æœ¯é€»è¾‘å•å…ƒâ€å¤„ç†ï¼Œå³ALUï¼ˆArithmetic and Logical Unitï¼‰ã€‚ ALUå³è®¡ç®—æœºé‡Œè´Ÿè´£è¿ç®—çš„ç»„ä»¶ã€‚ Intel 74181 ï¼š1970 å¹´å‘å¸ƒæ—¶ï¼Œå®ƒæ˜¯ç¬¬ä¸€ä¸ªå°è£…åœ¨å•ä¸ªèŠ¯ç‰‡å†…çš„å®Œæ•´ ALUã€‚ æœ¬ç« æˆ‘ä»¬ç”¨å‰é¢çš„å¸ƒå°”é€»è¾‘é—¨ï¼Œåšä¸€ä¸ªå’Œ 74181 åŠŸèƒ½ä¸€æ ·çš„ ALU ç”µè·¯ã€‚ ä»‹ç» ALUæœ‰2ä¸ªå•å…ƒï¼š ç®—æœ¯å•å…ƒ(Arithmetic Unit) ï¼šç®—æœ¯å•å…ƒè´Ÿè´£æ•°å­—æ“ä½œ é€»è¾‘å•å…ƒ(Logic Unit) ï¼šé€»è¾‘å•å…ƒæ‰§è¡Œé€»è¾‘æ“ä½œ ç®—æœ¯å•å…ƒç®—æœ¯å•å…ƒè´Ÿè´£è®¡ç®—æœºé‡Œçš„æ‰€æœ‰æ•°å­—æ“ä½œ åƒåŠ å‡æ³•ï¼Œè¿˜æœ‰å¢é‡è¿ç®—ï¼ˆç»™æŸä¸ªå˜é‡+1ï¼‰ å®ç°åŠ å‡æ³•å¯ä»¥ç”¨å•ä¸ªæ™¶ä½“ç®¡ä¸€ä¸ªä¸ªæ‹¼ï¼Œåšæˆç”µè·¯ã€‚ä½†é‚£å¤ªéº»çƒ¦äº†ï¼Œè¿™é‡Œç”¨æ›´é«˜å±‚çš„æŠ½è±¡ï¼Œå³é€»è¾‘é—¨æ¥åšã€‚ é€»è¾‘é—¨æœ‰ï¼š AND ã€ORã€XORã€NOT åŠåŠ å™¨ é€šè¿‡è§‚å¯Ÿå•ä¸ª1å’Œ0ä¹‹é—´çš„è¿ç®—ï¼Œå‘ç°å¼‚æˆ–å¯ä»¥æ»¡è¶³å‰ä¸‰ä¸ªè¾“å…¥è¾“å‡ºï¼Œç¬¬å››ä¸ª1+1çš„è¾“å‡ºéœ€è¦è¿›ä½ã€‚ æ‰€ä»¥éœ€è¦ä¸€æ ¹é¢å¤–çš„è¿›ä½çº¿ã€‚è®©ç»„ä»¶æ»¡è¶³åªæœ‰è¾“å…¥æ˜¯1å’Œ1æ—¶ï¼Œè¿›ä½æ‰æ˜¯â€œTrueâ€ã€‚ å‘ç°è¿™ä¸ªæ¡ä»¶ï¼ŒAND é—¨åˆšå¥½èƒ½æ»¡è¶³ã€‚äºæ˜¯åŠ å…¥ç”µè·¯ä¸­ï¼Œç»„æˆåŠåŠ å™¨ã€‚ åŠåŠ å™¨ï¼šä¸ªäººç†è§£ï¼Œå®ŒæˆåŠ æ³•çš„ä¸€åŠï¼Œä¹Ÿå°±æ˜¯ä¸€ä½çš„è¿ç®—ä»¥åŠè¿›ä½ã€‚ å¤šä½è®¡ç®—éœ€è¦å…¨åŠ å™¨ã€‚ å…¨åŠ å™¨ å°†åŠåŠ å™¨æŠ½è±¡ä¸ºåä¸º HALF ADDER çš„å•ç‹¬ç»„ä»¶ï¼Œè¿›è¡Œæ›´é«˜å±‚æŠ½è±¡ï¼šå¤„ç†è¶…è¿‡1+1çš„è¿ç®—ï¼Œéœ€è¦å…¨åŠ å™¨ã€‚ å…¨åŠ å™¨è¡¨æ ¼ï¼š æœ€å¤§çš„æ•°æ˜¯1 + 1 +1 ï¼Œæ€»å’Œæ˜¯1ï¼Œè¿›ä½ä¹Ÿæ˜¯1 ã€‚ å³ä¸¤æ¡è¾“å‡ºçº¿ï¼šSUM CARRYã€‚ åˆ©ç”¨åŠåŠ å™¨ç»„è£…å…¨åŠ å™¨ã€‚ å…ˆè¾“å…¥A+Båˆ°ä¸€ä¸ªåŠåŠ å™¨ä¸Šï¼Œç„¶åæŠŠCè¾“å…¥åˆ°ç¬¬äºŒä¸ªåŠåŠ å™¨ä¸Šã€‚æœ€åç”¨ä¸€ä¸ªORé—¨æ£€æŸ¥è¿›ä½æ˜¯ä¸æ˜¯Trueã€‚ 8ä½åŠ æ³•å™¨ æŠŠå…¨åŠ å™¨è¿›è¡Œæ›´é«˜ä¸€å±‚æŠ½è±¡ï¼Œä¹Ÿå°±æ˜¯ä½œä¸ºä¸€ä¸ªç‹¬ç«‹ç»„ä»¶ Full Adderï¼Œä¸‰ä¸ªè¾“å…¥ ABCï¼Œè¾“å‡ºæ€»å’Œå’Œè¿›ä½ã€‚ å‰ä¸¤ä½æ•°A0ã€B0çš„åŠ å’Œç”¨ä¸€ä¸ªåŠåŠ å™¨ Half Adder å°±å¥½ã€‚å› ä¸ºå‰ä¸¤ä½è‚¯å®šæ²¡æœ‰è¿›ä½ã€‚ A0å’ŒB0 çš„å’Œå³ è¾“å‡ºçš„ç¬¬ä¸€ä½ã€‚ å°†ä¸¤è€…çš„è¿›ä½ï¼Œä½œä¸ºå…¨åŠ å™¨çš„ä¸€ä¸ªè¾“å…¥Aã€‚è€Œè¾“å…¥Bã€Cåˆ™æ˜¯ç¬¬ä¸‰ã€ç¬¬å››ä½æ•°æ®A1ã€B1çš„åŠ å’Œã€‚ ç¬¬ä¸‰ä½å¼€å§‹æœ‰è¿›ä½äº†ã€‚ ç„¶åå°†A1å’ŒB1çš„è¿›ä½è¿æ¥åˆ°A2å’ŒB2çš„è¾“å…¥Aä¸­ï¼Œå¦‚æ­¤å¾ªç¯å¾€å¤â€¦â€¦ æ³¨æ„æ¯ä¸ªè¿›ä½æ˜¯æ€ä¹ˆè¿åˆ°ä¸‹ä¸€ä¸ªå…¨åŠ å™¨çš„ï¼Œæ‰€ä»¥å«â€œ8ä½è¡Œæ³¢è¿›ä½åŠ æ³•å™¨(8-bit ripple carry adder)ã€‚ å¦‚æœæœ€åä¸¤ä½åŠ å’Œåè¿˜æœ‰è¿›ä½ï¼Œå°±ä¸éœ€è¦è¿æ¥äº†ã€‚ å› ä¸ºå‡ºç°äº† æº¢å‡º Overflow ç°è±¡ï¼Œ8ä½å·²ç»ä¸è¶³ä»¥è¡¨ç¤ºæ›´é«˜ä½çš„ç»“æœäº†ã€‚ è¿™ç§åŠ æ³•å™¨çš„ç¼ºç‚¹ï¼š è¡¨è¾¾çš„ä½æ•°è¶Šå¤šï¼Œéœ€è¦çš„å…¨åŠ å™¨è¶Šå¤šã€‚ æ¯æ¬¡è¿›ä½éƒ½è¦ä¸€ç‚¹æ—¶é—´ï¼Œè™½ç„¶å› ä¸ºç”µå­ç§»åŠ¨å¾ˆå¿«ç”¨ä¸äº†å¤šå°‘æ—¶é—´ï¼Œä½†è¿˜æ˜¯æ‰¿å—ä¸äº†å½“ä»Šå‡ åäº¿æ¬¡è¿ç®—çš„é‡çº§ã€‚ æ‰€ä»¥ï¼Œç°ä»£è®¡ç®—æœºç”¨çš„åŠ æ³•ç”µè·¯æœ‰ç‚¹ä¸åŒï¼šä½¿ç”¨çš„æ˜¯æ›´å¿«çš„è¶…å‰è¿›ä½åŠ æ³•å™¨Carry-Look-Ahead Adder ã€‚ ALUçš„ç®—æœ¯å•å…ƒä¹Ÿæ”¯æŒåšä¸€äº›å…¶ä»–çš„è¿ç®—ï¼Œä¸€èˆ¬éƒ½æ”¯æŒè¿™8ä¸ªæ“ä½œï¼š åŠ æ³•ã€å¸¦è¿›ä½åŠ æ³•ã€å‡æ³•ã€å¸¦è¿›ä½å‡æ³•ï¼Œ å¢é‡ã€å‡é‡ï¼š+1ï¼Œ-1 PASS THROUGHï¼šAll bits of A are passed through unmodified NEGATEï¼šA is subtracted from zero, flipping its sign(from-to +,or +to -) ç®€å•ALUä¸ä¼šä¸“é—¨ä¸ºåŠ æ³•å‡æ³•è®¾è®¡ï¼Œè€Œæ˜¯é€šè¿‡å¾ªç¯åŠ æ³•æˆ–å¾ªç¯å‡æ³•æ¥å®ç°ã€‚ ä¾‹å¦‚ç”µè§†é¥æ§ã€æ’æ¸©å™¨ã€å¾®æ³¢ç‚‰ æœ‰äº›ALUä¸ºäº†è¿ç®—é€Ÿåº¦ï¼Œä¼šæœ‰ä¸“é—¨çš„ä¹˜é™¤æ³•ALUã€‚åªæ˜¯éœ€è¦çš„é€»è¾‘é—¨æ›´å¤šã€‚ ç”µè„‘ã€æ‰‹æœºã€‚ é€»è¾‘å•å…ƒé€»è¾‘å•å…ƒæ‰§è¡Œé€»è¾‘æ“ä½œã€‚ ä¾‹å¦‚ANDï¼ŒOR å’Œ NOT æ“ä½œï¼Œæˆ–è€…ä¸€äº›ç®€å•çš„æ•°å€¼æµ‹è¯•ï¼šæ˜¯ä¸æ˜¯è´Ÿæ•°ï¼Ÿ ç¤ºä¾‹ï¼šä¸‹é¢æ˜¯ä¸€ä¸ªæ£€æŸ¥è¾“å‡ºç»“æœæ˜¯ä¸æ˜¯è´Ÿæ•°çš„ç”µè·¯ã€‚ ä»¥ä¸Šå³ALUçš„å…¨éƒ¨å†…å®¹ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒInter 74181 åªèƒ½å¤„ç†4ä½è¾“å…¥ã€‚æ‰€ä»¥ä½ åˆšåˆšåšäº†ä¸€ä¸ªæ¯” 74181 è¿˜å¥½çš„ CPUï¼ 74181 ç”¨äº†å¤§æ¦‚ 70 ä¸ªé€»è¾‘é—¨ï¼Œä½†ä¸èƒ½æ‰§è¡Œä¹˜é™¤,ä½†å®ƒå‘å°å‹åŒ–è¿ˆå‡ºäº†ä¸€å¤§æ­¥ã€‚ å·¥ç¨‹å¸ˆåœ¨ä½¿ç”¨ALUæ—¶ï¼Œä¸éœ€è¦ç†è§£ALUå†…éƒ¨æ„é€ ã€‚æ‰€ä»¥ç”¨ä¸€ä¸ªå¤§Vå­—æ¥è¡¨ç¤ºã€‚ å›¾ä¸­çš„8ä½ALUæœ‰ä¸¤ä¸ª8ä½è¾“å…¥ã€‚é€šè¿‡æ“ä½œä»£ç OPERATION CODEæ¥å‘ŠçŸ¥ALUå°†è¿›è¡Œå“ªç§æ“ä½œã€‚ ä¾‹å¦‚ï¼Œ1000ä»£è¡¨åŠ æ³•ï¼Œ1100ä»£è¡¨å‡æ³•ã€‚è¾“å‡ºç»“æœä¹Ÿæ˜¯8ä½ã€‚ å¥½äº†ã€‚ä½ å·²ç»æŒæ¡äº†ALUçš„å¤§è‡´å†…å®¹äº†ï¼Œä¹Ÿèƒ½å¤Ÿäº†è§£è®¡ç®—æœºé‡Œä¸€æ‰¹æ‰¹å•æ™¶ç®¡æ˜¯æ€æ ·åä½œè¿ç®—æ•°æ®çš„ã€‚ ä½†åˆ¶ä½œä¸€ä¸ªCPUä¸ä»…è¦ä¼šè¿ç®—ï¼Œè¿˜è¦èƒ½è®°å¿†ã€‚ ä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ å­˜å‚¨åŠŸèƒ½çš„å®ç°ã€‚ å¯„å­˜å™¨å†…å­˜ALUèƒ½æ‰§è¡Œç®—æœ¯(Arithmetic)å’Œé€»è¾‘(Logic)è¿ç®—ï¼ŒALU é‡Œçš„ A å’ŒLå› æ­¤å¾—åã€‚ ä½†æ˜¯ç»“æœç®—å‡ºæ¥ä¸èƒ½ä»æ‰ï¼Œè¿˜éœ€è¦æ‰¾åœ°æ–¹å­˜å‚¨ã€‚è¿™å°±éœ€è¦å†…å­˜äº†ã€‚ å‰ç½®çŸ¥è¯† åªèƒ½å­˜ 0 çš„ALUã€‚ åªèƒ½å­˜ 1 çš„ALUã€‚ ä¸¤ä¸ªåˆä½“ï¼Œå˜æˆé”å­˜å™¨ï¼šèƒ½å­˜å‚¨ 1 0 çš„ALUã€‚ é”å­˜å™¨ é—¨é” å’Œé”å­˜å™¨åŒºåˆ«ï¼š é”å­˜å™¨çš„â€œRESETå¤ä½â€è¿˜ä¸èƒ½è¾¾åˆ°â€œæ˜¯å¦å…è®¸å†™å…¥â€çš„è¦æ±‚ã€‚ ä¾‹å¦‚ : Set ä¸º1 æ—¶ï¼ŒReset çš„æ”¹å˜ä¼šå¯¼è‡´ç»“æœçš„æ”¹å˜ã€‚è€Œé—¨é”å°±èƒ½é¿å…è¿™ç§æƒ…å†µã€‚ ä¸‹é¢ä¸¤æ¬¡å–åï¼š æ•°æ®è¾“å…¥ä¸å˜ï¼Œæ”¹å˜å…è®¸å†™å…¥æ—¶ï¼Œç»“æœä¸å˜ï¼› æ•°æ®è¾“å…¥æ”¹å˜ï¼Œå…è®¸å†™å…¥ä¸º 0 æ—¶ï¼Œç»“æœä¸å˜ï¼› æ•°æ®è¾“å…¥æ”¹å˜ï¼Œå…è®¸å†™å…¥ä¸º 1 æ—¶ï¼Œç»“æœæ”¹å˜ï¼› å®ç°äº†â€œåªæœ‰å…è®¸å†™å…¥æ”¹å˜ä¸º1åï¼Œæ•°æ®è¾“å…¥çš„æ”¹å˜æ‰æœ‰æ•ˆã€‚â€ å…¶ä»–æƒ…å†µç»“æœä¸å˜ï¼šå¦‚å…è®¸å†™å…¥çº¿æ”¹å˜ï¼Œå…è®¸å†™å…¥çº¿ä¸º 0 æ—¶çš„æ•°æ®è¾“å…¥æ”¹å˜ã€‚ æ‰€ä»¥ä»å‘½åä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼š Reset å¤ä½ å¯ä»¥çœ‹æˆæ˜¯é‡ç½®è¾“å‡ºä¸º0ï¼Œä¸”é”å®šä¸º0ï¼› WRITE ENABLE å…è®¸å†™å…¥ è‡ªèº«çš„æ”¹å˜ä¸å½±å“è¾“å‡ºï¼Œåªå½±å“æ•°æ®çš„è¾“å…¥æ˜¯å¦æ”¹å˜è¾“å‡ºã€‚ è¿™é‡Œä¹Ÿèƒ½çœ‹å‡ºä¸‹é¢ä¸¤ä¸ªè¿ç»­å–åçš„ALUçš„æ„ä¹‰ï¼š â‘ å½“å…è®¸å†™å…¥ä¸º0ï¼Œç»“æœé”å®šï¼› â‘¡å½“å…è®¸å†™å…¥ä¸º1ï¼Œæ•°æ®è¾“å…¥ä¸º1ï¼Œç»“æœä¸º1ï¼›æ•°æ®è¾“å…¥ä¸º0ï¼Œç»“æœä¸º0ã€‚ ä¸€ä¸ªé—¨é”åªèƒ½å­˜1bitæ•°æ®ã€‚8ä¸ªå¹¶åˆ—çš„é—¨é”èƒ½å­˜å‚¨8ä½çš„ä¿¡æ¯ã€‚ ä¸€ç»„è¿™æ ·çš„é”å­˜å™¨å°±æ˜¯å¯„å­˜å™¨ã€‚ å¯„å­˜å™¨èƒ½å­˜ä¸€ä¸ªæ•°å­—ï¼Œè¿™ä¸ªæ•°å­—æœ‰å¤šå°‘ä½ï¼Œå«â€ä½å®½ã€‚ æ—©æœŸç”µè„‘ç”¨ 8 ä½å¯„å­˜å™¨ï¼Œç„¶åæ˜¯16 ä½ï¼Œ32 ä½ã€‚å¦‚ä»Šè®¸å¤šè®¡ç®—æœºéƒ½æœ‰ 64 ä½å®½çš„å¯„å­˜å™¨ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ä¸€æ ¹çº¿è¿æ¥æ‰€æœ‰â€å…è®¸è¾“å…¥çº¿â€ï¼ŒæŠŠå®ƒè®¾ä¸º 1ã€‚ æ¥ç€ç”¨8 æ¡æ•°æ®çº¿å‘é€æ•°æ®ï¼Œç„¶åå°†â€œå…è®¸å†™çº¿â€è®¾å›0ã€‚ è¿™æ ·ï¼Œä¸€ä¸ª8ä½ä¿¡æ¯å°±è¢«è®°å½•å¥½äº†ã€‚ çŸ©é˜µ ä½†å¾ˆæ˜¾ç„¶ï¼Œä¸Šé¢é‚£ç§å¹¶æ’é—¨é”çš„8ä½å¯„å­˜å™¨è¿˜è¿œè¿œä¸å¤Ÿç”¨ã€‚64 ä½å¯„å­˜å™¨è¦ 64 æ ¹æ•°æ®çº¿ï¼Œ64 æ ¹è¾“å‡ºçº¿ï¼Œè¿˜æœ‰ä¸€æ ¹å…è®¸è¾“å…¥çº¿ã€‚è¿™æ ·åŠ èµ·æ¥ä¹Ÿæœ‰129æ ¹ã€‚å¦‚æœå­˜ 256 ä½è¦ 513 æ¡çº¿ã€‚ è§£å†³æ–¹æ³•å°±æ˜¯çŸ©é˜µã€‚ é€šè¿‡â€œé—¨é”çŸ©é˜µâ€èƒ½èŠ‚çœå¾ˆå¤šçº¿ï¼Œè¡¨è¾¾æ›´å¤šçš„ä½æ•°ã€‚ â€œ12è¡Œ 8åˆ—â€å¯ä»¥å†™æˆ 11001000 ä¾‹å¦‚ 16x16 256 ä½ï¼Œåªéœ€è¦ 16 æ ¹è¡Œçº¿ + 16 æ ¹ åˆ—çº¿ + 1æ ¹æ•°æ®çº¿ + 1æ ¹å…è®¸è¾“å…¥çº¿ + 1æ ¹å…è®¸è¯»å–çº¿ 35 æ ¹çº¿ã€‚ 256ä¸ªé—¨é”æ„æˆ 256-bit å¯„å­˜å™¨ï¼Œä½†å…«ä¸ªè¾“å…¥æ¥å£é€šè¿‡åå…­ä½å¤šè·¯å¤ç”¨å™¨(multiplexer)ï¼Œæ¯æ¬¡åªèƒ½æ¿€æ´»å…¶ä¸­ä¸€ä¸ªé—¨é”ã€‚ä¹Ÿå°±æ˜¯ä¸€æ¬¡åªèƒ½å­˜å‚¨256ä½ä¸­çš„ä¸€ä½ï¼Œä¸èƒ½å¹¶è¡Œå¤„ç†äº†ã€‚ ä¸¤ä¸ªå¤šè·¯å¤ç”¨å™¨åˆ†åˆ«å¤„ç†è¡Œå’Œåˆ—ã€‚ æŠŠä¸Šé¢çš„èƒ½è¡¨ç¤º256ä½çš„å†…å­˜æŠ½è±¡æˆ â€œ256-BIT MEMORYâ€ã€‚é€šè¿‡8ä¸ªå†…å­˜å¹¶åˆ—å®ç°8ä½æ•°å­—çš„å­˜å‚¨ã€‚ ä¸ºäº†å®ç°8ä½æ•°å­—çš„å­˜å‚¨ï¼Œæ•°å­—çš„æ¯ä¸€ä½ä¾æ¬¡ç”±å…¶ä¸­ä¸€ä¸ª256-BIT å†…å­˜å­˜å–ã€‚ ç”±äºæ¯ä¸ªå†…å­˜åªèƒ½è¡¨ç¤ºä¸€ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬åŒæ—¶ç»™ 8 ä¸ª 256 ä½å†…å­˜ä¸€æ ·çš„åœ°å€ï¼Œè®©ä»–ä»¬å„å–ä¸€ä½å°±å¥½äº†ã€‚ è¿™æ„å‘³ç€è¿™é‡Œæ€»å…±èƒ½å­˜ 256 ä¸ªå­—èŠ‚(byte)ã€‚ 256 bit x 8ä¸ª 256 byte ä¸€ä¸ª8ä½çš„äºŒè¿›åˆ¶æ•°åˆ†åˆ«è¢«å†™å…¥åˆ°8ä¸ªå†…å­˜çš„åŒä¸€äºŒè¿›åˆ¶ä½æ¥è®°å½•ï¼Œ8ä¸ª256ä½å†…å­˜åˆ™å¯ä»¥å­˜å‚¨256ä¸ª8ä½äºŒè¿›åˆ¶æ•°ã€‚ æˆ–è€…è¯´ï¼Œä¸€byteçš„æ•°æ®åˆ†å…«bitå­˜å…«ä¸ªmemoryé‡Œé¢ï¼Œè¯»å†™æ—¶åœ°å€å…±ç”¨ï¼ˆ8ä¸ªregister éƒ½æ˜¯åŒä¸€äºŒè¿›åˆ¶ä½ï¼‰ï¼Œå°±åˆ°ä¸€èµ·äº† å†æ¬¡æŠ½è±¡ï¼Œä¸çœ‹ä½œæ˜¯ä¸€å †ç‹¬ç«‹çš„å­˜å‚¨æ¨¡å—å’Œç”µè·¯ï¼Œè€Œæ˜¯çœ‹æˆä¸€ä¸ªæ•´ä½“çš„å¯å¯»å€å†…å­˜ã€‚ è¿™å°±æ„æˆäº†ä¸€ä¸ªèƒ½å­˜å‚¨ 256B çš„å†…å­˜æ¡ã€‚ å®ä¾‹ï¼š è¿™æ˜¯ä¸€æ¡çœŸçš„å†…å­˜ï¼Œä¸Šé¢ç„Šäº†8ä¸ªå†…å­˜æ¨¡å—ã€‚ æ‰“å¼€å…¶ä¸­ä¸€ä¸ªï¼Œç„¶åæ”¾å¤§ï¼š å¯ä»¥çœ‹åˆ°32ä¸ªå†…å­˜æ–¹å—ã€‚ æ”¾å¤§å…¶ä¸­çš„ä¸€ä¸ªæ–¹å—ï¼Œå¯ä»¥çœ‹åˆ°è¿˜æœ‰4ä¸ªå°å—ã€‚ å››ä¸ªå°å—å†æ”¾å¤§ï¼Œå°±å¯ä»¥çœ‹åˆ°çŸ©é˜µäº†ã€‚ è¿™ä¸ªçŸ©é˜µæ˜¯128ä½x64ä½ï¼Œæ€»å…±8192ä½ã€‚ æ¯ä¸ªæ–¹æ ¼ 4 ä¸ªçŸ©é˜µï¼Œæ‰€ä»¥ä¸€ä¸ªæ–¹æ ¼æœ‰ 32768 ä¸ªä½(8192x432768) æ¯ä¸ªå†…å­˜æ¨¡å—32ä¸ªæ–¹æ ¼ï¼Œæ‰€ä»¥ä¸€ä¸ªå†…å­˜æ¨¡å—å¤§çº¦æœ‰ 100 ä¸‡ä½ã€‚ RAMæœ‰8ä¸ªå†…å­˜æ¨¡å—ï¼Œæ‰€ä»¥å¤§æ¦‚èƒ½å­˜å‚¨800ä¸‡ä½ã€‚ 800ä¸‡ä½å¤§æ¦‚1MBå·¦å³å§ã€‚ 1GBçš„å†…å­˜ï¼Œèƒ½å­˜æ•°åäº¿å­—èŠ‚ã€‚ æˆ‘ä»¬ç”¨é”å­˜å™¨åšäº†ä¸€å— SRAM(é™æ€éšæœºå­˜å–å­˜å‚¨å™¨)ã€‚è¿˜æœ‰å…¶ä»–ç±»å‹çš„ RAMï¼Œå¦‚ DRAMï¼Œè‚‰å­˜å’Œ NVRAMã€‚å®ƒä»¬åŠŸèƒ½ä¸Šç›¸ä¼¼ï¼Œä½†ç”¨ä¸åŒç”µè·¯å­˜å•ä¸ªä½ã€‚æ¯”å¦‚ç”¨ä¸åŒçš„é€»è¾‘é—¨ï¼Œç”µå®¹å™¨ï¼Œç”µè·æ•è·æˆ–å¿†é˜»å™¨ï¼ˆlogicgates,capacitors, charge traps, or memristors.ï¼‰ ä½†æ ¹æœ¬è¿™äº›æŠ€æœ¯éƒ½æ˜¯çŸ©é˜µå±‚å±‚åµŒå¥—ï¼Œæ¥å­˜å‚¨å¤§é‡ä¿¡æ¯ å°±åƒè®¡ç®—æœºä¸­çš„å¾ˆå¤šäº‹æƒ…ï¼Œåº•å±‚å…¶å®éƒ½å¾ˆç®€å•ï¼Œéš¾ä»¥ç†è§£çš„åªæ˜¯ä¸€å±‚å±‚çš„æŠ½è±¡ã€‚ CPU ä¸­å¤®å¤„ç†å™¨æŒ‡ä»¤ç¨‹åºç”±ä¸€ä¸ªä¸ªæ“ä½œï¼Œä¹Ÿå°±æ˜¯æŒ‡ä»¤æ„æˆã€‚ æ•°å­¦æŒ‡ä»¤ï¼ŒCPUä¼šè®©ALUè¿›è¡Œæ•°å­¦è¿ç®— å†…å­˜æŒ‡ä»¤ï¼ŒCPUä¼šå’Œå†…å­˜é€šä¿¡ï¼Œç„¶åè¯»å†™å€¼ é€šè¿‡æŒ‡ä»¤è¡¨å¯ä»¥äº†è§£åˆ°æŒ‡ä»¤åã€å¯¹åº”æè¿°ã€4ä½æ“ä½œç å’Œéœ€è¦çš„åœ°å€å¯„å­˜å™¨ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè®¡ç®—æœºç»™CPUæ”¯æŒçš„æ‰€æœ‰æŒ‡ä»¤éƒ½åˆ†é…ä¸€ä¸ªIDï¼Œå®ç°åŒºåˆ†ã€‚ æœ¬ä¾‹ä¸­æŒ‡ä»¤çš„å‰4ä½ä¸ºæ“ä½œç (opcode)ï¼Œå4ä½ä»£è¡¨æ•°æ®æ¥è‡ªå“ªé‡Œã€‚ CPUç»“æ„ä¸‹é¢CPUç»“æ„ä¸­çš„çº¿åªæ˜¯æ‰€æœ‰å¿…é¡»çº¿è·¯çš„æŠ½è±¡ï¼Œå³â€œå¾®ä½“ç³»æ¶æ„(microarchitecture)â€ CPUå†…éƒ¨åˆ’åˆ†ä¸ºä¸‰å¤§æ¿å—ï¼šè¿ç®—å™¨ã€æ§åˆ¶å™¨ã€å­˜å‚¨å™¨ã€‚ï¼ˆå†¯è¯ºä¾æ›¼ç»“æ„ï¼‰ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒALUæ‰®æ¼”äº†è¿ç®—å™¨ï¼ŒRAMå’Œå››ä¸ªæ•°æ®å¯„å­˜å™¨åˆ™æ‰®æ¼”äº†å­˜å‚¨å™¨ã€‚æ§åˆ¶å™¨ç”±æ§åˆ¶å•å…ƒCUä»¥åŠä¸¤ä¸ªæ§åˆ¶å¯„å­˜å™¨æ‰®æ¼”ã€‚ ç¤ºä¾‹ä¸­çš„åœ°å€æœ‰ä¸€ä¸ª16ä½ç½®ï¼Œæ¯ä¸ªä½ç½®èƒ½å­˜8ä½çš„å†…å­˜ï¼Œè¿˜æœ‰å››ä¸ª8ä½å¯„å­˜å™¨ã€‚ è¿˜æœ‰ä¸¤ä¸ªå¸®åŠ©æ“ä½œçš„å¯„å­˜å™¨ï¼Œä¸€ä¸ªè¿½è¸ªç¨‹åºè¿è¡Œåœ°å€çš„æŒ‡ä»¤åœ°å€å¯„å­˜å™¨PCï¼Œä¸€ä¸ªå­˜å½“å‰æŒ‡ä»¤çš„æŒ‡ä»¤å¯„å­˜å™¨IRã€‚ å½“å¯åŠ¨è®¡ç®—æœºæ—¶ï¼Œæ‰€æœ‰å¯„å­˜å™¨ä»0å¼€å§‹ã€‚ è¿è¡Œå‘½ä»¤CPUçš„è¿è¡Œå…±ä¸‰ä¸ªé˜¶æ®µï¼šå–æŒ‡ä»¤ã€è§£ç ã€æ‰§è¡Œã€‚ ä»¥LOAD_A ä¸ºä¾‹: Read RAM location into register A å–æŒ‡ä»¤é˜¶æ®µï¼šæœ¬é˜¶æ®µè´Ÿè´£æ‹¿åˆ°æŒ‡ä»¤ å°† æŒ‡ä»¤åœ°å€å¯„å­˜å™¨ è¿æ¥åˆ° RAM ã€‚ å¯„å­˜å™¨åœ°å€å€¼ä¸º0ï¼Œå› æ­¤ RAM è¿”å›åœ°å€ 0çš„å€¼ã€‚ å¯ä»¥çœ‹åˆ°åœ°å€0çš„æ•°æ® 00101110ä¼šå¤åˆ¶åˆ° æŒ‡ä»¤å¯„å­˜å™¨ é‡Œ è§£ç é˜¶æ®µï¼šè§£é‡ŠæŒ‡ä»¤å†…å®¹ å‰4ä½0010æ˜¯ LOAD A æŒ‡ä»¤ã€‚é€šè¿‡æŒ‡ä»¤è¡¨å¯çŸ¥ï¼Œèƒ½å°†RAMçš„å€¼æ”¾å…¥å¯„å­˜å™¨Aã€‚ å4ä½1110æ˜¯ RAM çš„åœ°å€ï¼Œåè¿›åˆ¶ä¸º14. åŒºåˆ†æŒ‡ä»¤å†…å®¹åï¼Œç”±æ§åˆ¶å•å…ƒï¼ˆControl Unitï¼‰ è§£ç ï¼Œè¯†åˆ«æŒ‡ä»¤ï¼Œæ£€æŸ¥æ“ä½œç ã€‚ æ§åˆ¶å•å…ƒåŒæ ·ç”±å¾ˆå¤šé€»è¾‘é—¨ç»„æˆã€‚(ä¸æ˜¯å¾ˆå¤šå•¦)ã€‚ æ§åˆ¶å•å…ƒæŒ‡æŒ¥ç€CPUçš„æ‰€æœ‰ç»„ä»¶ æ‰§è¡Œé˜¶æ®µ ç”¨æ§åˆ¶å•å…ƒä¸­â€æ£€æŸ¥æ˜¯å¦æ˜¯ LOAD A æŒ‡ä»¤çš„ç”µè·¯â€ï¼Œå¯ä»¥æ‰“å¼€ RAM çš„å…è®¸è¯»å–çº¿ï¼ŒæŠŠåœ°å€ 14 ä¼ è¿‡å»ã€‚RAM æ‹¿åˆ°å€¼ï¼Œ0000 0011ï¼Œåè¿›åˆ¶çš„ 3ã€‚ å› ä¸ºæ˜¯ LOAD_AæŒ‡ä»¤ï¼Œæ‰€ä»¥æŠŠè¯»å–åˆ°çš„å€¼ 3 åªæ”¾åˆ°å¯„å­˜å™¨ A ï¼Œå…¶ä»–å¯„å­˜å™¨ä¸å—å½±å“ã€‚ æ­¤æ—¶é—®é¢˜æ¥äº†ï¼šéœ€è¦ä¸€æ ¹çº¿ï¼ŒæŠŠ RAM è¿æ¥åˆ°4ä¸ªå¯„å­˜å™¨ï¼Œè®©æˆ‘ä»¬ä¼ å€¼è¿‡å»ï¼ è¿˜æ˜¯ç”¨æ§åˆ¶å•å…ƒä¸­â€æ£€æŸ¥æ˜¯å¦æ˜¯ LOAD A æŒ‡ä»¤çš„ç”µè·¯â€ï¼Œè¿æ¥å¯åŠ¨å¯„å­˜å™¨Açš„å…è®¸å†™å…¥çº¿ã€‚ äºæ˜¯æŠŠ 14 æ”¾åˆ°äº†å¯„å­˜å™¨Aä¸­ï¼ŒLOAD_A 14 æŒ‡ä»¤æ‰§è¡Œå®Œæˆ æ”¶å°¾ï¼šå…³æ‰æ‰€æœ‰çº¿è·¯ï¼Œå»æ‹¿ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼ˆä¹Ÿå°±æ˜¯æŒ‡ä»¤åœ°å€å¯„å­˜å™¨+1) ä»¥ADDä¸ºä¾‹ï¼šAdd two registers , store result into second register. å–æŒ‡ä»¤: æŒ‡ä»¤åœ°å€å¯„å­˜å™¨æŒ‡å‘2,è¯»å– 10000100åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­ã€‚ è§£ç ï¼š å‰å››ä½ : 1000 ADDå‘½ä»¤ åå››ä½ : 0100 , 01 ä¸ºå¯„å­˜å™¨Bï¼Œ00ä¸ºå¯„å­˜å™¨Aã€‚ é€šè¿‡æ§åˆ¶å•å…ƒï¼Œè§£ç ï¼Œè¯†åˆ«æŒ‡ä»¤ï¼Œæ£€æŸ¥æ“ä½œç ã€‚ æ‰§è¡Œï¼šæŠŠ register Bçš„å€¼åŠ åˆ° register A ä¸­ã€‚ å¯åŠ¨å¯„å­˜å™¨Bï¼Œä½œä¸ºALUçš„ç¬¬ä¸€ä¸ªè¾“å…¥ï¼›å¯åŠ¨å¯„å­˜å™¨Aï¼Œä½œä¸ºALUçš„ç¬¬äºŒä¸ªè¾“å…¥ã€‚ ALUå¯ä»¥æ‰§è¡Œä¸åŒæ“ä½œï¼Œæ‰€ä»¥æ§åˆ¶å•å…ƒå¿…é¡»ä¼ é€’ADDæ“ä½œç å‘Šè¯‰å®ƒè¦åšä»€ä¹ˆ æœ€åï¼Œç»“æœå­˜åˆ°å¯„å­˜å™¨Aã€‚ **æ³¨æ„:**ä¸èƒ½ç›´æ¥å†™å…¥å¯„å­˜å™¨Aï¼Œå› ä¸ºå¯„å­˜å™¨Aæ­¤æ—¶æ­£åœ¨ä½œä¸ºè¾“å…¥ï¼Œå†™å…¥åæ–°å€¼ä¼šè¿›å…¥ALUï¼Œå¯¼è‡´Aä¸æ–­å’Œè‡ªå·±ç›¸åŠ ã€‚ å› æ­¤ï¼Œæ§åˆ¶å•å…ƒç”¨ä¸€ä¸ªè‡ªå·±çš„å¯„å­˜å™¨æš‚æ—¶ä¿å­˜ç»“æœï¼Œå…³é—­ALUï¼Œç„¶åæŠŠå€¼å†™å…¥æ­£ç¡®çš„å¯„å­˜å™¨ã€‚å†ç”±å¯„å­˜å™¨èµ‹å€¼åˆ°å¯„å­˜å™¨ Aã€‚ æ”¶å°¾ï¼šå…³æ‰æ‰€æœ‰çº¿è·¯ï¼Œå»æ‹¿ä¸‹ä¸€æ¡æŒ‡ä»¤ï¼ˆä¹Ÿå°±æ˜¯æŒ‡ä»¤åœ°å€å¯„å­˜å™¨+1) ä»¥store A ä¸ºä¾‹ï¼šWrite from register A into RAM location å–æŒ‡ä»¤: æŒ‡ä»¤åœ°å€å¯„å­˜å™¨æŒ‡å‘3,è¯»å– 01001101åˆ°æŒ‡ä»¤å¯„å­˜å™¨ä¸­ã€‚ è§£ç ï¼š å‰å››ä½ : 0100 STORE A æŒ‡ä»¤ åå››ä½ : 1101 , 01 ä¸ºå¯„å­˜å™¨Bï¼Œ00ä¸ºå¯„å­˜å™¨Aã€‚ é€šè¿‡æ§åˆ¶å•å…ƒï¼Œè§£ç ï¼Œè¯†åˆ«æŒ‡ä»¤ï¼Œæ£€æŸ¥æ“ä½œç ã€‚ æ‰§è¡Œï¼š æŠŠåœ°å€ä¼ ç»™RAMï¼Œè¿™æ¬¡ä¸æ˜¯å…è®¸è¯»å–ï¼Œè€Œæ˜¯å…è®¸å†™å…¥ã€‚ åŒæ—¶æ‰“å¼€å¯„å­˜å™¨Açš„å…è®¸è¯»å–ï¼Œè¿™æ ·å¯ä»¥æŠŠå¯„å­˜å™¨Açš„å€¼ä¼ ç»™RAMã€‚ å®Œæˆäº†ï¼ æ€»ç»“ï¼š 1.é€šè¿‡ä¸Šä¾‹å¯ä»¥äº†è§£ï¼ŒCPUè¿è¡ŒæŒ‡ä»¤ï¼Œé€šè¿‡RAMå’Œå¯„å­˜å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼Œä»¥åŠæ§åˆ¶å•å…ƒå’ŒALUçš„æ£€éªŒã€è¿ç®—ï¼Œä»è€Œå®Œæˆä¸€æ¬¡æ“ä½œã€‚ 2.RAMæœ‰é…åˆæ§åˆ¶å•å…ƒçš„ å…è®¸å†™å…¥çº¿ã€å…è®¸è¯»å–çº¿ã€åœ°å€è¾“å…¥çº¿ï¼› è¿˜æœ‰é…åˆæ•°æ®å¯„å­˜å™¨ä»¥åŠæŒ‡ä»¤å¯„å­˜å™¨çš„ DATA çº¿ã€‚ å¯„å­˜å™¨ä¹Ÿæœ‰å…è®¸å†™å…¥çº¿ã€å…è®¸è¯»å–çº¿ã€‚ æ—¶é’Ÿæ—¶é’Ÿè´Ÿè´£ç®¡ç†CPUçš„èŠ‚å¥ï¼ŒåŒºåˆ†æ¯ä¸€æ­¥æ“ä½œã€‚ æ—¶é’Ÿä»¥ç²¾ç¡®çš„é—´éš”è§¦å‘ç”µä¿¡å·ï¼Œæ§åˆ¶å•å…ƒä¼šç”¨è¿™ä¸ªä¿¡å·ï¼Œæ¨è¿› CPU çš„å†…éƒ¨æ“ä½œï¼Œç¡®ä¿ä¸€åˆ‡æŒ‰æ­¥éª¤è¿›è¡Œã€‚ CPUâ€å–æŒ‡ä»¤ä¸€è§£ç ä¸€æ‰§è¡Œâ€çš„é€Ÿåº¦å« æ—¶é’Ÿé€Ÿåº¦ã€‚ å•ä½æ˜¯èµ«å…¹ã€‚ èµ«å…¹æ˜¯ç”¨æ¥è¡¨ç¤ºé¢‘ç‡çš„å•ä½ã€‚1 èµ«å…¹ä»£è¡¨ä¸€ç§’1ä¸ªå‘¨æœŸ è¶…é¢‘ï¼š æ„æ€æ˜¯ä¿®æ”¹æ—¶é’Ÿé€Ÿåº¦ï¼ŒåŠ å¿« CPU çš„é€Ÿåº¦ã€‚èŠ¯ç‰‡åˆ¶é€ å•†ç»å¸¸ç»™CPU ç•™ä¸€ç‚¹ä½™åœ°ï¼Œå¯ä»¥æ¥å—ä¸€ç‚¹è¶…é¢‘ã€‚ä½†è¶…é¢‘å¤§å¤šä¼šè®©CPU è¿‡çƒ­ï¼Œæˆ–äº§ç”Ÿä¹±ç ï¼Œå› ä¸ºä¿¡å·è·Ÿä¸ä¸Šæ—¶é’Ÿã€‚ é™é¢‘: æœ‰æ—¶æ²¡å¿…è¦è®©å¤„ç†å™¨å…¨é€Ÿè¿è¡Œã€‚æŠŠ CPU çš„é€Ÿåº¦é™ä¸‹æ¥ï¼Œå¯ä»¥çœå¾ˆå¤šç”µã€‚ ä¸ºäº†çœç”µï¼Œå¾ˆå¤šç°ä»£å¤„ç†å™¨å¯ä»¥æŒ‰éœ€æ±‚ åŠ å¿«æˆ–å‡æ…¢æ—¶é’Ÿé€Ÿåº¦ï¼Œè¿™å«åŠ¨æ€è°ƒæ•´é¢‘ç‡ã€‚ é«˜çº§CPUè®¾è®¡ ä»å‰é¢å‡ ç« ï¼Œæˆ‘ä»¬ä»ä¸€ç§’ä¸€æ¬¡çš„è¿ç®—ï¼Œåˆ°ç°åœ¨æœ‰åƒèµ«ç”šè‡³å…†èµ«CPUã€‚ç°åœ¨çš„å•ä½æ˜¯GHzï¼Œ1ç§’10äº¿æ¬¡è¿ç®—ã€‚å¤šä¹ˆå¤§çš„è®¡ç®—é‡ï¼ ä¸º CPU æå‡é€Ÿåº¦æ—©æœŸè®¡ç®—æœºåˆ°ç°ä»£è®¡ç®—æœºå‚å•†å’Œç§‘å­¦å®¶ä»¬å‘æ˜äº†å„ç§æ–°æŠ€æœ¯æ¥æé«˜æ€§èƒ½ã€‚ å‡å°‘æ™¶ä½“ç®¡åˆ‡æ¢æ—¶é—´ æ—©æœŸæé€Ÿçš„æ–¹å¼ä¾¿æ˜¯å‡å°‘æ™¶ä½“ç®¡çš„åˆ‡æ¢æ—¶é—´ï¼Œä½¿æ™¶ä½“ç®¡ç»„æˆäº†é€»è¾‘é—¨ï¼ŒALU ä»¥åŠå‰å‡ é›†çš„å…¶ä»–éƒ¨ä»¶ã€‚ è¿™ç§æé€Ÿæ–¹æ³•ä¼šé‡åˆ°ç“¶é¢ˆã€‚äºæ˜¯å¤„ç†å™¨å‚å•†ä¸ä»…è®©ç®€å•æŒ‡ä»¤è¿è¡Œæ›´å¿«ï¼Œè¿˜è®©å®ƒèƒ½æ”¯æŒæ›´å¤æ‚çš„è¿ç®—ã€‚ åˆ©ç”¨å¤æ‚ç”µè·¯å®ç°ç®—æ³• ä¾‹å¦‚é™¤æ³•å’Œä¹˜æ³•éœ€è¦ç¨‹åºå¤šæ¬¡è¿è¡Œå‡æ³•å’ŒåŠ æ³•ï¼Œä¸ºäº†çœå»å¾ªç¯çš„åŠŸå¤«ï¼Œç°ä»£ cpu ç›´æ¥åœ¨ç¡¬ä»¶å±‚é¢ä¸Šè®¾è®¡äº†é™¤æ³•ç­‰å¤æ‚ç”µè·¯ä»¥èŠ‚çœæŸäº›è¿ç®—ã€‚è¿™è®©ALUæ›´å¤§æ›´å¤æ‚ï¼Œä½†ä¹ŸåŠ å¿«äº†è¿è¡Œé€Ÿåº¦ã€‚ å¤æ‚åº¦å’Œé€Ÿåº¦çš„çŸ›ç›¾ä¸€ç›´å­˜åœ¨ã€‚ ä¸¾ä¾‹ï¼Œç°ä»£å¤„ç†å™¨æœ‰ä¸“é—¨ç”µè·¯æ¥å¤„ç†å›¾å½¢æ“ä½œï¼Œè§£ç å‹ç¼©è§†é¢‘,åŠ å¯†æ–‡æ¡£ ç­‰ç­‰ã€‚å¦‚æœç”¨æ ‡å‡†æ“ä½œæ¥å®ç°ï¼Œè¦å¾ˆå¤šä¸ªæ—¶é’Ÿå‘¨æœŸã€‚ æŸäº›å¤„ç†å™¨æœ‰ MMX, 3DNOW, SSEï¼Œä»–ä»¬å°±æ‹¥æœ‰é¢å¤–ç”µè·¯ç”¨äºå¤„ç†æ¸¸æˆå’ŒåŠ å¯†ç­‰åœºæ™¯ã€‚ éšç€æŒ‡ä»¤ä¸æ–­å¢åŠ ï¼Œä¸ºäº†å…¼å®¹æ—§æŒ‡ä»¤é›†ï¼ŒæŒ‡ä»¤æ•°é‡è¶Šæ¥è¶Šå¤šã€‚ è‹±ç‰¹å°”4004,ç¬¬ä¸€ä¸ªé›†æˆCPUï¼Œæœ‰ 46 æ¡æŒ‡ä»¤,è¶³å¤Ÿåšä¸€å°è®¡ç®—æœºã€‚ ç°ä»£å¤„ç†å™¨æœ‰ä¸Šå¹²æ¡æŒ‡ä»¤å’Œæ›´å¤šå·§å¦™å¤æ‚çš„ç”µè·¯ã€‚ ç»™ CPU å¢åŠ ç¼“å­˜ è¶…é«˜çš„æ—¶é’Ÿé€Ÿåº¦å¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•å¿«é€Ÿä¼ é€’æ•°æ®ç»™ CPUï¼Ÿ å°±åƒæœ‰å¼ºå¤§çš„è’¸æ±½æœº ä½†æ— æ³•å¿«é€ŸåŠ ç…¤ã€‚ RAMæˆäº†ç“¶é¢ˆã€‚RAM æ˜¯ CPU ä¹‹å¤–çš„ç‹¬ç«‹ç»„ä»¶ï¼Œæ„å‘³ç€æ•°æ®è¦ç”¨çº¿æ¥ä¼ é€’ï¼Œå«â€æ€»çº¿â€œã€‚æ€»çº¿å°±å‡ å˜ç±³ï¼Œè€Œç”µä¿¡å·ä¼ è¾“æ¥è¿‘å…‰é€Ÿã€‚ ä½†CPUæ¯ç§’å¯ä»¥å¤„ç†ä¸Šäº¿æ¡æŒ‡ä»¤ï¼Œä¸¤è€…æ‰§è¡Œä»»åŠ¡çš„é€Ÿåº¦è¿˜æ˜¯è¿‡äºæ‚¬æ®Šã€‚ä¸€æ¡â€ä»å†…å­˜è¯»æ•°æ®â€çš„æŒ‡ä»¤å¯èƒ½è¦å¤šä¸ªæ—¶é’Ÿå‘¨æœŸï¼ŒCPUåªèƒ½è‹¦è‹¦ç­‰å¾…ã€‚ RAM æ˜¯ CPU ä¹‹å¤–çš„ç‹¬ç«‹ç»„ä»¶ï¼Œé€šè¿‡æ€»çº¿ (Bus) ä¼ é€’æ•°æ®ï¼Œä¸ºäº†é¿å…æ•°æ®ä¼ è¾“å¸¦æ¥çš„å»¶è¿Ÿï¼Œè§£å†³çš„æ–¹æ³•æ˜¯ä¸º CPU å¢åŠ ä¸€ç‚¹RAMä½œä¸ºç¼“å­˜ã€‚ è¯»å–æ—¶ RAM å°†ä¸€æ‰¹æ•°æ®æå‰ä¼ å…¥ CPU ç¼“å­˜ï¼Œè¿™æ ·å¤„ç†çš„æ—¶å€™ CPU ç›´æ¥ä»ç¦»å¾—è¿‘çš„ç¼“å­˜ä¸­è·å–æ•°æ®å°±æ¯”ä» RAM ä¸­è·å–æ•°æ®è¦å¿«ã€‚ å¤„ç†å™¨ç©ºé—´ä¸å¤§ï¼Œç¼“å­˜ä¸€èˆ¬åªæœ‰KBæˆ–MBã€‚ äºæ˜¯æ•°æ®ä¼ è¾“å•ä½ä»ä¸€ä¸ªå˜æˆäº†ä¸€æ‰¹ã€‚ ç¼“å­˜å‘½ä¸­ å¦‚æœæƒ³è¦çš„æ•°æ®å·²å­˜åœ¨ç¼“å­˜ä¸­åˆ™å«åšç¼“å­˜å‘½ä¸­ï¼Œå¦åˆ™å«åšç¼“å­˜æœªå‘½ä¸­ã€‚ åŒæ­¥æ›´æ–°ï¼š ç¼“å­˜ä¹Ÿå¯ä»¥ä½œä¸ºä¸´æ—¶ç©ºé—´å­˜å‚¨ä¸€äº›è¿ç®—è¿‡ç¨‹ä¸­çš„ä¸­é—´å€¼ï¼Œé€‚åˆé•¿ å¤æ‚çš„è¿ç®—ã€‚ä½†æ˜¯è®¡ç®—å®Œåçš„å€¼æƒ³è¦å­˜å‚¨ä¼šå…ˆå­˜å…¥ç¼“å­˜ä¸­ï¼Œè€Œç¼“å­˜ä¸­çš„å€¼å¯èƒ½è¿˜æœ‰è¿ç®—çš„ä¸­é—´å€¼å¯¼è‡´ç¼“å­˜å’Œ RAM å†…æ•°æ®ä¸ä¸€è‡´ï¼Œå› æ­¤ç¼“å­˜é‡Œçš„æ•°æ®è¦å¯¹ RAM é‡Œçš„æ•°æ®è¿›è¡ŒåŒæ­¥æ›´æ–°ã€‚ è„ä½ï¼š å¯¹æ­¤ç¼“å­˜é‡Œçš„æ¯å—ç©ºé—´éƒ½æœ‰ä¸€ä¸ªå«åšè„ä½çš„æ ‡è®°å£°æ˜è¯¥æ•°æ®æ˜¯å¦ä¿®æ”¹è¿‡ã€‚åŒæ­¥æ›´æ–°ä¸€èˆ¬æ˜¯å‘ç”Ÿåœ¨ç¼“å­˜æ»¡äº†ï¼Œåˆéœ€è¦ç¼“å­˜æ—¶ã€‚è¿™æ—¶ä¼šæ£€æŸ¥ç¼“å­˜ä¸­çš„è„ä½ï¼Œå¦‚æœæ˜¯è„çš„å°±å°†æ•°æ®å†™å› RAM ä¸­ã€‚ å¦ä¸€ç§æå‡æ€§èƒ½çš„æ–¹æ³•ï¼šinstruction pipelining æŒ‡ä»¤æµæ°´çº¿ã€‚ å¯ä»¥é€šè¿‡ä¸åŒçš„æŒ‡ä»¤è¿è¡Œæ–¹å¼ä»¥æå‡ CPU é€Ÿåº¦ã€‚ é¡ºåºä¸²è¡Œæ‰§è¡Œ ä¸¥æ ¼æŒ‰ç…§é¡ºåºä¸Šä¸€æ¡å‘½ä»¤ç»“æŸæ‰æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ é¡ºåºå¹¶è¡Œæ‰§è¡Œ åœ¨ä¸Šä¸€æ¡æŒ‡ä»¤æ‰§è¡Œæ—¶å°±å¤„ç†ä¸‹ä¸€ä¸ªæŒ‡ä»¤çš„è§£ç æ­¥éª¤ï¼Œä¸‹ä¸‹æ¡æŒ‡ä»¤çš„è¯»å–æ­¥éª¤ã€‚ ä¹±åºæ‰§è¡Œ ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šæŒ‡ä»¤ä¹‹é—´çš„ä¾èµ–æ€§ é—®é¢˜ä¸¾ä¾‹ï¼šåœ¨è¯»å–çš„åŒæ—¶ï¼Œæ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤åœ¨æ”¹è¿™ä¸ªæ•°æ®ã€‚ è¿™ç§æƒ…å†µéœ€è¦ææ¸…æ¥šæ•°æ®ä¹‹é—´çš„ä¾èµ–æ€§ï¼Œå¿…è¦æ—¶åœæ­¢æµæ°´çº¿ï¼Œé¿å…å‡ºé—®é¢˜ã€‚ è§£å†³ï¼š é«˜ç«¯CPUä¼šé€šè¿‡åŠ¨æ€è°ƒæ•´ï¼Œè¿›ä¸€æ­¥åŠ¨æ€æ’åºæœ‰ä¾èµ–å…³ç³»çš„æŒ‡ä»¤ã€‚æœ€å°åŒ–æµæ°´çº¿çš„åœå·¥æ—¶é—´ã€‚è¿™å«ä¹±åºæ‰§è¡Œã€‚ ç”µè·¯å¤æ‚ï¼Œä½†å¾ˆé«˜æ•ˆã€‚å‡ ä¹æ¯ä¸ªç°ä»£å¤„ç†å™¨éƒ½æœ‰æµæ°´çº¿ã€‚ æ¨æµ‹æ‰§è¡Œ | åˆ†æ”¯é¢„æµ‹ ç¬¬äºŒä¸ªé—®é¢˜ï¼šæ¡ä»¶è·³è½¬ è¿™äº›æŒ‡ä»¤ä¼šæ”¹å˜ç¨‹åºçš„æ‰§è¡Œæµã€‚ç®€å•çš„æµæ°´çº¿å¤„ç†å™¨ï¼Œçœ‹åˆ° JUMP æŒ‡ä»¤ä¼šåœä¸€ä¼šå„¿ï¼Œç­‰å¾…æ¡ä»¶å€¼ç¡®å®šä¸‹æ¥ã€‚ä½†ç©ºç­‰ä¼šæœ‰å»¶è¿Ÿã€‚æ‰€ä»¥é«˜ç«¯CPUä¼šç”¨ä¸€äº›æŠ€å·§ï¼š è§£å†³ï¼š é‡åˆ°å²”è·¯å£æ—¶ï¼ŒçŒœæµ‹ JUMP æŒ‡ä»¤èµ°å“ªæ¡è·¯çš„å¯èƒ½æ€§æ›´å¤§ä¸€äº›ï¼Œç„¶åæå‰æŠŠæŒ‡ä»¤æ”¾è¿›æµæ°´çº¿ï¼Œè¿™å«â€œæ¨æµ‹æ‰§è¡Œã€‚ çŒœå¯¹äº†å¯ä»¥ç›´æ¥æ‰§è¡Œï¼ŒçŒœé”™åˆ™è¦æ¸…ç©ºæµæ°´çº¿ï¼ˆå°±åƒèµ°é”™è·¯æ‰å¤´ï¼‰ã€‚ ä¸ºäº†å°½å¯èƒ½å‡å°‘æ¸…ç©ºæµæ°´çº¿çš„æ¬¡æ•°ï¼ŒCPU å‚å•†å¼€å‘äº†å¤æ‚çš„æ–¹æ³•æ¥çŒœæµ‹ï¼šåˆ†æ”¯é¢„æµ‹ã€‚ ç°ä»£ CPU çš„æ­£ç¡®ç‡è¶…è¿‡ 90%ï¼ è¶…æ ‡é‡å¤„ç†å™¨SUPERCALAR PROCESSOR ç†æƒ³æƒ…å†µä¸‹ï¼Œæµæ°´çº¿ä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸå®Œæˆ1ä¸ªæŒ‡ä»¤ã€‚ å³ä¾¿æœ‰æµæ°´çº¿è®¾è®¡ï¼Œåœ¨æŒ‡ä»¤æ‰§è¡Œé˜¶æ®µ,å¤„ç†å™¨é‡Œæœ‰äº›åŒºåŸŸè¿˜æ˜¯å¯èƒ½ä¼šç©ºé—²ã€‚ æ¯”å¦‚ï¼Œæ‰§è¡Œä¸€ä¸ªâ€œä»å†…å­˜å–å€¼â€æŒ‡ä»¤æœŸé—´ï¼ŒALUä¼šé—²ç½®ã€‚ æ‰€ä»¥ä¸€æ¬¡æ€§å¤„ç†å¤šæ¡æŒ‡ä»¤(å–æŒ‡ä»¤+è§£ç ) ä¼šæ›´å¥½,å¦‚æœå¤šæ¡æŒ‡ä»¤è¦ CPU çš„ä¸åŒéƒ¨åˆ†ï¼Œå°±å¤šæ¡åŒæ—¶æ‰§è¡Œã€‚ å€ŸåŠ©è¶…æ ‡é‡å¤„ç†å™¨SUPERCALAR PROCESSOR ä¸€æ¬¡æ€§å¤„ç†å¤šæ¡æŒ‡ä»¤ (ç±»ä¼¼å¤šçº¿ç¨‹)ã€‚ä¸ºå‡ºç°é¢‘ç‡å¾ˆé«˜çš„æŒ‡ä»¤åŠ å¤šå‡ ä¸ªç›¸åŒçš„ç”µè·¯ï¼ŒALU æ‰§è¡Œã€‚ ç›®å‰è¯´è¿‡çš„æ–¹æ³•ï¼Œéƒ½æ˜¯ä¼˜åŒ–1ä¸ªæŒ‡ä»¤æµçš„ååé‡ã€‚ å¦ä¸€ä¸ªæ€è·¯æ˜¯è¿è¡Œå¤šä¸ªæŒ‡ä»¤æµï¼Œä¹Ÿå°±æ˜¯å¤šæ ¸å¤„ç†å™¨ã€‚ CPU èŠ¯ç‰‡å†…çš„å¤šä¸ªç‹¬ç«‹å¤„ç†å•å…ƒ (å¤šæ ¸) å°±åƒæœ‰å¤šä¸ª CPU èƒ½å¤Ÿåˆä½œè¿ç®— (å…±ç”¨ä¸€ä¸ª CPU çš„ç¼“å­˜)ã€‚å¦‚æœå¤šæ ¸è¿˜ä¸å¤Ÿå°±ç”¨å¤šä¸ª cpuã€‚ é›†æˆç”µè·¯ åœ¨å¤§æ¦‚50å¹´é‡Œï¼Œè½¯ä»¶ä»çº¸å¸¦æ‰“å­”å˜æˆé¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨é›†æˆå¼€å‘ç¯å¢ƒä¸­å†™ç¨‹åºï¼Œæ²¡æœ‰ç¡¬ä»¶çš„å¤§å¹…åº¦è¿›æ­¥ï¼Œè½¯ä»¶ä¸å¯èƒ½åšåˆ°è¿™äº›ã€‚ å›åˆ°ç”µå­è®¡ç®—æœºçš„è¯ç”Ÿå¹´ä»£ï¼š ç”µå­ç®¡å¤§çº¦ 1940å¹´ä»£~1960å¹´ä»£ä¸­æœŸè¿™æ®µæ—¶é—´é‡Œ ï¼Œ è®¡ç®—æœºéƒ½ç”±ç‹¬ç«‹éƒ¨ä»¶ç»„æˆã€‚ è¿™äº›ç‹¬ç«‹éƒ¨ä»¶å«â€åˆ†ç«‹å…ƒä»¶â€ ï¼Œç„¶åä¸åŒç»„ä»¶å†ç”¨çº¿è¿åœ¨ä¸€èµ· ä¸¾ä¾‹, ENIAC æœ‰1ä¸‡7åƒå¤šä¸ªçœŸç©ºç®¡, 7ä¸‡ä¸ªç”µé˜» , 1ä¸‡ä¸ªç”µå®¹å™¨, 7åƒä¸ªäºŒæç®¡, 5ç™¾ä¸‡ä¸ªæ‰‹å·¥ç„Šç‚¹ å¦‚æœæƒ³æå‡æ€§èƒ½ï¼Œå°±è¦åŠ æ›´å¤šéƒ¨ä»¶ã€‚ è¿™å¯¼è‡´æ›´å¤šç”µçº¿ï¼Œæ›´å¤æ‚ï¼›è¿™ä¸ªé—®é¢˜å« â€œæ•°å­—æš´æ”¿â€™â€™ã€‚ æ™¶ä½“ç®¡ 1950 å¹´ä»£ä¸­æœŸï¼Œæ™¶ä½“ç®¡å¼€å§‹å•†ä¸šåŒ–ï¼ˆå¸‚åœºä¸Šä¹°å¾—åˆ°ï¼‰ \\N å¼€å§‹ç”¨åœ¨è®¡ç®—æœºé‡Œã€‚æ™¶ä½“ç®¡æ¯”ç”µå­ç®¡ æ›´å°æ›´å¿«æ›´å¯é ã€‚ä½†æ™¶ä½“ç®¡ä¾ç„¶æ˜¯åˆ†ç«‹å…ƒä»¶ 1959å¹´ï¼ŒIBM æŠŠ 709 è®¡ç®—æœºä»åŸæœ¬çš„ç”µå­ç®¡å…¨éƒ¨æ¢æˆæ™¶ä½“ç®¡ã€‚è¯ç”Ÿçš„æ–°æœºå™¨ IBM 7090 é€Ÿåº¦å¿« 6 å€ï¼Œä»·æ ¼åªæœ‰ä¸€åŠï¼ æ™¶ä½“ç®¡æ ‡å¿—ç€â€è®¡ç®— 2.0 æ—¶ä»£â€çš„åˆ°æ¥ã€‚ è™½ç„¶æ›´å¿«æ›´å° ä½†æ™¶ä½“ç®¡çš„å‡ºç° è¿˜æ˜¯æ²¡æœ‰è§£å†³â€æ•°å­—æš´æ”¿â€çš„é—®é¢˜ã€‚ æœ‰å‡ åä¸‡ä¸ªç‹¬ç«‹å…ƒä»¶çš„è®¡ç®—æœºä¸ä½†éš¾è®¾è®¡ï¼Œè€Œä¸”éš¾ç”Ÿäº§ã€‚ é›†æˆç”µè·¯ 1960 å¹´ä»£ï¼Œè¿™ä¸ªé—®é¢˜çš„ä¸¥é‡æ€§è¾¾åˆ°é¡¶ç‚¹ ç”µè„‘å†…éƒ¨å¸¸å¸¸ä¸€å¤§å †ç”µçº¿ç¼ ç»•åœ¨ä¸€èµ·ã€‚çœ‹çœ‹è¿™ä¸ª 1965 å¹´ PDP-8 è®¡ç®—æœºçš„å†…éƒ¨ï¼š è§£å†³åŠæ³•æ˜¯å°è£…å¤æ‚æ€§ï¼šä¹Ÿå°±æ˜¯ç”µè·¯çš„æ‰€æœ‰ç»„ä»¶éƒ½é›†æˆåœ¨ä¸€èµ·ã€‚ ä¸å…¶åŠªåŠ›æŠŠå¤šä¸ªç‹¬ç«‹éƒ¨ä»¶ç”¨ç”µçº¿è¿èµ·æ¥ï¼Œæ‹¼è£…å‡ºè®¡ç®—æœºï¼Œè¿˜ä¸å¦‚ä¸“æ³¨äºæŠŠå¤šä¸ªç»„ä»¶åŒ…åœ¨ä¸€èµ·ï¼Œå˜æˆä¸€ä¸ªæ–°çš„ç‹¬ç«‹ç»„ä»¶ã€‚ è¿™å°±æ˜¯ **é›†æˆç”µè·¯ï¼ˆIntegrated Circuitï¼‰**çš„è¯ç”Ÿã€‚ å‡ ä¸ªæœˆåï¼Œåœ¨1959å¹´ Robert Noyce çš„ä»™ç«¥åŠå¯¼ä½“ ï¼Œè®©é›†æˆç”µè·¯å˜ä¸ºäº†ç°å®ã€‚Kilby ç”¨é”—æ¥åšé›†æˆç”µè·¯ï¼Œé”—å¾ˆç¨€å°‘è€Œä¸”ä¸ç¨³å®šã€‚ä»™ç«¥åŠå¯¼ä½“å…¬å¸ç”¨ç¡… \\N ç¡…çš„è•´è—é‡ä¸°å¯Œï¼Œå åœ°å£³å››åˆ†ä¹‹ä¸€ï¼Œä¹Ÿæ›´ç¨³å®šå¯é ã€‚æ‰€ä»¥ Noyce è¢«å…¬è®¤ä¸ºç°ä»£é›†æˆç”µè·¯ä¹‹çˆ¶ï¼Œä»–å¼€åˆ›äº†ç”µå­æ—¶ä»£ï¼Œåˆ›é€ äº†ç¡…è°·ï¼ˆä»™ç«¥å…¬å¸æ‰€åœ¨åœ°ï¼‰ èµ·åˆï¼Œä¸€ä¸ª IC åªæœ‰å‡ ä¸ªæ™¶ä½“ç®¡ã€‚ä¾‹å¦‚è¿™å—æ—©æœŸæ ·å“ï¼Œç”±è¥¿å±‹å…¬å¸åˆ¶é€ ï¼š å³ä½¿åªæœ‰å‡ ä¸ªå“ä½“ç®¡ä¹Ÿå¯ä»¥æŠŠç®€å•ç”µè·¯ï¼Œç¬¬ 3 é›†çš„é€»è¾‘é—¨ï¼Œèƒ½å°è£…æˆå•ç‹¬ç»„ä»¶ã€‚ ICå°±åƒç”µè„‘å·¥ç¨‹å¸ˆçš„ä¹é«˜ç§¯æœ¨ï¼Œå¯ä»¥ç»„åˆå‡ºæ— æ•°ç§è®¾è®¡ã€‚ å°åˆ·ç”µè·¯æ¿ PCB Printed Circuit Board ä¸ºäº†è§£å†³é›†æˆç”µè·¯ä»éœ€é€šè¿‡ç”µè·¯è¿æ¥åˆ¶é€ è®¡ç®—æœºçš„é—®é¢˜ï¼Œå·¥ç¨‹å¸ˆä»¬åˆ¶é€ äº†å°åˆ·ç”µè·¯æ¿PCBï¼ŒPCB å¯ä»¥å¤§è§„æ¨¡ç”Ÿäº§è€Œæ— éœ€ç„Šæ¥æˆ–ç”¨ä¸€å¤§å †çº¿ï¼Œå®ƒé€šè¿‡èš€åˆ»é‡‘å±çº¿çš„æ–¹å¼å°†é›¶ä»¶è¿æ¥åˆ°ä¸€èµ·ã€‚ æŠŠ PCB å’Œ IC ç»“åˆä½¿ç”¨ \\N å¯ä»¥å¤§å¹…å‡å°‘ç‹¬ç«‹ç»„ä»¶å’Œç”µçº¿ï¼Œä½†åšåˆ°ç›¸åŒçš„åŠŸèƒ½ã€‚ è€Œä¸”æ›´å°ï¼Œæ›´ä¾¿å®œï¼Œæ›´å¯é . ä¸‰èµ¢ï¼ è®¸å¤šæ—©æœŸ IC éƒ½æ˜¯æŠŠå¾ˆå°çš„åˆ†ç«‹å…ƒä»¶ \\N å°è£…æˆä¸€ä¸ªç‹¬ç«‹å•å…ƒï¼Œä¾‹å¦‚è¿™å— 1964 å¹´çš„IBMæ ·å“ï¼š å…‰åˆ» ä¸è¿‡ï¼Œå³ä½¿ç»„ä»¶å¾ˆå° , å¡5ä¸ªä»¥ä¸Šçš„æ™¶ä½“ç®¡è¿˜æ˜¯å¾ˆå›°éš¾ã€‚ä¸ºäº†å®ç°æ›´å¤æ‚çš„è®¾è®¡ï¼Œéœ€è¦å…¨æ–°çš„åˆ¶ä½œå·¥è‰º \\N â€œå…‰åˆ»â€ç™»åœºï¼ å…‰åˆ»ç®€å•è¯´å°±æ˜¯æŠŠå¤æ‚å›¾æ¡ˆå°åˆ°å¦‚åŠå¯¼ä½“ç­‰ææ–™ä¸Šï¼Œå¯ä»¥é€šè¿‡è¿™ç§æŠ€æœ¯å°†å¤æ‚é‡‘å±ç”µè·¯å°åœ¨åŠå¯¼ä½“ä¸Šé¢ä»¥é›†æˆä¸ªå¤šçš„å…ƒä»¶åˆ¶é€ å¤æ‚ç”µè·¯ã€‚ å…‰åˆ»æœºå…‰åˆ»ç”µè·¯çš„æµç¨‹ï¼š é¦–å…ˆæ˜¯ä¸€å—ç¡… (æ™¶åœ†)ï¼š ç¡…å¾ˆç‰¹åˆ«ã€‚å®ƒæœ‰æ—¶å¯¼ç”µï¼Œæœ‰æ—¶ä¸å¯¼ç”µã€‚æˆ‘ä»¬å¯ä»¥æ§åˆ¶åˆ©ç”¨å…¶ç‰¹æ€§æ§åˆ¶å¯¼ç”µæ—¶æœºã€‚ æˆ‘ä»¬å¯ä»¥ç”¨æ™¶åœ†åšåŸºç¡€ï¼ŒæŠŠå¤æ‚é‡‘å±ç”µè·¯æ”¾ä¸Šé¢ï¼Œé›†æˆæ‰€æœ‰ä¸œè¥¿ ã€‚ åœ¨ç¡…ç‰‡é¡¶éƒ¨åŠ ä¸€å±‚è–„è–„çš„æ°§åŒ–å±‚,ä½œä¸ºä¿æŠ¤å±‚ã€‚ åŠ ä¸€å±‚ç‰¹æ®ŠåŒ–å­¦å“ï¼Œå«â€å…‰åˆ»èƒ¶â€ã€‚ å…‰åˆ»èƒ¶è¢«å…‰ç…§å°„å ä¼šå˜å¾—å¯æº¶ã€‚å¯ä»¥ç”¨ä¸€ç§ç‰¹æ®ŠåŒ–å­¦è¯å‰‚æ´—æ‰ã€‚ æŠŠå…‰æ©è†œç›–åˆ°æ™¶åœ†ä¸Šï¼Œç”¨å¼ºå…‰ç…§å°„ã€‚æŒ¡ä½å…‰çš„åœ°æ–¹ï¼Œå…‰åˆ»èƒ¶ä¸ä¼šå˜åŒ–ã€‚å…‰ç…§åˆ°çš„åœ°æ–¹ï¼Œå…‰åˆ»èƒ¶ä¼šå‘ç”ŸåŒ–å­¦å˜åŒ–æ´—æ‰å®ƒä¹‹åï¼Œæš´éœ²å‡ºæ°§åŒ–å±‚ã€‚ ç”¨å¦ä¸€ç§åŒ–å­¦ç‰©è´¨Â·é€šå¸¸æ˜¯ä¸€ç§é…¸ï¼Œå¯ä»¥æ´—æ‰â€æ°§åŒ–å±‚â€éœ²å‡ºçš„éƒ¨åˆ†ï¼Œèš€åˆ»åˆ°ç¡…å±‚ã€‚ æ³¨æ„ï¼Œæ°§åŒ–å±‚è¢«å…‰åˆ»èƒ¶ä¿æŠ¤ä½äº†ã€‚ ä¸ºäº†æ¸…ç†å…‰åˆ»èƒ¶ï¼Œæˆ‘ä»¬ç”¨å¦ä¸€ç§åŒ–å­¦è¯å“æ´—æ‰å®ƒ ç°åœ¨ç¡…åˆéœ²å‡ºæ¥äº†ã€‚æˆ‘ä»¬æƒ³ä¿®æ”¹ç¡…éœ²å‡ºæ¥çš„åŒºåŸŸ ï¼Œè®©å®ƒå¯¼ç”µæ€§æ›´å¥½ã€‚ æ‰€ä»¥ç”¨ä¸€ç§åŒ–å­¦è¿‡ç¨‹æ¥æ”¹å˜å®ƒï¼Œå«â€æºæ‚â€ â€œæºæ‚â€é€šå¸¸ç”¨é«˜æ¸©æ°”ä½“æ¥åšï¼Œæ¯”å¦‚ç£·æ¸—é€è¿›æš´éœ²å‡ºçš„ç¡…ï¼Œæ”¹å˜ç”µå­¦æ€§è´¨ã€‚ ä½†æˆ‘ä»¬è¿˜éœ€è¦å‡ è½®å…‰åˆ»æ³• æ¥åšæ™¶ä½“ç®¡ã€‚ è¿‡ç¨‹åŸºæœ¬ä¸€æ ·ï¼Œå…ˆç›–æ°§åŒ–å±‚ï¼Œå†ç›–å…‰åˆ»èƒ¶ã€‚ç„¶åç”¨æ–°çš„å…‰æ©è†œï¼Œè¿™æ¬¡å›¾æ¡ˆä¸åŒã€‚ åœ¨æºæ‚åŒºåŸŸä¸Šæ–¹å¼€ä¸€ä¸ªç¼ºå£ï¼Œæ´—æ‰å…‰åˆ»èƒ¶ï¼Œç„¶åç”¨å¦ä¸€ç§æ°”ä½“æºæ‚æŠŠä¸€éƒ¨åˆ†ç¡…è½¬æˆå¦ä¸€ç§å½¢å¼ã€‚ ä¸ºäº†æ§åˆ¶æ·±åº¦ï¼Œæ—¶æœºå¾ˆé‡è¦æˆ‘ä»¬ä¸æƒ³è¶…è¿‡ä¹‹å‰çš„åŒºåŸŸã€‚ æœ€åä¸€æ­¥ï¼Œåœ¨æ°§åŒ–å±‚ä¸Šåšé€šé“è¿™æ ·å¯ä»¥ç”¨ç»†å°é‡‘å±å¯¼çº¿ï¼Œè¿æ¥ä¸åŒå“ä½“ç®¡ã€‚å†æ¬¡ç”¨å…‰åˆ»èƒ¶å’Œå…‰æ©è†œèš€åˆ»å²€å°é€šé“ã€‚ ç°åœ¨ç”¨æ–°çš„å¤„ç†æ–¹æ³• å«â€é‡‘å±åŒ–â€æ”¾ä¸€æ°‘é“é“çš„å…¨å±ï¼Œæ¯”å¦‚é“æˆ–é“œã€‚ ä½†æˆ‘ä»¬ä¸æƒ³ç”¨é‡‘å±ç›–ä½æ‰€æœ‰ä¸œè¥¿æˆ‘ä»¬æƒ³èš€åˆ»å‡ºå…·ä½“çš„ç”µè·¯ã€‚ æ‰€ä»¥åˆæ˜¯ç±»ä¼¼çš„æ­¥éª¤ï¼šç”¨å…‰åˆ»èƒ¶+å…‰æ©è†œï¼Œç„¶åæº¶æ‰æš´éœ²çš„å…‰åˆ»èƒ¶ï¼Œæš´éœ²çš„é‡‘å± æˆ‘ä»¬å¯ä»¥æŠŠå…‰æ©è†œèšç„¦åˆ°æå°çš„åŒºåŸŸï¼Œåˆ¶ä½œå‡ºéå¸¸ç²¾ç»†çš„ç»†èŠ‚ã€‚ ä¸€ç‰‡æ™¶åœ†å¯ä»¥åšå¾ˆå¤šICæ•´å—éƒ½åšå®Œåï¼Œå¯ä»¥åˆ‡å‰²ç„¶ååŒ…è¿›å¾®å‹èŠ¯ç‰‡ã€‚ å¾®å‹èŠ¯ç‰‡å°±æ˜¯åœ¨ç”µå­è®¾å¤‡ä¸­é‚£äº›å°é•¿æ–¹ä½“ ã€‚ è®°ä½ï¼ŒèŠ¯ç‰‡çš„æ ¸å¿ƒéƒ½æ˜¯ä¸€å°ç‰‡IC èŠ¯ç‰‡æ”¾å¤§ï¼š æ‘©å°”å®šå¾‹1965 å¹´ï¼Œæ‘©å°”çœ‹åˆ°äº†è¶‹åŠ¿ï¼šæ¯ä¸¤å¹´å·¦å³ï¼Œå¾—ç›Šäºææ–™å’Œåˆ¶é€ æŠ€æœ¯çš„å‘å±•ï¼ŒåŒæ ·å¤§å°çš„ç©ºé—´ï¼Œèƒ½å¡è¿›ä¸¤å€æ•°é‡çš„æ™¶ä½“ç®¡ã€‚è¿™å«æ‘©å°”å®šå¾‹ã€‚èŠ¯ç‰‡çš„ä»·æ ¼ä¹Ÿä¸æ–­ä¸‹é™ã€‚å³é›†æˆç”µè·¯ä¸Šå¯ä»¥å®¹çº³çš„æ™¶ä½“ç®¡æ•°ç›®åœ¨å¤§çº¦æ¯ç»è¿‡18ä¸ªæœˆåˆ°24ä¸ªæœˆä¾¿ä¼šå¢åŠ ä¸€å€ ä½†æ˜¯æ‘©å°”å®šå¾‹ç°åœ¨ä¹Ÿåœ¨æ¥è¿‘æé™ï¼Œè¿›ä¸€æ­¥åšå°ï¼Œä¼šé¢ä¸´ä¸¤ä¸ªé—®é¢˜ã€‚ ç”¨å…‰æ©è†œæŠŠå›¾æ¡ˆåŠ åˆ°æ™¶åœ†ä¸Šï¼Œå› ä¸ºå…‰çš„æ³¢é•¿ï¼Œç²¾åº¦å·²ç»è¾¾åˆ°æé™ã€‚ å½“æ™¶ä½“ç®¡éå¸¸å°ï¼Œç”µæä¹‹é—´å¯èƒ½åªè·ç¦»å‡ ä¸ªåŸå­ï¼Œç”µå­ä¼šè·³è¿‡é—´éš™ï¼Œå«é‡å­éš§é“è´¯ç©¿æ•ˆåº” æ§åˆ¶å•å…ƒï¼ˆControl Unit) : è´Ÿè´£ç¨‹åºçš„æµç¨‹ç®¡ç†ã€‚æ­£å¦‚å·¥å‚çš„ç‰©æµåˆ†é…éƒ¨é—¨ï¼Œæ§åˆ¶å•å…ƒæ˜¯æ•´ä¸ªCPUçš„æŒ‡æŒ¥æ§åˆ¶ä¸­å¿ƒï¼Œç”±æŒ‡ä»¤å¯„å­˜å™¨IR(Instruction Register)ã€æŒ‡ä»¤è¯‘ç å™¨ID(Instruction Decoder)å’Œæ“ä½œæ§åˆ¶å™¨OC(Operation Controller)ä¸‰ä¸ªéƒ¨ä»¶ç»„æˆï¼Œå¯¹åè°ƒæ•´ä¸ªç”µè„‘æœ‰åºå·¥ä½œæä¸ºé‡è¦ã€‚ æ§åˆ¶å•å…ƒå¯ä»¥ä½œä¸ºCPUçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥å®‰è£…äºCPUå¤–éƒ¨ã€‚"},{"title":"å®¹å™¨æ‚é¡¹","path":"/wiki/algorithm/å®¹å™¨æ‚é¡¹.html","content":"map å®¹å™¨çš„ç”¨æ³•map æ ¹æ® value æ’åºï¼šå€ŸåŠ©vectorå®ç° #include iostream#include map#include vector#include algorithm // è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼ŒæŒ‰ç…§å€¼ä»å°åˆ°å¤§æ’åºbool compareByValue(const std::pairint, int a, const std::pairint, int b) return (a.second b.second); // è¿™é‡Œå‡è®¾å€¼ä¸ºintç±»å‹ int main() std::mapint, int myMap; // æ·»åŠ å…ƒç´ åˆ°myMap myMap[1] = 50; myMap[2] = 30; myMap[3] = 70; myMap[4] = 90; // å°†myMapè½¬æ¢ä¸ºvector std::vectorstd::pairint, int vec(myMap.begin(), myMap.end()); // ä½¿ç”¨è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°å¯¹vecè¿›è¡Œæ’åº std::sort(vec.begin(), vec.end(), compareByValue); // è¾“å‡ºç»“æœ for (auto pair : vec) std::cout Key: pair.first , Value: pair.second std::endl; return 0; å»é‡ if(it.second!=num) s.erase(s.find(it.first),m[it.first]); stringé‡Œçš„å››ä¸ª find å‡½æ•° find_first_of()ï¼šæ­£å‘æŸ¥æ‰¾åœ¨åŸå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸æŒ‡å®šå­—ç¬¦ä¸²ï¼ˆæˆ–å­—ç¬¦ï¼‰ä¸­çš„æŸä¸ªå­—ç¬¦åŒ¹é…çš„å­—ç¬¦ï¼Œè¿”å›å®ƒçš„ä½ç½®ã€‚è‹¥æŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™è¿”å›nposã€‚ find_last_of()ï¼šé€†å‘æŸ¥æ‰¾åœ¨åŸå­—ç¬¦ä¸²ä¸­æœ€åä¸€ä¸ªä¸æŒ‡å®šå­—ç¬¦ä¸²ï¼ˆæˆ–å­—ç¬¦ï¼‰ä¸­çš„æŸä¸ªå­—ç¬¦åŒ¹é…çš„å­—ç¬¦ï¼Œè¿”å›å®ƒçš„ä½ç½®ã€‚è‹¥æŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™è¿”å›nposã€‚ find_first_not_of()ï¼šæ­£å‘æŸ¥æ‰¾åœ¨åŸå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªä¸æŒ‡å®šå­—ç¬¦ä¸²ï¼ˆæˆ–å­—ç¬¦ï¼‰ä¸­çš„ä»»ä¸€å­—ç¬¦éƒ½ä¸åŒ¹é…çš„å­—ç¬¦ï¼Œè¿”å›å®ƒçš„ä½ç½®ã€‚è‹¥æŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™è¿”å›nposã€‚ find_last_not_of()ï¼šæ­£å‘æŸ¥æ‰¾åœ¨åŸå­—ç¬¦ä¸²ä¸­æœ€åä¸€ä¸ªä¸æŒ‡å®šå­—ç¬¦ä¸²ï¼ˆæˆ–å­—ç¬¦ï¼‰ä¸­çš„ä»»ä¸€å­—ç¬¦éƒ½ä¸åŒ¹é…çš„å­—ç¬¦ï¼Œè¿”å›å®ƒçš„ä½ç½®ã€‚è‹¥æŸ¥æ‰¾å¤±è´¥ï¼Œåˆ™è¿”å›nposã€‚ æ™®é€šstirng.findå‡½æ•°æŸ¥æ‰¾è¿”å›ç¬¬ä¸€ä¸ªçš„ä½ç½®ï¼ŒæŸ¥ä¸åˆ°è¿”å›nposï¼ˆ-1ï¼‰ã€‚ class cmp1 public: bool operator()(const int a, const int b) const return (a b); // æ ¹æ®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆkeyï¼‰è¿›è¡Œé™åºæ’åˆ— ;class cmp2 //è¿™ä¸ªæ— æ³•åŒ¹é…m2ï¼Œmapçš„ç¬¬ä¸‰ä¸ªæ’åºå‚æ•°æ˜¯é’ˆå¯¹keyå€¼çš„ã€‚\tpublic: bool operator()(const pairint,int a, const pairint,int b) const return (a.first b.first); // æ ¹æ®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆkeyï¼‰è¿›è¡Œé™åºæ’åˆ— ;int main(void)\tmapint,int,cmp1 m2; 3039. è¿›è¡Œæ“ä½œä½¿å­—ç¬¦ä¸²ä¸ºç©º class Solution public: static bool m_cmp(const pairchar,int p1,const pairchar,int p2) return p1.secondp2.second; string lastNonEmptyString(string s) string sp = s;\tmapchar,int m;\tfor(int i=0;is.size();i++) m[sp[i]]++; vectorpairchar,int v(m.begin(),m.end());\tsort(v.begin(),v.end(),m_cmp);\tint num = v.front().second;\tmapint,char m2; for(vectorpairchar,int ::iterator it = v.begin();it!=v.end();it++) if(it-second==num) m2.insert(make_pair(sp.find_last_of(it-first),it-first)); else break; string s2 = ; for(auto it :m2) s2=s2+it.second; return s2; ; æ›´ç®€å•çš„ç‰ˆæœ¬ class Solution public: string lastNonEmptyString(string s) int cnt[26],last[26];\tfor (int i=0;is.size();i++) int t = s[i]-a; cnt[t]++; last[t] = i; //æœ€å¤§é¢‘ç‡æ•°\tint mx = -1;\tvectorint v;\tfor(int i=0;i26;i++) if(mxcnt[i]) mx = cnt[i]; //æœ€å¤§é¢‘ç‡æ•°çš„å­—ç¬¦ï¼Œå°†å…¶æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ä¼ åˆ°v\tfor(int i=0;i26;i++) if(cnt[i]==mx) v.push_back(last[i]); //å¯¹ä½ç½®æ’åº\tsort(v.begin(),v.end(),less()); string t(v.size(),0);\t//ä¾æ¬¡è¯»å…¥å­—ç¬¦\tfor (int i = 0; i v.size(); i++) t[i] = s[v[i]]; return t; ; ä½œè€…ï¼šçµèŒ¶å±±è‰¾åºœé“¾æ¥ï¼šhttps://leetcode.cn/problems/apply-operations-to-make-string-empty/solutions/2643734/tong-ji-zi-mu-chu-xian-ci-shu-he-zui-hou-0r5g/ è®°å¿†åŒ–æœç´¢ä¾‹é¢˜ AcWing 901. æ»‘é›ª #includeiostream#includecstringusing namespace std;const int N = 310;int h[N][N];int f[N][N];//è®°å¿†åŒ–æ•°ç»„int dis[4][2] = 0,1,1,0,0,-1,-1,0;int m,n;int dp(int x,int y)\tint v = f[x][y];\tif(v!=-1) return v; //æ­¤å¤„ä¸ºè®°å¿†åŒ–çš„å…³é”®ã€‚\tv = 1; //åˆ«å¿˜äº†èµ‹åˆå€¼ for(int i=0;i4;i++) int tx = x+dis[i][0]; int ty = y+dis[i][1]; if(tx=0txnty=0tymh[tx][ty]h[x][y]) v = max(v,dp(tx,ty)+1); //æ­¤å¤„æ˜¯è®°å½•çš„å‘èµ·ç‚¹ return v; int main(void)\tcinnm;\tfor(int i=0;in;i++) for(int j=0;jm;j++) scanf(%d,h[i][j]); memset(f,-1,sizeof f);\tint res = -1;\tfor(int i=0;in;i++) for(int j=0;jm;j++) res = max(res,dp(i,j));\tcoutres;\treturn 0; Problem: 100220. ç›¸åŒåˆ†æ•°çš„æœ€å¤§æ“ä½œæ•°ç›® II â€‹ æš´åŠ›dfsï¼š #includeiostream#includevector#includeclimits#includequeueusing namespace std;int mx = -1;dequeint f1(dequeint a) //delete front2\tint sum = a[0] + a[1];\ta.pop_front();\ta.pop_front();\ta.push_front(sum);\treturn a;dequeint f2(dequeint a)//delete back2\tint n = a.size()-1;\tint sum = a[n]+a[n-1];\ta.pop_back();\ta.pop_back();\ta.push_front(sum);\treturn a;\tdequeint f3(dequeint a)//delete front1 + back1\tint sum = a.front() + a.back();\ta.pop_front();\ta.pop_back();\ta.push_front(sum);\treturn a; //è¿”å›æ•°ç»„ï¼ŒåŒæ—¶æ·»åŠ æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå­˜å‚¨æœ¬æ¬¡å¤„ç†åçš„sumvoid dfs(dequeint a,int step,int sum)\tif(a.size()=1) if(mxstep)\tmx = step; return ; dequeint b ;//ä¿è¯åŸæ•°ç»„æ•°æ®å¹²å‡€ã€‚ b = f1(a); //æŒ‰ç¬¬ä¸€ç§æ–¹å¼å¤„ç†\tint t_sum = b[0];\tb.pop_front();//æ”¶åˆ°é˜Ÿå¤´æ€»å’Œå…ƒç´ ï¼Œå»æ‰dequeé‡Œå¤šä½™çš„é˜Ÿå¤´å…ƒç´ ã€‚ if(t_sum!=sum)//ä¸ç›¸ç­‰ï¼Œä¸ç¬¦åˆæ¡ä»¶ if(mxstep) mx = step; else dfs(b,step+1,sum); //ç›¸ç­‰ï¼Œç¬¦åˆæ¡ä»¶ï¼Œç»§ç»­ b = f2(a);//æŒ‰ç¬¬äºŒç§æ–¹å¼å¤„ç†\tt_sum = b[0];\tb.pop_front();\tif(t_sum!=sum) if(mxstep) mx = step; else dfs(b,step+1,sum); b = f3(a);//æŒ‰ç¬¬ä¸‰ç§æ–¹å¼å¤„ç†\tt_sum = b[0];\tb.pop_front();\tif(t_sum!=sum) if(mxstep) mx = step; else dfs(b,step+1,sum); int main(void)\tvectorint v = 3,2,6,1,4;\tdequeintd v.begin(),v.end();\tdfs(d,0,f1(d)[0]);\tdfs(d,0,f2(d)[0]);\tdfs(d,0,f3(d)[0]);\tcoutmx; 520 549 ä¸ªé€šè¿‡çš„æµ‹è¯•ç”¨ä¾‹ å€ŸåŠ©dequeçš„æš´åŠ›dfs #includeiostream#includevector#includecstringusing namespace std;const int N = 2010;//f(l,r) lä¸rä¸­é—´çš„æœ€å¤§å€¼int f[N][N];int dfs(const vectorint nums,int l,int r,int target)\tif(l=r) return 1;\tint t = f[l][r];\tif(t!=-1) return t;\tint res = 1; if(nums[l]+nums[l+1]==target) res = max(res,dfs(nums,l+2,r,target)+1); if(nums[r]+nums[r-1]==target) res = max(res,dfs(nums,l,r-2,target)+1); if(nums[l]+nums[r]==target) res = max(res,dfs(nums,l+1,r-1,target)+1); t = res;\treturn res;\tint main(void)\tvectorint nums = 2,2,3,2,4,2,3,3,1,3;\tmemset(f,-1,sizeof f);\tint l = 0,r = nums.size()-1; int res = max(max(dfs(nums,l+2,r,nums[l]+nums[l+1]),dfs(nums,l,r-2,nums[r]+nums[r-1])) ,dfs(nums,l+1,r-1,nums[l]+nums[r]));\tcoutres; AC äºŒåˆ†#includestdio.hint left_bound_k(int* nums,int numsSize,int target)\tint left = 0 ,right = numsSize;\twhile(leftright) int mid = left+(right-left)/2; if(nums[mid]==target) right = mid; else if(nums[mid]target) right = mid; else if(nums[mid]target) left = mid+1; return nums[left]==target?left:-1; int right_bound_k(int* nums,int numsSize,int target)\tint left = 0 ,right = numsSize;\twhile(leftright) int mid = left+(right-left)/2; if(nums[mid]==target) left = mid+1; else if(nums[mid]target) right = mid; else if(nums[mid]target) left = mid+1; if (left - 1 0 || left - 1 = nums.size()) return -1;\treturn nums[left - 1] == target ? (left - 1) : -1;int left_bound_b(int* nums,int numsSize,int target)\tint left = 0 ,right = numsSize-1;\twhile(left=right) int mid = left+(right-left)/2; if(nums[mid]==target) right = mid-1; else if(nums[mid]target) left = mid+1; else if(nums[mid]target) right= mid-1; if(left==numsSize) return -1;\treturn left;int right_bound_b(int* nums,int numsSize,int target)\tint left = 0 ,right = numsSize-1;\twhile(left=right) int mid = left+(right-left)/2; if(nums[mid]==target) left = mid+1; else if(nums[mid]target) right = mid-1; else if(nums[mid]target) left = mid+1; if(left-10||left-1=nums.size()) return -1;\treturn ums[left-1]!=target?left-1:-1;int common_merge(int* nums,int numsSize,int target) int left = 0; int right = numsSize - 1; // æ³¨æ„ while(left = right) int mid = left + (right - left) / 2; if(nums[mid] == target) return mid; else if (nums[mid] target) left = mid + 1; // æ³¨æ„ else if (nums[mid] target) right = mid - 1; // æ³¨æ„ return -1; è®¡ç®— mid æ—¶éœ€è¦é˜²æ­¢æº¢å‡ºï¼Œä»£ç ä¸­ left + (right - left) / 2 å°±å’Œ (left + right) / 2 çš„ç»“æœç›¸åŒï¼Œä½†æ˜¯æœ‰æ•ˆé˜²æ­¢äº† left å’Œ right å¤ªå¤§ï¼Œç›´æ¥ç›¸åŠ å¯¼è‡´æº¢å‡ºçš„æƒ…å†µã€‚ ä¸ºä»€ä¹ˆ while å¾ªç¯çš„æ¡ä»¶ä¸­æ˜¯ ï¼Œè€Œä¸æ˜¯ while(lr) : åˆå§‹åŒ–rçš„å€¼ r = nums.size ç›¸å½“äºå·¦é—­å³å¼€ï¼Œ[left,right) ï¼Œright ä¸èƒ½å–åˆ°åˆå§‹å€¼ while(l=r) : åˆå§‹åŒ–rçš„å€¼r = nums.size -1 ç›¸å½“äºå·¦é—­å³é—­ï¼Œ[left,right] ,right å¯ä»¥å–åˆ°åˆå§‹çš„æœ€å¤§å€¼ã€‚ åœæ­¢æœç´¢çš„åŒºé—´ï¼Ÿ æ‰¾åˆ°äº†ç›®æ ‡å€¼çš„æ—¶å€™å¯ä»¥ç»ˆæ­¢ï¼š if(nums[mid] == target) return mid; ä½†å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±éœ€è¦ while å¾ªç¯ç»ˆæ­¢ï¼Œç„¶åè¿”å› -1ã€‚é‚£ while å¾ªç¯ä»€ä¹ˆæ—¶å€™åº”è¯¥ç»ˆæ­¢ï¼Ÿ æœç´¢åŒºé—´ä¸ºç©ºçš„æ—¶å€™åº”è¯¥ç»ˆæ­¢ï¼Œæ„å‘³ç€ä½ æ²¡å¾—æ‰¾äº†ï¼Œå°±ç­‰äºæ²¡æ‰¾åˆ°å˜›ã€‚ while(left = right) çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ left == right + 1ï¼Œå†™æˆåŒºé—´çš„å½¢å¼å°±æ˜¯ [right + 1, right]ï¼Œæˆ–è€…å¸¦ä¸ªå…·ä½“çš„æ•°å­—è¿›å» [3, 2]ï¼Œå¯è§è¿™æ—¶å€™åŒºé—´ä¸ºç©ºã€‚æ‰€ä»¥è¿™æ—¶å€™ while å¾ªç¯ç»ˆæ­¢æ˜¯æ­£ç¡®çš„ï¼Œç›´æ¥è¿”å› -1 å³å¯ã€‚ while(left right) çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ left == rightï¼Œå†™æˆåŒºé—´çš„å½¢å¼å°±æ˜¯ [right, right]ï¼Œæˆ–è€…å¸¦ä¸ªå…·ä½“çš„æ•°å­—è¿›å» [2, 2]ï¼Œè¿™æ—¶å€™åŒºé—´éç©ºï¼Œè¿˜æœ‰ä¸€ä¸ªæ•° 2ï¼Œä½†æ­¤æ—¶ while å¾ªç¯ç»ˆæ­¢äº†ã€‚ä¹Ÿå°±æ˜¯è¯´åŒºé—´ [2, 2] è¢«æ¼æ‰äº†ï¼Œç´¢å¼• 2 æ²¡æœ‰è¢«æœç´¢ï¼Œå¦‚æœè¿™æ—¶å€™ç›´æ¥è¿”å› -1 å°±æ˜¯é”™è¯¯çš„ã€‚ å½“ç„¶ï¼Œå¦‚æœä½ éè¦ç”¨ while(left right) ä¹Ÿå¯ä»¥ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å‡ºé”™çš„åŸå› ï¼Œå°±æ‰“ä¸ªè¡¥ä¸å¥½äº†ï¼š //...while(left right) // ...return nums[left] == target ? left : -1;//åˆ¤æ–­æ¼æ‰çš„é‚£ä¸ªæ•°æ˜¯ä¸æ˜¯ç¬¦åˆç›®æ ‡å€¼ ä¸ºä»€ä¹ˆ left = mid + 1ï¼Œright = mid - 1ï¼Ÿæˆ‘çœ‹æœ‰çš„ä»£ç æ˜¯ right = mid æˆ–è€… left = midï¼Œæ²¡æœ‰è¿™äº›åŠ åŠ å‡å‡ï¼Œåˆ°åº•æ€ä¹ˆå›äº‹ï¼Œæ€ä¹ˆåˆ¤æ–­ï¼Ÿ ç­”ï¼šè¿™ä¹Ÿæ˜¯äºŒåˆ†æŸ¥æ‰¾çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä¸è¿‡åªè¦ä½ èƒ½ç†è§£å‰é¢çš„å†…å®¹ï¼Œå°±èƒ½å¤Ÿå¾ˆå®¹æ˜“åˆ¤æ–­ã€‚ åˆšæ‰æ˜ç¡®äº†ã€Œæœç´¢åŒºé—´ã€è¿™ä¸ªæ¦‚å¿µï¼š å¦‚æœæœç´¢åŒºé—´æ˜¯ä¸¤ç«¯éƒ½é—­çš„ï¼Œå³ [left, right]ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬å‘ç°ç´¢å¼• mid ä¸æ˜¯è¦æ‰¾çš„ target æ—¶ï¼Œä¸‹ä¸€æ­¥å½“ç„¶å»æœç´¢åŒºé—´ [left, mid-1] æˆ–è€…åŒºé—´ [mid+1, right]ï¼Œ å› ä¸º mid å·²ç»æœç´¢è¿‡ï¼Œåº”è¯¥ä»æœç´¢åŒºé—´ä¸­å»é™¤ã€‚ å¦‚æœæœç´¢åŒºé—´å·¦é—­å³å¼€ï¼Œå³[left, right]ï¼Œåˆ™å¯ä»¥æœç´¢åŒºé—´[mid+1,right) å’Œ [left,mid) ã€‚å› ä¸ºå³è¾¹ç•Œä¸ä¼šè¢«æœç´¢åˆ°ã€‚ å…³æ³¨ç‚¹åœ¨äº mid ä½œä¸ºå·¦å³è¾¹ç•Œæ—¶çš„å˜åŒ–ï¼Œå³æ˜¯å¦æœ‰å¿…è¦+1 -1 ã€‚ ä¸ºä»€ä¹ˆæ±‚å³ä¾§è¾¹ç•Œæœ€åè¿”å› left - 1 è€Œä¸åƒå·¦ä¾§è¾¹ç•Œçš„å‡½æ•°ï¼Œè¿”å› leftï¼Ÿè€Œä¸”æˆ‘è§‰å¾—è¿™é‡Œæ—¢ç„¶æ˜¯æœç´¢å³ä¾§è¾¹ç•Œï¼Œåº”è¯¥è¿”å› right æ‰å¯¹ã€‚ ç­”ï¼šé¦–å…ˆï¼Œwhile å¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ left == rightï¼Œæ‰€ä»¥ left å’Œ right æ˜¯ä¸€æ ·çš„ã€‚ è‡³äº left æ˜¯å¦è¦å‡1ï¼Œå…³é”®åœ¨äºif (nums[mid] == target) è¯­å¥ï¼Œ // å¢å¤§ leftï¼Œé”å®šå³ä¾§è¾¹ç•Œif (nums[mid] == target) left = mid + 1; // è¿™æ ·æƒ³: mid = left - 1 å› ä¸ºæˆ‘ä»¬å¯¹ left çš„æ›´æ–°å¿…é¡»æ˜¯ left mid + 1ï¼Œå°±æ˜¯è¯´ while å¾ªç¯ç»“æŸæ—¶ï¼Œnums[left] ä¸€å®šä¸ç­‰äº target äº†ï¼Œè€Œ nums[left-1] å¯èƒ½æ˜¯ targetã€‚ è‡³äºä¸ºä»€ä¹ˆ left çš„æ›´æ–°å¿…é¡»æ˜¯ left mid + 1ï¼Œå½“ç„¶æ˜¯ä¸ºäº†æŠŠ nums[mid] æ’é™¤å‡ºæœç´¢åŒºé—´ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿° å·¦é—­å³é—­çš„æ—¶å€™ï¼šå¾ªç¯ç»“æŸæ¡ä»¶ç›¸æ¯”å·¦é—­å³å¼€çš„left == right å˜æˆäº† left == right +1 ï¼Œå³left-1 == rightã€‚ æ±‚å³ä¾§è¾¹ç•Œçš„å‡½æ•°æ¡ä»¶é‡Œï¼Œä»ç„¶æ˜¯left = mid + 1 ã€‚æ‰€ä»¥ç»“æœ left - 1 æ±‚å·¦ä¾§è¾¹ç•Œçš„å‡½æ•°æ¡ä»¶ï¼Œæ˜¯right = mid - 1 ï¼Œå°† right è½¬æ¢ä¸º left ï¼Œå³ï¼š left - 1 = mid -1 ï¼Œå³left = mid ã€‚ æ‰€ä»¥ç»“æœæ˜¯left ç”±ä¸Šå¯çŸ¥ï¼Œç»“æœå–leftè¿˜æ˜¯rightï¼Œå…¶å®æ ¹æ®å¾ªç¯æ¡ä»¶ç»“æŸçš„åˆ¤æ–­æ¥çœ‹ï¼Œä¸¤è€…å¯ä»¥äº’ç›¸æ¢ç®—ï¼Œæ˜¯ä¸€æ ·çš„ã€‚ å–leftåæ˜¯å¦è¦ - 1ï¼Œè¦çœ‹nums[mid]==targetåˆ¤æ–­è¯­å¥çš„å†…å®¹ï¼Œæ˜¯ left è¿˜æ˜¯ rightã€‚ï¼ˆå®é™…ä¸Šå°±æ˜¯çœ‹å·¦é—­å³å¼€è¿˜æ˜¯å·¦é—­å³é—­ï¼Œä¹Ÿå°±æ˜¯ è¿˜æ˜¯ = ã€‚"},{"title":"2022è“æ¡¥çœŸé¢˜é¢˜è§£","path":"/wiki/algorithm/2022è“æ¡¥çœŸé¢˜é¢˜è§£.html","content":"ç¬¬ä¸€é¢˜ï¼šè¿›åˆ¶è½¬æ¢ 2022 ä¹è¿›åˆ¶è½¬åè¿›åˆ¶ ä¸º 1475 ä¸è§£é‡Šç¬¬äºŒé¢˜ï¼šç”¨æ‰‹æ•° ï¼Œ4ä¸ªã€‚ è¯¥é¢˜æœ‰æ­§ä¹‰ï¼Œ012X ä¸ç®—é¡ºå­æ—¥æœŸå°±ç¦»è°± ç¬¬ä¸‰é¢˜ï¼šåˆ·é¢˜ç»Ÿè®¡è€ƒè¯•ä»£ç ï¼š #includeiostreamusing namespace std;long long a,b,n;int total;bool flag=false;int main(void) cinabn;\twhile(1) if(!flag) for(int i=1;i=5;i++) total++; //å¤©æ•° n=n-a; if(n=0) flag=true; break; if(!flag) for(int i=1;i=2;i++) total++; n=n-b; if(n=0) flag=true; break; if(flag) break; couttotal; å¾—äº†80åˆ†ï¼Œå‰©ä½™æ—¶é—´è¶…é™ã€‚ æ­£è§£ï¼š #includeiostreamusing namespace std;int main(void)\tlong long a,b,n;\tcinabn;\tlong day_7 = a*5+b*2;\tlong sumday = (n /day_7)*7;\tn=n%day_7; if(na*5) sumday += 5; n-=a*5; if(nb) sumday+=2; else sumday+=1; else sumday += n/a; if(n%a0) sumday+=1; coutsumday; æ€»ç»“ï¼š for å¾ªç¯å¤šäº†ä¼šè¶…é™ã€‚ è¿™é¢˜è§£å¼€å§‹éƒ½æ˜¯intç±»å‹ï¼Œæˆ‘è§‰å¾— æ•°æ®èŒƒå›´æ˜¯ 1~1081 ï¼Œæ€ä¹ˆä¹Ÿä¸ä¼šè¶…é™ã€‚ ç»“æœè¿˜å°±æ˜¯è¶…é™äº†ã€‚ä¹˜æ³•å¾ˆå¯æ€•ï¼Œlong longæœ‰å¥‡æ•ˆã€‚ ç¬¬å››é¢˜ ä¿®å‰ªçŒæœ¨æšä¸¾ #includebits/stdc++.husing namespace std;long long tree[10100][10100]=0; //è®°å½•æ¯ä¸€å¤©è½¨è¿¹ long long maxnum[10100]=0; // è®°å½•æ¯ä¸€ä½ çš„ æœ€å¤§å€¼ int tail=0; //è®°å½• çˆ±ä¸½ä¸ åä½ç½® int N; //å¤šå°‘æ£µ bool flag=true;bool findx(int locate) //æ˜¯å¦é‡å¤ï¼Ÿ locate = yå€¼ bool ok;\tfor(int i=1;ilocate;i++) ok=1; for(int k=1;k=N;k++) if(tree[locate][k]!=tree[i][k]) ok=0; if(ok==1) return true; return false;int main() int y=1;\tcinN;\twhile(1) if(flag) tail++; //flag å†³å®š æ­£å‘è¿›è¡Œ åå‘è¿›è¡Œ else tail--; //ä¸€è½®ä¸€å¤© if(tail==N) flag=false; //åˆ°å¤´äº† if(tail==0) flag=true; tail=2; //å›æ¥äº† for(int i=1;i=N;i++) // è¿™ä¸€è½®ï¼Œæ¯æ£µæ ‘ é•¿1cm tree[y][i]=tree[y-1][i]+1; if(tree[y][i]maxnum[i]) maxnum[i]=tree[y][i];\t//æœ€å¤§å€¼ è®°å½• tree[y][tail]=0; //è®©ç ä½ ä¸º0 if(y1findx(y)) break; //å¯»æ‰¾é‡å¤ç‚¹ ï¼ˆé‡å¤åç»“æŸå¾ªç¯ï¼‰ else y++; //ä¸‹ä¸€å¤©ï¼ for(int i=1;i=N;i++) coutmaxnum[i]; if(i!=N) coutendl; return 0; è¿™ä¸ªä»£ç è¾“å‡ºçš„æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚ä½†æ˜¯è¿è¡Œè¶…é™ï¼Œå¾ˆä¼¤ã€‚ å¦‚æœæŠŠlong long æ”¹æˆ int ï¼Œèƒ½å¾—è¿™é“é¢˜ä¸€åŠçš„åˆ†ï¼ é¢å‘è§„å¾‹: #includeiostream#includevectorusing namespace std;int main(void)\tvectorlong long v;\tbool flag;\tlong long n;cinn;\tif(n%2==0) flag =true; v.push_back(n); //å¥‡æ•°å¶æ•° else flag = false; v.push_back(n-1); int mid_num = *v.begin();\tif(flag) v.push_back(mid_num); //å¶æ•°å°±å¤šåŠ ä¸€ä¸ª for(int i =1;i=(n-1)/2;i++) v.push_back(mid_num+2*i); //å€’ç€è¾“å‡ºä¸€é æ­£ç€è¾“å‡ºä¸€é\tfor(vectorlong long::reverse_iterator rit = v.rbegin();rit!=v.rend();rit++) cout*ritendl; for(vectorlong long::iterator it = v.begin();it!=v.end();it++) if(*it!=mid_num) cout*itendl; é¢å‘è§„å¾‹2.0 #includeiostream#includevectorusing namespace std;vectorint getmaxdata(int N)\tvectorint ret(N + 1, 0);\tfor(int i = 1; i = N; i++) ret[i] = 2 * (N - i); for(int i = 0; i N / 2; i++) ret[N - i] = ret[i + 1]; return ret;int main() int N;\tcin N;\tvectorint ans = getmaxdata(N);\tfor(int i = 1; i = N; i++) cout ans[i]; if(i != N) cout endl; return 0; æ€»ç»“ï¼šä¸è¦ç€æ€¥å†™é¢˜ï¼Œåœ¨çº¸ä¸Šè·Ÿç€ç¤ºä¾‹æ¨¡æ‹Ÿä¸€ä¸‹è¿‡ç¨‹ï¼Œå¯èƒ½ä¼šæœ‰æ•°å­¦è§„å¾‹ã€‚å‘ç°è§„å¾‹åè§£é¢˜ä¼šå‡ºä¹æ„æ–™çš„ç®€å•ã€‚ ç¬¬äº”é¢˜ Xè¿›åˆ¶æ•° ä½æ•°å°‘çš„æ•°é«˜ä½è¡¥0ï¼Œç„¶ååœ¨è¿›åˆ¶ä¸Š è·Ÿéšä½æ•°å¤šçš„æ•° æ¯”å¦‚ Aæ˜¯ 123 Bæ˜¯ 4567 A â†’ 0123 ï¼Œè¿›åˆ¶ä¸Šå’Œ4567ä¸€æ · æ¯ä¸€ä½ä¸Šçš„æ•°éƒ½æ˜¯å…¶æ‰€æœ‰ä½ä½æ•°çš„ç´¯è®¡ã€‚ æ¯”å¦‚ 123 çš„ Xè¿›åˆ¶ ï¼Œç¬¬ä¸€ä½ åè¿›åˆ¶ ï¼Œç¬¬äºŒä½å…«è¿›åˆ¶ï¼Œç¬¬ä¸‰ä½äº”è¿›åˆ¶ åˆ™ 123 1 * 8 * 5+ 2 * 5 + 3 å¦‚æœ è¿›åˆ¶åˆ†åˆ«ä¸º a b c ï¼Œåˆ™ 123 1 * b * c + 2 * c + 3 ä»£ç ï¼š ç¬¬å…­é¢˜ ç»Ÿè®¡å­çŸ©é˜µDFS éª—åˆ† #includebits/stdc++.husing namespace std;int mmap[510][1010];int K,N,M;long long total;void dfs(int tx,int ty,int h,int w) if(tx+h=N||ty+w=M) return ; int num=0; for(int k=0;k=h;k++) for(int j=0;j=w;j++) num+=mmap[tx+k][ty+j]; if(num=K) total++; dfs(tx,ty,h+1,w); dfs(tx,ty,h,w+1); else return;int main(void) cinNMK; for(int x=0;xN;x++) //èµ‹å€¼ for(int y=0;yM;y++) cinmmap[x][y]; for(int x=0;xN;x++) for(int y=0;yM;y++) dfs(x,y,0,0); couttotal; é’ˆå¯¹åˆ—çš„ä¸€ç»´å‰ç¼€å’Œ + é’ˆå¯¹è¡Œçš„æ»‘åŠ¨çª—å£ #includeiostreamusing namespace std;int num[550][550];int main(void)\tlong long int total=0;\tint N,M; int K;\tcinNMK;\tint temp;\tfor(int i=1;i=N;i++) for(int j=1;j=M;j++) cintemp; num[i][j] = temp; num[i][j]+=num[i-1][j]; //çºµå‘æ‹‰ä¼¸ for(int i=1; i=N; i++) //çºµå‘æ¯ä¸ªç‚¹ä½œä¸ºåˆå§‹ç‚¹ for(int\tj=i;j=N; j++) //æ¨ªå‘æ‹‰ä¼¸ for(int left=1,right=1,sum=0; right=M; right++) //å³æ‰© sum+=num[j][right]-num[i-1][right]; //åŠ å³æ‰©å€¼ while (sumK) //å·¦ç¼© sum-=num[j][left]-num[i-1][left]; //å‡å·¦ç¼©å€¼ left++; total+=right-left+1; //æ¯æ¬¡éƒ½å³æ‰©ï¼Œç›´åˆ°æ»¡è¶³Kæ¡ä»¶ã€‚ä¸æ»¡è¶³å³ä¸º0 couttotal; /*3 4 101 2 3 45 6 7 89 10 11 12*/ æ€»ç»“ï¼š å­¦åˆ°äº†å‰ç¼€å’Œï¼ˆä¹Ÿå°±æ˜¯æ‰“è¡¨ï¼‰ æ•°æ®ç±»å‹é€‰æ‹©ï¼šä»Šå¤©æˆ‘å†™äº†ä¸‰é“é¢˜ï¼Œéƒ½å› ä¸º int , short , long long int è¿™ç§ç±»å‹çš„å·®åˆ«ï¼Œä¸¢äº†åˆ†ã€‚å¼•ä»¥ä¸ºæˆ’ã€‚å¤ªå¤§äº†å®¹æ˜“çˆ†ï¼Œå¤ªå°äº†æœ‰äº›å¤§æ•°è¾“å‡ºä¸å‡ºæ¥ã€‚åˆ›æ•°ç»„ä¹Ÿæ˜¯è¿™æ ·ï¼Œé•¿åº¦å’Œæ•°æ®å¤§å°éƒ½è¦è€ƒè™‘ã€‚ ç¬¬ä¸ƒé¢˜å…¸å‹DP ä¸¤ä¸ªæ€è·¯ è€ƒè™‘2xNå’Œç§¯æœ¨çš„æ‹¼æ¥æ–¹å¼ï¼Œæœ‰çŸ©å½¢ å’Œ çŸ©å½¢åå¤šä¸€ä¸ªæ–¹å—å„¿ ä¸¤ç§æ‹¼æ¥æƒ…å†µå‡ºç°ã€‚ ä¸Šæ–¹å—å’Œä¸‹æ–¹å—åˆå¹¶çš„æ–¹å¼ï¼š #includestdio.h#define mod 1000000007long int a[10000001][2];int main() int n; a[1][0]=1,a[2][0]=2,a[1][1]=2,a[2][1]=4; scanf(%d,n); if(n==1)printf(1); else if(n==2)printf(2); else for(int i=3;i=n;i++) a[i][0]=(a[i-2][0]+a[i-2][1]+a[i-1][0])%mod; a[i][1]=(a[i-1][0]*2+a[i-1][1])%mod; printf(%ld,a[n][0]%mod); return 0; ä¸Šä¸‹æ–¹å—åˆ†æ˜çš„æ–¹å¼ class Solution public: int numTilings(int n) long long dp[1005][3]=0; int mod=1e9+7; dp[0][0]=1;dp[0][1]=1;dp[0][2]=1; dp[1][0]=1;dp[1][1]=0;dp[1][2]=0; for(int i=2;i=n;i++) dp[i][0]=(dp[i-1][0]+dp[i-1][1]+dp[i-1][2]+dp[i-2][0])%mod; dp[i][1]=(dp[i-2][0]+dp[i-1][2])%mod; dp[i][2]=(dp[i-2][0]+dp[i-1][1])%mod; return dp[n][0]; ; æ•°å­¦è§„å¾‹æ‰¾ Fn class Solution const int MOD = 1e9 + 7;public: int numTilings(int n) if (n == 1) return 1; long f[n + 1]; f[0] = f[1] = 1; f[2] = 2; for (int i = 3; i = n; ++i) f[i] = (f[i - 1] * 2 + f[i - 3]) % MOD; return f[n]; ; ç¬¬å…«é¢˜ æ‰«é›·æš´åŠ›() #includebits/stdc++.h #includequeueusing namespace std;int n,m;int total;class nodepublic:\tint x,y;\tint r;\tbool flag; //å¼•çˆ†æ ‡å¿— node(int xx,int yy,int rr,int ff):x(xx),y(yy),r(rr),flag(ff);\t;vectornode q1; //é›· queuenode q2; //æ’é›·int main(void) cinnm; for(int i=1;i=n;i++) int x,y,r;cinxyr; q1.push_back(node(x,y,r,0)); for(int i=1;i=m;i++) int x,y,r;cinxyr; q2.push(node(x,y,r,0)); while(!q2.empty()) int tx=q2.front().x; int ty=q2.front().y; int tr=q2.front().r; for(int i=0;in;i++) if(tr=sqrt((tx-q1[i].x)*(tx-q1[i].x)+(((ty-q1[i].y))*((ty-q1[i].y))))) q1[i].flag=true; total++; q2.pop(); for(int i=0;in;i++) if(q1[i].flag) for(int k=i;kn;k++) int tx=q1[k].x; int ty=q1[k].y; if(!q1[k].flagq1[i].r=sqrt((tx-q1[i].x)*(tx-q1[i].x)+((ty-q1[i].y)*(ty-q1[i].y)))) q1[k].flag=true; total++; couttotal;"},{"title":"æœç´¢","path":"/wiki/algorithm/æœç´¢.html","content":"å‰è¨€ï¼š1.æœ€çŸ­è·¯é—®é¢˜å’ŒDPçš„å…³ç³»ï¼š æœ€çŸ­è·¯é—®é¢˜åŒ…å«DPé—®é¢˜ï¼ŒDPé—®é¢˜å¯ä»¥çœ‹åšæœ€çŸ­è·¯é—®é¢˜çš„ç‰¹æ®Šæƒ…å†µã€‚ DPæ˜¯æ²¡æœ‰ç¯çš„æœ€çŸ­è·¯é—®é¢˜ã€‚ 2.ä¸æ˜¯æ‰€æœ‰æœ€çŸ­è·¯é—®é¢˜éƒ½èƒ½ç”¨bfsæ¥åšã€‚ åªæœ‰æ‰€æœ‰è¾¹æƒé‡ä¸€æ ·çš„æ—¶å€™æ‰èƒ½ç”¨bfsåšã€‚ 3.å‡ ç§å‰ªæ æœ€ä¼˜æ€§å‰ªæï¼šå½“å‰è·¯å¾„ä¸€å®šå¯ä»¥åˆ¤æ–­å‡ºä¸å¦‚æœ€ä¼˜è§£ å¯è¡Œæ€§å‰ªæï¼šå½“å‰è·¯å¾„ä¸€å®šä¸åˆæ³• æœç´¢DFSå…¨æ’åˆ— æœ´ç´ ç‰ˆ:ç®€å•é€’å½’ #includeiostreamusing namespace std ;const int N = 10;int n;int path[N];bool flag[N];void dfs(int u) if(u==n) for(int i=0;in;i++) printf(%d,path[i]); if(i!=n-1) printf( ); else printf( ); for(int i = 1;i=n;i++) if(!flag[i]) //æ ‡å¿—æ•°ç»„æ„å‘³ç€åœ¨dfsè¿‡ç¨‹ä¸­ä¸ä¼šå‘ç”Ÿæ•°æ®é‡å¤ã€‚ path[u] = i; flag[i] = true; dfs(u+1); //path[u] = 0; flag[i] = false; int main(void) cinn; dfs(0); //ä¸‹æ ‡ä»0å¼€å§‹ï¼ˆä¸æ•°æ®ä»1å¼€å§‹ åŒºåˆ†å¼€ï¼‰ ä½è¿ç®—ç‰ˆï¼šåªæ˜¯å°†æœ´ç´ ç‰ˆçš„æ ‡å¿—æ•°ç»„ ä»¥æ•´æ•°ä½è¿ç®—çš„æ–¹å¼è¡¨ç¤ºäº†ã€‚ #include iostreamusing namespace std;const int N = 10;int n;int path[N];void dfs(int u, int state) if (u == n) for (int i = 0; i n; i ++ ) printf(%d , path[i]); puts(); return; for (int i = 0; i n; i ++ ) if (!(state i 1)) //æŸ¥è¯¢ç¬¬iä½æ˜¯ä¸æ˜¯0 path[u] = i + 1; dfs(u + 1, state + (1 i)); int main() scanf(%d, n); dfs(0, 0); return 0; stateå­˜çš„æ˜¯å½“å‰iä½çš„æ˜¯å¦è¢«å¡«äº†çš„çŠ¶æ€ï¼Œä½†æ˜¯stateæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œæ‰€ä»¥ç”¨stateç¬¬iä½æ˜¯ä¸æ˜¯é›¶å­˜ç¬¬iä½çš„çŠ¶æ€ï¼ŒæŸ¥è¯¢ç¬¬iä½æ˜¯ä¸æ˜¯é›¶å°±æ˜¯ç”¨!(state i 1) æŠŠå…·ä½“çš„å€¼åŠ åˆ°pathä¸­å»äº†ä¹‹åï¼ŒæŠŠä¸‹ä¸€ä¸ªå€¼é€’å½’åˆ°ä¸‹ä¸€ä¸ªdfså¾ªç¯ä¸­ï¼Œè¿™æ—¶å€™æŠŠå½“å‰iå·¦ç§»ä¸€ä½åŠ åˆ°stateä¸­å°±è¡¨ç¤ºè¿™ä¸€ä½å·²ç»è¢«å ç”¨äº†ã€‚ nçš‡å æŠŠä¸æ”¾çš‡åçœ‹æˆ0ï¼Œ æ”¾çš‡åçœ‹æˆ1ï¼Œæ‰€æœ‰çš„æƒ…å†µå°±æˆäº†ä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯æ¬¡éƒ½æ˜¯å‘å·¦ï¼ˆ0ï¼‰éå†ï¼Œåˆ°äº†ç»ˆç‚¹å†å›æº¯åˆ°èƒ½å‘å³ï¼ˆ1ï¼‰éå†çš„èŠ‚ç‚¹å¼€å§‹å‘å³éå†ï¼Œæ˜¯ä¸ªäºŒå‰æ ‘çš„å…ˆåºéå†ç®—æ³•ã€‚ â€”â€” acwing-user : Hsezr è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œnçš‡åéœ€è¦è§„é¿ä¸‰ç§æƒ…å†µï¼šæ¨ªçº¿ï¼Œå¯¹è§’çº¿ï¼Œåå¯¹è§’çº¿ã€‚ å¯ä»¥å¼€è¾Ÿä¸‰ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«å­˜å‚¨å½“å‰ä¸‹æ ‡çŠ¶æ€ï¼Œæ˜¯å¦å·²ç»å­˜åœ¨çš‡åäº†ã€‚ æ¨ªçº¿å¥½è¯´ï¼Œå¯¹è§’çº¿å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ colæ˜¯Columnï¼ˆåˆ—ï¼‰çš„ç¼©å†™ï¼Œdgæ˜¯diagonalï¼ˆå¯¹è§’ï¼‰çš„ç¼©å†™ï¼Œåå¯¹è§’çº¿ä¸º udg è®¾ udg çš„åæ ‡ç³»æ–¹ç¨‹ä¸ºyx+bï¼Œåˆ™by-xã€‚ æ›¿æ¢åå³ bu-iï¼Œé˜²æ­¢å‡ºç°è´Ÿæ•°ï¼Œåˆ™åŠ ä¸Šnï¼Œåˆ™æœ‰bu+n-iï¼ˆå…¶å®bn+i-uä¹Ÿå¯ï¼Œç›®çš„æ˜¯ä¸€ä¸ªå¯¹è§’çº¿èƒ½å•ç‹¬æ˜ å°„ï¼‰ è®¾ dg çš„æ–¹ç¨‹ä¸ºy-x+b,by+x,æ›¿æ¢å bi+u æ³¨æ„ï¼šå›¾ä¸­è¡Œä¸º n , åˆ—ä¸ºcolã€‚ ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®è¡Œä¸º u ï¼Œåˆ—ä¸º i å…¨æ’åˆ—åšæ³• #includeiostreamusing namespace std ;const int N = 20;char graph[N][N];bool col[N],dg[N],udg[N]; //æ ‡å¿—æ•°ç»„ï¼Œåˆ†åˆ«å¯¹åº”è¡Œã€å¯¹è§’çº¿å’Œåå¯¹è§’çº¿int n;void dfs(int u) //u : åˆ°å¤šå°‘è¡Œäº†ï¼Ÿ if(u==n) for(int i=0;in;i++) coutgraph[i]endl; coutendl; return ; for(int i=0;in;i++) //i ä»…ä»…æ˜¯å¤šå°‘åˆ— if(!col[i]!dg[u+i]!udg[u+n-i]) //y=x+b : b=y-x : b = u-i (è§„é¿è´Ÿæ•°+n) | y=-x+b :b = x+y : b=u+i col[i]=dg[u+i]=udg[u+n-i] = true; graph[u][i] = Q; dfs(u+1); graph[u][i] = .; col[i]=dg[u+i]=udg[u+n-i] = false; int main(void) cinn; for(int i=0;in;i++) for(int j=0;jn;j++) graph[i][j] = .; dfs(0); æ³¨æ„ï¼šå¼€å§‹æˆ‘åˆå§‹åŒ–N10 ï¼Œæœ‰äº›æ ·ä¾‹æ˜¯è¿‡ä¸äº†çš„ã€‚å¯¹è§’çº¿é•¿åº¦çº¦1.414*10ï¼ˆæ ¹å·2ï¼‰ï¼Œç»è¿‡æµ‹è¯•ï¼Œåœ¨1n9 çš„æƒ…å†µä¸‹ï¼Œ N16 ä¼šWAæ‰n9 ï¼ŒN17 å°±èƒ½ AC ã€‚ å¤æ‚åº¦ï¼šn*n! æœ´ç´ æš´åŠ›åšæ³• #includeiostreamusing namespace std ;const int N = 20;int n;char g[N][N];bool row[N],col[N],dg[N],udg[N]; //ç›¸æ¯”å…¨æ’åˆ—å¤šäº†ä¸€ä¸ªè¡Œvoid dfs(int x,int y, int s) if( sn ) return; if( y==n ) y=0; x++; if(x==n) if(s==n) for(int i=0;in;i++) puts(g[i]); puts(); return ; g[x][y] = .; dfs(x, y + 1, s); if (!row[x] !col[y] !dg[x + y] !udg[x - y + n]) row[x] = col[y] = dg[x + y] = udg[x - y + n] = true; g[x][y] = Q; dfs(x, y + 1, s + 1); g[x][y] = .; row[x] = col[y] = dg[x + y] = udg[x - y + n] = false; int main(void) cinn; dfs(0,0,0); // å‚æ•°1,2åˆ†åˆ«ä¸ºxï¼Œyã€‚ å‚æ•°3ä¸º å½“å‰æœ‰å‡ ä¸ªçš‡å å¤æ‚åº¦ï¼š2^(n^2) ä¸ºä»€ä¹ˆç¬¬ä¸€ç§å†™æ³•ä¸ç”¨è€ƒè™‘è¡Œï¼Œè€Œç¬¬äºŒç§åˆ™è¦è€ƒè™‘è¡Œï¼Ÿ ç¬¬ä¸€ç§æ˜¯æˆ‘ä»¬å·²ç»çŸ¥é“ä¸€è¡Œåªèƒ½æ”¾ä¸€ä¸ªçš‡åæ‰è¿™ä¹ˆå†™ï¼Œç¬¬äºŒç§æ˜¯æ›´æœ´ç´ çš„æƒ³æ³•ä¸€ä¸ªæ ¼å­ä¸€ä¸ªæ ¼å­å¾€ä¸‹èµ°ã€‚ è¿™é‡Œä½ è¿˜å¯ä»¥å‚ç…§ï¼Œç¬¬ä¸€ç§å†™æ³•çš„çŠ¶æ€å‚æ•°æ˜¯if : u==n ï¼Œç¬¬äºŒç§å†™æ³•åˆ™æ˜¯ if( sn ) return;if( y==n ) y=0; x++; if(x==n) if(s==n) ... ç®€å•æ¥è¯´ï¼š å…¨æ’åˆ—å†™æ³•æ˜¯ä¸€è¡Œä¸€è¡Œå¾€ä¸‹èµ°ï¼Œä¸€æ—¦æ”¾ç½®çš‡åå°±ä¸‹ä¸€è¡Œã€‚ æœ´ç´ å†™æ³•æ˜¯ä¸€æ ¼ä¸€æ ¼ç§»åŠ¨ç€èµ°ã€‚ å‰è€…ä¸éœ€è¦è€ƒè™‘åŒä¸€è¡Œé‡Œæ˜¯å¦å‘ç”Ÿé‡å¤çš‡åï¼Œåè€…åˆ™éœ€è¦è€ƒè™‘ã€‚ å…¨çƒå˜æš–ä½ æœ‰ä¸€å¼ æŸæµ·åŸŸ NxN åƒç´ çš„ç…§ç‰‡ï¼Œâ€.â€è¡¨ç¤ºæµ·æ´‹ã€â€#â€è¡¨ç¤ºé™†åœ°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š â€¦â€¦. .##â€¦. .##â€¦. â€¦.##. ..####. â€¦###. â€¦â€¦. å…¶ä¸­â€ä¸Šä¸‹å·¦å³â€å››ä¸ªæ–¹å‘ä¸Šè¿åœ¨ä¸€èµ·çš„ä¸€ç‰‡é™†åœ°ç»„æˆä¸€åº§å²›å±¿ã€‚ä¾‹å¦‚ä¸Šå›¾å°±æœ‰ 2 åº§å²›å±¿ã€‚ ç”±äºå…¨çƒå˜æš–å¯¼è‡´äº†æµ·é¢ä¸Šå‡ï¼Œç§‘å­¦å®¶é¢„æµ‹æœªæ¥å‡ åå¹´ï¼Œå²›å±¿è¾¹ç¼˜ä¸€ä¸ªåƒç´ çš„èŒƒå›´ä¼šè¢«æµ·æ°´æ·¹æ²¡ã€‚å…·ä½“æ¥è¯´å¦‚æœä¸€å—é™†åœ°åƒç´ ä¸æµ·æ´‹ç›¸é‚»(ä¸Šä¸‹å·¦å³å››ä¸ªç›¸é‚»åƒç´ ä¸­æœ‰æµ·æ´‹)ï¼Œå®ƒå°±ä¼šè¢«æ·¹æ²¡ã€‚ ä¾‹å¦‚ä¸Šå›¾ä¸­çš„æµ·åŸŸæœªæ¥ä¼šå˜æˆå¦‚ä¸‹æ ·å­ï¼š â€¦â€¦. â€¦â€¦. â€¦â€¦. â€¦â€¦. â€¦.#.. â€¦â€¦. â€¦â€¦. è¯·ä½ è®¡ç®—ï¼šä¾ç…§ç§‘å­¦å®¶çš„é¢„æµ‹ï¼Œç…§ç‰‡ä¸­æœ‰å¤šå°‘å²›å±¿ä¼šè¢«å®Œå…¨æ·¹æ²¡ã€‚ è¾“å…¥æè¿° ç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° N* (1â‰¤Nâ‰¤1000)ã€‚ ä»¥ä¸‹ N è¡Œ N åˆ—ä»£è¡¨ä¸€å¼ æµ·åŸŸç…§ç‰‡ã€‚ ç…§ç‰‡ä¿è¯ç¬¬ 1 è¡Œã€ç¬¬ 1 åˆ—ã€ç¬¬ N è¡Œã€ç¬¬ N åˆ—çš„åƒç´ éƒ½æ˜¯æµ·æ´‹ã€‚ã€ è¾“å‡ºä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚ #includeiostreamusing namespace std;const int N = 1010;int n;bool flag;int res;bool vis[N][N];char m[N][N];int h[4][2] = 0,1,1,0,0,-1,-1,0;void dfs(int x,int y) vis[x][y]= true; if(m[x][y]==.) return ; bool temp = true; for(int i=0;i4;i++) int tx = x+h[i][0] , ty = y+h[i][1]; if(m[tx][ty]==.) temp = false; if(!vis[tx][ty]) dfs(tx,ty); if(temp) flag = true; int main(void) scanf(%d,n); for(int i=0;in;i++) for(int j=0;jn;j++) cinm[i][j]; for(int i=0;in;i++) for(int j=0;jn;j++) if(!vis[i][j]m[i][j]==#) flag = false; dfs(i,j); if(!flag) res++; coutres; BFSèµ°è¿·å®« æ™®é€šç‰ˆæœ¬ï¼š #include cstring#include iostream#include algorithm#include queueusing namespace std;typedef pairint, int PII;const int N = 110;int n, m;int g[N][N], d[N][N];int bfs() queuePII q; memset(d, -1, sizeof d); d[0][0] = 0; q.push(0, 0); int dx[4] = -1, 0, 1, 0, dy[4] = 0, 1, 0, -1; while (q.size()) auto t = q.front(); q.pop(); for (int i = 0; i 4; i ++ ) int x = t.first + dx[i], y = t.second + dy[i]; if (x = 0 x n y = 0 y m g[x][y] == 0 d[x][y] == -1) d[x][y] = d[t.first][t.second] + 1; q.push(x, y); return d[n - 1][m - 1];int main() cin n m; for (int i = 0; i n; i ++ ) for (int j = 0; j m; j ++ ) cin g[i][j]; cout bfs() endl; return 0; æ‰‹æ“é˜Ÿåˆ—çš„æœ´ç´ ç‰ˆæœ¬ //æœ´ç´ ç‰ˆæœ¬#includeiostream#includecstringusing namespace std ;const int N = 110;typedef pairint,int PII;int g[N][N];int d[N][N];int n,m;//æ‰‹æ“é˜Ÿåˆ—queuePII q[N*N];int bfs() int hh=0,tt=0; memset(d,-1,sizeof(d)); q[0]=0,0; d[0][0] = 0; int dir[4][2] = 0,1,1,0,-1,0,0,-1; while(hh=tt) auto t = q[hh++]; for(int i=0;i4;i++) int tx = t.first +dir[i][0],ty = t.second+dir[i][1]; if(tx=0txnty=0tymg[tx][ty]==0d[tx][ty]==-1) q[++tt] = tx,ty; d[tx][ty] = d[t.first][t.second]+1; return d[n-1][m-1];int main(void) cinnm; for(int i=0;in;i++) for(int j=0;jm;j++) scanf(%d,g[i][j]); coutbfs(); return 0; å…«æ•°ç é—®é¢˜ è¿™é‡Œæœç´¢éœ€è¦å¤„ç†ä¸¤ä¸ªç‚¹ï¼š 1.çŠ¶æ€è¡¨ç¤ºã€‚ â€”â€” queueé˜Ÿåˆ— 2.çŠ¶æ€ä¹‹é—´çš„è·ç¦»å¦‚ä½•è®°å½•ã€‚ â€”â€” distæ•°ç»„ ç­”æ¡ˆï¼š 1.å°†äºŒç»´ç½‘æ ¼é™ç»´æˆä¸€ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºï¼Œå¦‚ä¸Šé¢1~8çš„ç¤ºä¾‹ï¼Œå¯ä»¥ç”¨å­—ç¬¦ä¸²â€œ123x46758â€ æ¥è¡¨ç¤ºã€‚ å³queue 2.ç”¨C++é‡Œçš„å“ˆå¸Œè¡¨STL ï¼š unordered_mapstring,int æœ€åä¸€ä¸ªé—®é¢˜ï¼šçŠ¶æ€è½¬ç§» â‘ å¤åŸçŠ¶æ€ï¼šå°†ä¸€ç»´å­—ç¬¦ä¸²è¿˜åŸæˆäºŒç»´ï¼ˆè‡³å°‘å…ˆä»è„‘å­é‡Œï¼‰ â‘¡æ›´æ–°çŠ¶æ€ï¼šæšä¸¾ç©ºæ ¼ä¸Šä¸‹å·¦å³ç§»åŠ¨åçš„çŠ¶æ€ã€‚ â‘¢å­˜å…¥é˜Ÿåˆ—ï¼šç§»åŠ¨åæŠŠäºŒç»´ç»“æœæ¢å¤æˆå­—ç¬¦ä¸²ï¼Œå­˜å…¥bfsé˜Ÿåˆ—ã€‚ #includeiostream#includequeue#includealgorithm#includeunordered_map#includestringusing namespace std ;#define NUM 3queuestring q;unordered_mapstring,int d; //dist int bfs(string state) string end = 12345678x; //é¢„å®šç»“æœ äº† q.push(state); d[state] = 0; int direct[4][2] = 0,1,1,0,0,-1,-1,0; while(q.size()) //é˜Ÿåˆ—æ“ä½œ string str = q.front(); q.pop(); //åˆ¤æ–­æ˜¯å¦ç»“æŸ if(str == end) return d[str]; //æšä¸¾å‰çš„åˆå§‹åŒ– int distance = d[str]; int key = str.find(x); int x = key/NUM, y = key%NUM; //æ›´æ–°æ•°æ® for(int i=0;i4;i++) int tx = x + direct[i][0], ty = y + direct[i][1]; if(tx=0txNUMty=0tyNUM) swap(str[key],str[tx*NUM+ty]);//äº¤æ¢å®Œæˆï¼Œæ›´æ–°çŠ¶æ€ if(!d[str]) d[str] = distance +1; q.push(str); swap(str[key],str[tx*NUM+ty]);//æ›´æ–°å®Œæˆï¼Œå¤åŸçŠ¶æ€ return -1; //æšä¸¾å®Œæˆï¼Œæ²¡æœ‰æ‰¾åˆ°ç»“æœï¼Œè¿”å›-1ã€‚int main(void) string start; for(int i=0;i9;i++) char s[2]; cins; start += *s; coutbfs(start); return 0; è¿·å®«é—®é¢˜æè¿° è¿™å¤©, å°æ˜åœ¨ç©è¿·å®«æ¸¸æˆã€‚ è¿·å®«ä¸ºä¸€ä¸ª n x n çš„ç½‘æ ¼å›¾, å°æ˜å¯ä»¥åœ¨æ ¼å­ä¸­ç§»åŠ¨, å·¦ä¸Šè§’ä¸º (1,1)(1,1), å³ ä¸‹è§’ (n, n)(n,n) ä¸ºç»ˆç‚¹ã€‚è¿·å®«ä¸­é™¤äº†å¯ä»¥å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ç§»åŠ¨ä¸€æ ¼ä»¥å¤–, è¿˜æœ‰ m ä¸ªåŒå‘ä¼ é€é—¨å¯ä»¥ä½¿ç”¨, ä¼ é€é—¨å¯ä»¥è¿æ¥ä¸¤ä¸ªä»»æ„æ ¼å­ã€‚ å‡å¦‚å°æ˜å¤„åœ¨æ ¼å­(x1,y1), åŒæ—¶æœ‰ä¸€ä¸ªä¼ é€é—¨è¿æ¥äº†æ ¼å­ (x1,y1) å’Œ (x2,y2), é‚£ä¹ˆå°æ˜æ—¢å¯ä»¥èŠ±è´¹ 1 çš„æ­¥æ•°å‘ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘ä¹‹ä¸€èµ°ä¸€æ ¼ (ä¸èƒ½ è¶Šè¿‡è¾¹ç•Œ), ä¹Ÿå¯ä»¥èŠ±è´¹ 1 çš„æ­¥æ•°é€šè¿‡ä¼ é€é—¨èµ°åˆ°æ ¼å­ (x2,y2) å»ã€‚ è€Œå¯¹äºåŒä¸€ä¸ªè¿·å®«, å°æ˜æ¯æ¬¡è¿›å…¥çš„åˆå§‹æ ¼å­æ˜¯åœ¨è¿™n*Ã—n ä¸ªæ ¼å­ä¸­å‡åŒ€éš æœºçš„ (å½“ç„¶è¿æ°”å¥½å¯ä»¥ç›´æ¥éšæœºåˆ°ç»ˆç‚¹), ä»–æƒ³çŸ¥é“ä»åˆå§‹æ ¼å­èµ°åˆ°ç»ˆç‚¹çš„æœ€çŸ­ æ­¥æ•°çš„æœŸæœ›å€¼æ˜¯å¤šå°‘ã€‚ è¾“å…¥æ ¼å¼ è¾“å…¥å…± 1+m1+m è¡Œ, ç¬¬ä¸€è¡Œä¸ºä¸¤ä¸ªæ­£æ•´æ•° n, mn,m ã€‚ åé¢ mm è¡Œ, æ¯è¡Œå››ä¸ªæ­£æ•´æ•° x1,y1,x2,y2 è¡¨ç¤ºç¬¬ ii ä¸ªä¼ é€é—¨è¿æ¥çš„ä¸¤ä¸ªæ ¼å­åæ ‡ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºå…±ä¸€è¡Œ, ä¸€ä¸ªæµ®ç‚¹æ•°è¡¨ç¤ºç­”æ¡ˆ (è¯·ä¿ç•™ä¸¤ä½å°æ•°)ã€‚ #include iostream#includedequeusing namespace std;const int N = 25;int a[N];int b[N];int vis[N][N];int n;int dis[4][2] = 0,1,1,0,0,-1,-1,0;dequeint d;bool dfs(int x,int y) if(x==n-1y==n-1) for(int i=0;in;i++) if(a[i]||b[i]) return false; return true; for(int i=0;i4;i++) int tx = x+dis[i][0],ty = y+dis[i][1]; if(tx=0ty=0txntyn!vis[tx][ty](a[ty])(b[tx])) a[ty]--;b[tx]--; vis[tx][ty]=1; d.push_back(tx*n+ty); if(dfs(tx,ty)) return true; a[ty]++;b[tx]++; vis[tx][ty]=0; d.pop_back(); else continue; return false;int main() cinn; for(int i=0;in;i++) cina[i]; for(int i=0;in;i++) cinb[i]; d.push_back(0); vis[0][0]=1; a[0]--;b[0]--; if(dfs(0,0)) for(auto it = d.begin();it!=d.end();it++) cout*it ; return 0;"},{"title":"å“ˆå¸Œè¡¨","path":"/wiki/algorithm/å“ˆå¸Œè¡¨.html","content":"å“ˆå¸Œè¡¨å®šä¹‰å“ˆå¸Œè¡¨(Hash table)ï¼š æ ¹æ®å…³é”®ç å€¼(Key value)è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åšæ•£åˆ—å‡½æ•°ï¼Œä½ ä¹Ÿå¯ä»¥å«å“ˆå¸Œå‡½æ•°ã€‚å­˜æ”¾è®°å½•çš„æ•°ç»„å«åšæ•£åˆ—è¡¨ã€‚ ç‰¹ç‚¹ï¼š å“ˆå¸Œè¡¨æ˜¯ä¸€ç§æ•°æ®ç»“æ„ å“ˆå¸Œè¡¨è¡¨ç¤ºäº†å…³é”®ç å€¼å’Œè®°å½•çš„æ˜ å°„å…³ç³» å“ˆå¸Œè¡¨å¯ä»¥åŠ å¿«æŸ¥æ‰¾é€Ÿåº¦ ä»»æ„å“ˆå¸Œè¡¨ï¼Œéƒ½æ»¡è¶³æœ‰å“ˆå¸Œå‡½æ•°h(key)ï¼Œä»£å…¥ä»»æ„keyå€¼éƒ½å¯ä»¥è·å–åŒ…å«è¯¥keyå€¼çš„è®°å½•åœ¨è¡¨ä¸­çš„åœ°å€ é€šä¿—è®²ï¼Œå“ˆå¸Œè¡¨æ˜¯ä¸€ç§è¡¨ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ ¹æ®ç»™å®šçš„keyå€¼è®¡ç®—å‡ºç›®æ ‡ä½ç½®ã€‚ åœ¨å·¥ç¨‹ä¸­è¿™ä¸€è¡¨ç»“æ„å®ç°é€šå¸¸é‡‡ç”¨æ•°ç»„ã€‚ ä¸æ™®é€šçš„åˆ—è¡¨ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œæ™®é€šåˆ—è¡¨ä»…èƒ½é€šè¿‡ä¸‹æ ‡æ¥è·å–ç›®æ ‡ä½ç½®çš„å€¼ï¼Œè€Œå“ˆå¸Œè¡¨å¯ä»¥æ ¹æ®ç»™å®šçš„keyè®¡ç®—å¾—åˆ°ç›®æ ‡ä½ç½®çš„å€¼ã€‚ å¤æ‚åº¦ï¼š åœ¨åˆ—è¡¨æŸ¥æ‰¾ä¸­ï¼Œä½¿ç”¨æœ€å¹¿æ³›çš„äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œå¤æ‚åº¦ä¸ºO(log2n)ï¼Œä½†å…¶å§‹ç»ˆåªèƒ½ç”¨äºæœ‰åºåˆ—è¡¨ã€‚æ™®é€šæ— åºåˆ—è¡¨åªèƒ½é‡‡ç”¨éå†æŸ¥æ‰¾ï¼Œå¤æ‚åº¦ä¸ºO(n)ã€‚ è€Œæ‹¥æœ‰è¾ƒä¸ºç†æƒ³çš„å“ˆå¸Œå‡½æ•°å®ç°çš„å“ˆå¸Œè¡¨ï¼Œå¯¹å…¶ä»»æ„å…ƒç´ çš„æŸ¥æ‰¾é€Ÿåº¦å§‹ç»ˆä¸ºå¸¸æ•°çº§ï¼Œå³O(1)ã€‚ ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š å“ˆå¸Œå‡½æ•°ï¼š å°†å“ˆå¸Œè¡¨ä¸­å…ƒç´ çš„å…³é”®é”®å€¼æ˜ å°„ä¸ºå…ƒç´ å­˜å‚¨ä½ç½®çš„å‡½æ•°ã€‚ ä»¥ç”¨ y âˆˆ (0~10^5) çš„å®šä¹‰åŸŸ é€šè¿‡å“ˆå¸Œè¡¨ è¡¨ç¤ºå€¼åŸŸä¸º x âˆˆ (-10^9 ~ 10^9) çš„é›†åˆä¸ºä¾‹ï¼š è®¾ x ä¸ºå€¼åŸŸä¸­çš„æŸä¸ªæ•°ï¼Œ æœ‰ h(x) y ã€‚ yå³å®šä¹‰åŸŸä¸­çš„ä¸€ä¸ªæ•°ã€‚ å€¼åŸŸå†…çš„ x é€šè¿‡å“ˆå¸Œå‡½æ•°h(x) è¡¨ç¤ºäº†å®šä¹‰åŸŸçš„ y ã€‚ å“ˆå¸Œå†²çªï¼šä¸åŒçš„ä¸¤ä¸ª x1ï¼Œx2 é€šè¿‡å“ˆå¸Œå‡½æ•°äº§ç”Ÿäº†ç›¸åŒçš„ç»“æœ yã€‚ è¿™ä¼šå¯¼è‡´ç»“æœå†²çªï¼Œå³è¯¥å“ˆå¸Œè¡¨ä¸­çš„ y ï¼Œåˆ°åº•æ˜¯è¡¨ç¤º x1 è¿˜æ˜¯ x2 ï¼Ÿ å­˜å‚¨ç»“æ„ï¼š 1.æ‹‰é“¾æ³• :å¼€è¾Ÿä¸€ä¸ªæ•°ç»„ï¼Œå…ƒç´ ä½œä¸ºé“¾è¡¨å­˜æ”¾å†²çªçš„å“ˆå¸Œå€¼ã€‚ 2.å¼€æ”¾å¯»å€æ³•ï¼šå¼€è¾Ÿä¸€ä¸ªæ•°ç»„ï¼Œä¸éœ€è¦é“¾è¡¨ï¼Œä½†é•¿åº¦å¾€å¾€æ˜¯æ•°æ®çš„2~3å€ã€‚ é•¿åº¦ä¸ä¸€å®šè¿™æ ·é•¿ï¼Œä½†æ›´é•¿çš„é•¿åº¦å†²çªæ¦‚ç‡ä¼šæ¯”è¾ƒä½ã€‚ ä¸¤é“é¢˜æ¨¡æ‹Ÿæ•£åˆ—è¡¨ æ‹‰é“¾æ³• 1.N 100000? æ ¹æ®tipsï¼Œæˆ‘ä»¬è¦å¯¹ä¸€ä¸ªè´¨æ•°å–æ¨¡ï¼Œ1N10^5ï¼Œé€šè¿‡è¯•é™¤æ³•èƒ½æ±‚å‡ºæ¥å¤§äºNçš„æœ€å°è´¨æ•°æ˜¯10003ã€‚ 2.å–ä½™å€¼ä¹Ÿæ˜¯Nï¼Ÿ x å–ä½™ Nï¼Œæ„å‘³ç€ç”¨(0,N-1)çš„èŒƒå›´è¡¨ç¤º x ï¼Œä¹Ÿå°±æ˜¯(1,10^5) ã€‚è¿™ç¬¦åˆæˆ‘ä»¬çš„æ•°ç»„é•¿åº¦ï¼Œé˜²æ­¢è¶Šç•Œã€‚ (å“ˆå¸Œå‡½æ•°ç›¸å½“äºæŠŠ10^-9ï½10^9ä¸­çš„ä¸€ä¸ªä¸ªæ•°xå‹ç¼©å­˜æ”¾åœ¨N(è´¨æ•°)ä¸ªé“¾è¡¨ä¸­) #includeiostream#includestring.husing namespace std ;//å“ˆå¸Œè¡¨ï¼šå®ç°æ— éæ˜¯æ’å…¥å’ŒæŸ¥æ‰¾ä¸¤ä¸ªåŠŸèƒ½const int N = 100003;int h[N],e[N],ne[N],idx; //é™æ€é“¾è¡¨//hå¤´ç»“ç‚¹ e å½“å‰ç»“ç‚¹çš„å€¼ ne å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹ä¸‹æ ‡ ï¼Œidx å¤šä½™ç©ºé—´çš„ä¸‹æ ‡ ï¼Œk æ˜ å°„åå‘ˆç°çš„æ•°ç»„å€¼void insert(int x) int k = (x%N+N)%N; //å…ˆå–æ¨¡å†+N ä½¿è´Ÿä½™æ•°è½¬æ­£ï¼ˆCPPç‰¹æ€§ï¼‰ ne[idx] = h[k]; h[k] = idx; e[idx] = x; idx++;bool find(int x) int k = (x % N + N) % N; for (int i = h[k]; i != -1; i = ne[i]) //-1é…åˆmemset if (e[i] == x) return true; return false;int main(void) int n;cinn; memset(h,-1,sizeof(h)); while(n--) char c[2];int x; cinc;cinx; if(*c==I) insert(x); else if(find(x)) puts(Yes); else puts(No); å¼€æ”¾å¯»å€æ³• ç‰¹ç‚¹ï¼šä¸€æ—¦find() æŸ¥æ‰¾ä¸åˆ°è¿™ä¸ªæ•°æ® ï¼Œå°±è¿”å›æœ€è¿‘å¤šä½™ç©ºé—´çš„ä¸‹æ ‡ã€‚ æ‰€ä»¥æ·»åŠ å‡½æ•°åˆ©ç”¨findå°±okäº†ã€‚ #include cstring#include iostreamusing namespace std;const int N = 200003, null = 0x3f3f3f3f;int h[N];int find(int x) int t = (x % N + N) % N; while (h[t] != null h[t] != x) //ä¸€ç›´å¾€åæ‰¾é—²ç½®ç©ºé—´ï¼Œnull:æ•°ç»„è¾¹ç•Œ t ++ ; if (t == N) t = 0; //å¾ªç¯æŸ¥æ‰¾ return t;int main() memset(h, 0x3f, sizeof h); int n; scanf(%d, n); while (n -- ) char op[2]; int x; scanf(%s%d, op, x); if (*op == I) h[find(x)] = x; else if (h[find(x)] == null) puts(No); else puts(Yes); return 0; 0x3f : memsetæ˜¯æŒ‰å­—èŠ‚èµ‹å€¼çš„ï¼Œå› æ­¤charç±»å‹çš„æ•°ç»„å¯ä»¥èµ‹ä»»æ„å€¼ã€‚å› æ­¤memsetçš„æ­£è§„ç”¨æ³•æ˜¯ç”¨æ¥åˆå§‹åŒ–charç±»å‹çš„æ•°ç»„çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåªä¼šæ¥å—0x00-0xFFçš„å€¼ã€‚ å› ä¸º0çš„äºŒè¿›åˆ¶æ˜¯32ä¸ª0ï¼Œ-1çš„äºŒè¿›åˆ¶æ˜¯ä¸‰åäºŒä¸ª1ï¼Œæ‰€ä»¥ä½¿ç”¨memsetå¯ä»¥ç›´æ¥åˆå§‹åŒ–0å’Œ-1ã€‚å¦‚æœè¦åˆå§‹æœ€å¤§åŒ–ï¼Œç¬¬ä¸€ä½æ˜¯ç¬¦å·ä½ä¸º0ï¼Œå‰©ä¸‹ä¸º1ï¼Œ01111111åŒ–åå…­è¿›åˆ¶æ­£å¥½ä¸º0x7fï¼Œæ‰€ä»¥memset(arr, 0x7f, sizeof())å°±æ˜¯åˆå§‹æœ€å¤§åŒ–äº†ã€‚ ä½†æ˜¯è¿™ä¸ªæ•°ä¸èƒ½æ»¡è¶³â€œæ— ç©·å¤§åŠ æ— ç©·å¤§ä¾ç„¶æ˜¯æ— ç©·å¤§â€çš„æ€§è´¨ï¼Œç›¸åŠ åå®ƒæ˜¯ä¸€ä¸ªå¾ˆå°çš„è´Ÿæ•°ã€‚æ‰€ä»¥ä¸€èˆ¬æ— ç©·å¤§å¸¸é‡å–å€¼æ˜¯0x3f3f3f3fã€‚ memseæ˜¯æŒ‰å­—èŠ‚æ¥åˆå§‹åŒ–çš„ï¼Œintä¸­æœ‰å››ä¸ªå­—èŠ‚ï¼Œåˆå§‹åŒ–æˆ0x3få°±æ˜¯å°†æ¯ä¸ªå­—èŠ‚éƒ½åˆå§‹åŒ–æˆ0x3fï¼Œæ‰€ä»¥æ¯ä¸ªintå°±æ˜¯ 0x3f3f3f3fã€‚ 0x3f3f3f3fåè¿›åˆ¶æ˜¯1061109567ï¼Œæ˜¯10^9çº§åˆ«ã€‚0x3f3f3f3f + 0x3f3f3f3f 2122219134ï¼Œæ²¡æœ‰è¶…è¿‡32ä½intçš„èŒƒå›´ï¼Œæ‰€ä»¥ç›¸åŠ ä¹Ÿæ»¡è¶³â€œæ— ç©·å¤§åŠ æ— ç©·å¤§ä»¥æ—§æ˜¯æ— ç©·å¤§â€çš„æ€§è´¨ void memset(void *str, int ch, size_t n)å°†strä¸­å½“å‰ä½ç½®åé¢çš„nä¸ªå­—èŠ‚ç”¨chæ›¿æ¢å¹¶è¿”å›sï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å°†æ•°å­—ä»¥å•ä¸ªå­—èŠ‚é€ä¸ªæ‹·è´çš„æ–¹å¼æ”¾åˆ°æŒ‡å®šçš„å†…å­˜ä¸­memset(a, 127, sizeof(a))127çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ˜¯01111111ï¼Œåœ¨æ•°ç»„é‡Œå­˜æ”¾çš„å°±æ˜¯å››ä¸ª01111111ï¼Œåè¿›åˆ¶æ•°é‡Œæ˜¯2139062143ï¼ˆå°äºintç±»å‹çš„èŒƒå›´ï¼‰memset(a, 127, sizeof(a))128äºŒè¿›åˆ¶æ˜¯10000000ï¼Œå››ä¸ª10000000å°±æ˜¯-2139062144ï¼Œå°±æ˜¯åˆå§‹åŒ–ä¸ºä¸€ä¸ªå¾ˆå°çš„æ•° å­—ç¬¦ä¸²å“ˆå¸ŒTips: å–æ¨¡æ‰€ç”¨çš„æ•°ï¼Œä¸€èˆ¬éƒ½æ˜¯è´¨æ•°ã€‚ æ•°å­¦è¯æ˜ï¼Œå–æ¨¡è´¨æ•°æ—¶ï¼Œå“ˆå¸Œå†²çªçš„æƒ…å†µæœ€å°‘ã€‚ å“ˆå¸Œè¡¨ scanfè¯»å…¥å­—ç¬¦ï¼Œå°½é‡ä»¥å­—ç¬¦ä¸²å½¢å¼è¯»å…¥ã€‚ å› ä¸ºè¯»å…¥å­—ç¬¦ä¸² scanf è‡ªåŠ¨å¿½ç•¥å›è½¦ç©ºæ ¼æ¢è¡Œç¬¦ å“ˆå¸Œè¡¨çš„å¸¸ç”¨æ“ä½œæ˜¯ æ·»åŠ  å’Œ æŸ¥æ‰¾ã€‚ åˆ é™¤æ“ä½œæ¯”è¾ƒå°‘ã€‚å³ä½¿æ”¯æŒåˆ é™¤æ“ä½œåŠŸèƒ½ï¼Œä¹Ÿä¸ä¸€å®šåˆ é™¤æºæ•°æ®ã€‚ ï¼ˆä¾‹å¦‚è®¾ç½®ä¸€ä¸ªå¸ƒå°”å˜é‡æˆ–è€…ä»€ä¹ˆæ ‡è®°ï¼Œæ¥åˆ¤æ–­è¯¥æ•°æ®æ˜¯å¦å·²è¢«åˆ é™¤ï¼‰ åˆ é™¤æ“ä½œå¯ä»¥çœ‹åšæŸ¥æ‰¾æ“ä½œçš„ç‰¹æ®Šå¤„ç†ã€‚ å–ä½™ % ä¸è¦å’Œé™¤æ³• æ··æ·†ã€‚ n X%Y ï¼Œæ„å‘³ç€ n âˆˆ (0,Y-1)"},{"title":"æ»‘åŠ¨çª—å£","path":"/wiki/algorithm/æ»‘åŠ¨çª—å£.html","content":"æ»‘åŠ¨çª—å£åšé¢˜ç¬”è®° æ¨¡æ¿/* æ»‘åŠ¨çª—å£ç®—æ³•æ¡†æ¶ */void slidingWindow(string s) unordered_mapchar, int window; int left = 0, right = 0; while (right s.size()) // c æ˜¯å°†ç§»å…¥çª—å£çš„å­—ç¬¦ char c = s[right]; // å¢å¤§çª—å£ right++; // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–° ... /*** debug è¾“å‡ºçš„ä½ç½® ***/ printf(window: [%d, %d) , left, right); /********************/ // åˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦è¦æ”¶ç¼© while (window needs shrink) // d æ˜¯å°†ç§»å‡ºçª—å£çš„å­—ç¬¦ char d = s[left]; // ç¼©å°çª—å£ left++; // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–° ... æœ€å°è¦†ç›–å­ä¸²string minWindow(string s, string t) unordered_mapchar, int need, window; for (char c : t) need[c]++; int left = 0, right = 0; int valid = 0; // è®°å½•æœ€å°è¦†ç›–å­ä¸²çš„èµ·å§‹ç´¢å¼•åŠé•¿åº¦ int start = 0, len = INT_MAX; while (right s.size()) // c æ˜¯å°†ç§»å…¥çª—å£çš„å­—ç¬¦ char c = s[right]; // æ‰©å¤§çª—å£ right++; // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–° if (need.count(c)) window[c]++; if (window[c] == need[c]) valid++; // åˆ¤æ–­å·¦ä¾§çª—å£æ˜¯å¦è¦æ”¶ç¼© while (valid == need.size()) // åœ¨è¿™é‡Œæ›´æ–°æœ€å°è¦†ç›–å­ä¸² if (right - left len) start = left; len = right - left; // d æ˜¯å°†ç§»å‡ºçª—å£çš„å­—ç¬¦ char d = s[left]; // ç¼©å°çª—å£ left++; // è¿›è¡Œçª—å£å†…æ•°æ®çš„ä¸€ç³»åˆ—æ›´æ–° if (need.count(d)) if (window[d] == need[d]) valid--; window[d]--; // è¿”å›æœ€å°è¦†ç›–å­ä¸² return len == INT_MAX ? : s.substr(start, len); æ‰¾åˆ°å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—æ¯å¼‚ä½è¯class Solution public: vectorint findAnagrams(string s, string p) unordered_mapchar,int need,window; for(char c:p) need[c]++; int left,right; left = right = 0; int valid = 0; //1. vectorint res; while(rights.size()) char r = s[right]; right++; if(need.count(r)) window[r]++; if(need[r]==window[r]) valid++; while(right-left=p.size()) if(valid==need.size()) res.push_back(left); char L = s[left]; left++; if(need.count(L)) if(need[L]==window[L]) valid--; window[L]--; return res; ; æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²class Solution public: int lengthOfLongestSubstring(string s) unordered_mapchar,int window; int left,right;left = right = 0; int res = 0; while(rights.size()) char r = s[right]; right++; window[r]++; while(window[r]1) char L = s[left]; window[L]--; left++; res = max(res,right-left); return res; ;"},{"title":"æ··å…ƒå½¢æ„å¤ªæé—¨ä¹‹çº¢çƒ§ç¿…è†€æˆ‘æœ€çˆ±åƒ","path":"/wiki/algorithm/æ··å…ƒå½¢æ„å¤ªæé—¨ä¹‹çº¢çƒ§ç¿…è†€æˆ‘æœ€çˆ±åƒ.html","content":"[TOC] ç®—æ³• æš´åŠ›1.æ’åº2.åŠ¨æ€è§„åˆ’(DP) 3.æ·±åº¦ä¼˜å…ˆæœç´¢ 4.å¹¿åº¦ä¼˜å…ˆæœç´¢ 5.æš´åŠ›æšä¸¾ï¼Œæœç´¢ æ•°æ®ç»“æ„ç±»1.äºŒå‰æ ‘ â’‰.é“¾è¡¨ 3.æ ˆå’Œé˜Ÿåˆ— 4.å“ˆå¤«æ›¼ 5.STL6.æœ€å°ç”Ÿæˆæ ‘ 7.B+æ ‘8.KMP.ç®—æ³• 9.å“ˆå¸Œè¡¨ é«˜æ•ˆç®—æ³•ç±»1.é€’å½’(åˆ†æ²»)+å›æº¯2.è´ªå¿ƒç®—æ³•3.æœ€çŸ­è·¯å¾„ DJã€BFã€Floyd 4.åŒæŒ‡é’ˆ5.æ»‘åŠ¨çª—å£ è¿‡ç¨‹æ¦‚è¦ æ±‡æ€»ç®—æ³•ä¿¡æ¯èµ„æ–™ è§„åˆ’æ—¶é—´ï¼Œä¸åŒæ—¶æœŸç»ƒå•¥ç®—æ³•; æ‰¾å¯¹åº”ç®—æ³•ç²¾ç¡®èµ„æ–™ï¼Œå¦‚åšå®¢ã€ä¹¦ã€è§†é¢‘ç­‰å­¦ä¹ ã€‚ æŒæ¡æ€æƒ³åï¼Œæ”¶é›†é¢˜å‹ï¼Œå¤§é‡åˆ·é¢˜ã€‚ ç¬¬1ï¼Œ2 ä¸ºå‰æœŸçŸ­æ—¶é—´åˆç†è§„åˆ’ ç¬¬3, 4ä¸ºåæœŸå¾ªç¯ä¸Šå‡å¼è¿›æ­¥ è·¯çº¿ï¼šåšå®¢ kuangbin ä¸“é¢˜ï¼šhttps://github.com/Zen-w/kuangbin labuladong ä¸“é¢˜ï¼šhttps://labuladong.github.io/algo/1/ æŸä¸ªäººåˆ·é¢˜ç¬”è®°ï¼ˆæ´›è°·ï¼‰ ï¼šhttps://studyingfather.com/archives/category/%E7%AE%97%E6%B3%95 åŠ¨æ€è§„åˆ’ä¸“é¢˜ ï¼šhttps://cloud.tencent.com/developer/article/1538177 è§†é¢‘ å·¦ç¨‹äº‘åŠ›æ‰£ï¼š https://www.bilibili.com/video/BV13g41157hK?share_source=copy_webvd_source=858f79141b0ff902c365efd90ac76a55 https://www.bilibili.com/video/BV1YL4y1v7Hy?share_source=copy_webvd_source=858f79141b0ff902c365efd90ac76a55 acwingè¯•å¬è¯¾ï¼š https://space.bilibili.com/7836741?spm_id_from=333.337.search-card.all.click ä¸€äº›æ¯”è¾ƒåŠçš„ oj CodeForce , æ´›è°· ï¼Œ leetcode ï¼Œ ç‰›å®¢ç½‘ å‚è€ƒèµ„æ–™ ä¹¦ â€‹ ã€Šç®—æ³•ç«èµ›å…¥é—¨ç»å…¸ã€‹ åˆ˜æ±ä½³ â€‹ ã€Šå•Šå“ˆï¼ç®—æ³•ã€‹ â€‹ ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ ä¸Šè¿°è·¯çº¿ ä¸Šè¿°è§†é¢‘ æ—¶é—´å®‰æ’ï¼ˆç©ºï¼‰ï¼š é™„èµ æƒŠå–œï¼š ä¸€ä¸ªç§‘ç­CPPè·¯çº¿ï¼šhttps://github.com/tomstillcoding/cs-roadmap/blob/main/c++/2022_%E6%9C%80%E6%96%B0C++%E5%BC%80%E5%8F%91%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF_%E7%A7%91%E7%8F%AD%E7%89%88.md"},{"title":"èƒŒåŒ…DP","path":"/wiki/algorithm/èƒŒåŒ…DP.html","content":"Bé€’å½’é—®é¢˜ç‰¹æ€§ â‘ é—®é¢˜æœ‰æœ€ä¼˜å­ç»“æ„ï¼šé—®é¢˜å­˜åœ¨æœ€ä¼˜è§£ï¼Œä¸”ä¸å…¶å­é—®é¢˜æœ€ä¼˜è§£é‡åˆ â‘¡æ— åæ•ˆï¼šå‰åçŠ¶æ€å€¼åªå’Œå€¼æœ¬èº«æœ‰å…³ï¼Œå’Œé—®é¢˜æ— å…³ã€‚ è§£å†³æ€è·¯ï¼š â‘ å°†åŸé—®é¢˜åˆ†è§£ä¸ºå­é—®é¢˜ â‘¡ç¡®å®šçŠ¶æ€ â‘¢ç¡®å®šåˆå§‹çŠ¶æ€å€¼ â‘£ç¡®å®šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼ˆç”±æœ€ä¼˜å­ç»“æ„æ¨åˆ°å…¶çˆ¶ç»“æ„ï¼Œç›´åˆ°ç›®æ ‡çŠ¶æ€ï¼‰ å››ä¸ªèƒŒåŒ…é—®é¢˜01èƒŒåŒ… é¢˜ç›®ï¼š æœ‰ N ä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ã€‚æ¯ä»¶ç‰©å“åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚ ç¬¬ i ä»¶ç‰©å“çš„ä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯ wiã€‚ æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…ï¼Œå¯ä½¿è¿™äº›ç‰©å“çš„æ€»ä½“ç§¯ä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”æ€»ä»·å€¼æœ€å¤§ã€‚è¾“å‡ºæœ€å¤§ä»·å€¼ã€‚ è¾“å…¥æ ¼å¼ç¬¬ä¸€è¡Œä¸¤ä¸ªæ•´æ•°ï¼ŒNï¼ŒVï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç‰©å“æ•°é‡å’ŒèƒŒåŒ…å®¹ç§¯ã€‚ æ¥ä¸‹æ¥æœ‰ N è¡Œï¼Œæ¯è¡Œä¸¤ä¸ªæ•´æ•° vi,wiï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œåˆ†åˆ«è¡¨ç¤ºç¬¬ i ä»¶ç‰©å“çš„ä½“ç§¯å’Œä»·å€¼ã€‚ è¾“å‡ºæ ¼å¼è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§ä»·å€¼ã€‚ æ•°æ®èŒƒå›´0N,Vâ‰¤10000vi,wiâ‰¤1000 æœ´ç´ åšæ³•æ—¢ç„¶æ˜¯åŠ¨æ€è§„åˆ’ï¼Œæˆ‘ä»¬å°±è¦æ‰¾åˆ° i å’Œ i-1 ä¹‹é—´çš„å…³ç³»å˜›ã€‚è§‚å¯Ÿä¼šå‘ç°ï¼Œ å¯¹äºç¬¬ i ä»¶ç‰©å“ï¼Œåªæœ‰é€‰æˆ–ä¸é€‰ä¸¤ç§é€‰æ‹©ï¼š ä¸é€‰ï¼šf[i][j] = f[i-1][j] å³æœ€ä¼˜è§£å’Œå‰ i-1 ä¸ªç‰©å“çš„æƒ…å†µä¸€æ ·ã€‚ é€‰ï¼šf[i][j] = f[i-1][j-v[i]]+w[i] å³æœ€ä¼˜è§£åŒ…å«äº†é€‰æ‹©ç¬¬ i ä¸ªç‰©å“çš„æƒ…å†µã€‚ è¿™æ ·çš„è¯dpçš„å…³é”®ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹ å°±æˆå‹äº†ï¼š f[i][j] = max(f[i-1][j],f[i-1][j-v[i]]+w[i]) æš´åŠ›dpï¼Œå› ä¸ºæœ‰ä¸¤ä¸ªé™å®šæ¡ä»¶ ï¼š å‰Nä»¶ç‰©å“å’Œå‰Mä¸ªé‡é‡ï¼Œæ‰€ä»¥ç©ºé—´è®¾ä¸ºäºŒç»´æ•°ç»„ã€‚ å»ºç«‹ä¸€ä¸ªäºŒç»´æ•°ç»„ N [ i ] [ j ]ï¼Œå«ä¹‰ä¸ºå‰iä»¶ç‰©å“å’Œjé‡é‡æ—¶çš„æœ€ä¼˜è§£ã€‚ è¿™é‡Œè¿˜éœ€è¦ä¸¤ä¸ªä¸€ç»´æ•°ç»„ v [n] å’Œ w [n] æ¥åˆ†åˆ«å­˜å‚¨ç¬¬ i ä¸ªç‰©å“çš„ ä½“ç§¯å’Œä»·å€¼ã€‚ #includeiostreamusing namespace std ;const int N = 1010;int a[N][N];int v[N],w[N]; int n,m;int dp() for(int i=1;i=n;i++) for(int j = 1;j=m;j++) a[i][j]=a[i-1][j]; if(j=v[i]) a[i][j] = max(a[i][j],a[i-1][j-v[i]]+w[i]); return a[n][m];int main(void) cinnm; for(int i = 1;i=n;i++) cinv[i]w[i]; cout dp(); return 0; ç©ºé—´ä¼˜åŒ–ï¼ˆä¸€ç»´æ•°ç»„ï¼‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼š ä¼˜åŒ–åŸå› ï¼šæœ´ç´ åšæ³•ä¸­ï¼ŒäºŒç»´æ•°ç»„åªç”¨åˆ°äº† a[i][j] å’Œ a[i-1][j] ,è¿™é‡Œå¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼Œåˆ©ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„å®ç°çŠ¶æ€æ›´æ–°ã€‚ ä½ å¯ä»¥ç†è§£ä¸ºäºŒç»´æ•°ç»„ a[N][N] å˜æˆäº† a[1][N] å€’åºæ›´æ–°ï¼šä½¿ç”¨ä¸€ç»´æ•°ç»„ï¼Œåˆ™å¿…ç„¶è¦åœ¨æ›´æ–°æ•°æ®æ—¶ä½¿ç”¨å€’åºã€‚ 1.æ­£åºä¸ºå•¥ä¸è¡Œï¼Ÿ äºŒç»´çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º a[i][j] = max(a[i][j],a[i-1][j-v[i]+w[i]) ä¸€ç»´æ•°ç»„ï¼Œæ­£åºæ›´æ–°åˆ™å˜ä¸º a[i][j] = max(a[i][j],a[i][j-v[i]+w[i]) å› ä¸ºæ²¡æœ‰äºŒç»´æ•°ç»„è®°å½•ï¼Œå¯¼è‡´ä¸€ç»´çš„æ•°æ®ç”±ç¬¬i-1å±‚ï¼Œè·³åˆ°äº†ç¬¬iå±‚ã€‚ (ä½ ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼Œæ­£åºä¼šå¯¼è‡´å‰iä¸ªæ•°æ®é‡Œçš„æŸä¸ªæ•°æ®ç”±äºæ»¡è¶³æ¡ä»¶è€Œé‡å¤ä½¿ç”¨ã€‚ï¼æƒ³åˆ°äº†å®Œå…¨èƒŒåŒ…æ²¡æœ‰ï¼Ÿ) 2.å€’åºä¸ºå•¥è¡Œï¼Ÿ è®¡ç®— a[i][j] éœ€è¦ a[i-1][j-v[i]]ï¼Œè€Œå€’åºçš„æƒ…å†µä¸‹ï¼Œa[j-v[i]] æ°å¥½æ˜¯â€œæœªè¢«æ±¡æŸ“çš„â€ï¼Œæˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®ã€‚ #includeiostreamusing namespace std ;const int N = 1010;int a[N];int v[N],w[N]; int n,m;int dp() for(int i=1;i=n;i++) for(int j = m;j=v[i];j--) a[j] = max(a[j],a[j-v[i]]+w[i]); return a[m];int main(void) cinnm; for(int i = 1;i=n;i++) cinv[i]w[i]; cout dp(); return 0; å®Œå…¨èƒŒåŒ… é—®é¢˜åŒä¸Šï¼Œåªå¤šäº†ä¸€ä¸ªæ¡ä»¶ï¼š æ¯ç§ç‰©å“éƒ½æœ‰æ— é™ä»¶å¯ç”¨ã€‚ ä½œè€…ï¼šyxc é“¾æ¥ï¼šhttps://www.acwing.com/video/945/ è¯·æ•™ä¸€ä¸ªé—®é¢˜ï¼ŒAå¼ä¸­çš„dp[iâˆ’1] [j]ï¼Œå’Œå®é™…ä¸ŠBå¼æ›¿æ¢åä¸­çš„dp[iâˆ’1] [jâˆ’kv]+(kâˆ’1)wåé¢åº”è¯¥è¿˜æœ‰ä¸€é¡¹dp[iâˆ’1] [jâˆ’(k+1)v]+kw,åœ¨è½¬æ¢åˆ°Cå¼æ—¶ï¼Œè¿™ä¸¤é¡¹æ€ä¹ˆå¤„ç†çš„ã€‚è§†é¢‘ä¸­æ²¡æœ‰çœ‹æ˜ç™½ã€‚ ç­”ï¼š Bå¼ä»…ä»æ•°å­¦ä¸Šæ¥çœ‹ï¼Œå¥½åƒæœ«å°¾ç¼ºå°‘äº†ä¸€é¡¹ dp[i-1] [j-v-kv] + kw ã€‚ ä½†æ¢å…ƒåè¦è€ƒè™‘å–å€¼èŒƒå›´çš„å˜åŒ–ã€‚ å› ä¸ºä¸¤è€…çš„ j æ˜¯ä¸€æ ·çš„ï¼Œå¯¹åº”äº† 1â©½kâ©½Tï¼Œè®© j å˜æˆ jâˆ’v å°±ç­‰åŒäºè®© k çš„èŒƒå›´ç¼©å°ä¸º 0â©½kâ©½Tâˆ’1 äº†ã€‚ ç®€è€Œè¨€ä¹‹å°±æ˜¯åŸæ¥çš„èƒŒåŒ…å®¹é‡ j æœ€å¤šå¯ä»¥æ‰¿å— T ä¸ª vï¼Œè€Œæ›¿æ¢æˆ jâˆ’v åï¼Œæœ€å¤šå°±åªèƒ½æ‰¿å— Tâˆ’1 ä¸ª v äº†ï¼ŒæŠŠå¼å­æœ€åä¸€é¡¹åŒ–ç®€æ¶ˆå»ï¼Œå°±æˆè¿™æ ·äº†ã€‚ Bå¼æœ€åä¸€é¡¹å°‘äº†ä¸€ä¸ª w æ€ä¹ˆç†è§£ï¼Ÿ Bå¼çš„ç¬¬ä¸€é¡¹å’ŒAå¼ç¬¬äºŒé¡¹å¯¹åº”ï¼Œè€Œ w å‰çš„ç³»æ•°ä¹Ÿå°±å·® 1ï¼Œç›´åˆ°æœ€åä¸€é¡¹ã€‚æ‰€ä»¥Bå¼ + w æ‰èƒ½æ›¿æ¢Aé¡¹ã€‚ ä»£ç ç¤ºä¾‹ï¼š æœ´ç´ åšæ³• for (int i = 1; i = n; i++) for (int j = 1; j = m; j++) int t = j / v[i]; for (int k = 0; k = t; k++) dp[i][j] = max(dp[i][j], dp[i - 1][j - k * v[i]] + k * w[i]); â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”åŸæ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/raelum/article/details/128996521 ä¸€ç»´ä¼˜åŒ–#include iostream#include algorithmusing namespace std;const int N = 1010;int n, m;int v[N], w[N];int f[N];int main() cin n m; for (int i = 1; i = n; i ++ ) cin v[i] w[i]; for (int i = 1; i = n; i ++ ) for (int j = v[i]; j = m; j ++ )//æ­£åºäº† f[j] = max(f[j], f[j - v[i]] + w[i]); cout f[m] endl; return 0; ç•ªå¤–ï¼š 1.ä¸ºä»€ä¹ˆä¸€ç»´èƒŒåŒ…çš„ j ï¼Œå¯ä»¥ä»v[i]å¼€å§‹ï¼Œâ€œè·³è¿‡â€jv[i]çš„æƒ…å†µï¼Ÿ å…³é”®åœ¨è¿™é‡Œã€‚äºŒç»´ä¸èƒ½ä»v[i]å¼€å§‹ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªèµ‹å€¼è¯­å¥ä¸ºjv[i]çš„æ•°æ®èµ‹åˆå€¼ã€‚ 2.ä¸€ç»´çš„æƒ…å†µä¸‹ï¼Œèµ‹å€¼è¯­å¥ä»f[i] [j] f[i-1] [j] å˜æˆäº† f[ j ] f[ j ] ,ä¸¤è€…ç­‰ä»·ï¼Œä½†å³å¼å¯ä»¥æ¶ˆæ‰ã€‚ åˆ¤æ–­è¯­å¥æŒªåˆ°å¾ªç¯é‡Œï¼Œç»“æŸã€‚ 3.çœç•¥çš„f[i] = f[i] ç­‰ä»·äº f[i][j] = f[i-1][j] å› ä¸ºèµ‹å€¼è¯­å¥é‡Œçš„ f[i] f[i] ,å³å€¼ä¸ºä¸Šä¸€å±‚å¾ªç¯é‡Œçš„ f[i] ï¼Œå³ i - 1 ã€‚ è¿™ä¸ªf[j]è¿˜æ²¡æœ‰åœ¨ç¬¬ i å±‚çš„å¾ªç¯é‡Œè¢«æ›´æ–°è¿‡ã€‚ å¤šé‡èƒŒåŒ… å¤šé‡èƒŒåŒ…å¢åŠ çš„æ¡ä»¶ï¼š ç¬¬ i ç§ç‰©å“æœ€å¤šæœ‰ si ä»¶ï¼Œ(æ¯ä»¶ä½“ç§¯æ˜¯ viï¼Œä»·å€¼æ˜¯ wi)ã€‚ æœ´ç´ åšæ³•è¿™æ—¶éœ€è¦å¢åŠ ä¸€å±‚å¾ªç¯ï¼Œå³æšä¸¾ç¬¬ i ç§ç‰©å“çš„ ã€0,siã€‘ä»¶æ—¶çš„æœ€ä¼˜è§£ï¼Œå†ä»æœ€ä¼˜è§£ä¸­æ‰¾åˆ°æ›´ä¼˜è§£ã€‚ (æ³¨æ„ï¼šä¸€ä¸ªé™åˆ¶æ¡ä»¶æ˜¯ï¼Œé€‰æ‹©kä¸ªç‰©å“åŠ¿å¿…ä¼šå¼•èµ·èƒŒåŒ…ä½“ç§¯é—®é¢˜ï¼Œéœ€è¦åœ¨è¯¥å¾ªç¯ä¸­å¢åŠ ä½“ç§¯é™åˆ¶æ¡ä»¶) #includeiostreamusing namespace std; const int N = 110;int f[N][N];int v[N],w[N],s[N];int main(void) int n,m; cinnm; for(int i=1;i=n;i++) cinv[i]w[i]s[i]; for(int i=1;i=n;i++) for(int j=0;j=m;j++) // for(int k=0;k=s[i] k*v[i]=j;k++) // k*v[i]=j é˜²æ­¢ä¸‹æ ‡ä¸ºè´Ÿæ•°ï¼Œå³è£…ä¸ä¸‹çš„æƒ…å†µå‡ºç° f[i][j] = max(f[i][j],f[i-1][j-k*v[i]]+k*w[i]); coutf[n][m]; return 0; kä»0å¼€å§‹ï¼šk0 æ—¶ï¼ŒåŒ…å«äº†ä¸é€‰æ‹©ç¬¬ i ä»¶ç‰©å“çš„æƒ…å†µã€‚ ä¸€ç»´ä¼˜åŒ–#include bits/stdc++.husing namespace std;const int N = 110;int v[N],w[N],s[N];int dp[N];int main() int n, m; cin n m; for(int i = 1; i = n; i++) cin v[i] w[i] s[i]; for(int i = 1 ;i = n; i++) for(int j = m; j = v[i] ; j--) // for(int k = 1; k = s[i] k * v[i] = j; k ++) dp[j] = max(dp[j], dp[j- k * v[i]] + k * w[i]); cout dp[m] endl; return 0; è¿™é‡Œæœ‰ä¸¤ä¸ªç‚¹ï¼š å€’åºéå†ï¼Œç›´åˆ° v[ i ] ã€‚ åŒä¸Š k1å¼€å§‹ å®é™…ä¸Šï¼Œk0å¼€å§‹å’Œk1å¼€å§‹ï¼Œç»“æœæ˜¯ä¸€æ ·çš„ã€‚æŠŠk0å¸¦å…¥ï¼Œå‘ç°èµ‹å€¼è¯­å¥å˜æˆäº†ï¼š dp[j] = max(dp[j],dp[j]) æ‰€ä»¥ä½ æ˜¯å¦æƒ³èµ·äº†å®Œå…¨èƒŒåŒ…é‡Œè¢«çœç•¥çš„é‚£ä¸ª dp[j] = dp[j]? äºŒè¿›åˆ¶ä¼˜åŒ– æ•°æ®èŒƒå›´å¢å¼ºäº†ï¼š 0Nâ‰¤10000Vâ‰¤20000vi,wi,siâ‰¤2000 æ€è·¯ï¼š è¿™æ˜¯0â€”1èƒŒåŒ…çš„ï¼ŒåŸæ¥ä½ è§£å†³å¤šé‡èƒŒåŒ…æ˜¯æŠŠnä»½ç‰©å“åˆ†ä¸ºnä¸ª1ä»½ï¼Œç°åœ¨æ˜¯åˆ†æˆ2^0 2^1 2^2 2^3 2^4â€¦â€¦2^nä¸ªï¼Œåˆ†å¥½åæŠŠå®ƒä»¬é‡æ–°çœ‹åšä¸€ä¸ªæ•´ä½“ï¼Œè¿™äº›æ•´ä½“ç›¸åŠ å¯ä»¥ç­‰äº[1,n]ä¸­ä»»ä½•ç‰©å“ä¸€ä»½ä»½æ€»å’Œçš„é›†åˆï¼Œç®€å•è®²å°±æ˜¯ n 1+1+1+1 â€¦(æ‰§è¡Œnæ¬¡) 1 2 4 8 â€¦ï¼ˆæ‰§è¡Œlog n æ¬¡ï¼‰ #includeiostream#includevectorusing namespace std ;struct good int v; int w;;vectorgood goods;const int N = 2023;int f[N];int main(void) int n,m; cinnm; for(int i = 1;i=n;i++) int v,w,s; //ä¸éœ€è¦æ•°ç»„ï¼Œè€Œæ˜¯è½¬åŒ–æˆäºŒè¿›åˆ¶æ•°ç»Ÿä¸€å­˜åˆ°vectorä¸­å» cinvws; for(int k=1;k=s;k*=2 ) s-=k; goods.push_back(v*k,w*k); if(s0) goods.push_back(v*s,w*s); for(auto good:goods) //ä¸éœ€è¦ i / n äº†ã€‚ä¼ ç»Ÿç¬¨è›‹çº¿æ€§æ•°ç›®å·²ç»æ²¡ç”¨äº† for(int j=m;j=good.v;j--) f[j] = max(f[j],f[j-good.v]+good.w); coutf[m]endl; return 0; åˆ†ç»„èƒŒåŒ… æœ‰ N ç»„ç‰©å“å’Œä¸€ä¸ªå®¹é‡æ˜¯ V çš„èƒŒåŒ…ã€‚ æ¯ç»„ç‰©å“æœ‰è‹¥å¹²ä¸ªï¼ŒåŒä¸€ç»„å†…çš„ç‰©å“æœ€å¤šåªèƒ½é€‰ä¸€ä¸ªã€‚æ¯ä»¶ç‰©å“çš„ä½“ç§¯æ˜¯ vijï¼Œä»·å€¼æ˜¯ wijï¼Œå…¶ä¸­ i æ˜¯ç»„å·ï¼Œj æ˜¯ç»„å†…ç¼–å·ã€‚ åˆ†ç»„èƒŒåŒ…å®é™…ä¸Šæ˜¯å¤šé‡èƒŒåŒ…çš„å˜ç§ã€‚å¤šé‡èƒŒåŒ…çš„è§£å†³æ€è·¯æ˜¯ï¼Œå°†k*v[i](k0,1,2â€¦..) æ‰“åŒ…èµ·æ¥ï¼Œå½¢æˆv[ i ]é›†åˆä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨v [ i ] é›†åˆä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜è§£ã€‚ è¿™ä¸æ­£æ˜¯åˆ†ç»„æ‹©å…¶ä¸€çš„è¿‡ç¨‹å—ï¼Ÿ ç»“è®ºï¼šæˆ‘ä»¬å¯ä»¥æŠŠåˆ†ç»„èƒŒåŒ…çœ‹æˆå¤šé‡èƒŒåŒ…ç†ç”±ï¼šæˆ‘ä»¬æŠŠæ¯ç»„çœ‹åšä¸€ä¸ªâ€œç‰©å“â€ï¼Œè€Œè¿™ä¸ªç‰©å“æˆ‘ä»¬å¯ä»¥é€‰æ‹©0åˆ°siä¸ªï¼›é€šè¿‡ä»åå‘å‰çš„éå†é¡ºåºæ¥ç¡®ä¿ï¼Œæˆ‘ä»¬å¯¹ç»„çš„å†³ç­–åªæœ‰ä¸€ç§ï¼šè¦ä¹ˆé€‰è¿™ä¸ªç»„ï¼Œè¦ä¹ˆä¸é€‰ï¼›ç„¶ååœ¨é€šè¿‡æšä¸¾ç»„å†…çš„æƒ…å†µï¼Œæ¥å¯¹ç»„å†…è¿›è¡Œå†³ç­–ï¼šè¦ä¹ˆé€‰0ä¸ªï¼Œé€‰1ä¸ªâ€¦..ï¼› æ¥è‡ª acwingï¼š@WZ æœ´ç´ åšæ³•#include iostreamusing namespace std;const int N = 110;int n, m;int dp[N][N];int v[N][N], w[N][N], s[N];int main() cin n m; for(int i = 1; i = n; i++) cin s[i]; for(int j = 1; j = s[i]; j++) cin v[i][j] w[i][j]; for(int i = 1; i = n; i++) for(int j = 0; j = m; j++) for(int k = 0; k = s[i]; k++) if(j = v[i][k]) dp[i][j] = max(dp[i][j], dp[i - 1][j - v[i][k]] + w[i][k]); cout dp[n][m] endl; return 0; ä¸€ç»´ä¼˜åŒ–#include iostream#include algorithmusing namespace std;const int N = 110;int n, m;int v[N][N], w[N][N], s[N];int f[N];int main() cin n m; for (int i = 1; i = n; i ++ ) cin s[i]; for (int j = 0; j s[i]; j ++ ) cin v[i][j] w[i][j]; for (int i = 1; i = n; i ++ ) for (int j = m; j = 0; j -- ) for (int k = 0; k s[i]; k ++ ) if (v[i][k] = j) f[j] = max(f[j], f[j - v[i][k]] + w[i][k]); cout f[m] endl; return 0; ä¸€ç»´å†ä¼˜åŒ–ä¸€ä¸ªéƒ½ä¸é€‰çš„æ–¹æ¡ˆåœ¨çŠ¶æ€ä¼˜åŒ–æˆ1ç»´çš„æ—¶å€™å°±å¯ä»¥çœç•¥äº†ï¼Œå› ä¸ºæœ¬å±‚çš„f[j]å°±æ˜¯ä¸Šä¸€å±‚çš„f[j]ã€‚ #includeiostreamusing namespace std ;const int N = 110;int n,m;int f[N],v[N],w[N];int main(void) cinnm; for(int i =0;in;i++) int s; cins; for(int j = 0;js;j++) cinv[j]w[j]; for(int j = m;j=0;j--) for(int k=0;ks;k++) if(j=v[k]) f[j] = max(f[j],f[j-v[k]]+w[k]); coutf[m]endl; return 0; æ€»ç»“å‡ ä¸ªå…³é”®ç‚¹æ­£åºé€†åºé—®é¢˜ï¼šä¼˜åŒ–æˆä¸€ç»´æ•°ç»„çš„æƒ…å†µï¼Œåªæœ‰å®Œå…¨èƒŒåŒ…ä¼šæ­£åºéå† j ã€‚ å› ä¸ºä¸€ç»´æ•°ç»„çš„æƒ…å†µä¸‹ï¼Œæ­£åºéå†å¦‚æœèƒŒåŒ…å‰©ä½™å®¹ç§¯è¶³å¤Ÿï¼ˆjv[i]ï¼‰ï¼Œä¼šé‡å¤è£…å…¥ä¸€ä¸ªç‰©å“ï¼Œè¿™æ˜¯å®Œå…¨èƒŒåŒ…çš„æ€è·¯ã€‚ é€†åºéå†åˆ™ä¸ä¼šæœ‰é‡å¤çš„ç°è±¡ï¼Œå› ä¸ºå‰é¢çš„æ•°æ®éƒ½ä¸º 0 ã€‚ ä»å·¦å¾€å³æ›´æ–°æœ‰è„æ•°æ®ã€‚ ä»å³å¾€å·¦æ›´æ–°éƒ½æ˜¯ 0 ã€‚ å°è§„å¾‹ï¼š å››ç§èƒŒåŒ…çš„æœ´ç´ åšæ³•ï¼Œä¹Ÿå°±æ˜¯äºŒç»´çŠ¶æ€éƒ½æ˜¯æ­£åºï¼Œä¸€ç»´éƒ½æ˜¯å€’åºã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå¾ˆæœ‰å‚è€ƒä»·å€¼çš„ä¾‹å­å’Œè¿‡ç¨‹æ¨¡æ‹Ÿã€‚ ä¾‹å­ï¼šå‡è®¾æœ‰3ä»¶ç‰©å“ï¼ŒèƒŒåŒ…çš„æ€»ä½“ç§¯ä¸º10 ç‰©å“ ä½“ç§¯ ä»·å€¼ i 1 4 5 i 2 5 6 i 3 6 7å› ä¸º f[0][j] æ€»å…±0ä»¶ç‰©å“ï¼Œæ‰€ä»¥æœ€å¤§ä»·å€¼ä¸º 0ï¼Œ å³ f[0][j] 0 æˆç«‹ å¦‚æœ j å±‚å¾ªç¯æ˜¯é€’å¢çš„ï¼š for (int i = 1; i = n; i++) { for (int j = v[i]; j = m; j++) { f[j] = max(f[j], f[j - v[i]] + w[i]); } } å½“è¿˜æœªè¿›å…¥å¾ªç¯æ—¶: f[0] = 0; f[1] = 0; f[2] = 0; f[3] = 0; f[4] = 0; f[5] = 0; f[6] = 0; f[7] = 0; f[8] = 0; f[9] = 0; f[10] = 0; å½“è¿›å…¥å¾ªç¯ i == 1 æ—¶ï¼š f[4] = max(f[4], f[0] + 5); å³max(0, 5) = 5; å³f[4] = 5; f[5] = max(f[5], f[1] + 5); å³max(0, 5) = 5; å³f[5] = 5; f[6] = max(f[6], f[2] + 5); å³max(0, 5) = 5; å³f[6] = 5; f[7] = max(f[7], f[3] + 5); å³max(0, 5) = 5; å³f[7] = 5; é‡ç‚¹æ¥äº†ï¼ï¼ï¼ f[8] = max(f[8], f[4] + 5); å³max(0, 5 + 5) = 10; å³f[8] = 10; è¿™é‡Œå°±å·²ç»å‡ºé”™äº† å› ä¸ºæ­¤æ—¶å¤„äº i == 1 è¿™ä¸€å±‚ï¼Œå³ç‰©å“åªæœ‰ä¸€ä»¶ï¼Œä¸å­˜åœ¨å•ä»¶ç‰©å“æ»¡è¶³ä»·å€¼ä¸º10 æ‰€ä»¥å·²ç»å‡ºé”™äº†ã€‚ å¦‚æœ j å±‚å¾ªç¯æ˜¯é€†åºçš„ï¼š for (int i = 1; i = n; i++) { for (int j = m; j = v[i]; j--) { f[j] = max(f[j], f[j - v[i]] + w[i]); } } æ¨¡æ‹Ÿè¿‡ç¨‹å¦‚ä¸‹ï¼š å½“è¿˜æœªè¿›å…¥å¾ªç¯æ—¶: f[0] = 0; f[1] = 0; f[2] = 0; f[3] = 0; f[4] = 0; f[5] = 0; f[6] = 0; f[7] = 0; f[8] = 0; f[9] = 0; f[10] = 0; å½“è¿›å…¥å¾ªç¯ i == 1 æ—¶ï¼šw[i] = 5; v[i] = 4; j = 10ï¼šf[10] = max(f[10], f[6] + 5); å³max(0, 5) = 5; å³f[10] = 5; j = 9 ï¼šf[9] = max(f[9], f[5] + 5); å³max(0, 5) = 5; å³f[9] = 5; j = 8 ï¼šf[8] = max(f[8], f[4] + 5); å³max(0, 5) = 5; å³f[8] = 5; j = 7 ï¼šf[7] = max(f[7], f[3] + 5); å³max(0, 5) = 5; å³f[7] = 5; j = 6 ï¼šf[6] = max(f[6], f[2] + 5); å³max(0, 5) = 5; å³f[6] = 5; j = 5 ï¼šf[5] = max(f[5], f[1] + 5); å³max(0, 5) = 5; å³f[5] = 5; j = 4 ï¼šf[6] = max(f[4], f[0] + 5); å³max(0, 5) = 5; å³f[4] = 5; å½“è¿›å…¥å¾ªç¯ i == 2 æ—¶ï¼šw[i] = 6; v[i] = 5; j = 10ï¼šf[10] = max(f[10], f[5] + 6); å³max(5, 11) = 11; å³f[10] = 11; j = 9 ï¼šf[9] = max(f[9], f[4] + 6); å³max(5, 11) = 5; å³f[9] = 11; j = 8 ï¼šf[8] = max(f[8], f[3] + 6); å³max(5, 6) = 6; å³f[8] = 6; j = 7 ï¼šf[7] = max(f[7], f[2] + 6); å³max(5, 6) = 6; å³f[7] = 6; j = 6 ï¼šf[6] = max(f[6], f[1] + 6); å³max(5, 6) = 6; å³f[6] = 6; j = 5 ï¼šf[5] = max(f[5], f[0] + 6); å³max(5, 6) = 6; å³f[5] = 6; å½“è¿›å…¥å¾ªç¯ i == 3 æ—¶: w[i] = 7; v[i] = 6; j = 10ï¼šf[10] = max(f[10], f[4] + 7); å³max(11, 12) = 12; å³f[10] = 12; j = 9 ï¼šf[9] = max(f[9], f[3] + 6); å³max(11, 6) = 11; å³f[9] = 11; j = 8 ï¼šf[8] = max(f[8], f[2] + 6); å³max(6, 6) = 6; å³f[8] = 6; j = 7 ï¼šf[7] = max(f[7], f[1] + 6); å³max(6, 6) = 6; å³f[7] = 6; j = 6 ï¼šf[6] = max(f[6], f[0] + 6); å³max(6, 6) = 6; å³f[6] = 6; å°±æ¨¡æ‹Ÿä¸€ä¸‹å‘ç°æ²¡æœ‰é”™è¯¯ï¼Œå³é€†åºå°±å¯ä»¥è§£å†³è¿™ä¸ªä¼˜åŒ–çš„é—®é¢˜äº†ã€‚ ä»1å¼€å§‹ä»v[i]å¼€å§‹ ä»1å¼€å§‹çš„éƒ½æ˜¯æœ´ç´ äºŒç»´æ•°ç»„åšæ³•ã€‚å› ä¸ºäºŒç»´æ•°ç»„åœ¨jv[i]æ—¶ä¹Ÿè¦æœ‰æ•°æ®ï¼Œä¾›åç»­çŠ¶æ€è½¬ç§»æ—¶ä½¿ç”¨ã€‚ ä¸€ç»´æ•°ç»„ä¸éœ€è¦ã€‚å› ä¸ºä¸€ç»´çš„æƒ…å†µä¸‹ï¼Œèµ‹å€¼è¯­å¥ä»f[i] [j] f[i-1] [j] å˜æˆäº† f[ j ] f[ j ] ,ä¸¤è€…ç­‰ä»·ï¼Œä½†å³å¼å¯ä»¥æ¶ˆæ‰ã€‚ åˆ¤æ–­è¯­å¥æŒªåˆ°å¾ªç¯é‡Œï¼Œç»“æŸã€‚ åŒç†ï¼Œçœç•¥çš„f[i] = f[i] ç­‰ä»·äº f[i][j] = f[i-1][j] å› ä¸ºèµ‹å€¼è¯­å¥é‡Œçš„ f[i] f[i] ,å³å€¼ä¸ºä¸Šä¸€å±‚å¾ªç¯é‡Œçš„ f[i] ï¼Œå³ i - 1 ã€‚ è¿™ä¸ªf[j]è¿˜æ²¡æœ‰åœ¨ç¬¬ i å±‚çš„å¾ªç¯é‡Œè¢«æ›´æ–°è¿‡ã€‚ kçš„å‡ºç°kåœ¨å¤šé‡èƒŒåŒ…ã€åˆ†ç»„èƒŒåŒ…ï¼ˆç‰¹æ®Šå¤šé‡èƒŒåŒ…ï¼‰ã€å®Œå…¨èƒŒåŒ…å•ç‹¬çš„æœ´ç´ å½¢å¼å‡ºç°ã€‚ 01èƒŒåŒ…åªæœ‰é€‰æˆ–ä¸é€‰ä¸¤ç§æƒ…å†µï¼Œä¸éœ€è¦ k çš„å¼•å…¥ã€‚ å®Œå…¨èƒŒåŒ…ä¸€ç»´å½¢å¼åœ¨å¾ªç¯ä¸­å·²ç»åŒ…å«äº†â€œé‡å¤è°ƒç”¨ï¼Œå‘ä¸Šæ›´æ–°â€çš„ç›®çš„ï¼Œä¸éœ€è¦å†å¼•å…¥ kã€‚ è¿™ä¸€ç‚¹å¯ä»¥å‚è€ƒ æ­£åºé€†åºé—®é¢˜ã€‚ å®æˆ˜æ¼”ç»ƒæœ€å¤§æ•°å­—ï¼ˆè“æ¡¥æ¯2022å›½èµ›-Dï¼‰ã€é—®é¢˜æè¿°ã€‘ç»™å®šä¸€ä¸ªæ­£æ•´æ•° Nã€‚ä½ å¯ä»¥å¯¹ N çš„ä»»æ„ä¸€ä½æ•°å­—æ‰§è¡Œä»»æ„æ¬¡ä»¥ä¸‹ 2 ç§æ“ä½œï¼š1.å°†è¯¥ä½æ•°å­—åŠ  1ã€‚å¦‚æœè¯¥ä½æ•°å­—å·²ç»æ˜¯ 9ï¼ŒåŠ  1 ä¹‹åå˜æˆ 0ã€‚2.å°†è¯¥ä½æ•°å­—å‡ 1ã€‚å¦‚æœè¯¥ä½æ•°å­—å·²ç»æ˜¯ 0ï¼Œå‡ 1 ä¹‹åå˜æˆ 9ã€‚ä½ ç°åœ¨æ€»å…±å¯ä»¥æ‰§è¡Œ 1 å·æ“ä½œä¸è¶…è¿‡ A æ¬¡ï¼Œ2 å·æ“ä½œä¸è¶…è¿‡ B æ¬¡ã€‚è¯·é—®ä½ æœ€å¤§å¯ä»¥å°† N å˜æˆå¤šå°‘ï¼Ÿã€è¾“å…¥æ ¼å¼ã€‘ç¬¬ä¸€è¡ŒåŒ…å« 3 ä¸ªæ•´æ•°ï¼šN, A, Bã€‚ã€è¾“å‡ºæ ¼å¼ã€‘ä¸€ä¸ªæ•´æ•°ä»£è¡¨ç­”æ¡ˆã€‚ã€æ ·ä¾‹è¾“å…¥ã€‘123 1 2ã€æ ·ä¾‹è¾“å‡ºã€‘933ã€æ ·ä¾‹è¯´æ˜ã€‘å¯¹ç™¾ä½æ•°å­—æ‰§è¡Œ 2 æ¬¡ 2 å·æ“ä½œï¼Œå¯¹åä½æ•°å­—æ‰§è¡Œ 1 æ¬¡ 1 å·æ“ä½œã€‚ã€è¯„æµ‹ç”¨ä¾‹è§„æ¨¡ä¸çº¦å®šã€‘å¯¹äº 30% çš„æ•°æ®ï¼Œ1 â‰¤ N â‰¤ 100; 0 â‰¤ A, B â‰¤ 10å¯¹äº 100% çš„æ•°æ®ï¼Œ1 â‰¤ N â‰¤ 1017; 0 â‰¤ A, B â‰¤ 100 æœ‰Aå’ŒBä¸¤ç§é€‰æ‹©ï¼› å¯¹äºç¬¬ i ä½æ•°å­—ï¼Œ é€‰ j æ¬¡ A ï¼Œç›¸å½“äºä¸€ä»¶ç‰©å“ï¼š èŠ±è´¹æ˜¯ j ï¼Œä»·å€¼æ˜¯ 10^n-1 * num (num:å½“å‰ä½çš„æ•°å­—) é€‰ k æ¬¡ Bï¼Œç›¸å½“äºä¸€ä»¶ç‰©å“ï¼š èŠ±è´¹æ˜¯ kï¼Œä»·å€¼æ˜¯ 10^n-1 * num æ•°æ®ç»“æ„ï¼šf[i] [j] [k] : jA , kB ã€‚å«ä¹‰ä¸ºç¬¬ i ä½æ•°å­—æ‹¥æœ‰ j æ¬¡ A å’Œ k æ¬¡ Bçš„æœ€å¤§å€¼ã€‚ çŠ¶æ€è½¬ç§»ï¼š f[i] [j] [k] = max(f[i] [j] [k] , f[i][j-x][k]);f[i] [j] [k] = max(f[i] [j] [k] , f [i][j][k-y]); #includeiostream#includecmathusing namespace std;const int N = 20,M = 110; //N æœ€å¤§æ•°å­—ä½æ•° ï¼Œ M é€‰æ‹©æœ€å¤§æ¬¡æ•°long long f[N][M][M]; //f(i,j,k) : ç¬¬ n ä½ æ‹¥æœ‰ j æ¬¡ é€‰æ‹©A å’Œ k æ¬¡ é€‰æ‹©B çš„æœ€å¤§å€¼int A,B;string s; //char s[N] ä¹Ÿok int getMod(int x,int mod)//å–æ¨¡ return (x%mod+mod)%mod;int main(void)\tcins;\tcinAB;\tint n = s.size();\tfor(int i = 1;i=n;i++) for(int p = 0;p=9;p++) int x = s[i-1] - 0; //Str ä»0å¼€å§‹ï¼ //è¿™é‡Œæ³¨æ„å‰åé¡ºåºï¼Œä»xåŠ åˆ°a /ä»xå‡åˆ°a int a = getMod(p-x,10); // é€šè¿‡é€‰æ‹©Aä»tå–åˆ°pä½çš„èŠ±è´¹ int b = getMod(x-p,10); // é€šè¿‡é€‰æ‹©Bä»tå–åˆ°pä½çš„èŠ±è´¹ //æšä¸¾å½“æ‹¥æœ‰ä»·å€¼ aï¼Œb çš„æƒ…å†µ for(int j=0;j=A;j++) for(int k=0;k=B;k++) //pow:æ›´æ–°åˆ°å½“å‰å€¼çš„ä»·å€¼ if(j=a) f[i][j][k] = max(f[i][j][k],f[i-1][j-a][k]+ (long long)pow(10,n-i)*p); if(k=b) f[i][j][k] = max(f[i][j][k],f[i-1][j][k-b]+ (long long)pow(10,n-i)*p); coutf[n][A][B]; return 0; ä¸ºä»€ä¹ˆèƒŒåŒ…é‡Œï¼Œ if(j = x) f[i][j][k] = max(f[i][j][k] , f[i - 1][j - x][k] + f10[n - i] * p) ;if(k = y) f[i][j][k] = max(f[i][j][k] , f[i - 1][j][k - y] + f10[n - i] * p) ; ä¸å†™æˆä¸‹é¢çš„å½¢å¼ï¼Ÿ max(f[i-1][j][k] , f[i - 1][j - x][k] + f10[n - i] * p) ;// â†‘ å› ä¸º j å’Œ k ä»0å¼€å§‹éå†ï¼Œå·²ç»æŠŠä¸é€‰æ‹©Aæˆ–Bçš„æƒ…å†µåŒ…æ‹¬äº†ã€‚ è¿™å°±å¥½æ¯”å¤šé‡èƒŒåŒ…é‡Œï¼Œé€‰æ‹© 0 ä¸ªèƒŒåŒ…ï¼ˆk0) æ—¶ï¼Œå·²ç»å›Šæ‹¬äº† f[i][j] = f[i-1][j] çš„æƒ…å†µã€‚ f[i-1] [j-k* v[i]]+k*w[i]); åœ¨ k 0 æ—¶ä¸æ­£æ˜¯é‚£ç§æƒ…å†µï¼Ÿ"},{"title":"çº¿æ€§DP","path":"/wiki/algorithm/çº¿æ€§DP.html","content":"DPå‰è¨€ä¸‹é¢ä¸€ç³»åˆ—çš„çº¿æ€§dpé—®é¢˜æ›´ä¾èµ–é—«æ°dpåˆ†ææ³•çš„å‘æŒ¥ã€‚ è¿™é‡Œè®°å½•å‡ æ¡ç»éªŒï¼š å½“çŠ¶æ€è®¡ç®—æ–¹ç¨‹ä¸­ï¼Œåœ¨éå†æ—¶å‡ºç°äº† f[i-1] çš„å­—æ ·ï¼Œé‚£ä¹ˆæ•°ç»„ä¸‹æ ‡å°±è¦ä»1å¼€å§‹ï¼Œæ¥é˜²æ­¢è´Ÿæ•°ä¸‹æ ‡å’Œè¶Šç•Œã€‚ çŠ¶æ€è¡¨ç¤ºï¼Œæˆ‘ä»¬åˆ’åˆ†é›†åˆçš„åŸåˆ™ä¸º â€œä¸é‡ä¸æ¼â€ï¼šä¸é‡å¤ï¼Œä¸é—æ¼ã€‚ å½“çŠ¶æ€å±æ€§ è¦æ±‚å– sum é›†åˆçš„æ€»å’Œæ—¶ï¼Œä¸é‡å¤çš„åŸåˆ™å¾ˆé‡è¦ã€‚ ä½†çŠ¶æ€å±æ€§å– maxmin é›†åˆçš„æœ€å€¼æ—¶ï¼Œé›†åˆé—´å…ƒç´ å‘ç”Ÿé‡å¤ä¸ä¼šå½±å“ç»“æœã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 1,2,3 æ±‚æœ€å€¼ï¼šmax max(max (1,2) , max (2,3) )ã€‚ è¿™é‡Œ2å‘ç”Ÿäº†é‡å¤ï¼Œä½†ä¸å½±å“æœ€å¤§å€¼3çš„æ±‚å–ã€‚ æ±‚æ€»å’Œï¼šsum sum(sum (1,2) , sum(2,3) )ã€‚ è¿™é‡Œ2å‘ç”Ÿäº†é‡å¤ï¼Œå½±å“äº†æ€»å’Œçš„æ±‚å–ï¼ˆ2è¢«åŠ äº†ä¸¤æ¬¡ï¼‰ çŠ¶æ€è¡¨ç¤ºåˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š é›†åˆçš„ç»´åº¦ï¼šä¸€ç»´æ•°ç»„ f[i] èƒ½æ±‚å‡ºç­”æ¡ˆå—ï¼Ÿä¸èƒ½çš„è¯å°±ç”¨äºŒç»´æ•°ç»„f[i] [j] ï¼Œè¿˜ä¸è¡Œå°±ä¸‰ç»´ã€‚ é›†åˆçš„è¡¨ç¤ºï¼šæ¯ä¸ªé›†åˆï¼Œå®ƒçš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿè¿™ä¸ªæ„ä¹‰è¦èƒ½æ¦‚æ‹¬é¢˜ç›®çš„æ‰€æœ‰æƒ…å†µã€‚ é›†åˆçš„å±æ€§ï¼šæ±‚sumè¿˜æ˜¯maxï¼Ÿå±æ€§æœ‰æ—¶ä¼šå½±å“çŠ¶æ€è®¡ç®—æ–¹ç¨‹çš„å±•å¼€ã€‚ ä¸€ä¸ªç®€å•çš„æ•°å­¦æ¨¡å‹ï¼š é›†åˆAï¼ša1,a2,a3 â€¦ an é›†åˆBï¼ša1+w,a2+2, â€¦ an+w åˆ™æœ‰ï¼šmin(A)+w = min(B) æˆ– ï¼šmin(A) = min(B) - w C++è¯­è¨€ï¼Œä¸€ç§’å¤„ç†æ•°æ®å¤§å°ä¸º 10^8^å·¦å³ï¼Œå°½é‡æŠŠå¤æ‚åº¦æ§åˆ¶åœ¨10^7^ï¼Œæœ€å¤š10^8^ çº¿æ€§DPæ•°å­—ä¸‰è§’å½¢ DPåˆ†æ çŠ¶æ€è¡¨ç¤ºï¼š 1 çŠ¶æ€è½¬ç§»ï¼š æœ´ç´ åšæ³•#includeiostreamusing namespace std ;const int N = 510 , INF = 1e9;int f[N][N];int a[N][N];int n;int main(void) //åˆå§‹åŒ–æ•°æ® cinn; for(int i=1;i=n;i++) for(int j=1;j=i;j++) scanf(%d,a[i][j]); //dpæ•°ç»„èµ‹åˆå€¼ (ä¸‹æ ‡ä»1å¼€å§‹ï¼Œä¸ä¼šäº§ç”Ÿè¶Šç•Œé—®é¢˜ã€‚ä½†ä¸‹æ ‡ä¸º0çš„æ•°æ®è¦æå‰èµ‹åˆå€¼ï¼Œä¹Ÿå°±æ˜¯INF) for(int i=0;i=n;i++) for(int j=0;j=i+1;j++) //åˆå€¼èŒƒå›´æ˜¯[0,i+1] ï¼Œå·¦å³ç«¯ç‚¹ 0å’Œi+1 éƒ½ä¼šç”¨åˆ°ã€‚ f[i][j] = -INF; f[1][1] = a[1][1]; //è½¬ç§»æ–¹ç¨‹çš„åˆå€¼ã€‚ //çŠ¶æ€è½¬ç§» for(int i=2;i=n;i++) for(int j=1;j=i;j++) f[i][j] = max(f[i-1][j]+a[i][j],f[i-1][j-1]+a[i][j]); //è¾“å‡º int res = -INF; for(int i=1;i=n;i++) res = max(res,f[n][i]); coutres; æ›´ä¼˜é›…çš„å†™æ³•#include bits/stdc++.husing namespace std;const int N = 510;int f[N][N];int n;int main() cin n; for (int i = 1; i = n; i++) for (int j = 1; j = i; j++) cin f[i][j]; for (int i = n - 1; i = 1; i--) for (int j = 1; j = i; j++) f[i][j] = max(f[i + 1][j + 1], f[i + 1][j]) + f[i][j]; cout f[1][1] endl; è¯¥åšæ³•æ˜¯ä»æœ€ä¸‹æ–¹ï¼Œå‘ä¸Šæ¨ã€‚ æœ´ç´ åšæ³•æ˜¯ä»ç¬¬äºŒå±‚ï¼Œå‘ä¸‹æ¨ã€‚ ä¸€ç»´ä¼˜åŒ–(æœ´ç´ ç‰ˆæœ¬) #include iostream#include algorithmusing namespace std;const int N = 510, INF ..................................................................... = -1e9;int a[N][N];int f[N];int n, m;int main() cin n; for (int i = 1; i = n; i ++) for (int j = 1; j = i; j ++) cin a[i][j]; for (int i = 0; i = n + 1; i ++ ) f[i] = INF; f[1] = a[1][1]; for (int i = 2; i = n; i ++) for (int j = i; j = 1; j --) f[j] = max(f[j] + a[i][j], f[j - 1] + a[i][j]); int res = INF; for (int i = 1; i = n; i ++) res = max(res, f[i]); cout res endl; return 0; æœ€é•¿ä¸Šå‡å­åºåˆ— æœ´ç´ åšæ³•é—«æ°dpï¼š çŠ¶æ€è¡¨ç¤ºï¼š f[i] , 1.é›†åˆï¼šæ‰€æœ‰ä»¥ç¬¬iä¸ªæ•°å­—ç»“å°¾çš„ä¸Šå‡å­åºåˆ— â€‹ 2.å±æ€§ï¼šmax çŠ¶æ€è®¡ç®—ï¼šï¼ˆæ³¨æ„ï¼Œæœ¬é¢˜dpæœªç”¨åˆ° i-1 çš„é€’å¢å…¬å¼ï¼Œæ•… i çš„ä¸‹æ ‡ä»0å¼€å§‹ï¼‰ â€‹ åˆ†æé›†åˆï¼š ï¼ˆ 0 | 1 | 2 | 3 |â€¦| i-1ï¼‰ åœ¨è¯¥é›†åˆä¸­ï¼Œé¢˜ç›®è¦æ±‚æ•°å­—å¤§å°é€æ¸ä¸Šå‡ï¼Œå³ An-1 An ã€‚ å¦‚æœå‡ºç°An-1Ançš„æƒ…å†µï¼Œæˆ‘ä»¬ä¸ä¼šæŠŠå®ƒåŒ…å«åœ¨é›†åˆä¸­å»ï¼Œæ¢è¨€ä¹‹ï¼Œæ‰€æ±‚çš„éƒ½æ˜¯æ»¡è¶³é¢˜æ„çš„æŸä¸ªé›†åˆçš„æœ€å¤§å€¼ã€‚ å¯¹äºå½¢å¦‚ AiAj çš„ä¸Šå‡å­åºåˆ—ï¼Œå¯çŸ¥f[j]çš„æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œå³f[i]çš„æœ€é•¿ä¸Šå‡å­åºåˆ—+1ã€‚ æ•…è®¡ç®—æ–¹ç¨‹ï¼šf[ i ] max( f[ j ] +1 ), j 0,1,2,3â€¦ i-1 ä¸” ( a[i]a[j] ) ã€‚ äºŒåˆ†ï¼ˆæ•°æ®åŠ å¼ºç‰ˆï¼‰ æ€è·¯ï¼š åœ¨æœ´ç´ åšæ³•çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬éœ€è¦è¿½åŠ ä¸€ä¸ªé›†åˆ,å†æ¬¡åˆ†æï¼Œæ¥è¾¾åˆ°ä¼˜åŒ–å‰ªæçš„æ•ˆæœã€‚ åˆ†æï¼šä»¥ 3 1 4 8 5 ä¸ºä¾‹ã€‚ å¦‚æœä¸€ä¸ªå­åºåˆ—çš„é•¿åº¦ä¸º1ï¼Œé‚£è¯¥åºåˆ—çš„æœ«å°¾å€¼å¯ä»¥å– 1 ï¼Œä¹Ÿå¯ä»¥å– 8ã€‚ å¦‚æœè¦æœ€é•¿å­åºåˆ—ï¼Œé‚£æœ«å°¾å€¼å°±å¿…é¡»æœ€å°ï¼Œä¹Ÿå°±æ˜¯min(1,8) 1 ï¼Œå–1ä¸å–8ã€‚ ä¸ºäº†å®ç°è¯¥åŠŸèƒ½ï¼š è¿½åŠ ä¸€ä¸ªæ•°ç»„q[i] ,è¿™ä¸ªæ•°ç»„è¡¨ç¤ºé•¿åº¦ä¸ºiæ—¶ï¼Œç»“å°¾æœ€å°çš„åºåˆ—å€¼ä¸ºq[i]ã€‚æ‰€ä»¥è¯¥æ•°ç»„æœ‰æ•ˆå€¼çš„é•¿åº¦ï¼Œå°±æ˜¯æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦ã€‚ éå†aæ•°ç»„é‡Œé¢çš„æ•°ï¼Œç„¶ååœ¨qï¼ˆè¿™ä¸ªæ•°ç»„çš„é•¿åº¦å°±æ˜¯ç­”æ¡ˆï¼‰è¿™ä¸ªæ•°ç»„é‡Œé¢æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå¤§äºä¸”æœ€é è¿‘ä»–çš„æ•°ï¼Œè‹¥æœä¸å­˜åœ¨è¯ï¼Œè¯´æ˜è¿™ä¸ªæ•°æ˜¯åœ¨qæ‰€æœ‰çš„æ•°ä¸­æ˜¯æœ€å¤§çš„ï¼ˆè¿™æ—¶ä¸‹æ ‡ä¹Ÿå·²ç»æ‰«æåˆ°qæ•°ç»„çš„æœ€å³è¾¹ï¼Œrè¿™ä¸ªä¸‹æ ‡å·²ç»å®šä½åˆ°qçš„æœ€å³è¾¹ï¼Œå°†å…¶+1ï¼Œæ›´æ–°qé•¿åº¦ï¼ˆå³ï¼šæ›´æ–°ç­”æ¡ˆï¼‰å’Œæ–°å…ƒç´ çš„å€¼ï¼‰ï¼Œè‹¥å­˜åœ¨ï¼ˆå³ï¼šè¯¥ç‚¹çš„å€¼ä¸æ˜¯ä¸Šå‡åœ°ï¼‰ï¼Œr+1ä¹Ÿä¸ä¼šå¢åŠ qçš„é•¿åº¦ï¼ˆå› ä¸ºä¸æ˜¯ä¸Šå‡çš„æƒ…å†µï¼Œæ‰€ä»¥è¿™é‡Œç­”æ¡ˆä¸ä¼šæ›´æ–°ï¼‰ï¼Œè¯´æ˜è¯¥ç‚¹æœ€é•¿å­åºåˆ—ä¸€å®šæ˜¯å‰é¢å…¶ä¸­çš„æŸä¸ªç­”æ¡ˆï¼Œåªéœ€è¦å°†é‡Œé¢åœ°æœ€é è¿‘çš„é‚£ä¸ªå…ƒç´ è¿›è¡Œæ›´æ–°å³å¯ #include iostream#include algorithmusing namespace std;const int N = 100010;int n;int a[N] = 7,3,4,5,1,8,3;int q[N];int main() n=7; int len = 0; for (int i = 0; i n; i ++ ) int l = 0, r = len; while (l r) // qé‡Œæœ‰æ— å¤§äºå½“å‰a[i]: å­˜åœ¨åŸåœ°ï¼Œä¸å­˜åœ¨çš„è¯æ›´æ–° // ä¸å­˜åœ¨çš„è¯å°±æ˜¯ r = 0 // å­˜åœ¨çš„è¯å°±æ˜¯ r != 0 ï¼Œå³å¤§äº1çš„çº¿æ®µï¼Œæ›´æ–°len // ï¼ˆå½“ç„¶ï¼Œå¦‚æœæœ‰å¤šä¸ªå¤§äºa[i]çš„æ•°ï¼Œåˆ™é€‰æ‹©æœ€é è¿‘a[i]çš„ã€‚ï¼‰ int mid = l + r + 1 1; if (q[mid] a[i]) l = mid;// check() else r = mid - 1; len = max(len, r + 1); q[r + 1] = a[i]; printf(i = %d ,r = %d ,a[i]=%d , len = %d; ,i,r,a[i],len); for(int i=0;in;i++) coutq[i] ; coutendl; ///a[N] = 7,3,4,5,1,8,3;\tfor(int i =0;in;i++) printf(q%d=%d ,i,q[i]);\tcoutendl; printf(%d , len); return 0; æ³¨ï¼šæ­¤ä»£ç å¹¶éæœ€ç»ˆé¢˜è§£ï¼Œå› ä¸ºä¿ç•™äº†è°ƒè¯•éƒ¨åˆ†çš„è¾“å‡ºè¯­å¥å’Œæ³¨é‡Šã€‚ ç»“æœå±•ç¤ºï¼š æœ€é•¿å…¬å…±å­åºåˆ— é—«æ°dpï¼š çŠ¶æ€è¡¨ç¤ºï¼š f[i] [j] , 1.é›†åˆï¼šå­—ç¬¦ä¸²Açš„å‰iä¸ªå­—ç¬¦ï¼Œå’Œå­—ç¬¦ä¸²Bçš„å‰jä¸ªå­—ç¬¦çš„å…¬å…±å­åºåˆ— â€‹ 2.å±æ€§ï¼šmax çŠ¶æ€è®¡ç®—ï¼š ä»¥ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ«ä½å­—ç¬¦ï¼Œå³A[i] å’Œ B[j] åˆ’åˆ†ï¼Œæœ‰å››ç§æƒ…å†µï¼š 00 ï¼šæœ€é•¿å…¬å…±å­åºåˆ—çš„æœ«å°¾å­—ç¬¦ï¼Œå³ä¸æ˜¯A[i],ä¹Ÿä¸æ˜¯B[j] ã€‚æ‰€ä»¥å¾ˆè‡ªç„¶ï¼Œæœ‰ f(i,j) f(i-1,j-1) 11 : æœ€é•¿å…¬å…±å­åºåˆ—çš„æœ«å°¾å­—ç¬¦,å³æ˜¯A[i],åˆæ˜¯B[j]ã€‚æ‰€ä»¥å¿…ç„¶æœ‰A[i] B[j] ä¸”f(i,j) f(i-1,j-1)+1 01 : æœ«ä½ä¸æ˜¯A[i] ï¼Œä½†å´æ˜¯B[j]ã€‚ç»ä¸‹é¢çš„åˆ†æï¼Œæ­¤ç§æƒ…å†µä¸º f(i,j) f(i-1,j) è¿™é‡Œæˆ‘ä»¬ä¼šæƒ³å½“ç„¶è®¤ä¸ºï¼Œf(i,j) f(i-1,j)ã€‚ä½†ä¸æ˜¯è¿™æ ·çš„ã€‚å› ä¸ºf(i-1,j) åŒæ ·åŒ…å«äº† ä¸é€‰æ‹©B[j]çš„æƒ…å†µï¼Œè¿™ä¸æˆ‘ä»¬çš„é›†åˆæƒ…å†µä¸ç¬¦ã€‚ä½†ç”±äºæ­¤é¢˜æ±‚çš„æ˜¯æœ€å¤§å€¼ï¼Œæ ¹æ®å‰è¨€åŸåˆ™2ï¼Œæ‰€ä»¥é‡å¤ä¸å½±å“ç»“æœã€‚ 10 : ä¸01åŒç†ï¼Œé‡å¤æ— æ‰€è°“ï¼Œå…¨è¦†ç›–å°±è¡Œã€‚æ­¤ç§æƒ… å†µä¸º f(i,j) f(i,j-1) â€‹ åˆ†æé›†åˆï¼š ï¼ˆ 00|01|10|11ï¼‰ â€‹ é›†åˆ00æ˜¯è¢«åŒ…å«åœ¨01å’Œ10çš„é›†åˆä¸­çš„ã€‚æ‰€ä»¥åœ¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­çœå»00ã€‚ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š f[i][j] = max(f[i - 1][j], f[i][j - 1]); if (a[i] == b[j]) f[i][j] = max(f[i][j], f[i - 1][j - 1] + 1); æœ´ç´ åšæ³•æšä¸¾iï¼Œj â€”â€” çŠ¶æ€è½¬ç§» #includeiostreamusing namespace std ;const int N = 1010;int n,m;char a[N],b[N];int f[N][N];int main(void) cinnm(a+1)(b+1); //ä¸‹æ ‡ä»1å¼€å§‹ for(int i=1;i=n;i++) for(int j=1;j=m;j++) f[i][j] = max(f[i-1][j],f[i][j-1]); if(a[i]==b[j]) f[i][j] = max(f[i][j],f[i-1][j-1]+1); printf(%d,f[n][m]); æœ€çŸ­ç¼–è¾‘è·ç¦» æœ´ç´ åšæ³•é—«æ°dpï¼š çŠ¶æ€è¡¨ç¤ºï¼šf(i,j) â€‹\t1.é›†åˆï¼šå°†A[1i] æ“ä½œåä¸B[1j]ç›¸ç­‰çš„æ“ä½œæ–¹å¼ çš„é›†åˆ â€‹\t2.å±æ€§ï¼šmin çŠ¶æ€è®¡ç®—ï¼š ( åˆ  | å¢ | æ”¹ ) åˆ ï¼šåˆ é™¤ä¹‹ååŒ¹é…ã€‚åˆ é™¤å¤šä½™çš„A[i]ï¼Œå³å‰é¢çš„æœ€å°å€¼+1å³ç°åœ¨çš„æœ€å°å€¼ã€‚åˆ™æœ‰f(i,j ) = f(i-1,j)+1 ; å¢ï¼šå¢åŠ ä¹‹ååŒ¹é…ã€‚å³Aå¢åŠ çš„å€¼æ°å¥½æ˜¯B[j] ,åˆ™æœ‰f(i,j) = f(i,j-1)+1 ; æ”¹ï¼šæ›´æ”¹ï¼ˆæœ«å°¾å€¼A[i])ä¹‹ååŒ¹é…ã€‚å³è¦ä¿è¯A[1i-1] å’Œ B[1j-1]æ˜¯åŒ¹é…çš„ï¼Œå†å»æ”¹æœ«ä½ã€‚ åˆ™æœ‰f(i,j) = f(i-1,j-1)+1 ã€‚ æ³¨æ„ï¼šè¿™ä¸€æ­¥è¦åˆ¤æ–­ã€‚å½“A[1i-1]ä¸B[1j-1]åŒ¹é…æ—¶ï¼Œå¦‚æœA[i]B[j] é‚£å°±ä¸éœ€è¦å†æ”¹æœ«ä½ï¼Œæ‰€ä»¥æ­¤æ—¶æƒ…å†µæ˜¯f(i,j) f(i-1,j-1) ä»£ç ï¼š #includeiostreamusing namespace std ;const int N = 1010;int f[N][N] ; //dpæ•°ç»„è¦å»ºå¥½char A[N],B[N];int main(void) int n,m; scanf(%d%s,n,A+1); scanf(%d%s,m,B+1); //dpå‰çš„åˆå§‹åŒ– for(int i=0;i=m;i++) f[0][i] = i; //å½“Açš„å­—ç¬¦ä¸²æ˜¯ç©ºï¼ŒBçš„å­—ç¬¦ä¸²é•¿åº¦ä¸ºiï¼Œæ“ä½œæ•°å³iï¼ˆç¬¬iæ­¥å¢åŠ B[i]ï¼‰ï¼Œi=m Bçš„é•¿åº¦ for(int j=0;j=n;j++) f[j][0] = j; //å½“Bçš„å­—ç¬¦ä¸²æ˜¯ç©ºï¼ŒAçš„å­—ç¬¦ä¸²é•¿åº¦ä¸ºiï¼Œæ“ä½œæ•°å³j (ç¬¬jæ­¥åˆ é™¤A[i]) ï¼Œj=n Açš„é•¿åº¦ for(int i=1;i=n;i++) for(int j=1;j=m;j++) //å¢åˆ  f[i][j] = min(f[i-1][j]+1,f[i][j-1]+1); //æ”¹è¦åˆ¤æ–­ if(A[i]==B[j]) f[i][j] = min(f[i][j],f[i-1][j-1]); else f[i][j] = min(f[i][j],f[i-1][j-1]+1); //è¾“å‡ºç»“æœï¼šæŠŠAçš„å‰nä¸ªå­—æ¯å˜æˆBçš„å‰mä¸ªå­—æ¯ coutf[n][m]; ç¼–è¾‘è·ç¦» æ—¶é—´å¤æ‚åº¦ ï¼šnä¸ªå­—ç¬¦ä¸² , æ¯ä¸ªå­—ç¬¦ä¸²æœ‰ mæ¬¡è¯¢é—® n1000,m1000 å­—ç¬¦ä¸²é•¿åº¦ä¸º10ï¼Œæ¯”å¯¹æ—¶æ˜¯n^2 ,å³10^2 100 æ‰€ä»¥å¤æ‚åº¦ä¸ºï¼š 1000 * 1000 * 100 10^8 , æœ‰ç‚¹ç´§ã€‚ ç»™å®š nä¸ªå­—ç¬¦ä¸²ï¼Œå’Œå½“å‰å­—ç¬¦ä¸²è¿›è¡Œæ¯”è¾ƒï¼Œæ±‚è¾¹ç•Œè·ç¦»ã€‚ å…³é”®ç‚¹åœ¨äºæ±‚è¾¹ç•Œè·ç¦» è¾¹ç•Œè·ç¦»çš„æ±‚æ³•ï¼Œå¯å‚è€ƒä¸Šä¸€é¢˜â€œæœ€çŸ­ç¼–è¾‘è·ç¦»â€œ æœ´ç´ åšæ³•#includeiostream#includecstringusing namespace std ;const int N = 1010;const int M = 15; //10int f[N][N]; //dpæ•°ç»„char str[N][M];//å­—ç¬¦ä¸²æ•°ç»„ï¼Œå­˜å‚¨è¯¢é—®//è¿™é‡Œæ˜¯æœ€çŸ­ç¼–è¾‘è·ç¦»çš„ç®—æ³•ã€‚int edit_distance(char a[],char b[]) int la = strlen(a + 1), lb = strlen(b + 1); for (int i = 0; i = lb; i ++ ) f[0][i] = i; for (int i = 0; i = la; i ++ ) f[i][0] = i; for (int i = 1; i = la; i ++ ) for (int j = 1; j = lb; j ++ ) f[i][j] = min(f[i - 1][j] + 1, f[i][j - 1] + 1); f[i][j] = min(f[i][j], f[i - 1][j - 1] + (a[i] != b[j])); return f[la][lb];int main(void) int n,m; cinnm; for(int i=0;in;i++) scanf(%s,str[i]+1); while(m--) //å¼€å§‹è¯¢é—®ï¼šæ±‚ç»™å®š n ä¸ªå­—ç¬¦ä¸²ä¸­ï¼Œè°å¯ä»¥åœ¨ä¸Šé™æ“ä½œæ¬¡æ•°å†…å˜æˆè¯¢é—®ç»™å‡ºçš„å­—ç¬¦ä¸²ã€‚ char s[M]; int limit; //ä¸Šé™æ¬¡æ•° scanf(%s%d,(s+1),limit); int res = 0; for(int i=0;in;i++) //éå†â€œç»™å®šå­—ç¬¦ä¸²â€ if(edit_distance(str[i],s) = limit ) //åœ¨è¾¹ç•ŒèŒƒå›´å†… res++; coutresendl; return 0;"},{"title":"è´ªå¿ƒ","path":"/wiki/algorithm/è´ªå¿ƒ.html","content":"è´ªå¿ƒ è´ªå¿ƒï¼šæ¯ä¸€æ­¥è¡ŒåŠ¨æ€»æ˜¯æŒ‰æŸç§æŒ‡æ ‡é€‰å–æœ€ä¼˜çš„æ“ä½œæ¥è¿›è¡Œï¼Œ è¯¥æŒ‡æ ‡åªçœ‹çœ¼å‰ï¼Œå¹¶ä¸è€ƒè™‘ä»¥åå¯èƒ½é€ æˆçš„å½±å“ã€‚ å±€éƒ¨æœ€ä¼˜ â†’ æ•´ä½“æœ€ä¼˜ã€‚ åŒºé—´é—®é¢˜åŒºé—´é€‰ç‚¹ç»™å®š N ä¸ªé—­åŒºé—´ [ai,bi ]ï¼Œè¯·ä½ åœ¨æ•°è½´ä¸Šé€‰æ‹©å°½é‡å°‘çš„ç‚¹ï¼Œä½¿å¾—æ¯ä¸ªåŒºé—´å†…è‡³å°‘åŒ…å«ä¸€ä¸ªé€‰å‡ºçš„ç‚¹ã€‚ è¾“å‡ºé€‰æ‹©çš„ç‚¹çš„æœ€å°æ•°é‡ã€‚ ä½äºåŒºé—´ç«¯ç‚¹ä¸Šçš„ç‚¹ä¹Ÿç®—ä½œåŒºé—´å†…ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° Nï¼Œè¡¨ç¤ºåŒºé—´æ•°ã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° ai,biï¼Œè¡¨ç¤ºä¸€ä¸ªåŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ‰€éœ€çš„ç‚¹çš„æœ€å°æ•°é‡ã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤105,âˆ’109â‰¤aiâ‰¤biâ‰¤109 æ­¤é¢˜åŒç†ï¼šæœ€å¤§ä¸ç›¸äº¤åŒºé—´æ•°é‡ ç»™å®š NN ä¸ªé—­åŒºé—´ [ai,bi][ai,bi]ï¼Œè¯·ä½ åœ¨æ•°è½´ä¸Šé€‰æ‹©è‹¥å¹²åŒºé—´ï¼Œä½¿å¾—é€‰ä¸­çš„åŒºé—´ä¹‹é—´äº’ä¸ç›¸äº¤ï¼ˆåŒ…æ‹¬ç«¯ç‚¹ï¼‰ã€‚ æ€è·¯ï¼š å³ç«¯ç‚¹æ’åºï¼Œç›´æ¥å¯¹æ¯”ã€‚ä¸‹é¢æ˜¯é¢˜è§£ å·¦ç«¯ç‚¹æ’åºçš„è¯ï¼Œé€†åºå¯¹æ¯”ã€‚ #includeiostream#includealgorithmusing namespace std;const int N = 1e5+10;pairint,int v[N];bool cmp(pairint,int a,pairint,int b) return a.secondb.second;int main(void) int n;scanf(%d,n); for(int i=0;in;i++) cinv[i].firstv[i].second; sort(v,v+n,cmp); int res = 0,ed = -2e9; for(int i=0;in;i++) if(v[i].firsted) res++; ed = v[i].second; coutres; åŒºé—´åˆå¹¶ç»™å®š N ä¸ªé—­åŒºé—´ [ai,bi][ai,bi]ï¼Œè¯·ä½ å°†è¿™äº›åŒºé—´åˆ†æˆè‹¥å¹²ç»„ï¼Œä½¿å¾—æ¯ç»„å†…éƒ¨çš„åŒºé—´ä¸¤ä¸¤ä¹‹é—´ï¼ˆåŒ…æ‹¬ç«¯ç‚¹ï¼‰æ²¡æœ‰äº¤é›†ï¼Œå¹¶ä½¿å¾—ç»„æ•°å°½å¯èƒ½å°ã€‚ è¾“å‡ºæœ€å°ç»„æ•°ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° Nï¼Œè¡¨ç¤ºåŒºé—´æ•°ã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° ai,biï¼Œè¡¨ç¤ºä¸€ä¸ªåŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°ç»„æ•°ã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤105,âˆ’109â‰¤aiâ‰¤biâ‰¤109 å·¦ç«¯ç‚¹æ’åºï¼š 1.é€»è¾‘è§£é‡Šï¼š å½“ç¬¬cntä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹å°äºå‰cnt - 1ä¸ªåŒºé—´çš„æœ€å°çš„max_ræ—¶ï¼Œå‰cnt -1ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ä¸ä¸€å®šéƒ½å°äºç¬¬cntä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ï¼Œå› ä¸ºæ˜¯æŒ‰ç…§å³ç«¯ç‚¹æ’åºçš„ã€‚å¦‚æœæœ‰äº›åŒºé—´çš„å·¦ç«¯ç‚¹å¤§äºç¬¬cntä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ï¼Œå¹¶ä¸”å¤§äºå¦ä¸€äº›åŒºé—´çš„max_rï¼Œå°±ä¸èƒ½ä¿è¯è¿™cntä¸ªåŒºé—´éƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼ˆå°±æ˜¯ç¬¬cntä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ï¼‰ã€‚ 2.åè¯è§£é‡Šï¼š æŒ‰ç…§å³è¾¹æ’åºçš„è¯ï¼Œå„ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹ä¸èƒ½ä¿è¯å•è°ƒæ€§ï¼Œæ‰€ä»¥æœ‰å¯èƒ½ç¬¬ä¸‰ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹æ¯”ç¬¬ä¸€ä¸ªåŒºé—´çš„å·¦ç«¯ç‚¹è¿˜è¦å·¦è¾¹ï¼Œå®ƒå¯ä»¥ç‰¹åˆ«é•¿ã€‚ åä¾‹ï¼š [1, 3], [2, 5], [4, 100], [10, 13] 3.æ¯”å–»ï¼š æ¯”å¦‚ï¼Œæœ‰nä¸ªäººéœ€è¦ç”¨æ•™å®¤ï¼Œæ¯ä¸ªäººå ç”¨æ•™å®¤çš„èµ·å§‹æ—¶é—´å’Œç»ˆæ­¢æ—¶é—´æ˜¯ä¸ä¸€æ ·çš„ã€‚1ã€å¦‚æœæƒ³çŸ¥é“åªæœ‰ä¸€é—´æ•™å®¤ï¼Œèƒ½å®‰æ’ä¸‹çš„æœ€å¤šä¸å†²çªäººæ•°ï¼ˆä¸æ˜¯æ‰€æœ‰çš„äººéƒ½æœ‰æœºä¼šï¼Œæœ‰çš„ä¼šè¢«èˆæ‰ï¼‰æ˜¯å¤šå°‘ï¼ˆåŒºé—´é€‰ç‚¹å’Œæœ€å¤§ä¸ç›¸äº¤é—®é¢˜ï¼‰ï¼Œé‚£ä¹ˆå½“ç„¶æ˜¯æœ€å…ˆç»“æŸçš„äººæ’åœ¨å‰é¢ï¼Œè¿™æ ·åé¢çš„äººæ‰æœ‰æ›´å¤šæœºä¼šã€‚å¦‚æœæ˜¯æŒ‰å·¦ç«¯ç‚¹æ’åºï¼Œé‚£ä¹ˆå¦‚è¿‡ä¸€ä¸ªäºº0ç‚¹å¼€å§‹ç”¨ï¼Œé‚£ä¹ˆè‚¯å®šä»–æ’åœ¨æœ€å‰é¢ï¼Œä½†æ˜¯å¦‚æœä»–è‡ªå·±å°±å ç”¨äº†24å°æ—¶ï¼Œé‚£ä¹ˆåªèƒ½ç»™ä»–ä¸€ä¸ªäººç”¨äº†ï¼Œè¿™æ ·å°±è¾¾ä¸åˆ°æœ€å¤§çš„æ•ˆæœã€‚æ‰€ä»¥æŒ‰å·¦ç«¯ç‚¹æ’åºã€‚2ã€å¦‚æœæƒ³çŸ¥é“è¿™äº›äººéƒ½å¿…é¡»å®‰æ’ï¼Œæ²¡æœ‰äººè¢«èˆå¼ƒï¼Œè‡³å°‘éœ€è¦å¤šå°‘ä¸ªæ•™å®¤èƒ½å®‰æ’ä¸‹ï¼ˆåŒºé—´åˆ†ç»„é—®é¢˜ï¼‰ã€‚é‚£ä¹ˆè‚¯å®šæ˜¯æŒ‰ç…§å¼€å§‹æ—¶é—´æ’åºï¼Œå¼€å§‹æ—¶é—´è¶Šæ—©è¶Šä¼˜å…ˆã€‚è¿™æ ·æ¯é—´æ•™å®¤éƒ½èƒ½å¾—åˆ°æœ€å……åˆ†çš„åˆ©ç”¨ã€‚ å·å·è¯´ï¼šå®é™…æŒ‰å·¦å³æ— æ‰€è°“çš„ã€‚è¿™é¢˜çš„åŒºé—´åªæ˜¯ä¸€ä¸ªä¸€ç»´åæ ‡ç³»ï¼Œå¦‚æœè¦æŒ‰å³ç«¯ç‚¹æ’åºï¼Œé‚£ä½ å°±ä»å³å¾€å·¦æ‰¾ min_r å¥½äº†ã€‚åªæ˜¯ä¸€ä¸ªæ–¹å‘é—®é¢˜ã€‚ æ€è·¯ï¼š 1.å°†æ‰€æœ‰åŒºé—´æŒ‰å·¦ç«¯ç‚¹ä»å°åˆ°å¤§æ’åº 2.ä»å‰å¾€ååˆ¤æ–­ ï¼š if L[i] Max_r ï¼Œå³æ˜¯å¦èƒ½å°†å…¶æ”¾åˆ°æŸä¸ªç°æœ‰çš„ç»„ä¸­ â€‹ â‘ å¦‚æœå­˜åœ¨ï¼Œå°†å…¶æ”¾è¿›å»ï¼Œå¹¶æ›´æ–°å½“å‰ç»„çš„ MAX_r â€‹ â‘¡å¦‚æœä¸å­˜åœ¨ï¼Œå¼€æ–°ç»„ï¼Œç„¶åå†å°†å…¶æ”¾è¿›å» #include iostream#include algorithm#include queueusing namespace std;const int N = 100010;int n;struct Range int l, r; bool operator (const Range W)const return l W.l; range[N];int main() scanf(%d, n); for (int i = 0; i n; i ++ ) int l, r; scanf(%d%d, l, r); range[i] = l, r; sort(range, range + n); priority_queueint, vectorint, greaterint heap; for (int i = 0; i n; i ++ ) //å°æ ¹å †é‡Œå­˜çš„æ˜¯æ¯ä¸ªåˆ†ç»„çš„æœ€å¤§å³ç«¯ç‚¹ï¼Œ //å½“å‰è¦åˆ¤æ–­çš„åŒºé—´çš„å·¦ç«¯ç‚¹è‡³å°‘è¦å¤§äºå…¶ä¸­ä¸€ä¸ªåˆ†ç»„çš„æœ€å¤§å³ç«¯ç‚¹ï¼Œæ‰ä¼šç”¨æ›´æ–°æ›¿ä»£å¼€æ–°ç»„ã€‚ auto it = range[i]; if (heap.empty() || heap.top() = it.l) heap.push(it.r); //å¼€æ–°ç»„ else heap.pop(); //ä¸å¼€ç»„ï¼Œæ›´æ–°å½“å‰ç»„çš„MAX_rã€‚ heap.push(it.r); printf(%d , heap.size()); return 0; åŒºé—´è¦†ç›–ç»™å®š N ä¸ªé—­åŒºé—´ [ai,bi][ai,bi] ä»¥åŠä¸€ä¸ªçº¿æ®µåŒºé—´ [s,t][s,t]ï¼Œè¯·ä½ é€‰æ‹©å°½é‡å°‘çš„åŒºé—´ï¼Œå°†æŒ‡å®šçº¿æ®µåŒºé—´å®Œå…¨è¦†ç›–ã€‚ è¾“å‡ºæœ€å°‘åŒºé—´æ•°ï¼Œå¦‚æœæ— æ³•å®Œå…¨è¦†ç›–åˆ™è¾“å‡º âˆ’1ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° s å’Œ tï¼Œè¡¨ç¤ºç»™å®šçº¿æ®µåŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚ ç¬¬äºŒè¡ŒåŒ…å«æ•´æ•° Nï¼Œè¡¨ç¤ºç»™å®šåŒºé—´æ•°ã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° ai,biï¼Œè¡¨ç¤ºä¸€ä¸ªåŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæ‰€éœ€æœ€å°‘åŒºé—´æ•°ã€‚ å¦‚æœæ— è§£ï¼Œåˆ™è¾“å‡º âˆ’1ã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤105,âˆ’109â‰¤aiâ‰¤biâ‰¤109,âˆ’109â‰¤sâ‰¤tâ‰¤109 æ€è·¯ï¼š 1.ä»å·¦åˆ°å³æŒ‰å·¦ç«¯ç‚¹æ’åº 2.ä»å‰å¾€åä¾æ¬¡æšä¸¾æ¯ä¸ªåŒºé—´ï¼Œåœ¨æ‰€æœ‰èƒ½è¦†ç›–startçš„åŒºé—´ä¸­ï¼Œé€‰æ‹©å³ç«¯ç‚¹æœ€å¤§çš„åŒºé—´ï¼Œ ç„¶åå°†startæ›´æ–°æˆå³ç«¯ç‚¹æœ€å¤§å€¼ #includeiostream#includealgorithmusing namespace std;const int N = 1e5+10;int st,ed;int n;typedef pairint,int PII;PII range[N];int main(void) scanf(%d%d,st,ed); cinn; for(int i=0;in;i++) int a,b;cinab; range[i] = a,b; sort(range,range+n); bool success = false; int res = 0; for(int i=0;in;i++) int j=i, r = -2e9; while(jn range[j].first=st) //ç¬¬ä¸€æ­¥ï¼šæ‰¾æœ€å¤§å³ç«¯ç‚¹ if(range[j].secondr) r = range[j].second; //r = max(r,range[j].r); j++; if(rst) res = -1; break; res++; //æ”¾åœ¨åˆ¤æ–­å‰ if(r=ed) success = true; break; st =r; //ç¬¬äºŒæ­¥ï¼šæ›´æ–°å·¦ç«¯ç‚¹start i = j-1; if(success) coutres; else cout-1; Q :æœ€åä¸ºä»€ä¹ˆæ˜¯ij-1 è€Œä¸æ˜¯ij ? A :æ¯”å¦‚è¯´ï¼š jæ‰«æåˆ°äº† 2 æ­¤æ—¶while() é€€å‡ºäº† æˆ‘ä»¬ä¸‹æ¬¡ i åº”è¯¥ä» 2å¼€å§‹ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬çš„for()å¾ªç¯ i++ ,iè¿˜ä¼šåŠ 1æ¬¡ æ­¤æ—¶ æˆ‘ä»¬çš„ i3 ç›´æ¥ä» 3 å¼€å§‹å¾ªç¯äº†ï¼Œæ•…éœ€è¦å‡1ã€‚ Q ï¼šé‚£ä¸ºä»€ä¹ˆä¸æŠŠi++å»æ‰ï¼Œç„¶åi jå¥½ç†è§£ä¸€ç‚¹ A ï¼šå› ä¸ºjä¸ä¸€å®šä¼š++,è¿™æ ·å¯èƒ½ä¼šæ­»å¾ªç¯ å“ˆå¤«æ›¼æ ‘ï¼ˆå †ï¼‰åˆå¹¶æœå­åœ¨ä¸€ä¸ªæœå›­é‡Œï¼Œè¾¾è¾¾å·²ç»å°†æ‰€æœ‰çš„æœå­æ‰“äº†ä¸‹æ¥ï¼Œè€Œä¸”æŒ‰æœå­çš„ä¸åŒç§ç±»åˆ†æˆäº†ä¸åŒçš„å †ã€‚ è¾¾è¾¾å†³å®šæŠŠæ‰€æœ‰çš„æœå­åˆæˆä¸€å †ã€‚ æ¯ä¸€æ¬¡åˆå¹¶ï¼Œè¾¾è¾¾å¯ä»¥æŠŠä¸¤å †æœå­åˆå¹¶åˆ°ä¸€èµ·ï¼Œæ¶ˆè€—çš„ä½“åŠ›ç­‰äºä¸¤å †æœå­çš„é‡é‡ä¹‹å’Œã€‚ å¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰çš„æœå­ç»è¿‡ nâˆ’1nâˆ’1 æ¬¡åˆå¹¶ä¹‹åï¼Œå°±åªå‰©ä¸‹ä¸€å †äº†ã€‚ è¾¾è¾¾åœ¨åˆå¹¶æœå­æ—¶æ€»å…±æ¶ˆè€—çš„ä½“åŠ›ç­‰äºæ¯æ¬¡åˆå¹¶æ‰€è€—ä½“åŠ›ä¹‹å’Œã€‚ å› ä¸ºè¿˜è¦èŠ±å¤§åŠ›æ°”æŠŠè¿™äº›æœå­æ¬å›å®¶ï¼Œæ‰€ä»¥è¾¾è¾¾åœ¨åˆå¹¶æœå­æ—¶è¦å°½å¯èƒ½åœ°èŠ‚çœä½“åŠ›ã€‚ å‡å®šæ¯ä¸ªæœå­é‡é‡éƒ½ä¸º 11ï¼Œå¹¶ä¸”å·²çŸ¥æœå­çš„ç§ç±»æ•°å’Œæ¯ç§æœå­çš„æ•°ç›®ï¼Œä½ çš„ä»»åŠ¡æ˜¯è®¾è®¡å‡ºåˆå¹¶çš„æ¬¡åºæ–¹æ¡ˆï¼Œä½¿è¾¾è¾¾è€—è´¹çš„ä½“åŠ›æœ€å°‘ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å°çš„ä½“åŠ›è€—è´¹å€¼ã€‚ ä¾‹å¦‚æœ‰ 33 ç§æœå­ï¼Œæ•°ç›®ä¾æ¬¡ä¸º 1ï¼Œ2ï¼Œ91ï¼Œ2ï¼Œ9ã€‚ å¯ä»¥å…ˆå°† 1ã€21ã€2 å †åˆå¹¶ï¼Œæ–°å †æ•°ç›®ä¸º 33ï¼Œè€—è´¹ä½“åŠ›ä¸º 33ã€‚ æ¥ç€ï¼Œå°†æ–°å †ä¸åŸå…ˆçš„ç¬¬ä¸‰å †åˆå¹¶ï¼Œåˆå¾—åˆ°æ–°çš„å †ï¼Œæ•°ç›®ä¸º 1212ï¼Œè€—è´¹ä½“åŠ›ä¸º 1212ã€‚ æ‰€ä»¥è¾¾è¾¾æ€»å…±è€—è´¹ä½“åŠ›3+12153+1215ã€‚ å¯ä»¥è¯æ˜ 15 ä¸ºæœ€å°çš„ä½“åŠ›è€—è´¹å€¼ã€‚ è¾“å…¥æ ¼å¼ è¾“å…¥åŒ…æ‹¬ä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºæœå­çš„ç§ç±»æ•°ã€‚ ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œç¬¬ i ä¸ªæ•´æ•° ai æ˜¯ç¬¬ iç§æœå­çš„æ•°ç›®ã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºåŒ…æ‹¬ä¸€è¡Œï¼Œè¿™ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œä¹Ÿå°±æ˜¯æœ€å°çš„ä½“åŠ›è€—è´¹å€¼ã€‚ è¾“å…¥æ•°æ®ä¿è¯è¿™ä¸ªå€¼å°äº 231ã€‚ æ•°æ®èŒƒå›´ 1â‰¤nâ‰¤10000,1â‰¤aiâ‰¤20000 #includeiostream#includequeueusing namespace std ;int res;int main(void) priority_queueint,vectorint,greaterint heap; int n;cinn; while(n--) int x ; scanf(%d,x); heap.push(x); while(heap.size()1) int a = heap.top();heap.pop(); int b = heap.top();heap.pop(); res += a+b; heap.push(a+b); printf(%d,res); æ’åºä¸ç­‰å¼æ’é˜Ÿæ‰“æ°´æœ‰ n ä¸ªäººæ’é˜Ÿåˆ° 11 ä¸ªæ°´é¾™å¤´å¤„æ‰“æ°´ï¼Œç¬¬ ii ä¸ªäººè£…æ»¡æ°´æ¡¶æ‰€éœ€çš„æ—¶é—´æ˜¯ tiï¼Œè¯·é—®å¦‚ä½•å®‰æ’ä»–ä»¬çš„æ‰“æ°´é¡ºåºæ‰èƒ½ä½¿æ‰€æœ‰äººçš„ç­‰å¾…æ—¶é—´ä¹‹å’Œæœ€å°ï¼Ÿ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡ŒåŒ…å«æ•´æ•° nã€‚ ç¬¬äºŒè¡ŒåŒ…å« n ä¸ªæ•´æ•°ï¼Œå…¶ä¸­ç¬¬ i ä¸ªæ•´æ•°è¡¨ç¤ºç¬¬ i ä¸ªäººè£…æ»¡æ°´æ¡¶æ‰€èŠ±è´¹çš„æ—¶é—´ tiã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°çš„ç­‰å¾…æ—¶é—´ä¹‹å’Œã€‚ æ•°æ®èŒƒå›´ 1â‰¤nâ‰¤105,1â‰¤tiâ‰¤104 #includeiostream#includealgorithmusing namespace std;const int N = 1e5+10;long long res;int main(void) int a[N],n; cinn; for(int i = 0;in;i++) cina[i]; sort(a,a+n); for(int i=0;in;i++) res += a[i]*(n-1-i); coutres; ç»å¯¹å€¼ä¸ç­‰å¼è´§ä»“é€‰å€åœ¨ä¸€æ¡æ•°è½´ä¸Šæœ‰ N å®¶å•†åº—ï¼Œå®ƒä»¬çš„åæ ‡åˆ†åˆ«ä¸º A1âˆ¼ANã€‚ ç°åœ¨éœ€è¦åœ¨æ•°è½´ä¸Šå»ºç«‹ä¸€å®¶è´§ä»“ï¼Œæ¯å¤©æ¸…æ™¨ï¼Œä»è´§ä»“åˆ°æ¯å®¶å•†åº—éƒ½è¦è¿é€ä¸€è½¦å•†å“ã€‚ ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæ±‚æŠŠè´§ä»“å»ºåœ¨ä½•å¤„ï¼Œå¯ä»¥ä½¿å¾—è´§ä»“åˆ°æ¯å®¶å•†åº—çš„è·ç¦»ä¹‹å’Œæœ€å°ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡Œè¾“å…¥æ•´æ•° Nã€‚ ç¬¬äºŒè¡Œ N ä¸ªæ•´æ•° A1âˆ¼ANã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè·ç¦»ä¹‹å’Œçš„æœ€å°å€¼ã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤1000001â‰¤Nâ‰¤100000,0â‰¤Aiâ‰¤40000 #includeiostream#includealgorithmusing namespace std ;const int N = 1e5+10;int n;int a[N];int res;int main(void) scanf(%d,n); for(int i=0;in;i++) scanf(%d,a[i]); sort(a,a+n); for(int i=0;in;i++) res += abs(a[i]-a[n/2]); coutres; æ¨å‡ºæ¥çš„ä¸ç­‰å¼è€æ‚æŠ€çš„ç‰›å†œæ°‘çº¦ç¿°çš„ N å¤´å¥¶ç‰›ï¼ˆç¼–å·ä¸º1..Nï¼‰è®¡åˆ’é€ƒè·‘å¹¶åŠ å…¥é©¬æˆå›¢ï¼Œä¸ºæ­¤å®ƒä»¬å†³å®šç»ƒä¹ è¡¨æ¼”æ‚æŠ€ã€‚ å¥¶ç‰›ä»¬ä¸æ˜¯éå¸¸æœ‰åˆ›æ„ï¼Œåªæå‡ºäº†ä¸€ä¸ªæ‚æŠ€è¡¨æ¼”ï¼š å ç½—æ±‰ï¼Œè¡¨æ¼”æ—¶ï¼Œå¥¶ç‰›ä»¬ç«™åœ¨å½¼æ­¤çš„èº«ä¸Šï¼Œå½¢æˆä¸€ä¸ªé«˜é«˜çš„å‚ç›´å †å ã€‚ å¥¶ç‰›ä»¬æ­£åœ¨è¯•å›¾æ‰¾åˆ°è‡ªå·±åœ¨è¿™ä¸ªå †å ä¸­åº”è¯¥æ‰€å¤„çš„ä½ç½®é¡ºåºã€‚ è¿™ N å¤´å¥¶ç‰›ä¸­çš„æ¯ä¸€å¤´éƒ½æœ‰ç€è‡ªå·±çš„é‡é‡ Wi ä»¥åŠè‡ªå·±çš„å¼ºå£®ç¨‹åº¦ Siã€‚ ä¸€å¤´ç‰›æ”¯æ’‘ä¸ä½çš„å¯èƒ½æ€§å–å†³äºå®ƒå¤´ä¸Šæ‰€æœ‰ç‰›çš„æ€»é‡é‡ï¼ˆä¸åŒ…æ‹¬å®ƒè‡ªå·±ï¼‰å‡å»å®ƒçš„èº«ä½“å¼ºå£®ç¨‹åº¦çš„å€¼ï¼Œç°åœ¨ç§°è¯¥æ•°å€¼ä¸ºé£é™©å€¼ï¼Œé£é™©å€¼è¶Šå¤§ï¼Œè¿™åªç‰›æ’‘ä¸ä½çš„å¯èƒ½æ€§è¶Šé«˜ã€‚ æ‚¨çš„ä»»åŠ¡æ˜¯ç¡®å®šå¥¶ç‰›çš„æ’åºï¼Œä½¿å¾—æ‰€æœ‰å¥¶ç‰›çš„é£é™©å€¼ä¸­çš„æœ€å¤§å€¼å°½å¯èƒ½çš„å°ã€‚ è¾“å…¥æ ¼å¼ ç¬¬ä¸€è¡Œè¾“å…¥æ•´æ•° Nï¼Œè¡¨ç¤ºå¥¶ç‰›æ•°é‡ã€‚ æ¥ä¸‹æ¥ N è¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸¤ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºç‰›çš„é‡é‡å’Œå¼ºå£®ç¨‹åº¦ï¼Œç¬¬ i è¡Œè¡¨ç¤ºç¬¬ i å¤´ç‰›çš„é‡é‡ Wi ä»¥åŠå®ƒçš„å¼ºå£®ç¨‹åº¦ Siã€‚ è¾“å‡ºæ ¼å¼ è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å¤§é£é™©å€¼çš„æœ€å°å¯èƒ½å€¼ã€‚ æ•°æ®èŒƒå›´ 1â‰¤Nâ‰¤50000,1â‰¤Wiâ‰¤10,000,1â‰¤Siâ‰¤1,000,000,000 æ—¢ç„¶æ˜¯æ¨å‡ºæ¥çš„ä¸ç­‰å¼ï¼Œä¸‹é¢æ¥è´´ä¸‹æ¨ç†è¿‡ç¨‹ï¼š äº¤æ¢å‰ äº¤æ¢å ç¬¬iå¤´ç‰› W1+W2+â€¦W(i-1) - Si W1+â€¦Wi-1+Wi+1 - Si ç¬¬i+1å¤´ç‰› W1+W2+â€¦Wi - S(i+1) W1+â€¦Wi-1 - S(i+1) å»æ‰é‡å¤çš„W1+â€¦.W(i-1) , å¾— äº¤æ¢å‰ äº¤æ¢å ç¬¬iå¤´ç‰› - Si Wi+1 - Si ç¬¬i+1å¤´ç‰› Wi - S(i+1) - S(i+1) é¢˜ç›®æ‰€æ±‚ç­”æ¡ˆä¸ºå±é™©ç³»æ•°æœ€å¤§å€¼çš„æœ€å°å€¼ï¼Œæ‰€ä»¥æ‰¾åˆ°æœ€å¤§å€¼å°±OKã€‚ å¯¹äºä¸Šè¡¨ï¼Œæ˜“çŸ¥ Wi -S(i+1) -S(i+1) , Wi+1-Si -Si ï¼› æ•…äº¤æ¢å‰å–æœ€å¤§å€¼ Wi -S(i+1) ,äº¤æ¢åå»æœ€å¤§å€¼ Wi+1-Si ã€‚ å‡è®¾äº¤æ¢åï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ˜¯æœ€å°å€¼ï¼ˆè¿™æ ·å‡è®¾å¾—åˆ°çš„å¼å­èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ±‚å¾—ç­”æ¡ˆï¼‰ï¼Œåˆ™æœ‰ä¸ç­‰å¼ï¼š Wi - S(i+1) Wi+1 - Si ï¼Œå³äº¤æ¢åå˜å°ã€‚ ç§»é¡¹å¾— Wi + Si Wi+1 + Si+1 ã€‚ æ­¤æ—¶æˆ‘ä»¬å‘ç°ï¼Œè®¾ Q W+S ï¼Œåªéœ€è¦æŒ‰ç…§Qå¯¹è¾“å…¥æ’åº(ä¹Ÿå°±æ˜¯å®Œæˆäº¤æ¢çš„è¿‡ç¨‹)ï¼Œå†ä¾æ¬¡æ¯”è¾ƒã€‚ å–Q1 â€¦ Qi ä¸­çš„æœ€å°å€¼å³å¯ã€‚ #include iostream#include algorithmusing namespace std;typedef pairint, int PII;const int N = 50010;int n;PII cow[N];int main() scanf(%d, n); for (int i = 0; i n; i ++ ) int s, w; scanf(%d%d, w, s); cow[i] = w + s, w; sort(cow, cow + n); int res = -2e9, sum = 0; for (int i = 0; i n; i ++ ) int s = cow[i].first - cow[i].second, w = cow[i].second; res = max(res, sum - s); sum += w; printf(%d , res); return 0; ä»¥å‰çš„é¢˜åœ£è¯èŠ‚æ¥ä¸´äº†ï¼Œåœ£è¯è€äººå‡†å¤‡åˆ†å‘ç³–æœï¼Œç° åœ¨æœ‰å¤šç®±ä¸åŒçš„ç³–æœï¼Œæ¯ç®±ç³–æœæœ‰è‡ªå·±çš„ä»·å€¼å’Œé‡ é‡ï¼Œæ¯ç®±ç³–æœéƒ½å¯ä»¥æ‹†åˆ†æˆä»»æ„æ•£è£…ç»„åˆå¸¦èµ°ã€‚åœ£ è¯è€äººçš„é©¯é¹¿é›ªæ©‡æœ€å¤šåªèƒ½è£…ä¸‹é‡é‡Wçš„ç³–æœï¼Œè¯· é—®åœ£è¯è€äººæœ€å¤šèƒ½å¸¦èµ°å¤šå¤§ä»·å€¼çš„ç³–æœã€‚ #includeiostream#includealgorithm#includememory.h#includeiomanipconst double eps = 1e-6;using namespace std;int W;double V;struct suger\tint w;\tint v;\tbool operator(const suger s) return double(v)/w-double(s.v)/s.weps;\tsugers[110];void greedy(int total,int n)\tfor(int i=0;in;i++) if(total+sugers[i].w=W) total += sugers[i].w; V += sugers[i].v; else V += sugers[i].v* double(W-total)/sugers[i].w; W = W+W-total; break; int main(void) int n,total=0; cinnW; for(int i=0;in;i++) cinsugers[i].vsugers[i].w; sort(sugers,sugers+n);//è‡ªå·±å†™ greedy(total,n); coutfixedsetprecision(1)V; å„åœ°æ”¾äº†å¤šéƒ¨ç”µå½± ï¼Œç»™å®šæ¯éƒ¨ç”µå½±çš„æ”¾æ˜ æ—¶é—´åŒºé—´ï¼ŒåŒºé—´é‡å çš„ç”µå½±ä¸å¯èƒ½åŒæ—¶ çœ‹ï¼ˆç«¯ç‚¹å¯ä»¥é‡åˆï¼‰ï¼Œé—®æé›·æœ€å¤šå¯ä»¥çœ‹å¤šå°‘éƒ¨ç”µå½±ã€‚ int total;struct film\tint s;\tint e;\tbool operator(const film f) return ef.e; f,films[110];int main(void) int n;cinn; for(int i=0;in;i++) cinfilms[i].sfilms[i].e; sort(films,films+n);\ttotal++;f=films[0]; for(int i=1;in;i++) if(f.e=films[i].s) total++; f=films[i]; cout endltotal; æœ‰ nå¤´ç‰›ï¼ˆ1n50,000)è¦æŒ¤å¥¶ã€‚ç»™å®šæ¯å¤´ç‰›æŒ¤å¥¶çš„æ—¶é—´åŒº é—´[A,B] (1AB1,000,000ï¼ŒA,Bä¸ºæ•´æ•°)ã€‚ ç‰›éœ€è¦å‘†ç•œæ é‡Œæ‰èƒ½æŒ¤å¥¶ã€‚ä¸€ä¸ªç•œæ åŒä¸€æ—¶é—´åªèƒ½å®¹çº³ä¸€å¤´ç‰›ã€‚ é—®è‡³å°‘éœ€è¦å¤šå°‘ä¸ªç•œæ ï¼Œæ‰èƒ½å®Œæˆå…¨éƒ¨æŒ¤å¥¶å·¥ä½œï¼Œä»¥åŠæ¯å¤´ç‰›éƒ½ æ”¾å“ªä¸ªç•œæ é‡Œï¼ˆSpecial judged) å»åŒä¸€ä¸ªç•œæ çš„ä¸¤å¤´ç‰›ï¼Œå®ƒä»¬æŒ¤å¥¶æ—¶é—´åŒºé—´å“ªæ€•åªåœ¨ç«¯ç‚¹é‡åˆä¹Ÿ æ˜¯ä¸å¯ä»¥çš„ã€‚ //éš¾ç‚¹ï¼šä¼˜å…ˆé˜Ÿåˆ—çš„è¿ç”¨ + é…åˆè´ªå¿ƒå’Œé˜Ÿåˆ—çš„æ’åº//ï¼ˆå¥¶ç‰›å’Œæ …æ çš„é¡ºåºå®šä¹‰operatorï¼Œæ …æ å’Œå¥¶ç‰›éƒ½éœ€è¦noæ¥è®°å½•åŸé¡ºåºç¼–å·ï¼‰ #includeiostream //ï¼ˆå› ä¸ºå®ƒä»¬éƒ½è¢«æ’åºæ‰“ä¹±äº† ï¼‰ #includealgorithm //psï¼šå¾ªç¯å‡ä¸ºä»1å¼€å§‹#includequeueusing namespace std;struct cow\tint s;//æ—¶é—´åŒºé—´ start -end int e;\tint no; //å¥¶ç‰›ç¼–å·ï¼šé˜²æ­¢åŸå¥¶ç‰›é¡ºåº ç”±äºè¿›å…¥æ—¶é—´çš„æ’åºè€Œè¢«æ‰“ä¹± operator(const cow c) //æ’åº return sc.s;\tcows[100];int pos[100];typedef struct fence\tint e;//æ …æ çš„ç»“æŸæ—¶é—´ä¸æ–­åœ¨å˜ ï¼Œä½œä¸ºé˜Ÿåˆ—æ’åºä¾æ®\tint no; //æ …æ ç¼–å·ï¼Œæ–¹ä¾¿è®°å½•å¥¶ç‰›è¿›å…¥çš„æ …æ ï¼ˆåŒæ ·æ˜¯é˜²æ­¢é˜Ÿåˆ—é¡ºåºæ›´æ–°è€Œå¤±å»åŸé¡ºåºç¼–å·ï¼‰ bool operator(const fence f) const return e f.e; fence(int e,int n):e(e),no(n);// å¯¹æ …æ èµ‹å€¼ã€‚ fen;int total; //æ …æ æ•° int main(void) //1.å¥¶ç‰›èµ‹å€¼+æ’åº int n;cinn; for(int i=1;i=n;i++) cincows[i].scows[i].e; cows[i].no=i;//æ’åºå‰ï¼Œåœ¨èµ‹å€¼noè¿‡ç¨‹è®°å½•å¥½åŸä½ç½® sort(cows+1,cows+n+1); //2.æ …æ èµ‹å€¼+æ’åº priority_queuefen pq; for(int i=1;i=n;i++) if(pq.empty())//æƒ…å†µ1.æœ€å¼€å§‹ï¼ˆæ— å¥¶ç‰›ï¼‰ ++total; pq.push(fen(cows[i].e,total)); pos[cows[i].no]=total; else //æƒ…å†µ2. nextå¥¶ç‰›ä¸ç›®å‰æ …æ å†²çª fen f=pq.top();//åˆ©ç”¨æ’åºï¼ˆç›®å‰ç»“æŸæœ€å¿«ï¼‰ æ‰¾åˆ°å¾…å‘½æ …æ  if(f.e=cows[i].s) ++total; pq.push(fen(cows[i].e,total)); //å†²çªåŠ å…¥æ–°æ …æ ï¼Œç¼–å·å³total pos[cows[i].no]=total; else //æƒ…å†µ3. ä¸å†²çª //ä¸å†²çªï¼štotalä¸å˜ï¼Œé˜Ÿåˆ—å¼¹å‡ºåŸå¥¶ç‰›ï¼Œå‹å…¥æ–°å¥¶ç‰› pq.pop(); pos[cows[i].no]=f.no; //è¿›å…¥ç¼–å·ä¸ºtopï¼ˆå¾…å‘½ï¼‰çš„æ …æ  pq.push(fen(cows[i].e,f.no)); //ä¸å†²çªä½¿ç”¨åŸæ …æ  //3.å¾ªç¯ç»“æŸï¼Œäº‹ä»¶ç»“æŸ,è¾“å‡º cout totalendl;\tfor(int i=1;i=n;i++) coutpos[i]endl; æ”¾ç½®é›·è¾¾ï¼š #includeiostream#includevector#includecmath#includealgorithmusing namespace std;int n,d,total;class how\tpublic: bool operator()(pairdouble,double p1,pairdouble,double p2) return p1.firstp2.first; ;bool decide(vectorpairdouble,double m,int F,int i)\tfor(int k=F;ki;k++) if(m[i].first=m[k].secondm[i].first=m[k].first) continue; else return false; return true;\tvoid dfs(const vectorpairdouble,double m)\tint FNC=0;\twhile(1) int i; for(i=FNC+1;in;i++) if(decide(m,FNC,i)) continue; else FNC=i; total++; break; if(i=n) total++; break; int flag=1;int main(void) while(cinndn!=0)\ttotal=0;\tvectorpairdouble,double m;\tfor(int i=0;in;i++) int x,y;cinxy; pairdouble,double p; p.first =x-sqrt(d*d-y*y); p.second=x+sqrt(d*d-y*y); m.push_back(p); sort(m.begin(),m.end(),how());\tdfs(m); coutcaseflag:totalendl; flag++;"},{"title":"æ¯æ—¥ä¸€é¢˜","path":"/wiki/algorithm/æ¯æ—¥ä¸€é¢˜.html","content":"1608. ç‰¹æ®Šæ•°ç»„çš„ç‰¹å¾å€¼æ€è·¯ä¸€ï¼šæš´åŠ› int specialArray(vectorint nums) for(int i = 1;i1000;i++) int count = 0; for(int j =0;jnums.size();j++) if(nums[j]=i) count++; if(count == i) return i; return -1; **æ€è·¯äºŒï¼š**é™åºæ’åº+ä¸€æ¬¡éå† class Solution public: int specialArray(vectorint nums) sort(nums.begin(), nums.end(), greaterint()); int n = nums.size(); for (int i = 1; i = n; ++i) if (nums[i - 1] = i (i == n || nums[i] i)) return i; return -1; ; **æ€è·¯ä¸‰ï¼š**æ¨¡æ‹Ÿï¼ˆè®¡æ•°+æšä¸¾ï¼‰ V1.0 class Solution public: int specialArrayvectorint nums) int cnts[1010]; for (int x : nums) cnts[x]++; for (int i = 1009, tot = 0; i = 0; i--) tot += cnts[i]; if (i == tot) return i; return -1; ä¸ºä»€ä¹ˆè¯´å¦‚æœå­˜åœ¨ä¸€å®šæ˜¯å”¯ä¸€çš„å‘¢ï¼Ÿä¸ªæ•°å’Œå€¼çš„å•è°ƒæ€§æ˜¯ç›¸åçš„ï¼Œå‚è€ƒåˆ¤æ–­çš„å€¼è¶Šå¤§ï¼Œé‚£å¯¹åº”æ»¡è¶³æ¡ä»¶çš„ä¸ªæ•°å°±è¶Šå°ã€‚è€Œå°†æ•°ç»„é™åºæˆ–è€…å‡åºæ’åºåï¼Œåˆ¤æ–­ä¸ªæ•°ä¸å€¼å¤§å°çš„é¡ºåºå°±è¦ä¸æ•°ç»„çš„å‡é™åºç›¸åã€‚ä¸ªæ•°çš„å˜åŒ–æ˜¯ä¸¥æ ¼å•è°ƒçš„ã€‚å› æ­¤å¦‚æœæœ‰æ»¡è¶³æ¡ä»¶çš„äº¤ç‚¹ç‰¹å¾å€¼ï¼Œé‚£è¿™ä¸ªå€¼ä¸€å®šä¹Ÿæ˜¯å”¯ä¸€çš„ï¼ å¯ä»¥ç†è§£ä¸ºä¸¤æ¡çº¿çš„nä¸ªç‚¹ï¼šæ¨ªåæ ‡èŒƒå›´ä¸º1åˆ°nï¼Œä¸€æ¡æ˜¯å¯èƒ½ä¸ä¸¥æ ¼å•è°ƒçš„æŠ˜çº¿çºµåæ ‡ä¸ºæ’åºåçš„æ•°ç»„å€¼numsï¼Œå¦ä¸€æ¡æ˜¯ä¸¥æ ¼å•è°ƒ(æ–œç‡ä¸º1)çºµåæ ‡ä¸º1åˆ°nçš„ç›´çº¿ï¼Œè¿™æ ·æœ€å¤šåªä¼šæœ‰ä¸€ä¸ªäº¤ç‚¹ã€‚ V2.0 class Solution public: int specialArray(vectorint nums) sort(nums.begin(), nums.end()); for (int x = 1, n = nums.size(); x = n; ++x) if (x == n - (lower_bound(nums.begin(), nums.end(), x) - nums.begin())) return x; return -1; ; æ€è·¯å››: æ’åº+æšä¸¾+äºŒåˆ†** V1.0 ï¼š int specialArray(vectorint nums) int n = nums.size(); sort(nums.begin(),nums.end(),greaterint()); for (int x = 0; x 1010; x++) int l = 0, r = n - 1; while (l r) int mid = (l + r) 1; if (nums[mid] = x) r = mid; else l = mid + 1; if (nums[r] = x x == n - r) return x; return -1;; æ’åºçš„åŸºç¡€ä¸Šï¼ŒäºŒåˆ†æš´åŠ›ã€‚ V2.0 æ”¾å¼ƒæšä¸¾ï¼Œåœ¨æšä¸¾æ•°æ®ä¸Šç»§ç»­äºŒåˆ†(ä¸¤æ¬¡äºŒåˆ†)ã€‚ 670.æœ€å¤§äº¤æ¢æ€è·¯ä¸€ï¼šå°†åŸ int æ”¾åˆ°æ•°ç»„é‡Œï¼Œå†copy ä¸€ä»½é™åºæ•°ç»„ï¼Œæ¯”å¯¹ä¸¤æ•°ç»„ï¼Œç”Ÿæˆint V1.0 class Solution public: int maximumSwap(int num) //åˆå§‹åŒ–æ•°ç»„å’Œæ•°ç»„å‰¯æœ¬ vectorint v,v1; int count = 1 , dummy = 10; while(num/dummy!=0)count++; dummy*=10; while(count--)dummy/=10;v.push_back((num/dummy)%10); v1 = v; sort(v1.begin(),v1.end(),greaterint()); if(v1==v) return num; //æ­£ç€æ‰¾æœ€å¤§å€¼äº¤æ¢ for(count=0;v[count]==v1[count];count++); //è¿™é‡Œæ˜¯æ‰¾åˆ°æ•°æ®ç›´æ¥å®šä½ swap(v[count],v1[count]); //å¯ä»¥éå†ifæ¥æ›¿ä»£ï¼Œæ›´å¥½ç†è§£ã€‚ //å€’ç€æ‰¾è¢«äº¤æ¢æ•° for(int i = v.size()-1;i=0;i--) if(v[i]==v[count]) swap(v[i],v1[count]); //è¾“å‡º num = 0; for(int i=0;iv.size();i++) num = num*10 + v[i]; return num; ; è¿™é“é¢˜ç”¨äº†1h ã€‚ æ¯”æƒ³è±¡ä¸­è¦å¤šå¾—å¤šã€‚åšé¢˜å¤ªæ…¢äº†ã€‚ä»¥ååšé¢˜è¦è®¡æ—¶ã€‚ V2.0 class Solution public: static char cmp(char a , char b) //è¾…åŠ©å°†stringä»å¤§åˆ°å°æ’åº return ab; int maximumSwap(int num) string change = to_string(num); string exchange = change; sort(exchange.begin(),exchange.end(),cmp); char small = ; char big = ; for(int i = 0 ; i change.size(); i++) if(exchange[i] != change [i]) small = change[i]; big = exchange[i]; change[i]= exchange[i]; break; for(int i = change.size()-1 ; i =0; i--) if(small!= change[i] == big) change[i] =small; break; int res = stoi(change); return res; ; ä¼˜åŒ–ï¼š ç”¨ string æ›¿ä»£ vector å®¹å™¨ï¼Œä»è€Œè§„é¿äº†å¯¹ int æ•°æ®é€ä¸ªå†™å…¥æ•°ç»„çš„è¿‡ç¨‹ã€‚ é€šè¿‡ifè¯­å¥çš„ä½¿ç”¨ï¼Œå…¼å®¹äº† è¦æ±‚æ•°æ®å’ŒåŸæ•°æ®ç›¸åŒçš„æƒ…å†µã€‚ï¼ˆ1.0ç‰ˆæœ¬åœ¨ä¸­é—´å•ç‹¬ç©¿æ’äº†ifï¼Œå†—ä½™ï¼‰ V3.0 class Solution public: int maximumSwap(int num) string str = to_string(num); string tmp = str; sort(tmp.rbegin(), tmp.rend()); for (int i = 0; i str.size(); ++i) if (str[i] != tmp[i]) for (int j = str.size() - 1; j = 0; --j) if (str[j] == tmp[i]) swap(str[i], str[j]); return stoi(str); return num; ; å‡å°‘ä»£ç é•¿åº¦è€Œå·²ã€‚æ•ˆç‡ä¸Šå’Œ2.0ä¸€æ ·ã€‚ æ€è·¯äºŒï¼šæš´åŠ›é‡æ’åˆ—ä¸¤ä¸¤äº¤è¿˜ï¼Œè®°å½•æœ€å¤§å€¼ã€‚ class Solution public: int maximumSwap(int num) string charArray = to_string(num); int n = charArray.size(); int maxNum = num; for (int i = 0; i n; i++) for (int j = i + 1; j n; j++) swap(charArray[i], charArray[j]); maxNum = max(maxNum, stoi(charArray)); swap(charArray[i], charArray[j]); return maxNum; ; æ€è·¯ä¸‰ï¼šè´ªå¿ƒ : å°†æœ€å¤§å€¼å’Œæœ€å‰é¢çš„å€¼äº¤æ¢ V1.0 class Solution public: int maximumSwap(int num) string charArray = to_string(num); int n = charArray.size(); int maxIdx = n - 1; int idx1 = -1, idx2 = -1; for (int i = n - 1; i = 0; i--) if (charArray[i] charArray[maxIdx]) maxIdx = i; else if (charArray[i] charArray[maxIdx]) idx1 = i; idx2 = maxIdx; if (idx1 = 0) swap(charArray[idx1], charArray[idx2]); return stoi(charArray); else //éå†åéƒ½ç›¸ç­‰ï¼Œidxæ²¡å˜ return num; ; V2.0: class Solution public: int maximumSwap(int num) string s = to_string(num); for(int i=1;is.size();++i) if(s[i]s[i-1]) //å¦‚æœå¤§äºå‰é¢çš„å€¼ int idx = i; for(int k = idx + 1;ks.size();k++) if(s[idx]=s[k])//ç­‰å·æ„å‘³ç€ç›¸ç­‰çš„é€‰é åçš„ idx = k; //æ‰¾åˆ°åé¢çš„å€¼çš„æœ€å¤§å€¼ int j = i-1; while(j=0 s[j]s[idx]) j-= 1; //åˆ°æ•°æ®æœ€å‰é¢ char c = s[idx]; //äº¤æ¢æœ€å‰é¢çš„å€¼ å’Œ åé¢çš„æœ€å¤§å€¼ s[idx] = s[j+1]; s[j+1] = c; break; return atoi(s.c_str()); ; æ€»ç»“ï¼š atoi()å‡½æ•°å’Œto_string()å‡½æ•°çš„ä½¿ç”¨ int ä¸ºäº†åˆ©ç”¨ string å®¹å™¨ç‰¹æ€§çš„è½¬æ¢ã€‚ åŒæŒ‡é’ˆå¼ºåŒ–ã€‚ æŒ‰ç…§é¢‘ç‡å°†æ•°ç»„å‡åºæ’åºå“ˆå¸Œè¡¨+æ’åº+æ¨¡æ‹Ÿ vectorint frequencySort(vectorint nums) multimapint ,int,lessint order; int rate = 0; sort(nums.begin(),nums.end(),greaterint()); for(int i=0;inums.size();i++) if(i!=0nums[i]!=nums[i-1]) order.insert(make_pair(rate,nums[i-1])); rate = 0; rate++; //è®°å½•é¢‘ç‡ order.insert(make_pair(rate,nums[nums.size()-1]));//æœ€åä¸€ä¸ªæ•° //è®°å½•å®Œæ¯•ï¼Œå¼€å§‹æ•´ç† int flag = 0; for(auto it = order.begin();it!=order.end();it++) for(int i = it-first;i!=0;i--) nums[flag++] = it-second; return nums; ç”¨åˆ°äº†mapå®¹å™¨ï¼Œå“ˆå¸Œè¡¨+æ’åº+æ¨¡æ‹Ÿ ä¼˜åŒ–ç‰ˆï¼šï¼ˆå®˜æ–¹é¢˜è§£ï¼‰ vectorint frequencySort(vectorint nums) unordered_mapint, int cnt; for (int num : nums) cnt[num]++; sort(nums.begin(), nums.end(), [](const int a, const int b) if (cnt[a] != cnt[b]) return cnt[a] cnt[b]; return a b; ); return nums; æ¡¶æ’åºï¼š vectorint frequencySort(vectorint nums) int rate1[110] = 0; int rate2[110] = 0; for(auto num:nums) if(num=0) rate1[num]++; else rate2[abs(num)]++; int flag = 0; for(int j = 1;j=100;j++) for(int i = 100;i=0;i--) if(rate1[i]==j) while(rate1[i]--) nums[flag++] = i; for(int i = 0;i=100;i++) if(rate2[i]==j) while(rate2[i]--) nums[flag++] = -i; return nums; å¸¦åˆ†æ•° 100 å¯ä»¥è¡¨ç¤ºä¸ºå¸¦åˆ†æ•°çš„å½¢å¼ï¼š100 3 + 69258 714ã€‚è¿˜å¯ä»¥è¡¨ç¤ºä¸ºï¼š100 82 + 3546 197ã€‚æ³¨æ„ç‰¹å¾ï¼šå¸¦åˆ†æ•°ä¸­ï¼Œæ•°å­—1~9åˆ†åˆ«å‡ºç°ä¸”åªå‡ºç°ä¸€æ¬¡ï¼ˆä¸åŒ…å«0ï¼‰ã€‚ç±»ä¼¼è¿™æ ·çš„å¸¦åˆ†æ•°ï¼Œ100 æœ‰ 11 ç§è¡¨ç¤ºæ³• è¾“å…¥ä¸€ä¸ªæ•´æ•°num ï¼Œæ±‚å®ƒæœ‰å¤šå°‘ç§è¡¨ç¤ºæ³•ã€‚ å…¨æ’åˆ— + æšä¸¾ #includeiostreamusing namespace std;//å…¨æ’åˆ—//åˆ†ä¸‰éƒ¨åˆ†: (1,i) (i+1,j) (j,9) ä¸¤å±‚å¾ªç¯ï¼Œ 1=i=7 , i+1=j=8//åˆ¤æ–­æ˜¯å¦æ»¡è¶³: f + (f1/f2) == numint num,a[15];int res;int toNum(int a[],int l,int r) int temp = 0; while(l=r) temp = temp*10+a[l]; l++; return temp;void swap(int a,int b) int temp = a; a = b; b = temp;void judge() for(int i=1;i=7;i++) for(int j=i+1;j=8;j++) int f = toNum(a,1,i); int f1 = toNum(a,i+1,j); int f2 = toNum(a,j+1,9); if(f+(f1/f2)==num f1%f2==0) res++; void perm(int a[],int l,int r) if(l==r)//åˆ°è¾¾äºŒå‰æ ‘æ ¹ judge(); //å·²ç»æ‹¥æœ‰ä¸€ä¸ªå…¨æ’åˆ—æ•°æ®äº†ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³ else //è¿˜æ²¡æœ‰åˆ°äºŒå‰æ ‘æ ¹ for(int i=l;i=r;i++) swap(a[l],a[i]); //åŸåœ°ä¿®æ”¹ perm(a,l+1,r); //é€’å½’æ·±åº¦éå† swap(a[l],a[i]); //å›æº¯ int main(void) for(int i=0;i=9;i++) a[i] = i; cinnum; perm(a,1,9); coutres;"},{"title":"é“¾è¡¨ + åŒæŒ‡é’ˆåˆ·é¢˜è·¯çº¿","path":"/wiki/algorithm/é“¾è¡¨ + åŒæŒ‡é’ˆåˆ·é¢˜è·¯çº¿.html","content":"åŒæŒ‡é’ˆåŸºç¡€ï¼šC++ æŒ‡é’ˆåŸºæœ¬è¯­æ³• è·¯çº¿ï¼š labuladongï¼šhttps://labuladong.github.io/algo/2/20/23/ æœ‰è®²è§£è§†é¢‘ï¼Œå›¾æ–‡åšå®¢ï¼Œé™„å¸¦äº† leetcode é¢˜å‹ ä¸»è¦æ¶‰åŠæ•°ç»„ç›¸å…³çš„åŒæŒ‡é’ˆï¼Œå’Œé¢å‘é¢˜ç›®çš„è®²è§£ åšé¢˜ç¬”è®°ï¼ˆé˜¿ç§€ï¼‰ï¼šhttps://interviewguide.cn/notes/03-hunting_job/03-algorithm/03-leetcode/08-%EF%B8%8F%E5%8F%8C%E6%8C%87%E9%92%88/medium/986.%E5%8C%BA%E9%97%B4%E5%88%97%E8%A1%A8%E7%9A%84%E4%BA%A4%E9%9B%86.html æ²¡æœ‰è®²è§£ï¼Œåªæœ‰é¢˜è§£ yxc åŒæŒ‡é’ˆï¼ˆä¸­é—´åŒ…æ‹¬æ»‘åŠ¨çª—å£ç­‰ï¼‰ï¼šhttps://www.bilibili.com/video/BV1t4411o7i6?spm_id_from=333.999.0.0vd_source=a5608f967616bf12d83f68f3e350efa5 ä»£ç éšæƒ³å½• ï¼šhttps://github.com/youngyangyang04/leetcode-master éƒ¨åˆ†é¢˜è§£æœ‰è§†é¢‘ï¼Œå›¾æ–‡åšå®¢ï¼Œæ¯”è¾ƒè¯¦ç»†ã€‚ è¸å®çš„æ•™å­¦+åŠ›æ‰£é¢˜ é“¾è¡¨åŸºç¡€ï¼šéœ€è¦ç®€å•æ‰‹æ“ä¸€ä¸‹é“¾è¡¨ï¼Œäº†è§£å…¶æ•°æ®ç»“æ„ã€‚ è‡³å°‘å†™å‡ºé“¾è¡¨æ•°ç»„çš„å¢åˆ æ”¹æŸ¥ è·¯çº¿ï¼š labuladong ï¼šhttps://labuladong.github.io/algo/2/19/ æœ‰è®²è§£è§†é¢‘ï¼Œå›¾æ–‡åšå®¢ï¼Œé™„å¸¦äº† leetcode é¢˜å‹ æ¶µç›– å›æ–‡é“¾è¡¨ã€åè½¬é“¾è¡¨ã€é…åˆé€’å½’ã€åŒæŒ‡é’ˆçš„é“¾è¡¨ leetbookï¼šhttps://leetcode.cn/leetbook/detail/linked-list/ åè½¬é“¾è¡¨ç­‰çš„æ–‡æ¡£ï¼Œä¸å¤ªç²¾ç»†ã€‚ yxc é“¾è¡¨ä¸“é¢˜è®²é¢˜ï¼šhttps://www.bilibili.com/video/BV1jt411J7tC?spm_id_from=333.999.0.0 å¤§ä½¬å¸¦åˆ·åŠ›æ‰£é¢˜çš„è§†é¢‘ ä»£ç éšæƒ³å½• ï¼šhttps://github.com/youngyangyang04/leetcode-master éƒ¨åˆ†é¢˜è§£æœ‰è§†é¢‘ï¼Œå›¾æ–‡åšå®¢ï¼Œæ¯”è¾ƒè¯¦ç»†ã€‚ è¸å®çš„æ•™å­¦+åŠ›æ‰£é¢˜ æŸç®—æ³•æ¨¡æ¿ï¼šhttps://github.com/greyireland/algorithm-pattern/blob/master/data_structure/linked_list.md åŸºäºé¢˜è§£çš„å›¾æ–‡ï¼Œçº¯å¹²è´§ï¼Œä¸ç”ŸåŠ¨ï¼Œè®²è§£éƒ¨åˆ†å°‘ã€‚"},{"title":"å¿…çŸ¥å¿…ä¼š","path":"/wiki/mysql/å¿…çŸ¥å¿…ä¼š.html","content":"10.2 å°šç¡…è°·mysqlåŸºç¡€ç¯‡çœ‹å®Œå°±å¿˜äº†ã€‚åŸºç¡€çš„è¯­æ³•å†…å®¹éœ€è¦ä¸€å®šçš„ä»£ç é‡ï¼Œæœ€è¿‘æˆ‘ä¼šå¤šæ•²æ•²mysqlã€‚ SQLèƒŒæ™¯ï¼š æœ€é‡è¦çš„ SQL æ ‡å‡†å°±æ˜¯ SQL92 å’Œ SQL99ã€‚ä¸€èˆ¬æ¥è¯´ SQL92 çš„ å½¢å¼æ›´ç®€å•ï¼Œä½†æ˜¯å†™çš„ SQL è¯­å¥ä¼šæ¯”è¾ƒé•¿ï¼Œå¯è¯»æ€§è¾ƒå·®ã€‚è€Œ SQL99 ç›¸æ¯”äº SQL92 æ¥è¯´ï¼Œè¯­æ³•æ›´åŠ å¤æ‚ï¼Œ ä½†å¯è¯»æ€§æ›´å¼ºã€‚SQL92 å’Œ SQL99 æ˜¯ç»å…¸çš„ SQL æ ‡å‡†ï¼Œä¹Ÿåˆ†åˆ«å«åš SQL-2 å’Œ SQL-3 æ ‡å‡†ã€‚ è¡¨è¿æ¥åŒºåˆ†å†…è¿æ¥ã€å¤–è¿æ¥ inner join å†…è¿æ¥ï¼šæ»¡è¶³äº¤é›†ã€‚ outer join : å·¦å³å¤–è¿æ¥ã€‚ å†…å¤–è¿æ¥å³äº¤å¹¶é›†çš„å…³ç³»ã€‚ è‡ªè¿æ¥ ã€ éè‡ªè¿æ¥ è‡ªè¿æ¥ï¼šå¯¹æŸä¸ªè¡¨æ¥è¯´ï¼Œè‡ªå·±å’Œè‡ªå·±çš„æ•°æ®è¿›è¡ŒåŒ¹é…ã€‚ éè‡ªè¿æ¥ï¼šéè‡ªè¿æ¥è¦å€ŸåŠ©å¤–è¡¨ã€‚ è”ç»“è¿æ¥åŒºåˆ†è”ç»“ã€é«˜çº§è”ç»“ ç­‰å€¼è”ç»“ï¼ˆå†…éƒ¨è”ç»“ï¼‰ï¼š SELECT *FROM vendors INNER JOIN products ON vendors.vend_id = products.vend_id å¤šè¡¨è”ç»“ï¼š SELECT *FROM orderitems,prodacts,vendors WHERE products.vend_id = vendors.vend_id AND orderitems.prod_id = products.prod_id AND order_num = 2005 è‡ªè”ç»“ï¼ˆè‡ªå·±å’Œè‡ªå·±çš„ä¸¤ä¸ªè¡¨è¿›è¡Œè”ç»“ï¼‰ï¼Œå³è‡ªè¿æ¥ è‡ªç„¶è”ç»“ï¼šå¦‚ä¸‹ NATRUAL JOIN å¤–éƒ¨è”ç»“ LEFT RIGHT JOIN (å†…è¿æ¥ï¼Œå¤–è¿æ¥) ç»„åˆæŸ¥è¯¢ï¼šUNION å­æŸ¥è¯¢ è¡¨æŸ¥è¯¢åŒºåˆ†ç­‰å€¼æŸ¥è¯¢ã€éç­‰å€¼æŸ¥è¯¢ ç­‰å€¼æŸ¥è¯¢ï¼šè¿‡æ»¤æ¡ä»¶é‡Œæ˜¯å¦ä¸ºæ•°å€¼ä¸Šçš„ç›¸ç­‰å…³ç³» éç­‰å€¼ï¼šBETWEEN ONï¼Œæ¨¡ç³ŠæŸ¥è¯¢ ç›¸å…³ï¼ˆå…³è”ï¼‰æŸ¥è¯¢ã€éç›¸å…³ï¼ˆéå…³è”ï¼‰æŸ¥è¯¢ å…³äºå…³è”å­æŸ¥è¯¢ï¼š å¦‚æœå­æŸ¥è¯¢çš„æ‰§è¡Œä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯å› ä¸ºå­æŸ¥è¯¢ä¸­çš„è¡¨ç”¨åˆ°äº†å¤–éƒ¨çš„è¡¨ï¼Œå¹¶è¿›è¡Œäº†æ¡ä»¶å…³è”ã€‚å› æ­¤æ¯æ‰§è¡Œä¸€æ¬¡å¤–éƒ¨æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢éƒ½è¦é‡æ–°è®¡ç®—ä¸€æ¬¡ï¼Œè¿™æ ·çš„å­æŸ¥è¯¢å°±ç§°ä¹‹ä¸º å…³è”å­æŸ¥è¯¢ ã€‚ é¢˜ç›®ç¤ºä¾‹ï¼šä¸ç›¸å…³å­æŸ¥è¯¢ï¼šæŸ¥è¯¢å‘˜å·¥ä¸­å·¥èµ„å¤§äºæœ¬å…¬å¸å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„last_name,salaryå’Œå…¶department_id ç›¸å…³å­æŸ¥è¯¢ï¼šæŸ¥è¯¢å‘˜å·¥ä¸­å·¥èµ„å¤§äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„last_name,salaryå’Œå…¶department_id PSï¼šå…¬å¸å¹³å‡å·¥èµ„å’Œè¯¥å‘˜å·¥çš„ä¸ªäººä¿¡æ¯æ²¡æœ‰å…³ç³»ï¼Œå³ä¸ç›¸å…³ã€‚éƒ¨é—¨å’Œè¯¥å‘˜å·¥çš„ä¸ªäººéƒ¨é—¨æœ‰å…³ï¼Œç›¸å…³ã€‚ å¦ï¼šå¤šè¡¨æŸ¥è¯¢æ˜¯ä¸ªå¾ˆå¤§çš„èŒƒå›´ï¼Œç”¨åˆ°ä¸¤ä¸ªè¡¨ä»¥ä¸Šçš„æŸ¥è¯¢å°±æ˜¯å¤šè¡¨æŸ¥è¯¢ã€‚ å‡½æ•°åŒºåˆ†å•è¡Œå‡½æ•°ã€å¤šè¡Œï¼ˆåˆ†ç»„ã€èšåˆï¼‰å‡½æ•° å•è¡Œå‡½æ•° æ“ä½œæ•°æ®å¯¹è±¡ æ¥å—å‚æ•°è¿”å›ä¸€ä¸ªç»“æœ åªå¯¹ä¸€è¡Œè¿›è¡Œå˜æ¢ æ¯è¡Œè¿”å›ä¸€ä¸ªç»“æœ å¯ä»¥åµŒå¥— å‚æ•°å¯ä»¥æ˜¯ä¸€åˆ—æˆ–ä¸€ä¸ªå€¼ã€ å¤šè¡Œå‡½æ•° èšåˆå‡½æ•°ä½œç”¨äºä¸€ç»„æ•°æ®ï¼Œå¹¶å¯¹ä¸€ç»„æ•°æ®è¿”å›ä¸€ä¸ªå€¼ è¡¨è¿æ¥çš„æ–°è¯­æ³•è‡ªç„¶è¿æ¥ï¼š ç±»ä¼¼ SQL92 ä¸­çš„ç­‰å€¼è¿æ¥ï¼šè‡ªåŠ¨æŸ¥è¯¢ä¸¤å¼ è¿æ¥è¡¨ä¸­æ‰€æœ‰ç›¸åŒçš„å­—æ®µæ¥è¿›è¡Œç­‰å€¼è¿æ¥ åœ¨SQL92æ ‡å‡†ä¸­ï¼š SELECT employee_id,last_name,department_name FROM employees e JOIN departments d ON e.`department_id` = d.`department_id` AND e.`manager_id` = d.`manager_id`; åœ¨ SQL99 ä¸­ä½ å¯ä»¥å†™æˆï¼š SELECT employee_id,last_name,department_name FROM employees e NATURAL JOIN departments d; #æ‰€æœ‰ç›¸åŒçš„å­—æ®µè‡ªåŠ¨ç­‰å€¼æŸ¥è¯¢ USINGè¿æ¥ SQL99æ”¯æŒä½¿ç”¨ USING æŒ‡å®šæ•°æ®è¡¨é‡Œçš„åŒåå­— è¿›è¡Œç­‰å€¼è¿æ¥ã€‚USINGåªèƒ½é…åˆJOINä¸€èµ·ä½¿ç”¨ã€‚ åŒºåˆ«äºè‡ªç„¶è¿æ¥ ï¼ŒUSING æŒ‡æ˜äº†ç›¸åŒçš„å­—æ®µåç§°ï¼ŒåŒæ—¶ä½¿ç”¨ JOINâ€¦USING å¯ä»¥ç®€åŒ– JOIN ON çš„ç­‰å€¼è¿æ¥ã€‚ SELECT employee_id,last_name,department_name FROM employees e JOIN departments d USING (department_id); SELECT employee_id,last_name,department_name FROM employees e ,departments d WHERE e.department_id = d.department_id; ä¸Šé¢ä¸¤è€…æ•ˆæœç›¸åŒã€‚ è¿™é‡Œ using å–ä»£äº† WHERE çš„ä½œç”¨ï¼Œå¹¶ä¸”å½¢å¼ä¸Šæ›´ç®€æ´ã€‚ è¡¨è¿æ¥çš„çº¦æŸæ¡ä»¶å¯ä»¥æœ‰ä¸‰ç§æ–¹å¼ï¼šWHERE, ON, USING WHEREï¼šé€‚ç”¨äºæ‰€æœ‰å…³è”æŸ¥è¯¢ ON ï¼šåªèƒ½å’ŒJOINä¸€èµ·ä½¿ç”¨ï¼Œåªèƒ½å†™å…³è”æ¡ä»¶ã€‚ è™½ç„¶å…³è”æ¡ä»¶å¯ä»¥å¹¶åˆ°WHEREä¸­å’Œå…¶ä»–æ¡ä»¶ä¸€èµ·å†™ï¼Œä½†åˆ†å¼€å†™å¯è¯»æ€§æ›´å¥½ã€‚ USINGï¼šåªèƒ½å’ŒJOINä¸€èµ·ä½¿ç”¨ï¼Œè€Œä¸”è¦æ±‚ä¸¤ä¸ªå…³è”å­—æ®µåœ¨å…³è”è¡¨ä¸­åç§°ä¸€è‡´ åªèƒ½è¡¨ç¤ºå…³è”å­—æ®µå€¼ç›¸ç­‰ Nå¼ è¡¨å…³è”æ—¶çš„æ•ˆç‡é—®é¢˜ï¼š #nå¼ è¡¨å…³è”ï¼Œéœ€è¦n-1ä¸ªå…³è”æ¡ä»¶ #æŸ¥è¯¢å‘˜å·¥å§“åï¼ŒåŸºæœ¬å·¥èµ„ï¼Œéƒ¨é—¨åç§° SELECT last_name,job_title,department_name FROM employees,departments,jobs WHERE employees.department_id = departments.department_id AND employees.job_id = jobs.job_id; SELECT last_name,job_title,department_name FROM employees INNER JOIN departments INNER JOIN jobs ON employees.department_id = departments.department_id AND employees.job_id = jobs.job_id æˆ‘ä»¬è¦æ§åˆ¶è¿æ¥è¡¨çš„æ•°é‡ã€‚å¤šè¡¨è¿æ¥å°±ç›¸å½“äºåµŒå¥— for å¾ªç¯ä¸€æ ·ï¼Œéå¸¸æ¶ˆè€—èµ„æºï¼Œä¼šè®© SQL æŸ¥è¯¢æ€§èƒ½ä¸‹é™å¾—å¾ˆä¸¥é‡ã€‚ åœ¨è®¸å¤š DBMS ä¸­ï¼Œä¹Ÿéƒ½ä¼šæœ‰æœ€å¤§è¿æ¥è¡¨çš„é™åˆ¶ã€‚ ã€å¼ºåˆ¶ã€‘è¶…è¿‡ä¸‰ä¸ªè¡¨ç¦æ­¢ joinã€‚éœ€è¦ join çš„å­—æ®µï¼Œæ•°æ®ç±»å‹ä¿æŒç»å¯¹ä¸€è‡´ï¼›å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶ï¼Œ ä¿è¯è¢«å…³è”çš„å­—æ®µéœ€è¦æœ‰ç´¢å¼•ã€‚ è¯´æ˜ï¼šå³ä½¿åŒè¡¨ join ä¹Ÿè¦æ³¨æ„è¡¨ç´¢å¼•ã€SQL æ€§èƒ½ã€‚ æ¥æºï¼šé˜¿é‡Œå·´å·´ã€ŠJavaå¼€å‘æ‰‹å†Œã€‹ ä¼˜åŒ–sqlæŸ¥è¯¢è¯­å¥çš„æ€è·¯ï¼šä¸€æ¬¡æŸ¥è¯¢è¿”å›å¤šä¸ªéœ€è¦çš„column æ³¨æ„ DISTINCT ï¼Œ IS NOT NULL çš„æƒ…å†µã€‚ FROM åçš„è¡¨å’Œåˆ«åæ›´å®¹æ˜“ç»´æŠ¤æ‰©å±•ã€‚ å®é™…ä¸Šï¼Œå¾ˆå¤š WHERE å¤„çš„è¿‡æ»¤æ¡ä»¶ï¼Œéƒ½å¯ä»¥é€šè¿‡åœ¨ FROM å¤„æ”¹åŠ¨æ¥æ›¿æ¢ ä¾‹å­ï¼š æ— åˆ«å SELECT *FROM employees WHERE employee_id = ANY( SELECT manager_id FROM employees WHERE department_id = (SELECT department_id FROM employees GROUP BY department_id ORDER BY salary DESC LIMIT 0,1 ) ) æœ‰åˆ«å SELECT last_name, department_id, email, salaryFROM employees WHERE employee_id IN ( SELECT DISTINCT manager_id FROM employees e,( SELECT department_id,AVG(salary) avg_sal FROM employees GROUP BY department_id ORDER BY avg_sal DESC LIMIT 0,1) dept_avg_sal WHERE e.department_id = dept_avg_sal.department_id )"},{"title":"é€’å½’ â€”â€” åè½¬é“¾è¡¨","path":"/wiki/algorithm/é€’å½’ â€”â€” åè½¬é“¾è¡¨.html","content":"åè½¬é“¾è¡¨ä¸è¦è·³è¿›é€’å½’ï¼Œè€Œæ˜¯åˆ©ç”¨æ˜ç¡®çš„å®šä¹‰æ¥å®ç°ç®—æ³•é€»è¾‘ã€‚ä½ çš„è„‘è¢‹æœ‰å‡ ä¸ªæ ˆå•Šï¼ åŸºæœ¬ä¸Šï¼Œæ‰€æœ‰çš„é€’å½’é—®é¢˜éƒ½å¯ä»¥ç”¨é€’æ¨å…¬å¼æ¥è¡¨ç¤ºã€‚æœ‰äº†è¿™ä¸ªé€’æ¨å…¬å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾åœ°å°†å®ƒæ”¹ä¸ºé€’å½’ä»£ç ã€‚ã€‚æ‰€ä»¥ï¼Œé‡åˆ°é€’å½’ä¸è¦æ€•ï¼Œå…ˆæƒ³é€’æ¨å…¬å¼ã€‚ é€’å½’æ˜¯ä¸€ç§å…³äºæŸä¸ªé‡å¤åŠ¨ä½œ(å®Œæˆé‡å¤æ€§çš„åŠŸèƒ½)çš„å½¢å¼åŒ–æè¿°ã€‚å…·ä½“ç‚¹è®²ï¼Œå¦‚æœä¸€ä¸ªé—®é¢˜ A å¯ä»¥åˆ†è§£ä¸ºè‹¥å¹²å­é—®é¢˜ Bã€Cã€Dï¼Œä½ å¯ä»¥å‡è®¾å­é—®é¢˜ Bã€Cã€D å·²ç»è§£å†³ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ€è€ƒå¦‚ä½•è§£å†³é—®é¢˜ Aã€‚ å°†é—®é¢˜æŠ½è±¡åŒ–ï¼Œå¯ä»¥å°†é—®é¢˜æŠ½è±¡ä¸ºf(n)ï¼ˆæˆ–è€…å…¶ä»–çš„æ•°å­¦ç¬¦å·ï¼‰, ç„¶åç”¨f(n)ä»£è¡¨æ¬²æ±‚çš„é—®é¢˜ï¼Œç„¶åå»å‘ç°å’Œå­é—®é¢˜ï¼ˆæ¯”å¦‚f(n-1)ï¼‰çš„é€’æ¨å…³ç³»ï¼ï¼ˆè¿™ä¸€ç‚¹åœ¨å†™åŠ¨æ€è§„åˆ’çš„æ—¶å€™ç‰¹åˆ«æœ‰ç”¨ï¼Œå…¶å®åŠ¨æ€è§„åˆ’å°±æ˜¯è®°å¿†åŒ–çš„é€’å½’ï¼ï¼‰ é€’å½’å‡½æ•°æ˜¯å¸¦è¯­ä¹‰çš„ï¼Œä½†æ˜¯è®°ä½ä¸€ä¸ªé€’å½’å‡½æ•°åªæœ‰ä¸€ä¸ªè¯­ä¹‰ï¼Œå¦‚æœåœ¨å†™é€’å½’å‡½æ•°å®ç°çš„æ—¶å€™ï¼Œå‘ç°å‡ºç°äº†å¤šä¸ªè¯­ä¹‰ï¼Œéœ€è¦å¯¹æ–°å‡ºç°çš„è¯­ä¹‰é‡æ–°å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼ ä½œè€…ï¼šChuanceyé“¾æ¥ï¼šhttps://leetcode.cn/problems/fan-zhuan-lian-biao-lcof/solution/kan-bu-dong-di-gui-de-kan-guo-lai-xi-wan-1akq/ è¿›å…¥æ­£é¢˜ï¼šåè½¬é“¾è¡¨é¢˜ class Solution public: ListNode* reverseBetween(ListNode* head, int left, int right) if(left==1) return reverselist(head,right); head-next = reverseBetween(head-next,left-1,right-1); return head; ListNode* reverselist(ListNode* head,int n) if(n==1) last2 = head-next; return head; ListNode* last = reverselist(head-next,n-1); head-next-next = head; head-next = last2; return last; private: ListNode* last2;; åè½¬é“¾è¡¨çš„æ€è·¯æ˜¯ å…¨åè½¬ â†’ ä»1åˆ°n çš„åè½¬ â†’ ä»måˆ°nçš„åè½¬ å…¨åè½¬çš„ä»£ç ï¼š reverse(ListNode* head) if(head==NULL||head-next==NULL) return head; ListNode* last = reverse(head-next); head-next-next = head; head-next = NULL ;//è¿™é‡Œæ˜¯åŒºåˆ†åè½¬é“¾è¡¨èŒƒå›´çš„å…³é”®ç‚¹ return last; //è¿”å›â€œå¤´ç»“ç‚¹â€ 1åˆ°nï¼š ListNode* last2;reverseN(ListNode* head, int n) if(n==1) last2 = head-next; return head; ListNode* last = reverseN(head-next,n-1); head-next-next = head; head-next = last2; return last; å’Œå…¨åè½¬ç›¸æ¯”ï¼Œè¦åŒºåˆ† last: åè½¬çš„å¤´ç»“ç‚¹(åŸæœ€åç»“ç‚¹) , last2:åè½¬çš„å°¾ç»“ç‚¹çš„next(åŸèµ·å§‹ç»“ç‚¹çš„next) måˆ°nï¼šç…§é¡¾å¤´ç»“ç‚¹ï¼Œ ListNode* reverseBetween(ListNode* head, int left, int right) if(left==1) return reverseN(head,right) //è€æ ·å­äº† è®©leftå®šä½ä¸ºâ€œ1â€ //æ³¨æ„ reverseN å’Œ reverseBetween çš„åŒºåˆ« head-next = reverseBetween(head-next,left-1,right-1); //æ­£å¥½åœ¨mç‚¹æ¥å— â€œ1â€åˆ° n return head; æ‹“å±•ï¼šåŒæ ·çš„é—®é¢˜æœ‰ä¸ªè¿­ä»£çš„æ³•å­ï¼š å…¨åè½¬ï¼š ListNode* prev = nullptr;ListNode* curr = head;while(curr) ListNode* n = curr-next; //è®°å½•ç‚¹ä½ curr-next = prev; //åˆ†æˆä¸¤éƒ¨åˆ†ã€‚ prev = curr; curr = next;return prev; mnåè½¬ï¼ˆå¤´æ’æ³•ï¼‰ï¼š class Solution public: ListNode *reverseBetween(ListNode *head, int left, int right) // è®¾ç½® dummyNode æ˜¯è¿™ä¸€ç±»é—®é¢˜çš„ä¸€èˆ¬åšæ³• ListNode *dummyNode = new ListNode(-1); dummyNode-next = head; ListNode *pre = dummyNode; for (int i = 0; i left - 1; i++) pre = pre-next; ListNode *cur = pre-next; ListNode *next; for (int i = 0; i right - left; i++) next = cur-next; cur-next = next-next; next-next = pre-next; pre-next = next; return dummyNode-next; ; æ­¤æ—¶æŠŠçº¿æ‹‰ç›´å°±æ˜¯å˜åŒ–åçš„æ•ˆæœã€‚ åè½¬ä¸€ç»„å›ºå®šé•¿åº¦ä¸ºKçš„é“¾è¡¨ ListNode* reverseKGroup(ListNode* head, int k) if(!head) return head; ListNode* a = head; ListNode* b = head; for(int i=0;ik;i++) //æ‰©å±•bé¡ºä¾¿æ£€æŸ¥ if(!b) return a; b=b-next; ListNode* newHead = reverse(a,b); //newHeadæ˜¯åè½¬åå¤´ç»“ç‚¹ a-next = reverseKGroup(b,k); //a æ˜¯åè½¬åå°¾ç»“ç‚¹ return newHead; ListNode* reverse(ListNode* a,ListNode* b) //åè½¬aåˆ°b ListNode* cur = a; ListNode* pre = NULL; while(cur!=b) ListNode* n = cur-next; cur-next = pre; pre = cur; cur = n; return pre; //reverseè¿”å›çš„æ˜¯åè½¬åçš„å¤´ç»“ç‚¹ åˆ¤æ–­å›æ–‡é“¾è¡¨æ€è·¯ä¸€ï¼š é“¾è¡¨ä¸èƒ½ç›´æ¥èµ°ï¼Œä½†å¯ä»¥å€ŸåŠ©ååºéå†çš„æ€è·¯ï¼Œå·¦æŒ‡é’ˆä¸ºå¤´ç»“ç‚¹ï¼Œååºéå†æ¯”è¾ƒ class Solution public: bool isPalindrome(ListNode* head) left = head; return traverse(head); bool traverse(ListNode* right) //ååºéå†æ¯”è¾ƒ if(right == NULL) return true; bool res = traverse(right-next); res = res(left-val == right-val); left = left-next; return res; private: ListNode* left ; //å·¦æŒ‡é’ˆ; æ€è·¯äºŒï¼šåè½¬é“¾è¡¨åæ¨¡ä»¿åŒæŒ‡é’ˆï¼ˆä»ä¸­é—´å‘ä¸¤è¾¹ï¼‰ ä¸‰æ­¥èµ°ï¼š æ‰¾åˆ°ä¸­é—´ç»“ç‚¹ï¼šå¿«æ…¢æŒ‡é’ˆ åè½¬é“¾è¡¨ å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†é€ä¸ªå¯¹æ¯”ã€‚ class Solution public: bool isPalindrome(ListNode* head) ListNode* left = head; //no.1 ListNode* right = midpointer(head); //no.2 right = reverse(right); //no.3 return compnode(left,right); //1. æ‰¾åˆ°ä¸­é—´ç»“ç‚¹ï¼šå¿«æ…¢æŒ‡é’ˆã€‚ ListNode* midpointer(ListNode* head) ListNode* slow = head; ListNode* fast = head; while(fast!=NULLfast-next!=NULL) slow = slow-next; fast = fast-next-next; if(fast!=NULL) slow=slow-next; return slow; //2.åè½¬ååŠéƒ¨åˆ†é“¾è¡¨ã€‚ ListNode* reverse(ListNode* head) ListNode* pre = NULL; ListNode* cur = head; while(cur!=NULL) ListNode* n = cur-next; cur-next = pre; pre = cur; cur = n; return pre; //3.å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†é€ä¸ªå¯¹æ¯”ã€‚ bool compnode(ListNode* left,ListNode* right) while(right!=NULL) if(left-val!=right-val) return false; left = left-next; right = right-next; return true; ;"},{"title":"æ‚é¡¹","path":"/wiki/mysql/æ‚é¡¹.html","content":"ç®¡ç†ç”¨æˆ·mysqlç”¨æˆ·çš„è´¦å·å’Œä¿¡æ¯éƒ½å­˜åœ¨åä¸ºmysqlçš„MYSQLæ•°æ®åº“ä¸­ã€‚ mysqlæ•°æ®åº“æœ‰ä¸€ä¸ª USER è¡¨ï¼Œå­˜æ”¾ç€è´¦æˆ·å’Œå¯†ç ã€‚ USE mysql;SELECT user FROM user; CREATE USER ben IDENTIFIED BY your_password; IDENTIFIED BY ä¸ºçº¯æ–‡æœ¬ã€‚MYSQLä¼šè‡ªåŠ¨åœ¨ä¿å­˜åˆ°userè¡¨å‰å¯¹å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œä½œä¸ºæ•£åˆ—è¡¨æŒ‡å®šå£ä»¤ã€‚ GRANTå’ŒINSERTä¹Ÿå¯ä»¥æ·»åŠ ç”¨æˆ·ã€‚ é‡å‘½åï¼š RENAME USER ben TO bforta; #bfortaæ˜¯ä¸ªç”¨æˆ· åˆ é™¤ï¼š DROP USER bforta; æ›´æ”¹å¯†ç  SET PASSWORD FOR bforta = PASSWORD(new_passw); è®¾ç½®è®¿é—®æƒé™: #æŸ¥çœ‹ç”¨æˆ·è´¦å·æƒé™SHOW GRANTS FOR user_name;#èµ‹äºˆæƒé™GRANT SELECT ON crashcourse.* TO bforta;# crashcourseæ˜¯ä¸ªè¡¨ï¼Œ*å³å…¨éƒ¨ï¼Œè¡¨ä¸­å…¨éƒ¨å†…å®¹éƒ½æœ‰äº†åªè¯»çš„è®¿é—®æƒé™#æ’¤é”€æƒé™REVOKE SELECT ON crashcourse.* FROM bforta; é€‚ç”¨èŒƒå›´ æ•´ä¸ªæœåŠ¡å™¨ï¼šGTANT ALL å’Œ REVOKE ALL æ•´ä¸ªæ•°æ®åº“ï¼š ä¾‹å¦‚ ON database.* ç‰¹å®šè¡¨ï¼šä¾‹å¦‚ ON database.table ç‰¹å®šåˆ— ç‰¹å®šå­˜å‚¨è¿‡ç¨‹ æƒé™ç±»å‹ï¼šâ€œå¤ªé¸¡å„¿å¤šäº†ï¼Œè‡ªå·±å»çœ‹æ–‡æ¡£æˆ–è€…googleå¥½äº†â€ æå‰æˆæƒ: GRANT å’Œ REVOKE çš„è´¦æˆ·å¿…é¡»å·²ç»å­˜åœ¨ï¼Œä½†å¯¹è±¡æ²¡æœ‰è¿™ç§è¦æ±‚ã€‚ æ‰€ä»¥å¯ä»¥åœ¨åˆ›å»ºæ•°æ®åº“ä¹‹å‰æˆæƒã€‚æ›´åŠ å®‰å…¨ã€‚ åå¤„æ˜¯åˆ æ‰æ•°æ®åº“åæƒé™ä»ç„¶å­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…ç†ï¼Œå¦åˆ™å¯èƒ½å½±å“ä¸‹æ¬¡åˆ›å»ºã€‚ ä¸€äº›ç»´æŠ¤çš„ä¸œè¥¿æ•°æ®åº“ç»´æŠ¤ ANALYZE TABLE :æ£€æŸ¥è¡¨é”® CHECK TABLE ï¼šæ£€æŸ¥å¾ˆå¤šè¡¨å±æ€§ã€‚ æ—¥å¿—æ–‡ä»¶ é”™è¯¯æ—¥å¿—:hostname.err æŸ¥è¯¢æ—¥å¿—:hostname.log äºŒè¿›åˆ¶æ—¥å¿—:hostname-bin ç¼“æ…¢æŸ¥è¯¢æ—¥å¿—:hostname-slow.log 1.éƒ½åœ¨dataç›®å½•é‡Œäº† 2.- - logå‘½ä»¤ç¬¦èƒ½æ›´æ”¹è¿™äº›æ–‡ä»¶çš„åå­—ã€‚ é™Œç”Ÿå…³é”®å­—ACTION ASENSITIVE CONVERT ENUM FORCE GOTO KILL LINES MOD NUMERIC OPTIMIZE OPTION OUTFILE PURGE RELEASE RESTRICT STARTING START_JOIN TERMINATED SPATIAL SONAME SCHEMA VARYING USAGE SQLEXCEPTION STATE WARNING"},{"title":"æƒé™ã€ç”¨æˆ·ã€è§’è‰²ã€é…ç½®æ–‡ä»¶","path":"/wiki/mysql/æƒé™ã€ç”¨æˆ·ã€è§’è‰²ã€é…ç½®æ–‡ä»¶.html","content":"ç”¨æˆ·ç®¡ç†ç”¨æˆ·ä¿¡æ¯åœ¨å“ªé‡Œé»˜è®¤æ•°æ®åº“æœ‰å››ä¸ªï¼š information_schema mysql performance_schema sys å…¶ä¸­ â€œmysqlâ€ æ•°æ®åº“æœ‰ä¸€ä¸ªè¡¨åä¸ºuserï¼Œå­˜å‚¨ç€ç”¨æˆ·ä¿¡æ¯ã€‚ é€šå¸¸é»˜è®¤æœ‰å››ä¸ªç”¨æˆ·ï¼š root ,mysql.infoschema,mysql.session,mysql.sys ã€‚ ubuntu æˆ– debian ç”¨æˆ·è¿˜ä¼šæœ‰ä¸ªmaintç”¨æˆ·ã€‚ debian-sys-maintä¸­Debianç³»ç»Ÿå¯¹MySQLç»´æŠ¤ç”¨çš„ï¼Œå¯ä»¥ç†è§£ä¸ºé€šè¿‡ç³»ç»Ÿçš„æŸä¸ªâ€œéå¸¸è§„â€ç¨‹åºå¯¹Mysqlè¿›è¡Œå¤‡ä»½æ¢å¤ç­‰è¡Œä¸ºæ—¶ï¼Œæ”¹ç¨‹åºæ‰€ä½¿ç”¨çš„ç”¨æ¥ç™»å½•Mysqlçš„è´¦æˆ·ã€‚ å…·ä½“ä½œç”¨æ˜¯é‡å¯åŠè¿è¡ŒmysqlæœåŠ¡ï¼Œä¸è¿‡æœ‰ä¸€ä¸ªå®‰å…¨é—®é¢˜ï¼šè¯¥ç”¨æˆ·çš„æƒé™å’ŒROOTæ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”å¯†ç å¯ä»¥åœ¨etcæŸä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°ï¼Œè¿™éœ€è¦å¯¹è´¦æˆ·è¿›è¡Œä¸€äº›é™åˆ¶ã€‚ root çš„æƒé™æœ€é«˜ï¼Œé¡¾åæ€ä¹‰ä¸ºâ€œæ ¹â€ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™ï¼Œåˆ›å»ºå…¶ä»–ç”¨æˆ·ï¼Œå®ƒä¸èƒ½æ²¡æœ‰ã€‚ user çš„è”åˆä¸»é”®ç”¨æˆ·ä¿¡æ¯é‡Œä¸¤ä¸ªåˆ—å¾ˆå…³é”®ï¼šhost å’Œ userã€‚ host : ä¸»æœºï¼Œç”¨æ¥åŒºåˆ†ç”¨æˆ·çš„è¿æ¥æ®µã€‚ user : ç”¨æˆ·åï¼ŒåŒºåˆ†ç”¨æˆ· user è¡¨çš„ä¸»é”®æœ‰ä¸¤ä¸ªï¼šhostå’Œuserï¼Œå³è”åˆä¸»é”®ã€‚ æ‰€ä»¥ä¸åŒè¿æ¥æ®µå…è®¸æœ‰é‡åç”¨æˆ·å‡ºç°ï¼Œå°±åƒä¸åŒä½œç”¨åŸŸèƒ½å¤Ÿæœ‰é‡åå˜é‡ä¸€æ ·ã€‚ åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤åˆ›å»ºç”¨æˆ·æŒ‡ä»¤ï¼š CREATE USER ç”¨æˆ·å [@ä¸»æœºåç§°] [IDENTIFIED BY å¯†ç ] #[]ä¸ºå¯é€‰ tipsï¼š è¯¥è¯­å¥å¯ä»¥åŒæ—¶åˆ›å»ºå¤šä¸ªç”¨æˆ·ã€‚ ç”¨æˆ·åå‚æ•°ç”±ç”¨æˆ·å’Œä¸»æœºåæ„æˆã€‚ éœ€è¦æœ‰CREATEæƒé™ï¼Œæ–°è´¦æˆ·ä»€ä¹ˆæƒé™éƒ½æ²¡æœ‰ã€‚ ä¿®æ”¹ UPDATE mysql.user set user = wang5 where user = li4 [and host = xxx]flush privileges;# åˆ·æ–°æƒé™ï¼Œå¦åˆ™ç™»é™†æ—¶ä»ç„¶æ˜¯åŸæœ¬çš„ç”¨æˆ·ä¿¡æ¯ ä¿®æ”¹ç”¨æˆ·å°±æ˜¯ç›´æ¥æ“ä½œ user è¡¨ã€‚ ä¿®æ”¹å®Œéœ€è¦fs; åˆ é™¤ ä¸¤ä¸ªæ–¹æ³•ï¼šDROP å’Œ DELETE (user è¡¨é‡Œåˆ )ã€‚ DROP DROP USER user,[user].... #userå³ç”¨æˆ·åå‚æ•°ï¼Œå¯åŒ…å« hostDROP USER li4; # é»˜è®¤åˆ é™¤hostä¸º%çš„ç”¨æˆ·DROP USER li4@localhost; DELETE DELETE FROM mysql.user WHERE Host=hostname AND User = username;#å¿…é¡»æœ‰ host ï¼Œè”åˆä¸»é”®çš„ä¸¤ä¸ªå­—æ®µï¼Œæ‰èƒ½å”¯ä¸€ç¡®å®šä¸€æ¡è®°å½•ã€‚FLUSH PRIVILEGES; #ç«‹å³ç”Ÿæ•ˆã€‚ DELETE åˆ é™¤ä¼šæœ‰ç³»ç»Ÿä¿¡æ¯æ®‹ç•™ã€‚DROP æŒ‡ä»¤èƒ½åŒæ—¶åˆ å» mysql.user è¡¨å’Œ mysql.db è¡¨å†…å®¹ã€‚ è®¾ç½®å½“å‰ç”¨æˆ·å¯†ç 1. ä½¿ç”¨ALTER USERå‘½ä»¤æ¥ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç  ALTER USER USER() IDENTIFIED BY new_password; 2. ä½¿ç”¨SETè¯­å¥æ¥ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç  SET PASSWORD=new_password; ä¿®æ”¹å…¶ä»–ç”¨æˆ·å¯†ç 1. ä½¿ç”¨ALTERè¯­å¥æ¥ä¿®æ”¹æ™®é€šç”¨æˆ·çš„å¯†ç  ALTER USER user [IDENTIFIED BY æ–°å¯†ç ] [,user[IDENTIFIED BY æ–°å¯†ç ]]â€¦; 2. ä½¿ç”¨SETå‘½ä»¤æ¥ä¿®æ”¹æ™®é€šç”¨æˆ·çš„å¯†ç  SET PASSWORD FOR username@hostname=new_password; å¯†ç è¿‡æœŸå…³é”®è¯ EXPIRE ä½ å¯ä»¥é€šè¿‡ALTERå’ŒCREATE æ—¶ æ‰‹åŠ¨è®¾ç½®ç”¨æˆ·å¯†ç è¿‡æœŸï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥ç™»å…¥æ•°æ®åº“ï¼Œä½†æ— æ³•æŸ¥è¯¢ã€‚é™¤éé‡æ–°è®¾ç½®å¯†ç ã€‚ ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ç³»ç»Ÿå…¨å±€å˜é‡ Default password lifetime ã€‚æ”¹å˜é‡é»˜è®¤ä¸º0ï¼Œå³ä¸è¿‡æœŸã€‚è®¾ç½®ä¸ºNä»£è¡¨å¯†ç ç”Ÿå­˜æœŸï¼ŒNå¤©åå¯†ç å¿…é¡»ä¿®æ”¹ï¼Œå¦åˆ™å°†è‡ªåŠ¨è¿‡æœŸã€‚ å¯†ç é‡ç”¨å…³é”®è¯ INTERVAL ã€REUSE åˆ†ä¸¤ç±»ï¼šæ—¶é—´å’Œæ›´æ”¹æ•°é‡ æ—¶é—´ï¼ˆå‘¨æœŸï¼‰ï¼šä¿®æ”¹åå¯†ç ä¸èƒ½ç”¨æœ€è¿‘Nå¤©æ—¶é—´ä½¿ç”¨è¿‡çš„å¯†ç ç›¸åŒã€‚ æ›´æ”¹æ•°é‡ ï¼šä¿®æ”¹åå¯†ç ä¸æœ€è¿‘Nä¸ªå¯†ç ä¸èƒ½ç›¸åŒã€‚ ç³»ç»Ÿå˜é‡ï¼špassword_history , password_reuse_interval æƒé™ç®¡ç†show privileges; #æŸ¥çœ‹æƒé™ CREATEå’ŒDROPæƒé™ï¼Œå¯ä»¥åˆ›å»ºæ–°çš„æ•°æ®åº“å’Œè¡¨ï¼Œæˆ–åˆ é™¤ï¼ˆç§»æ‰ï¼‰å·²æœ‰çš„æ•°æ®åº“å’Œè¡¨ã€‚å¦‚æœå°†MySQLæ•°æ®åº“ä¸­çš„DROPæƒé™æˆäºˆæŸç”¨æˆ·ï¼Œç”¨æˆ·å°±å¯ä»¥åˆ é™¤MySQLè®¿é—®æƒé™ä¿å­˜çš„æ•°æ®åº“ã€‚ SELECTã€INSERTã€UPDATEå’ŒDELETEæƒé™å…è®¸åœ¨ä¸€ä¸ªæ•°æ®åº“ç°æœ‰çš„è¡¨ä¸Šå®æ–½æ“ä½œã€‚ SELECTæƒé™åªæœ‰åœ¨å®ƒä»¬çœŸæ­£ä»ä¸€ä¸ªè¡¨ä¸­æ£€ç´¢è¡Œæ—¶æ‰è¢«ç”¨åˆ°ã€‚ INDEXæƒé™å…è®¸åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•ï¼ŒINDEXé€‚ç”¨äºå·²æœ‰çš„è¡¨ã€‚å¦‚æœå…·æœ‰æŸä¸ªè¡¨çš„CREATEæƒé™ï¼Œå°±å¯ä»¥åœ¨CREATE TABLEè¯­å¥ä¸­åŒ…æ‹¬ç´¢å¼•å®šä¹‰ã€‚ ALTERæƒé™å¯ä»¥ä½¿ç”¨ALTER TABLEæ¥æ›´æ”¹è¡¨çš„ç»“æ„å’Œé‡æ–°å‘½åè¡¨ã€‚ CREATE ROUTINEæƒé™ç”¨æ¥åˆ›å»ºä¿å­˜çš„ç¨‹åºï¼ˆå‡½æ•°å’Œç¨‹åºï¼‰ï¼ŒALTER ROUTINEæƒé™ç”¨æ¥æ›´æ”¹å’Œåˆ é™¤ä¿å­˜çš„ç¨‹åºï¼ŒEXECUTEæƒé™ç”¨æ¥æ‰§è¡Œä¿å­˜çš„ç¨‹åºã€‚ GRANTæƒé™å…è®¸æˆæƒç»™å…¶ä»–ç”¨æˆ·ï¼Œå¯ç”¨äºæ•°æ®åº“ã€è¡¨å’Œä¿å­˜çš„ç¨‹åºã€‚ FILEæƒé™ä½¿ç”¨æˆ·å¯ä»¥ä½¿ç”¨LOAD DATA INFILEå’ŒSELECT â€¦ INTO OUTFILEè¯­å¥è¯»æˆ–å†™æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œä»»ä½•è¢«æˆäºˆFILEæƒé™çš„ç”¨æˆ·éƒ½èƒ½è¯»æˆ–å†™MySQLæœåŠ¡å™¨ä¸Šçš„ä»»ä½•æ–‡ä»¶ï¼ˆè¯´æ˜ç”¨æˆ·å¯ä»¥è¯»ä»»ä½•æ•°æ®åº“ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå› ä¸ºæœåŠ¡å™¨å¯ä»¥è®¿é—®è¿™äº›æ–‡ä»¶ï¼‰ã€‚ æˆäºˆæƒé™GRANT æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° TO ç”¨æˆ·å@ç”¨æˆ·åœ°å€ [IDENTIFIED BY â€˜å¯†ç å£ä»¤â€™]; è¯¥æƒé™å¦‚æœå‘ç°æ²¡æœ‰è¯¥ç”¨æˆ·ï¼Œåˆ™ä¼šç›´æ¥æ–°å»ºä¸€ä¸ªç”¨æˆ·ã€‚ ç»™li4ç”¨æˆ·ç”¨æœ¬åœ°å‘½ä»¤è¡Œæ–¹å¼ï¼Œæˆäºˆatguigudbè¿™ä¸ªåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥çš„æƒé™ã€‚ GRANT SELECT,INSERT,DELETE,UPDATE ON atguigudb.* TO li4@localhost; æˆäºˆé€šè¿‡ç½‘ç»œæ–¹å¼ç™»å½•çš„joeç”¨æˆ· ï¼Œå¯¹æ‰€æœ‰åº“æ‰€æœ‰è¡¨çš„å…¨éƒ¨æƒé™ï¼Œå¯†ç è®¾ä¸º123ã€‚æ³¨æ„è¿™é‡Œå”¯ç‹¬ä¸åŒ…æ‹¬grantçš„æƒé™ GRANT ALL PRIVILEGES ON *.* TO joe@% IDENTIFIED BY 123; æˆäºˆæƒé™çš„åŸåˆ™ æƒé™æ§åˆ¶ä¸»è¦æ˜¯å‡ºäºå®‰å…¨å› ç´ ï¼Œå› æ­¤éœ€è¦éµå¾ªä»¥ä¸‹å‡ ä¸ªç»éªŒåŸåˆ™ï¼š 1ã€åªæˆäºˆèƒ½æ»¡è¶³éœ€è¦çš„æœ€å°æƒé™ï¼Œé˜²æ­¢ç”¨æˆ·å¹²åäº‹ã€‚æ¯”å¦‚ç”¨æˆ·åªæ˜¯éœ€è¦æŸ¥è¯¢ï¼Œé‚£å°±åªç»™selectæƒé™å°±å¯ä»¥äº†ï¼Œä¸è¦ç»™ç”¨æˆ·èµ‹äºˆupdateã€insertæˆ–è€…deleteæƒé™ã€‚ 2ã€åˆ›å»ºç”¨æˆ·çš„æ—¶å€™é™åˆ¶ç”¨æˆ·çš„ç™»å½•ä¸»æœºï¼Œä¸€èˆ¬æ˜¯é™åˆ¶æˆæŒ‡å®šIPæˆ–è€…å†…ç½‘IPæ®µã€‚ 3ã€ä¸ºæ¯ä¸ªç”¨æˆ·è®¾ç½®æ»¡è¶³å¯†ç å¤æ‚åº¦çš„å¯†ç ã€‚ 4ã€å®šæœŸæ¸…ç†ä¸éœ€è¦çš„ç”¨æˆ·ï¼Œå›æ”¶æƒé™æˆ–è€…åˆ é™¤ç”¨æˆ·ã€‚ æŸ¥çœ‹æƒé™ æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™ SHOW GRANTS; # æˆ– SHOW GRANTS FOR CURRENT_USER; # æˆ– SHOW GRANTS FOR CURRENT_USER(); æŸ¥çœ‹æŸç”¨æˆ·çš„å…¨å±€æƒé™ SHOW GRANTS FOR user@ä¸»æœºåœ°å€; æ”¶å›æƒé™æ³¨æ„ï¼šåœ¨å°†ç”¨æˆ·è´¦æˆ·ä»userè¡¨åˆ é™¤ä¹‹å‰ï¼Œåº”è¯¥æ”¶å›ç›¸åº”ç”¨æˆ·çš„æ‰€æœ‰æƒé™ã€‚ æ”¶å›æƒé™å‘½ä»¤ REVOKE æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° FROM ç”¨æˆ·å@ç”¨æˆ·åœ°å€; ä¸¾ä¾‹ #æ”¶å›å…¨åº“å…¨è¡¨çš„æ‰€æœ‰æƒé™ REVOKE ALL PRIVILEGES ON *.* FROM joe@%; #æ”¶å›mysqlåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥æƒé™ REVOKE SELECT,INSERT,UPDATE,DELETE ON mysql.* FROM joe@localhost; æ³¨æ„ï¼šé¡»ç”¨æˆ·é‡æ–°ç™»å½•åæ‰èƒ½ç”Ÿæ•ˆ æƒé™è¡¨userè¡¨userè¡¨æ˜¯MySQLä¸­æœ€é‡è¦çš„ä¸€ä¸ªæƒé™è¡¨ï¼Œ è®°å½•ç”¨æˆ·è´¦å·å’Œæƒé™ä¿¡æ¯ ï¼Œæœ‰49ä¸ªå­—æ®µã€‚ è¿™äº›å­—æ®µå¯åˆ†ä¸ºå››ç±»ï¼š èŒƒå›´åˆ—ï¼š host : è¡¨ç¤ºè¿æ¥ç±»å‹ % è¡¨ç¤ºæ‰€æœ‰è¿œç¨‹é€šè¿‡ TCPæ–¹å¼çš„è¿æ¥ IP åœ°å€ å¦‚ (192.168.1.2ã€127.0.0.1) é€šè¿‡åˆ¶å®šipåœ°å€è¿›è¡Œçš„TCPæ–¹å¼çš„è¿æ¥ æœºå™¨å é€šè¿‡åˆ¶å®šç½‘ç»œä¸­çš„æœºå™¨åè¿›è¡Œçš„TCPæ–¹å¼çš„è¿æ¥ ::1 IPv6çš„æœ¬åœ°ipåœ°å€ï¼Œç­‰åŒäºIPv4çš„ 127.0.0.1 localhost æœ¬åœ°æ–¹å¼é€šè¿‡å‘½ä»¤è¡Œæ–¹å¼çš„è¿æ¥ ï¼Œæ¯”å¦‚mysql -u xxx -p xxx æ–¹å¼çš„è¿æ¥ã€‚ user : è¡¨ç¤ºç”¨æˆ·åï¼ŒåŒä¸€ç”¨æˆ·é€šè¿‡ä¸åŒæ–¹å¼é“¾æ¥çš„æƒé™æ˜¯ä¸ä¸€æ ·çš„ã€‚ password ï¼šmysql 5.7 åŠä¹‹åç‰ˆæœ¬çš„å¯†ç ä¿å­˜åˆ° authentication_string å­—æ®µä¸­ä¸å†ä½¿ç”¨password å­— æ®µã€‚ æƒé™åˆ—ï¼šæ˜¯å¦æ‹¥æœ‰ä¸€äº›ç‰¹å®šæƒé™ å®‰å…¨åˆ— ï¼šåŠ å¯†ï¼Œè¡¨ç¤ºç”¨æˆ·ï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½ã€‚ èµ„æºæ§åˆ¶åˆ—ï¼šé™åˆ¶ç”¨æˆ·ä½¿ç”¨çš„èµ„æºã€‚å…±4ä¸ªå­—æ®µã€‚ â‘ max_questionsï¼Œç”¨æˆ·æ¯å°æ—¶å…è®¸æ‰§è¡Œçš„æŸ¥è¯¢æ“ä½œæ¬¡æ•°ï¼› â‘¡max_updatesï¼Œç”¨æˆ·æ¯å°æ—¶å…è®¸æ‰§è¡Œçš„æ›´æ–°æ“ä½œæ¬¡æ•°ï¼› â‘¢max_connectionsï¼Œç”¨æˆ·æ¯å°æ—¶å…è®¸æ‰§è¡Œçš„è¿æ¥æ“ä½œæ¬¡æ•°ï¼› â‘£max_user_connectionsï¼Œç”¨æˆ·å…è®¸åŒæ—¶å»ºç«‹çš„è¿æ¥æ¬¡æ•°ã€‚ æŸ¥çœ‹å­—æ®µï¼š DESC mysql.user; æŸ¥çœ‹ç”¨æˆ·, ä»¥åˆ—çš„æ–¹å¼æ˜¾ç¤ºæ•°æ®ï¼š SELECT * FROM mysql.user \\G; æŸ¥è¯¢ç‰¹å®šå­—æ®µï¼š SELECT host,user,authentication_string,select_priv,insert_priv,drop_priv FROM mysql.user; dbè¡¨ ç”¨æˆ·åˆ— dbè¡¨ç”¨æˆ·åˆ—æœ‰3ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯Hostã€Userã€Dbã€‚è¿™3ä¸ªå­—æ®µåˆ†åˆ«è¡¨ç¤ºä¸»æœºåã€ç”¨æˆ·åå’Œæ•°æ®åº“åã€‚è¡¨ç¤ºä»æŸä¸ªä¸»æœºè¿æ¥æŸä¸ªç”¨æˆ·å¯¹æŸä¸ªæ•°æ®åº“çš„æ“ä½œæƒé™ï¼Œè¿™3ä¸ªå­—æ®µçš„ç»„åˆæ„æˆäº†dbè¡¨çš„ä¸»é”®ã€‚ æƒé™åˆ— Create_routine_privå’ŒAlter_routine_privè¿™ä¸¤ä¸ªå­—æ®µå†³å®šç”¨æˆ·æ˜¯å¦å…·æœ‰åˆ›å»ºå’Œä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„æƒé™ã€‚ ç»“æ„æŸ¥çœ‹ï¼š DESCRIBE mysql.db; tables_priv å’Œ column_priv è¡¨ tables_priv è¡¨ï¼šå¯¹è¡¨è®¾ç½®æ“ä½œæƒé™ columns_priv è¡¨ ï¼šå¯¹è¡¨çš„æŸä¸€åˆ—è®¾ç½®æƒé™ ã€‚ procs_priv è¡¨procs_priv è¡¨å¯ä»¥å¯¹å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°è®¾ç½®æ“ä½œæƒé™ ä¸Šé¢å‡ ä¸ªè¡¨éƒ½åœ¨ database â†’ mysql é‡Œï¼Œæƒ³çœ‹è‡ªå·± DESC å»ã€‚ è§’è‰²è§’è‰²çš„åˆ›å»ºã€åˆ é™¤å’Œæƒé™æ“ä½œåˆ›å»ºè§’è‰² CREATE ROLE role_name[@host_name] [,role_name[@host_name]]... è§’è‰²åç§°çš„å‘½åè§„åˆ™å’Œç”¨æˆ·åç±»ä¼¼ã€‚å¦‚æœhost_nameçœç•¥ï¼Œé»˜è®¤ä¸º%ï¼Œrole_nameä¸å¯çœç•¥ï¼Œä¸å¯ä¸ºç©ºã€‚ ç»™è§’è‰²èµ‹äºˆæƒé™ GRANT privileges ON table_name TO role_name[@host_name]; ä¸Šè¿°è¯­å¥ä¸­privilegesä»£è¡¨æƒé™çš„åç§°ï¼Œå¤šä¸ªæƒé™ä»¥é€—å·éš”å¼€ã€‚å¯ä½¿ç”¨SHOWè¯­å¥æŸ¥è¯¢æƒé™åç§° SHOW PRIVILEGES\\G æŸ¥çœ‹è§’è‰²çš„æƒé™ SHOW GRANTS FOR role_name; åªè¦ä½ åˆ›å»ºäº†ä¸€ä¸ªè§’è‰²ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ç»™ä½ ä¸€ä¸ªâ€œUSAGEâ€æƒé™ï¼Œæ„æ€æ˜¯è¿æ¥ç™»å½•æ•°æ®åº“çš„æƒé™ã€‚ å›æ”¶è§’è‰²çš„æƒé™ REVOKE privileges ON tablename FROM rolename; åˆ é™¤è§’è‰² DROP ROLE role [,role2]... æ³¨æ„ï¼Œå¦‚æœä½ åˆ é™¤äº†è§’è‰²ï¼Œé‚£ä¹ˆç”¨æˆ·ä¹Ÿå°±å¤±å»äº†é€šè¿‡è¿™ä¸ªè§’è‰²æ‰€è·å¾—çš„æ‰€æœ‰æƒé™ã€‚ è§’è‰²å’Œç”¨æˆ·ç»™ç”¨æˆ·èµ‹äºˆè§’è‰² è§’è‰²åˆ›å»ºå¹¶æˆæƒåï¼Œè¦èµ‹ç»™ç”¨æˆ·å¹¶å¤„äºæ¿€æ´»çŠ¶æ€æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚ GRANT role [,role2,...] TO user [,user2,...]; æŸ¥è¯¢å½“å‰å·²æ¿€æ´»çš„è§’è‰² SELECT CURRENT_ROLE(); æ¿€æ´»è§’è‰² æ–¹å¼1ï¼šä½¿ç”¨set default role å‘½ä»¤æ¿€æ´»è§’è‰² SET DEFAULT ROLE ALL TO kangshifu@localhost; æ–¹å¼2ï¼šå°†activate_all_roles_on_loginè®¾ç½®ä¸ºON SET GLOBAL activate_all_roles_on_login=ON; è¿™æ¡ SQL è¯­å¥çš„æ„æ€æ˜¯ï¼Œå¯¹æ‰€æœ‰è§’è‰²æ°¸ä¹…æ¿€æ´»ã€‚ æ’¤é”€ç”¨æˆ·çš„è§’è‰² REVOKE role FROM user; è®¾ç½®å¼ºåˆ¶è§’è‰²(mandatory role) æ–¹å¼1ï¼šæœåŠ¡å¯åŠ¨å‰è®¾ç½® [mysqld] mandatory_roles=role1,role2@localhost,r3@%.atguigu.com æ–¹å¼2ï¼šè¿è¡Œæ—¶è®¾ç½® SET PERSIST mandatory_roles = role1,role2@localhost,r3@%.example.com; #ç³»ç»Ÿé‡å¯åä»ç„¶æœ‰æ•ˆSET GLOBAL mandatory_roles = role1,role2@localhost,r3@%.example.com; #ç³»ç»Ÿé‡å¯åå¤±æ•ˆ é…ç½®æ–‡ä»¶**æ–‡ä»¶é‡Œä¼šå®šä¹‰è®¸å¤šç»„(ç”¨ [ ] æ‹¬èµ·æ¥)ï¼Œç»„ä¸‹è¾¹å¯ä»¥å®šä¹‰å¯åŠ¨é€‰é¡¹ã€‚**é€šå¸¸ç§°ç»„ä¸ºæ ‡ç­¾ã€‚ [server]#å…·ä½“å¯åŠ¨é€‰é¡¹option1 #ä¸éœ€è¦é€‰é¡¹å€¼ï¼šTrue / False ç±»å‹option2 = value2 #éœ€è¦é€‰é¡¹å€¼ ï¼š é”®å€¼å¯¹ ç±»å‹[mysqld]...[mysqld_safe]...[client]... é…ç½®æ–‡ä»¶ä¸­ä¸åŒé€‰é¡¹ç»„æ˜¯ç»™ä¸åŒçš„å¯åŠ¨å‘½ä»¤ä½¿ç”¨çš„ã€‚ æœ‰ä¸¤ä¸ªé€‰é¡¹ç»„æ¯”è¾ƒç‰¹åˆ«ï¼š [server]ç»„çš„å¯åŠ¨é€‰é¡¹ä½œç”¨äºæ‰€æœ‰æœåŠ¡å™¨ç¨‹åº [client]ç»„çš„å¯åŠ¨é€‰é¡¹ä½œç”¨äºæ‰€æœ‰å®¢æˆ·ç«¯ç¨‹åºã€‚ åƒmysqlè¿™ä¸ªå¯åŠ¨å‘½ä»¤ï¼Œå°±ä¼šè°ƒç”¨ [mysql] å’Œ [client] ä¸¤ä¸ªç»„ tipsï¼š [mysql-â€˜ç‰ˆæœ¬å·â€™]ï¼šåªé€‚ç”¨äºç‰¹å®šç‰ˆæœ¬çš„ä¸“ç”¨é€‰é¡¹ç»„ ä¸¤ä¸ªç»„é‡Œå‡ºç°é‡å¤é…ç½®é¡¹ï¼Œä»¥æœ€åä¸€ä¸ªä¸ºå‡†ã€‚ ä¸€ä¸ªé€‰é¡¹æ—¢å‡ºç°åœ¨å‘½ä»¤è¡Œï¼Œåˆå‡ºç°åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œä»¥å‘½ä»¤è¡Œä¸ºå‡†ã€‚ å¦‚ defaults-extra-file å’Œ defaults-file æœ¬èº«å°±æ˜¯ä¸ºäº†æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„çš„ã€‚"},{"title":"å­˜å‚¨è¿‡ç¨‹å‡½æ•°","path":"/wiki/mysql/å­˜å‚¨è¿‡ç¨‹å‡½æ•°.html","content":"[Stored Procedure Stored Function] [TOC] å­˜å‚¨è¿‡ç¨‹å®šä¹‰ä¸€ç»„é¢„å…ˆç»è¿‡ç¼–è¯‘çš„SQLè¯­å¥ï¼š æ‰§è¡Œè¿‡ç¨‹ï¼šå­˜å‚¨è¿‡ç¨‹é¢„å…ˆå­˜å‚¨åœ¨ MySQL æœåŠ¡å™¨ä¸Šã€‚æ‰§è¡Œæ—¶ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯å‘å‡ºè°ƒç”¨å‘½ä»¤ï¼ŒæœåŠ¡å™¨ç«¯ä¼šå°†è¿™ä¸€ç³»åˆ— Stored SQL è¯­å¥å…¨éƒ¨æ‰§è¡Œã€‚ è¯­æ³•åˆ†æï¼šåˆ›å»ºï¼š CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹å(IN|OUT|INOUT å‚æ•°å å‚æ•°ç±»å‹,...) [characteristics ...] BEGINå­˜å‚¨è¿‡ç¨‹ä½“END åˆ†ç±»ï¼š æ²¡æœ‰å‚æ•°ï¼ˆæ— å‚æ•°æ— è¿”å›ï¼‰ ä»…ä»…å¸¦ IN ç±»å‹ï¼ˆæœ‰å‚æ•°æ— è¿”å›ï¼‰ ä»…ä»…å¸¦ OUT ç±»å‹ï¼ˆæ— å‚æ•°æœ‰è¿”å›ï¼‰ æ—¢å¸¦ IN åˆå¸¦ OUTï¼ˆæœ‰å‚æ•°æœ‰è¿”å›ï¼‰ å¸¦ INOUTï¼ˆæœ‰å‚æ•°æœ‰è¿”å›ï¼‰ æ³¨æ„ï¼šINã€OUTã€INOUT éƒ½å¯ä»¥åœ¨ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ä¸­å¸¦å¤šä¸ªã€‚ å‚æ•°æ„ä¹‰ IN ï¼šå½“å‰å‚æ•°ä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºå…¥å‚ï¼› è¯»å–å‚æ•°å€¼ã€‚ é»˜è®¤ä¸º IN ï¼Œè¡¨ç¤ºè¾“å…¥å‚æ•°ã€‚ OUT ï¼šå½“å‰å‚æ•°ä¸ºè¾“å‡ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºå‡ºå‚ï¼› æ‰§è¡Œå®Œæˆåï¼Œè°ƒç”¨å®¢æˆ·ç«¯å¯ä»¥è¯»å–å‚æ•°è¿”å›å€¼ã€‚ INOUT ï¼šå½“å‰å‚æ•°æ—¢å¯ä»¥ä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºè¾“å‡ºå‚æ•°ã€‚ å½¢å‚ç±»å‹ï¼šå¯ä»¥æ˜¯ MySQLæ•°æ®åº“ä¸­çš„ä»»æ„ç±»å‹ã€‚ çº¦æŸæ¡ä»¶ï¼šcharacteristics åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ—¶æŒ‡å®šçš„çº¦æŸæ¡ä»¶ LANGUAGE SQL | [NOT] DETERMINISTIC | CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA | SQL SECURITY DEFINER | INVOKER | COMMENT string LANGUAGE SQL ï¼šè¯´æ˜å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œä½“æ˜¯ç”±SQLè¯­å¥ç»„æˆçš„ï¼Œå½“å‰ç³»ç»Ÿæ”¯æŒçš„è¯­è¨€ä¸ºSQLã€‚ [NOT] DETERMINISTIC ï¼šæŒ‡æ˜å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œçš„ç»“æœæ˜¯å¦ç¡®å®šã€‚ 1.DETERMINISTICè¡¨ç¤ºç»“æœæ˜¯ç¡®å®šçš„ã€‚æ¯æ¬¡æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œç›¸åŒè¾“å…¥å¾—åˆ°ç›¸åŒè¾“å‡ºã€‚ 2.NOT DETERMINISTICè¡¨ç¤ºç»“æœæ˜¯ä¸ç¡®å®š çš„ï¼Œç›¸åŒè¾“å…¥å¯èƒ½å¾—åˆ°ä¸åŒè¾“å‡ºã€‚ (å¦‚æœæ²¡æœ‰æŒ‡å®šä»»æ„ä¸€ä¸ªå€¼ï¼Œé»˜è®¤ä¸ºNOT DETERMINISTIC) { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA } ï¼šæŒ‡æ˜å­ç¨‹åºä½¿ç”¨SQLè¯­å¥çš„é™åˆ¶ã€‚ 1.CONTAINS SQLè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºåŒ…å«SQLè¯­å¥ï¼Œä½†æ˜¯å¹¶ä¸åŒ…å«è¯»å†™æ•°æ®çš„SQLè¯­å¥ï¼› 2.NO SQLè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­ä¸åŒ…å«ä»»ä½•SQLè¯­å¥ï¼› 3.READS SQL DATAè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­åŒ…å«è¯»æ•°æ®çš„SQLè¯­å¥ï¼› 4.MODIFIES SQL DATAè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­åŒ…å«å†™æ•°æ®çš„SQLè¯­å¥ã€‚ (é»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šæŒ‡å®šä¸ºCONTAINS SQL) SQL SECURITY { DEFINER | INVOKER }ï¼šæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹çš„æƒé™ï¼Œå³æŒ‡æ˜å“ªäº›ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ã€‚ 1.DEFINER è¡¨ç¤ºåªæœ‰å½“å‰å­˜å‚¨è¿‡ç¨‹çš„åˆ›å»ºè€…æˆ–è€…å®šä¹‰è€…æ‰èƒ½æ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ï¼› 2.INVOKER è¡¨ç¤ºæ‹¥æœ‰å½“å‰å­˜å‚¨è¿‡ç¨‹çš„è®¿é—®æƒé™çš„ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ã€‚ (å¦‚æœæ²¡æœ‰è®¾ç½®ç›¸å…³çš„å€¼ï¼Œåˆ™MySQLé»˜è®¤æŒ‡å®šå€¼ä¸ºDEFINER) COMMENT string ï¼šæ³¨é‡Šä¿¡æ¯ï¼Œç”¨æ¥æè¿°å­˜å‚¨è¿‡ç¨‹ çœç•¥ï¼šå¦‚æœå‡½æ•°ä½“é‡Œä»…ä»…ä¸€æ¡SQL è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥ BEGIN å’Œ END ç»“æŸæ ‡è®°ï¼šDELIMITER DELIMITER $ # look at this!CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹å(IN|OUT|INOUT å‚æ•°å å‚æ•°ç±»å‹,...)[characteristics ...] BEGINsqlè¯­å¥1; #ä¸ºäº†é¿å…å’Œå‡½æ•°ä½“é‡Œçš„åˆ†å·æ··æ·†sqlè¯­å¥2; END $ # Wowwwww! é¿å…ä½¿ç”¨åæ–œæ ï¼ˆ\\ï¼‰å­—ç¬¦ ï¼šå› ä¸ºåæ–œçº¿æ˜¯MySQLçš„è½¬ä¹‰å­—ç¬¦ã€‚ è°ƒç”¨ å­˜å‚¨è¿‡ç¨‹å¿…é¡»ä½¿ç”¨CALLè¯­å¥è°ƒç”¨ï¼Œå¹¶ä¸”å­˜å‚¨è¿‡ç¨‹å’Œæ•°æ®åº“ç›¸å…³ï¼Œ æ‰§è¡Œå…¶ä»–æ•°æ®åº“ä¸­çš„å­˜å‚¨è¿‡ç¨‹ï¼Œéœ€è¦æŒ‡å®šæ•°æ®åº“åç§°ï¼Œä¾‹å¦‚ CALL dbname.procnameã€‚ CALL å­˜å‚¨è¿‡ç¨‹å(å®å‚åˆ—è¡¨) IN åœºæ™¯ CALL sp1(å€¼); OUT åœºæ™¯ SET @name;CALL sp1(@name);SELECT @name; æ³¨æ„ï¼šOUT è¾“å‡ºå‚æ•°ï¼Œè¿˜è¦é…åˆ SELECT [æ±‚å¾—çš„å­—æ®µ] INTO @å˜é‡ FROMâ€¦â€¦ æ¥ç»™å‚æ•°å˜é‡èµ‹å€¼ï¼Œ åŒæ—¶åœ¨è°ƒç”¨æ—¶ç»™ OUT å‚æ•° èµ‹å€¼ã€‚ INOUT åœºæ™¯ SET @name=å€¼;CALL sp1(@name);SELECT @name; ç¤ºä¾‹ï¼š åˆ›å»ºè°ƒç”¨è¿‡ç¨‹ DELIMITER // CREATE PROCEDURE `add_num`(IN n INT) BEGIN #å®šä¹‰+èµ‹å€¼DECLARE i INT; DECLARE sum INT;SET i = 1; SET sum = 0; #è¿›å…¥å¾ªç¯WHILE i = n DO SET sum = sum + i; SET i = i +1; END WHILE; #äº§å‡ºç»“æœSELECT sum;END //DELIMITER ;#ç¬¬2ä¸ªå­˜å‚¨è¿‡ç¨‹CREATE PROCEDURE CountProc(IN sid INT,OUT num INT)... CALLè°ƒç”¨è¿‡ç¨‹ CALL CountProc (101, @num);CALL add_num(50); æŸ¥çœ‹å‘æŒ¥ç»“æœ SELECT @num; å¦‚æœä½¿ç”¨äº†DBMSï¼š Navicat ï¼Œé‚£ä¹ˆåœ¨ç¼–å†™å­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™ï¼ŒNavicat ä¼šè‡ªåŠ¨è®¾ç½® DELIMITER ä¸ºå…¶ä»–ç¬¦å·ï¼Œ ä¸éœ€è¦å†è¿›è¡Œ DELIMITER çš„æ“ä½œã€‚ è°ƒè¯•SQLæ²¡æœ‰IDEï¼Œä½ åªèƒ½é€šè¿‡SELECTä¸€ä¸ªä¸€ä¸ªå®éªŒæ’æŸ¥ã€‚ æ•ˆæœæ¯”è¾ƒå¥½å¤„ï¼š ç®€åŒ–æ“ä½œï¼Œæé«˜äº†sqlè¯­å¥çš„é‡ç”¨æ€§ï¼Œå‡å°‘äº†å¼€å‘ç¨‹åºå‘˜çš„å‹åŠ› å‡å°‘æ“ä½œè¿‡ç¨‹ä¸­çš„å¤±è¯¯ï¼Œæé«˜æ•ˆç‡ å‡å°‘ç½‘ç»œä¼ è¾“é‡ï¼ˆå®¢æˆ·ç«¯ä¸éœ€è¦æŠŠæ‰€æœ‰çš„ SQL è¯­å¥é€šè¿‡ç½‘ç»œå‘ç»™æœåŠ¡å™¨ï¼‰ å‡å°‘äº† SQL è¯­å¥æš´éœ²åœ¨ç½‘ä¸Šçš„é£é™©ï¼Œä¹Ÿæé«˜äº†æ•°æ®æŸ¥è¯¢çš„å®‰å…¨æ€§ å’Œè§†å›¾ã€å‡½æ•°çš„å¯¹æ¯”ï¼š å®ƒå’Œè§†å›¾æœ‰ç€åŒæ ·çš„ä¼˜ç‚¹ï¼Œæ¸…æ™°ã€å®‰å…¨ï¼Œè¿˜å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ã€‚ å’Œè§†å›¾çš„ä¸åŒ è§†å›¾æ˜¯è™šæ‹Ÿè¡¨ ï¼Œé€šå¸¸ä¸å¯¹åº•å±‚æ•°æ®è¡¨ç›´æ¥æ“ä½œï¼Œ å­˜å‚¨è¿‡ç¨‹æ˜¯ç¨‹åºåŒ–çš„ SQLï¼Œå¯ä»¥ç›´æ¥æ“ä½œåº•å±‚æ•°æ®è¡¨,ç›¸æ¯”äºé¢å‘é›†åˆçš„æ“ä½œæ–¹å¼ï¼Œèƒ½å¤Ÿå®ç°ä¸€äº›æ›´å¤æ‚çš„æ•°æ®å¤„ç†ã€‚ å’Œå‡½æ•°çš„ä¸åŒ ä¸€æ—¦å­˜å‚¨è¿‡ç¨‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œä½¿ç”¨å®ƒå°±åƒä½¿ç”¨å‡½æ•°ä¸€æ ·ç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡è°ƒç”¨å­˜å‚¨è¿‡ç¨‹åå³å¯ã€‚ç›¸è¾ƒäº å‡½æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹æ˜¯ æ²¡æœ‰è¿”å›å€¼ çš„ã€‚ å­˜å‚¨å‡½æ•°åº”ç”¨è¯­æ³•åˆ†æï¼šåˆ›å»ºï¼š CREATE FUNCTION å‡½æ•°å(å‚æ•°å å‚æ•°ç±»å‹,...) RETURNS è¿”å›å€¼ç±»å‹ [characteristics ...] BEGINå‡½æ•°ä½“ #å‡½æ•°ä½“ä¸­è‚¯å®šæœ‰ RETURN è¯­å¥ END å‚æ•°åˆ—è¡¨ï¼šæŒ‡å®šå‚æ•°ä¸ºINã€OUTæˆ–INOUTåªå¯¹PROCEDUREæ˜¯åˆæ³•çš„ï¼ŒFUNCTIONä¸­æ€»æ˜¯é»˜è®¤ä¸ºINå‚æ•°RETURNS type è¯­å¥è¡¨ç¤ºå‡½æ•°è¿”å›æ•°æ®çš„ç±»å‹ï¼› RETURNSå­å¥åªèƒ½å¯¹FUNCTIONåšæŒ‡å®š,å¯¹å‡½æ•°è€Œè¨€è¿™æ˜¯å¼ºåˆ¶çš„ã€‚å®ƒç”¨æ¥æŒ‡å®šå‡½æ•°çš„è¿”å›ç±»å‹ï¼Œè€Œä¸”å‡½æ•°ä½“å¿…é¡»åŒ…å«ä¸€ä¸ª RETURN value è¯­å¥ã€‚ characteristic åˆ›å»ºå‡½æ•°æ—¶æŒ‡å®šçš„å¯¹å‡½æ•°çš„çº¦æŸã€‚å–å€¼ä¸åˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ—¶ç›¸åŒï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ å‡½æ•°ä½“ä¹Ÿå¯ä»¥ç”¨BEGINâ€¦ENDæ¥è¡¨ç¤ºSQLä»£ç çš„å¼€å§‹å’Œç»“æŸã€‚å¦‚æœå‡½æ•°ä½“åªæœ‰ä¸€æ¡è¯­å¥ï¼Œä¹Ÿå¯ä»¥çœç•¥BEGINâ€¦ENDã€‚ è°ƒç”¨ åœ¨MySQLä¸­ï¼Œå­˜å‚¨å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ä¸MySQLå†…éƒ¨å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•æ˜¯ä¸€æ ·çš„ã€‚ æ¢è¨€ä¹‹ï¼Œç”¨æˆ·è‡ªå·±å®šä¹‰çš„å­˜å‚¨å‡½æ•°ä¸MySQLå†…éƒ¨å‡½æ•°æ˜¯ä¸€ä¸ªæ€§è´¨çš„ã€‚ åŒºåˆ«åœ¨äºï¼Œå­˜å‚¨å‡½æ•°æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œè€Œå†…éƒ¨å‡½æ•°æ˜¯MySQLçš„å¼€å‘è€…å®šä¹‰çš„ã€‚ SELECT å‡½æ•°å(å®å‚åˆ—è¡¨) ç¤ºä¾‹ åˆ›å»º CREATE FUNCTION email_by_name()RETURNS VARCHAR(25) DETERMINISTIC CONTAINS SQL BEGINRETURN (SELECT email FROM employees WHERE last_name = Abel);END // DELIMITER ; DELIMITER // CREATE FUNCTION count_by_id(dept_id INT) RETURNS INT LANGUAGE SQL NOT DETERMINISTIC READS SQL DATA SQL SECURITY DEFINER COMMENT æŸ¥è¯¢éƒ¨é—¨å¹³å‡å·¥èµ„ BEGINRETURN (SELECT COUNT(*) FROM employees WHERE department_id = dept_id); END // DELIMITER ; è°ƒç”¨ SELECT email_by_name()SET @dept_id = 50; SELECT count_by_id(@dept_id); æ³¨æ„ï¼šè‹¥åœ¨åˆ›å»ºå­˜å‚¨å‡½æ•°ä¸­æŠ¥é”™ you might want to use the less safe log_bin_trust_function_creators variable æœ‰ä¸¤ç§å¤„ç†æ–¹æ³•ï¼š æ–¹å¼1ï¼šåŠ ä¸Šå¿…è¦çš„å‡½æ•°ç‰¹æ€§ [NOT] DETERMINISTICâ€å’Œâ€œCONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA æ–¹å¼2ï¼š mysql SET GLOBAL log_bin_trust_function_creators = 1; ä¸¤è€…å¯¹æ¯” å…³é”®å­— è°ƒç”¨è¯­æ³• è¿”å›å€¼ åº”ç”¨åœºæ™¯ å­˜å‚¨è¿‡ç¨‹ PROCEDURE CALL å­˜å‚¨è¿‡ç¨‹() 0æˆ–å¤šä¸ª æ›´æ–° å­˜å‚¨å‡½æ•° FUNCTION SELECT å‡½æ•°() åªèƒ½æ˜¯ä¸€ä¸ª è¿”å›ä¸€ä¸ªæŸ¥è¯¢ç»“æœ å­˜å‚¨å‡½æ•°å¯ä»¥æ”¾åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸è¡Œã€‚ å­˜å‚¨è¿‡ç¨‹çš„åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼ŒåŒ…æ‹¬èƒ½å¤Ÿæ‰§è¡Œå¯¹è¡¨çš„æ“ä½œï¼ˆæ¯”å¦‚åˆ›å»ºè¡¨ï¼Œåˆ é™¤è¡¨ç­‰ï¼‰å’Œäº‹åŠ¡æ“ä½œï¼Œå­˜å‚¨å‡½æ•°ä¸è¡Œã€‚ å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„æŸ¥çœ‹ã€ä¿®æ”¹ã€åˆ é™¤æŸ¥çœ‹MySQLå­˜å‚¨äº†å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°çš„çŠ¶æ€ä¿¡æ¯ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡3ç§æ–¹æ³•æŸ¥çœ‹ï¼š SHOW CREATEè¯­å¥ SHOW CREATE PROCEDURE | FUNCTION å­˜å‚¨è¿‡ç¨‹åæˆ–å‡½æ•°å#ä¸¾ä¾‹SHOW CREATE FUNCTION test_db.CountProc \\G SHOW STATUSè¯­å¥ SHOW PROCEDURE | FUNCTION STATUS [LIKE pattern] è¿™ä¸ªè¯­å¥è¿”å›å­ç¨‹åºçš„ç‰¹å¾ï¼Œå¦‚æ•°æ®åº“ã€åå­—ã€ç±»å‹ã€åˆ›å»ºè€…åŠåˆ›å»ºå’Œä¿®æ”¹æ—¥æœŸã€‚ åœ¨information_schema.Routines è¡¨ä¸­æŸ¥çœ‹ SELECT * FROM information_schema.Routines WHERE ROUTINE_NAME=å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„å [AND ROUTINE_TYPE = PROCEDURE|FUNCTION];#æ•°æ®åº“ä¸­å­˜åœ¨ï¼ˆå‡½æ•°å’Œè¿‡ç¨‹ï¼‰åç§°ç›¸åŒçš„æƒ…å†µï¼ŒæŒ‡å®šROUTINE_TYPEæŸ¥è¯¢æ¡ä»¶æ¥æŒ‡æ˜æŸ¥è¯¢çš„æ˜¯å­˜å‚¨è¿‡ç¨‹è¿˜æ˜¯å‡½æ•°ã€‚ ä¿®æ”¹ è¿™é‡Œçš„ä¿®æ”¹æŒ‡ï¼šä¸å½±å“å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°åŠŸèƒ½ï¼Œåªæ˜¯ä¿®æ”¹ç›¸å…³ç‰¹æ€§ã€‚ä½¿ç”¨ALTERè¯­å¥å®ç°ã€‚ ALTER PROCEDURE | FUNCTION å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„å [characteristic ...] characteristic æŒ‡å®šå­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„ç‰¹æ€§ï¼Œå…¶å–å€¼ä¿¡æ¯ä¸[åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°æ—¶çš„å–å€¼ä¿¡æ¯] ä¸åŒã€‚ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA | SQL SECURITY DEFINER | INVOKER | COMMENT string CONTAINS SQL ï¼Œè¡¨ç¤ºå­ç¨‹åºåŒ…å«SQLè¯­å¥ï¼Œä½†ä¸åŒ…å«è¯»æˆ–å†™æ•°æ®çš„è¯­å¥ã€‚ NO SQL ï¼Œè¡¨ç¤ºå­ç¨‹åºä¸­ä¸åŒ…å«SQLè¯­å¥ã€‚ READS SQL DATA ï¼Œè¡¨ç¤ºå­ç¨‹åºä¸­åŒ…å«è¯»æ•°æ®çš„è¯­å¥ã€‚ MODIFIES SQL DATA ï¼Œè¡¨ç¤ºå­ç¨‹åºä¸­åŒ…å«å†™æ•°æ®çš„è¯­å¥ã€‚ SQL SECURITY { DEFINER | INVOKER } ï¼ŒæŒ‡æ˜è°æœ‰æƒé™æ¥æ‰§è¡Œã€‚ DEFINER ï¼Œè¡¨ç¤ºåªæœ‰å®šä¹‰è€…è‡ªå·±æ‰èƒ½å¤Ÿæ‰§è¡Œã€‚ INVOKER ï¼Œè¡¨ç¤ºè°ƒç”¨è€…å¯ä»¥æ‰§è¡Œã€‚ COMMENT â€˜stringâ€™ ï¼Œè¡¨ç¤ºæ³¨é‡Šä¿¡æ¯ ä¿®æ”¹å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨ALTER PROCEDUREè¯­å¥ï¼Œä¿®æ”¹å­˜å‚¨å‡½æ•°ä½¿ç”¨ALTER FUNCTIONè¯­å¥ã€‚ ä¸¤ä¸ªè¯­å¥çš„ç»“æ„ä¸€æ ·ï¼Œè¯­å¥ä¸­çš„æ‰€æœ‰å‚æ•°ä¹Ÿä¸€æ ·ã€‚ ç¤ºä¾‹ï¼š ALTER PROCEDURE CountProcMODIFIES SQL DATASQL SECURITY INVOKER ; ä¿®æ”¹åæŸ¥è¯¢ SELECT specific_name,sql_data_access,securtiy_typeFROM information_schema.ROUTINESWHERE routine_name = CountProc AND routine_type = PROCEDURE; æŸ¥è¯¢ç»“æœï¼šè®¿é—®æ•°æ®æƒé™å’Œå®‰å…¨ç±»å‹æ”¹å˜ã€‚ åˆ é™¤DROP PROCEDURE | FUNCTION [IF EXISTS] å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°çš„å#IF EXISTSï¼šå¦‚æœç¨‹åºæˆ–å‡½æ•°ä¸å­˜å‚¨ï¼Œå®ƒå¯ä»¥é˜²æ­¢å‘ç”Ÿé”™è¯¯ï¼Œäº§ç”Ÿä¸€ä¸ªç”¨SHOW WARNINGSæŸ¥çœ‹çš„è­¦å‘Š æ‹“å±•å¯¹äºå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨äº‰è®®ï¼š ä¼˜ç‚¹ **å­˜å‚¨è¿‡ç¨‹å¯ä»¥ä¸€æ¬¡ç¼–è¯‘å¤šæ¬¡ä½¿ç”¨ã€‚**å­˜å‚¨è¿‡ç¨‹åªåœ¨åˆ›å»ºæ—¶è¿›è¡Œç¼–è¯‘ï¼Œä¹‹åçš„ä½¿ç”¨éƒ½ä¸éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œè¿™å°±æå‡äº† SQL çš„æ‰§è¡Œæ•ˆç‡ã€‚ **å¯ä»¥å‡å°‘å¼€å‘å·¥ä½œé‡ã€‚**å°†ä»£ç å°è£…æˆæ¨¡å—ï¼Œå®é™…ä¸Šæ˜¯ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œè¿™æ ·å¯ä»¥æŠŠå¤æ‚çš„é—®é¢˜æ‹†è§£æˆä¸åŒçš„æ¨¡å—ï¼Œç„¶åæ¨¡å—ä¹‹é—´å¯ä»¥ é‡å¤ä½¿ç”¨ ï¼Œåœ¨å‡å°‘å¼€å‘å·¥ä½œé‡çš„åŒæ—¶ï¼Œè¿˜èƒ½ä¿è¯ä»£ç çš„ç»“æ„æ¸…æ™°ã€‚ **å­˜å‚¨è¿‡ç¨‹çš„å®‰å…¨æ€§å¼ºã€‚**æˆ‘ä»¬åœ¨è®¾å®šå­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™å¯ä»¥ è®¾ç½®å¯¹ç”¨æˆ·çš„ä½¿ç”¨æƒé™ ï¼Œè¿™æ ·å°±å’Œè§†å›¾ä¸€æ ·å…·æœ‰è¾ƒå¼ºçš„å®‰å…¨æ€§ã€‚ å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ã€‚å› ä¸ºä»£ç å°è£…åˆ°å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨åªéœ€è¦è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å³å¯ï¼Œè¿™æ ·å°±å‡å°‘äº†ç½‘ç»œä¼ è¾“é‡ã€‚ è‰¯å¥½çš„å°è£…æ€§ã€‚åœ¨è¿›è¡Œç›¸å¯¹å¤æ‚çš„æ•°æ®åº“æ“ä½œæ—¶ï¼ŒåŸæœ¬éœ€è¦ä½¿ç”¨ä¸€æ¡ä¸€æ¡çš„ SQL è¯­å¥ï¼Œå¯èƒ½è¦è¿æ¥å¤šæ¬¡æ•°æ®åº“æ‰èƒ½å®Œæˆçš„æ“ä½œï¼Œç°åœ¨å˜æˆäº†ä¸€æ¬¡å­˜å‚¨è¿‡ç¨‹ï¼Œåªéœ€è¦ è¿æ¥ä¸€æ¬¡å³å¯ ã€‚ ç¼ºç‚¹åŸºäºä¸Šé¢è¿™äº›ä¼˜ç‚¹ï¼Œä¸å°‘å¤§å…¬å¸éƒ½è¦æ±‚å¤§å‹é¡¹ç›®ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œæ¯”å¦‚å¾®è½¯ã€IBM ç­‰å…¬å¸ã€‚ä½†æ˜¯å›½å†…çš„é˜¿é‡Œå¹¶ä¸æ¨èå¼€å‘äººå‘˜ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ é˜¿é‡Œå¼€å‘è§„èŒƒã€å¼ºåˆ¶ã€‘ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œå­˜å‚¨è¿‡ç¨‹éš¾ä»¥è°ƒè¯•å’Œæ‰©å±•ï¼Œæ›´æ²¡æœ‰ç§»æ¤æ€§ã€‚å­˜å‚¨è¿‡ç¨‹è™½ç„¶æœ‰è¯¸å¦‚ä¸Šé¢çš„å¥½å¤„ï¼Œä½†ç¼ºç‚¹ä¹Ÿæ˜¯å¾ˆæ˜æ˜¾çš„ã€‚ å¯ç§»æ¤æ€§å·®ï¼šå­˜å‚¨è¿‡ç¨‹ä¸èƒ½è·¨æ•°æ®åº“ç§»æ¤ æ¯”å¦‚åœ¨ MySQLã€Oracle å’Œ SQL Server é‡Œç¼–å†™çš„å­˜å‚¨è¿‡ç¨‹ï¼Œåœ¨æ¢æˆå…¶ä»–æ•°æ®åº“æ—¶éƒ½éœ€è¦é‡æ–°ç¼–å†™ã€‚ è°ƒè¯•å›°éš¾ï¼šåªæœ‰å°‘æ•° DBMS æ”¯æŒå­˜å‚¨è¿‡ç¨‹çš„è°ƒè¯•ã€‚ å¯¹äºå¤æ‚çš„å­˜å‚¨è¿‡ç¨‹æ¥è¯´ï¼Œå¼€å‘å’Œç»´æŠ¤éƒ½ä¸å®¹æ˜“ã€‚è™½ç„¶ä¹Ÿæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·å¯ä»¥å¯¹å­˜å‚¨è¿‡ç¨‹è¿›è¡Œè°ƒè¯•ï¼Œä½†è¦æ”¶è´¹ã€‚ å­˜å‚¨è¿‡ç¨‹çš„ç‰ˆæœ¬ç®¡ç†å¾ˆå›°éš¾ï¼šæ¯”å¦‚æ•°æ®è¡¨ç´¢å¼•å‘ç”Ÿå˜åŒ–äº†ï¼Œå¯èƒ½ä¼šå¯¼è‡´å­˜å‚¨è¿‡ç¨‹å¤±æ•ˆã€‚ æˆ‘ä»¬åœ¨å¼€å‘è½¯ä»¶çš„æ—¶å€™å¾€å¾€éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä½†æ˜¯å­˜å‚¨è¿‡ç¨‹æœ¬èº«æ²¡æœ‰ç‰ˆæœ¬æ§åˆ¶ï¼Œç‰ˆæœ¬è¿­ä»£æ›´æ–°çš„æ—¶å€™å¾ˆéº»çƒ¦ã€‚ å®ƒä¸é€‚åˆé«˜å¹¶å‘çš„åœºæ™¯ï¼šé«˜å¹¶å‘çš„åœºæ™¯éœ€è¦å‡å°‘æ•°æ®åº“çš„å‹åŠ›ï¼Œæœ‰æ—¶æ•°æ®åº“ä¼šé‡‡ç”¨åˆ†åº“åˆ†è¡¨çš„æ–¹ å¼ï¼Œè€Œä¸”å¯¹å¯æ‰©å±•æ€§è¦æ±‚å¾ˆé«˜ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå­˜å‚¨è¿‡ç¨‹ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œ å¢åŠ æ•°æ®åº“çš„å‹åŠ› ï¼Œæ˜¾ç„¶å°± ä¸é€‚ç”¨äº†ã€‚"},{"title":"ç”¨æˆ·çš„åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤","path":"/wiki/mysql/ç”¨æˆ·çš„åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤.html","content":"ç”¨æˆ·ç®¡ç†ç”¨æˆ·ä¿¡æ¯åœ¨å“ªé‡Œé»˜è®¤æ•°æ®åº“æœ‰å››ä¸ªï¼š information_schema mysql performance_schema sys å…¶ä¸­ â€œmysqlâ€ æ•°æ®åº“æœ‰ä¸€ä¸ªè¡¨åä¸ºuserï¼Œå­˜å‚¨ç€ç”¨æˆ·ä¿¡æ¯ã€‚ é€šå¸¸é»˜è®¤æœ‰å››ä¸ªç”¨æˆ·ï¼š root ,mysql.infoschema,mysql.session,mysql.sys ã€‚ ubuntu æˆ– debian ç”¨æˆ·è¿˜ä¼šæœ‰ä¸ªmaintç”¨æˆ·ã€‚ debian-sys-maintä¸­Debianç³»ç»Ÿå¯¹MySQLç»´æŠ¤ç”¨çš„ï¼Œå¯ä»¥ç†è§£ä¸ºé€šè¿‡ç³»ç»Ÿçš„æŸä¸ªâ€œéå¸¸è§„â€ç¨‹åºå¯¹Mysqlè¿›è¡Œå¤‡ä»½æ¢å¤ç­‰è¡Œä¸ºæ—¶ï¼Œæ”¹ç¨‹åºæ‰€ä½¿ç”¨çš„ç”¨æ¥ç™»å½•Mysqlçš„è´¦æˆ·ã€‚ å…·ä½“ä½œç”¨æ˜¯é‡å¯åŠè¿è¡ŒmysqlæœåŠ¡ï¼Œä¸è¿‡æœ‰ä¸€ä¸ªå®‰å…¨é—®é¢˜ï¼šè¯¥ç”¨æˆ·çš„æƒé™å’ŒROOTæ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”å¯†ç å¯ä»¥åœ¨etcæŸä¸ªæ–‡ä»¶ä¸­æ‰¾åˆ°ï¼Œè¿™éœ€è¦å¯¹è´¦æˆ·è¿›è¡Œä¸€äº›é™åˆ¶ã€‚ root çš„æƒé™æœ€é«˜ï¼Œé¡¾åæ€ä¹‰ä¸ºâ€œæ ¹â€ï¼Œæ‹¥æœ‰æœ€é«˜æƒé™ï¼Œåˆ›å»ºå…¶ä»–ç”¨æˆ·ï¼Œå®ƒä¸èƒ½æ²¡æœ‰ã€‚ user çš„è”åˆä¸»é”®ç”¨æˆ·ä¿¡æ¯é‡Œä¸¤ä¸ªåˆ—å¾ˆå…³é”®ï¼šhost å’Œ userã€‚ host : ä¸»æœºï¼Œç”¨æ¥åŒºåˆ†ç”¨æˆ·çš„è¿æ¥æ®µã€‚ user : ç”¨æˆ·åï¼ŒåŒºåˆ†ç”¨æˆ· user è¡¨çš„ä¸»é”®æœ‰ä¸¤ä¸ªï¼šhostå’Œuserï¼Œå³è”åˆä¸»é”®ã€‚ æ‰€ä»¥ä¸åŒè¿æ¥æ®µå…è®¸æœ‰é‡åç”¨æˆ·å‡ºç°ï¼Œå°±åƒä¸åŒä½œç”¨åŸŸèƒ½å¤Ÿæœ‰é‡åå˜é‡ä¸€æ ·ã€‚ åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤åˆ›å»ºç”¨æˆ·æŒ‡ä»¤ï¼š CREATE USER ç”¨æˆ·å [@ä¸»æœºåç§°] [IDENTIFIED BY å¯†ç ] #[]ä¸ºå¯é€‰ tipsï¼š è¯¥è¯­å¥å¯ä»¥åŒæ—¶åˆ›å»ºå¤šä¸ªç”¨æˆ·ã€‚ ç”¨æˆ·åå‚æ•°ç”±ç”¨æˆ·å’Œä¸»æœºåæ„æˆã€‚ éœ€è¦æœ‰CREATEæƒé™ï¼Œæ–°è´¦æˆ·ä»€ä¹ˆæƒé™éƒ½æ²¡æœ‰ã€‚ ä¿®æ”¹ UPDATE mysql.user set user = wang5 where user = li4 [and host = xxx]flush privileges;# åˆ·æ–°æƒé™ï¼Œå¦åˆ™ç™»é™†æ—¶ä»ç„¶æ˜¯åŸæœ¬çš„ç”¨æˆ·ä¿¡æ¯ ä¿®æ”¹ç”¨æˆ·å°±æ˜¯ç›´æ¥æ“ä½œ user è¡¨ã€‚ ä¿®æ”¹å®Œéœ€è¦fs; åˆ é™¤ ä¸¤ä¸ªæ–¹æ³•ï¼šDROP å’Œ DELETE (user è¡¨é‡Œåˆ )ã€‚ DROP DROP USER user,[user].... #userå³ç”¨æˆ·åå‚æ•°ï¼Œå¯åŒ…å« hostDROP USER li4; # é»˜è®¤åˆ é™¤hostä¸º%çš„ç”¨æˆ·DROP USER li4@localhost; DELETE DELETE FROM mysql.user WHERE Host=hostname AND User = username;#å¿…é¡»æœ‰ host ï¼Œè”åˆä¸»é”®çš„ä¸¤ä¸ªå­—æ®µï¼Œæ‰èƒ½å”¯ä¸€ç¡®å®šä¸€æ¡è®°å½•ã€‚FLUSH PRIVILEGES; #ç«‹å³ç”Ÿæ•ˆã€‚ DELETE åˆ é™¤ä¼šæœ‰ç³»ç»Ÿä¿¡æ¯æ®‹ç•™ã€‚DROP æŒ‡ä»¤èƒ½åŒæ—¶åˆ å» mysql.user è¡¨å’Œ mysql.db è¡¨å†…å®¹ã€‚ è®¾ç½®å½“å‰ç”¨æˆ·å¯†ç 1. ä½¿ç”¨ALTER USERå‘½ä»¤æ¥ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç  ALTER USER USER() IDENTIFIED BY new_password; 2. ä½¿ç”¨SETè¯­å¥æ¥ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç  SET PASSWORD=new_password; ä¿®æ”¹å…¶ä»–ç”¨æˆ·å¯†ç 1. ä½¿ç”¨ALTERè¯­å¥æ¥ä¿®æ”¹æ™®é€šç”¨æˆ·çš„å¯†ç  ALTER USER user [IDENTIFIED BY æ–°å¯†ç ] [,user[IDENTIFIED BY æ–°å¯†ç ]]â€¦; 2. ä½¿ç”¨SETå‘½ä»¤æ¥ä¿®æ”¹æ™®é€šç”¨æˆ·çš„å¯†ç  SET PASSWORD FOR username@hostname=new_password; å¯†ç è¿‡æœŸå…³é”®è¯ EXPIRE ä½ å¯ä»¥é€šè¿‡ALTERå’ŒCREATE æ—¶ æ‰‹åŠ¨è®¾ç½®ç”¨æˆ·å¯†ç è¿‡æœŸï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥ç™»å…¥æ•°æ®åº“ï¼Œä½†æ— æ³•æŸ¥è¯¢ã€‚é™¤éé‡æ–°è®¾ç½®å¯†ç ã€‚ ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹ç³»ç»Ÿå…¨å±€å˜é‡ Default password lifetime ã€‚æ”¹å˜é‡é»˜è®¤ä¸º0ï¼Œå³ä¸è¿‡æœŸã€‚è®¾ç½®ä¸ºNä»£è¡¨å¯†ç ç”Ÿå­˜æœŸï¼ŒNå¤©åå¯†ç å¿…é¡»ä¿®æ”¹ï¼Œå¦åˆ™å°†è‡ªåŠ¨è¿‡æœŸã€‚ å¯†ç é‡ç”¨å…³é”®è¯ INTERVAL ã€REUSE åˆ†ä¸¤ç±»ï¼šæ—¶é—´å’Œæ›´æ”¹æ•°é‡ æ—¶é—´ï¼ˆå‘¨æœŸï¼‰ï¼šä¿®æ”¹åå¯†ç ä¸èƒ½ç”¨æœ€è¿‘Nå¤©æ—¶é—´ä½¿ç”¨è¿‡çš„å¯†ç ç›¸åŒã€‚ æ›´æ”¹æ•°é‡ ï¼šä¿®æ”¹åå¯†ç ä¸æœ€è¿‘Nä¸ªå¯†ç ä¸èƒ½ç›¸åŒã€‚ ç³»ç»Ÿå˜é‡ï¼špassword_history , password_reuse_interval æƒé™ç®¡ç†show privileges; #æŸ¥çœ‹æƒé™ CREATEå’ŒDROPæƒé™ï¼Œå¯ä»¥åˆ›å»ºæ–°çš„æ•°æ®åº“å’Œè¡¨ï¼Œæˆ–åˆ é™¤ï¼ˆç§»æ‰ï¼‰å·²æœ‰çš„æ•°æ®åº“å’Œè¡¨ã€‚å¦‚æœå°†MySQLæ•°æ®åº“ä¸­çš„DROPæƒé™æˆäºˆæŸç”¨æˆ·ï¼Œç”¨æˆ·å°±å¯ä»¥åˆ é™¤MySQLè®¿é—®æƒé™ä¿å­˜çš„æ•°æ®åº“ã€‚ SELECTã€INSERTã€UPDATEå’ŒDELETEæƒé™å…è®¸åœ¨ä¸€ä¸ªæ•°æ®åº“ç°æœ‰çš„è¡¨ä¸Šå®æ–½æ“ä½œã€‚ SELECTæƒé™åªæœ‰åœ¨å®ƒä»¬çœŸæ­£ä»ä¸€ä¸ªè¡¨ä¸­æ£€ç´¢è¡Œæ—¶æ‰è¢«ç”¨åˆ°ã€‚ INDEXæƒé™å…è®¸åˆ›å»ºæˆ–åˆ é™¤ç´¢å¼•ï¼ŒINDEXé€‚ç”¨äºå·²æœ‰çš„è¡¨ã€‚å¦‚æœå…·æœ‰æŸä¸ªè¡¨çš„CREATEæƒé™ï¼Œå°±å¯ä»¥åœ¨CREATE TABLEè¯­å¥ä¸­åŒ…æ‹¬ç´¢å¼•å®šä¹‰ã€‚ ALTERæƒé™å¯ä»¥ä½¿ç”¨ALTER TABLEæ¥æ›´æ”¹è¡¨çš„ç»“æ„å’Œé‡æ–°å‘½åè¡¨ã€‚ CREATE ROUTINEæƒé™ç”¨æ¥åˆ›å»ºä¿å­˜çš„ç¨‹åºï¼ˆå‡½æ•°å’Œç¨‹åºï¼‰ï¼ŒALTER ROUTINEæƒé™ç”¨æ¥æ›´æ”¹å’Œåˆ é™¤ä¿å­˜çš„ç¨‹åºï¼ŒEXECUTEæƒé™ç”¨æ¥æ‰§è¡Œä¿å­˜çš„ç¨‹åºã€‚ GRANTæƒé™å…è®¸æˆæƒç»™å…¶ä»–ç”¨æˆ·ï¼Œå¯ç”¨äºæ•°æ®åº“ã€è¡¨å’Œä¿å­˜çš„ç¨‹åºã€‚ FILEæƒé™ä½¿ç”¨æˆ·å¯ä»¥ä½¿ç”¨LOAD DATA INFILEå’ŒSELECT â€¦ INTO OUTFILEè¯­å¥è¯»æˆ–å†™æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œä»»ä½•è¢«æˆäºˆFILEæƒé™çš„ç”¨æˆ·éƒ½èƒ½è¯»æˆ–å†™MySQLæœåŠ¡å™¨ä¸Šçš„ä»»ä½•æ–‡ä»¶ï¼ˆè¯´æ˜ç”¨æˆ·å¯ä»¥è¯»ä»»ä½•æ•°æ®åº“ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå› ä¸ºæœåŠ¡å™¨å¯ä»¥è®¿é—®è¿™äº›æ–‡ä»¶ï¼‰ã€‚ æˆäºˆæƒé™GRANT æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° TO ç”¨æˆ·å@ç”¨æˆ·åœ°å€ [IDENTIFIED BY â€˜å¯†ç å£ä»¤â€™]; è¯¥æƒé™å¦‚æœå‘ç°æ²¡æœ‰è¯¥ç”¨æˆ·ï¼Œåˆ™ä¼šç›´æ¥æ–°å»ºä¸€ä¸ªç”¨æˆ·ã€‚ ç»™li4ç”¨æˆ·ç”¨æœ¬åœ°å‘½ä»¤è¡Œæ–¹å¼ï¼Œæˆäºˆatguigudbè¿™ä¸ªåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥çš„æƒé™ã€‚ GRANT SELECT,INSERT,DELETE,UPDATE ON atguigudb.* TO li4@localhost; æˆäºˆé€šè¿‡ç½‘ç»œæ–¹å¼ç™»å½•çš„joeç”¨æˆ· ï¼Œå¯¹æ‰€æœ‰åº“æ‰€æœ‰è¡¨çš„å…¨éƒ¨æƒé™ï¼Œå¯†ç è®¾ä¸º123ã€‚æ³¨æ„è¿™é‡Œå”¯ç‹¬ä¸åŒ…æ‹¬grantçš„æƒé™ GRANT ALL PRIVILEGES ON *.* TO joe@% IDENTIFIED BY 123; æˆäºˆæƒé™çš„åŸåˆ™ æƒé™æ§åˆ¶ä¸»è¦æ˜¯å‡ºäºå®‰å…¨å› ç´ ï¼Œå› æ­¤éœ€è¦éµå¾ªä»¥ä¸‹å‡ ä¸ªç»éªŒåŸåˆ™ï¼š 1ã€åªæˆäºˆèƒ½æ»¡è¶³éœ€è¦çš„æœ€å°æƒé™ï¼Œé˜²æ­¢ç”¨æˆ·å¹²åäº‹ã€‚æ¯”å¦‚ç”¨æˆ·åªæ˜¯éœ€è¦æŸ¥è¯¢ï¼Œé‚£å°±åªç»™selectæƒé™å°±å¯ä»¥äº†ï¼Œä¸è¦ç»™ç”¨æˆ·èµ‹äºˆupdateã€insertæˆ–è€…deleteæƒé™ã€‚ 2ã€åˆ›å»ºç”¨æˆ·çš„æ—¶å€™é™åˆ¶ç”¨æˆ·çš„ç™»å½•ä¸»æœºï¼Œä¸€èˆ¬æ˜¯é™åˆ¶æˆæŒ‡å®šIPæˆ–è€…å†…ç½‘IPæ®µã€‚ 3ã€ä¸ºæ¯ä¸ªç”¨æˆ·è®¾ç½®æ»¡è¶³å¯†ç å¤æ‚åº¦çš„å¯†ç ã€‚ 4ã€å®šæœŸæ¸…ç†ä¸éœ€è¦çš„ç”¨æˆ·ï¼Œå›æ”¶æƒé™æˆ–è€…åˆ é™¤ç”¨æˆ·ã€‚ æŸ¥çœ‹æƒé™ æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™ SHOW GRANTS; # æˆ– SHOW GRANTS FOR CURRENT_USER; # æˆ– SHOW GRANTS FOR CURRENT_USER(); æŸ¥çœ‹æŸç”¨æˆ·çš„å…¨å±€æƒé™ SHOW GRANTS FOR user@ä¸»æœºåœ°å€; æ”¶å›æƒé™æ³¨æ„ï¼šåœ¨å°†ç”¨æˆ·è´¦æˆ·ä»userè¡¨åˆ é™¤ä¹‹å‰ï¼Œåº”è¯¥æ”¶å›ç›¸åº”ç”¨æˆ·çš„æ‰€æœ‰æƒé™ã€‚ æ”¶å›æƒé™å‘½ä»¤ REVOKE æƒé™1,æƒé™2,â€¦æƒé™n ON æ•°æ®åº“åç§°.è¡¨åç§° FROM ç”¨æˆ·å@ç”¨æˆ·åœ°å€; ä¸¾ä¾‹ #æ”¶å›å…¨åº“å…¨è¡¨çš„æ‰€æœ‰æƒé™ REVOKE ALL PRIVILEGES ON *.* FROM joe@%; #æ”¶å›mysqlåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥æƒé™ REVOKE SELECT,INSERT,UPDATE,DELETE ON mysql.* FROM joe@localhost; æ³¨æ„ï¼šé¡»ç”¨æˆ·é‡æ–°ç™»å½•åæ‰èƒ½ç”Ÿæ•ˆ æƒé™è¡¨userè¡¨userè¡¨æ˜¯MySQLä¸­æœ€é‡è¦çš„ä¸€ä¸ªæƒé™è¡¨ï¼Œ è®°å½•ç”¨æˆ·è´¦å·å’Œæƒé™ä¿¡æ¯ ï¼Œæœ‰49ä¸ªå­—æ®µã€‚ è¿™äº›å­—æ®µå¯åˆ†ä¸ºå››ç±»ï¼š èŒƒå›´åˆ—ï¼š host : è¡¨ç¤ºè¿æ¥ç±»å‹ % è¡¨ç¤ºæ‰€æœ‰è¿œç¨‹é€šè¿‡ TCPæ–¹å¼çš„è¿æ¥ IP åœ°å€ å¦‚ (192.168.1.2ã€127.0.0.1) é€šè¿‡åˆ¶å®šipåœ°å€è¿›è¡Œçš„TCPæ–¹å¼çš„è¿æ¥ æœºå™¨å é€šè¿‡åˆ¶å®šç½‘ç»œä¸­çš„æœºå™¨åè¿›è¡Œçš„TCPæ–¹å¼çš„è¿æ¥ ::1 IPv6çš„æœ¬åœ°ipåœ°å€ï¼Œç­‰åŒäºIPv4çš„ 127.0.0.1 localhost æœ¬åœ°æ–¹å¼é€šè¿‡å‘½ä»¤è¡Œæ–¹å¼çš„è¿æ¥ ï¼Œæ¯”å¦‚mysql -u xxx -p xxx æ–¹å¼çš„è¿æ¥ã€‚ user : è¡¨ç¤ºç”¨æˆ·åï¼ŒåŒä¸€ç”¨æˆ·é€šè¿‡ä¸åŒæ–¹å¼é“¾æ¥çš„æƒé™æ˜¯ä¸ä¸€æ ·çš„ã€‚ password ï¼šmysql 5.7 åŠä¹‹åç‰ˆæœ¬çš„å¯†ç ä¿å­˜åˆ° authentication_string å­—æ®µä¸­ä¸å†ä½¿ç”¨password å­— æ®µã€‚ æƒé™åˆ—ï¼šæ˜¯å¦æ‹¥æœ‰ä¸€äº›ç‰¹å®šæƒé™ å®‰å…¨åˆ— ï¼šåŠ å¯†ï¼Œè¡¨ç¤ºç”¨æˆ·ï¼ŒéªŒè¯ç”¨æˆ·èº«ä»½ã€‚ èµ„æºæ§åˆ¶åˆ—ï¼šé™åˆ¶ç”¨æˆ·ä½¿ç”¨çš„èµ„æºã€‚å…±4ä¸ªå­—æ®µã€‚ â‘ max_questionsï¼Œç”¨æˆ·æ¯å°æ—¶å…è®¸æ‰§è¡Œçš„æŸ¥è¯¢æ“ä½œæ¬¡æ•°ï¼› â‘¡max_updatesï¼Œç”¨æˆ·æ¯å°æ—¶å…è®¸æ‰§è¡Œçš„æ›´æ–°æ“ä½œæ¬¡æ•°ï¼› â‘¢max_connectionsï¼Œç”¨æˆ·æ¯å°æ—¶å…è®¸æ‰§è¡Œçš„è¿æ¥æ“ä½œæ¬¡æ•°ï¼› â‘£max_user_connectionsï¼Œç”¨æˆ·å…è®¸åŒæ—¶å»ºç«‹çš„è¿æ¥æ¬¡æ•°ã€‚ æŸ¥çœ‹å­—æ®µï¼š DESC mysql.user; æŸ¥çœ‹ç”¨æˆ·, ä»¥åˆ—çš„æ–¹å¼æ˜¾ç¤ºæ•°æ®ï¼š SELECT * FROM mysql.user \\G; æŸ¥è¯¢ç‰¹å®šå­—æ®µï¼š SELECT host,user,authentication_string,select_priv,insert_priv,drop_priv FROM mysql.user; dbè¡¨ ç”¨æˆ·åˆ— dbè¡¨ç”¨æˆ·åˆ—æœ‰3ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯Hostã€Userã€Dbã€‚è¿™3ä¸ªå­—æ®µåˆ†åˆ«è¡¨ç¤ºä¸»æœºåã€ç”¨æˆ·åå’Œæ•°æ®åº“åã€‚è¡¨ç¤ºä»æŸä¸ªä¸»æœºè¿æ¥æŸä¸ªç”¨æˆ·å¯¹æŸä¸ªæ•°æ®åº“çš„æ“ä½œæƒé™ï¼Œè¿™3ä¸ªå­—æ®µçš„ç»„åˆæ„æˆäº†dbè¡¨çš„ä¸»é”®ã€‚ æƒé™åˆ— Create_routine_privå’ŒAlter_routine_privè¿™ä¸¤ä¸ªå­—æ®µå†³å®šç”¨æˆ·æ˜¯å¦å…·æœ‰åˆ›å»ºå’Œä¿®æ”¹å­˜å‚¨è¿‡ç¨‹çš„æƒé™ã€‚ ç»“æ„æŸ¥çœ‹ï¼š DESCRIBE mysql.db; tables_priv å’Œ column_priv è¡¨ tables_priv è¡¨ï¼šå¯¹è¡¨è®¾ç½®æ“ä½œæƒé™ columns_priv è¡¨ ï¼šå¯¹è¡¨çš„æŸä¸€åˆ—è®¾ç½®æƒé™ ã€‚ procs_priv è¡¨procs_priv è¡¨å¯ä»¥å¯¹å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°è®¾ç½®æ“ä½œæƒé™ ä¸Šé¢å‡ ä¸ªè¡¨éƒ½åœ¨ database â†’ mysql é‡Œï¼Œæƒ³çœ‹è‡ªå·± DESC å»ã€‚ è§’è‰²è§’è‰²çš„åˆ›å»ºã€åˆ é™¤å’Œæƒé™æ“ä½œåˆ›å»ºè§’è‰² CREATE ROLE role_name[@host_name] [,role_name[@host_name]]... è§’è‰²åç§°çš„å‘½åè§„åˆ™å’Œç”¨æˆ·åç±»ä¼¼ã€‚å¦‚æœhost_nameçœç•¥ï¼Œé»˜è®¤ä¸º%ï¼Œrole_nameä¸å¯çœç•¥ï¼Œä¸å¯ä¸ºç©ºã€‚ ç»™è§’è‰²èµ‹äºˆæƒé™ GRANT privileges ON table_name TO role_name[@host_name]; ä¸Šè¿°è¯­å¥ä¸­privilegesä»£è¡¨æƒé™çš„åç§°ï¼Œå¤šä¸ªæƒé™ä»¥é€—å·éš”å¼€ã€‚å¯ä½¿ç”¨SHOWè¯­å¥æŸ¥è¯¢æƒé™åç§° SHOW PRIVILEGES\\G æŸ¥çœ‹è§’è‰²çš„æƒé™ SHOW GRANTS FOR role_name; åªè¦ä½ åˆ›å»ºäº†ä¸€ä¸ªè§’è‰²ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨ç»™ä½ ä¸€ä¸ªâ€œUSAGEâ€æƒé™ï¼Œæ„æ€æ˜¯è¿æ¥ç™»å½•æ•°æ®åº“çš„æƒé™ã€‚ å›æ”¶è§’è‰²çš„æƒé™ REVOKE privileges ON tablename FROM rolename; åˆ é™¤è§’è‰² DROP ROLE role [,role2]... æ³¨æ„ï¼Œå¦‚æœä½ åˆ é™¤äº†è§’è‰²ï¼Œé‚£ä¹ˆç”¨æˆ·ä¹Ÿå°±å¤±å»äº†é€šè¿‡è¿™ä¸ªè§’è‰²æ‰€è·å¾—çš„æ‰€æœ‰æƒé™ã€‚ è§’è‰²å’Œç”¨æˆ·ç»™ç”¨æˆ·èµ‹äºˆè§’è‰² è§’è‰²åˆ›å»ºå¹¶æˆæƒåï¼Œè¦èµ‹ç»™ç”¨æˆ·å¹¶å¤„äºæ¿€æ´»çŠ¶æ€æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚ GRANT role [,role2,...] TO user [,user2,...]; æŸ¥è¯¢å½“å‰å·²æ¿€æ´»çš„è§’è‰² SELECT CURRENT_ROLE(); æ¿€æ´»è§’è‰² æ–¹å¼1ï¼šä½¿ç”¨set default role å‘½ä»¤æ¿€æ´»è§’è‰² SET DEFAULT ROLE ALL TO kangshifu@localhost; æ–¹å¼2ï¼šå°†activate_all_roles_on_loginè®¾ç½®ä¸ºON SET GLOBAL activate_all_roles_on_login=ON; è¿™æ¡ SQL è¯­å¥çš„æ„æ€æ˜¯ï¼Œå¯¹æ‰€æœ‰è§’è‰²æ°¸ä¹…æ¿€æ´»ã€‚ æ’¤é”€ç”¨æˆ·çš„è§’è‰² REVOKE role FROM user; è®¾ç½®å¼ºåˆ¶è§’è‰²(mandatory role) æ–¹å¼1ï¼šæœåŠ¡å¯åŠ¨å‰è®¾ç½® [mysqld] mandatory_roles=role1,role2@localhost,r3@%.atguigu.com æ–¹å¼2ï¼šè¿è¡Œæ—¶è®¾ç½® SET PERSIST mandatory_roles = role1,role2@localhost,r3@%.example.com; #ç³»ç»Ÿé‡å¯åä»ç„¶æœ‰æ•ˆSET GLOBAL mandatory_roles = role1,role2@localhost,r3@%.example.com; #ç³»ç»Ÿé‡å¯åå¤±æ•ˆ é…ç½®æ–‡ä»¶**æ–‡ä»¶é‡Œä¼šå®šä¹‰è®¸å¤šç»„(ç”¨ [ ] æ‹¬èµ·æ¥)ï¼Œç»„ä¸‹è¾¹å¯ä»¥å®šä¹‰å¯åŠ¨é€‰é¡¹ã€‚**é€šå¸¸ç§°ç»„ä¸ºæ ‡ç­¾ã€‚ [server]#å…·ä½“å¯åŠ¨é€‰é¡¹option1 #ä¸éœ€è¦é€‰é¡¹å€¼ï¼šTrue / False ç±»å‹option2 = value2 #éœ€è¦é€‰é¡¹å€¼ ï¼š é”®å€¼å¯¹ ç±»å‹[mysqld]...[mysqld_safe]...[client]... é…ç½®æ–‡ä»¶ä¸­ä¸åŒé€‰é¡¹ç»„æ˜¯ç»™ä¸åŒçš„å¯åŠ¨å‘½ä»¤ä½¿ç”¨çš„ã€‚ æœ‰ä¸¤ä¸ªé€‰é¡¹ç»„æ¯”è¾ƒç‰¹åˆ«ï¼š [server]ç»„çš„å¯åŠ¨é€‰é¡¹ä½œç”¨äºæ‰€æœ‰æœåŠ¡å™¨ç¨‹åº [client]ç»„çš„å¯åŠ¨é€‰é¡¹ä½œç”¨äºæ‰€æœ‰å®¢æˆ·ç«¯ç¨‹åºã€‚ åƒmysqlè¿™ä¸ªå¯åŠ¨å‘½ä»¤ï¼Œå°±ä¼šè°ƒç”¨ [mysql] å’Œ [client] ä¸¤ä¸ªç»„ tipsï¼š [mysql-â€˜ç‰ˆæœ¬å·â€™]ï¼šåªé€‚ç”¨äºç‰¹å®šç‰ˆæœ¬çš„ä¸“ç”¨é€‰é¡¹ç»„ ä¸¤ä¸ªç»„é‡Œå‡ºç°é‡å¤é…ç½®é¡¹ï¼Œä»¥æœ€åä¸€ä¸ªä¸ºå‡†ã€‚ ä¸€ä¸ªé€‰é¡¹æ—¢å‡ºç°åœ¨å‘½ä»¤è¡Œï¼Œåˆå‡ºç°åœ¨é…ç½®æ–‡ä»¶é‡Œï¼Œä»¥å‘½ä»¤è¡Œä¸ºå‡†ã€‚ å¦‚ defaults-extra-file å’Œ defaults-file æœ¬èº«å°±æ˜¯ä¸ºäº†æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„çš„ã€‚"},{"title":"æ¸¸æ ‡å’Œè§¦å‘å™¨","path":"/wiki/mysql/æ¸¸æ ‡å’Œè§¦å‘å™¨.html","content":"æ¸¸æ ‡**ï¼ˆæˆ–å…‰æ ‡ï¼‰**å®šä¹‰æ¸¸æ ‡æ˜¯ä¸€ç§ èƒ½å¤Ÿå¯¹ç»“æœé›†ä¸­çš„æ¯ä¸€æ¡è®°å½•è¿›è¡Œå®šä½ï¼ˆåƒæŒ‡é’ˆä¸€æ ·ï¼Œå‘å‰å®šä½ä¸€æ¡è®°å½•ã€å‘åå®šä½ä¸€æ¡è®°å½•ï¼Œæˆ–è€…æ˜¯ éšæ„å®šä½åˆ°æŸä¸€æ¡è®°å½• ï¼‰ï¼Œå¹¶å¯¹æŒ‡å‘çš„è®°å½•ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œçš„æ•°æ®ç»“æ„ã€‚ æ¸¸æ ‡è®© SQLè¿™ç§é¢å‘é›†åˆçš„è¯­è¨€æœ‰äº†é¢å‘è¿‡ç¨‹å¼€å‘çš„èƒ½åŠ›ã€‚ ç‰¹ç‚¹ï¼š åœ¨ SQL ä¸­ï¼Œæ¸¸æ ‡æ˜¯ä¸€ç§ä¸´æ—¶çš„æ•°æ®åº“å¯¹è±¡ï¼Œå¯ä»¥æŒ‡å‘å­˜å‚¨åœ¨æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¡ŒæŒ‡é’ˆã€‚ è¿™é‡Œæ¸¸æ ‡å……å½“æŒ‡é’ˆçš„ä½œç”¨,é€šè¿‡æ“ä½œæ¸¸æ ‡æ¥å¯¹æ•°æ®è¡Œè¿›è¡Œæ“ä½œ. æ¸¸æ ‡å¿…é¡»åœ¨å£°æ˜å¤„ç†ç¨‹åºä¹‹å‰è¢«å£°æ˜ ç›¸å¯¹çš„ï¼Œå˜é‡å’Œæ¡ä»¶åˆ™å¿…é¡»åœ¨å£°æ˜æ¸¸æ ‡å’Œå¤„ç†ç¨‹åºä¹‹å‰è¢«å£°æ˜ã€‚ ä½¿ç”¨è¿‡ç¨‹ä½¿ç”¨æ¸¸æ ‡ä¸€èˆ¬åˆ†4æ­¥ï¼Œä¸åŒDBMSç»†èŠ‚ä¸åŒã€‚ å£°æ˜æ¸¸æ ‡ mysql(è¿˜æœ‰SQL Serverï¼ŒDB2 å’Œ MariaDB) DECLARE cursor_name CURSOR FOR select_statement; Oracle æˆ–è€… PostgreSQL DECLARE cursor_name CURSOR IS select_statement; select_statement:è¦ä½¿ç”¨ SELECT è¯­å¥æ¥è·å–æ•°æ®ç»“æœé›†ï¼Œè€Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹éå†æ•°æ®ï¼Œ æ‰€ä»¥è¿™é‡Œè¦é€šè¿‡SELECT è¯­å¥ï¼Œè¿”å›ä¸€ä¸ªç”¨äºåˆ›å»ºæ¸¸æ ‡çš„ç»“æœé›†ã€‚ æ‰“å¼€æ¸¸æ ‡ å®šä¹‰å¥½æ¸¸æ ‡ä¹‹åï¼Œä½¿ç”¨æ¸¸æ ‡å‰å¿…é¡»å…ˆæ‰“å¼€æ¸¸æ ‡ã€‚ æ‰“å¼€æ¸¸æ ‡çš„æ—¶å€™ SELECT è¯­å¥çš„æŸ¥è¯¢ç»“æœé›†å°±ä¼šé€åˆ°æ¸¸æ ‡å·¥ä½œåŒºï¼Œä¸ºåé¢æ¸¸æ ‡çš„é€æ¡è¯»å–ç»“æœé›†ä¸­çš„è®°å½•åšå‡†å¤‡ã€‚ OPEN cursor_name ä½¿ç”¨æ¸¸æ ‡ ä½¿ç”¨å³é€šè¿‡å®ƒæ¥è·å–æ•°æ® FETCH cursor_name INTO var_name [, var_name] ...#è¿™å¥çš„ä½œç”¨æ˜¯ä½¿ç”¨ cursor_name è¿™ä¸ªæ¸¸æ ‡æ¥è¯»å–å½“å‰è¡Œï¼Œå¹¶ä¸”å°†æ•°æ®ä¿å­˜åˆ° var_name è¿™ä¸ªå˜é‡ä¸­ï¼Œ#æ¸¸æ ‡æŒ‡é’ˆæŒ‡åˆ°ä¸‹ä¸€è¡Œã€‚ æ³¨æ„ï¼š å¦‚æœæ¸¸æ ‡è¯»å–çš„æ•°æ®è¡Œæœ‰å¤šä¸ªåˆ—åï¼Œåˆ™åœ¨ INTO å…³é”®å­—åé¢èµ‹å€¼ç»™å¤šä¸ªå˜é‡åå³å¯ã€‚ var_nameå¿…é¡»åœ¨å£°æ˜æ¸¸æ ‡ä¹‹å‰å°±å®šä¹‰å¥½ã€‚ æ¸¸æ ‡çš„æŸ¥è¯¢ç»“æœé›†ä¸­çš„å­—æ®µæ•°ï¼Œå¿…é¡»è·Ÿ INTO åé¢çš„å˜é‡æ•°ä¸€è‡´ å…³é—­æ¸¸æ ‡ CLOSE cursor_name ä½¿ç”¨å®Œæ¸¸æ ‡åéœ€è¦å…³é—­æ‰è¯¥æ¸¸æ ‡ ã€‚ä¸‹æ¬¡è¿˜è¦ä½¿ç”¨å°±è¦é‡æ–°æ‰“å¼€æ¸¸æ ‡ã€‚ æ¸¸æ ‡ä¼šå ç”¨ç³»ç»Ÿèµ„æº ï¼Œå¦‚æœä¸åŠæ—¶å…³é—­ï¼Œæ¸¸æ ‡ä¼šä¸€ç›´ä¿æŒåˆ°å­˜å‚¨è¿‡ç¨‹ç»“æŸï¼Œå½±å“ç³»ç»Ÿè¿è¡Œçš„æ•ˆç‡ã€‚ ç¤ºä¾‹åˆ›å»ºå­˜å‚¨è¿‡ç¨‹â€œget_count_by_limit_total_salary()â€ï¼Œ å£°æ˜INå‚æ•° limit_total_salaryï¼ŒDOUBLEç±»å‹ï¼› å£°æ˜ OUTå‚æ•°total_countï¼ŒINTç±»å‹ã€‚ å‡½æ•°çš„åŠŸèƒ½å¯ä»¥å®ç°ç´¯åŠ è–ªèµ„æœ€é«˜çš„å‡ ä¸ªå‘˜å·¥çš„è–ªèµ„å€¼ï¼Œç›´åˆ°è–ªèµ„æ€»å’Œè¾¾åˆ°limit_total_salaryå‚æ•°çš„å€¼ï¼Œè¿”å›ç´¯åŠ çš„äººæ•°ç»™total_countã€‚ DELIMITER // CREATE PROCEDURE get_count_by_limit_total_salary( IN limit_total_salary DOUBLE,OUT total_count INT)BEGINDECLARE sum_salary DOUBLE DEFAULT 0; #è®°å½•ç´¯åŠ çš„æ€»å·¥èµ„ DECLARE cursor_salary DOUBLE DEFAULT 0; #è®°å½•æŸä¸€ä¸ªå·¥èµ„å€¼ DECLARE emp_count INT DEFAULT 0; #è®°å½•å¾ªç¯ä¸ªæ•° #å®šä¹‰æ¸¸æ ‡ DECLARE emp_cursor CURSOR FOR SELECT salary FROM employees ORDER BY salary DESC;#æ‰“å¼€æ¸¸æ ‡ OPEN emp_cursor; REPEAT #ä½¿ç”¨æ¸¸æ ‡ï¼ˆä»æ¸¸æ ‡ä¸­è·å–æ•°æ®ï¼‰ FETCH emp_cursor INTO cursor_salary; SET sum_salary = sum_salary + cursor_salary; SET emp_count = emp_count + 1; UNTIL sum_salary = limit_total_salary END REPEAT; SET total_count = emp_count; #å…³é—­æ¸¸æ ‡ CLOSE emp_cursor; END // DELIMITER ; æ€»ç»“ ä¼˜ç‚¹ï¼šä¸ºé€æ¡è¯»å– ç»“æœé›†ä¸­çš„æ•°æ®ï¼Œæä¾›äº†å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚è·Ÿåœ¨åº”ç”¨å±‚é¢å®ç°ç›¸åŒçš„åŠŸèƒ½ç›¸æ¯”ï¼Œæ¸¸æ ‡å¯ä»¥åœ¨å­˜å‚¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œæ•ˆç‡é«˜ï¼Œç¨‹åºä¹Ÿæ›´åŠ ç®€æ´ã€‚ ç¼ºç‚¹ï¼šæ¯”å¦‚åœ¨ä½¿ç”¨æ¸¸æ ‡çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹æ•°æ®è¡Œè¿›è¡Œ åŠ é” ï¼Œè¿™æ ·åœ¨ä¸šåŠ¡å¹¶å‘é‡å¤§çš„æ—¶å€™ï¼Œä¸ä»…ä¼šå½±å“ä¸šåŠ¡ä¹‹é—´çš„æ•ˆç‡ï¼Œè¿˜ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æº ï¼Œé€ æˆå†…å­˜ä¸è¶³ï¼Œè¿™æ˜¯å› ä¸ºæ¸¸æ ‡æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œçš„å¤„ç†ã€‚ å»ºè®®ï¼šå…»æˆç”¨å®Œä¹‹åå°±å…³é—­çš„ä¹ æƒ¯ï¼Œè¿™æ ·æ‰èƒ½æé«˜ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ è§¦å‘å™¨åº”ç”¨åœºæ™¯æœ‰ 2 ä¸ªæˆ–è€…å¤šä¸ªç›¸äº’å…³è”çš„è¡¨ï¼Œå¦‚å•†å“ä¿¡æ¯å’Œåº“å­˜ä¿¡æ¯ åˆ†åˆ«å­˜æ”¾åœ¨ 2 ä¸ªä¸åŒçš„æ•°æ®è¡¨ä¸­ï¼Œæˆ‘ä»¬åœ¨æ·»åŠ ä¸€æ¡æ–°å•†å“è®°å½•çš„æ—¶å€™ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¿…é¡»åŒæ—¶åœ¨åº“å­˜è¡¨ä¸­æ·»åŠ ä¸€æ¡åº“å­˜è®°å½•ã€‚ è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¿…é¡»æŠŠè¿™ä¸¤ä¸ªå…³è”çš„æ“ä½œæ­¥éª¤åŒæ­¥å†™åˆ°ç¨‹åºé‡Œé¢ã€‚å¯å¯¹æ•°æ®è¿›è¡Œæ‰‹åŠ¨ç»´æŠ¤æ—¶ï¼Œå¾ˆå®¹æ˜“å¿˜è®°å…¶ä¸­çš„ä¸€æ­¥ ï¼Œå¯¼è‡´æ•°æ®ç¼ºå¤±ã€‚ è¿™æ—¶å¯ä»¥ä½¿ç”¨è§¦å‘å™¨ï¼šåˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼Œè®©å•†å“ä¿¡æ¯æ•°æ®çš„æ’å…¥æ“ä½œè‡ªåŠ¨è§¦å‘åº“å­˜æ•°æ®çš„æ’å…¥æ“ä½œã€‚ å®šä¹‰ MySQLä» 5.0.2 ç‰ˆæœ¬å¼€å§‹æ”¯æŒè§¦å‘å™¨ã€‚MySQLçš„è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹ä¸€æ ·ï¼Œéƒ½æ˜¯åµŒå…¥åˆ°MySQLæœåŠ¡å™¨çš„ä¸€æ®µç¨‹åºã€‚ è§¦å‘å™¨æ˜¯ç”± äº‹ä»¶æ¥è§¦å‘ æŸä¸ªæ“ä½œï¼Œè¿™äº›äº‹ä»¶åŒ…æ‹¬ INSERT ã€ UPDATE ã€ DELETE äº‹ä»¶ã€‚ æ‰€è°“äº‹ä»¶å°±æ˜¯æŒ‡ ç”¨æˆ·çš„åŠ¨ä½œæˆ–è€…è§¦å‘æŸé¡¹è¡Œä¸ºã€‚ å¦‚æœå®šä¹‰äº†è§¦å‘ç¨‹åºï¼Œå½“æ•°æ®åº“æ‰§è¡Œè¿™äº›è¯­å¥æ—¶å€™ï¼Œå°±ç›¸å½“äºäº‹ä»¶å‘ç”Ÿäº†ï¼Œå°±ä¼šè‡ªåŠ¨æ¿€å‘è§¦å‘å™¨æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚ å½“å¯¹æ•°æ®è¡¨ä¸­çš„æ•°æ®æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œéœ€è¦è‡ªåŠ¨æ‰§è¡Œä¸€äº›æ•°æ®åº“é€»è¾‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è§¦å‘å™¨æ¥å®ç°ã€‚ ä½¿ç”¨ è§¦å‘å™¨ä¸èƒ½æ›´æ–°æˆ–è¦†ç›–ï¼›ä¸ºäº†ä¿®æ”¹ä¸€ä¸ªè§¦å‘å™¨ï¼Œå¿…é¡»å…ˆåˆ å†å»ºã€‚ ä½¿ç”¨è§¦å‘å™¨ insert è§¦å‘å™¨ åœ¨insertè§¦å‘å™¨ä»£ç å†…ï¼Œå¯å¼•ç”¨ä¸€ä¸ªåä¸ºnewçš„è™šæ‹Ÿè¡¨ï¼Œè®¿é—®è¢«æ’å…¥çš„è¡Œï¼› åœ¨before insertè§¦å‘å™¨å†…ï¼Œnewä¸­çš„å€¼ä¹Ÿå¯ä»¥è¢«æ›´æ–°(å…è®¸æ›´æ”¹è¢«æ’å…¥çš„å€¼)ï¼› delete è§¦å‘å™¨ åœ¨deleteè§¦å‘å™¨ä»£ç å†…ï¼Œå¯ä»¥å¼•ç”¨ä¸€ä¸ªåä¸ºoldçš„è™šæ‹Ÿè¡¨ï¼Œè®¿é—®è¢«åˆ é™¤çš„è¡Œï¼› oldä¸­çš„å€¼å…¨éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ›´æ–°ï¼› update è§¦å‘å™¨ åœ¨updateè§¦å‘å™¨ä»£ç å†…ï¼Œå¯ä»¥å¼•ç”¨ä¸€ä¸ªåä¸ºoldçš„è™šæ‹Ÿè¡¨è®¿é—®ä»¥å‰(updateè¯­å¥å‰)çš„å€¼ï¼Œå¼•ç”¨ä¸€ä¸ªåä¸ºnewçš„è™šæ‹Ÿè¡¨è®¿é—®æ–°æ›´æ–°çš„å€¼ï¼› åœ¨before updateè§¦å‘å™¨ä¸­ï¼Œnewä¸­çš„å€¼å¯èƒ½ä¹Ÿè¢«æ›´æ–°(å…è®¸æ›´æ”¹å°†è¦ç”¨äºupdateè¯­å¥ä¸­çš„å€¼)ï¼› oldä¸­çš„å€¼å…¨éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ›´æ–°ï¼› å¦å¤–çš„ tips ï¼š åˆ›å»ºè§¦å‘å™¨å¯èƒ½éœ€è¦ç‰¹æ®Šçš„å®‰å…¨è®¿é—®æƒé™ï¼Œä½†è§¦å‘å™¨çš„æ‰§è¡Œæ˜¯è‡ªåŠ¨çš„ã€‚å¦‚æœinsertã€updateæˆ–deleteè¯­å¥å¯ä»¥æ‰§è¡Œï¼Œåˆ™ç›¸åº”è§¦å‘å™¨ä¹Ÿèƒ½æ‰§è¡Œï¼› åº”è¯¥ç”¨è§¦å‘å™¨æ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§(å¤§å°å†™ã€æ ¼å¼ç­‰)ï¼›ä¼˜ç‚¹åœ¨äºå®ƒæ€»æ˜¯è¿›è¡Œè¿™ç§å¤„ç†ï¼Œè€Œä¸”æ˜¯é€æ˜çš„è¿›è¡Œï¼Œä¸å®¢æˆ·æœºåº”ç”¨æ— å…³ï¼› è§¦å‘å™¨çš„ä¸€ç§éå¸¸æœ‰æ„ä¹‰çš„ä½¿ç”¨æ˜¯åˆ›å»ºå®¡è®¡è·Ÿè¸ªã€‚ä½¿ç”¨è§¦å‘å™¨ï¼ŒæŠŠæ›´æ”¹è®°å½•åˆ°å¦ä¸€ä¸ªè¡¨éå¸¸å®¹æ˜“ï¼› MySQLè§¦å‘å™¨ä¸æ”¯æŒcallè¯­å¥ï¼Œå³ä¸èƒ½ä»è§¦å‘å™¨å†…è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚æ‰€éœ€çš„å­˜å‚¨è¿‡ç¨‹ä»£ç éœ€è¦å¤åˆ¶åˆ°è§¦å‘å™¨å†…ã€‚ åˆ›å»ºCREATE TRIGGER è§¦å‘å™¨åç§°BEFORE|AFTERINSERT|UPDATE|DELETE ON è¡¨å FOR EACH ROW è§¦å‘å™¨æ‰§è¡Œçš„è¯­å¥å—; è¡¨å ï¼šè¡¨ç¤ºè§¦å‘å™¨ç›‘æ§çš„å¯¹è±¡ã€‚ BEFORE|AFTER ï¼šè¡¨ç¤ºè§¦å‘çš„æ—¶é—´ã€‚BEFORE è¡¨ç¤ºåœ¨äº‹ä»¶ä¹‹å‰è§¦å‘ï¼›AFTER è¡¨ç¤ºåœ¨äº‹ä»¶ä¹‹åè§¦å‘ã€‚ INSERT|UPDATE|DELETE ï¼šè¡¨ç¤ºè§¦å‘çš„å‰æäº‹ä»¶ã€‚ æŸ¥çœ‹æŸ¥çœ‹è§¦å‘å™¨æ˜¯æŸ¥çœ‹æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨çš„è§¦å‘å™¨çš„å®šä¹‰ã€çŠ¶æ€å’Œè¯­æ³•ä¿¡æ¯ç­‰ã€‚ æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„æ‰€æœ‰è§¦å‘å™¨çš„å®šä¹‰ SHOW TRIGGERS\\G æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­æŸä¸ªè§¦å‘å™¨çš„å®šä¹‰ SHOW CREATE TRIGGER è§¦å‘å™¨å ä»ç³»ç»Ÿåº“information_schemaçš„TRIGGERSè¡¨ä¸­æŸ¥è¯¢â€œsalary_check_triggerâ€è§¦å‘å™¨çš„ä¿¡æ¯ã€‚ SELECT * FROM information_schema.TRIGGERS; åˆ é™¤DROP TRIGGER IF EXISTS è§¦å‘å™¨åç§°; è§¦å‘å™¨ä½œä¸ºæ•°æ®åº“å¯¹è±¡ä¹‹ä¸€ï¼Œä¹Ÿé€‚ç”¨äºDROPåˆ é™¤ã€‚ ç¤ºä¾‹DELIMITER // CREATE TRIGGER salary_check_trigger BEFORE INSERT ON employees FOR EACH ROW BEGIN DECLARE mgrsalary DOUBLE; SELECT salary INTO mgrsalary FROM employees WHERE employee_id = NEW.manager_id; IF NEW.salary mgrsalary THEN SIGNAL SQLSTATE HY000 SET MESSAGE_TEXT = è–ªèµ„é«˜äºé¢†å¯¼è–ªèµ„é”™è¯¯; END IF; END // DELIMITER ; ä¸€ä¸ªæ³¨æ„ç‚¹ï¼šå¦‚æœåœ¨å­è¡¨ä¸­å®šä¹‰äº†å¤–é”®çº¦æŸï¼Œå¹¶ä¸”å¤–é”®æŒ‡å®šäº†ON UPDATEDELETE CASCADESET NULLå­å¥ï¼Œæ­¤ æ—¶ä¿®æ”¹çˆ¶è¡¨è¢«å¼•ç”¨çš„é”®å€¼æˆ–åˆ é™¤çˆ¶è¡¨è¢«å¼•ç”¨çš„è®°å½•è¡Œæ—¶ï¼Œä¹Ÿä¼šå¼•èµ·å­è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ“ä½œï¼Œæ­¤æ—¶åŸºäºå­ è¡¨çš„UPDATEå’ŒDELETEè¯­å¥å®šä¹‰çš„è§¦å‘å™¨å¹¶ä¸ä¼šè¢«æ¿€æ´»ã€‚ ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼š è§¦å‘å™¨å¯ä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚ è§¦å‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è®°å½•æ“ä½œæ—¥å¿— è§¦å‘å™¨è¿˜å¯ä»¥ç”¨åœ¨æ“ä½œæ•°æ®å‰ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥ã€‚ ç¼ºç‚¹ï¼š è§¦å‘å™¨æœ€å¤§çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¯è¯»æ€§å·® å› ä¸ºè§¦å‘å™¨å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶ä¸”ç”±äº‹ä»¶é©±åŠ¨ï¼Œè¿™å°±æ„å‘³ç€è§¦å‘å™¨æœ‰å¯èƒ½ ä¸å—åº”ç”¨å±‚çš„æ§åˆ¶ ã€‚è¿™å¯¹ç³»ç»Ÿç»´æŠ¤æ˜¯éå¸¸æœ‰æŒ‘æˆ˜çš„ã€‚ #åˆ›å»ºè§¦å‘å™¨ç”¨äºä¿®æ”¹ä¼šå‘˜å‚¨å€¼æ“ä½œã€‚å¦‚æœè§¦å‘å™¨ä¸­çš„æ“ä½œå‡ºäº†é—®é¢˜ï¼Œä¼šå¯¼è‡´ä¼šå‘˜å‚¨å€¼é‡‘é¢æ›´æ–°å¤±è´¥update demo.membermaster set memberdeposit=20 where memberid = 2; ERROR 1054 (42S22): Unknown column aa in field list è¿™æ˜¯å› ä¸ºï¼Œè§¦å‘å™¨ä¸­çš„æ•°æ®æ’å…¥æ“ä½œå¤šäº†ä¸€ä¸ªå­—æ®µï¼Œç³»ç»Ÿæç¤ºé”™è¯¯ã€‚å¯æ˜¯ï¼Œå¦‚æœä½ ä¸äº†è§£è¿™ä¸ªè§¦å‘å™¨ï¼Œå¾ˆå¯èƒ½ä¼šè®¤ä¸ºæ˜¯æ›´æ–°è¯­å¥æœ¬èº«çš„é—®é¢˜ï¼Œæˆ–è€…æ˜¯ä¼šå‘˜ä¿¡æ¯è¡¨çš„ç»“æ„å‡ºäº†é—®é¢˜ã€‚è¯´ä¸å®šä½ è¿˜ä¼šç»™ä¼šå‘˜ä¿¡æ¯è¡¨æ·»åŠ ä¸€ä¸ªå«â€œaaâ€çš„å­—æ®µï¼Œè¯•å›¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»“æœåªèƒ½æ˜¯ç™½è´¹åŠ› ç›¸å…³æ•°æ®çš„å˜æ›´ï¼Œå¯èƒ½ä¼šå¯¼è‡´è§¦å‘å™¨å‡ºé”™ã€‚ ç‰¹åˆ«æ˜¯æ•°æ®è¡¨ç»“æ„çš„å˜æ›´ï¼Œéƒ½å¯èƒ½ä¼šå¯¼è‡´è§¦å‘å™¨å‡ºé”™ï¼Œè¿›è€Œå½±å“æ•°æ®æ“ä½œçš„æ­£å¸¸è¿è¡Œã€‚è¿™äº›éƒ½ä¼šç”±äºè§¦å‘å™¨æœ¬èº«çš„éšè”½æ€§ï¼Œå½±å“åˆ°åº”ç”¨ä¸­é”™è¯¯åŸå› æ’æŸ¥çš„æ•ˆç‡ã€‚ æ‹“å±•ï¼šMySQL 8.0çš„æ–°ç‰¹æ€§**â€”**å…¨å±€å˜é‡çš„æŒä¹…åŒ–åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œå…¨å±€å˜é‡å¯ä»¥é€šè¿‡SET GLOBALè¯­å¥æ¥è®¾ç½®ã€‚ ä¾‹å¦‚ï¼Œè®¾ç½®æœåŠ¡å™¨è¯­å¥è¶…æ—¶çš„é™åˆ¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç³»ç»Ÿå˜é‡max_execution_timeæ¥å®ç°ï¼š SET GLOBAL MAX_EXECUTION_TIME=2000; ä½†ä½¿ç”¨SET GLOBALè¯­å¥è®¾ç½®çš„å˜é‡å€¼åªä¼šä¸´æ—¶ç”Ÿæ•ˆ : å³æ•°æ®åº“é‡å¯ åï¼ŒæœåŠ¡å™¨åˆä¼šä»MySQLé…ç½®æ–‡ä»¶ä¸­è¯»å–å˜é‡çš„é»˜è®¤å€¼ã€‚ MySQL 8.0ç‰ˆæœ¬æ–°å¢äº† SET PERSIST å‘½ä»¤ã€‚ ä¾‹å¦‚ï¼šè®¾ç½®æœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ä¸º1000ï¼š SET PERSIST global max_connections = 1000; MySQLä¼šå°†è¯¥å‘½ä»¤çš„é…ç½®ä¿å­˜åˆ°æ•°æ®ç›®å½•ä¸‹çš„ mysqld-auto.cnf æ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶ä¼šè¯»å–è¯¥æ–‡ä»¶ï¼Œç”¨å…¶ä¸­çš„é…ç½®æ¥è¦†ç›–é»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚"},{"title":"çº¦æŸ","path":"/wiki/mysql/çº¦æŸ.html","content":"çº¦æŸå®šä¹‰ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼ŒSQLè§„èŒƒä»¥çº¦æŸçš„æ–¹å¼å¯¹è¡¨æ•°æ®è¿›è¡Œé¢å¤–çš„æ¡ä»¶é™åˆ¶ å®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰ ï¼š åŒä¸€ä¸ªè¡¨ä¸­ï¼Œä¸èƒ½å­˜åœ¨ä¸¤æ¡å®Œå…¨ç›¸åŒæ— æ³•åŒºåˆ†çš„è®°å½• åŸŸå®Œæ•´æ€§ï¼ˆDomain Integrityï¼‰ ï¼š å¹´é¾„èŒƒå›´0-120ï¼Œæ€§åˆ«èŒƒå›´â€œç”·å¥³â€ å¼•ç”¨å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰ ä¾‹å¦‚ï¼šå‘˜å·¥æ‰€åœ¨éƒ¨é—¨ï¼Œåœ¨éƒ¨é—¨è¡¨ä¸­è¦èƒ½æ‰¾åˆ°è¿™ä¸ªéƒ¨é—¨ ç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ï¼ˆUser-defined Integrityï¼‰ ä¾‹å¦‚ï¼šç”¨æˆ·åå”¯ä¸€ã€å¯†ç ä¸èƒ½ä¸ºç©ºç­‰ï¼Œæœ¬éƒ¨é—¨ç»ç†çš„å·¥èµ„ä¸å¾—é«˜äºæœ¬éƒ¨é—¨èŒå·¥çš„å¹³å‡å·¥èµ„çš„5å€ã€‚ å®šä¹‰å»ºè¡¨æ—¶è§„å®šçº¦æŸï¼ˆé€šè¿‡ CREATE TABLE è¯­å¥ï¼‰ï¼Œæˆ–è€…åœ¨è¡¨åˆ›å»ºä¹‹åé€šè¿‡ ALTER TABLE è¯­å¥è§„å®š çº¦æŸæ˜¯è¡¨çº§çš„å¼ºåˆ¶è§„å®šã€‚ å¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶è§„å®šçº¦æŸï¼ˆé€šè¿‡ CREATE TABLE è¯­å¥ï¼‰ï¼Œæˆ–è€…åœ¨è¡¨åˆ›å»ºä¹‹åé€šè¿‡ ALTER TABLE è¯­å¥è§„å®š çº¦æŸã€‚ åˆ†ç±» æ ¹æ®çº¦æŸæ•°æ®åˆ—çš„é™åˆ¶ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š å•åˆ—çº¦æŸï¼šæ¯ä¸ªçº¦æŸåªçº¦æŸä¸€åˆ— å¤šåˆ—çº¦æŸï¼šæ¯ä¸ªçº¦æŸå¯çº¦æŸå¤šåˆ—æ•°æ® æ ¹æ®çº¦æŸçš„ä½œç”¨èŒƒå›´ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š åˆ†ç±» ä½ç½® æ”¯æŒçš„çº¦æŸç±»å‹ æ˜¯å¦å¯ä»¥èµ·çº¦æŸå ä½œç”¨èŒƒå›´ åˆ—çº§çº¦æŸ åˆ—çš„åé¢ è¯­æ³•éƒ½æ”¯æŒï¼Œä½†å¤–é”®æ²¡æœ‰æ•ˆæœ ä¸å¯ä»¥ åªèƒ½ä½œç”¨åœ¨ä¸€ä¸ªåˆ—ä¸Š è¡¨çº§çº¦æŸ æ‰€æœ‰åˆ—çš„ä¸‹é¢ é»˜è®¤å’Œéç©ºä¸æ”¯æŒï¼Œå…¶ä»–æ”¯æŒ å¯ä»¥ï¼ˆä¸»é”®æ²¡æœ‰æ•ˆæœï¼‰ å¯ä»¥ä½œç”¨åœ¨å¤šä¸ªåˆ—ä¸Šï¼Œ ä¸åŒçº¦æŸå±æ€§ï¼š NOT NULL éç©ºçº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µä¸èƒ½ä¸ºç©º UNIQUE å”¯ä¸€çº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µåœ¨æ•´ä¸ªè¡¨ä¸­æ˜¯å”¯ä¸€çš„ PRIMARY KEY ä¸»é”®(éç©ºä¸”å”¯ä¸€)çº¦æŸ* FOREIGN KEY å¤–é”®çº¦æŸ CHECK æ£€æŸ¥çº¦æŸ DEFAULT é»˜è®¤å€¼çº¦æŸ æ³¨æ„ï¼š MySQLä¸æ”¯æŒcheckçº¦æŸï¼Œä½†å¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œè€Œæ²¡æœ‰ä»»ä½•æ•ˆæœã€‚ #information_schemaæ•°æ®åº“åï¼ˆç³»ç»Ÿåº“ï¼‰ #table_constraintsè¡¨åç§°ï¼ˆä¸“é—¨å­˜å‚¨å„ä¸ªè¡¨çš„çº¦æŸï¼‰ SELECT * FROM information_schema.table_constraints WHERE table_name = è¡¨åç§°; ä¸åŒçº¦æŸNOT NULLéç©ºçº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µä¸èƒ½ä¸ºç©º é»˜è®¤æ‰€æœ‰çš„ç±»å‹çš„å€¼éƒ½å¯ä»¥æ˜¯NULLï¼ŒåŒ…æ‹¬INTã€FLOATç­‰æ•°æ®ç±»å‹ éç©ºçº¦æŸåªèƒ½é’ˆå¯¹åˆ—ï¼Œä¸èƒ½ç»„åˆéç©º ç©ºå­—ç¬¦ä¸²â€™â€™ä¸ç­‰äºNULLï¼Œ0ä¹Ÿä¸ç­‰äºNULL æ·»åŠ  CREATE TABLE è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹ NOT NULL, å­—æ®µå æ•°æ®ç±»å‹ NOT NULL ); ä¿®æ”¹ alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ not null; åˆ é™¤ #å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º #1.alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ NULL;#2.alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹; UNIQUEå”¯ä¸€çº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µåœ¨æ•´ä¸ªè¡¨ä¸­æ˜¯å”¯ä¸€çš„ å”¯ä¸€çº¦æŸå¯ä»¥æ˜¯æŸä¸€ä¸ªåˆ—çš„å€¼å”¯ä¸€ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªåˆ—ç»„åˆçš„å€¼å”¯ä¸€ã€‚ å”¯ä¸€æ€§çº¦æŸå…è®¸åˆ—å€¼ä¸ºç©ºã€‚ åœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚ mysql ä¼šç»™å”¯ä¸€çº¦æŸçš„åˆ—ä¸Šé»˜è®¤åˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚** æ·»åŠ  å”¯ä¸€çº¦æŸ create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹ unique, å­—æ®µå æ•°æ®ç±»å‹ unique key, å­—æ®µå æ•°æ®ç±»å‹ ); create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, [constraint çº¦æŸå] unique key(å­—æ®µå) ); ç»„åˆçº¦æŸ create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, unique key(å­—æ®µåˆ—è¡¨) )#å­—æ®µåˆ—è¡¨ä¸­å†™çš„æ˜¯å¤šä¸ªå­—æ®µåï¼Œå¤šä¸ªå­—æ®µåç”¨é€—å·åˆ†éš”ï¼Œè¡¨ç¤ºé‚£ä¹ˆæ˜¯å¤åˆå”¯ä¸€ï¼Œå³å¤š ä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„ ); ä¿®æ”¹ #å­—æ®µåˆ—è¡¨ä¸­å¦‚æœæ˜¯ä¸€ä¸ªå­—æ®µï¼Œè¡¨ç¤ºè¯¥åˆ—çš„å€¼å”¯ä¸€ã€‚å¦‚æœæ˜¯ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå­—æ®µï¼Œé‚£ä¹ˆå¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ ä¸€çš„#æ–¹å¼1ï¼šalter table è¡¨åç§° add unique key(å­—æ®µåˆ—è¡¨);#æ–¹å¼2ï¼š alter table è¡¨åç§° modify å­—æ®µå å­—æ®µç±»å‹ unique; åˆ é™¤ æ·»åŠ å”¯ä¸€æ€§çº¦æŸçš„åˆ—ä¸Šä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚ åˆ é™¤å”¯ä¸€çº¦æŸåªèƒ½é€šè¿‡åˆ é™¤å”¯ä¸€ç´¢å¼•çš„æ–¹å¼åˆ é™¤ã€‚ åˆ é™¤æ—¶éœ€è¦æŒ‡å®šå”¯ä¸€ç´¢å¼•åï¼Œå”¯ä¸€ç´¢å¼•åå°±å’Œå”¯ä¸€çº¦æŸåä¸€æ ·ã€‚ å¦‚æœåˆ›å»ºå”¯ä¸€çº¦æŸæ—¶æœªæŒ‡å®šåç§°ï¼Œå¦‚æœæ˜¯å•åˆ—ï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒï¼›å¦‚æœæ˜¯ç»„åˆåˆ—ï¼Œé‚£ä¹ˆé»˜è®¤å’Œ()ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„åˆ—åç›¸åŒã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å”¯ä¸€æ€§çº¦æŸåã€‚ ALTER TABLE table_name DROP INDEX index_column; æ³¨æ„ï¼šå¯ä»¥é€šè¿‡ show index from è¡¨åç§° æ¥æŸ¥çœ‹è¡¨çš„ç´¢å¼•ã€‚ PRIMARY KEYä¸»é”®(éç©ºä¸”å”¯ä¸€)çº¦æŸ ä¸»é”®çº¦æŸç›¸å½“äºå”¯ä¸€çº¦æŸ+éç©ºçº¦æŸçš„ç»„åˆï¼Œä¸»é”®çº¦æŸåˆ—ä¸å…è®¸é‡å¤ï¼Œä¹Ÿä¸å…è®¸å‡ºç°ç©ºå€¼ã€‚ ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸï¼Œå»ºç«‹ä¸»é”®çº¦æŸå¯ä»¥åœ¨åˆ—çº§åˆ«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åœ¨è¡¨çº§åˆ«ä¸Šåˆ›å»ºã€‚ ä¸»é”®çº¦æŸå¯¹åº”ç€è¡¨ä¸­çš„ä¸€åˆ—æˆ–è€…å¤šåˆ—ï¼ˆå¤åˆä¸»é”®ï¼‰ å¦‚æœæ˜¯å¤šåˆ—ç»„åˆçš„å¤åˆä¸»é”®çº¦æŸï¼Œé‚£ä¹ˆè¿™äº›åˆ—éƒ½ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå¹¶ä¸”ç»„åˆçš„å€¼ä¸å…è®¸é‡å¤ã€‚ MySQLçš„ä¸»é”®åæ€»æ˜¯PRIMARY**ï¼Œå°±ç®—è‡ªå·±å‘½åäº†ä¸»é”®çº¦æŸåä¹Ÿæ²¡ç”¨ã€‚ ** å½“åˆ›å»ºä¸»é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—æˆ–åˆ—ç»„åˆä¸Šå»ºç«‹å¯¹åº”çš„ä¸»é”®ç´¢å¼• èƒ½å¤Ÿæ ¹æ®ä¸»é”®æŸ¥è¯¢çš„ï¼Œå°±æ ¹æ®ä¸»é”®æŸ¥è¯¢ï¼Œæ•ˆç‡æ›´é«˜ã€‚ å¦‚æœåˆ é™¤ä¸»é”®çº¦æŸäº†ï¼Œä¸»é”®çº¦æŸå¯¹åº”çš„ç´¢å¼•å°±è‡ªåŠ¨åˆ é™¤äº†ã€‚ ä¸è¦ä¿®æ”¹ä¸»é”®å­—æ®µçš„å€¼ã€‚å› ä¸ºä¸»é”®æ˜¯æ•°æ®è®°å½•çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœä¿®æ”¹äº†ä¸»é”®çš„å€¼ï¼Œå°±æœ‰å¯èƒ½ä¼šç ´åæ•°æ®çš„å®Œæ•´æ€§ æ·»åŠ  å”¯ä¸€çº¦æŸ #åˆ—çº§æ¨¡å¼ create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹ primary key, #ä¸è¦å¿˜äº†ï¼Œä¸€ä¸ªè¡¨æœ€å¤šä¸€ä¸»é”® å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹ );#è¡¨çº§æ¨¡å¼ create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, [constraint çº¦æŸå] primary key(å­—æ®µå) ); ç»„åˆçº¦æŸ create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, primary key(å­—æ®µå1,å­—æ®µå2) #è¡¨ç¤ºå­—æ®µ1å’Œå­—æ®µ2çš„ç»„åˆæ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤šä¸ªå­—æ®µ); ä¿®æ”¹ ALTER TABLE è¡¨åç§° ADD PRIMARY KEY(å­—æ®µåˆ—è¡¨);#å­—æ®µåˆ—è¡¨å¯ä»¥æ˜¯ä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå¦‚æœæ˜¯å¤š ä¸ªå­—æ®µçš„è¯ï¼Œæ˜¯å¤åˆä¸»é”® create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, å­—æ®µå æ•°æ®ç±»å‹, primary key(å­—æ®µå1,å­—æ®µå2) #è¡¨ç¤ºå­—æ®µ1å’Œå­—æ®µ2çš„ç»„åˆæ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤šä¸ªå­—æ®µ ); åˆ é™¤ ALTER TABLE è¡¨åç§° drop primary key; è¯´æ˜ï¼šåˆ é™¤ä¸»é”®çº¦æŸï¼Œä¸éœ€è¦æŒ‡å®šä¸»é”®åï¼Œå› ä¸ºä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ï¼Œåˆ é™¤ä¸»é”®çº¦æŸåï¼Œéç©ºè¿˜å­˜åœ¨ã€‚ AUTO_INCREMENT è‡ªå¢åˆ— ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ— å½“éœ€è¦äº§ç”Ÿå”¯ä¸€æ ‡è¯†ç¬¦æˆ–é¡ºåºå€¼æ—¶ï¼Œå¯è®¾ç½®è‡ªå¢é•¿ è‡ªå¢é•¿åˆ—çº¦æŸçš„åˆ—å¿…é¡»æ˜¯é”®åˆ—ï¼ˆä¸»é”®åˆ—ï¼Œå”¯ä¸€é”®åˆ—ï¼‰ è‡ªå¢çº¦æŸçš„åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯æ•´æ•°ç±»å‹ å¦‚æœè‡ªå¢åˆ—æŒ‡å®šäº† 0 å’Œ nullï¼Œä¼šåœ¨å½“å‰æœ€å¤§å€¼çš„åŸºç¡€ä¸Šè‡ªå¢ï¼›å¦‚æœè‡ªå¢åˆ—æ‰‹åŠ¨æŒ‡å®šäº†å…·ä½“å€¼ï¼Œç›´æ¥ â€‹ èµ‹å€¼ä¸ºå…·ä½“å€¼ã€‚ æ·»åŠ  create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹ primary key auto_increment, #å¿…é¡»æ˜¯é”®åˆ— å­—æ®µå æ•°æ®ç±»å‹ unique key not null, #ä¸€è¡¨æœ€å¤šä¸€è‡ªå¢åˆ— å­—æ®µå æ•°æ®ç±»å‹ unique key, å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼, );create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ , å­—æ®µå æ•°æ®ç±»å‹ unique key auto_increment, å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼, primary key(å­—æ®µå) ); ä¿®æ”¹ alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment; åˆ é™¤ alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹; #å»æ‰auto_incrementç›¸å½“äºåˆ é™¤ æ‰©å±•ï¼š MySQL 8.0æ–°ç‰¹æ€§ï¼šè‡ªå¢å˜é‡çš„æŒä¹…åŒ– åœ¨MySQL 8.0ä¹‹å‰ï¼Œè‡ªå¢ä¸»é”®AUTO_INCREMENTçš„å€¼å¦‚æœå¤§äºmax(primary key)+1ï¼Œåœ¨MySQLé‡å¯åï¼Œä¼šé‡ç½®AUTO_INCREMENTmax(primary key)+1ï¼Œè¿™ç§ç°è±¡åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸šåŠ¡ä¸»é”®å†²çªæˆ–è€…å…¶ä»–éš¾ä»¥å‘ç°çš„é—®é¢˜ã€‚ test: (åˆ›å»ºçš„æ•°æ®è¡¨ä¸­åŒ…å«è‡ªå¢ä¸»é”®çš„idå­—æ®µ) MySQL 5.7ç‰ˆæœ¬ä¸­ï¼Œ è¯­å¥å¦‚ä¸‹ï¼š INSERT INTO test1 VALUES(0),(0),(0),(0); mysql SELECT * FROM test1;+----+| id |+----+| 1 | | 2 | | 3 | | 4 |+----+4 rows in set (0.00 sec) å†åˆ å†æ’ DELETE FROM test1 WHERE id = 4; INSERT INTO test1 VALUES(0); ç»“æœï¼š mysql SELECT * FROM test1;+----+| id | +----+| 1 | | 2 | | 3 | | 5 | +----+ ä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶åˆ é™¤äº†idä¸º4çš„è®°å½•ï¼Œä½†æ˜¯å†æ¬¡æ’å…¥ç©ºå€¼æ—¶ï¼Œå¹¶æ²¡æœ‰é‡ç”¨è¢«åˆ é™¤çš„4ï¼Œè€Œæ˜¯åˆ†é…äº†5ã€‚ åˆ é™¤idä¸º5çš„è®°å½•ï¼Œç»“æœå¦‚ä¸‹ï¼š DELETE FROM test1 where id=5; é‡å¯æ•°æ®åº“ï¼Œé‡æ–°æ’å…¥ä¸€ä¸ªç©ºå€¼,åœ¨æ’å…¥ï¼Œç»“æœåˆ™ä¼šå˜æˆï¼š | id | +----+| 1 | | 2 | | 3 | | 4 | #åº”è¯¥æ˜¯6ï¼+----+4 rows in set (0.00 sec)#è‡ªå¢ä¸»é”®æ²¡æœ‰æŒä¹…åŒ–ã€‚ åœ¨MySQL 5.7ç³»ç»Ÿä¸­ï¼Œå¯¹äºè‡ªå¢ä¸»é”®çš„åˆ†é…è§„åˆ™ï¼Œæ˜¯ç”±InnoDBæ•°æ®å­—å…¸å†…éƒ¨ä¸€ä¸ª è®¡æ•°å™¨ æ¥å†³å®šçš„ï¼Œè€Œè¯¥è®¡æ•°å™¨åªåœ¨ å†…å­˜ä¸­ç»´æŠ¤ ï¼Œå¹¶ä¸ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚ å½“æ•°æ®åº“é‡å¯æ—¶ï¼Œè¯¥è®¡æ•°å™¨ä¼šè¢«åˆå§‹åŒ– ä½†åœ¨8.0ç‰ˆæœ¬ä¸­çš„ç»“æœï¼š mysql SELECT * FROM test1;+----+| id |+----+| 1 | | 2 | | 3 | | 6 | +----+4 rows in set (0.00 sec) æ­¤ä¹‹è°“â€œè‡ªå¢ä¸»é”®æŒä¹…åŒ–â€ FOREIGN KEY å¤–é”®çº¦æŸé™å®šæŸä¸ªè¡¨çš„æŸä¸ªå­—æ®µçš„å¼•ç”¨å®Œæ•´æ€§ å®šä¹‰ ä¸»è¡¨å’Œä»è¡¨çˆ¶è¡¨å’Œå­è¡¨ ä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ï¼šè¢«å¼•ç”¨çš„è¡¨ï¼Œè¢«å‚è€ƒçš„è¡¨ ä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼šå¼•ç”¨åˆ«äººçš„è¡¨ï¼Œå‚è€ƒåˆ«äººçš„è¡¨ ä¾‹å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨è¿™ä¸ªå­—æ®µçš„å€¼è¦å‚è€ƒéƒ¨é—¨è¡¨ï¼šéƒ¨é—¨è¡¨æ˜¯ä¸»è¡¨ï¼Œå‘˜å·¥è¡¨æ˜¯ä»è¡¨ã€‚ ä¾‹å¦‚ï¼šå­¦ç”Ÿè¡¨ã€è¯¾ç¨‹è¡¨ã€é€‰è¯¾è¡¨ï¼šé€‰è¯¾è¡¨çš„å­¦ç”Ÿå’Œè¯¾ç¨‹è¦åˆ†åˆ«å‚è€ƒå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨æ˜¯ä¸»è¡¨ï¼Œé€‰è¯¾è¡¨æ˜¯ä»è¡¨ã€‚ ç‰¹ç‚¹ ä»è¡¨çš„å¤–é”®åˆ—ï¼Œå¿…é¡»å¼•ç”¨å‚è€ƒä¸»è¡¨çš„ä¸»é”®æˆ–å”¯ä¸€çº¦æŸçš„åˆ— å› ä¸ºè¢«ä¾èµ–è¢«å‚è€ƒçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„ åœ¨åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œå¦‚æœä¸ç»™å¤–é”®çº¦æŸå‘½åï¼Œé»˜è®¤åä¸æ˜¯åˆ—åï¼Œè€Œæ˜¯è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå¤–é”®å ä¾‹å¦‚ student_ibfk_1;ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤–é”®çº¦æŸåã€‚ åˆ›å»º(CREATE)è¡¨æ—¶å°±æŒ‡å®šå¤–é”®çº¦æŸçš„è¯ï¼Œå…ˆåˆ›å»ºä¸»è¡¨ï¼Œå†åˆ›å»ºä»è¡¨ åˆ è¡¨æ—¶ï¼Œå…ˆåˆ ä»è¡¨ï¼ˆæˆ–å…ˆåˆ é™¤å¤–é”®çº¦æŸï¼‰ï¼Œå†åˆ é™¤ä¸»è¡¨ å½“ä¸»è¡¨çš„è®°å½•è¢«ä»è¡¨å‚ç…§æ—¶ï¼Œä¸»è¡¨çš„è®°å½•å°†ä¸å…è®¸åˆ é™¤ å¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œéœ€è¦å…ˆåˆ é™¤ä»è¡¨ä¸­ä¾èµ–è¯¥è®°å½•çš„æ•°æ®ï¼Œç„¶åæ‰å¯ä»¥åˆ é™¤ä¸»è¡¨çš„æ•°æ® åœ¨â€œä»è¡¨â€ä¸­æŒ‡å®šå¤–é”®çº¦æŸï¼Œå¹¶ä¸”ä¸€ä¸ªè¡¨å¯ä»¥å»ºç«‹å¤šä¸ªå¤–é”®çº¦æŸ ä»è¡¨çš„å¤–é”®åˆ—ä¸ä¸»è¡¨è¢«å‚ç…§çš„åˆ—åå­—å¯ä»¥ä¸ç›¸åŒï¼Œä½†æ˜¯æ•°æ®ç±»å‹å¿…é¡»ä¸€æ ·ï¼Œé€»è¾‘æ„ä¹‰ä¸€è‡´ã€‚å¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ›å»ºå­è¡¨æ—¶ï¼Œå°±ä¼šå‡ºç°é”™è¯¯ã€‚ ä¾‹å¦‚ï¼šéƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œéƒ½æ˜¯intç±»å‹ã€‚ å½“åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—ä¸Šå»ºç«‹å¯¹åº”çš„æ™®é€šç´¢å¼•ã€‚ ä½†æ˜¯ç´¢å¼•åæ˜¯å¤–é”®çš„çº¦æŸåã€‚ï¼ˆæ ¹æ®å¤–é”®æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼‰ åˆ é™¤å¤–é”®çº¦æŸåï¼Œå¿…é¡»æ‰‹åŠ¨åˆ é™¤å¯¹åº”çš„ç´¢å¼• æ·»åŠ  create table ä¸»è¡¨åç§°( å­—æ®µ1 æ•°æ®ç±»å‹ primary key, å­—æ®µ2 æ•°æ®ç±»å‹ );create table ä»è¡¨åç§°( å­—æ®µ1 æ•°æ®ç±»å‹ primary key, å­—æ®µ2 æ•°æ®ç±»å‹, [CONSTRAINT å¤–é”®çº¦æŸåç§°] FOREIGN KEYï¼ˆä»è¡¨çš„æŸä¸ªå­—æ®µ) references ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ) ); #(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„æ•°æ®ç±»å‹å¿…é¡»ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œé€»è¾‘æ„ä¹‰ä¹Ÿä¸€æ · #(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„å­—æ®µåå¯ä»¥ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„å­—æ®µåä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä¸ä¸€æ ·-- FOREIGN KEY: åœ¨è¡¨çº§æŒ‡å®šå­è¡¨ä¸­çš„åˆ—-- REFERENCES: æ ‡ç¤ºåœ¨çˆ¶è¡¨ä¸­çš„åˆ— ä¿®æ”¹ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¡¨ä¸è¡¨çš„å…³è”éƒ½æ˜¯æå‰è®¾è®¡å¥½äº†çš„ï¼Œå› æ­¤ä¼šåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å°±æŠŠå¤–é”®çº¦æŸå®šä¹‰å¥½ã€‚ å¦‚æœéœ€è¦ä¿®æ”¹è¡¨çš„è®¾è®¡ï¼ˆæ¯”å¦‚æ·»åŠ æ–°çš„å­—æ®µï¼Œå¢åŠ æ–°çš„å…³è”å…³ç³»ï¼‰ï¼Œä½†æ²¡æœ‰é¢„å…ˆå®šä¹‰å¤–é”®çº¦æŸï¼Œè¿™æ—¶å°±è¦ç”¨ä¿®æ”¹è¡¨çš„æ–¹å¼æ¥è¡¥å……å®šä¹‰ã€‚ ALTER TABLE ä»è¡¨å ADD [CONSTRAINT çº¦æŸå] FOREIGN KEY (ä»è¡¨çš„å­—æ®µ) REFERENCES ä¸»è¡¨å(è¢«å¼•ç”¨ å­—æ®µ) [on update xx][on delete xx]; æ€»ç»“ï¼š çº¦æŸå…³ç³»æ˜¯é’ˆå¯¹åŒæ–¹çš„ æ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä¸»è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ•°æ®å—çº¦æŸ æ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä»è¡¨çš„æ·»åŠ å’Œä¿®æ”¹æ•°æ®å—çº¦æŸ åœ¨ä»è¡¨ä¸Šå»ºç«‹å¤–é”®ï¼Œè¦æ±‚ä¸»è¡¨å¿…é¡»å­˜åœ¨ åˆ é™¤ä¸»è¡¨æ—¶ï¼Œè¦æ±‚ä»è¡¨ä»è¡¨å…ˆåˆ é™¤ï¼Œæˆ–å°†ä»è¡¨ä¸­å¤–é”®å¼•ç”¨è¯¥ä¸»è¡¨çš„å…³ç³»å…ˆåˆ é™¤ çº¦æŸç­‰çº§ Cascadeæ–¹å¼ ï¼šåœ¨çˆ¶è¡¨ä¸Šupdatedeleteè®°å½•æ—¶ï¼ŒåŒæ­¥updatedeleteæ‰å­è¡¨çš„åŒ¹é…è®°å½• Set nullæ–¹å¼ ï¼šåœ¨çˆ¶è¡¨ä¸Šupdatedeleteè®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸ºnull æ³¨æ„å­è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸ºnot null No actionæ–¹å¼ ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œupdatedeleteæ“ä½œ Restrictæ–¹å¼ ï¼šåŒno actionï¼Œ éƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ Set defaultæ–¹å¼ ï¼ˆåœ¨å¯è§†åŒ–å·¥å…·SQLyogä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼š çˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½® æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½†Innodbä¸èƒ½è¯†åˆ«ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šç­‰çº§ï¼Œå°±ç›¸å½“äºRestrictæ–¹å¼ã€‚ å¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨: ON UPDATE CASCADE ON DELETE RESTRICT çš„æ–¹å¼ åˆ é™¤ ç¬¬ä¸€æ­¥å…ˆæŸ¥çœ‹çº¦æŸåå’Œåˆ é™¤å¤–é”®çº¦æŸ SELECT * FROM information_schema.table_constraints WHERE table_name = è¡¨åç§°;#æŸ¥çœ‹æŸä¸ªè¡¨çš„çº¦æŸå ALTER TABLE ä»è¡¨å DROP FOREIGN KEY å¤–é”®çº¦æŸå; ç¬¬äºŒæ­¥æŸ¥çœ‹ç´¢å¼•åå’Œåˆ é™¤ç´¢å¼•ã€‚ï¼ˆæ³¨æ„ï¼Œåªèƒ½æ‰‹åŠ¨åˆ é™¤ï¼‰ SHOW INDEX FROM è¡¨åç§°; #æŸ¥çœ‹æŸä¸ªè¡¨çš„ç´¢å¼•å ALTER TABLE ä»è¡¨å DROP INDEX ç´¢å¼•å; æ‰©å±• å»ºå¤–é”®çº¦æŸï¼Œæ“ä½œä¼šå—åˆ°é™åˆ¶ï¼Œä»è¯­æ³•å±‚é¢å—åˆ°é™åˆ¶ã€‚ ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ä¸å¯èƒ½æ·»åŠ ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨çš„å€¼åœ¨éƒ¨é—¨è¡¨ä¸­æ‰¾ä¸åˆ°ã€‚ ä¸å»ºå¤–é”®çº¦æŸï¼Œæ“ä½œä¸å—é™åˆ¶ï¼Œè¦ä¿è¯æ•°æ®çš„å¼•ç”¨å®Œæ•´æ€§ ï¼Œåªèƒ½ä¾é ç¨‹åºå‘˜çš„è‡ªè§‰ ã€‚ åœ¨ MySQL é‡Œï¼Œå¤–é”®çº¦æŸæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚å¯¹äºå¤§å¹¶å‘çš„ SQL æ“ä½œï¼Œæœ‰å¯èƒ½ä¼šä¸é€‚åˆã€‚æ¯”å¦‚å¤§å‹ç½‘ç«™çš„ä¸­å¤®æ•°æ®åº“ï¼Œå¯èƒ½ä¼š å› ä¸ºå¤–é”®çº¦æŸçš„ç³»ç»Ÿå¼€é”€è€Œå˜å¾—éå¸¸æ…¢ ã€‚ æ‰€ä»¥ï¼Œ MySQL å…è®¸ä½ ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å¤–é”®çº¦æŸï¼Œåœ¨åº”ç”¨å±‚é¢å®Œæˆæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§çš„é€»è¾‘ã€‚ æ‰€ä»¥å³ä½¿ä½ ä¸ç”¨å¤–é”®çº¦æŸï¼Œä¹Ÿè¦æƒ³åŠæ³•é€šè¿‡åº”ç”¨å±‚é¢çš„é™„åŠ é€»è¾‘ï¼Œæ¥å®ç°å¤–é”®çº¦æŸçš„åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚ 6.10 é˜¿é‡Œå¼€å‘è§„èŒƒ [ å¼ºåˆ¶ ]ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚ è¯´æ˜ï¼šï¼ˆæ¦‚å¿µè§£é‡Šï¼‰å­¦ç”Ÿè¡¨ä¸­çš„ student_id æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„ student_id åˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ ç”Ÿè¡¨ä¸­çš„ student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„ student_id æ›´æ–°ï¼Œå³ä¸ºçº§è”æ›´æ–°ã€‚ å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äº å•æœºä½å¹¶å‘ ï¼Œä¸é€‚åˆåˆ†å¸ƒå¼ ã€ é«˜å¹¶å‘é›†ç¾¤ ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»å¡ï¼Œå­˜åœ¨æ•°æ®åº“ æ›´æ–°é£æš´ çš„é£é™©ï¼›å¤–é”®å½±å“æ•°æ®åº“çš„ æ’å…¥é€Ÿåº¦ ã€‚ CHECK æ£€æŸ¥çº¦æŸä½œç”¨ æ£€æŸ¥æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦å·xxè¦æ±‚ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å€¼çš„èŒƒå›´ æ³¨æ„ï¼šmysql5.7ä¸æ”¯æŒ MySQL5.7 å¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œä½†checkçº¦æŸå¯¹æ•°æ®éªŒè¯æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚æ·»åŠ æ•°æ®æ—¶ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯æˆ–è­¦ å‘Š ä½†æ˜¯MySQL 8.0ä¸­å¯ä»¥ä½¿ç”¨checkçº¦æŸäº†ã€‚ ä¸¾ä¾‹è¯´æ˜ï¼š create table employee( eid int primary key, ename varchar(5), gender char check (ç”· or å¥³) ); insert into employee values(1,å¼ ä¸‰,å¦–);mysql select * from employee; +-----+-------+--------+| eid | ename | gender | +-----+-------+--------+| 1 | å¼ ä¸‰ | å¦– | +-----+-------+--------+1 row in set (0.00 sec) CREATE TABLE temp( id INT AUTO_INCREMENT, NAME VARCHAR(20), age INT CHECK(age 20), #å“‡å•Šå“¦ PRIMARY KEY(id) ); age tinyint check(age 20) sex char(2) check(sex in(â€˜ç”·â€™,â€™å¥³â€™)) DEFAULT é»˜è®¤å€¼çº¦æŸæ·»åŠ  create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹ primary key, å­—æ®µå æ•°æ®ç±»å‹ unique key not null, å­—æ®µå æ•°æ®ç±»å‹ unique key, å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼, # Ohhhhhhhh);create table è¡¨åç§°( å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ , å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,#1 å­—æ®µå æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,#2 primary key(å­—æ®µå), unique key(å­—æ®µå) ); ä¿®æ”¹ alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼;#å¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰éç©ºçº¦æŸï¼Œä½ è¿˜ä¿ç•™éç©ºçº¦æŸï¼Œé‚£ä¹ˆåœ¨åŠ é»˜è®¤å€¼çº¦æŸæ—¶ï¼Œè¿˜å¾—ä¿ç•™éç©ºçº¦æŸï¼Œå¦åˆ™éç©ºçº¦æŸå°±è¢« åˆ é™¤äº† #åŒç†ï¼Œåœ¨ç»™æŸä¸ªå­—æ®µåŠ éç©ºçº¦æŸä¹Ÿä¸€æ ·ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰é»˜è®¤å€¼çº¦æŸï¼Œä½ æƒ³ä¿ç•™ï¼Œä¹Ÿè¦åœ¨modifyè¯­å¥ä¸­ä¿ç•™é»˜ è®¤å€¼çº¦æŸï¼Œå¦åˆ™å°±åˆ é™¤äº† alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ not null; åˆ é™¤ alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ ;#åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¹Ÿä¸ä¿ç•™éç©ºçº¦æŸ alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ not null; #åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ å‡ ä¸ªé¢è¯•é—®é¢˜ é¢è¯•1ã€ä¸ºä»€ä¹ˆå»ºè¡¨æ—¶ï¼ŒåŠ ** not null default â€˜â€™ æˆ– default 0 â€‹ ç­”ï¼šä¸æƒ³è®©è¡¨ä¸­å‡ºç°nullå€¼ã€‚ é¢è¯•2ã€ä¸ºä»€ä¹ˆä¸æƒ³è¦** null çš„å€¼ ç­”: ä¸å¥½æ¯”è¾ƒã€‚nullæ˜¯ä¸€ç§ç‰¹æ®Šå€¼ï¼Œæ¯”è¾ƒæ—¶åªèƒ½ç”¨ä¸“é—¨çš„is null å’Œ is not nullæ¥æ¯”è¾ƒã€‚ç¢°åˆ°è¿ç®—ç¬¦ï¼Œé€š å¸¸è¿”å›nullã€‚ æ•ˆç‡ä¸é«˜ã€‚å½±å“æé«˜ç´¢å¼•æ•ˆæœã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨å»ºè¡¨æ—¶ not null default â€˜â€™ æˆ– default 0 é¢è¯•3ã€å¸¦AUTO_INCREMENTçº¦æŸçš„å­—æ®µå€¼æ˜¯ä»1å¼€å§‹çš„å—ï¼Ÿ ç­”ï¼šåœ¨MySQLä¸­ï¼Œé»˜è®¤AUTO_INCREMENTçš„åˆå§‹å€¼æ˜¯1ï¼Œæ¯æ–°å¢ä¸€æ¡è®°å½•ï¼Œå­—æ®µå€¼è‡ªåŠ¨åŠ 1ã€‚è®¾ç½®è‡ªå¢å±æ€§ï¼ˆAUTO_INCREMENTï¼‰çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥æŒ‡å®šç¬¬ä¸€æ¡æ’å…¥è®°å½•çš„è‡ªå¢å­—æ®µçš„å€¼ï¼Œè¿™æ ·æ–°æ’å…¥çš„è®°å½•çš„è‡ªå¢å­—æ®µå€¼ä»åˆå§‹å€¼å¼€å§‹é€’å¢ï¼Œå¦‚åœ¨è¡¨ä¸­æ’å…¥ç¬¬ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æŒ‡å®šidå€¼ä¸º5ï¼Œåˆ™ä»¥åæ’å…¥çš„è®°å½•çš„idå€¼å°±ä¼šä»6å¼€å§‹å¾€ä¸Šå¢åŠ ã€‚æ·»åŠ ä¸»é”®çº¦æŸæ—¶ï¼Œå¾€å¾€éœ€è¦è®¾ç½®å­—æ®µè‡ªåŠ¨å¢åŠ å±æ€§ã€‚ é¢è¯•4ã€å¹¶ä¸æ˜¯æ¯ä¸ªè¡¨éƒ½å¯ä»¥ä»»æ„é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿ å¤–é”®çº¦æŸï¼ˆFOREIGN KEYï¼‰ä¸èƒ½è·¨å¼•æ“ä½¿ç”¨ã€‚ MySQLæ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤–é”®çº¦æŸæ˜¯ç”¨æ¥ ä¿è¯æ•°æ®çš„å‚ç…§å®Œæ•´æ€§çš„ï¼Œå¦‚æœè¡¨ä¹‹é—´éœ€è¦å…³è”å¤–é”®ï¼Œå´æŒ‡å®šäº†ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œé‚£ä¹ˆè¿™äº›è¡¨ä¹‹é—´æ˜¯ä¸ èƒ½åˆ›å»ºå¤–é”®çº¦æŸçš„ã€‚æ‰€ä»¥è¯´ï¼Œå­˜å‚¨å¼•æ“çš„é€‰æ‹©ä¹Ÿä¸å®Œå…¨æ˜¯éšæ„çš„ã€‚"},{"title":"è§†å›¾","path":"/wiki/mysql/è§†å›¾.html","content":"å¯¹è±¡ æè¿° è¡¨(TABLE) è¡¨æ˜¯å­˜å‚¨æ•°æ®çš„é€»è¾‘å•å…ƒï¼Œä»¥è¡Œå’Œåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œåˆ—å°±æ˜¯å­—æ®µï¼Œè¡Œå°±æ˜¯è®°å½• æ•°æ®å­—å…¸ å°±æ˜¯ç³»ç»Ÿè¡¨ï¼Œå­˜æ”¾æ•°æ®åº“ç›¸å…³ä¿¡æ¯çš„è¡¨ ç³»ç»Ÿè¡¨çš„æ•°æ®é€šå¸¸ç”±æ•°æ®åº“ç³»ç»Ÿç»´æŠ¤ï¼Œ ç¨‹åºå‘˜é€šå¸¸ä¸åº”è¯¥ä¿®æ”¹ï¼Œåªå¯æŸ¥çœ‹ çº¦æŸ (CONSTRAINT) æ‰§è¡Œæ•°æ®æ ¡éªŒçš„è§„åˆ™ï¼Œç”¨äºä¿è¯æ•°æ®å®Œæ•´æ€§çš„è§„åˆ™ è§†å›¾(VIEW) ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®è¡¨é‡Œçš„æ•°æ®çš„é€»è¾‘æ˜¾ç¤ºï¼Œè§†å›¾å¹¶ä¸å­˜å‚¨æ•°æ® ç´¢å¼•(INDEXï¼‰ ç”¨äºæé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œç›¸å½“äºä¹¦çš„ç›®å½• å­˜å‚¨è¿‡ç¨‹ (PROCEDURE) ç”¨äºå®Œæˆä¸€æ¬¡å®Œæ•´çš„ä¸šåŠ¡å¤„ç†ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä½†å¯é€šè¿‡ä¼ å‡ºå‚æ•°å°†å¤šä¸ªå€¼ä¼ ç»™è°ƒ å­˜å‚¨å‡½æ•° (FUNCTION) ç”¨äºå®Œæˆä¸€æ¬¡ç‰¹å®šçš„è®¡ç®—ï¼Œå…·æœ‰ä¸€ä¸ªè¿”å›å€¼ è§¦å‘å™¨ (TRIGGER) ç›¸å½“äºä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå½“æ•°æ®åº“å‘ç”Ÿç‰¹å®šäº‹ä»¶åï¼Œè§¦å‘å™¨è¢«è§¦å‘ï¼Œå®Œæˆç›¸åº”çš„ è§†å›¾æ˜¯ä¸€ç§ è™šæ‹Ÿè¡¨ ï¼Œæœ¬èº«æ˜¯ä¸å…·æœ‰æ•°æ®çš„ï¼Œå ç”¨å¾ˆå°‘çš„å†…å­˜ç©ºé—´ï¼Œå®ƒæ˜¯ SQL ä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ è§†å›¾å»ºç«‹åœ¨å·²æœ‰è¡¨çš„åŸºç¡€ä¸Š, è§†å›¾èµ–ä»¥å»ºç«‹çš„è¿™äº›è¡¨ç§°ä¸ºåŸºè¡¨ã€‚ å‘è§†å›¾æä¾›æ•°æ®å†…å®¹çš„è¯­å¥ä¸º SELECT è¯­å¥, å¯ä»¥å°†è§†å›¾ç†è§£ä¸ºå­˜å‚¨èµ·æ¥çš„ SELECT è¯­å¥ åœ¨æ•°æ®åº“ä¸­ï¼Œè§†å›¾ä¸ä¼šä¿å­˜æ•°æ®ï¼Œæ•°æ®çœŸæ­£ä¿å­˜åœ¨æ•°æ®è¡¨ä¸­ã€‚å½“å¯¹è§†å›¾ä¸­çš„æ•°æ®è¿›è¡Œå¢åŠ ã€åˆ  é™¤å’Œä¿®æ”¹æ“ä½œæ—¶ï¼Œæ•°æ®è¡¨ä¸­çš„æ•°æ®ä¼šç›¸åº”åœ°å‘ç”Ÿå˜åŒ–ï¼›åä¹‹äº¦ç„¶ã€‚ è§†å›¾ï¼Œæ˜¯å‘ç”¨æˆ·æä¾›åŸºè¡¨æ•°æ®çš„å¦ä¸€ç§è¡¨ç°å½¢å¼ã€‚å°å‹é¡¹ç›®çš„æ•°æ®åº“å¯ä»¥ä¸ä½¿ç”¨è§†å›¾ï¼Œä½†æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè§†å›¾çš„ä»·å€¼å°±å‡¸æ˜¾å‡ºæ¥äº†ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠç»å¸¸æŸ¥è¯¢çš„ç»“æœé›†æ”¾åˆ°è™šæ‹Ÿè¡¨ä¸­ï¼Œæå‡ä½¿ç”¨æ•ˆç‡ã€‚ å½“æˆ‘ä»¬åˆ›å»ºå¥½ä¸€å¼ è§†å›¾ä¹‹åï¼Œè¿˜å¯ä»¥åœ¨å®ƒçš„åŸºç¡€ä¸Šç»§ç»­åˆ›å»ºè§†å›¾ã€‚ åˆ›å»ºè§†å›¾CREATE [OR REPLACE] [ALGORITHM = UNDEFINED | MERGE | TEMPTABLE] VIEW è§†å›¾åç§° [(å­—æ®µåˆ—è¡¨)] AS æŸ¥è¯¢è¯­å¥[WITH [CASCADED|LOCAL] CHECK OPTION] CREATE VIEW è§†å›¾åç§° AS æŸ¥è¯¢è¯­å¥ æŸ¥çœ‹è§†å›¾#è¯­æ³•1ï¼šæŸ¥çœ‹æ•°æ®åº“çš„è¡¨å¯¹è±¡ã€è§†å›¾å¯¹è±¡SHOW TABLES;#è¯­æ³•2ï¼šæŸ¥çœ‹è§†å›¾çš„ç»“æ„DESC / DESCRIBE è§†å›¾åç§°;#è¯­æ³•3ï¼šæŸ¥çœ‹è§†å›¾çš„å±æ€§ä¿¡æ¯SHOW TABLE STATUS LIKE è§†å›¾åç§°\\G#æ‰§è¡Œç»“æœæ˜¾ç¤ºï¼Œæ³¨é‡ŠCommentä¸ºVIEWï¼Œè¯´æ˜è¯¥è¡¨ä¸ºè§†å›¾ï¼Œå…¶ä»–çš„ä¿¡æ¯ä¸ºNULLï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªè™šè¡¨ã€‚#è¯­æ³•4ï¼šæŸ¥çœ‹è§†å›¾çš„è¯¦ç»†å®šä¹‰ä¿¡æ¯SHOW CREATE VIEW è§†å›¾åç§°; æ›´æ–°è§†å›¾MySQLæ”¯æŒä½¿ç”¨INSERTã€UPDATEå’ŒDELETEè¯­å¥å¯¹è§†å›¾ä¸­çš„æ•°æ®è¿›è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚ SELECT ename,tel FROM emp_tel WHERE ename = å­™æ´ªäº®; UPDATE emp_tel SET tel = 13789091234 WHERE ename = å­™æ´ªäº®;DELETE FROM emp_tel WHERE ename = å­™æ´ªäº® ä¿®æ”¹æ–¹å¼1ï¼šä½¿ç”¨CREATE OR REPLACE VIEW å­å¥ä¿®æ”¹è§†å›¾ CREATE OR REPLACE VIEW empvu80 (id_number, name, sal, department_id) ASSELECT employee_id, first_name || || last_name, salary,department_id FROM employees WHERE department_id = 80; è¯´æ˜ï¼šCREATE VIEW å­å¥ä¸­å„åˆ—çš„åˆ«ååº”å’Œå­æŸ¥è¯¢ä¸­å„åˆ—ç›¸å¯¹åº”ã€‚æ–¹å¼2ï¼šALTER VIEW ALTER VIEW è§†å›¾åç§° AS æŸ¥è¯¢è¯­å¥ åˆ é™¤DROP VIEW IF EXISTS è§†å›¾åç§°; åˆ é™¤è§†å›¾åªæ˜¯åˆ é™¤è§†å›¾çš„å®šä¹‰ï¼Œå¹¶ä¸ä¼šåˆ é™¤åŸºè¡¨çš„æ•°æ®ã€‚ åŸºäºè§†å›¾aã€båˆ›å»ºäº†æ–°çš„è§†å›¾cï¼Œå¦‚æœå°†è§†å›¾aæˆ–è€…è§†å›¾båˆ é™¤ï¼Œä¼šå¯¼è‡´è§†å›¾cçš„æŸ¥è¯¢å¤±è´¥ã€‚è¿™æ ·çš„è§†å›¾céœ€è¦æ‰‹åŠ¨åˆ é™¤æˆ–ä¿®æ”¹ï¼Œå¦åˆ™å½±å“ä½¿ç”¨ã€‚ ä¸å¯æ›´æ–°çš„è§†å›¾è¦ä½¿è§†å›¾å¯æ›´æ–°ï¼Œè§†å›¾ä¸­çš„è¡Œå’Œåº•å±‚åŸºæœ¬è¡¨ä¸­çš„è¡Œä¹‹é—´å¿…é¡»å­˜åœ¨ ä¸€å¯¹ä¸€ çš„å…³ç³»ã€‚å¦å¤–å½“è§†å›¾å®šä¹‰å‡ºç°å¦‚ ä¸‹æƒ…å†µæ—¶ï¼Œè§†å›¾ä¸æ”¯æŒæ›´æ–°æ“ä½œï¼š åœ¨å®šä¹‰è§†å›¾çš„æ—¶å€™æŒ‡å®šäº†â€œALGORITHM TEMPTABLEâ€ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTå’ŒDELETEæ“ä½œï¼› è§†å›¾ä¸­ä¸åŒ…å«åŸºè¡¨ä¸­æ‰€æœ‰è¢«å®šä¹‰ä¸ºéç©ºåˆæœªæŒ‡å®šé»˜è®¤å€¼çš„åˆ—ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTæ“ä½œï¼› åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥ä¸­ä½¿ç”¨äº† JOINè”åˆæŸ¥è¯¢ ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTå’ŒDELETEæ“ä½œï¼› åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥åçš„å­—æ®µåˆ—è¡¨ä¸­ä½¿ç”¨äº† æ•°å­¦è¡¨è¾¾å¼ æˆ– å­æŸ¥è¯¢ ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTï¼Œä¹Ÿ ä¸æ”¯æŒUPDATEä½¿ç”¨äº†æ•°å­¦è¡¨è¾¾å¼ã€å­æŸ¥è¯¢çš„å­—æ®µå€¼ï¼› åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥åçš„å­—æ®µåˆ—è¡¨ä¸­ä½¿ç”¨ DISTINCT ã€ èšåˆå‡½æ•° ã€ GROUP BY ã€ HAVING ã€ â€‹ UNION ç­‰ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTã€UPDATEã€DELETEï¼› åœ¨å®šä¹‰è§†å›¾çš„SELECTè¯­å¥ä¸­åŒ…å«äº†å­æŸ¥è¯¢ï¼Œè€Œå­æŸ¥è¯¢ä¸­å¼•ç”¨äº†FROMåé¢çš„è¡¨ï¼Œè§†å›¾å°†ä¸æ”¯æŒINSERTã€UPDATEã€DELETEï¼› è§†å›¾å®šä¹‰åŸºäºä¸€ä¸ª ä¸å¯æ›´æ–°è§†å›¾ æˆ– å¸¸é‡è§†å›¾ã€‚ è™½ç„¶å¯ä»¥æ›´æ–°è§†å›¾æ•°æ®ï¼Œä½†æ€»çš„æ¥è¯´ï¼Œè§†å›¾ä½œä¸º è™šæ‹Ÿè¡¨ ï¼Œä¸»è¦ç”¨äº æ–¹ä¾¿æŸ¥è¯¢ ï¼Œä¸å»ºè®®æ›´æ–°è§†å›¾çš„ æ•°æ®ã€‚å¯¹è§†å›¾æ•°æ®çš„æ›´æ”¹ï¼Œéƒ½æ˜¯é€šè¿‡å¯¹å®é™…æ•°æ®è¡¨é‡Œæ•°æ®çš„æ“ä½œæ¥å®Œæˆçš„ã€‚ ä¼˜ç¼ºç‚¹ï¼š ä¼˜ç‚¹ï¼š æ“ä½œç®€å• å‡å°‘æ•°æ®å†—ä½™ æ•°æ®å®‰å…¨ é€‚åº”çµæ´»å¤šå˜çš„éœ€æ±‚ èƒ½å¤Ÿåˆ†è§£å¤æ‚çš„æŸ¥è¯¢é€»è¾‘ ç¼ºç‚¹ï¼š å¦‚æœå®é™…æ•°æ®è¡¨çš„ç»“æ„å˜æ›´äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦åŠæ—¶å¯¹ ç›¸å…³çš„è§†å›¾è¿›è¡Œç›¸åº”çš„ç»´æŠ¤ã€‚ å¯¹äºåµŒå¥—çš„è§†å›¾ï¼Œç»´æŠ¤ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚ï¼Œå¯è¯»æ€§ä¸å¥½ ï¼Œå®¹æ˜“å˜æˆç³»ç»Ÿçš„æ½œåœ¨éšæ‚£ã€‚ å› ä¸ºåˆ›å»ºè§†å›¾çš„ SQL æŸ¥è¯¢å¯èƒ½ä¼šå¯¹å­—æ®µé‡å‘½åï¼Œä¹Ÿå¯èƒ½åŒ…å«å¤æ‚çš„é€»è¾‘ï¼Œè¿™äº›éƒ½ä¼šå¢åŠ ç»´æŠ¤çš„æˆæœ¬ã€‚ å®é™…é¡¹ç›®ä¸­ï¼Œå¦‚æœè§†å›¾è¿‡å¤šï¼Œä¼šå¯¼è‡´æ•°æ®åº“ç»´æŠ¤æˆæœ¬çš„é—®é¢˜ã€‚"},{"title":"Vimæ’ä»¶","path":"/wiki/linux/Vimæ’ä»¶.html","content":"NERDTreeæˆ‘è¯´å‡ ä¸ªçœŸç”¨è¿‡çš„ï¼š , + n :æ‰“å¼€ NertTree u ï¼šè¿”å›åˆ°çˆ¶ç›®å½• Uï¼šè¿”å›åˆ°çˆ¶ç›®å½•ï¼Œä½†å­ç›®å½•ä¿æŒå±•å¼€ shift + i :æ˜¾ç¤ºéšè—æ–‡ä»¶ let NERDTreeShowHidden1 â€œé»˜è®¤æ˜¾ç¤ºéšè—æ–‡ä»¶ ç›®å½•æ ‘çš„ä½¿ç”¨ä¸»è¦é€šè¿‡åœ¨vimçš„commandæ¨¡å¼ä¸‹é”®å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå³å¯è¾¾åˆ°ç›¸åº”çš„æ•ˆæœã€‚ å¿«æ·é”®\tæè¿°,+n\tæ‰“å¼€å½“å‰æ–‡ä»¶NERDTreeç›®å½•æ ‘ï¼Œå…‰æ ‡åœç•™åœ¨ä¸Šæ¬¡å…‰æ ‡åœç•™çš„ä½ç½®,+m\tæ‰“å¼€å½“å‰æ–‡ä»¶NERDTreeç›®å½•æ ‘ï¼Œå…‰æ ‡åœç•™åœ¨å½“å‰æ–‡ä»¶è·¯å¾„çš„æ ¹ç›®å½•ä¸Šï¼Œå¹¶å°†æ–‡ä»¶å¤¹æŠ˜å èµ·æ¥,+t\tæ‰“å¼€å…³é—­NERDTreeç›®å½•æ ‘,+f\tæŸ¥æ‰¾å½“å‰æ–‡ä»¶åœ¨NERDTreeä¸­çš„ä½ç½®ï¼Œå¹¶å°†å…‰æ ‡åœç•™åœ¨NERDTreeä¸­è¯¥æ–‡ä»¶ä¸Š https://blog.csdn.net/weixin_37926734/article/details/124919260 ?: å¿«é€Ÿå¸®åŠ©æ–‡æ¡£ o: æ‰“å¼€ä¸€ä¸ªç›®å½•æˆ–è€…æ‰“å¼€æ–‡ä»¶ï¼Œåˆ›å»ºçš„æ˜¯ bufferï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æ‰“å¼€ä¹¦ç­¾ go: æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å…‰æ ‡ä»ç„¶ç•™åœ¨ NERDTreeï¼Œåˆ›å»ºçš„æ˜¯ buffer t: æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåˆ›å»ºçš„æ˜¯Tabï¼Œå¯¹ä¹¦ç­¾åŒæ ·ç”Ÿæ•ˆ T: æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯å…‰æ ‡ä»ç„¶ç•™åœ¨ NERDTreeï¼Œåˆ›å»ºçš„æ˜¯ Tabï¼Œå¯¹ä¹¦ç­¾åŒæ ·ç”Ÿæ•ˆ i: æ°´å¹³åˆ†å‰²åˆ›å»ºæ–‡ä»¶çš„çª—å£ï¼Œåˆ›å»ºçš„æ˜¯ buffer gi: æ°´å¹³åˆ†å‰²åˆ›å»ºæ–‡ä»¶çš„çª—å£ï¼Œä½†æ˜¯å…‰æ ‡ä»ç„¶ç•™åœ¨ NERDTree s: å‚ç›´åˆ†å‰²åˆ›å»ºæ–‡ä»¶çš„çª—å£ï¼Œåˆ›å»ºçš„æ˜¯ buffer gs: å’Œ giï¼Œgo ç±»ä¼¼ x: æ”¶èµ·å½“å‰æ‰“å¼€çš„ç›®å½• X: æ”¶èµ·æ‰€æœ‰æ‰“å¼€çš„ç›®å½• e: ä»¥æ–‡ä»¶ç®¡ç†çš„æ–¹å¼æ‰“å¼€é€‰ä¸­çš„ç›®å½• D: åˆ é™¤ä¹¦ç­¾ NerdCommenterå†™æ³¨é‡Šçš„ã€‚ \\cc æ³¨é‡Šå½“å‰è¡Œå’Œé€‰ä¸­è¡Œ\\cn æ²¡æœ‰å‘ç°å’Œ\\ccæœ‰åŒºåˆ«\\cç©ºæ ¼ å¦‚æœè¢«é€‰åŒºåŸŸæœ‰éƒ¨åˆ†è¢«æ³¨é‡Šï¼Œåˆ™å¯¹è¢«é€‰åŒºåŸŸæ‰§è¡Œå–æ¶ˆæ³¨é‡Šæ“ä½œï¼Œå…¶å®ƒæƒ…å†µæ‰§è¡Œåè½¬æ³¨é‡Šæ“ä½œ\\cm å¯¹è¢«é€‰åŒºåŸŸç”¨ä¸€å¯¹æ³¨é‡Šç¬¦è¿›è¡Œæ³¨é‡Šï¼Œå‰é¢çš„æ³¨é‡Šå¯¹æ¯ä¸€è¡Œéƒ½ä¼šæ·»åŠ æ³¨é‡Š\\ci æ‰§è¡Œåè½¬æ³¨é‡Šæ“ä½œï¼Œé€‰ä¸­åŒºåŸŸæ³¨é‡Šéƒ¨åˆ†å–æ¶ˆæ³¨é‡Šï¼Œéæ³¨é‡Šéƒ¨åˆ†æ·»åŠ æ³¨é‡Š\\cs æ·»åŠ æ€§æ„Ÿçš„æ³¨é‡Šï¼Œä»£ç å¼€å¤´ä»‹ç»éƒ¨åˆ†é€šå¸¸ä½¿ç”¨è¯¥æ³¨é‡Š\\cy æ·»åŠ æ³¨é‡Šï¼Œå¹¶å¤åˆ¶è¢«æ·»åŠ æ³¨é‡Šçš„éƒ¨åˆ†\\c$ æ³¨é‡Šå½“å‰å…‰æ ‡åˆ°æ”¹è¡Œç»“å°¾çš„å†…å®¹\\cA è·³è½¬åˆ°è¯¥è¡Œç»“å°¾æ·»åŠ æ³¨é‡Šï¼Œå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼\\ca è½¬æ¢æ³¨é‡Šçš„æ–¹å¼ï¼Œæ¯”å¦‚ï¼šå’Œ\\cl \\cb å·¦å¯¹é½å’Œå·¦å³å¯¹å…¶ï¼Œå·¦å³å¯¹å…¶ä¸»è¦é’ˆå¯¹ \\cu å–æ¶ˆæ³¨é‡Š vim-airlineçŠ¶æ€æ é«˜äº® YouCompleteMeä»£ç è¡¥å…¨"},{"title":"çº¿æ€§ä»£æ•°3b1b","path":"/wiki/NOTE/çº¿æ€§ä»£æ•°3b1b.html","content":"åšå®¢çš„è¿™ä¸ªæ•°å­¦è¯­è¨€å¤ªéš¾ç”¨äº†ï¼Œæ”¹åŠå¤©æ˜¾ç¤ºä¸å¥½ã€‚ å¯å‚è€ƒï¼šhttps://blog.csdn.net/m0_59298585/article/details/142888232 å‰è¨€ï¼š ä¸€ä¸ªå¾ˆä¹…ä¹‹å‰æˆªçš„Bç«™è¯„è®º: @ï¼Ÿ å¾ˆå¤šäººå­¦ä¸æ‡‚çº¿ä»£(é«˜ä»£)çš„åŸå› æ˜¯ï¼Œçº¿æ€§ä»£æ•°è¿™é—¨è¯¾æœ¬è´¨ä¸Šæ¥è¯´æ˜¯ å…·ä½“-æŠ½è±¡-å†å…·ä½“ çš„å›æ—‹è¿‡ç¨‹é¦–å…ˆä»çº¿æ€§æ–¹ç¨‹ç»„å¼€å§‹è®²èµ·ï¼Œè®¨è®ºçŸ©é˜µï¼Œæ–¹é˜µçš„æ€§è´¨ç„¶åå†ç”±çŸ©é˜µä¸Šå‡åˆ°çº¿æ€§ç©ºé—´ä¸Šçš„çº¿æ€§æ˜ å°„çº¿æ€§å˜æ¢ï¼Œåœ¨ç ”ç©¶çº¿æ€§æ˜ å°„å’Œçº¿æ€§å˜æ¢æ—¶åˆä¼šé€šè¿‡å’Œæ•°åŸŸKçš„è”ç³»å†å…·ä½“åŒ–åˆ°çŸ©é˜µæ‰€ä»¥å…¥é—¨å­¦ä¹ çŸ©é˜µçš„æ—¶å€™ï¼Œå¾ˆå®¹æ˜“è¿·å¤±åœ¨å¤„å¤„ä¸¥è°¨çš„è¯æ˜ç»†ææœªèŠ‚é‡Œï¼Œä»è€Œæ²¡æ³•æŠŠæ¡æ ¸å¿ƒçš„æ€è·¯ä¸ç ”ç©¶ç›®çš„; è€ŒçŸ©é˜µæ²¡å­¦å¥½ï¼Œåé¢çš„çº¿æ€§ç©ºé—´æ›´éš¾ç†è§£ï¼Œå› ä¸ºçº¿æ€§ç©ºé—´ç ”ç©¶å¾€å¾€æ˜¯å†å…·ä½“åŒ–åˆ°çŸ©é˜µä¸Šæ¥è¿›è¡Œçš„ æ‰€ä»¥æˆ‘å»ºè®®æœ‹å‹ä»¬å­¦ä¹ é«˜ä»£(çº¿ä»£)çš„æ—¶å€™ï¼Œåœ¨åˆæœŸå°±æŠŠè¿™é—¨è¯¾å½“ä½œä¸€é—¨å¤–è¯­æ¥å­¦åœ¨çŸ©é˜µéƒ¨åˆ†å¯¹æ¯ä¸€æ¡å®šç†æ¯ä¸€ä¸ªå‘½é¢˜éƒ½æŠŠä»–å½“ä½œå•è¯åƒé€å½“ä½ å¸¦ç€æ‰å®çš„çŸ©é˜µåŠŸåº•å»æ¥è§¦çº¿æ€§ç©ºé—´çš„æ—¶å€™ï¼Œé©¬ä¸Šå¦‚æ‹¨äº‘è§æ—¥èˆ¬ã€‚ä½ ä¹Ÿä¼šå¾ˆå¿«æ„Ÿå—åˆ°ä»£æ•°å­¦å…·ä½“æŠ½è±¡å†å…·ä½“çš„é­…åŠ›ã€‚ @å¸çŒ«ç¾¤ä¼—QAQ: æ•°æ— å½¢æ—¶å°‘ç›´è§‰ï¼Œå½¢å°‘æ•°æ—¶éš¾å…¥å¾®ï¼Œæ•°å½¢ç»“åˆç™¾èˆ¬å¥½ã€‚è¶Šå­¦ä¹ è¶ŠæƒŠå¹äºå¤äººçš„æ™ºæ…§ï¼Œä¸‰ç™¾å¤šå¹´çš„ç§‘å­¦å²ï¼Œå­•è‚²å‡ºäº†å¤šå°‘ç»å¦™çš„æ€æƒ³ã€‚æƒ³åˆ°äº†å¹´çºªè½»è½»å´åœ¨æ•°å­¦ä½“ç³»ä¸å®Œå–„çš„å¹´ä»£åˆ›é€ å‡ºå¾®ç§¯åˆ†ï¼Œç”¨å¤è€çš„å‡ ä½•è¯æ˜æ³•å¾—å‡ºè‹¥å¹²ç°åœ¨ä»è¢«å¥‰ä¸ºçœŸç†çš„å‡ å¤§å®šå¾‹ï¼Œå´åœ¨æ™šå¹´å›°æƒ‘äºç¥ä¸ä¸–ç•Œæœ¬è´¨çš„æ€è¾¨ä¸­çš„ç‰›é¡¿;è¿˜æœ‰é ç°æœ‰çš„æ•°å­¦å·¥å…·ä»¥åŠå…¶ç»å¦™çš„æ€ç»´åˆ›é€ å‡ºå¹¿ä¹‰ç›¸å¯¹è®ºï¼Œä»¥ä¸€äººä¹‹åŠ›é¢ è¦†äº†äººç±»å¯¹ç©ºé—´å’Œæ—¶é—´è¿™ä¸¤ä¸ªç„å¦™æ¦‚å¿µçš„ç†è§£ï¼Œåœ¨æ™šå¹´è¯•å›¾åˆ›é€ å‡ºå¯ä»¥è§£é‡Šä¸–ç•Œçš„ç»ˆæå®šç†å´ç»ˆç©¶æ•Œä¸è¿‡æ—¶é—´çš„çˆ±å› æ–¯å¦;è¿˜æœ‰é‚£äº›å‡ºäºå¯¹ä¸€ä¸ªå¥‡æ€ªçš„ç‰©ç†ç°è±¡çš„æ¢ç©¶ï¼Œå´æ­ç¤ºå‡ºä¸€ä¸ªå…‰æ€ªé™†ç¦»ï¼Œæåº¦è¿èƒŒå¸¸è¯†ï¼Œè¿åˆ›å§‹äººéƒ½æ— æ³•ç†è§£ï¼Œå´åˆæ— æ•°æ¬¡è¢«è¯å®æ˜¯æ­£ç¡®çš„ç†è®ºçš„ä¸€ä¼—é‡å­åŠ›å­¦çš„å¥ åŸºäººä»¬ã€‚äººç±»æ–‡æ˜çš„æ™ºæ…§é—ªå…‰çœŸçš„ä»¤äººå¹ä¸ºè§‚æ­¢ï¼Œæˆ–è®¸æ— å°½å²æœˆä¹‹åï¼Œæœ‰è¶³å¤Ÿè¾¨æèƒ½åŠ›çš„å¦ä¸€ä¸ªæ–‡æ˜çœ‹åˆ°æˆ–è®¸å·²ç»ç­ç»çš„äººç±»æ®‹å­˜çš„ä¿¡æ¯ï¼Œä¹Ÿä¼šæƒŠå¹æˆ–æƒ‹æƒœäºè¿™ä¸ªæ–‡æ˜æ›¾ç»çš„æ™ºæ…§å§ã€‚ @å§ä¸‰ï¼š æˆ‘æ‰€ç†è§£çš„ç§©ï¼Œæ˜¯åœ¨æŸä¸ªç»´åº¦ä¸‹æ‰€å›ºå®šçš„æ¡ä»¶ä¸ªæ•°ï¼Œæ¯”æ–¹è¯´ï¼Œä¸‰ç»´ç©ºé—´æˆ‘ä»¬æœ‰xï¼Œzï¼Œyä¸‰ä¸ªçº¿æ€§æ— å…³çš„æ¡ä»¶ï¼Œä¸‰ä¸ªæ¡ä»¶å¯¹åº”ç€ç§©ä¸º3ï¼Œå³ç§©ä¸º3æ—¶æˆ‘ä»¬å¯ä»¥ç¡®å®šç©ºé—´çš„ä¸€ä¸ªç‚¹ã€‚å¯¹åº”æ­¤æ—¶æˆ‘ä»¬åªæœ‰å”¯ä¸€è§£ï¼Œå³ä¸ºR(A) n ï¼Œå‡å¦‚ä¸‰ç»´ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬ç§©ä¸º2 å³ä¸ºR(A) n ,æˆ‘ä»¬ä»¬åªæœ‰ä¸¤ä¸ªé‡å‡è®¾xï¼Œyæ˜¯å›ºå®šçš„æˆ–è€…è¯´å·²çŸ¥çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å°†ä¼šæœ‰ä¸€ä¸ªå¹³é¢çš„ç‚¹zä¸ç¡®å®šçš„ç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬å°†æœ‰ä¸€ä¸ªè‡ªç”±å˜é‡ï¼Œå³ä¸ºzæ–¹å‘ä¸Šçš„è‡ªç”±å˜é‡ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå‘é‡è¡¨ç¤ºè¿™äº›æœ‰çš„ç‚¹ï¼Œåˆ™ä¸ºæˆ‘ä»¬çš„é€šè§£ã€‚æ‰€ä»¥ç»´åº¦ ç§©ï¼ˆç¡®å®šçš„é‡ï¼‰+ åŸºç¡€è§£ç³»ä¸ªæ•°(ä¸ç¡®å®šçš„é‡) ç›®å½•ï¼š [TOC] 0.çº¿æ€§ä»£æ•°çš„â€œçº¿æ€§â€ â€œçº¿æ€§â€çš„ä¸¥æ ¼å®šä¹‰å¦‚ä¸‹è‹¥ä¸€ä¸ªå˜æ¢å·¥æ»¡è¶³ä¸¤æ¡æ€§è´¨ï¼šé½æ¬¡æ€§å’Œå¯åŠ æ€§ã€‚ å¯åŠ æ€§:$$L(\\vec{v} +\\vec{w}) L(\\vec{v})+L(\\vec{w})$$ é½æ¬¡æ€§ï¼ˆæˆæ¯”ä¾‹ï¼‰$$L(c\\vec{v}) cL(\\vec{v})$$ åˆ™ç§°Læ˜¯çº¿æ€§çš„ã€‚ ä»å‡ ä½•è§’åº¦çœ‹ï¼Œ å°†iå‘é‡å›ºå®šï¼Œç§»åŠ¨ jå‘é‡ï¼Œå°†å½¢æˆä¸€æ¡ç›´çº¿ï¼› å°†jå‘é‡å›ºå®šï¼Œç§»åŠ¨ iå‘é‡ï¼Œå°†å½¢æˆå¦ä¸€æ¡ç›´çº¿ï¼› æ¯æ¬¡ç§»åŠ¨å‘é‡ï¼Œéƒ½æ˜¯å¯¹åº”åŸºå‘é‡çš„å€æ•°ï¼ˆæˆæ¯”ä¾‹ï¼‰ï¼Œè€ŒåŸºå‘é‡ä¹‹é—´å¯ä»¥ç›¸åŠ å½¢æˆæ–°çš„å‘é‡ã€‚ å¯åŠ ã€å¯ä¹˜ï¼ˆæˆæ¯”ä¾‹ï¼‰ å¦‚æœå›ºå®šå…¶ä¸­ä¸€ä¸ªæ ‡é‡ï¼Œè®©å¦ä¸€ä¸ªæ ‡é‡è‡ªç”±å˜åŒ–ï¼Œæ‰€äº§ç”Ÿçš„å‘é‡çš„ç»ˆç‚¹ä¼šæå‡ºä¸€æ¡ç›´çº¿ã€‚ åŸºå‘é‡çº¿æ€§ç»„åˆçš„å‘é‡çš„é›†åˆï¼Œè¢«ç§°ä¸ºç»™å®šå‘é‡å¼ æˆçš„ç©ºé—´(span) çº¿æ€§çš„è¯æº:å‡ºäºçº¿æ€§æ–¹ç¨‹ç»„ã€‚çº¿æ€§æ–¹ç¨‹ç»„åœ¨äºŒç»´æƒ…å†µä¸‹ï¼Œæœ‰å½¢å¦‚ax+bycçš„å­æ–¹ç¨‹ æ‰€è°“çº¿æ€§å…³ç³»ï¼Œç®€å•åœ°è®²å°±æ˜¯æ¯”ä¾‹å…³ç³»ï¼Œå³ä¸¤ä¸ªå˜é‡æŒ‰ä¸€å®šçš„æ¯”ä¾‹å¢åŠ æˆ–å‡å°‘ã€‚ **è¿™ç§å…³ç³»è‹¥ç”¨å›¾å½¢æ¥è¡¨ç¤ºï¼Œå°±æ˜¯ä¸€æ¡ç›´çº¿ï¼Œæ•…ç§°çº¿æ€§å…³ç³»ã€‚**è¿™ç§å…³ç³»è‹¥ç”¨æ–¹ç¨‹æ¥è¡¨ç¤ºï¼Œå°±ç§°ä¸ºçº¿æ€§æ–¹ç¨‹ çº¿æ€§ä»£æ•° è¿™é—¨å­¦ç§‘ä¹‹æ‰€ä»¥åŒ…å«â€œçº¿æ€§â€äºŒå­—ï¼Œæ˜¯å› ä¸ºå®ƒä¸»è¦ç ”ç©¶çš„æ˜¯**å‘é‡ç©ºé—´ï¼ˆæˆ–ç§°ä¸ºçº¿æ€§ç©ºé—´ï¼‰ã€çº¿æ€§å˜æ¢ä»¥åŠçº¿æ€§æ–¹ç¨‹ç»„ç­‰æ¦‚å¿µã€‚**è¿™äº›æ¦‚å¿µéƒ½æ¶‰åŠåˆ°çº¿æ€§å…³ç³»ï¼š 1.çº¿æ€§ç›¸å…³å¯ä»¥ç†è§£ä¸ºçº¿æ€§ç›¸å…³æ„å‘³ç€åœç•™åœ¨è¿™ä¸ªç»´åº¦ä¸å¢ç»´ã€‚å½“ä¸€ç»„å‘é‡æˆçº¿æ€§ç›¸å…³æ—¶ï¼Œå…¶ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå‘é‡èƒ½ç”±å…¶å®ƒå‘é‡çº¿æ€§è¡¨ç¤º 2.åŸºå‘é‡ç©ºé—´çš„ä¸€ç»„åŸºçš„ä¸¥æ ¼å®šä¹‰æ˜¯è¿™æ ·çš„:å¼ æˆè¯¥ç©ºé—´çš„ä¸€ä¸ªçº¿æ€§æ— å…³å‘é‡çš„é›†åˆã€‚ ï¼ˆå‘é‡ç©ºé—´çš„ä¸€ç»„åŸºæ˜¯å¼ æˆè¯¥ç©ºé—´çš„ä¸€ä¸ªçº¿æ€§æ— å…³å‘é‡é›†ï¼‰ 3.çº¿æ€§å˜æ¢ï¼ˆåŠ²çˆ†ï¼‰ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´ï¼Œçº¿æ€§å˜æ¢æ˜¯å°†å‘é‡ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºçš„ä¸€ç±»å‡½æ•°ã€‚ çº¿æ€§å˜æ¢æ˜¯æ“çºµç©ºé—´çš„ä¸€ç§æ‰‹æ®µã€‚ å®ƒå…·å¤‡ä¸¤ä¸ªæ€§è´¨ï¼š â‘ ä¿æŒç½‘æ ¼çº¿å¹³è¡Œä¸”ç­‰è·åˆ†å¸ƒï¼Œâ‘¡ä¿æŒåŸç‚¹ä¸åŠ¨ã€‚ è¿™ä¸¤ç‚¹æ€§è´¨ä¿è¯äº†ï¼šåªè¦è®°å½•ä¸‹iå¸½å’Œjå¸½å˜æ¢åçš„ä½ç½®ï¼Œä½ å°±èƒ½è®¡ç®—å‡ºä¸€ä¸ªåæ ‡ä¸º(x,y)çš„å‘é‡å˜æ¢åçš„åæ ‡ã€‚ ä»¤äººé«˜å…´çš„æ˜¯ï¼Œè¿™ç§å˜æ¢åªéœ€è¦å‡ ä¸ªæ•°å­—å°±èƒ½æè¿°æ¸…æ¥šï¼Œè¿™äº›æ•°å­—å°±æ˜¯å˜æ¢ååŸºå‘é‡çš„åæ ‡ã€‚çº¿æ€§å˜æ¢ç”±å®ƒå¯¹ç©ºé—´çš„åŸºå‘é‡çš„ä½œç”¨å®Œå…¨å†³å®šã€‚ ä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬å°†å˜æ¢åiå¸½å’Œjå¸½çš„åæ ‡ä½œä¸ºä¸€ä¸ªçŸ©é˜µçš„åˆ—ï¼Œå¹¶ä¸”å°†ä¸¤åˆ—åˆ†åˆ«ä¸xå’Œyç›¸ä¹˜ååŠ å’Œçš„ç»“æœå®šä¹‰ä¸ºçŸ©é˜µå‘é‡ä¹˜ç§¯ è¿™æ ·ï¼ŒçŸ©é˜µä»£è¡¨ä¸€ä¸ªç‰¹å®šçš„çº¿æ€§å˜æ¢ã€‚è€ŒçŸ©é˜µä¸å‘é‡ç›¸ä¹˜ï¼Œå°±æ˜¯å°†çº¿æ€§å˜æ¢ä½œç”¨äºé‚£ä¸ªå‘é‡ã€‚ å› æ­¤**å¯ä»¥å°†çº¿æ€§å˜æ¢çœ‹ä½œå¯¹ç©ºé—´çš„æŒ¤å‹ä¼¸å±•ã€‚**è¿™æ˜¯å› ä¸ºå…¶ä»–ä»»æ„å‘é‡éƒ½èƒ½è¡¨ç¤ºä¸ºåŸºå‘é‡çš„çº¿æ€§ç»„åˆã€‚ çº¿æ€§ç›¸å…³æ—¶ï¼Œå¦‚æœå˜æ¢åçš„iå¸½å’Œå˜æ¢åçš„jå¸½æ˜¯çº¿æ€§ç›¸å…³çš„ï¼Œæ„å‘³ç€å…¶ä¸­ä¸€ä¸ªå‘é‡æ˜¯å¦ä¸€ä¸ªçš„å€æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿æ€§å˜æ¢å°†æ•´ä¸ªäºŒç»´ç©ºé—´æŒ¤å‹åˆ°å®ƒä»¬æ‰€åœ¨ä¸€æ¡ç›´çº¿ä¸Šã€‚ä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªçº¿æ€§ç›¸å…³å‘é‡æ‰€å¼ æˆçš„ä¸€ç»´ç©ºé—´ã€‚ ä»¥è¿™äº›åæ ‡ä¸ºåˆ—æ‰€æ„æˆçš„çŸ©é˜µä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æè¿°çº¿æ€§å˜æ¢çš„è¯­è¨€ï¼Œè€ŒçŸ©é˜µå‘é‡ä¹˜æ³•å°±æ˜¯è®¡ç®—çº¿æ€§å˜æ¢ä½œç”¨äºç»™å®šå‘é‡çš„ä¸€ç§é€”å¾„ã€‚ è¿™é‡Œé‡è¦çš„æ˜¯ã€‚æ¯å½“ä½ çœ‹åˆ°ä¸€ä¸ªçŸ©é˜µæ—¶ï¼Œä½ éƒ½å¯ä»¥æŠŠå®ƒè§£è¯»ä¸ºå¯¹ç©ºé—´çš„ä¸€ç§ç‰¹å®šå˜æ¢ã€‚ çŸ©é˜µç›¸ä¹˜ï¼šä¸¤ä¸ªå˜åŒ–ç›¸äº’ä½œç”¨ï¼Œå³å¤åˆå˜åŒ–ã€‚è¿™é‡Œå¯ä»¥è”æƒ³å¤åˆå‡½æ•°ã€‚ è¿™æ ·ä¹Ÿå¯ä»¥è§£é‡ŠçŸ©é˜µçš„ä¸¤ä¸ªæ€§è´¨ï¼š ä¸å…·å¤‡äº¤æ¢å¾‹ AB â‰  BA ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆçŸ©é˜µä¹˜æ³•æœ‰ä¸¥æ ¼é¡ºåºè¦æ±‚ã€‚ä¾‹å¦‚ å…ˆæ—‹è½¬ã€å†å‰ªåˆ‡ å’Œ å…ˆå‰ªåˆ‡ã€å†æ—‹è½¬æ˜¯ä¸åŒçš„ã€‚ å…·å¤‡ç»“åˆå¾‹ A(BC) å’Œ (AB)C ä¸‰ä¸ªçº¿æ€§å˜åŒ–çš„ç›¸å¯¹é¡ºåºä¸å˜ï¼Œ çº¿æ€§ä»£æ•°ä¸­çš„â€œå‰ªåˆ‡â€é€šå¸¸æŒ‡çš„æ˜¯å‰ªåˆ‡çŸ©é˜µï¼ˆshear matrixï¼‰æˆ–å‰ªåˆ‡å˜æ¢ï¼ˆshear transformationï¼‰ï¼Œè¿™æ˜¯ä¸€ç§çº¿æ€§å˜æ¢ï¼Œå®ƒå°†ä¸€ä¸ªå›¾å½¢æ²¿ç€æŸä¸€è½´æˆ–å¹³é¢è¿›è¡Œå€¾æ–œï¼Œè€Œä¸æ”¹å˜å›¾å½¢çš„å¤§å°æˆ–å½¢çŠ¶ è¿™æ˜¯é€šè¿‡çŸ©é˜µåœ¨å‡ ä½•ä¸Šçš„çº¿æ€§å˜æ¢ï¼Œè¯æ˜çŸ©é˜µä¹˜æ³•å…·æœ‰ç»“åˆæ€§çš„ä¸€ä¸ªå®å®åœ¨åœ¨çš„è¯æ˜ã€‚æˆ‘çœŸçš„é¼“åŠ±ä½ åœ¨è¿™ç§æƒ³æ³•ä¸Šå¤šåšå°è¯•ï¼Œæƒ³è±¡ä¸¤ä¸ªä¸åŒçš„å˜æ¢ï¼Œæ€è€ƒä»–ä»¬ä¾æ¬¡ä½œç”¨åä¼šå‘ç”Ÿä»€ä¹ˆï¼Œæœ€åç”¨æ•°å€¼æ–¹æ³•è®¡ç®—å‡ºçŸ©é˜µä¹˜ç§¯ã€‚ 4.è§‚å¯ŸåŸºå‘é‡çš„è¿ç®—å’Œçº¿æ€§å˜æ¢ï¼Œ**â€œç¼©æ”¾å†ç›¸åŠ â€**çš„è¿‡ç¨‹åœ¨å˜æ¢å‰åå‡é€‚ç”¨ã€‚ å¯¹äºä¸€ä¸ªçŸ©é˜µï¼Œç”¨ä¸€ä¸ªå…ƒç´ å‡ä¸ºxã€yã€zè¿™ç§æœªçŸ¥æ•°çš„å‘é‡ç›¸ä¹˜ï¼Œå¾—åˆ°çš„æ–°çŸ©é˜µå°±æ˜¯æ–°çš„åŸºå‘é‡ã€‚ çº¿æ€§å˜æ¢çŸ©é˜µ * è¾“å…¥å‘é‡ è¾“å‡ºå‘é‡ã€‚ ï¼ˆçº¿æ€§å˜æ¢å’Œå‡½æ•°çš„åŠŸèƒ½æ˜¯ç±»ä¼¼çš„ï¼Œè¾“å…¥-å¤„ç†-è¾“å‡ºã€‚ä½†å˜æ¢ä¸€è¯æ›´å¼ºè°ƒå˜æ¢æœ¬èº«çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯å‡ ä½•è€Œéæ•°å€¼ä¸Šçš„å˜åŒ–ã€‚ï¼‰ 4.è¡Œåˆ—å¼ä¸åŒçŸ©é˜µä»£è¡¨çš„çº¿æ€§å˜æ¢ä¸­ï¼Œæœ‰çš„å°†ç©ºé—´å‘å¤–æ‹‰ä¼¸ï¼Œæœ‰çš„å°†ç©ºé—´å‘å†…æŒ¤å‹ã€‚ç†è§£è¿™äº›çº¿æ€§å˜æ¢çš„å…³é”®ä¸€ç‚¹ï¼Œæ˜¯æµ‹é‡å˜æ¢å¯¹ç©ºé—´æ‹‰ä¼¸æˆ–æŒ¤å‹çš„ç¨‹åº¦ã€‚ä¹Ÿå°±æ˜¯æµ‹é‡ä¸€ä¸ªç»™å®šåŒºåŸŸé¢ç§¯å¢å¤§æˆ–å‡å°çš„æ¯”ä¾‹ã€‚ è¿™ä¸ªç‰¹æ®Šçš„ç¼©æ”¾æ¯”ä¾‹ï¼Œå³çº¿æ€§å˜æ¢æ”¹å˜é¢ç§¯çš„æ¯”ä¾‹ , è¢«ç§°ä¸ºè¿™ä¸ªå˜æ¢çš„è¡Œåˆ—å¼ æ³¨æ„ï¼š æ— è®ºä¸€ä¸ªæ–¹æ ¼å¦‚ä½•å˜åŒ–ï¼Œå¯¹å…¶ä»–å¤§å°çš„æ–¹æ ¼æ¥è¯´ï¼Œéƒ½ä¼šæœ‰ç›¸åŒå˜åŒ–ã€‚ è¿™æ˜¯ç”±â€œç½‘æ ¼çº¿ä¿æŒå¹³è¡Œä¸”ç­‰è·åˆ†å¸ƒâ€è¿™ä¸€äº‹å®æ¨æ–­å¾—å‡ºçš„ å¯¹äºä¸æ˜¯æ–¹æ ¼çš„å½¢çŠ¶ï¼ˆå­˜åœ¨æ›²çº¿çš„ï¼‰ï¼Œå¯ä»¥ç”¨å¾ˆå¤šå°æ–¹æ ¼è¿‘ä¼¼ã€‚ å¯¹æ‰€æœ‰å°æ–¹æ ¼éƒ½è¿›è¡Œç­‰æ¯”ä¾‹ç¼©æ”¾ï¼Œç¼©æ”¾çš„è¶Šå°ï¼Œç²¾åº¦è¶Šé«˜ã€‚ å¦‚æœä¸€ä¸ªäºŒç»´çº¿æ€§å˜æ¢çš„è¡Œåˆ—å¼ä¸º0ï¼Œè¯´æ˜å®ƒå°†æ•´ä¸ªå¹³é¢å‹ç¼©åˆ°ä¸€æ¡çº¿ï¼Œç”šè‡³æ˜¯ä¸€ä¸ªç‚¹ä¸Šã€‚ è¡¨ç°åœ¨å‡ ä½•ä¸Šå°±æ˜¯é¢ç§¯ä¸º0ï¼Œæ²¡æœ‰é¢ç§¯ã€‚ è¿™æ„å‘³ç€ä¸€ä¸ªçŸ©é˜µçš„è¡Œåˆ—å¼å¦‚æœä¸º0ï¼Œè¿™ä¸ªçŸ©é˜µæ‰€ä»£è¡¨çš„å˜æ¢å°±èƒ½å°†ç©ºé—´å‹ç¼©åˆ°æ›´å°çš„ç»´åº¦ä¸Šï¼ˆé™ç»´ï¼‰ã€‚ äºŒç»´ç©ºé—´çš„è¡Œåˆ—å¼è´Ÿå€¼ï¼š å®šå‘ è¡Œåˆ—å¼æœ‰è´Ÿå€¼ã€‚ç¼©æ”¾ä¸€ä¸ªè´Ÿæ•°æ˜¯ä»€ä¹ˆæ„æ€? è¿™ä¼šæ¶‰åŠåˆ°ä¸€ä¸ªå«â€œå®šå‘â€çš„æ¦‚å¿µã€‚ å¦‚é‡Œä½ å°†äºŒç»´ç©ºé—´æƒ³è±¡ä¸ºä¸€å¼ çº¸ï¼Œè¿™ä¸ªå˜æ¢åƒæ˜¯å°†çº¸ç¿»è½¬åˆ°äº†å¦ä¸€é¢ã€‚ æ ¹æ®iå¸½å’Œjå¸½æ¥è€ƒè™‘ã€‚ åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ˜¾ç„¶ j-hat åœ¨ i-hat å·¦è¾¹ï¼Œå½¢æˆä¸€ä¸ªç›´è§’ã€‚ å¦‚æœåœ¨å˜æ¢ä¹‹åï¼Œjå¸½å¤„äºiå¸½çš„å³è¾¹ï¼Œé‚£ä¹ˆç©ºé—´å®šå‘å°±å‘ç”Ÿäº†æ”¹å˜ j å¸½å°±æ˜¯yè½´åŸºå‘é‡ï¼Œi -hat å°±æ˜¯xè½´åŸºå‘é‡ æˆ‘ä»¬ç§°ç±»ä¼¼è¿™æ ·çš„å˜æ¢æ”¹å˜äº†ç©ºé—´çš„å®šå‘ã€‚ å½“ç©ºé—´å®šå‘æ”¹å˜çš„æƒ…å†µå‘ç”Ÿæ—¶ï¼Œè¡Œåˆ—å¼ä¸ºè´Ÿã€‚ æ­¤æ—¶ï¼Œè¡Œåˆ—å¼çš„ç»å¯¹å€¼ä¾ç„¶è¡¨ç¤ºåŒºåŸŸé¢ç§¯çš„ç¼©æ”¾æ¯”ä¾‹ã€‚ æ¯”å¦‚è¯´ï¼Œæˆ‘å‘Šè¯‰ä½ ç”±(1,1)å’Œ(2,-1)ä¸ºåˆ—çš„çŸ©é˜µæ‰€ä»£è¡¨çš„çº¿æ€§å˜æ¢çš„è¡Œåˆ—å¼æ˜¯-3. è¿™å°±æ˜¯è¯´å˜æ¢åç©ºé—´è¢«ç¿»è½¬ï¼Œå¹¶ä¸”é¢ç§¯æ”¾å¤§ä¸ºåŸæ¥çš„3å€ã€‚ è´Ÿçš„é¢ç§¯ä¸ºä»€ä¹ˆå’Œå®šå‘æœ‰å…³ï¼Ÿ è¿™é‡Œå¼ºçƒˆå»ºè®®çœ‹3blue1brownåŸè§†é¢‘ã€‚ ã€Šçº¿æ€§ä»£æ•°çš„æœ¬è´¨ã€‹è¡Œåˆ—å¼ 5ï¼š05 å½“iå¸½é è¿‘jå¸½æ—¶ï¼Œç©ºé—´ä¹Ÿè¢«å‹ç¼©åœ°æ›´ä¸¥é‡ï¼Œè¿™æ„å‘³ç€è¡Œåˆ—å¼è¶‹è¿‘äº0ï¼› å½“iå¸½ä¸jå¸½å®Œå…¨é‡åˆæ—¶ï¼Œè¡Œåˆ—å¼ä¸º0ã€‚ å¦‚æœiå¸½ç»§ç»­æ²¿ç€è¿™ä¸ªæ–¹å‘è¿åŠ¨ï¼Œè¡Œåˆ—å¼ç»§ç»­å‡å°ä¸ºè´Ÿå€¼å°†æ˜¯ä¸€ä»¶å¾ˆè‡ªç„¶çš„äº‹ã€‚ æ¢ä¸€ä¸ªè§’åº¦çœ‹ï¼ŒäºŒç»´çš„å‹ç¼©ï¼Œä»ä¸‰ç»´è§†è§’çœ‹ï¼Œå°±æ˜¯ä¸€ç§æ—‹è½¬ã€‚ å‹ç¼©æ—¶ï¼Œå‘é‡j ä¸åŠ¨ï¼Œå‘é‡ i é€æ¸é è¿‘ jã€‚ æƒ³è±¡ i é è¿‘ j ï¼Œè¶Šè¿‡ j çš„è¿‡ç¨‹ï¼š äºŒç»´è§†è§’ä¸‹ï¼Œä»¥i å’Œ j ä¸ºåŸº çš„åæ ‡ç³»æ¥è¿‘æ—¶å‹ç¼©ï¼Œè¶Šè¿‡æ—¶æ‹‰ä¼¸ã€‚ ä¸‰ç»´è§†è§’ä¸‹ï¼ŒæŠŠçº¢å‘é‡jå½“åšZè½´ï¼Œæƒ³è±¡ç»¿å‘é‡åœ¨XOYå¹³é¢ä¸Šæ—‹è½¬â€”â€” å°±åƒä¸€ä¸ªåœ†æŸ±ç»•åœ†å¿ƒçš„Zè½´æ—‹è½¬ï¼Œä½ åªèƒ½çœ‹åˆ° XoY è¿™ä¸€ä¸ªä¾§åˆ‡é¢çš„å˜åŒ–ã€‚ ä¸‰ç»´ç©ºé—´ï¼Œè¡Œåˆ—å¼æ„å‘³ç€ä»€ä¹ˆï¼Ÿ ä¾ç„¶æ˜¯å˜æ¢å‰åçš„ç¼©æ”¾æ¯”ä¾‹ï¼Œä¸è¿‡è¿™æ¬¡ç¼©æ”¾çš„æ˜¯ä½“ç§¯ã€‚ äºŒç»´ç©ºé—´ï¼Œæˆ‘ä»¬è€ƒè™‘çš„æ˜¯åŸºå‘é‡i å’Œ j ç»„æˆçš„é¢ç§¯ä¸º1çš„æ­£æ–¹å½¢ï¼Œå¹¶è§‚å¯Ÿå˜æ¢å¯¹å®ƒçš„å½±å“ã€‚ ä¸‰ç»´ç©ºé—´ï¼Œæˆ‘ä»¬è€ƒè™‘çš„æ˜¯åŸºå‘é‡ i , j , k ç»„æˆçš„ä½“ç§¯ä¸º1 çš„ç«‹ä½“æ­£æ–¹å½¢ã€‚ ä¸‰ç»´ç©ºé—´çš„è¡Œåˆ—å¼è´Ÿå€¼ï¼š æœ‰ä¸€ç§æ–¹æ³•æ¥æè¿°ä¸‰ç»´ç©ºé—´çš„å®šå‘ï¼Œé‚£å°±æ˜¯â€œå³æ‰‹å®šåˆ™â€”â€” å³æ‰‹é£ŸæŒ‡æŒ‡å‘iå¸½çš„æ–¹å‘ï¼› ä¼¸å‡ºä¸­æŒ‡æŒ‡å‘jå¸½çš„æ–¹å‘ï¼› å½“ä½ æŠŠå¤§æ‹‡æŒ‡ç«–èµ·æ¥æ—¶ï¼Œå®ƒå°±æ­£å¥½æŒ‡å‘kå¸½çš„æ–¹å‘ã€‚ å¦‚æœçº¿æ€§å˜æ¢åï¼Œä½ è¿˜å¯ä»¥ç”¨å³æ‰‹è¿™ä¹ˆåšï¼Œé‚£ä¹ˆå®šå‘æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œè¡Œåˆ—å¼ä¸ºæ­£ã€‚ å¦‚æœå˜æ¢åï¼Œåªèƒ½ç”¨å·¦æ‰‹æè¿°äº†ï¼Œé‚£å°±æ˜¯å®šå‘å‘ç”Ÿäº†æ”¹å˜ï¼Œè¡Œåˆ—å¼ä¸ºè´Ÿã€‚ è¡Œåˆ—å¼çš„æ±‚å€¼å…¬å¼ï¼š ad - bc$$(a+b)(c+d)-ac-bd-2bc ad-bc$$åæ ‡ç³»ä¸­ï¼Œ å°æ­£æ–¹å½¢å‡‘æˆçš„ç½‘æ ¼é¢ç§¯ å‡å» å¹³è¡Œå››è¾¹å½¢å‘¨å›´çš„ä¸‰è§’å½¢é¢ç§¯ å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ è¡Œåˆ—å¼çš„ä¸€ä¸ªæ€§è´¨è¯æ˜ï¼š$$det(M1M2) det(m1) det(m2)$$ detè¡Œåˆ—å¼ï¼ŒM1ã€M2æ˜¯çŸ©é˜µ æ•°å€¼è®¡ç®—å¾ˆéº»çƒ¦ã€‚ä½†ä»å‡ ä½•ä¸Šç†è§£ï¼š ä¸¤ä¸ªç›¸ç»§ä½œç”¨çš„æ€»çš„çº¿æ€§å˜æ¢å¯¹ç©ºé—´ä¸­å‡ ä½•ç»´åº¦é€ æˆçš„å½±å“ç­‰äºä»–ä»¬å•ç‹¬ä½œç”¨æ—¶é€ æˆå½±å“çš„ä¹˜ç§¯ã€‚ ä¸¤æ¬¡ç©ºé—´æ”¾ç¼©å¼•èµ·çš„é¢ç§¯å˜åŒ– æ˜¯ ä¸¤æ¬¡å•ç‹¬æ”¾ç¼©é¢ç§¯å˜åŒ– å€æ•°çš„ä¹˜ç§¯ åœ¨åŒä¸€ä¸ªå˜æ¢ä¸‹ä»»ä½•ä¸€ä¸ªå›¾å½¢çš„æ‹‰ä¼¸å€ç‡éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥M1M2ä¸¤æ¬¡å˜æ¢åçš„é¢ç§¯å€ç‡ç»“æœæ˜¯ä¸€è‡´çš„ã€‚ æ³¨æ„ï¼šdetä¹˜detæœ¬è´¨ä¸æ˜¯é¢ç§¯ç›¸ä¹˜ï¼Œè€Œæ˜¯é¢ç§¯å€ç‡ç›¸ä¹˜ã€‚ 5.çº¿æ€§æ–¹ç¨‹ç»„ç”¨ä¸€ä¸ªå¼å­æ¦‚æ‹¬ï¼š$$A\\vec{x} \\vec{v}$$ $$\\left(\\begin{matrix}1 2 3 \\4 5 6 \\7 8 9\\end{matrix}\\right) \\left[\\begin{matrix}x_1 \\x_2 \\x_3 \\end{matrix}\\right] \\left[\\begin{matrix}a \\b \\c \\end{matrix}\\right]$$ A æ˜¯æœªçŸ¥æ•°ç³»æ•°çš„çŸ©é˜µï¼Œx æ˜¯æœªçŸ¥æ•°å‘é‡{x,y,zæˆ–x1,x2,x3â€¦â€¦}ï¼Œ væ˜¯å¸¸æ•°å‘é‡ï¼Œå¦‚æœæ˜¯é½æ¬¡çš„è¯ï¼Œv å°±æ˜¯ å¾ˆå¤š 0 çš„ å‘é‡ã€‚ è¿™ä¸ªå¼å­é˜æ˜äº†çº¿æ€§æ–¹ç¨‹ç»„é—®é¢˜ä¸­ä¼˜ç¾çš„å‡ ä½•ç›´è§‚éƒ¨åˆ†ï¼š çŸ©é˜µAä»£è¡¨ä¸€ç§çº¿æ€§å˜æ¢ï¼Œæ‰€ä»¥ æ±‚è§£Axvæ„å‘³ç€æˆ‘ä»¬å»å¯»æ‰¾ä¸€ä¸ªå‘é‡xï¼Œä½¿å¾—å®ƒåœ¨å˜æ¢åä¸vé‡åˆã€‚ è¿™ä¸ªæ—¶å€™é€†çŸ©é˜µçš„å‡ ä½•æ„ä¹‰ä¹Ÿå¾ˆæ¸…æ™°äº†ï¼ å½“ä½ é€†å‘è¿›è¡Œå˜æ¢æ—¶ï¼Œå®ƒå®é™…ä¸Šå¯¹åº”äº†å¦ä¸€ä¸ªçº¿æ€§å˜æ¢ â€”â€” ç”¨vç»è¿‡çº¿æ€§å˜æ¢ï¼ˆçŸ©é˜µï¼‰å»å¯»æ‰¾xã€‚ ä¹Ÿå°±æ˜¯ç­‰å¼ä¸¤è¾¹åŒä¹˜Aé€†ï¼Œvé€†å‘è¿›è¡Œå˜æ¢å¹¶è·Ÿè¸ªxçš„åŠ¨å‘ã€‚ è¿™ä¸ªçº¿æ€§å˜æ¢å°±å«ä½œA^-1^ Açš„é€†çŸ©é˜µï¼ æ¯”å¦‚è¯´ï¼Œå¦‚æœAæ˜¯é€†æ—¶é’ˆæ—‹è½¬90åº¦çš„å˜æ¢,é‚£ä¹ˆAçš„é€†å°±æ˜¯é¡ºæ—¶é’ˆæ—‹è½¬90åº¦çš„å˜æ¢ã€‚ æ€»çš„æ¥è¯´ï¼ŒAé€†æ˜¯æ»¡è¶³ä»¥ä¸‹æ€§è´¨çš„å”¯ä¸€å˜æ¢ï¼š é¦–å…ˆåº”ç”¨Aä»£è¡¨çš„å˜æ¢ï¼Œå†åº”ç”¨Aé€†ä»£è¡¨çš„å˜æ¢ï¼Œä½ ä¼šå›åˆ°åŸå§‹çŠ¶æ€ã€‚ Aé€†ä¹˜ä»¥Aç­‰äºä¸€ä¸ªâ€œä»€ä¹ˆéƒ½ä¸åšâ€çš„çŸ©é˜µï¼Œè¿™ä¸ªâ€œä»€ä¹ˆéƒ½ä¸åšâ€çš„å˜æ¢è¢«ç§°ä¸ºâ€œæ’ç­‰å˜æ¢â€ xå’Œvé‡åˆæœ‰ä¸¤ç§æƒ…å†µï¼š é™ç»´ï¼Œä¸¤è€…å˜æˆä¸€æ¡çº¿æˆ–ä¸€ä¸ªç‚¹ä»è€Œé‡åˆã€‚ ä¸é™ç»´ï¼Œåœ¨åŸæœ‰ç»´åº¦ï¼ˆäºŒç»´ã€ä¸‰ç»´ï¼‰ä¸Šé€šè¿‡çº¿æ€§å˜æ¢é‡åˆã€‚ ä¸é™ç»´ï¼Œå³å­˜åœ¨å”¯ä¸€è§£çš„æƒ…å†µï¼Œè¿™æ—¶å­˜åœ¨Aé€†ã€‚ A^-1^ ä½¿å¾—åº”ç”¨Aå˜æ¢å†åº”ç”¨Aé€†å˜æ¢ä¹‹åï¼Œç»“æœä¸æ’ç­‰å˜æ¢æ— å¼‚ã€‚ é™ç»´å³è¡Œåˆ—å¼ä¸º 0çš„æƒ…å†µï¼› ä¸è¿™ä¸ªæ–¹ç¨‹ç»„ç›¸å…³çš„å˜æ¢å°†ç©ºé—´å‹ç¼©åˆ°æ›´ä½çš„ç»´åº¦ä¸Šï¼Œæ­¤æ—¶æ²¡æœ‰é€†å˜æ¢ï¼Œä½ ä¸èƒ½å°†ä¸€æ¡çº¿â€œè§£å‹ç¼©â€ä¸ºä¸€ä¸ªå¹³é¢ï¼Œä¹Ÿä¸èƒ½å°†ä¸€ä¸ªç‚¹â€œå›æº¯â€æˆä¸€æ¡çº¿ï¼ˆè‡³å°‘è¿™ä¸æ˜¯ä¸€ä¸ªå‡½æ•°èƒ½åšçš„ï¼‰ï¼Œä½ ä¸èƒ½è¿›è¡Œå‡ç»´ã€‚ é™ç»´ä¼šæŸå¤±ä¿¡æ¯ã€‚ ç©ºé—´åç¼©ä¸ºæ›´ä½çš„ç»´åº¦åï¼Œå˜æ¢ä¿¡æ¯æœ‰æ‰€ä¸¢å¤±ï¼Œæ— æ³•å¾—åˆ°å…¶é€†å˜æ¢ï¼Œä¹Ÿå°±æ˜¯é€†çŸ©é˜µä¸å­˜åœ¨ è¿™æ ·å°±ä¼šè¦æ±‚å°†ä¸€ä¸ªå•ç‹¬çš„å‘é‡å˜æ¢ä¸ºä¸€æ•´æ¡çº¿çš„å‘é‡ï¼Œä½†æ˜¯å‡½æ•°åªèƒ½å°†ä¸€ä¸ªè¾“å…¥å˜æ¢ä¸ºä¸€ä¸ªè¾“å‡ºã€‚ å…³äºåˆ—ç©ºé—´ï¼ˆä¸‹é¢ç†è§£æ–¹ç¨‹ç»„æ±‚è§£è¦ç”¨ï¼‰ï¼š æ‰€æœ‰å¯èƒ½çš„å˜æ¢ç»“æœ(è¾“å‡ºå‘é‡)çš„é›†åˆ è¢«ç§°ä¸ºçŸ©é˜µçš„â€œåˆ—ç©ºé—´ã€‚ ä¸ç®¡æ˜¯ä¸€æ¡ç›´çº¿ã€ä¸€ä¸ªå¹³é¢è¿˜æ˜¯ä¸‰ç»´ç©ºé—´ç­‰ã€‚ çŸ©é˜µçš„åˆ—å‘Šè¯‰ä½ åŸºå‘é‡å˜æ¢åçš„ä½ç½®ï¼Œè¿™äº›**å˜æ¢åçš„åŸºå‘é‡å¼ æˆçš„ç©ºé—´å°±æ˜¯æ‰€æœ‰å¯èƒ½çš„å˜æ¢ç»“æœ **; æ¢å¥è¯è¯´**ï¼Œåˆ—ç©ºé—´å°±æ˜¯çŸ©é˜µçš„åˆ—æ‰€å¼ æˆçš„ç©ºé—´ã€‚** åˆ—å¼ æˆçš„ç©ºé—´ span of columnsâ†”ï¸åˆ—ç©ºé—´ Column space 0å‘é‡ä¸€å®šåŒ…å«åœ¨åˆ—ç©ºé—´ä¸­ã€‚ å› ä¸ºçº¿æ€§å˜æ¢è¦æ±‚åŸç‚¹ä½ç½®ä¸å˜ã€‚ ç»“åˆè¿™é‡Œçš„å‡ ä½•ç‰¹æ€§ä½ å¯ä»¥ç†è§£ï¼š å¯¹äºçº¿æ€§æ–¹ç¨‹ç»„çš„æ±‚è§£æƒ…å†µâ€”â€” éé½æ¬¡ å¢å¹¿çŸ©é˜µr(A,v) çš„ç§©å’ŒçŸ©é˜µçš„ç§©r(A) æ˜¯å¦ç›¸ç­‰ï¼š r(A,v) == r(A)è¯´æ˜ v å’ŒAåœ¨ä¸€ä¸ªç»´åº¦ä¸Š ï¼Œè‡³å°‘æœ‰ä¸€ä¸ªè§£ r(A,v) r(A) :è¯´æ˜ v æ¯” A çš„ç»´åº¦è¦é«˜ ï¼Œæ— è§£ åˆ—ç©ºé—´ï¼šåˆ—å‘é‡å¼ æˆçš„ç©ºé—´spanï¼Œå¿˜è®°çš„çœ‹ç¬¬ 0 æ¡ ã€‚ åˆ—ç©ºé—´æ˜¯æ‰€æœ‰å¯èƒ½çš„ A çš„åˆ—å‘é‡çš„çº¿æ€§ç»„åˆæ„æˆçš„é›†åˆã€‚ å‡è®¾çŸ©é˜µ A æ˜¯ä¸€ä¸ª mÃ—n çš„çŸ©é˜µï¼Œé‚£ä¹ˆå®ƒæœ‰ n ä¸ªåˆ—å‘é‡ã€‚è¿™äº›åˆ—å‘é‡å¯ä»¥çœ‹ä½œæ˜¯ R^m^ (mç»´ç©ºé—´ï¼‰ä¸­çš„å‘é‡ã€‚ å¦‚æœè¿™äº›åˆ—å‘é‡çº¿æ€§æ— å…³ï¼Œå®ƒä»¬å¯ä»¥å¼ æˆä¸€ä¸ª n ç»´çš„å­ç©ºé—´ï¼Œè¿™ä¸ªå­ç©ºé—´å°±æ˜¯ A çš„åˆ—ç©ºé—´ã€‚ ç°åœ¨ï¼Œå½“æˆ‘ä»¬è¯´å‘é‡ v ä¸åœ¨çŸ©é˜µ A çš„åˆ—ç©ºé—´ä¸­ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰ä¸€ç§æ–¹å¼é€šè¿‡ A çš„åˆ—å‘é‡çš„çº¿æ€§ç»„åˆæ¥å¾—åˆ°å‘é‡ vã€‚ æ¢å¥è¯è¯´ï¼Œv å‘é‡çš„ç»´åº¦é«˜äº Aï¼Œäºæ˜¯ä¸å­˜åœ¨ä¸€ä¸ªå‘é‡ x ä½¿å¾— Ax v æˆç«‹ã€‚ å¦‚æœæˆ‘ä»¬å°† A çš„åˆ—å‘é‡çœ‹ä½œæ˜¯å®šä¹‰äº†ä¸€ä¸ªå¹³é¢æˆ–è€…é«˜ç»´ç©ºé—´ä¸­çš„ä¸€ä¸ªè¶…å¹³é¢ï¼Œé‚£ä¹ˆ b å°±æ˜¯ä½äºè¿™ä¸ªå¹³é¢æˆ–è¶…å¹³é¢ä¹‹å¤–çš„ç‚¹ã€‚ r(A,v) r(A) æ—¶ï¼Œæ„å‘³ç€ v çš„ç»´åº¦æ¯” A çš„ç»´åº¦è¦é«˜ï¼ŒAç»è¿‡åˆç­‰è¡Œå˜æ¢ä¼šå­˜åœ¨ å…¨ 0 è¡Œã€‚ Aå¦‚æœçº¿æ€§ç›¸å…³ï¼Œåˆ™å¿…ç„¶å­˜åœ¨ å…¨ 0 è¡Œï¼› Aå¦‚æœçº¿æ€§æ— å…³ï¼Œä½†æ¯”æˆ‘ä»¬è¦è¿½è¸ªçš„ v å‘é‡ å°‘ä¸€è¡Œï¼Œä¹Ÿæ„å‘³ç€Aã€vä¸¤è€…æ¯”è¾ƒæ—¶ï¼ŒAä¸‹é¢è¦è¡¥å……ä¸€ä¸ªå…¨0è¡Œã€‚ æ€»ä¹‹å°±æ˜¯å°‘ä¸€ä¸ªç»´åº¦ã€‚ r(A) é‡Œå­˜åœ¨çº¿æ€§ç›¸å…³çš„åˆ—å‘é‡ã€‚äºæ˜¯ A çš„çº¿æ€§å˜æ¢ç›¸æ¯” vå‘é‡ å°‘äº†ä¸€ä¸ªç»´åº¦ï¼Œæ‰¾ä¸åˆ° xå‘é‡ ç»è¿‡ä½ç»´çº¿æ€§å˜æ¢ è¿½è¸ªåˆ° vã€‚ åœ¨ r(A,v)==r(A) çš„æƒ…å†µä¸‹ï¼Œç§©çš„æ•°é‡(A)æ˜¯å¦å’ŒæœªçŸ¥æ•°n (xå‘é‡)ä¸€æ ·ï¼š å¦‚æœä¸€æ ·ï¼Œè¯´æ˜ A å’Œ x åœ¨åŒä¸€ç»´åº¦ï¼Œxå¯ä»¥é€šè¿‡æœ‰é™çº¿æ€§å˜åŒ–A ä¸ vé‡å ï¼Œè¿™æ—¶æ˜¯å”¯ä¸€è§£ã€‚ å¦‚æœä¸ä¸€æ ·ï¼Œè¯´æ˜ A æ¯” x ç»´åº¦ä½ ï¼Œx æƒ³ä¸ v é‡å ï¼Œåªèƒ½é€šè¿‡â€œé™ç»´â€ï¼Œè¿™æ—¶æ˜¯æ— ç©·å¤šè§£ã€‚ å¯ä»¥æƒ³è±¡ï¼Œç‰©ä½“æŠ•å½±åˆ°å¹³é¢ä¸Šåªæœ‰ä¸€ä¸ªå½±å­ï¼›è€Œä»æŠ•å½±å»çŒœæµ‹ç‰©ä½“ï¼Œç‰©ä½“å¯ä»¥æœ‰æ— é™ç§å½¢çŠ¶ã€‚ åŒæ ·åœ°ï¼Œç»è¿‡é™ç»´å‹ç¼©å˜æ¢åï¼Œèƒ½å¤Ÿå’Œä½ç»´çš„ v é‡å çš„ é«˜ç»´ x æœ‰æ— ç©·å¤šç§ã€‚ ä¾‹å¦‚ä¸‰ç»´â†’äºŒç»´ï¼Œ ç«‹ä½“è¢«å‹ç¼©æˆä¸€æ¡çº¿ï¼› ä¾‹å¦‚äºŒç»´â†’ä¸€ç»´ï¼Œä¸€æ¡çº¿è¢«å‹ç¼©æˆä¸€ä¸ªç‚¹ã€‚ éƒ½æ˜¯æ— ç©·å¤šè§£çš„æƒ…å†µã€‚ æé—®ï¼šå¢å¹¿çŸ©é˜µçš„ç§©ä¸ºnæ—¶ï¼Œä»€ä¹ˆæ—¶å€™æœ‰è§£ï¼Ÿ ç­”ï¼šå¢å¹¿çŸ©é˜µåœ¨nç»´åº¦ï¼Œ Aåœ¨n-1ç»´åº¦æ—¶æ— è§£ã€‚ åªæœ‰å½“å¢å¹¿å’ŒAéƒ½åœ¨nç»´åº¦æ—¶ æ‰æœ‰è§£ é½æ¬¡ ä¸€å®šæœ‰è§£ã€‚ n æ˜¯ æœªçŸ¥æ•°ä¸ªæ•°ã€‚ r(A) n ï¼Œ A å’Œ x åœ¨åŒä¸€ç»´åº¦ ï¼Œå› ä¸º v å‘é‡æ˜¯0ï¼Œx ä½œä¸º 0 å‘é‡ï¼Œç»è¿‡ä»»ä½•çº¿æ€§å˜æ¢éƒ½å’Œ v é‡å ã€‚ æ˜¯çš„ï¼Œåªæœ‰ä¸€ä¸ª å”¯ä¸€è§£ï¼Œé‚£å°±æ˜¯0å‘é‡ã€‚ r(A) n , A æ¯” x ç»´åº¦ä½ ï¼Œx æƒ³ä¸ 0å‘é‡ é‡å ï¼Œåªèƒ½é€šè¿‡çº¿æ€§å˜æ¢æ¥ â€œé™ç»´â€ï¼Œè¿™æ—¶æ˜¯æ— ç©·å¤šè§£ã€‚ è¿™æ— ç©·å¤šä¸ªè§£ä¸æ˜¯æ•´ä¸ªäºŒç»´å¹³é¢ï¼Œè€Œæ˜¯äºŒç»´å¹³é¢ä¸‰ç»´ç©ºé—´ä¸Šçš„ä¸€æ¡çº¿ï¼Œå«åšé›¶ç©ºé—´ã€‚ äºæ˜¯ä¸éš¾ç†è§£è¡Œåˆ—å¼ä¸º 0 æ—¶çš„æ„ä¹‰ï¼š è¡Œåˆ—å¼ä¸º0 æ—¶ï¼Œæ„å‘³ç€å˜æ¢å‰åçš„é¢ç§¯å€ç‡ä¸º0ï¼ˆå‹ç¼©åé¢ç§¯ä¸º0ï¼‰ï¼Œä¸€å®šæœ‰ç»´åº¦å˜åŒ–ã€‚ å¯¹çº¿æ€§æ–¹ç¨‹ç»„ï¼Œè¡¨ç°åœ¨é½æ¬¡ä¸Šå°±æ˜¯æ— ç©·å¤šè§£ï¼ˆçº¿æ€§å˜æ¢é™ç»´ï¼‰ï¼Œè¡¨ç°åœ¨éé½æ¬¡ä¸Šè¦ä¹ˆæ— è§£ï¼ˆv æ¯” A ç»´åº¦é«˜ï¼‰ï¼Œè¦ä¹ˆä¹Ÿæ— ç©·å¤šè§£(çº¿æ€§å˜æ¢é™ç»´)ã€‚ 6.ç§© (Rank)â€œç§©â€ä»£è¡¨ç€å˜æ¢åç©ºé—´çš„ç»´åº¦So the word â€œrankâ€ means the number of dimensions in the output of a transformation. åˆ—å‘é‡æ‰€å¼ æˆç©ºé—´çš„ç»´åº¦ï¼ˆåŸºå‘é‡ä¸ªæ•°ï¼‰ ä¸¾ä¾‹ï¼š æ¯”å¦‚è¯´å¯¹äº2x2çš„çŸ©é˜µï¼Œå®ƒçš„ç§©æœ€å¤§ä¸º2,æ„å‘³ç€åŸºå‘é‡ä»æ—§èƒ½å¼ æˆæ•´ä¸ªäºŒç»´ç©ºé—´ï¼Œå¹¶ä¸”çŸ©é˜µçš„è¡Œåˆ—å¼ä¸ä¸ºé›¶ ä½†æ˜¯å¯¹äº3x3çš„çŸ©é˜µï¼Œç§©ä¸º2æ„å‘³ç€ç©ºé—´è¢«å‹ç¼©äº†ï¼Œä½†æ˜¯å’Œç§©ä¸º1çš„æƒ…å†µç›¸æ¯”ï¼Œå‹ç¼©å¹¶ä¸æ˜¯é‚£ä¹ˆä¸¥é‡ã€‚ å¦‚æœä¸€ä¸ªä¸‰ç»´å˜æ¢çš„è¡Œåˆ—å¼ä¸ä¸ºé›¶ï¼Œå˜æ¢ç»“æœä»æ—§å……æ»¡æ•´ä¸ªä¸‰ç»´ç©ºé—´ï¼Œé‚£ä¹ˆå®ƒçš„ç§©ä»ä¸º3ã€‚ æ‰€ä»¥æ›´ç²¾ç¡®çš„ç§©çš„å®šä¹‰æ˜¯åˆ—ç©ºé—´çš„ç»´æ•°ã€‚ å½“è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œæ„å‘³ç€ç§©ä¸åˆ—æ•°ç›¸ç­‰ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ»¡ç§©â€ å¯¹ä¸€ä¸ªæ»¡ç§©å˜æ¢æ¥è¯´ï¼Œå”¯ä¸€èƒ½åœ¨å˜æ¢åè½åœ¨åŸç‚¹çš„å°±æ˜¯é›¶å‘é‡è‡ªèº«ã€‚ ä½†æ˜¯å¯¹ä¸€ä¸ªéæ»¡ç§©çš„çŸ©é˜µæ¥è¯´ï¼Œå®ƒå°†ç©ºé—´å‹ç¼©åˆ°ä¸€ä¸ªæ›´ä½çš„ç»´åº¦ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ä¼šæœ‰ä¸€ç³»åˆ—å‘é‡åœ¨å˜æ¢åæˆä¸ºé›¶å‘é‡ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä¸€ä¸ªäºŒç»´çº¿æ€§å˜æ¢ å°† éæ»¡ç§©ï¼ˆç§©ä¸º1ï¼Œä¸¤ä¸ªåŸºå‘é‡çº¿æ€§ç›¸å…³ï¼‰å¹³é¢å‹ç¼©åˆ°ä¸€æ¡ç›´çº¿ä¸Šï¼Œé‚£ä¹ˆæ²¿æŸä¸ªä¸åŒæ–¹å‘ç›´çº¿ä¸Šçš„æ‰€æœ‰å‘é‡å°±è¢«å‹ç¼©åˆ°åŸç‚¹ã€‚ å°±å¥½åƒæŸ±å­çš„ä¾§é¢ï¼ˆç›´çº¿ï¼‰ç»è¿‡çº¿æ€§å˜æ¢ï¼ˆæ—‹è½¬ï¼‰å˜æˆäº†ä¸€ä¸ªç‚¹ï¼ˆåº•é¢ï¼‰ã€‚ å¦‚æœä¸€ä¸ªä¸‰ç»´çº¿æ€§å˜æ¢å°†ç©ºé—´å‹ç¼©åˆ°ä¸€ä¸ªäºŒç»´å¹³é¢ä¸Šï¼ŒåŒæ ·ä¹Ÿä¼šæœ‰ä¸€æ•´æ¡çº¿ä¸Šçš„å‘é‡åœ¨å˜æ¢åè½åœ¨åŸç‚¹ã€‚ å‹ç¼©æˆäºŒç»´ç›´çº¿ä¹Ÿä¸€æ ·ã€‚ é›¶ç©ºé—´ï¼š å˜æ¢åè½åœ¨åŸç‚¹çš„å‘é‡çš„é›†åˆï¼Œè¢«ç§°ä¸ºçŸ©é˜µçš„â€œé›¶ç©ºé—´â€æˆ–â€œæ ¸ã€‚å˜æ¢åä¸€äº›å‘é‡è½åœ¨é›¶å‘é‡ä¸Šï¼Œè€Œâ€œé›¶ç©ºé—´â€æ­£æ˜¯è¿™äº›å‘é‡æ‰€æ„æˆçš„ç©ºé—´ æ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­é‚£ä¸€æ•´æ¡ç›´çº¿å°±æ˜¯é›¶ç©ºé—´ã€‚ åˆ—ç©ºé—´çš„æ¦‚å¿µè®©æˆ‘ä»¬æ¸…æ¥šä»€ä¹ˆæ—¶å€™å­˜åœ¨è§£ï¼Œé›¶ç©ºé—´çš„æ¦‚å¿µæœ‰åŠ©äºæˆ‘ä»¬ç†è§£æ‰€æœ‰å¯èƒ½çš„è§£çš„é›†åˆæ˜¯ä»€ä¹ˆæ ·çš„ã€‚ 7. éæ–¹é˜µçŸ©é˜µä¸¾ä¾‹åˆ†æ 3x2çŸ©é˜µï¼šæ˜¯ä¸€ä¸ªé¢ï¼Œä½†ä»ç„¶æ»¡ç§©ã€‚å‡ ä½•æ„ä¹‰æ˜¯å°†ä¸€ä¸ªäºŒç»´ç©ºé—´æ˜ å°„åˆ°ä¸‰ç»´ç©ºé—´ä¸Šã€‚ äºŒç»´ç©ºé—´è¾“å…¥ ï¼Œä¸‰ç»´ç©ºé—´è¾“å‡ºã€‚ çŸ©é˜µæœ‰ä¸¤åˆ—è¡¨æ˜è¾“å…¥ç©ºé—´æœ‰ä¸¤ä¸ªåŸºå‘é‡ï¼Œæœ‰ä¸‰è¡Œè¡¨æ˜æ¯ä¸€ä¸ªåŸºå‘é‡åœ¨å˜æ¢åéƒ½ç”¨ä¸‰ä¸ªç‹¬ç«‹çš„åæ ‡æ¥æè¿°ã€‚ 2x3çŸ©é˜µï¼š ä¸‰ç»´ç©ºé—´è¾“å…¥ ï¼ŒäºŒç»´ç©ºé—´è¾“å‡ºã€‚ å‡ ä¸ªåŸºå‘é‡è¯´æ˜ç©ºé—´æ˜¯å‡ ç»´ï¼›æœ‰ä¸¤è¡Œè¡¨æ˜è¿™ä¸‰ä¸ªåŸºå‘é‡åœ¨å˜æ¢åéƒ½ä»…ç”¨ä¸¤ä¸ªåæ ‡æ¥æè¿°ï¼Œæ‰€ä»¥ä»–ä»¬ä¸€å®šè½åœ¨äºŒç»´ç©ºé—´ä¸­ã€‚ è§£çº¿æ€§æ–¹ç¨‹ 3Ã—2çŸ©é˜µè§£çº¿æ€§æ–¹ç¨‹ï¼š3ä¸ªæ–¹ç¨‹å¼ï¼Œ2ä¸ªæœªçŸ¥æ•°ï¼Œå°†äºŒç»´ç©ºé—´æŠ•å°„åˆ°ä¸‰ç»´ç©ºé—´ï¼Œè¦ä¹ˆæ— è§£ï¼Œè¦ä¹ˆä¸€ä¸ªè§£ 2Ã—3çŸ©é˜µè§£çº¿æ€§æ–¹ç¨‹ï¼š2ä¸ªæ–¹ç¨‹å¼ï¼Œ3ä¸ªæœªçŸ¥æ•°ï¼Œå°†ä¸‰ç»´ç©ºé—´å‹ç¼©æˆäºŒç»´ç©ºé—´ï¼Œè¦ä¹ˆæ— è§£ï¼Œè¦ä¹ˆæ— ç©·å¤šè§£ 8.ç‚¹ä¹˜å’Œçº¿æ€§å˜æ¢ï¼ˆç›¸å½“åŠ²çˆ†ï¼‰ç‚¹ä¹˜æ ‡å‡†å½¢å¼ï¼š$$\\left[\\begin{matrix}a \\b\\end{matrix}\\right]\\cdot\\left[\\begin{matrix}c \\ d\\end{matrix}\\right](a\\cdot c)+(b\\cdot d)$$ç‚¹ä¹˜å‡ ä½•å½¢å¼ï¼š äºŒç»´åæ ‡ç³»é‡Œè¿›è¡Œæ¼”ç®—å¯çŸ¥ï¼Œç‚¹ä¹˜å°±æ˜¯å…¶ä¸­ä¸€ä¸ªå‘é‡åœ¨å¦ä¸€ä¸ªå‘é‡ä¸Šçš„æŠ•å½±é•¿åº¦ï¼Œä¹˜ä»¥è¢«æŠ•å½±å‘é‡é•¿åº¦çš„æˆç»©ã€‚ è¿™ä¸€ç« çš„æ€æƒ³è·¨åº¦è¾ƒå¤§ï¼ˆå¯ä»¥è¯´å¾ˆæƒŠäººã€å¾ˆéœ‡æ’¼ä¸”å¯Œæœ‰ç¾æ„Ÿï¼‰ï¼Œå¯ä»¥é…åˆ3b1bçš„å›¾å½¢åŒ–è§†é¢‘é£Ÿç”¨ã€‚ è¿™é‡Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œç”¨ä¸€ä¸ªå‘é‡ç‚¹ä¹˜å¦ä¸€ä¸ªå‘é‡ï¼Œå®è´¨ä¸Šæ˜¯åšäº†ä¸€ä¸ªçº¿æ€§å˜æ¢ã€‚ ç‚¹ç§¯å¯ä»¥çœ‹ä½œæ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•çš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œæ˜¯æŠ•å½±åˆ°ä¸€ç»´çš„çº¿æ€§å˜æ¢ã€‚ æ‰€ä»¥çŸ©é˜µå‘é‡ä¹˜æ³•çš„æœ¬è´¨æ˜¯çº¿æ€§å˜æ¢ã€‚ çº¿æ€§å˜æ¢çš„â€œç‰©è´¨è½½ä½“â€œ ï¼Œåˆ™æ˜¯å…¶ä¸­ä¸€ä¸ªå‘é‡æ‰®æ¼”çš„ã€‚ è€ƒè™‘ä¸€ä¸ªé—®é¢˜ ä¸ºä»€ä¹ˆç‚¹ä¹˜çš„è¿ç®—è¿‡ç¨‹ï¼šå¯¹åº”åæ ‡ç›¸ä¹˜å¹¶å°†ç»“æœç›¸åŠ ï¼Œå’ŒæŠ•å½±æœ‰æ‰€è”ç³»ï¼Ÿ è®©æˆ‘ä»¬è¯•ç€è¯æ˜ä¸€ä¸‹ï¼š è¿˜æ˜¯è€æ ·å­ï¼Œ å‰æï¼šç­‰è·åˆ†å¸ƒçš„ç‚¹ä¿æŒç­‰è·åˆ†å¸ƒï¼Œä»è€Œä¸ºæˆ‘ä»¬ä¿è¯çº¿æ€§å˜æ¢çš„åŸºç¡€ã€‚ å¦åˆ™çº¿æ€§å˜æ¢ï¼Œæˆ–è€…è¯´é«˜ç»´å‘é‡åœ¨ä¸€ç»´ç©ºé—´ï¼ˆæ•°è½´ï¼‰ä¸Šçš„æŠ•å½±å°±ä¸æ˜¯çº¿æ€§çš„ï¼Œè€Œæ˜¯ç¦»æ•£çš„ã€‚ è§†è§’ï¼šè¿™äº›çº¿æ€§å˜æ¢å®Œå…¨ç”±å®ƒå¯¹iå¸½å’Œjå¸½çš„å˜æ¢å†³å®šï¼Œæ‰€ä»¥åªå…³æ³¨iå¸½ã€jå¸½ã€‚ ç”± iå¸½ å’Œ jå¸½ çš„å˜æ¢ï¼Œå¯ä»¥æ¨å‡ºäºŒç»´å‘é‡çš„å˜æ¢ã€‚è¿™ä¹Ÿæ˜¯ä»¥å‰å¯¹çº¿æ€§å˜æ¢çš„åˆ†ææ–¹æ³•ï¼Œä¸æ‹˜æ³¥äºè¿‡ç¨‹ï¼Œç”±åŸºå‘é‡æ¨å…¶ä»–å‘é‡ã€‚ ï¼ˆuçš„åæ ‡ä½“ç°çš„æ˜¯i,jå‘é‡çš„å˜åŒ–ï¼Œè€Œi,jå‘é‡å°±å¯ä»¥åæ˜ å…¶ä½™çš„æ”¹å˜ï¼‰ ä¸ºä»€ä¹ˆè¦æ‰¾i-hatå’Œj-hatæŠ•å½±åœ¨æ–œæ•°è½´ä¸Šï¼Ÿå› ä¸ºä¸€å¼€å§‹é‚£ä¸ªæŠŠäºŒç»´å˜ä¸€ç»´çš„å‡½æ•°ä½œçš„å˜æ¢å°±æ˜¯æŠ•å½±ï¼Œè€ŒæŠ•å½±åçš„i-hatå’Œj-hatçš„ä½ç½®è¡¨ç¤ºè¿™ç§æŠ•å½±å˜æ¢ã€‚ i-hat å’Œ j-hat çš„å˜æ¢åˆ™ä»£è¡¨äº†å¯¹åº”çš„æ‰€æœ‰åˆ—ç©ºé—´å‘é‡çš„å˜æ¢ã€‚ å®šä¹‰ä¸€ä¸ªä»äºŒç»´å‘é‡åˆ°æ•°çš„çº¿æ€§å˜æ¢ï¼Œæ‰¾åˆ°æè¿°è¿™ä¸ªå˜æ¢çš„1x2çŸ©é˜µ Projection matrix æŠ•å½±çŸ©é˜µ Transformation matrix å˜æ¢çŸ©é˜µã€‚ æ‰€ä»¥æè¿°æŠ•å½±å˜æ¢çš„1x2çŸ©é˜µçš„ä¸¤åˆ—ï¼Œä¹Ÿå°±æ˜¯ i-hatå’Œj-hatåœ¨æ–œæ•°è½´ä¸Šçš„æŠ•å½±çš„å€¼ï¼Œæ ¹æ®å¯¹ç§°æ€§ï¼Œæ­£å¥½åˆ†åˆ«æ˜¯æ–œæ•°è½´u-hatçš„ç‚¹çš„æ¨ªçºµåæ ‡ ux , uy ã€‚ å› æ­¤ç©ºé—´ä¸­ä»»æ„å‘é‡ç»è¿‡æŠ•å½±å˜æ¢çš„ç»“æœï¼Œä¹Ÿå°±æ˜¯æŠ•å½±çŸ©é˜µä¸è¿™ä¸ªå‘é‡ç›¸ä¹˜ã€‚ ä¹Ÿå°±æ˜¯æŠ•å½±çŸ©é˜µ[ux , uy]ä¸è¿™ä¸ªå‘é‡[i-hat, j-hat]ç›¸ä¹˜ è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªäºŒç»´å‘é‡vå’Œå¦ä¸€ä¸ª1x2çš„çŸ©é˜µA ç›¸ä¹˜æ—¶ï¼Œè¿™å’ŒåŸºå‘é‡ä¸uå¸½çš„ç‚¹ç§¯åœ¨è®¡ç®—ä¸Šå®Œå…¨ç›¸åŒã€‚ é€‰æ‹©uå¸½é•¿åº¦ä¸º1å¹¶ä¸”è½åœ¨ä¸€ç»´æ•°è½´ä¸Šï¼Œä¸»è¦æ˜¯ä¸ºäº†ä½“ç°åç»­uå¸½å’Œiå¸½ã€jå¸½ç›¸äº’æ˜ å°„çš„å¯¹å¶æ€§ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸å•ä½å‘é‡çš„ç‚¹ç§¯å¯ä»¥è§£è¯»ä¸ºå°†å‘é‡ v æŠ•å½±åˆ°æŠ•å½±çŸ©é˜µä»£è¡¨çš„å•ä½å‘é‡ u æ‰€åœ¨çš„ç›´çº¿ä¸Šæ‰€å¾—åˆ°çš„æŠ•å½±é•¿åº¦ã€‚ ç‚¹ç§¯æ˜¯ä¸€ç§å°†äºŒç»´å‘é‡æŠ•å½±ï¼ˆé™ç»´ï¼‰æˆä¸€ç»´å‘é‡ï¼ˆæ•°è½´ï¼‰çš„çº¿æ€§å˜æ¢ã€‚ ï¼ˆé«˜ç»´å‘é‡åœ¨ä¸€ç»´çš„æŠ•å½±ï¼‰ çŸ©é˜µå‘é‡ç›¸ä¹˜ Matrix-vector product ç‚¹ç§¯ Dot product$$\\left[\\begin{matrix}u_x u_y \\end{matrix}\\right]\\left[\\begin{matrix}x \\y \\\\end{matrix}\\right]u_x \\cdot x+u_y \\cdot y$$â†‘ç­‰ä»·â†“$$\\left[\\begin{matrix}u_x \\u_y \\end{matrix}\\right]\\left[\\begin{matrix}x \\y \\\\end{matrix}\\right]u_x \\cdot x+u_y \\cdot y$$ ä½ åœ¨ä»»ä½•æ—¶å€™çœ‹åˆ°ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå®ƒçš„è¾“å‡ºç©ºé—´æ˜¯ä¸€ç»´æ•°è½´ã€‚æ— è®ºå®ƒæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œç©ºé—´ä¸­ä¼šå­˜åœ¨å”¯ä¸€çš„å‘é‡vä¸ä¹‹ç›¸å…³ï¼Œå°±è¿™ä¸€æ„ä¹‰è€Œè¨€ï¼Œåº”ç”¨çº¿æ€§å˜æ¢å’Œä¸å‘é‡våšç‚¹ç§¯æ˜¯ä¸€æ ·çš„ã€‚ å®ƒæ˜¯æ•°å­¦ä¸­â€œå¯¹å¶æ€§â€çš„ä¸€ä¸ªå®ä¾‹ã€‚ ä½ å¯ä»¥è¯´ä¸€ä¸ªå‘é‡çš„å¯¹å¶æ˜¯ç”±å®ƒå®šä¹‰çš„çº¿æ€§å˜æ¢ï¼› ä¸€ä¸ªå¤šç»´ç©ºé—´åˆ°ä¸€ç»´ç©ºé—´çš„çº¿æ€§å˜æ¢çš„å¯¹å¶æ˜¯å¤šç»´ç©ºé—´ä¸­çš„æŸä¸ªç‰¹å®šå‘é‡ ä¸¤ä¸ªå‘é‡ç‚¹ä¹˜ï¼Œå°±æ˜¯å°†å…¶ä¸­ä¸€ä¸ªå‘é‡è½¬åŒ–ä¸ºçº¿æ€§å˜æ¢ æœ‰æ—¶ä½ å°±ä¼šæ„è¯†åˆ°ï¼Œä¸æŠŠå‘é‡çœ‹ä½œç©ºé—´ä¸­çš„ç®­å¤´ï¼Œè€ŒæŠŠå®ƒçœ‹ä½œçº¿æ€§å˜æ¢çš„ç‰©è´¨è½½ä½“ï¼Œä¼šæ›´å®¹æ˜“ç†è§£å‘é‡ å‘é‡å°±ä»¿ä½›æ˜¯ä¸€ä¸ªç‰¹å®šå˜æ¢çš„æ¦‚å¿µæ€§è®°å·ã€‚å› ä¸ºå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæƒ³è±¡ç©ºé—´ä¸­çš„å‘é‡æ¯”æƒ³è±¡æ•´ä¸ªç©ºé—´ç§»åŠ¨åˆ°æ•°è½´ä¸Šæ›´åŠ å®¹æ˜“ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š$$\\vec{x}\\times\\vec{v}\\left[\\begin{matrix}1 \\ -2 \\\\end{matrix}\\right]\\left[\\begin{matrix}4 \\ 3 \\\\end{matrix}\\right]\\left[\\begin{matrix}1 -2 \\end{matrix}\\right]\\left[\\begin{matrix}4 \\ 3 \\\\end{matrix}\\right]4\\times1+3\\times(-2)$$å°†åˆ—å‘é‡ [1 -2] â€œæ¨ªè¿‡æ¥â€œ çœ‹ä½œæ˜¯çº¿æ€§å˜æ¢çŸ©é˜µï¼ˆTransformation matrixï¼‰ï¼Œæ­¤æ—¶ï¼Œå‘é‡ v çš„åŸºå‘é‡ i-hat å’Œ j-hat ç”±é»˜è®¤çš„[1,0] ,[0 1] ç»è¿‡çº¿æ€§å˜æ¢ (ä¹˜å˜æ¢çŸ©é˜µ) å˜æˆäº† [1 0],[0 -2] ã€‚ è¿™ä¸ªçº¿æ€§å˜æ¢çš„æ•ˆæœï¼Œå®é™…ä¸Šæ˜¯â€œé™ç»´â€ï¼Œå°†ä¸¤ä¸ªäºŒç»´åŸºå‘é‡å‹ç¼©æˆä¸€æ¡çº¿ï¼ˆæ•°è½´ï¼‰äº†ï¼Œç”¨ç‚¹æ¥è¡¨ç¤ºï¼Œä¸€ä¸ªæŒ‡å‘+1 , ä¸€ä¸ªæŒ‡å‘-2ã€‚ [4,3]è¿™ä¸ªå‘é‡è·ŸéšåŸºå‘é‡ä¸€èµ·çº¿æ€§å˜æ¢ï¼ˆé™ç»´ï¼‰ï¼Œå˜æˆäº†æŒ‡å‘-2çš„å‘é‡ã€‚ 4*(+1 0) è¡¨ç¤º i-hat é•¿åº¦å˜æˆ4å€ï¼Œ 3 *(0 -2)è¡¨ç¤º j-hat é•¿åº¦å˜ 3 å€ï¼Œå åŠ åœ¨ä¸€èµ·å°±æ˜¯ - 2 ã€‚ å½“ä½ å®Œå…¨ä»æ•°å€¼è§’åº¦è¿›è¡Œè®¡ç®—æ—¶ï¼Œå®ƒå°±æ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•ï¼Œè€Œç‚¹ç§¯å¯ä»¥çœ‹ä½œæ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚ ä½†ä»å‡ ä½•è§’åº¦å‡ºå‘ï¼Œå‘é‡[1 -2]è½¬åŒ–ä¸ºçº¿æ€§å˜æ¢çš„è½½ä½“ï¼Œä½¿å¦ä¸€ä¸ªå‘é‡[4 3]çš„åŸºå‘é‡å˜æ¢äº†ï¼Œäºæ˜¯ å‘é‡[4 3]çš„åŸºå‘é‡çº¿æ€§å˜æ¢åè¿›è¡Œæ”¾ç¼©ï¼ˆä¹˜ä»¥å¯¹åº”å€ç‡ï¼‰ï¼Œå¾—åˆ°çš„æ–°å‘é‡ï¼Œæ•°å€¼ç»“æœå’Œå‘é‡ä¹˜æ³•ä¸€æ ·ã€‚ 9.å‰ä¹˜å‰ä¹˜æ ‡å‡†å½¢å¼ï¼š$$\\left[\\begin{matrix}a\\b\\\\end{matrix}\\right]\\times\\left[\\begin{matrix}c \\ d \\\\end{matrix}\\right](a\\times d)-(b\\times c)$$ $$\\vec{a}\\times\\vec{b}\\left[\\begin{matrix}a1 \\ a2 \\ a3\\end{matrix}\\right]\\times\\left[\\begin{matrix}b1 \\ b2\\b3\\end{matrix}\\right]\\left|\\begin{matrix}\\widehat{i} \\widehat{j} \\widehat{k}\\ a1 a2 a3\\ b1 b2 b3\\end{matrix}\\right|$$ i çš„ä½™å­å¼ + j çš„ä½™å­å¼ + k çš„ä½™å­å¼ å‰ä¹˜å‡ ä½•æ„ä¹‰ï¼š a1b1ä¸¤ä¸ªå‘é‡åˆ†åˆ«å¹³ç§»ç›¸äº¤æˆ a2b2ï¼Œå››ä¸ªå‘é‡a1a2b1b2å›´æˆçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯å°±æ˜¯å‰ä¹˜çš„ç»å¯¹å€¼ã€‚ æ­£è´Ÿæ€§ï¼ˆå®šå‘é—®é¢˜ï¼‰ï¼šä»¥a * bä¸ºä¾‹ã€‚å¦‚æœåœ¨äºŒç»´å¹³é¢ä¸Šï¼Œa åœ¨ b å³è¾¹ï¼ˆbéœ€è¦ç»è¿‡å³æ—‹è½¬åˆ°aï¼‰ï¼Œé‚£ä¹ˆa*bå°±æ˜¯æ­£å€¼ã€‚ å¦‚æœa åœ¨ b å·¦è¾¹ï¼ˆbéœ€è¦ç»è¿‡å·¦æ—‹è½¬åˆ°aï¼‰ï¼Œé‚£ä¹ˆa*bå°±æ˜¯è´Ÿå€¼ã€‚ æ³¨æ„ï¼šè¿™æ˜¯è¯´é¡ºåºå¯¹å‰ä¹˜æœ‰å½±å“ã€‚ å‡ ä½•è§’åº¦è§‚å¯Ÿå®šå‘ï¼š i-hat åœ¨ j-hat å³è¾¹ï¼Œi * j = +1 ã€‚é‚£ä¹ˆ a åœ¨ b å³è¾¹ï¼Œa * b = + åŸºå‘é‡çš„é¡ºåºå°±æ˜¯å®šå‘çš„åŸºç¡€ è¡Œåˆ—å¼çš„é¢ç§¯å’Œå‰ä¹˜æœ‰å¾ˆå¤§å…³ç³»ã€‚$$\\left[\\begin{matrix}a\\b\\\\end{matrix}\\right]\\times\\left[\\begin{matrix}c \\ d \\\\end{matrix}\\right]\\left|\\begin{matrix}a c\\ b d\\end{matrix}\\right|(a\\times d)-(b\\times c)$$ a,bä¸¤ä¸ªå‘é‡ç›¸ä¹˜ ï¼Œä½ åªéœ€è¦å°† aå‘é‡ä½œä¸ºè¡Œåˆ—å¼ç¬¬ä¸€åˆ—ï¼Œbå‘é‡ä½œä¸ºè¡Œåˆ—å¼ç¬¬äºŒåˆ—ï¼Œç„¶åç›´æ¥è®¡ç®—è¡Œåˆ—å¼ã€‚ æ‰€ä»¥ï¼š è¿™é‡Œå¯ä»¥ä¸€ä¸ªè§£é‡Šè¡Œåˆ—å¼æ€§è´¨ï¼šäº¤æ¢ä»»æ„ä¸¤è¡Œï¼Œè¡Œåˆ—å¼æ­£è´Ÿæ€§æ”¹å˜ã€‚ å‡ ä½•ä¸Šï¼Œä¸¤ä¸ªå‘é‡å‰ä¹˜äº¤æ¢é¡ºåºäº†ï¼Œå®šå‘æ”¹å˜äº†ï¼Œå‘é‡çš„åŸºæ”¹å˜äº†ï¼Œè¡Œåˆ—å¼ä¸ºè´Ÿä¸æ˜¯å¾ˆè‡ªç„¶çš„å—ï¼Ÿ ä½ å¯èƒ½æ³¨æ„åˆ°ä¸€ç‚¹ï¼Œ**å½“ä¸¤ä¸ªå‘é‡æ¥è¿‘å‚ç›´æ—¶ï¼Œä»–ä»¬çš„å‰ç§¯æœ€å¤§ã€‚**å› ä¸ºæ­¤æ—¶æ„æˆçš„å¹³è¡Œå››è¾¹å½¢é¢ç§¯æœ€å¤§ã€‚ æ”¾å¤§å…¶ä¸­ä¸€ä¸ªå‘é‡3å€ï¼Œé‚£ä¹ˆå‰ä¹˜ä¹Ÿå¢å¤§3å€ã€‚ä»é¢ç§¯ä¸Šç†è§£ä¹Ÿå¾ˆè‡ªç„¶ã€‚ æ ¹æ®ä¸Šé¢çš„äºŒç»´å‘é‡å‰ä¹˜ï¼Œå¦‚æœè®©æˆ‘ä»¬çŒœæµ‹ä¸‰ç»´å‘é‡çš„å‰ä¹˜ï¼Œå¤§æ¦‚æ˜¯ï¼š$$\\left[\\begin{matrix}u_1 \\ v_1 \\ w_1\\end{matrix}\\right] \\times \\left[\\begin{matrix}u_2\\ v_2 \\ w_2\\end{matrix}\\right] \\times \\left[\\begin{matrix}u_3 \\v_3 \\ w_3\\end{matrix}\\right] \\left|\\begin{matrix}u_1 u_2 u_3\\ v_1 v_2 v_2\\w_1 w_2 w_3\\end{matrix}\\right|(è¿™é‡Œæ˜¯é”™è¯¯çš„çŒœæƒ³)$$è¾“å…¥ä¸‰ä¸ªå‘é‡ï¼Œè¾“å‡ºä¸€ä¸ªè¡Œåˆ—å¼ï¼ˆæ•°å€¼ï¼‰ï¼Œè¿™ä¸ªè¡Œåˆ—å¼çš„æ•°å€¼æ˜¯ä¸‰ç»´ç©ºé—´é‡Œï¼Œä¸‰ä¸ªå‘é‡ç»„æˆçš„ä½“ç§¯ã€‚ è™½ç„¶è¿™ä¹ˆæƒ³å¾ˆè‡ªç„¶ï¼Œå´åˆè¿˜ä¸æ˜¯çœŸæ­£çš„å‰ç§¯ï¼Œä½†å·²ç»å¾ˆæ¥è¿‘äº†ã€‚ çœŸæ­£çš„å‰ç§¯æ˜¯é€šè¿‡ä¸¤ä¸ªä¸‰ç»´å‘é‡ç”Ÿæˆä¸€ä¸ªæ–°çš„ä¸‰ç»´å‘é‡ã€‚ å‰ç§¯çš„ç»“æœä¸æ˜¯ä¸€ä¸ªæ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªå‘é‡ã€‚å¾ˆå¥‡æ€ªå§ï¼Ÿ è¿™ä¸ªå‘é‡çš„é•¿åº¦å°±æ˜¯å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼Œè€Œè¿™ä¸ªå‘é‡çš„æ–¹å‘ä¸å¹³è¡Œå››è¾¹å½¢(æ‰€åœ¨çš„é¢)å‚ç›´ã€‚ å‚ç›´æ–¹å‘æœ‰ä¸¤ä¸ªï¼Œè‡³äºæ˜¯å“ªä¸€ä¸ªï¼Œè¦é â€œå³æ‰‹å®šåˆ™â€ï¼š é£ŸæŒ‡æŒ‡å‘iå¸½çš„æ–¹å‘ï¼› ä¼¸å‡ºä¸­æŒ‡æŒ‡å‘jå¸½çš„æ–¹å‘ï¼› å½“ä½ æŠŠå¤§æ‹‡æŒ‡ç«–èµ·æ¥æ—¶ï¼Œå®ƒå°±æ­£å¥½æŒ‡å‘kå¸½çš„æ–¹å‘ã€‚ æ³¨æ„ï¼šç¬¬4èŠ‚è¡Œåˆ—å¼ä¹Ÿå‡ºç°äº†å³æ‰‹å®šåˆ™ã€‚ è¿™é‡Œè¦è¯æ˜ä¸€ä»¶äº‹ï¼šä¸ºä»€ä¹ˆå‰ç§¯ç”Ÿæˆçš„æ–°ä¸‰ç»´å‘é‡æœ‰è¿™ä¸ªæ€§è´¨ï¼Ÿ æ€è·¯ä¸€ï¼šç›´æ¥æ•°å€¼è¿ç®— å¾ˆç›´æ¥å¾ˆæš´åŠ›ï¼Œä¹Ÿå¾ˆéº»çƒ¦ã€‚è¿™ä¸æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„ã€‚ æ€è·¯äºŒï¼šå‡ ä½•æ€è·¯ å‰æï¼šå¯¹å¶æ€§æ€æƒ³â€”â€”ä¸Šä¸€èŠ‚ç‚¹ä¹˜ç”¨åˆ°çš„æ€æƒ³ã€‚ æ¯å½“ä½ çœ‹åˆ°ä¸€ä¸ª(å¤šç»´)ç©ºé—´åˆ°æ•°è½´çš„çº¿æ€§å˜æ¢æ—¶ï¼Œå®ƒéƒ½ä¸ç©ºé—´ä¸­çš„å”¯ä¸€ä¸ªå‘é‡å¯¹åº”ï¼Œä¹Ÿå°±æ˜¯è¯´åº”ç”¨çº¿æ€§å˜æ¢å’Œä¸è¿™ä¸ªå‘é‡ç‚¹ä¹˜ç­‰ä»·ï¼Œæ•°å€¼ä¸Šè¯´ï¼Œè¿™æ˜¯å› ä¸ºè¿™ç±»çº¿æ€§å˜æ¢å¯ä»¥ç”¨ä¸€ä¸ªåªæœ‰ä¸€è¡Œçš„çŸ©é˜µæè¿°ï¼Œè€Œå®ƒçš„æ¯ä¸€åˆ—ç»™å‡ºäº†å˜æ¢ååŸºå‘é‡çš„ä½ç½®ã€‚ è¿™é‡Œçš„æ”¶è·åœ¨äºï¼Œæ¯å½“ä½ çœ‹åˆ°ä¸€ä¸ªä»ç©ºé—´åˆ°æ•°è½´çš„çº¿æ€§å˜æ¢ï¼Œä½ éƒ½èƒ½å¤Ÿæ‰¾åˆ°ä¸€ä¸ªå‘é‡ï¼Œè¢«ç§°ä¸ºè¿™ä¸ªå˜æ¢çš„å¯¹å¶å‘é‡ï¼ˆdual vectorï¼‰ï¼Œä½¿å¾—åº”ç”¨çº¿æ€§å˜æ¢å’Œä¸å¯¹å¶å‘é‡ç‚¹ä¹˜ç­‰ä»·ã€‚ å‰ç§¯çš„è¿ç®—åŒæ ·ä½“ç°äº†å¯¹å¶æ€§æ€æƒ³ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†åˆšåˆšä¸Šé¢çš„çŒœæƒ³å‰ç§¯çš„ç¬¬ä¸€ä¸ªå‘é‡uçœ‹ä½œå¯å˜å‘é‡ï¼Œæ¯”å¦‚(x,y,z)ï¼Œè€Œvå’Œwä¿æŒä¸å˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æœ‰ä¸€ä¸ªä»ä¸‰ç»´ç©ºé—´åˆ°æ•°è½´çš„å‡½æ•°äº†ã€‚ è¿™ä¸ªå‡½æ•°æ ¹æ®vå’Œwæ¥å®šä¹‰ï¼ˆå› å˜é‡ï¼‰ï¼Œè¾“å…¥(x,y,z)ï¼ˆè‡ªå˜é‡ï¼‰äº§ç”Ÿè¡Œåˆ—å¼ï¼ˆç»“æœï¼‰ã€‚ ä½ è¾“å…¥ä¸€ä¸ªå‘é‡(x,y,z)ï¼Œç„¶åé€šè¿‡çŸ©é˜µçš„è¡Œåˆ—å¼å¾—åˆ°ä¸€ä¸ªæ•°ï¼Œè¿™ä¸ªå‘é‡çš„ç¬¬ä¸€åˆ—æ˜¯(x, y,z)ï¼Œå…¶ä½™ä¸¤åˆ—æ˜¯å¸¸å‘é‡vå’Œwçš„åæ ‡ã€‚ $$f\\left(\\left[\\begin{matrix}x \\ y \\ z\\end{matrix}\\right]\\right)det\\left(\\left[\\begin{matrix}x v_1 w_1 \\y v_2 w_2 \\z v_3 w_3\\end{matrix}\\right]\\right)$$ $$å˜é‡variable\\vec{u}\\left[\\begin{matrix}x \\ y \\ z\\end{matrix}\\right] \\vec{v} \\left[\\begin{matrix}v_1 \\ v_2 \\ v_3\\end{matrix}\\right] \\vec{w} \\left[\\begin{matrix}w_1 \\ w_2 \\ w_3\\end{matrix}\\right]$$ è¿™é‡Œå°†å‘é‡å†™ä½œçŸ©é˜µçš„åˆ—ï¼Œè€Œæ•™ç§‘ä¹¦ä¸­å¤§å¤šå°†å‘é‡å†™ä½œçŸ©é˜µçš„è¡Œã€‚ä¸¤ç§ç»“æœæ²¡æœ‰å·®å¼‚ï¼Œå› ä¸ºè½¬ç½®ä¸æ”¹å˜è¡Œåˆ—å¼çš„å€¼ã€‚è¿™é‡Œé€‰æ‹©æŒ‰åˆ—å¤„ç†å‘é‡æ˜¯ä¸ºäº†æ›´åŠ ç›´è§‚ã€‚ è¿™ä¸ªå‡½æ•°çš„å‡ ä½•æ„ä¹‰æ˜¯ï¼Œå¯¹äºä»»ä¸€è¾“å…¥çš„å‘é‡(x, y,z), è€ƒè™‘ç”±å®ƒå’Œvä¸wç¡®å®šçš„å¹³è¡Œå…­é¢ä½“,å¾—åˆ°å®ƒçš„ä½“ç§¯ï¼Œç„¶åæ ¹æ®å®šå‘ç¡®å®šç¬¦å·ã€‚ è¿™ä¸ªå‡½æ•°æ˜¯çº¿æ€§çš„ï¼Œç”±è¡Œåˆ—å¼æ€§è´¨å¯çŸ¥ï¼š è¡Œåˆ—å¼å°±æ˜¯ä¸‰ä¸ªå‘é‡æ‰€å¤¹çš„å¹³è¡Œå…­é¢ä½“çš„ä½“ç§¯ã€‚è¿™ä¸ªå¹³è¡Œå…­é¢ä½“çš„åº•é¢ç§¯æ˜¯å®šä¸‹æ¥çš„ï¼Œæ‰€ä»¥å¦‚æœé«˜æ˜¯çº¿æ€§çš„ä½“ç§¯å°±æ˜¯çº¿æ€§çš„ã€‚ ä¸€æ—¦çŸ¥é“å®ƒæ˜¯çº¿æ€§çš„ï¼Œä½ å°±çŸ¥é“å¯ä»¥é€šè¿‡çŸ©é˜µä¹˜æ³•æ¥æè¿°è¿™ä¸ªå‡½æ•°ã€‚ å³è¿™ä¸ªå‡½æ•°ä»ä¸‰ç»´ç©ºé—´åˆ°ä¸€ç»´ç©ºé—´çš„æ¯ä¸ªçº¿æ€§å˜æ¢ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ª1x3çŸ©é˜µæ¥ä»£è¡¨è¿™ä¸ªå˜æ¢ã€‚ å¯¹å¶æ€§å‘Šè¯‰æˆ‘ä»¬ï¼Œä½ å¯ä»¥å°†è¿™ä¸ª1*3çŸ©é˜µç«‹èµ·æ¥ï¼Œå¹¶ä¸”å°†æ•´ä¸ªå˜æ¢çœ‹ä½œä¸è¿™ä¸ªç‰¹å®šå‘é‡çš„ç‚¹ç§¯ã€‚ $$\\overbrace{\\left[\\begin{matrix}? \\ ? \\ ?\\end{matrix}\\right]}^{ç¥ç§˜1\\times3çŸ©é˜µ} \\left[\\begin{matrix}x \\ y \\ z\\end{matrix}\\right] \\overbrace{\\left[\\begin{matrix}p_1 \\ p_2 \\ p_3\\end{matrix}\\right]}^{è¿™æ˜¯\\vec{p}} \\left[\\begin{matrix}x \\ y \\ z\\end{matrix}\\right] det\\left(\\left[\\begin{matrix}x v_1 w_1 \\y v_2 w_2 \\z v_3 w_3\\end{matrix}\\right]\\right)$$ æˆ‘ä»¬è¦æ‰¾çš„å°±æ˜¯è¿™ä¸ªç‰¹æ®Šçš„ä¸‰ç»´å‘é‡â€”â€”æˆ‘ç§°ä¹‹ä¸ºpå‘é‡ã€‚ç”±ä¸Šå¼å¯çŸ¥ï¼Œpä¸å…¶ä»–ä»»ä¸€å‘é‡(x,y,z)çš„ç‚¹ç§¯ç­‰äºä¸€ä¸ª3x3çŸ©é˜µçš„è¡Œåˆ—å¼ã€‚ å¯¹äºè¿™ä¸ªå¼å­ï¼Œæœ‰ä¸¤ç§ç†è§£è§’åº¦ï¼šè®¡ç®—å’Œå‡ ä½• è®¡ç®— ä¸Šå¼ç»è¿‡ç‚¹ä¹˜ï¼š$$p1\\cdot x+p2\\cdot y+p3\\cdot z\\begin{matrix}x(v2\\cdot w3-v3\\cdot w2)+ \\y(v3\\cdot w1-v1\\cdot w3)+ \\z(v1\\cdot w2-v2\\cdot w1)\\end{matrix}$$æ‰€ä»¥å¾ˆæ˜æ˜¾å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬è¦æ‰¾çš„ på‘é‡ çš„å€¼å°±è—åœ¨å³è¾¹çš„vå’Œwåæ ‡çš„çº¿æ€§ç»„åˆä¸­ã€‚$$\\vec{p}\\left[\\begin{matrix}p1 \\ p2 \\ p3\\end{matrix}\\right]\\begin{cases}p1 v2\\cdot w3-v3\\cdot w2 \\p2v3\\cdot w1-v1\\cdot w3 \\p3v1\\cdot w2-v2\\cdot w1\\end{cases}$$ ç‚¹ç§¯æœ¬æ˜¯ä¸Šæ˜¯æ›¿æ¢æ‰äº†åŸæœ‰çš„åŸºå‘é‡ï¼Œè€Œå‰ç§¯çš„è¡Œåˆ—å¼å®šä¹‰ä¸­æœ‰ä¸‰ä¸ªåŸºå‘é‡æ­£å¥½å¯ä»¥ç”¨ç‚¹ç§¯æ“ä½œæ›¿æ¢æ‰ã€‚ åƒè¿™æ ·åˆå¹¶xã€yå’Œzå‰é¢çš„å¸¸æ•°é¡¹ï¼Œå’ŒæŠŠiå¸½ã€iå¸½å’Œkå¸½æ”¾è¿›çŸ©é˜µç¬¬ä¸€åˆ—è¿›è¡Œè®¡ç®—ï¼Œç„¶ååˆå¹¶å„é¡¹å‰é¢çš„ç³»æ•°æ²¡æœ‰åŒºåˆ«ã€‚ æŠŠiå¸½ã€iå¸½å’Œkå¸½æ”¾è¿›çŸ©é˜µç¬¬ä¸€åˆ—è¿›è¡Œè®¡ç®—ï¼Œæ­£æ˜¯è€å¸ˆæ ¹æ®æ•™ç§‘ä¹¦ï¼Œå«æˆ‘ä»¬æ­»è®°ç¡¬èƒŒçš„å‰ç§¯å…¬å¼ï¼ åœ¨çŸ©é˜µä¸­æ’å…¥iå¸½ã€jå¸½å’Œkå¸½ä¸è¿‡æ˜¯åœ¨ä¼ é€’ä¸€ä¸ªä¿¡å·ï¼Œå‘Šè¯‰æˆ‘ä»¬åº”è¯¥æŠŠè¿™äº›ç³»æ•°è§£è¯»ä¸ºä¸€ä¸ªå‘é‡çš„åæ ‡ã€‚ å¥½äº†ï¼Œæ¨å¯¼ç»“æŸäº†ã€‚æ€»ç»“ä¸€ä¸‹ï¼š å½“ä½ å°†å‘é‡på’ŒæŸä¸ªå‘é‡(x,y,z)ç‚¹ä¹˜æ—¶ï¼Œæ‰€å¾—ç»“æœç­‰äºä¸€ä¸ªç”±(x,y,z)å’Œvä¸wç¡®å®šçš„å¹³è¡Œå…­é¢ä½“çš„æœ‰å‘ä½“ç§¯ï¼Œæ•°å€¼ä¸Šæ˜¯ä¸€ä¸ª3x3çŸ©é˜µçš„è¡Œåˆ—å¼ï¼Œè¿™ä¸ªè¡Œåˆ—å¼ç¬¬ä¸€åˆ—ä¸º(x,y,z)ï¼Œå…¶ä½™ä¸¤åˆ—ä¸ºvå’Œwçš„åæ ‡ã€‚ è¿™æ˜¯è®¡ç®—è§’åº¦çš„æ€»ç»“ã€‚ è®©æˆ‘ä»¬ä»å‡ ä½•è§’åº¦çœ‹çœ‹ï¼Œä»€ä¹ˆæ ·çš„å‘é‡pæ‰èƒ½æ»¡è¶³è¿™ä¸€ç‰¹æ®Šæ€§è´¨ ? å‡ ä½• å¯¹äºç‚¹ç§¯ï¼Œå‘é‡pä¸å…¶ä»–å‘é‡çš„ç‚¹ç§¯çš„å‡ ä½•è§£é‡Šï¼Œæ˜¯å°†å…¶ä»–å‘é‡æŠ•å½±åˆ°pä¸Šï¼Œç„¶åå°†æŠ•å½±é•¿åº¦ä¸pçš„é•¿åº¦ç›¸ä¹˜ã€‚ è€Œå¯¹äºå‰ç§¯ï¼Œä¸Šæ–‡ä¸­æˆ‘ä»¬ç”¨ä¸€ä¸ªçº¿æ€§å‡½æ•°æ¥ä»£è¡¨å®ƒã€‚ æˆ‘ä»¬æ‰¾åˆ°çš„çº¿æ€§å‡½æ•°å¯¹äºç»™å®šå‘é‡çš„ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯ p ä½œä¸ºä¸€ä¸ª 1x3çŸ©é˜µï¼Œä»£è¡¨ç€ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼›è¿™ä¸ªçº¿æ€§å˜æ¢å°†å‘é‡æŠ•å½±åˆ°å‚ç›´äºvå’Œwçš„ç›´çº¿ä¸Šï¼Œç„¶åå°†æŠ•å½±é•¿åº¦ä¸vå’Œwå¼ æˆçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ç›¸ä¹˜ã€‚ è¿™å’Œ(x,y,z) ä¸ å‚ç›´äºvå’Œwä¸”é•¿åº¦ä¸ºå¹³è¡Œå››è¾¹å½¢é¢ç§¯çš„å‘é‡ç‚¹ä¹˜æ˜¯åŒä¸€å›äº‹ã€‚ é¦–å…ˆè·å¾—ç”±vå’Œwç¡®å®šçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼Œä¹˜ä»¥å‘é‡(x,y,z)åœ¨å‚ç›´äºå¹³è¡Œå››è¾¹å½¢æ–¹å‘ä¸Šçš„åˆ†é‡(ä¸æ˜¯(x,y,z)çš„é•¿åº¦ï¼Œæ˜¯æŠ•å½±)ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°è¿™ä¸ªå¹³è¡Œå…­é¢ä½“çš„ä½“ç§¯ï¼Œ æ€»ç»“ä¸€ä¸‹å°±æ˜¯åº•é¢ç§¯(v,w)ä¹˜é«˜(pæŠ•å½±)ã€‚ æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœä½ é€‰æ‹©äº†åˆé€‚çš„å‘é‡æ–¹å‘(ç‚¹ç§¯ä¸ºæ­£)å°±ä¼šä¸(x,y,z)ã€vå’Œwæ»¡è¶³å³æ‰‹å®šåˆ™çš„æƒ…å†µç›¸å»åˆã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬æ‰¾åˆ°äº†è¿™ä¸ªpï¼Œä½¿å¾—pä¸å’ŒæŸä¸ªå‘é‡(x,y,z)ç‚¹ä¹˜æ—¶ï¼Œæ‰€å¾—ç»“æœç­‰äºå’Œä¸Šé¢è®¡ç®—å¾—æ¥çš„3x3çŸ©é˜µçš„è¡Œåˆ—å¼æ˜¯ä¸€è‡´çš„ã€‚ è¿™å°±æ˜¯æˆ‘ä»¬è¦æ‰¾çš„ï¼Œè®¡ç®—å’Œå‡ ä½•å¾—å‡ºçš„åŒä¸€ä¸ªå‘é‡ p ã€‚ 10.åŸºå˜æ¢åŒä¸€ä¸ªå‘é‡ï¼Œåœ¨åŸºå‘é‡ä¸åŒçš„åæ ‡ç³»ï¼Œä¼šæœ‰ä¸åŒçš„è¡¨è¾¾æ–¹æ³•ã€‚è¿™å°±åƒä¸åŒçš„è¯­è¨€ï¼Œè™½ç„¶æˆ‘ä»¬éƒ½åœ¨å…³æ³¨ç©ºé—´ä¸­çš„åŒä¸€ä¸ªå‘é‡ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ä¸åŒçš„è¯­è¨€å’Œæ•°å­—æ¥æè¿°å®ƒã€‚ä¸åŒçš„åŸºå‘é‡ï¼Œåæ ‡è½´çš„æ–¹å‘ä¸ç½‘æ ¼é—´è·ä¼šæœ‰æ‰€ä¸åŒã€‚ äºæ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„é—®é¢˜ï¼šå¦‚ä½•åœ¨ä¸åŒåæ ‡ç³»ä¹‹é—´è¿›è¡Œè½¬åŒ–? å‡è®¾ä½ çš„æœ‹å‹è©¹å¦®å¼—è‡ªå·±å»ºç«‹äº†ä¸€ä¸ªåæ ‡ç³»ï¼Œç¬¬ä¸€ä¸ªåŸºå‘é‡b1 (2,1) , ç¬¬äºŒä¸ªåŸºå‘é‡b2 (-1,1) åœ¨å¥¹çš„åæ ‡ç³»ä¸­ï¼Œè¿™ä¸¤ä¸ªå‘é‡çš„åæ ‡ä¸º(1,0)å’Œ(0,1) å¯¹äºå‘é‡[-1 2] ï¼Œå¥¹çš„åæ ‡ç³»é‡Œï¼Œè¿™ä¸ªå‘é‡æ˜¯-1ä¹˜ä»¥b1åŠ ä¸Š2ä¹˜ä»¥b2ã€‚ æ­¤æ—¶ï¼Œåæ ‡ç³»èƒŒåçš„â€œç½‘æ ¼â€ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼Œä¸å†æ˜¯ç”±åŸºå‘é‡(1,0)ã€(0,1)æ„æˆçš„æ­£æ–¹å½¢ï¼Œè€Œæ˜¯ç”±(2,1)ã€(-1,1)æ„æˆçš„å¹³è¡Œå››è¾¹å½¢ã€‚ æ‰€ä»¥å¥¹çš„åæ ‡è½´çš„æ–¹å‘å’Œç½‘ç»œé—´è·ä¼šæœ‰æ‰€ä¸åŒã€‚ ä»æˆ‘ä»¬çš„è§’åº¦æ¥çœ‹ï¼Œb1çš„åæ ‡ä¸º(2ï¼Œ1)ï¼Œb2çš„åæ ‡ä¸º(-1ï¼Œ1)ï¼Œæ‰€ä»¥å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¡ç®—-1ä¹˜ä»¥b1åŠ ä¸Š2ä¹˜ä»¥b2ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯åœ¨æˆ‘ä»¬çš„åæ ‡ç³»ä¸­è¡¨ç¤ºçš„ã€‚è®¡ç®—åå¾—åˆ°çš„æ˜¯[-4 1] çš„å‘é‡ã€‚ è¿™é‡Œå‘ç”Ÿçš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ç”¨æŸä¸ªå‘é‡çš„ç‰¹å®šåæ ‡ä¸å¥¹çš„åŸºå‘é‡æ•°ä¹˜ï¼Œè¿™ä¸å°±æ˜¯çŸ©é˜µå‘é‡ä¹˜æ³•å—ï¼Ÿ è¿™ä¸ªçŸ©é˜µçš„åˆ—ä»£è¡¨çš„æ˜¯ç”¨æˆ‘ä»¬çš„è¯­è¨€è¡¨è¾¾çš„è©¹å¦®å¼—çš„åŸºå‘é‡ã€‚ ä¸€ä¸ªçŸ©é˜µçš„åˆ—ä¸ºè©¹å¦®å¼—çš„åŸºå‘é‡,è¿™ä¸ªçŸ©é˜µå¯ä»¥çœ‹ä½œä¸€ä¸ªçº¿æ€§å˜æ¢ã€‚ å®ƒå°†æˆ‘ä»¬çš„åŸºå‘é‡iå¸½å’Œjå¸½ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬çœ¼ä¸­çš„(1, 0)å’Œ(0,1)å˜æ¢ä¸ºè©¹å¦®å¼—çš„åŸºå‘é‡ï¼Œä¹Ÿå°±æ˜¯å¥¹çœ¼ä¸­çš„(1,0)å’Œ(0ï¼Œ1) è¿™é‡Œæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼š$$Our ; grid \\longrightarrow Jenniferâ€™s;grid \\\\left(\\begin{matrix}2 -1 \\ 1 1\\end{matrix}\\right)\\Jenniferâ€™s;language \\longleftarrow Our ; language$$ä»å‡ ä½•ä¸Šè¯´ï¼Œè¿™ä¸ªçŸ©é˜µå°†æˆ‘ä»¬çš„ç½‘æ ¼å˜æ¢ä¸ºè©¹å¦®å¼—çš„ç½‘æ ¼, ä½†æ˜¯ä»æ•°å€¼ä¸Šè¯´ï¼Œè¿™æ˜¯ç”¨å¥¹çš„è¯­è¨€æ¥æè¿°è½¬åŒ–ä¸ºç”¨æˆ‘ä»¬çš„è¯­è¨€æ¥æè¿°ã€‚ è®©æˆ‘ä»¬æç„¶å¤§æ‚Ÿçš„æ˜¯ï¼ŒæŠŠå®ƒçœ‹ä½œå°†æˆ‘ä»¬å¯¹è©¹å¦®å¼—çš„å‘é‡çš„è¯¯è§£ï¼Œä¹Ÿå°±æ˜¯åœ¨æˆ‘ä»¬çš„åæ ‡ç³»ä¸­å…·æœ‰ç›¸åŒåæ ‡çš„å‘é‡ï¼Œå˜æˆå¥¹çœŸæ­£æƒ³è¦è¡¨ç¤ºçš„å‘é‡ã€‚ é‚£ä¹ˆåæ–¹å‘å‘¢ï¼Ÿ æˆ‘ä»¬çš„åæ ‡ç³»ä¸­çš„(3ï¼Œ2)çš„å‘é‡ï¼Œæ€ä¹ˆå¾—åˆ°è©¹å¦®å¼—åæ ‡ç³»ä¸­çš„(5\\3, 1\\3) ä¹‹å‰çš„åŸºå˜æ¢çŸ©é˜µæ˜¯ä»è©¹å¦®å¼—çš„è¯­è¨€è½¬åŒ–åˆ°æˆ‘ä»¬çš„è¯­è¨€ï¼Œé‚£æˆ‘ä»¬å¯¹çŸ©é˜µå–ä¸ªé€†ä¸å°±å¥½äº† ï¼ è®°ä½ä¸€ç‚¹ï¼Œä¸€ä¸ªå˜æ¢çš„é€†æ˜¯ä¸€ä¸ªæ–°çš„å˜æ¢,ä»–è®²å¯¹åº”çš„å˜æ¢é€†å‘è¿›è¡Œã€‚ ä»¥ä¸Šå°±æ˜¯å¦‚ä½•åœ¨åæ ‡ç³»ä¹‹é—´å¯¹å•ä¸ªå‘é‡çš„æè¿°è¿›è¡Œç›¸äº’è½¬åŒ–ã€‚ æ€»ç»“ï¼šä¸€ä¸ªçŸ©é˜µçš„åˆ—ä»£è¡¨çš„æ˜¯è©¹å¦®å¼—çš„åŸºå‘é‡ï¼Œå´æ˜¯ç”¨æˆ‘ä»¬çš„åæ ‡æ¥æè¿°ï¼›å¯¹äºä¸€ä¸ªå‘é‡ï¼Œè¿™ä¸ªçŸ©é˜µå°†å¥¹çš„è¯­è¨€æè¿°è½¬åŒ–ä¸ºæˆ‘ä»¬çš„è¯­è¨€æè¿°ã€‚é€†çŸ©é˜µåˆ™ç›¸åã€‚ å‘é‡å¹¶ä¸æ˜¯å”¯ä¸€ç”¨åæ ‡è¡¨ç¤ºçš„ä¸œè¥¿ã€‚çº¿æ€§å˜æ¢åŒæ ·è¦ç”¨åæ ‡å‘é‡è¡¨ç¤ºã€‚ è¿™å°±æ¶‰åŠåˆ°äº†åŸºå‘é‡é—®é¢˜(çœ‹å¾…åæ ‡çš„è§†è§’) è€ƒè™‘æŸä¸ªçº¿æ€§å˜æ¢ï¼Œè­¬å¦‚é€†æ—¶é’ˆæ—‹è½¬90ä½ æˆ‘ç”¨çŸ©é˜µä»£è¡¨å®ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯åœ¨è·Ÿè¸ªiå¸½å’Œjå¸½çš„å»å‘ã€‚ iå¸½åœ¨å˜æ¢åå¤„äºåæ ‡(0ï¼Œ1) è€Œjå¸½åœ¨å˜æ¢åå¤„äºåæ ‡(-1ï¼Œ0)ã€‚ è¿™äº›åæ ‡ä¹Ÿå°±æˆä¸ºäº†çŸ©é˜µçš„åˆ— $$\\left(\\begin{matrix}0 1 \\ -1 0\\end{matrix}\\right)$$ ä½†æ˜¯è¿™ç§è¡¨ç¤ºä¸æˆ‘ä»¬å¯¹åŸºå‘é‡çš„é€‰æ‹©å¯†åˆ‡ç›¸å…³ã€‚å› ä¸ºæˆ‘ä»¬è·Ÿè¸ªçš„æ˜¯iå¸½å’Œjå¸½,å¹¶ä¸”æ˜¯åœ¨æˆ‘ä»¬è‡ªå·±çš„åæ ‡ç³»ä¸­è®°å½•å®ƒä»¬çš„å»å‘ã€‚ è€Œè©¹å¦®å¼—å¦‚ä½•æè¿°åŒæ ·çš„ç©ºé—´90Â°æ—‹è½¬å‘¢? ä½ å¯èƒ½ä¼šå°è¯•åªå°†æ—‹è½¬çŸ©é˜µçš„åˆ—è½¬åŒ–ä¸ºç”¨è©¹å¦®å¼—çš„è¯­è¨€æè¿°â€”â€”å› ä¸ºè¿™äº›åˆ—ä»£è¡¨çš„æ˜¯iå¸½å’Œjå¸½çš„å»å‘ã€‚ ä½†æ˜¯è¿™äº›åˆ—ä»£è¡¨çš„ä»ç„¶æ˜¯æˆ‘ä»¬çš„åŸºä¸æ˜¯å¥¹çš„åŸºã€‚è€Œè©¹å¦®å¼—æƒ³è¦çš„çŸ©é˜µéœ€è¦ä»£è¡¨å¥¹çš„åŸºå‘é‡çš„å»å‘,ä¹Ÿå°±æ˜¯ç”¨å¥¹çš„è¯­è¨€æè¿°ã€‚$$\\overbrace{\\left[\\begin{matrix}-1 \\ 2\\end{matrix}\\right]}^{Vector;in;Janniferâ€™s;language}\\longrightarrow\\overbrace{\\underbrace{\\left[\\begin{matrix}2 -1 \\ 1 1\\end{matrix}\\right]}{åŸºå˜æ¢çŸ©é˜µ}\\left[\\begin{matrix}-1 \\ 2\\end{matrix}\\right]}^{Same;vector;in;our;langugae}\\longrightarrow\\quad\\overbrace{\\underbrace{\\left[\\begin{matrix}0 -1 \\ 1 0\\end{matrix}\\right]}{å˜æ¢çŸ©;in;our;language}\\left[\\begin{matrix}2 -1 \\ 1 1\\end{matrix}\\right]\\left[\\begin{matrix}-1 \\ 2\\end{matrix}\\right]}^{å˜æ¢åå‘é‡;in;our;language}$$ $$\\left[\\begin{matrix}0 -1 \\ 1 0\\end{matrix}\\right]\\left[\\begin{matrix}2 -1 \\ 1 1\\end{matrix}\\right]\\left[\\begin{matrix}-1 \\ 2\\end{matrix}\\right]\\longrightarrow\\overbrace{\\underbrace{\\left[\\begin{matrix}2 -1 \\ 1 1\\end{matrix}\\right]^{-1}}_{åŸºå˜æ¢çŸ©é˜µçš„é€†}\\left[\\begin{matrix}0 -1 \\ 1 0\\end{matrix}\\right]\\left[\\begin{matrix}2 -1 \\ 1 1\\end{matrix}\\right]\\left[\\begin{matrix}-1 \\ 2\\end{matrix}\\right]}^{å˜æ¢åå‘é‡;in;Janniferâ€™s;language}$$ å› ä¸ºæˆ‘ä»¬èƒ½å¤Ÿå¯¹è©¹å¦®å¼—è¯­è¨€æè¿°çš„ä»»ä¸€å‘é‡åšåŒæ ·çš„äº‹: åŸºå˜æ¢ â†’ çº¿æ€§å˜æ¢ â†’ åŸºå˜æ¢çš„é€† è¿™ä¸‰ä¸ªçŸ©é˜µçš„å¤åˆç»™å‡ºçš„å°±æ˜¯ç”¨è©¹å¦®å¼—è¯­è¨€æè¿°çš„çº¿æ€§å˜æ¢çŸ©é˜µã€‚ å®ƒæ¥æ”¶ç”¨è©¹å¦®å¼—è¯­è¨€æè¿°çš„å‘é‡ï¼Œå¹¶è¾“å‡ºç”¨è©¹å¦®å¼—è¯­è¨€æè¿°çš„å˜æ¢åçš„å‘é‡ã€‚ æ‰€ä»¥ï¼Œå¦‚æœè©¹å¦®å¼—ç”¨è¿™ä¸ªçŸ©é˜µä¸å¥¹çš„åæ ‡ç³»ä¸­çš„ä¸€ä¸ªå‘é‡ç›¸ä¹˜ï¼Œç»“æœå°±æ˜¯åœ¨å¥¹çš„åæ ‡ç³»ä¸­æè¿°çš„è¯¥å‘é‡æ—‹è½¬90Â°çš„ç»“æœã€‚ æ€»ç»“ï¼šæ¯å½“ä½ çœ‹åˆ°è¿™æ ·ä¸€ä¸ªè¡¨è¾¾å¼:Aé€†ä¹˜ä»¥Mä¹˜ä»¥A*(P^-1^AP B),è¿™å°±æš—ç¤ºç€ä¸€ç§æ•°å­¦ä¸Šçš„è½¬ç§»ä½œç”¨ã€‚ ä¸­é—´çš„çŸ©é˜µä»£è¡¨ä¸€ç§ä½ æ‰€è§çš„å˜æ¢ï¼Œè€Œå¤–ä¾§ä¸¤ä¸ªçŸ©é˜µä»£è¡¨ç€è½¬ç§»ä½œç”¨ï¼Œä¹Ÿå°±æ˜¯è§†è§’ä¸Šçš„è½¬åŒ–ã€‚ çŸ©é˜µä¹˜ç§¯ä»ç„¶ä»£è¡¨ç€åŒä¸€ä¸ªå˜æ¢ï¼Œåªä¸è¿‡æ˜¯ä»å…¶ä»–äººçš„è§’åº¦æ¥çœ‹çš„ã€‚ åŸºå˜æ¢ä¸¤ä¸ªåº”ç”¨å®ä¾‹ï¼š 1.ç‰¹å¾å€¼ä¸ç‰¹å¾å‘é‡ 2.ç›¸ä¼¼å¯¹è§’åŒ–ã€‚ 11.ç‰¹å¾å€¼å’Œç‰¹å¾å‘é‡ å¼•è¨€ é¦–å…ˆï¼Œè€ƒè™‘äºŒç»´ç©ºé—´ä¸­çš„æŸä¸ªçº¿æ€§å˜æ¢ï¼š$$\\left[\\begin{matrix}3 1 \\0 2\\end{matrix}\\right]$$ å®ƒå°†åŸºå‘é‡iå¸½å˜æ¢åˆ°åæ ‡(3,0)ï¼Œjå¸½å˜æ¢åˆ°åæ ‡(1,2) æˆ‘ä»¬å…³æ³¨å®ƒå¯¹ä¸€ä¸ªç‰¹å®šå‘é‡çš„ä½œç”¨ï¼Œå¹¶ä¸”è€ƒè™‘è¿™ä¸ªå‘é‡å¼ æˆçš„ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åŸç‚¹å’Œå‘é‡å°–ç«¯çš„ç›´çº¿ã€‚å¤§éƒ¨åˆ†å‘é‡åœ¨å˜æ¢ä¸­éƒ½ç¦»å¼€äº†å…¶å¼ æˆçš„ç©ºé—´ï¼› æ‰€ä»¥å¦‚æœå‘é‡æ­£å¥½è½åœ¨è¿™æ¡ç›´çº¿ä¸Šï¼Œæ„Ÿè§‰æ›´åƒæ˜¯å·§åˆã€‚ä¸è¿‡ï¼ŒæŸäº›ç‰¹æ®Šå‘é‡çš„ç¡®ç•™åœ¨å®ƒä»¬å¼ æˆçš„ç©ºé—´é‡Œï¼Œæ„å‘³ç€çŸ©é˜µå¯¹å®ƒçš„ä½œç”¨ä»…ä»…æ˜¯æ‹‰ä¼¸æˆ–è€…å‹ç¼©è€Œå·²ï¼Œå¦‚åŒä¸€ä¸ªæ ‡é‡ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŸºå‘é‡iå¸½å°±æ˜¯è¿™æ ·ä¸€ä¸ªç‰¹æ®Šå‘é‡ã€‚iå¸½å¼ æˆçš„ç©ºé—´æ˜¯xè½´ï¼Œiå¸½å˜æˆäº†åŸæ¥çš„3å€ï¼Œä»ç„¶ç•™åœ¨xè½´ä¸Šã€‚ æ­¤å¤–ï¼Œå› ä¸ºçº¿æ€§å˜æ¢çš„æ€§è´¨ï¼Œxè½´ä¸Šçš„ä»»ä½•å…¶ä»–å‘é‡éƒ½åªæ˜¯è¢«æ‹‰ä¼¸ä¸ºåŸæ¥çš„3å€ï¼Œå› æ­¤ä¹Ÿå°±ç•™åœ¨å®ƒä»¬å¼ æˆçš„ç©ºé—´é‡Œã€‚ æœ‰ä¸€ä¸ªç•¥æ˜¾éšè”½çš„å‘é‡(-1,1)ï¼Œå®ƒåœ¨å˜æ¢ä¸­ä¹Ÿç•™åœ¨è‡ªå·±å¼ æˆçš„ç©ºé—´é‡Œï¼Œæœ€ç»ˆè¢«æ‹‰ä¼¸ä¸ºåŸæ¥çš„2å€ï¼› åŒä¸Šï¼Œçº¿æ€§æ€§è´¨æš—ç¤ºç€ï¼Œå¤„åœ¨å®ƒæ‰€å¼ æˆçš„å¯¹è§’çº¿ä¸Šçš„å…¶ä»–ä»»ä½•ä¸€ä¸ªå‘é‡ï¼Œä¹Ÿä»…ä»…è¢«æ‹‰ä¼¸ä¸ºåŸæ¥çš„2å€ã€‚ æ‰€ä»¥ä½ çŒœåˆ°äº†å—ï¼Ÿè¿™ä¸¤ä¸ªä¿æŒåœ¨è‡ªå·±çš„spançš„ç‰¹æ®Šå‘é‡å°±è¢«ç§°ä¸ºç‰¹å¾å‘é‡ã€‚æ¯ä¸ªç‰¹å¾å‘é‡éƒ½æœ‰ä¸€ä¸ªæ‰€å±çš„å€¼ï¼Œè¢«ç§°ä¸ºâ€œç‰¹å¾å€¼â€, å³è¡¡é‡ç‰¹å¾å‘é‡åœ¨å˜æ¢ä¸­æ‹‰ä¼¸æˆ–å‹ç¼©æ¯”ä¾‹çš„å› å­ã€‚ å¦‚æœç‰¹å¾å‘é‡æ˜¯è´Ÿå€¼12 ï¼Œæ„å‘³ç€è¿™ä¸ªå‘é‡è¢«åå‘ï¼Œå¹¶ä¸”è¢«å‹ç¼©ä¸ºåŸæ¥çš„12ã€‚ é‡ç‚¹åœ¨äºï¼Œå®ƒä»ç„¶åœç•™åœ¨å®ƒå¼ æˆçš„ç›´çº¿ä¸Šï¼Œå¹¶æœªéšç€çº¿æ€§å˜æ¢å‘ç”Ÿæ—‹è½¬ã€‚ ç‰¹å¾å‘é‡çš„ä¸€ä¸ªåº”ç”¨ï¼šä¸‰ç»´ç©ºé—´æ—‹è½¬ã€‚ ä¾‹å¦‚ä¸€ä¸ªç«‹æ–¹ä½“ï¼Œæ—‹è½¬çš„è¯ï¼Œå¦‚æœä½ èƒ½æ‰¾åˆ°è¿™ä¸ªæ—‹è½¬çš„ç‰¹å¾å‘é‡ï¼Œé‚£ä¹ˆä½ æ‰¾åˆ°çš„å°±æ˜¯æ—‹è½¬è½´ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç›¸åº”çš„ç‰¹å¾å€¼å¿…é¡»ä¸º1ï¼Œå› ä¸ºæ—‹è½¬ä¸ç¼©æ”¾ä»»ä½•ä¸€ä¸ªå‘é‡ã€‚ æ—‹è½¬çš„åº”ç”¨å‘Šè¯‰æˆ‘ä»¬ï¼š å¯¹äºä»»ä¸€çŸ©é˜µæè¿°çš„çº¿æ€§å˜æ¢ï¼Œä½ å¯ä»¥é€šè¿‡å°†çŸ©é˜µçš„åˆ—çœ‹ä½œå˜æ¢åçš„åŸºå‘é‡æ¥ç†è§£å®ƒã€‚ä½†ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ç‰¹å¾å‘é‡ï¼Œé‚£ä¹ˆåœ¨ä¸ä¾èµ–äºç‰¹å®šåæ ‡ç³»ï¼ˆåŸºå‘é‡å˜åŒ–ï¼‰çš„å‰æä¸‹ï¼Œä¸€ç§æ›´è¾ƒå¥½ä¸”å¸¸ç”¨çš„çš„ç†è§£æ–¹å¼å°±æ˜¯ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼ã€‚ å¯¹äºä¸€ä¸ªçŸ©é˜µAæœ‰ä¸¤ç§ç†è§£æ–¹å¼ ä¸€ç§ç†è§£æ–¹å¼æ˜¯åŸºäºåæ ‡ç³»çš„ï¼Œè®¤ä¸ºçŸ©é˜µçš„æ¯ä¸€ä¸ªåˆ—å‘é‡æ˜¯çº¿æ€§å˜æ¢åçš„åŸºå‘é‡ï¼›å¦ä¸€ç§ç†è§£æ–¹å¼ä½¿ç”¨ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼ã€‚ æ¦‚å¿µ $$\\overbrace{A}^{å˜æ¢çŸ©é˜µ};\\vec{v}\\lambda\\overbrace{\\vec{v}}^{ç‰¹å¾å€¼} \\\\quad\\searrow\\quad\\swarrow\\\\quad;ç‰¹å¾å‘é‡$$ çŸ©é˜µå‘é‡ä¹˜ç§¯ = å‘é‡æ•°ä¹˜ ã€‚å› æ­¤æ±‚è§£çŸ©é˜µAçš„ç‰¹å¾å‘é‡å’Œç‰¹å¾å€¼ï¼Œå®é™…ä¸Šå°±æ˜¯æ±‚è§£ä½¿å¾—è¿™ä¸ªç­‰å¼æˆç«‹çš„å‘é‡vå’Œæ•°Î»ã€‚ æƒ³ç†è§£è¿™ä¸ªå¼å­ï¼Œé¦–å…ˆè¦è§£å†³ä¹˜ç§¯ç±»å‹ä¸åŒçš„é—®é¢˜ã€‚ æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå°†ç­‰å·å³ä¾§é‡å†™ä¸ºæŸä¸ªçŸ©é˜µå‘é‡ä¹˜ç§¯ï¼Œè®© Î» å½“æˆæŸä¸ªçŸ©é˜µã€‚ å…¶ä¸­ï¼ŒçŸ©é˜µçš„ä½œç”¨æ•ˆæœæ˜¯å°†ä»»ä¸€å‘é‡ä¹˜ä»¥ Î»ï¼Œè¿™ä¸ªçŸ©é˜µçš„åˆ—ä»£è¡¨ç€å˜æ¢åçš„åŸºå‘é‡ï¼Œè€Œæ¯ä¸ªåŸºå‘é‡ä»…ä»…ä¸Î»ç›¸ä¹˜æ‰€ä»¥è¿™ä¸ªçŸ©é˜µçš„å¯¹è§’å…ƒå‡ä¸ºÎ»ï¼Œå…¶ä½™ä½ç½®éƒ½æ˜¯0ã€‚ æ— éæ˜¯ Î»Eï¼Œä¹˜ä»¥ä¸€ä¸ªå•ä½çŸ©é˜µEã€‚ æˆ‘ä»¬å°±èƒ½å°†ç­‰å·å³ä¾§çš„ä¸œè¥¿ç§»åˆ°å·¦ä¾§ï¼Œç„¶åæå‡ºå› å­v$$(A-\\lambda I)\\vec{v} \\vec{0}$$å·¦æ‹¬å·é‡Œçš„çŸ©é˜µç±»ä¼¼äºä¸‹é¢è¿™ç§çŸ©é˜µ$$\\left[ \\begin{matrix}3-\\lambda 1 4\\1 5-\\lambda 9\\2 6 5-\\lambda\\end{matrix}\\right]$$äºæ˜¯æˆ‘ä»¬å¯ä»¥å¯»æ‰¾ä¸€ä¸ªå‘é‡vï¼Œä½¿å¾—è¿™ä¸ªæ–°çŸ©é˜µä¸vç›¸ä¹˜ç»“æœä¸ºé›¶å‘é‡ã€‚ é¦–å…ˆæ˜¯vè‡ªå·±æ˜¯é›¶å‘é‡ã€‚è¿™æ—¶ç­‰å¼æ’æˆç«‹ã€‚ è¿™ç§æƒ…å†µæ¯”è¾ƒæ— èŠï¼Œçœ‹ä¸‹é¢ã€‚ vä¸æ˜¯é›¶å‘é‡ã€‚è¿™æ—¶è€ƒè™‘å‰é¢å­¦åˆ°çš„å†…å®¹ï¼Œå½“ä¸”ä»…å½“çŸ©é˜µä»£è¡¨çš„çº¿æ€§å˜æ¢å°†ç©ºé—´å‹ç¼©åˆ°æ›´ä½çš„ç»´åº¦æ—¶ï¼Œæ‰ä¼šå­˜åœ¨ä¸€ä¸ªéé›¶å‘é‡ä½¿å¾—çŸ©é˜µå’Œå®ƒçš„ä¹˜ç§¯ä¸ºé›¶å‘é‡ã€‚ ç®€å•è¯´ï¼Œéé›¶å‘é‡æ˜¯æœ‰é•¿åº¦æ»´ã€‚çº¿æ€§å˜æ¢æƒ³è®©å®ƒå˜æˆä¸€ä¸ªç‚¹ï¼Œåªèƒ½é€šè¿‡é™ç»´å‹ç¼©ã€‚ é‚£ä¹ˆè€ƒè€ƒå¤§å®¶ï¼Œä»€ä¹ˆç‰¹æ€§çš„çŸ©é˜µèƒ½é™ç»´å‹ç¼©ï¼Ÿâ€”â€”è¡Œåˆ—å¼ä¸º0çš„çŸ©é˜µï¼ˆå‹ç¼©å®Œé¢ç§¯ä¸º0ï¼‰ã€‚ è§‚å¯Ÿæ‹¬å·å¼å­ä»£è¡¨çš„çŸ©é˜µï¼Œæœ‰ä¸€ä¸ªå˜é‡Î»ã€‚åœ¨ä¸Šé¢é‚£ä¸ªä¾‹å­ä¸­ï¼ŒÎ»1æ—¶è¡Œåˆ—å¼ä¸º 0ã€‚ å½“ç„¶ï¼Œå¯¹äºå…¶ä»–çŸ©é˜µï¼Œç‰¹å¾å€¼ä¸ä¸€å®šæ˜¯1ï¼ŒÎ»å–å…¶ä»–å€¼æ—¶æ‰èƒ½ä½¿è¡Œåˆ—å¼ä¸ºé›¶ã€‚ è¿™é‡Œ3b1bçš„åŸè§†é¢‘æœ‰ä¸€ä¸ªéšç€Î»å˜åŒ–ï¼Œå‘é‡é€æ¸çº¿æ€§å˜æ¢çš„è¿‡ç¨‹ï¼Œå¾ˆç²¾å½©ï¼ è¿™ä¸ª Î» å€¼ä¿è¯äº†æ¦‚å¿µå¼å­çš„æˆç«‹ï¼Œä¹Ÿå°±è¯´æ˜æ­¤æ—¶å‘é‡væ˜¯Açš„ä¸€ä¸ªç‰¹å¾å‘é‡ï¼Œåœ¨å˜æ¢ä¸­åœç•™åœ¨å®ƒå¼ æˆçš„ç©ºé—´é‡Œã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œvå¯¹åº”çš„ç‰¹å¾å€¼æ˜¯1ï¼Œæ‰€ä»¥å®ƒå®é™…ä¸Šä¿æŒä¸å˜ ä¸¾ä¾‹è¯´æ˜ï¼š$$det\\left(\\left[\\begin{matrix}3 1 \\0 2\\end{matrix}\\right]\\right)(3-\\lambda)(2-\\lambda)0$$è¿˜æ˜¯å¼€å¤´è¿™ä¸ªä¾‹å­ï¼Œæ±‚è§£å®ƒçš„ç‰¹å¾å€¼ï¼Œå°†å¯¹è§’å…ƒå‡å»Î»ï¼Œç„¶åè®¡ç®—è¡Œåˆ—å¼ã€‚è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªå…³äºå…¥çš„äºŒæ¬¡å¤šé¡¹å¼(3-å…¥)(2-å…¥)ã€‚ç”±ä¸Šé¢çš„æ¨è®ºå¯çŸ¥ï¼Œåªæœ‰è¡Œåˆ—å¼ä¸ºé›¶æ—¶ï¼ŒÎ» æ‰ä¼šæ˜¯ç‰¹å¾å€¼ã€‚æ‰€ä»¥è¿™ä¸ªçŸ©é˜µçš„Î» 2 æˆ– Î» 3ã€‚$$\\left[\\begin{matrix}3-\\lambda 1 \\0 2-\\lambda\\end{matrix}\\right]\\left[\\begin{matrix}x \\ y\\end{matrix}\\right]\\left[\\begin{matrix}0 \\ 0 \\end{matrix}\\right]$$ä¸ºäº†æ±‚å‡ºå±äºç‰¹å¾å€¼çš„ç‰¹å¾å‘é‡ï¼Œå°† Î» ä»£å…¥åˆ°çŸ©é˜µä¸­ï¼Œç„¶åæ±‚è§£å‡ºåœ¨èƒ½ç»è¿‡ä¸ªçŸ©é˜µçš„çº¿æ€§å˜æ¢åæˆä¸ºé›¶çš„å‘é‡ã€‚äºæ˜¯å¾—åˆ°x+y = 0 ä½ ä¼šå‘ç°æ‰€æœ‰çš„è§£å…¨éƒ¨è½åœ¨ç”±å‘é‡(-1,1)å¼ æˆçš„å¯¹è§’çº¿ä¸Š ä¸ä¹‹å¯¹åº”çš„ï¼Œå°±æ˜¯åŸå§‹çš„çŸ©é˜µ[(3,0)ï¼Œ(1,2)]å°†è¿™äº›å‘é‡æ‹‰ä¼¸ä¸ºåŸæ¥çš„2å€ã€‚ ä¸‰ä¸ªç‰¹å¾å‘é‡çš„ç‰¹æ®Šæƒ…å†µ 1.äºŒç»´çº¿æ€§å˜æ¢ä¸ä¸€å®šæœ‰ç‰¹å¾å‘é‡ æ¯”å¦‚æ­£äº¤å˜æ¢ï¼š$$\\left[\\begin{matrix}0 -1 \\-1 0\\end{matrix}\\right]$$å®ƒå¹¶æ²¡æœ‰ç‰¹å¾å‘é‡ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå‘é‡éƒ½å‘ç”Ÿäº†æ—‹è½¬å¹¶ç¦»å¼€äº†å…¶å¼ æˆçš„ç©ºé—´ã€‚ç¡¬å»æ±‚ç‰¹å¾å€¼ï¼Œä¼šå¾—åˆ° Î»^2^+10 ã€‚æœ‰ä¸¤ä¸ªè™šæ•°è§£è€Œæ²¡æœ‰å®æ•°è§£ã€‚æ²¡æœ‰å®æ•°è§£è¡¨æ˜å®ƒæ²¡æœ‰ç‰¹å¾å‘é‡ã€‚ æ‰©å±•ï¼šä½†è™šæ•°å’Œå¤å¹³é¢æœ‰å…³ç³»ã€‚ä¸1ç›¸ä¹˜åœ¨å¤å¹³é¢ä¸­è¡¨ç°ä¸º90åº¦æ—‹è½¬å’Œiæ˜¯è¿™ä¸ªäºŒç»´å®å‘é‡æ—‹è½¬å˜æ¢çš„ç‰¹å¾å€¼æœ‰æ‰€å…³è”ã€‚ç‰¹å¾å€¼å‡ºç°å¤æ•°çš„æƒ…å†µèˆ¬å¯¹åº”äºå˜æ¢ä¸­çš„æŸç§æ—‹è½¬å¤§ã€‚ å…·ä½“ç»†èŠ‚è¿™é‡Œä¸æ·±ç©¶äº†ã€‚ 2.å‰ªåˆ‡å˜æ¢ï¼š$$\\left[\\begin{matrix}1 1 \\0 1\\end{matrix}\\right]$$æ‰€æœ‰xè½´ä¸Šçš„å‘é‡éƒ½æ˜¯å±äºç‰¹å¾å€¼1çš„ç‰¹å¾å‘é‡ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¿æŒä¸å˜ å½“ä½ å°†å¯¹è§’å…ƒå‡å»å…¥ï¼Œç„¶åè®¡ç®—è¡Œåˆ—å¼,ä½ å¾—åˆ°çš„æ˜¯ (1-Î»)^2^ â€”â€” Î» æ˜¯é‡æ ¹ã€‚ å‡ é‡æ ¹å°±è¡¨æ˜æœ€å¤šå¯¹åº”å‡ ä¸ªçº¿æ€§æ— å…³çš„ç‰¹å¾å‘é‡ è¿™ä¸å‡ ä½•ä¸Šå¾—åˆ°çš„â€œæ‰€æœ‰ç‰¹å¾å‘é‡å‡å±äºç‰¹å¾å€¼1â€çš„ç»“æœä¸€è‡´ã€‚ 3.å¯èƒ½ä¼šå‡ºç°åªæœ‰ä¸€ä¸ªç‰¹å¾å€¼ï¼Œä½†æ˜¯ç‰¹å¾å‘é‡ä¸æ­¢åœ¨ä¸€æ¡ç›´çº¿ä¸Šçš„æƒ…å†µ:$$\\left[\\begin{matrix}2 0 \\0 2\\end{matrix}\\right]$$ä¸€ä¸ªç®€å•çš„ä¾‹å­æ˜¯å°†æ‰€æœ‰å‘é‡å˜ä¸ºä¸¤å€çš„çŸ©é˜µã€‚ å”¯ä¸€çš„ç‰¹å¾å€¼æ˜¯2ï¼Œä½†æ˜¯å¹³é¢å†…æ¯ä¸€ä¸ªå‘é‡éƒ½æ˜¯å±äºè¿™ä¸ªç‰¹å¾å€¼çš„ç‰¹å¾å‘é‡ã€‚ å¦‚æœçš„åŸºå‘é‡éƒ½æ˜¯ç‰¹å¾å‘é‡ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ$$\\left[\\begin{matrix}-1 0 \\0 2\\end{matrix}\\right]$$æ¯”å¦‚è¯´ï¼Œå¯èƒ½iå¸½å˜ä¸ºåŸæ¥çš„(-1)å€ï¼Œjå¸½å˜ä¸ºåŸæ¥çš„2å€ï¼Œå°†å®ƒä»¬çš„æ–°åæ ‡ä½œä¸ºçŸ©é˜µçš„åˆ—ã€‚ æ³¨æ„ï¼Œå®ƒä»¬çš„å€æ•°-1å’Œ2ï¼Œä¹Ÿå°±æ˜¯iå¸½å’Œjå¸½æ‰€å±çš„ç‰¹å¾å€¼ï¼Œä½äºçŸ©é˜µçš„å¯¹è§’çº¿ä¸Šï¼Œè€Œå…¶ä»–å…ƒç´ å‡ä¸º0ã€‚ åƒè¿™ç§é™¤äº†å¯¹è§’å…ƒä»¥å¤–å…¶ä»–å…ƒç´ å‡ä¸º0çš„çŸ©é˜µè¢«ç§°ä¸ºå¯¹è§’çŸ©é˜µ, è§£è¯»å®ƒçš„æ–¹æ³•æ˜¯ï¼Œæ‰€æœ‰åŸºå‘é‡éƒ½æ˜¯ç‰¹å¾å‘é‡ã€‚çŸ©é˜µçš„å¯¹è§’å…ƒæ˜¯å®ƒä»¬æ‰€å±çš„ç‰¹å¾å€¼ å¯¹è§’çŸ©é˜µæœ‰å¾ˆå¤šæœ‰è¶£çš„æ€§è´¨ï¼š å…¶ä¸­ä¸€ä¸ªé‡è¦çš„æ–¹é¢æ˜¯ï¼Œå¯¹è§’çŸ©é˜µä¸è‡ªå·±å¤šæ¬¡ç›¸ä¹˜çš„ç»“æœæ›´å®¹æ˜“è®¡ç®— å› ä¸ºå¯¹è§’çŸ­é˜µä»…ä»…è®©åŸºå‘é‡ä¸æŸä¸ªç‰¹å¾å€¼ç›¸ä¹˜,æ‰€ä»¥å¤šæ¬¡åº”ç”¨çŸ©é˜µä¹˜æ³•ï¼Œæ¯”å¦‚100æ¬¡ï¼Œä¹Ÿåªæ˜¯å°†æ¯ä¸ªåŸºå‘é‡ä¸å¯¹åº”ç‰¹å¾å€¼çš„100æ¬¡å¹‚ç›¸ä¹˜ã€‚ ä½†è¿™ç§åŸºå‘é‡æ˜¯ç‰¹å¾å‘é‡çš„æƒ…å†µï¼Œä½ å¯èƒ½å¾ˆéš¾é‡åˆ°ã€‚ å¦‚æœä½ çš„å˜æ¢æœ‰è®¸å¤šç‰¹å¾å‘é‡ï¼Œå°±åƒä¸Šé¢æœ‰ä¸¤æ¡çš„çŸ©é˜µï¼Œå¤šåˆ°ä½ èƒ½é€‰å‡ºä¸€ä¸ªå¼ æˆå…¨ç©ºé—´çš„é›†åˆï¼Œé‚£ä¹ˆä½ å°±èƒ½å˜æ¢ä½ çš„åæ ‡ç³»ï¼Œä½¿å¾—è¿™äº›ç‰¹å¾å‘é‡å°±æ˜¯åŸºå‘é‡ ç©ºé—´æœ‰å‡ ç»´ï¼Œå°±æ‰¾å‡ºå‡ ä¸ªçº¿æ€§æ— å…³çš„ç‰¹å¾å‘é‡ã€‚ äºŒç»´æ‰¾ä¸¤ä¸ªç‰¹å¾å‘é‡ï¼Œä¸‰ç»´æ‰¾ä¸‰ä¸ªã€‚ æ‰€ä»¥åˆæƒ³åˆ°ç›¸ä¼¼å¯¹è§’åŒ–äº†å—ï¼ŸçŸ©é˜µAèƒ½å¯¹è§’åŒ–çš„å……è¦æ¡ä»¶æ˜¯Aæœ‰nä¸ªçº¿æ€§æ— å…³çš„ç‰¹å¾å‘é‡!!! è¿™é‡Œè¿˜ç”¨åˆ°äº†ä¸Šä¸€èŠ‚çš„åŸºå˜æ¢ã€‚ åŸºå˜æ¢çŸ©é˜µæ˜¯ç‰¹å¾å‘é‡æ„æˆçš„ï¼Œè€Œç‰¹å¾å‘é‡æ˜¯å½“å‰ç©ºé—´è¿›è¡Œä¸­é—´çŸ©é˜µå˜æ¢æ—¶ä¸ç©ºé—´ä¸å˜åŒ–çš„å‘é‡ã€‚ æ‰€ä»¥æŠŠå½“å‰ç©ºé—´çš„å˜æ¢è½¬æ¢åˆ°ç‰¹å¾åŸºçš„ç©ºé—´åï¼Œå˜æ¢å°±å˜æˆäº†å¯¹åŸºçš„æ”¾ç¼©æ“ä½œï¼Œä¹Ÿå°±æ˜¯ç‰¹å¾å€¼æ„æˆçš„çŸ©é˜µ ç”¨ç‰¹å¾å‘é‡ä½œä¸ºåŸºå‘é‡ï¼Œå˜æ¢åªå¯¹åŸºä½œä¼¸ç¼©ã€‚æ‰€ä»¥è¿™ä¸ªæ–°çŸ©é˜µå¿…ç„¶æ˜¯å¯¹è§’çš„ï¼Œå¹¶ä¸”å¯¹è§’å…ƒä¸ºå¯¹åº”çš„ç‰¹å¾å€¼ æ‰€ä»¥ä¸€ç»„åŸºå‘é‡(åŒæ ·æ˜¯ç‰¹å¾å‘é‡)æ„æˆçš„é›†åˆè¢«ç§°ä¸ºä¸€ç»„â€œç‰¹å¾åŸºâ€ æ‰€ä»¥å¦‚æœä½ è¦è®¡ç®—è¿™ä¸ªçŸ©é˜µçš„100æ¬¡å¹‚ï¼Œæ›´å®¹æ˜“çš„åšæ³•æ˜¯å…ˆå˜æ¢åˆ°ç‰¹å¾åŸºï¼Œåœ¨é‚£ä¸ªåæ ‡ç³»ä¸­è®¡ç®—100æ¬¡å¹‚ã€‚ç„¶åè½¬æ¢å›æ ‡å‡†åæ ‡ç³»ã€‚ ä¸æ˜¯æ‰€æœ‰å˜æ¢éƒ½èƒ½è¿›è¡Œè¿™ä¸€è¿‡ç¨‹ã€‚æ¯”å¦‚è¯´å‰ªåˆ‡å˜æ¢ï¼Œå®ƒçš„ç‰¹å¾å‘é‡ä¸å¤Ÿå¤šï¼Œå¹¶ä¸èƒ½å¼ æˆå…¨ç©ºé—´ã€‚ä½†æ˜¯å¦‚æœä½ èƒ½æ‰¾åˆ°ä¸€ç»„ç‰¹å¾åŸºï¼ŒçŸ©é˜µè¿ç®—å°±ä¼šå˜å¾—éå¸¸è½»æ¾ 12.æŠ½è±¡å‘é‡ç©ºé—´å‘é‡æ ¹æœ¬ä¸Šå¹¶ä¸æ˜¯ç”±ä¸€ç»„å®æ•°æ„æˆï¼Œå®ƒä»¬çš„æœ¬è´¨å…¶å®æ›´å…·ç©ºé—´æ€§ã€‚ ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå‡½æ•°å®é™…ä¸Šåªæ˜¯å¦ä¸€ç§å‘é‡ã€‚å‡½æ•°æ—¢æ»¡è¶³å‘é‡çš„å¯åŠ æ€§ï¼Œåˆæ»¡è¶³æˆæ¯”ä¾‹ã€‚è€Œå¯¹å‘é‡æ‰€èƒ½è¿›è¡Œçš„æ“ä½œä¸è¿‡ç›¸åŠ å’Œæ•°ä¹˜ä¸¤ç§ã€‚ æ‰€ä»¥ï¼Œæœ€åˆä»¥ç©ºé—´ä¸­çš„ç®­å¤´ä¸ºèƒŒæ™¯è€ƒè™‘çš„çº¿æ€§ä»£æ•°çš„åˆç†æ¦‚å¿µå’Œè§£å†³é—®é¢˜çš„æ‰‹æ®µï¼Œåº”è¯¥èƒ½å¤ŸåŸå°ä¸åŠ¨åœ°è¢«æˆ‘ä»¬å–å‡ºæ¥ç”¨äºå‡½æ•°ã€‚ æ¯”å¦‚ï¼š çº¿æ€§å˜æ¢ï¼šå‡½æ•°çš„çº¿æ€§å˜æ¢æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘å¹¶æŠŠå®ƒå˜æˆå¦ä¸€ä¸ªå‡½æ•°ã€‚å¾®ç§¯åˆ†ä¸­çš„å¯¼æ•°æ»¡è¶³è¿™ä¸ªæ€§è´¨ã€‚ å…³äºè¿™ç‚¹ï¼Œæœ‰æ—¶ä½ å¬åˆ°çš„æ˜¯â€œç®—å­â€è€Œä¸æ˜¯â€œå˜æ¢â€ ã€‚ï¼ˆçº¿æ€§ç®—å­ï¼‰ æ³¨æ„ï¼šå¯¼æ•°æ—¢æ»¡è¶³å¯åŠ ï¼Œåˆæ»¡è¶³æˆæ¯”ä¾‹ã€‚æ‰€ä»¥æ±‚å¯¼æ˜¯ä¸€ç§çº¿æ€§è¿ç®—ã€‚ åŸºå‘é‡ï¼šå‡½æ•°ç©ºé—´å€¾å‘äºæ— ç©·ç»´ï¼Œæ•´ä¸ªç©ºé—´åŒ…å«äº†ä»»æ„é«˜æ¬¡çš„å¤šé¡¹å¼ã€‚ æˆ‘ä»¬è§åˆ°çš„å¤šé¡¹å¼å¾€å¾€æ˜¯æœ‰é™é¡¹ã€‚ æˆ‘ä»¬è¦åšçš„æ˜¯ç»™è¿™ä¸ªç©ºé—´èµ‹äºˆåæ ‡çš„å«ä¹‰ï¼Œè¿™éœ€è¦é€‰å–ä¸€ä¸ªåŸºã€‚å› ä¸ºå¤šé¡¹å¼å·²ç»æ˜¯æ•°ä¹˜xçš„ä¸åŒæ¬¡å¹‚å†åšåŠ å’Œçš„å½¢å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆè‡ªç„¶åœ°å–xçš„ä¸åŒæ¬¡å¹‚ä½œä¸ºåŸºå‡½æ•°ã€‚ åŸºå‡½æ•°ä¸¾ä¾‹ï¼š$$1x^2+3x+5$$ç¬¬ä¸€ä¸ªåŸºå‡½æ•°æ˜¯å¸¸å‡½æ•°ï¼šb0(x) 1 (5*15) ç¬¬äºŒä¸ªåŸºå‡½æ•°æ˜¯b1(x) x ç¬¬ä¸‰ä¸ªåŸºå‡½æ•°æ˜¯b2(x) x^2^ â€¦â€¦ åŸºå‡½æ•°åœ¨è¿™é‡Œèµ·åˆ°çš„ä½œç”¨ï¼Œå’Œiå¸½ã€jå¸½å’Œkå¸½åœ¨å‘é‡(ç®­å¤´)çš„ä¸–ç•Œä¸­èµ·åˆ°çš„ä½œç”¨ç±»ä¼¼ã€‚ å› ä¸ºå¤šé¡¹å¼çš„æ¬¡æ•°å¯ä»¥ä»»æ„é«˜ï¼Œæ‰€ä»¥è¿™ä¸ªåŸºå‡½æ•°é›†ä¹Ÿæ˜¯æ— ç©·å¤§çš„ã€‚ ä¸Šè¿°å¤šé¡¹å¼çš„åæ ‡å°±æ˜¯ 5ã€3ã€1ã€0ã€0ã€0â€¦â€¦ å¤šé¡¹å¼4x^5^-5x^2^çš„åæ ‡å°±æ˜¯0ã€0ã€-5ã€0ã€0ã€4ï¼Œç„¶ååŠ ä¸Šä¸€ä¸²æ— é™é•¿çš„0ã€‚ æ€»çš„æ¥è¯´ï¼Œå› ä¸ºæ¯ä¸€ä¸ªå¤šé¡¹å¼éƒ½åªæœ‰æœ‰é™é¡¹ï¼Œæ‰€ä»¥å®ƒçš„åæ ‡å°±æ˜¯æœ‰é™é•¿çš„ä¸€ä¸²æ•°ï¼Œå†è·Ÿä¸Šæ— é™é•¿çš„ä¸€ä¸²é›¶ã€‚ çŸ©é˜µæ±‚å¯¼ï¼šåœ¨è¿™ä¸ªåæ ‡ç³»ä¸­ï¼Œæ±‚å¯¼æ˜¯ç”¨ä¸€ä¸ªæ— é™é˜¶çŸ©é˜µæè¿°çš„ã€‚ ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ„å»ºè¿™ä¸ªçŸ©é˜µ:æ±‚æ¯ä¸€ä¸ªåŸºå‡½æ•°çš„å¯¼æ•°ï¼Œç„¶åæŠŠç»“æœæ”¾åœ¨å¯¹åº”åˆ—ã€‚$$\\begin{matrix}b_0(x)1\\b_1(x)x\\b_2(x)x_2\\b_3(x)x_3\\\\end{matrix}\\qquad\\frac{d}{dx}b_0(x)\\frac{d}{dx}(1)\\left[\\begin{matrix}0 \\ 0 \\ 0 \\0\\end{matrix}\\right]\\qquad\\frac{d}{dx}b_1(x)\\frac{d}{dx}(x)\\left[\\begin{matrix}1 \\ 0 \\ 0 \\0\\end{matrix}\\right]\\qquad$$ $$\\frac{d}{dx}b_2(x)\\frac{d}{dx}(x^2)2x\\left[\\begin{matrix}0 \\ 2 \\ 0 \\0\\end{matrix}\\right]\\qquad\\frac{d}{dx}b_3(x)\\frac{d}{dx}(x^3)2x\\left[\\begin{matrix}0 \\ 0 \\ 3 \\0\\end{matrix}\\right]\\qquad\\frac{d}{dx}b_4(x)\\frac{d}{dx}(x^4)2x\\left[\\begin{matrix}0 \\ 0 \\ 0 \\4\\end{matrix}\\right]$$ æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªçŸ©é˜µï¼š$$\\left[\\begin{matrix}\\ 0 1 0 0 0\\0 0 2 0 0\\0 0 0 3 0\\0 0 0 0 4\\end{matrix}\\right]$$ æ€»ç»“ï¼š ä¹ä¸€çœ‹ï¼ŒçŸ©é˜µå‘é‡ä¹˜æ³•å’Œæ±‚å¯¼åƒæ˜¯æ¯«ä¸ç›¸å¹²çš„ã€‚ çº¿æ€§ä»£æ•° å‡½æ•° Linear transformations çº¿æ€§å˜æ¢ Linear operatorsçº¿æ€§ç®—å­ Dot products ç‚¹ç§¯ Inner products å†…ç§¯ Eigenvectors ç‰¹å¾å‘é‡ Eigenfunctionsç‰¹å¾å‡½æ•° å‘é‡ç©ºé—´ï¼š æˆ‘æƒ³åœ¨è¿™é‡ŒæŒ‡å‡ºçš„æ˜¯ï¼Œæ•°å­¦ä¸­æœ‰å¾ˆå¤šç±»ä¼¼å‘é‡çš„äº‹ç‰©ï¼Œåªè¦ä½ å¤„ç†çš„å¯¹è±¡é›†å…·æœ‰åˆç†çš„æ•°ä¹˜å’Œç›¸åŠ æ¦‚å¿µã€‚ ä¸ç®¡æ˜¯ç©ºé—´ä¸­çš„ç®­å¤´ã€ä¸€ç»„æ•°ã€å‡½æ•°çš„é›†åˆï¼Œè¿˜æ˜¯ä½ å®šä¹‰çš„å…¶ä»–å¥‡æ€ªä¸œè¥¿çš„é›†åˆã€‚çº¿æ€§ä»£æ•°ä¸­æ‰€æœ‰å…³äºå‘é‡ã€çº¿æ€§å˜æ¢å’Œå…¶ä»–çš„æ¦‚å¿µéƒ½åº”è¯¥é€‚ç”¨äºå®ƒã€‚è¿™äº›ç±»ä¼¼å‘é‡çš„äº‹ç‰©ï¼Œæ¯”å¦‚ç®­å¤´ã€ä¸€ç»„æ•°ã€å‡½æ•°ç­‰ï¼Œå®ƒä»¬æ„æˆçš„é›†åˆè¢«ç§°ä¸ºâ€œå‘é‡ç©ºé—´â€™ é’ˆå¯¹å‘é‡ç©ºé—´ï¼Œæ•°å­¦å®¶ä»¬å»ºç«‹äº†ä¸€ç³»åˆ—å‘é‡åŠ æ³•å’Œæ•°ä¹˜å¿…é¡»éµå®ˆçš„è§„åˆ™ï¼Œè¿™äº›è§„åˆ™ç§°ä¸ºâ€œå…¬ç†â€ã€‚ åªè¦ä½ å®šä¹‰çš„æ–°å®¶ä¼™æ»¡è¶³è¿™äº›è§„åˆ™ï¼Œé‚£ä½ å°±å¯ä»¥ç§°å®ƒä¸ºå‘é‡ï¼Œå¹¶è¿ç”¨æˆ‘ä»¬å­¦åˆ°çš„é‚£äº›çº¿æ€§å˜æ¢ä¹‹ç±»çš„å·¥å…·ã€‚ åœ¨çº¿æ€§ä»£æ•°çš„ç°ä»£ç†è®ºä¸­ï¼Œæœè¦è®©æ‰€æœ‰å·²ç»å»ºç«‹å¥½çš„ç†è®ºå’Œæ¦‚å¿µé€‚ç”¨äºä¸€ä¸ªå‘é‡ç©ºé—´ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»æ»¡è¶³å…«æ¡å…¬ç†ã€‚å¦‚æœè¦è®©æ‰€æœ‰å·²ç»å»ºç«‹å¥½çš„ç†è®ºå’Œæ¦‚å¿µé€‚ç”¨äºä¸€ä¸ªå‘é‡ç©ºé—´ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»æ»¡è¶³è¿™å…«æ¡å…¬ç†ï¼Œç±»ä¼¼â€œå…¥åœºåˆ¸â€ä¼¼çš„ä¸œè¥¿ã€‚ è¿™äº›å…¬ç†å¹¶éåŸºç¡€çš„è‡ªç„¶æ³•åˆ™ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªåª’ä»‹ã€‚ä¸€è¾¹è¿æ¥ç€ä½ ï¼Œä¹Ÿå°±æ˜¯å‘ç°è¿™äº›ç»“è®ºçš„æ•°å­¦å®¶ï¼Œå¦ä¸€è¾¹è¿æ¥ç€å…¶ä»–äººï¼Œä¹Ÿå°±æ˜¯æƒ³è¦æŠŠè¿™äº›ç»“è®ºåº”ç”¨äºæ–°çš„å‘é‡ç©ºé—´çš„äººã€‚åªè¦å‘é‡çš„å®šä¹‰æ»¡è¶³è¿™äº›å…¬ç†ï¼Œå°±èƒ½é¡ºåˆ©åœ°åº”ç”¨æˆ‘ä»¬å‘ç°çš„çš„æ‰€æœ‰å…³äºå‘é‡çš„ç»“è®ºã€‚ å‘é‡ä¸æ­¢æ˜¯æŸä¸ªâ€œç†Ÿé¢å­”â€ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ é˜…è¯»çš„æ¯ä¸€æœ¬æ•™ç§‘ä¹¦éƒ½ä¼šæ ¹æ®å¯åŠ æ€§å’Œæˆæ¯”ä¾‹æ¥å®šä¹‰çº¿æ€§å˜æ¢ï¼Œè€Œä¸æ˜¯ç”¨ç½‘æ ¼çº¿ä¿æŒå¹³è¡Œä¸”ç­‰è·åˆ†å¸ƒä»€ä¹ˆçš„æ¥å®šä¹‰ã€‚å³ä¾¿åè€…æ›´åŠ ç›´è§‚ã€‚ **å‘é‡çš„å½¢åŠ¿å¹¶ä¸é‡è¦ã€‚**åªè¦å°šé‡ç›¸åŠ å’Œæ•°ä¹˜çš„æ¦‚å¿µéµå®ˆä»¥ä¸Šè§„åˆ™å³å¯ã€‚ **æ‰€ä»¥å¯¹äºâ€œå‘é‡æ˜¯ä»€ä¹ˆâ€è¿™ä¸ªé—®é¢˜ï¼Œæ•°å­¦å®¶ä¼šç›´æ¥å¿½ç•¥ä¸ä½œç­”ã€‚**å°±å¥½åƒé—® 3 è¿™ä¸ªæŠ½è±¡æ•°å­—æ˜¯ä»€ä¹ˆå«ä¹‰ä¸€æ ·ã€‚ å› æ­¤ï¼Œä½ å¾€å¾€ä¼šæŠŠä½ çš„æ‰€æœ‰ç»“è®ºæŠ½è±¡åœ°è¡¨è¿°å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ä»…ä»…æ ¹æ®è¿™äº›å…¬ç†è¡¨è¿°ã€‚è€Œä¸æ˜¯é›†ä¸­äºæŸä¸€ç§ç‰¹å®šçš„å‘é‡ä¸Šï¼Œåƒæ˜¯ç©ºé—´ä¸­çš„ç®­å¤´æˆ–è€…å‡½æ•°ç­‰ 13.Crameræ³•åˆ™(å…‹æ‹‰é»˜å…‹è±å§†)è®¡ç®—çº¿æ€§æ–¹ç¨‹ç»„ï¼Œå¾€å¾€ç”¨é«˜æ–¯æ¶ˆå…ƒæ³•ï¼Œè€Œä¸ç”¨å…‹æ‹‰é»˜æ³•åˆ™ã€‚ä½†äº†è§£å®ƒçš„å‡ ä½•æ„ä¹‰ä¼šå¸®ä½ åŠ æ·±å¯¹çº¿æ€§æ–¹ç¨‹ç»„çš„ç†è§£ã€‚ ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„çš„å°ä¾‹å­ï¼›$$\\left{\\begin{aligned}3x+2y-4 \\-x+2y-2\\end{aligned}\\right.$$ **å¯ä»¥æŠŠè¿™ä¸ªæ–¹ç¨‹ç»„çœ‹ä½œå¯¹[x y]å‘é‡çš„ä¸€ä¸ªå·²çŸ¥çš„çŸ©é˜µå˜æ¢:**è€Œä¸”å˜æ¢åçš„ç»“æœå·²çŸ¥ åœ¨è¿™é‡Œæ˜¯[-4;-2]$$\\left[\\begin{matrix}3 2\\-1 2\\end{matrix}\\right]\\left[\\begin{matrix}x \\ y\\end{matrix}\\right]\\left[\\begin{matrix}-4 \\ -2\\end{matrix}\\right]$$ æ³¨æ„ï¼šçŸ©é˜µçš„åˆ—å‘é‡åæ˜ äº†çŸ©é˜µæ˜¯å¦‚ä½•å˜æ¢çš„ï¼Œåˆ†åˆ«å‘Šè¯‰äº†ä½ åŸºå‘é‡å˜æ¢åçš„ä½ç½®â€”â€”ä¹Ÿå°±æ˜¯æ±‚[2,2] [3,-1]åæ ‡ç³»ä¸­çš„[-4ï¼Œ-2]å¯¹åº”åˆ°ç›´è§’åæ ‡ç³»ä¸­æ˜¯å¤šå°‘ æ‰€ä»¥é—®é¢˜å˜æˆäº† å“ªä¸ªè¾“å…¥å‘é‡[x,y] åœ¨å˜æ¢åä¼šæˆä¸º[-4;-2]ã€‚ ç”±5.çº¿æ€§æ–¹ç¨‹ç»„é‚£ä¸€èŠ‚ï¼ŒçŸ©é˜µAä»£è¡¨ä¸€ç§çº¿æ€§å˜æ¢ï¼Œæ‰€ä»¥ æ±‚è§£Axvæ„å‘³ç€æˆ‘ä»¬å»å¯»æ‰¾ä¸€ä¸ªå‘é‡xï¼Œä½¿å¾—å®ƒåœ¨å˜æ¢åä¸vé‡åˆã€‚ è¿™é‡Œæœ‰ä¸¤ç§ç»“æœï¼Œå–å†³äºçŸ©é˜µå˜æ¢æ˜¯å¦é™ç»´ï¼ˆè¡Œåˆ—å¼æ˜¯å¦ä¸º0ï¼‰ã€‚ å¦‚æœè¡Œåˆ—å¼ä¸º0ï¼Œæ„å‘³ç€è¦ä¹ˆä»»ä½•è¾“å…¥å‘é‡éƒ½ä¸ä¼šå˜æ¢åˆ°ç»™å®šçš„è¾“å‡ºå‘é‡ï¼Œè¦ä¹ˆæœ‰æ— æ•°ä¸ªå‘é‡éƒ½ä¼šå˜æ¢åˆ°ç»™å®šçš„å‘é‡ã€‚ ä»¥äºŒç»´ç©ºé—´ä¸ºä¾‹ã€‚å‰ä¸€ç§æ˜¯äºŒç»´è¾“å…¥å‘é‡çš„ç©ºé—´å‹ç¼©æˆäº†ä¸€æ¡çº¿ï¼Œè€Œè¾“å‡ºå‘é‡åœ¨çº¿ä¹‹å¤–ï¼›åä¸€ç§æ˜¯è¾“å‡ºå‘é‡æ°å¥½åœ¨çº¿å†…ï¼Œæ‰€ä»¥æ‰€æœ‰è¾“å…¥å‘é‡éƒ½æ»¡è¶³ã€‚ è¡Œåˆ—å¼ä¸ä¸º0æ˜¯æˆ‘ä»¬ä»Šå¤©é‡ç‚¹æ¢è®¨çš„ï¼Œæ„å‘³ç€çº¿æ€§å˜æ¢åç»´æ•°ä¾ç„¶ç›¸åŒã€‚ æ¯ä¸€ä¸ªè¾“å…¥å‘é‡éƒ½å¯¹åº”ä¸€ä¸ªè¾“å‡ºå‘é‡ï¼Œåä¹‹äº¦ç„¶ã€‚ ä¸‹é¢æ˜¯è¡Œåˆ—å¼ä¸ä¸º0ï¼ˆä¸é™ç»´ï¼‰çš„æƒ…å†µã€‚ æ¥çœ‹ä¸€ä¸ªçŒœæƒ³ï¼š$$\\left[\\begin{matrix}x\\y\\end{matrix}\\right]\\left[\\begin{matrix}1 \\ 0\\end{matrix}\\right]x\\longrightarrow T\\left(\\left[\\begin{matrix}x\\y \\end{matrix}\\right]\\right)\\cdot T\\left(\\left[\\begin{matrix}1\\0\\end{matrix}\\right]\\right)x\\\\left[\\begin{matrix}x\\y\\end{matrix}\\right]\\left[\\begin{matrix}0\\1\\end{matrix}\\right]y\\longrightarrow T\\left(\\left[\\begin{matrix}x\\y\\end{matrix}\\right]\\right)\\cdot T\\left(\\left[\\begin{matrix}0\\1\\end{matrix}\\right]\\right)y\\T(å‘é‡)æ˜¯æŒ‡å‘é‡çº¿æ€§å˜æ¢å$$å¦‚æœè¿™ä¸ªæƒ…å†µåˆç†çš„è¯ï¼Œæˆ‘ä»¬èƒ½å¾ˆè½»æ¾ç®—å‡º[x;y]çš„è§£ã€‚å› ä¸ºç›®æ ‡å‘é‡[-4 -2] ï¼Œä¸¤ä¸ªåŸºå‘é‡çº¿æ€§å˜æ¢åçš„çŠ¶æ€(çŸ©é˜µ)éƒ½æ˜¯å·²çŸ¥çš„ã€‚ å¯æƒœè¿™ä¸ªçŒœæƒ³æ˜¯é”™è¯¯çš„ã€‚å¯¹å¤§å¤šæ•°çº¿æ€§å˜æ¢æ¥è¯´ ç‚¹ç§¯ä¼šéšç€å˜æ¢è€Œæ”¹å˜ã€‚ æ¯”å¦‚è¯´ï¼Œæœ‰ä¸¤ä¸ªå‘é‡å¤§è‡´æŒ‡å‘åŒä¸€ä¸ªæ–¹å‘ï¼Œç‚¹ç§¯ä¸ºæ­£ï¼Œå˜æ¢åè¢«æ‹‰è¿œï¼Œåƒè¿™æ ·å®ƒä»¬çš„ç‚¹ç§¯å°±å˜æˆè´Ÿæ•°äº†ã€‚ç±»ä¼¼çš„å°±ç®—ä¸¤å‘é‡ç›¸äº’å‚ç›´ ç‚¹ç§¯ä¸ºé›¶ æ¯”å¦‚ä¸¤ä¸ªåŸºå‘é‡ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ä¿è¯å®ƒä»¬åœ¨å˜æ¢åä¾ç„¶ç›¸äº’å‚ç›´ã€‚ é‚£äº›ä¸æ”¹å˜ç‚¹ç§¯çš„çŸ©é˜µå˜æ¢ï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„åå­—ï¼šæ­£äº¤å˜æ¢ã€‚ å®ƒä»¬ä½¿åŸºå‘é‡åœ¨å˜æ¢åä¾ç„¶ä¿æŒå•ä½é•¿åº¦ã€ä¸”ç›¸äº’å‚ç›´ï¼Œå¯ä»¥æƒ³æˆæ˜¯æ—‹è½¬çŸ©é˜µï¼Œ ç›¸å½“äºä½œåˆšä½“è¿åŠ¨æ²¡æœ‰æ‹‰ä¼¸å‹ç¼©æˆ–å˜å½¢ã€‚ åœ¨æ­£äº¤å˜æ¢ä¸­æ±‚è§£éå¸¸ç®€å•ã€‚å› ä¸ºç‚¹ç§¯ä¸å˜ï¼Œæ‰€ä»¥å·²çŸ¥çš„è¾“å‡ºå‘é‡å’ŒçŸ©é˜µçš„åˆ—å‘é‡çš„ç‚¹ç§¯ï¼Œåˆ†åˆ«ç­‰åŒäºæœªçŸ¥è¾“å…¥å‘é‡å’Œå„ä¸ªåŸºå‘é‡çš„ç‚¹ç§¯ã€‚ ä¸¾ä¾‹ï¼š$$\\left[\\begin{matrix}cos(30Â°) -sin(30Â°)\\sin(30Â°) cos(30Â°)\\end{matrix}\\right]\\left[\\begin{matrix}x \\ y\\end{matrix}\\right]\\left[\\begin{matrix}1 \\ 2 \\end{matrix}\\right]\\x\\left[\\begin{matrix}1 \\ 2 \\end{matrix}\\right]\\cdot\\left[\\begin{matrix}cos(30Â°) \\ sin(30Â°)\\\\end{matrix}\\right]\\qquady\\left[\\begin{matrix}1 \\ 2 \\end{matrix}\\right]\\cdot\\left[\\begin{matrix}-sin(30Â°) \\ cos(30Â°)\\end{matrix}\\right]$$è™½ç„¶è¿™ä¸ªæ€è·¯å¯¹å¤§å¤šæ•°çº¿æ€§æ–¹ç¨‹ç»„éƒ½ä¸æˆç«‹ï¼Œä½†å®ƒç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ–¹å‘å»æ€è€ƒï¼Œæœ‰æ²¡æœ‰å¦ä¸€ç§å¯¹è¾“å‡ºå‘é‡åæ ‡å€¼çš„å‡ ä½•è§£é‡Šã€‚ è¿™ä¸ªç”±ç¬¬ä¸€ä¸ªåŸºå‘é‡iå’ŒæœªçŸ¥çš„è¾“å…¥å‘é‡ã€Œx;y]ç»„æˆçš„å¹³è¡Œå››è¾¹å½¢ã€‚é¢ç§¯æ˜¯xè½´åŸºå‘é‡i ä¹˜ä»¥ è¾“å…¥å‘é‡ çš„yå€¼ã€‚ äºæ˜¯æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯æ¥è¡¨ç¤ºyå€¼ã€‚ å½“ç„¶é¢ç§¯æ˜¯æœ‰å‘çš„ã€‚å¦‚æœå‘é‡çš„våæ ‡ä¸ºè´Ÿï¼Œåˆ™å››è¾¹å½¢é¢ç§¯ä¹Ÿä¸ºè´Ÿã€‚ ï¼ˆå‰ææ˜¯ä½ æŠŠåŸºå‘é‡iæ”¾åœ¨ç¬¬ä¸€ä½æ¥å®šä¹‰å¹³è¡Œå››è¾¹å½¢ï¼‰ åŒæ ·è§‚å¯Ÿç”±æœªçŸ¥çš„è¾“å…¥å‘é‡ï¼Œå’Œç¬¬äºŒåŸºå‘é‡jç»„æˆçš„å¹³è¡Œå››è¾¹å½¢ã€‚ ä»¥æ­¤ç±»æ¯”ï¼šçœ‹ä¸‰ç»´ç©ºé—´ã€‚ å¯¹äºå‘é‡çš„zè½´åæ ‡ï¼Œå¯èƒ½ä½ çš„ç¬¬ä¸€ååº”æ˜¯å‘é‡åœ¨zè½´ä¸ŠæŠ•å½±çš„åæ ‡å€¼ï¼Œæ˜¯å®ƒä¸ç¬¬ä¸‰ä¸ªåŸºå‘é‡kçš„ç‚¹ã€‚ä½†â€¦â€¦ æ›´å¥½çš„æ–¹æ³•è¿˜æ˜¯è€ƒè™‘åŸºå‘é‡ï¼šè€ƒè™‘å‘é‡ä¸å¦å¤–ä¸¤ä¸ªåŸºå‘é‡iå’Œiæ‰€ç»„æˆçš„å¹³è¡Œå…­é¢ä½“ï¼Œåº•é¢æ˜¯ç”±åŸºå‘é‡iå’Œiç»„æˆçš„æ­£æ–¹å½¢ï¼Œé¢ç§¯æ˜¯1ã€‚ æ‰€ä»¥å®ƒçš„ä½“ç§¯å€¼ç­‰åŒä¸å®ƒçš„é«˜ ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¿™ä¸ªå‘é‡çš„zåæ ‡ åŒæ ·çš„ï¼Œç”¨è¿™ä¸ªå¥‡æ€ªçš„æ–¹æ³•æ¥æè¿°å‘é‡åœ¨æŸä¸€ä¸ªè½´ä¸Šçš„åæ ‡å€¼ï¼Œå¯ä»¥å…ˆè€ƒè™‘å‘é‡æœ¬èº«ï¼Œå’Œé™¤è¿™ä¸ªè½´ä¹‹å¤–çš„ä¸¤ä¸ªåŸºå‘é‡ç»„æˆçš„å¹³è¡Œå…­é¢ä½“ï¼Œç„¶åå…¶ä½“ç§¯å°±æ˜¯å¯¹åº”çš„åæ ‡å€¼ã€‚ å¦å¤– æˆ‘ä»¬å¯ä»¥è®¨è®ºå¹³è¡Œå…­é¢ä½“ä½“ç§¯çš„æœ‰å‘æ€§ï¼Œå°±æ˜¯ä¹‹å‰åœ¨è¡Œåˆ—å¼è§†é¢‘ä¸­æåˆ°çš„å³æ‰‹æ³•åˆ™ã€‚äºæ˜¯åˆ—å‘é‡çš„é¡ºåºå°±å¾ˆé‡è¦äº†ï¼Œåæ ‡çš„æ­£è´Ÿæ€§ä¹Ÿæœ‰äº†æ„ä¹‰ã€‚ æ³¨æ„è€ƒè™‘æœ‰å‘é¢ç§¯ï¼Œè¿™å¯¹äºæˆ‘ä»¬æ‹“å±•åˆ°é«˜ç»´çš„è®¡ç®—å¾ˆæœ‰ç”¨ï¼Œä¹Ÿå°±ä¼šæ˜ç™½â€œä¸ºä»€ä¹ˆå˜æ¢åè¡Œåˆ—å¼æ˜¯è¿™ä¹ˆç®—çš„ã€‚ $$\\mathbf{x}det\\left(\\left[\\begin{matrix}\\mathbf{x} 0 0 \\y 1 0 \\z 0 1\\end{matrix}\\right]\\right)\\qquad\\mathbf{y}det\\left(\\left[\\begin{matrix}x 0 0 \\\\mathbf{y} 1 0 \\z 0 1\\end{matrix}\\right]\\right)\\qquad\\mathbf{z}det\\left(\\left[\\begin{matrix}x 0 0 \\y 1 0 \\\\mathbf{z} 0 1\\end{matrix}\\right]\\right)$$ æ³¨æ„åŠ ç²—ã€‚ å¥½äº† ä¸ºä»€ä¹ˆè¦æŠŠåæ ‡å€¼å’Œé¢ç§¯æˆ–ä½“ç§¯è”ç³»èµ·æ¥å‘¢ï¼Ÿå› ä¸ºå½“ä½ åšçŸ©é˜µå˜æ¢åï¼Œå¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ä¸ä¸€å®šä¿æŒä¸å˜ï¼Œå¯èƒ½æˆæ¯”ä¾‹å¢å¤§æˆ–å‡å°ã€‚ æˆæ¯”ä¾‹æ”¾ç¼©æ„å‘³ç€ï¼Œæˆ‘ä»¬è¦å¼•å…¥è¡Œåˆ—å¼äº†â€”â€” ç”±4.è¡Œåˆ—å¼é‚£ä¸€èŠ‚ï¼šè¡Œåˆ—å¼ä»£è¡¨æµ‹é‡ä¸€ä¸ªç»™å®šåŒºåŸŸé¢ç§¯å¢å¤§æˆ–å‡å°çš„æ¯”ä¾‹ ä¸¾ä¸ªä¾‹å­(ä¸€ä¸ªæ–°çš„å¹³è¡Œå››è¾¹å½¢)ï¼š$$\\left[\\begin{matrix}2 -1\\0 1\\end{matrix}\\right]\\left[\\begin{matrix}x \\ y\\end{matrix}\\right]\\left[\\begin{matrix}4 \\ 2\\end{matrix}\\right]$$æ¯”å¦‚ è€ƒè™‘ä¸€ä¸ªæ–°çš„å¹³è¡Œå››è¾¹å½¢ï¼Œç¬¬ä¸€æ¡è¾¹æ˜¯å˜æ¢åçš„ç¬¬ä¸€åŸºå‘é‡(ä¹Ÿå°±æ˜¯çŸ©é˜µçš„ç¬¬ä¸€åˆ—)[2 0]ã€‚ç¬¬äºŒæ¡è¾¹æ˜¯å˜æ¢åçš„[x,y] é‚£å®ƒçš„é¢ç§¯æ˜¯å¤šå¤§å‘¢ï¼Ÿ å˜æ¢å‰çš„é¢ç§¯æ˜¯æœªçŸ¥è¾“å…¥å‘é‡çš„yåæ ‡å€¼ï¼Œæ‰€ä»¥å˜æ¢åçš„é¢ç§¯ç­‰äºçŸ©é˜µçš„è¡Œåˆ—å¼ä¹˜ä»¥yå€¼ æ‰€ä»¥å¯ä»¥ç”¨è¾“å‡ºçš„å¹³è¡Œå››è¾¹å½¢é¢ç§¯ï¼Œé™¤ä»¥çŸ©é˜µçš„è¡Œåˆ—å¼è®¡ç®—å‡ºyã€‚$$y \\frac{area}{det(A)}$$é‚£æ€ä¹ˆæ±‚å˜æ¢åçš„é¢ç§¯areaå‘¢ï¼Ÿ å› ä¸ºè¿™æ˜¯ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ç»„ï¼Œæˆ‘ä»¬çŸ¥é“çº¿æ€§å˜æ¢åçš„å‘é‡[4 2]ã€‚ æ—¢ç„¶æˆ‘ä»¬å·²çŸ¥æœ€ç»ˆå˜æ¢åçš„å‘é‡,é‚£ä¹ˆ å¯ä»¥æ„é€ ä¸€ä¸ªæ–°çŸ©é˜µ ç¬¬ä¸€åˆ—å’Œæˆ‘ä»¬åŸå…ˆçš„çŸ©é˜µç›¸åŒ[2 0],è€Œç¬¬äºŒåˆ—æ˜¯è¾“å‡ºå‘é‡ã€‚ ç„¶åå–è¿™ä¸ªæ–°çŸ©é˜µçš„è¡Œåˆ—å¼â€”â€” ä½ çœ‹ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨åˆ°å˜æ¢åçš„ä¸¤ä¸ªå‘é‡ï¼Œä¹Ÿå°±æ˜¯çŸ©é˜µçš„åˆ—å‘é‡ä»¬å’Œå·²çŸ¥è¾“å‡ºé—®é‡ï¼Œå°±èƒ½è®¡ç®—å¾—å‡ºæœªçŸ¥è¾“å…¥å‘é‡çš„yå€¼ã€‚æ–¹ç¨‹å·²ç»è§£å¥½ä¸€åŠäº†ã€‚ $$area \\left(\\left[\\begin{matrix}2 4 \\0 2 \\end{matrix}\\right]\\right)\\qquad y \\frac{area}{det(A)}$$æˆ‘ä»¬å¯ä»¥ç”¨åŒæ ·æ–¹æ³•å¾—åˆ° x å€¼ã€‚ æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„å¹³è¡Œå››è¾¹å½¢å›å¤´æ¥çœ‹ã€‚ (æœ‰å‘)é¢ç§¯ä¸ºè¾“å…¥å‘é‡çš„xå€¼ ç”±æœªçŸ¥å‘é‡å’ŒjåŸºå‘é‡æ„æˆï¼Œè€Œå˜æ¢åçš„å®ƒ ç”±è¾“å‡ºå‘é‡å’ŒçŸ©é˜µçš„ç¬¬äºŒåˆ—ç»„æˆã€‚é¢ç§¯å¢å¤§çš„æ¯”ä¾‹æ˜¯çŸ©é˜µçš„è¡Œåˆ—å¼ï¼Œæ‰€ä»¥è¾“å…¥å‘é‡çš„xå€¼æ˜¯æ–°çš„é¢ç§¯é™¤ä»¥å˜æ¢çŸ©é˜µçš„è¡Œåˆ—å¼ã€‚ äºæ˜¯å¯ä»¥åˆ›é€ ä¸€ä¸ªæ–°çŸ©é˜µæ¥è®¡ç®—å˜æ¢åçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼Œè¿™ä¸ªæ–°çŸ©é˜µç¬¬ä¸€åˆ—ä¸ºè¾“å‡ºå‘é‡ ç¬¬äºŒåˆ—å’Œå˜æ¢çŸ©é˜µç›¸åŒã€‚ æ‰€ä»¥å’Œä¸Šé¢çš„é”™è¯¯çŒœæƒ³ä¸€æ ·ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨åˆ°è¾“å‡ºéƒ¨åˆ†çš„æ•°å€¼(è¿™äº›æˆ‘ä»¬åœ¨æœ€åˆçº¿æ€§æ–¹ç¨‹ç»„é‡Œå·²çŸ¥çš„æ•°å€¼) ï¼Œ **å°±èƒ½è§£å‡ºxå€¼ã€‚**æ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼ è¿™ä¸ªçº¿æ€§æ–¹ç¨‹ç»„çš„è§£æ³• è¢«ç§°ä¸ºå…‹è±å§†æ³•åˆ™"},{"title":"å…³äº vim - YouCompleteMe çš„å®‰è£…","path":"/wiki/linux/å…³äº vim - YouCompleteMe çš„å®‰è£….html","content":"å‰æï¼š ç¡®ä¿ vim ç‰ˆæœ¬æ˜¯ 7.4.143 æˆ–ä»¥ä¸Šï¼Œå¹¶ä¸”æ”¯æŒ python 23 è„šæœ¬ã€‚ å…ˆé€šè¿‡ Git clone æˆ–è€… plug-install çš„æ–¹å¼å®‰è£… YCM æ­¥éª¤ä¸€ï¼š åŸºç¡€é…ä»¶è¦è£…å¥½ï¼Œä¸ç„¶éº»çƒ¦é‡é‡ï¼š C++å®¶æ—çš„é…ä»¶ï¼š sudo apt-get install llvm clang-3.9 libclang-3.9-dev libboost-all-dev æ­¥éª¤äºŒï¼š æˆ‘ä»¬éœ€è¦æ‰¾åˆ°libclang.soçš„è·¯å¾„åœ¨å“ªé‡Œï¼Œä¸€èˆ¬æ˜¯åœ¨**usr**ç›®å½•ä¸‹ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æŸ¥æ‰¾ find /usr/ -name libclang.so* cmake -G generator . ~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp å®˜æ–¹è§£é‡Šï¼š For those who want to use the system version of boost, you would pass -DUSE_SYSTEM_BOOST=ON to cmake. This may be necessary on some systems where the bundled version of boost doesnâ€™t compile out of the box. åœ¨ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢è¿›è¡Œç¼–è¯‘å·¥ä½œã€‚ ç„¶åç¼–è¯‘(åœ¨æ–°å»ºçš„æ–‡ä»¶å¤¹é‡Œ)ã€‚ æˆ‘çš„è¿è¡Œä»£ç ï¼š cmake -G Unix Makefiles -DUSE_SYSTEM_BOOST=ON DEXTERNAL_LIBCLANG_PATH=/usr/local/lib/libclang.so -DUSE_SYSTEM_LIBCLANG=ON . ~/.vim/plugged/YouCompleteMe/third_party/ycmd/cpp æ³¨æ„ï¼šè¿™é‡Œæœ‰ä¸¤ä¸ªå‘ã€‚ ç¬¬ä¸€ï¼Œæ³¨æ„ libclang ç‰ˆæœ¬ã€‚ -- Using external libclang: /usr/lib/x86_64-linux-gnu/libclang-14.so.14.0.0 è§‚å¯Ÿç¼–è¯‘ç»“æŸæœ«å°¾å‡ è¡Œä¸­çš„ libclang ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚ã€‚ç³»ç»Ÿå®‰è£…çš„ libclang æœ€ä½è¦æ˜¯æ˜¯ 3.9ã€‚ å¦‚æœä½äºæ‰€éœ€ç‰ˆæœ¬ï¼Œå°±è¦åˆ é™¤ ~/.ycm_build ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½¿ç”¨ä¸‹é¢çš„cmakeé€‰é¡¹å‚æ•°æŒ‡å®š libclang çš„ç‰ˆæœ¬é‡æ–°ç¼–è¯‘ã€‚ DEXTERNAL_LIBCLANG_PATH=xxxxxx ç¬¬äºŒï¼Œå¦‚æœé€‰é¡¹å‚æ•°é‡Œçš„ä¸¤ä¸ªæ¨ªçº¿â€œâ€“â€ å‡ºé—®é¢˜ï¼Œä¼šå‡ºç°Cå®¶æ—è¯­ä¹‰è¡¥å…¨å¤±æ•ˆå’Œæ‰¾ä¸åˆ° â€œycm_coreâ€çš„æƒ…å†µã€‚ æˆåŠŸåçš„è¾“å‡ºç»“æœï¼Œåº”è¯¥åŒ…å«åœ¨å‰å‡ è¡Œï¼š Using libclang to provide semantic completion for C/C++/ObjC æ­¥éª¤ä¸‰ï¼š Makefile æ”¶å°¾ï¼šæ„å»º ycm_core å®˜æ–¹è§£é‡Šï¼š Now that configuration files have been generated, compile the libraries using this command: YCM å®˜æ–¹å¢™çƒˆæ¨èä½¿ç”¨ä¸Šæ¸¸ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ä»£æ›¿ç³»ç»Ÿè‡ªå¸¦çš„ libclang You can use the system libclang only if you are sure it is version 3.9 or higher, otherwise donâ€™t. Even if it is, we recommend using the official binaries from llvm.org if at all possible. Make sure you download the correct archive file for your OS. We STRONGLY recommend AGAINST use of the system libclang instead of the upstream compiled binaries. Random things may break. Save yourself the hassle and use the upstream pre-built libclang. ï¼ˆéœ€è¦python3-dev) cmake --build . --target ycm_support_libs --config Release æˆ‘çš„è¿è¡Œä»£ç ï¼š cmake --build . --target ycm_core --config Release ï¼ˆconfig Release é€‰é¡¹é€‚ç”¨äº windowsï¼‰ è¿™ä¸€æ­¥è¿è¡Œåä¼šæœ‰ 0% åˆ° 100% çš„ç¼–è¯‘æç¤ºï¼Œæœ€ç»ˆå‡ºç° [100%] Built target ycm_core çš„å­—æ ·ã€‚ æ­¥éª¤å››ï¼š æ·»åŠ  vim é…ç½® æ³¨æ„ä¸‹é¢çš„ python è§£é‡Šå™¨çš„è·¯å¾„è¦å’Œç¼–è¯‘ ycm_core çš„æ—¶å€™ä½¿ç”¨çš„ python è§£é‡Šå™¨æ˜¯ç›¸åŒçš„ç‰ˆæœ¬ #ï½/.vimrclet g:ycm_server_python_interpreter=/usr/bin/python3let g:ycm_global_ycm_extra_conf=~/.vim/plugged/YouCompleteMe/third_party/ycmd/examples/.ycm_extra_conf.py å…¶ä»–è¯­è¨€ï¼š java é¦–å…ˆæå‰å®‰è£…ç¯å¢ƒï¼š sudo apt install openjdk-8-jre ç„¶åç¼–è¯‘javaç¯èŠ‚ã€‚ python3 install.py --java-completer å®˜æ–¹æ–‡æ¡£ï¼š Java support: install JDK 17 and add --java-completer when calling install.py. python pythonè‡ªåŠ¨è¡¥å…¨ã€‚ç¼–è¯‘è¿‡å»å°±è¡Œã€‚ ä¸‹é¢æ˜¯ä¸€äº›å…³äºpythonè®¾ç½®çš„å®˜æ–¹æ–‡æ¡£ Python settings The Settings function allows users to specify the Python interpreter and the sys.path used by the completer to provide completion and code comprehension. No additional arguments are passed. The return value expected by the completer is a dictionary containing the following items: interpreter_path: (optional) path to the Python interpreter. ~ and environment variables in the path are expanded. If not an absolute path, it will be searched through the PATH. sys_path: (optional) list of paths prepended to sys.path. Usage example: def Settings( **kwargs ): return interpreter_path: ~/project/virtual_env/bin/python, sys_path: [ ~/project/third_party/module ] PythonSysPath( **kwargs ) Optional for Python support. This function allows further customization of the Python path sys.path. Its parameters are the possible items returned by the Settings function for the Python completer: interpreter_path: path to the Python interpreter. sys_path: list of Python paths from sys.path. The return value should be the modified list of Python paths. See ycmdâ€™s own .ycm_extra_conf.py for an example. é—®é¢˜æ±‡æ€»ï¼š 1.å¦‚æœYCMçš„ä½¿ç”¨è¿‡ç¨‹å‡ºç°äº†é—®é¢˜ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š YcmToggleLogs stderr 2.ä¸€ä¸ªå¾ˆç‰›çš„YCMè°ƒè¯•éšç¬”ï¼ˆé€šè¿‡ä¿®æ”¹æºç ä½¿YCMæ”¯æŒgbkæ ¼å¼ï¼‰ https://www.cnblogs.com/HGtz2222/p/5175151.html 3.ä¹‹å‰é‡åˆ°çš„ä¸€ä¸ªå‘ï¼š YCM çš„ python install.py ï¼Œå‡ºç°äº†æ‰¾ä¸åˆ° python çš„æƒ…å†µã€‚è¿™æ—¶éœ€è¦åˆ°å‡ºé—®é¢˜çš„æ–‡ä»¶é‡Œä¿®æ”¹ä»£ç ï¼Œå°†å…¶å¼•ç”¨çš„pythonå¤´æ–‡ä»¶ (pyhton.h) åŠ ä¸Šç›¸å¯¹è·¯å¾„ã€‚ å¦‚ï¼š includepython.h#æ”¹ä¸ºincludeusr/local/python.h"},{"title":"åŸºæœ¬å‘½ä»¤","path":"/wiki/linux/åŸºæœ¬å‘½ä»¤.html","content":"Linux åŸºæœ¬ç³»ç»Ÿåˆ†åŒºFHSï¼ˆFilesystem Hierarchy Standardï¼‰â€”â€” æ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡åŒ–æ ‡å‡†ã€‚ Filesystem Hierarchy Standardï¼ˆæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡åŒ–æ ‡å‡†ï¼‰çš„ç¼©å†™ï¼Œå¤šæ•°Linuxç‰ˆæœ¬é‡‡ç”¨è¿™ç§æ–‡ä»¶ç»„ç»‡å½¢å¼ï¼Œç±»ä¼¼äºWindowsæ“ä½œç³»ç»Ÿä¸­cç›˜çš„æ–‡ä»¶ç›®å½•ï¼ŒFHSé‡‡ç”¨æ ‘å½¢ç»“æ„ç»„ç»‡æ–‡ä»¶ã€‚FHSå®šä¹‰äº†ç³»ç»Ÿä¸­æ¯ä¸ªåŒºåŸŸçš„ç”¨é€”ã€æ‰€éœ€è¦çš„æœ€å°æ„æˆçš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒæ—¶è¿˜ç»™å‡ºäº†ä¾‹å¤–å¤„ç†ä¸çŸ›ç›¾å¤„ç†ã€‚ â€”â€” ç™¾åº¦ç™¾ç§‘ ç¬¦å· è§£é‡Š ~ ç”¨æˆ·ä¸»ç›®å½• - ä¸Šä¸€æ¬¡æ‰€åœ¨ç›®å½• . å½“å‰ç›®å½• .. ä¸Šçº§ç›®å½• Linuxä¸Windowsä¸€æ ·ï¼Œå®ƒçš„ä¸»åˆ†åŒºå’Œæ‹“å±•åˆ†åŒºåŠ èµ·æ¥ä¸èƒ½è¶…è¿‡å››ä¸ªï¼Œè€Œä¸”æ‹“å±•åˆ†åŒºä¸èƒ½æ”¾å…¥æ•°æ®æ–‡ä»¶ä¸”ä¸èƒ½æ ¼å¼åŒ–ï¼Œæœ€å¤šä¸€ä¸ªæ‹“å±•åˆ†åŒºã€‚æ‹“å±•åˆ†åŒºé‡Œæ”¾çš„é€»è¾‘åˆ†åŒºå¯ä»¥æ”¾æ•°æ®å’Œæ ¼å¼åŒ–ã€‚ Linux ç¡¬ä»¶å…¨ä¸ºæ–‡ä»¶ è¿™ä¸€ç‚¹ä¸Windowsä¸ä¸€æ ·ã€‚ ä¸‹é¢ä»‹ç»ä¸€äº›Linuxçš„ä¸»è¦ç¡¬ä»¶æ–‡ä»¶åå·²ç»å­˜æ”¾è·¯å¾„ï¼š IDEç¡¬ç›˜ devhd[a-d] SCSISATAUSBç¡¬ç›˜ devsd[a-p] å…‰é©± devcdromæˆ–devsr0 è½¯ç›˜ devfd[0-1] æ‰“å°æœºï¼ˆ25é’ˆï¼‰ devlp[0-2] æ‰“å°æœºï¼ˆUSBï¼‰ devusblp[0-15] é¼ æ ‡ devmouse åˆ†åŒºï¼šæŠŠå¤§ç¡¬ç›˜åˆ†ä¸ºå°çš„é€»è¾‘åˆ†åŒºæ ¼å¼åŒ–ï¼šå†™å…¥æ–‡ä»¶ç³»ç»Ÿåˆ†åŒºè®¾å¤‡æ–‡ä»¶åï¼šç»™æ¯ä¸ªåˆ†åŒºå®šä¹‰è®¾å¤‡æ–‡ä»¶åæŒ‚è½½ï¼šç»™æ¯ä¸ªåˆ†åŒºåˆ†é…æŒ‚è½½ç‚¹ æ³¨æ„ï¼š æ ¹åˆ†åŒº â€œ â€ ä»¥ä¸‹çš„å­åˆ†åŒºå¯ä»¥å•ç‹¬ä½¿ç”¨ç¡¬ç›˜ åœ¨è™šæ‹Ÿæœºå®‰è£…ä¸­ swap çš„å¤§å°ä¸ºå†…å­˜çš„ä¸¤å€ä½†æ˜¯è¶…è¿‡2Gæ²¡æœ‰æ„ä¹‰ï¼Œå»ºè®®1000MBåˆé€‚ bootè·¯å¾„æ˜¯ä¸ºäº†è®©Linuxç³»ç»Ÿå¯ä»¥é¡ºåˆ©è¿è¡Œ é‡Œé¢æœ€å¥½ä¸è¦å­˜æ”¾æ•°æ® åœ¨è™šæ‹Ÿæœºå®‰è£…ä¸­åˆ†é…200Må·¦å³å¤§å°å°±å¯ä»¥äº† ç³»ç»Ÿç®¡ç† ä½¿ç”¨åˆ†å· ; åˆ†éš”å’Œæ‰§è¡Œå¤šæ¡å‘½ä»¤ ä½¿ç”¨åæ–œçº¿ \\ å¤šè¡Œè¾“å…¥ æ‰§è¡Œ exit æˆ– ctrl dï¼ˆè¡¨ç¤ºEOFï¼‰ï¼Œé€€å‡ºå½“å‰ shell ls å‚æ•°ï¼š -a æ‰€æœ‰æ–‡ä»¶ -l è¯¦ç»†ä¿¡æ¯ -h æ–‡ä»¶å¤§å°å¯è¯» -F ç±»å‹æŒ‡ç¤º -d ä»…æŸ¥çœ‹å½“å‰ç›®å½•çš„ä¿¡æ¯ -S æŒ‰æ–‡ä»¶å¤§å°æ’åº -t æŒ‰ä¿®æ”¹æ—¶é—´æ’åº -r å€’åº æŸ¥çœ‹ Linux å†…æ ¸ç‰ˆæœ¬ uname -runame -ncat /proc/version 5.8.0-44-generic ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.å‘å¸ƒç‰ˆæœ¬-ä¿®æ”¹ç‰ˆæœ¬ ç³»ç»Ÿçš„è¿è¡Œçº§åˆ«ï¼š runlevel æŸ¥è¯¢ç³»ç»Ÿè¿è¡Œçº§åˆ«logout é€€å‡ºç™»é™†å‘½ä»¤ å…±æœ‰å…­ä¸ªçº§åˆ«ï¼š init 0-60ï¼šå…³æœº1ï¼šå•ç”¨æˆ· è¿›å…¥é€‰é¡¹èœå• åªæœ‰rootç”¨æˆ·ç™»é™†è¿›å» ç›¸å½“äºWindowså®‰å…¨æ¨¡å¼F8ï¼Œåªä¸è¿‡æ²¡æœ‰å›¾å½¢ç•Œé¢2ï¼šä¸å®Œå…¨å¤šç”¨æˆ·ï¼Œä¸å«NFSæœåŠ¡ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢ NFSç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼ŒLinuxä¹‹é—´æ–‡ä»¶ä¼ è¾“å…±äº«æ–¹å¼ï¼Œé™¤äº†NFSæœåŠ¡ï¼Œå’Œ3ä¸€æ ·ã€‚3ï¼šå®Œå…¨å¤šç”¨æˆ·ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢4ï¼šæœªåˆ†é…ï¼Œæ²¡æœ‰å›¾å½¢ç•Œé¢5ï¼šå›¾å½¢ç•Œé¢6ï¼šé‡å¯ æ³¨æ„ï¼šåœ¨æœåŠ¡å™¨ä¸­ä¸€å®šè¦åœ¨æ“ä½œå®Œæˆä¹‹åé€€å‡ºç™»é™†ï¼Œå¦åˆ™å…¶ä»–äººä¼šç›´æ¥è¿›å…¥ä½ çš„æœåŠ¡å™¨ï¼Œé€ æˆéå¸¸å¤§çš„æŸå¤±ã€‚æœ€åŸºæœ¬çš„å®‰å…¨æ„è¯†ä¸€å®šè¦æœ‰ï¼ï¼ï¼ æ—¥æœŸ date [-s] date å†…å­˜ free -h è¿›ç¨‹ ps [-u] æŸ¥è¯¢ PID pidof ps åœ¨linuxç³»ç»Ÿçš„ç›®å½•varrunä¸‹é¢ä¸€èˆ¬æˆ‘ä»¬éƒ½ä¼šçœ‹åˆ°å¾ˆå¤šçš„*.pidæ–‡ä»¶ã€‚è€Œä¸”å¾€å¾€æ–°å®‰è£…çš„ç¨‹åºåœ¨è¿è¡Œåä¹Ÿä¼šåœ¨varrunç›®å½•ä¸‹é¢äº§ç”Ÿè‡ªå·±çš„pidæ–‡ä»¶ã€‚é‚£ä¹ˆè¿™äº›pidæ–‡ä»¶æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼Ÿå®ƒçš„å†…å®¹åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ PIDå…¨ç§°æ˜¯Process Identificationã€‚ PIDæ˜¯è¿›ç¨‹çš„ä»£å·ï¼Œæ¯ä¸ªè¿›ç¨‹æœ‰å”¯ä¸€çš„PIDç¼–å·ã€‚å®ƒæ˜¯è¿›ç¨‹è¿è¡Œæ—¶ç³»ç»Ÿéšæœºåˆ†é…çš„ï¼Œä¸ä»£è¡¨ä¸“é—¨çš„è¿›ç¨‹ã€‚ åœ¨è¿è¡Œæ—¶PIDæ˜¯ä¸ä¼šæ”¹å˜æ ‡è¯†ç¬¦çš„ï¼Œä½†æ˜¯ä½ ç»ˆæ­¢ç¨‹åºåå†è¿è¡ŒPIDæ ‡è¯†ç¬¦å°±ä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œå°±å¯èƒ½ä¼šè¢«ç»§ç»­åˆ†é…ç»™æ–°è¿è¡Œçš„ç¨‹åºã€‚ èŒƒå›´æ˜¯1~32768ã€‚ pidæ–‡ä»¶çš„å†…å®¹ï¼špidæ–‡ä»¶ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼Œå†…å®¹åªæœ‰ä¸€è¡Œ, è®°å½•äº†è¯¥è¿›ç¨‹çš„IDã€‚ pidæ–‡ä»¶çš„ä½œç”¨ï¼šé˜²æ­¢è¿›ç¨‹å¯åŠ¨å¤šä¸ªå‰¯æœ¬ã€‚åªæœ‰è·å¾—pidæ–‡ä»¶(å›ºå®šè·¯å¾„å›ºå®šæ–‡ä»¶å)å†™å…¥æƒé™(F_WRLCK)çš„è¿›ç¨‹æ‰èƒ½æ­£å¸¸å¯åŠ¨å¹¶æŠŠè‡ªèº«çš„PIDå†™å…¥è¯¥æ–‡ä»¶ä¸­ã€‚å…¶å®ƒåŒä¸€ä¸ªç¨‹åºçš„å¤šä½™è¿›ç¨‹åˆ™è‡ªåŠ¨é€€å‡ºã€‚ å‘é€ä¿¡å· kill [-ä¿¡å·å£°æ˜ | -ä¿¡å·ç¼–å·] pidkill -l # åˆ—å‡ºæ‰€æœ‰ä¿¡å·killall # ç»“æŸä¸€ä¸ªç¨‹åºçš„æ‰€æœ‰è¿›ç¨‹ å‘½ä»¤åˆ«å alias cmd=cmd cmdï¼šcommand è¾“å…¥å†å² history # æŸ¥çœ‹å†å²å‘½ä»¤å’Œç¼–å·!ç¼–å· # æ‰§è¡Œç¼–å·æŒ‡å®šçš„å†å²å‘½ä»¤ ä¸»æœºå hostname [set-hostname] nm è½¯ç¡¬é“¾æ¥ è½¯é“¾æ¥ï¼šè½¯é“¾æ¥çš„ä½œç”¨å’ŒWindowsä¸­çš„å¿«æ·æ–¹å¼æ˜¯å·®ä¸å¤šçš„ã€‚ä»–åªä¸è¿‡æ˜¯æŒ‡å‘æºæ–‡ä»¶å®‰è£…è·¯å¾„çš„ç¬¦å·é“¾æ¥ï¼Œæ‰€ä»¥å¤§å°ä¹Ÿå¾ˆå° ã€‚ å®ƒçš„æ–‡ä»¶ç±»å‹æ˜¯lrwxrwxrwx çœ‹ä¼¼ä¸‰ç§ç”¨æˆ·éƒ½å¯ä»¥æ‹¥æœ‰æ‰€æœ‰æƒé™ã€‚å…¶å®ï¼ŒçœŸæ­£æ‹¥æœ‰çš„æƒé™æ˜¯æºæ–‡ä»¶æ‰€å†³å®šçš„æƒé™ ï¼Œæ‰€ä»¥è¿™ä¸­æ˜¾ç¤ºä¹Ÿæ˜¯è½¯é“¾æ¥çš„ä¸€å¤§ç‰¹å¾ä¹‹ä¸€ã€‚ ln -s [åŸæ–‡ä»¶] [ç›®æ ‡æ–‡ä»¶] åˆ›å»ºè½¯é“¾æ¥ è¿™é‡Œçš„æºæ–‡ä»¶è·¯å¾„ä¸€å®šè¦å†™æˆç»å¯¹è·¯å¾„ ï¼Œå¦åˆ™é“¾æ¥ä¸åˆ°ã€‚ ç¡¬é“¾æ¥ï¼šç¡¬é“¾æ¥å°±æ˜¯æŠŠæºæ–‡ä»¶æ‹·è´åˆ°ç›®æ ‡ä½ç½®ï¼Œè€Œä»–ä¸cp -p æœ€å¤§çš„ä¸€ç‚¹åŒºåˆ«å°±æ˜¯ä»–å¯ä»¥åŒæ­¥æ›´æ–°ã€‚ æºæ–‡ä»¶æœ‰å˜åŒ– ç¡¬é“¾æ¥æ–‡ä»¶ä¹Ÿä¼šåŒæ—¶å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å¦‚æœæºæ–‡ä»¶ä¸¢å¤±æˆ–è€…è¢«åˆ é™¤ï¼Œç¡¬é“¾æ¥ä¹Ÿå¹¶ä¸ä¼šæ¶ˆå¤±ã€‚ è¿™é‡Œä¸åŒç¯å¢ƒç»“æœä¸ä¸€æ ·ã€‚ æˆ‘çš„Ubuntuè½¯è¿æ¥æ–‡ä»¶ä¹Ÿä¸ä¼šéšç€æºæ–‡ä»¶ä¸¢å¤±è€Œä¸¢å¤±ã€‚åªæ˜¯æ— æ³•è®¿é—®è€Œå·²ã€‚ å¯ä»¥é€šè¿‡ièŠ‚ç‚¹æ¥åŒºåˆ†ï¼Œæºæ–‡ä»¶å’Œç¡¬é“¾æ¥æ–‡ä»¶çš„ièŠ‚ç‚¹æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä»–ä»¬ä¼šåŒæ­¥æ›´æ–°ï¼Œä½†æ˜¯ä»–ä¸èƒ½è·¨åˆ†åŒºæ”¾ç½®ç¡¬é“¾æ¥æ¯”å¦‚ï¼šåˆ†åŒº ç¡¬é“¾æ¥ ä¸èƒ½æ”¾åˆ°boot åˆ†åŒº ï¼Œè€Œä¸”ä¸èƒ½å¯¹ç›®å½•ä½¿ç”¨ã€‚ ln [åŸæ–‡ä»¶] [ç›®æ ‡æ–‡ä»¶] åˆ›å»ºç¡¬é“¾æ¥ æƒé™å¤„ç†æƒé™è¡¨ç¤ºls -l total 200k æ–‡ä»¶æƒé™ æƒé™è®¡æ•° æ‰€æœ‰è€… æ‰€å±ç»„ æ–‡ä»¶å¤§å° æœ€åä¿®æ”¹æ—¶é—´ æ–‡ä»¶å drwxr-xâ€” 16 fancyzzz fancyzzz 4.0k 7æœˆ11 14:26 â€¦ ä¸€ä¸ªæ–‡ä»¶10ä¸ªç¬¦å·ä½ ï¼š -rwx rwx rwx ç¬¬ä¸€ä¸ªç¬¦å·ä½ï¼š d ç›®å½• l è½¯è¿æ¥ b å—è®¾å¤‡ c å­—ç¬¦è®¾å¤‡ s socket p ç®¡é“ - æ™®é€šæ–‡ä»¶ åä¹ä½ï¼š æ¯ä¸‰ä½ä¸€ç»„ï¼Œåˆ†åˆ«å¯¹åº” User Group Otherï¼š rï¼šè¯»æƒé™ w: å†™æƒé™ x: æ‰§è¡Œæƒé™ ä¿®æ”¹æƒé™1.å¤åˆ¶æƒé™è®¾å®šï¼š å‘½ä»¤ æ•ˆæœ chmod â€“referencedir1 dir2 å¤åˆ¶dir1ç›®å½•çš„æƒé™åˆ°dir2ä¸Š chmod -R â€“referencedir1 dir2 å¤åˆ¶dir1ç›®å½•çš„æƒé™åˆ°dir2åŠdir2ä¸­çš„å­æ–‡ä»¶ä¸Š -R ä»£è¡¨é€’å½’æ“ä½œ 2.å­—ç¬¦æ–¹å¼è®¾å®šï¼šchmod [u,g,o,a+,-,=r,w,x] [æ–‡ä»¶æˆ–è€…ç›®å½•] u ï¼šæ‰€æœ‰è€… g ï¼šæ‰€å±ç»„ o ï¼šå…¶ä»–äºº a ï¼šæ‰€æœ‰ç”¨æˆ· å‘½ä»¤ æ•ˆæœ chmod ï¼ˆa;u;g;o) ( +;-;)(r;w;x) æ–‡ä»¶åæˆ–ç›®å½•å ç”¨å­—ç¬¦æ–¹å¼è®¾å®šæ–‡ä»¶æˆ–ç›®å½•æƒé™ chmod -Rï¼ˆa;u;g;o) ( +;-;)(r;w;x) ç›®å½•å ç”¨å­—ç¬¦æ–¹å¼è®¾å®šç›®å½•ä»¥åŠè¯¥ç›®å½•ä¸­æ–‡ä»¶æƒé™ ä¾‹å¦‚ï¼šchomd g+x,o+r tmptestfile æ˜¯æŠŠtestfileæ–‡ä»¶çš„æ‰€æœ‰ç»„å¢åŠ æ‰§è¡Œæƒé™ï¼Œå…¶ä»–äººå¢åŠ è¯»æƒé™ chomd arwx tmptestfile æ˜¯ç»™ testfileæ–‡ä»¶çš„æ‰€æœ‰ç”¨æˆ·å¢åŠ è¯»å†™æ‰§è¡Œæƒé™ 3.æ•°å­—æ–¹å¼è®¾å®šæƒé™ï¼šæƒé™çš„å¸ƒå°”è¡¨ç¤ºæ–¹å¼ï¼šç”¨ä¸‰ä½äºŒè¿›åˆ¶æ•°è¡¨ç¤ºå…«ç§ä¸åŒæƒ…å†µçš„æƒé™ï¼Œç„¶åè½¬åŒ–ä¸ºåè¿›åˆ¶æ•°ï¼Œå¹¶ç”¨ä¸‰ä½åè¿›åˆ¶æ•°ï¼Œè¡¨ç¤ºä¸‰ä¸ªä¸åŒèº«ä»½çš„æƒé™ä¿¡æ¯ï¼Œç”¨æ•°å­—æ–¹å¼è®¾å®šå¯¹æ¯”å­—ç¬¦æ–¹å¼è®¾å®šæ›´å…·æœ‰ä¾¿æ·ï¼Œå‡†ç¡®ï¼Œä¸å®¹æ˜“å‡ºé”™çš„ç‰¹ç‚¹ï¼š chmod -R [rwxçš„å’Œ,rwxçš„å’Œ,rwxçš„å’Œ]] [æ–‡ä»¶æˆ–è€…ç›®å½•] é¦–å…ˆéœ€è¦çŸ¥é“ r4 w2 x1ä¾‹å¦‚ï¼šrwxrw-r- - å®ƒçš„æƒé™ä½æ•°å­—è¡¨ç¤ºå°±æ˜¯ 764 å…·ä½“ç®—æ³•ï¼šr+w+x4+2+17r+w4+2+06r4+0+04 -Rï¼š chmod -R [rwxçš„å’Œ,rwxçš„å’Œ,rwxçš„å’Œ]] [æ–‡ä»¶æˆ–è€…ç›®å½•] è¿™æ¡å‘½ä»¤ä¸mkdir -pé€’å½’åˆ›å»ºç›®å½•ä¸€æ · è¿™ä¸ªå‘½ä»¤æŠŠä¸€ä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰å­ç›®å½•çš„æ“ä½œæƒé™å…¨éƒ¨ä¿®æ”¹ä¸ºåŒæ ·çš„ æˆ‘ä»¬ä»éœ€æ³¨æ„åœ¨æ–‡ä»¶ä¸ç›®å½•ä¸­çš„ä¸åŒæƒé™ï¼Œä»–ä»¬å…·ä½“å¯ä»¥å®æ–½çš„æ“ä½œæ˜¯ä»€ä¹ˆã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œæœ‰è®¸å¤šäººåˆ°ç°åœ¨ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œè®¤ä¸ºå¯¹æ–‡ä»¶æœ‰å†™æƒé™å°±å¯ä»¥åˆ é™¤æ–‡ä»¶ã€‚è¿™ä¸€ç‚¹æ˜¯éå¸¸é”™è¯¯çš„ã€‚ ä»£è¡¨å­—ç¬¦ æƒé™ å¯¹æ–‡ä»¶çš„å«ä¹‰ å¯¹ç›®å½•çš„å«ä¹‰ r è¯»æƒé™ å¯ä»¥æŸ¥çœ‹æ–‡ä»¶å†…å®¹ å¯ä»¥catmoreheadtailless å¯ä»¥åˆ—å‡ºç›®å½•ä¸­çš„å†…å®¹ å¯ä»¥ls w å†™æƒé™ å¯ä»¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ å¯ä»¥vim å¯ä»¥åœ¨ç›®å½•ä¸­åˆ›å»ºï¼Œåˆ é™¤æ–‡ä»¶ï¼›å¯ä»¥touchmkdirrmdirrm x æ‰§è¡Œæƒé™ å¯ä»¥æ‰§è¡Œæ–‡ä»¶ å¯ä»¥script(è„šæœ¬) command(å‘½ä»¤) å¯ä»¥è¿›å…¥ç›®å½• å¯ä»¥cd æ–‡ä»¶å¤„ç† cat [æ–‡ä»¶å] æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ åªé€‚åˆçŸ­çš„æ–‡ä»¶å†…å®¹cat -n [æ–‡ä»¶å] æ˜¾ç¤ºè¡Œå· ç»™æ–‡ä»¶å†…å®¹çš„æ¯ä¸€è¡Œæ ‡å·cat -A [æ–‡ä»¶å] æ˜¾ç¤ºéšè—å­—ç¬¦tac [æ–‡ä»¶å] é€†åºæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ å€’ç€æ¥ ä¸æ”¯æŒ-n more [æ–‡ä»¶å] ä¸€é¡µä¸€é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ é€‚åˆé•¿çš„æ–‡ä»¶å†…å®¹ ç©ºæ ¼æˆ–è€…f ç¿»é¡µ å›è½¦ï¼ˆEnterï¼‰ä¸€è¡Œä¸€è¡Œç¿»ï¼Œæ¢è¡Œ qæˆ–è€…Q ï¼Œé€€å‡º less [æ–‡ä»¶å] ä¸€é¡µä¸€é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œåªä¸è¿‡è¿™æ¡å‘½ä»¤å¯ä»¥å¾€å›ç¿»é¡µï¼ŒæŸ¥çœ‹ç¿»è¿‡çš„æ–‡ä»¶å†…å®¹ page upå‘ä¸Šç¿»é¡µï¼Œâ†‘ç®­å¤´å‘ä¸Šç¿»ä¸€è¡Œå…¶ä»–æ“ä½œå’Œmoreå‘½ä»¤ä¸€æ · åœ¨lesså‘½ä»¤ä¸­ å¯ä»¥æŒ‰+éœ€è¦æŸ¥æ‰¾æ–‡ä»¶å†…å®¹çš„å…³é”®å­—æŸ¥è¯¢å†…å®¹ï¼Œé«˜äº®å†…å®¹å³ä¸ºå«æœ‰å…³é”®å­—çš„å†…å®¹ï¼ŒæŒ‰nï¼ˆè¡¨ç¤ºnextï¼‰å¯ä»¥æŸ¥çœ‹ä¸‹ä¸€ä¸ªå«æœ‰å…³é”®å­—çš„å†…å®¹ head [æ–‡ä»¶å] æ˜¾ç¤ºæ–‡ä»¶æœ€å‰å‡ è¡Œ å…·ä½“å‡ è¡ŒåŠ n head -n è¡Œæ•° [æ–‡ä»¶å] æ²¡æœ‰æŒ‡å®š é»˜è®¤10è¡Œ tail [æ–‡ä»¶å] æ˜¾ç¤ºæ–‡ä»¶æœ€åå‡ è¡Œ å…·ä½“å‡ è¡ŒåŠ n tail -n è¡Œæ•° [æ–‡ä»¶å] æ²¡æœ‰æŒ‡å®š é»˜è®¤10è¡Œ tail -f åŠ¨æ€æ˜¾ç¤ºæ–‡ä»¶æœ«å°¾å†…å®¹ ç§»åŠ¨ï¼š mv src target é‡å‘½åï¼š mv old new ç›®å½•å¤„ç†ï¼ˆç›®å½•ä¹Ÿç®—æ–‡ä»¶å“¦ï¼‰ åˆ›å»º mkdir åˆ›å»ºç›®å½• åœ¨tmpç›®å½•ä¸‹åˆ›å»ºä¸´æ—¶æ–‡ä»¶ åªèƒ½åˆ›å»ºtmp***** äºŒçº§ç›®å½•mkdir -p å¯ä»¥é€’å½’åˆ›å»º åœ¨æ²¡æœ‰ä¸€çº§ç›®å½•çš„æƒ…å†µä¸‹æ–°åˆ›å»ºäºŒçº§ç›®å½•pwd æ˜¾ç¤ºå½“å‰æ‰€åœ¨è·¯å¾„ è·³çº§ cd - ä¸Šä¸€æ¬¡çš„ç›®å½• cd ~ è¿”å›å®¶ç›®å½• cd . . è¿”å›ä¸Šä¸€çº§ç›®å½•(ä¸¤ä¸ªç‚¹è¿ç€ï¼‰rmdir åˆ é™¤ç©ºç›®å½• åªèƒ½åˆ é™¤æ²¡æœ‰æ–‡ä»¶çš„ç©ºç›®å½• ï¼ˆä¸ç»å¸¸ä½¿ç”¨ï¼‰ å¢åˆ æ”¹æŸ¥ touch [æ–‡ä»¶å] åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºç©ºæ–‡ä»¶touch[ç»å¯¹è·¯å¾„+æ–‡ä»¶å]ã€‚ æŒ‡æ˜ç»å¯¹è·¯å¾„ï¼Œåœ¨ç»å¯¹è·¯å¾„å¤„åˆ›å»ºæ–‡ä»¶â€œProgram filesâ€ åŠ åŒå¼•å·åˆ›å»ºå¸¦ç©ºæ ¼çš„æ–‡ä»¶å ä¸æ¨èä½¿ç”¨ ä»¥åçš„æŸ¥è¯¢ï¼Œæ“ä½œéƒ½éœ€è¦ç”¨åˆ° é™¤äº†ä»£è¡¨æ ¹åˆ†åŒºçš„ ä»¥å¤– å…¶ä»–ç¬¦å·éƒ½å¯ä»¥ å¤åˆ¶ cp å¤åˆ¶æ–‡ä»¶ cp [åŸæ–‡ä»¶è·¯å¾„] [éœ€è¦å¤åˆ¶åˆ°çš„è·¯å¾„]cp -r å¤åˆ¶ç›®å½•cp -p ä¿ç•™åŸæ–‡ä»¶å±æ€§å¤åˆ¶ç›®å½• æ¯”å¦‚ä¿ç•™åˆ›å»ºæ—¶é—´ æ—¥å¿—æ–‡ä»¶çš„å¤åˆ¶éœ€è¦ç”¨åˆ°cp -rp å¤åˆ¶ç›®å½•å¹¶ä¸”ä¿ç•™åŸæ–‡ä»¶å±æ€§mv å‰ªåˆ‡ æ”¹åï¼ˆåœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ä¸ºæ”¹åï¼‰ åˆ é™¤ rm åˆ é™¤æ–‡ä»¶rm -f å¼ºåˆ¶åˆ é™¤ ä¸å†è¯¢é—®rm -r åˆ é™¤ç›®å½• ä¸€èˆ¬æ˜¯rm -rf è¿ç€ç”¨control+Cé€€å‡ºé€‰é¡¹ æ³¨æ„ï¼šrm -rf ä½¿ç”¨æ—¶ä¸€å®šè¦è°¨æ… åˆ‡è®° ï¼ï¼ï¼ä½¿ç”¨æ—¶ä¸€å®šè¦è°¨æ… åˆ‡è®° ï¼ï¼ï¼ä½¿ç”¨æ—¶ä¸€å®šè¦è°¨æ… åˆ‡è®° ï¼ï¼ï¼rm -rf * ç³»ç»Ÿç›´æ¥å…¨éƒ¨è¢«åˆ é™¤ï¼ï¼ï¼ ä½¿ç”¨é€šé…ç¬¦æ—¶éœ€è¦è½¬ä¹‰ï¼Œä¾‹å¦‚*.txtåº”å†™æˆ\\*.txtã€‚ æŸ¥æ‰¾ æ–‡ä»¶æœç´¢å‘½ä»¤find find [æœç´¢èŒƒå›´] [åŒ¹é…æ¡ä»¶] é€šé…ç¬¦æŸ¥è¯¢ find [æœç´¢èŒƒå›´] -name [å…³é”®å­—] åœ¨ç‰¹å®šè·¯å¾„ä¸‹æœç´¢æ–‡ä»¶åä½œä¸ºå…³é”®å­—çš„æ–‡ä»¶æˆ–è€…ç›®å½• find [æœç´¢èŒƒå›´] -name [å…³é”®å­—]* è¿™æ ·ä¸ºå¸¦æœ‰å…³é”®å­—å¼€å¤´çš„ä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥è¢«æœç´¢å‡ºæ¥ find [æœç´¢èŒƒå›´] -name * [å…³é”®å­—]* è¿™æ ·ä¸ºå¸¦æœ‰å…³é”®å­—çš„ä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥è¢«æœç´¢å‡ºæ¥ find [æœç´¢èŒƒå›´] -name [å…³é”®å­—]??? è¿™æ ·æœç´¢çš„æ˜¯å…³é”®å­—åå¸¦ä¸‰ä¸ªå­—ç¬¦çš„ å‡ ä¸ªé—®å·ä¸ºå‡ ä¸ªå­—ç¬¦ å…¶ä»–å±æ€§æŸ¥è¯¢ find [æœç´¢èŒƒå›´] -iname [å…³é”®å­—] ä¸åŒºåˆ†å¤§å°å†™æœç´¢ æ³¨æ„ï¼šä¸èƒ½åœ¨æœåŠ¡åŒºé«˜å³°æ—¶å€™ä½¿ç”¨æŸ¥æ‰¾å‘½ä»¤ã€‚å¤ªå å†…å­˜èµ„æºï¼Œæœç´¢çš„èŒƒå›´è·¯å¾„è¶Šå°è¶Šå¥½ï¼Œæœç´¢æ¡ä»¶è¶Šç²¾å‡†è¶Šå¥½ æ‰€å±è€…æŸ¥è¯¢ find [æœç´¢èŒƒå›´] -user [æ‰€æœ‰è€…å] æ ¹æ®æ‰€æœ‰è€…æŸ¥æ‰¾ find [æœç´¢èŒƒå›´] -group [æ‰€å±ç»„å] æ ¹æ®æ‰€å±ç»„æŸ¥æ‰¾ æ ¹æ®æ—¶é—´æŸ¥è¯¢ find [æœç´¢èŒƒå›´] -amin [æ—¶é—´] æŸ¥æ‰¾æ—¶é—´ä»¥å†…è¢«è®¿é—®è¿‡çš„æ–‡ä»¶å’Œç›®å½• aï¼šaccess find [æœç´¢èŒƒå›´] -cmin [æ—¶é—´] æŸ¥æ‰¾æ—¶é—´ä»¥å†…è¢«ä¿®æ”¹è¿‡å±æ€§çš„æ–‡ä»¶å’Œç›®å½• cï¼šchange find [æœç´¢èŒƒå›´] -mmin [æ—¶é—´] æŸ¥æ‰¾æ—¶é—´ä»¥å†…è¢«ä¿®æ”¹è¿‡å†…å®¹çš„æ–‡ä»¶å’Œç›®å½• mï¼šmodift +ï¼šè¶…è¿‡å¤šé•¿æ—¶é—´ -ï¼šå¤šé•¿æ—¶é—´ä»¥å†… æ ¹æ®æ•°æ®å¤§å°æŸ¥è¯¢ find [æœç´¢èŒƒå›´] -size [æ•°æ®å—] æ ¹æ®æ–‡ä»¶å¤§å°æŸ¥æ‰¾ æ•°æ®å—å‰é¢åŠ +è¡¨ç¤ºæŸ¥æ‰¾å¤§äºè¿™ä¸ªå¤§å°çš„æ–‡ä»¶ï¼Œ-è¡¨ç¤ºæŸ¥æ‰¾å°äºè¿™ä¸ªå¤§å°çš„æ–‡ä»¶ï¼Œä¸åŠ è¡¨ç¤ºæŸ¥æ‰¾ç­‰äºè¿™ä¸ªå¤§å°çš„æ–‡ä»¶(ä¸€èˆ¬ä¸å¸¸ç”¨1ä¸ªæ•°æ®å—512å­—èŠ‚0.5Ksizeåæ¥çš„æ•°æ®åªèƒ½ä¸ºæ•°æ®å— éœ€è¦æ¢ç®—ï¼Œæ¯”å¦‚éœ€è¦æŸ¥æ‰¾å¤§äº100MBçš„æ–‡ä»¶100MB102400KB204800find etc -size +204800æ•°æ®å—ä¸ºLinuxå­˜å‚¨æ–‡ä»¶æœ€å°å•ä½ find [æœç´¢èŒƒå›´] -size [æ•°æ®å—] -a -size [æ•°æ®å—] -aï¼šä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³-oï¼šä¸¤ä¸ªæ¡ä»¶æ»¡è¶³ä»»æ„ä¸€ä¸ªå³å¯find etc -size +163840 -a -size -204800åœ¨etcä¸‹æŸ¥æ‰¾å¤§äº80MBå°äº100MBçš„æ–‡ä»¶ æŸ¥æ‰¾ç‰¹å®šç±»å‹ find [æœç´¢èŒƒå›´] -name [å…³é”®å­—] -a -type f åœ¨ç‰¹å®šè·¯å¾„ä¸‹æœç´¢æ–‡ä»¶åä½œä¸ºå…³é”®å­—çš„æ–‡ä»¶-type æ ¹æ®ä¸åŒç±»å‹æŸ¥æ‰¾fï¼šæ–‡ä»¶dï¼šç›®å½•lï¼šè½¯é“¾æ¥ find [æœç´¢èŒƒå›´] -name [å…³é”®å­—] -exec ls -l {} \\ ; æŸ¥æ‰¾åˆ°æ–‡ä»¶ä¹‹åå¹¶ä¸”å¯¹å…¶è¿›è¡ŒæŸ¥çœ‹lsæ“ä½œã€‚-execï¼šæŸ¥æ‰¾åˆ°æ–‡ä»¶ä¹‹åå¹¶ä¸”å¯¹å…¶è¿›è¡Œå„ç§æ“ä½œ {} \\ ;ä¸èƒ½ä¸¢-okï¼šç”¨äºè¯¢é—®ç¡®è®¤ ä¸€èˆ¬åœ¨åˆ é™¤æ“ä½œçš„æ—¶å€™ä½¿ç”¨ï¼Œæ¯”å¦‚ï¼š find -user user_name -ok rm {} \\ ; åˆ é™¤user_nameç”¨æˆ·çš„æ–‡ä»¶ ä»–ä¼šæŒ¨ä¸ªè¯¢é—®ä½ æ˜¯ä¸æ˜¯ç¡®å®šåˆ é™¤ find [æœç´¢èŒƒå›´] -inum [i èŠ‚ç‚¹å€¼] æ ¹æ® i èŠ‚ç‚¹æŸ¥è¯¢ find etc -inum 12345 -exec rm {} \\ ; åˆ é™¤è¿™ä¸ªièŠ‚ç‚¹æ–‡ä»¶ éå¸¸æ–¹ä¾¿ã€‚ä¹Ÿå¯ä»¥ç”¨æ¥æŸ¥è¯¢ä¸€ä¸ªæ–‡ä»¶çš„ç¡¬é“¾æ¥ find etc inum 12345 -exec ls -l {} \\ ; å› ä¸ºç¡¬é“¾æ¥å’Œæ–‡ä»¶è‚¯å®šåœ¨åŒä¸€ä¸ªåˆ†åŒºï¼Œå¹¶ä¸”ièŠ‚ç‚¹ä¸€æ · æ–‡ä»¶æœç´¢å‘½ä»¤locate locate [æ–‡ä»¶å] åœ¨æ–‡ä»¶èµ„æ–™åº“ä¸­æŸ¥æ‰¾ é€Ÿåº¦æ›´å¿« locate -i ä¸åŒºåˆ†å¤§å°å†™æŸ¥æ‰¾ updatedb æ›´æ–°æ–‡ä»¶èµ„æ–™åº“ å› ä¸ºlocateå¹¶ä¸æ˜¯å®æ—¶çš„ (å¦‚æœå­˜æ”¾çš„æ–‡ä»¶åœ¨tmp ä¸´æ—¶æ–‡ä»¶å­˜æ”¾å¤„ä¸‹é¢ locateå°±æ‰¾ä¸åˆ°ï¼Œæ–‡ä»¶èµ„æ–™åº“ä¸å­˜å‚¨ä¸´æ—¶æ–‡ä»¶å†…å®¹) which æŸ¥æ‰¾å‘½ä»¤å­˜æ”¾ä½ç½®ï¼Œå¯ä»¥çœ‹åˆ°å‘½ä»¤å¯ä»¥ä½¿ç”¨çš„ä½¿ç”¨è€…æ˜¯è°ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹å‘½ä»¤åˆ«å which rm ä¼šæ˜¾ç¤º alias rmâ€™rm -iâ€™ æˆ‘ä»¬æ‰€ä½¿ç”¨çš„rmåªä¸è¿‡æ˜¯åˆ«å ä¸æ˜¯çœŸæ­£çš„rmå‘½ä»¤ï¼Œå…¶å®æ˜¯rm -iå‘½ä»¤ï¼Œæ‰€ä»¥æ‰ä¼šè¯¢é—®æ˜¯å¦çœŸçš„åˆ é™¤ï¼ŒçœŸæ­£çš„rmæ˜¯ä¸ä¼šè¯¢é—®çš„ï¼Œæ¯”å¦‚ï¼šbinrm tmpyangyang æ–‡ä»¶ç›´æ¥åˆ é™¤ä¸ä¼šè¯¢é—®æ˜¯å¦åˆ é™¤ ç›¸å½“äºåŠ äº† -f whereis ä¹Ÿå¯ä»¥æ‰¾åˆ°å‘½ä»¤çš„ç»å¯¹è·¯å¾„ï¼Œè¿˜å¯ä»¥æ‰¾åˆ°æŸ¥è¯¢å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯æ–‡æ¡£æ‰€åœ¨ä½ç½® grep åœ¨æ–‡ä»¶å†…æŸ¥è¯¢å­—ç¬¦ä¸²æˆ–è€…å…³é”®å­—åˆ—å‡ºæ¥grep -i ä¸åŒºåˆ†å¤§å°å†™æŸ¥æ‰¾grep -v æ’é™¤æŒ‡å®šå­—ç¬¦ä¸² æ¯”å¦‚ï¼š grep -v ^# etcinittabæŸ¥æ‰¾æ’é™¤#å¼€å¤´çš„æ³¨é‡Šè¡Œæ–‡ä»¶ä¿¡æ¯^ä»£è¡¨è¡Œé¦– , æ–‡ä»¶ä¸­#å¼€å¤´çš„è¡Œ ä¸ºé…ç½®æ–‡ä»¶ä¿¡æ¯,è„šæœ¬ä¿¡æ¯ã€‚ ç”¨æˆ·ç®¡ç†å‘½ä»¤ç”¨æˆ·å’Œç”¨æˆ·ç»„ åˆ›å»ºç”¨æˆ·æ—¶æ‰€åœ¨ç»„ç§°åˆå§‹ç»„ä¸»ç»„ï¼Œå…¶åå¯ä»¥å°†å…¶æ·»åŠ åˆ°å…¶ä»–ç»„ä¸­ï¼Œè¿™äº›ç»„ç§°é™„åŠ ç»„ï¼Œæ­¤å¤–ï¼Œè¿˜å¯ä»¥æ›´æ¢ç”¨æˆ·çš„ä¸»ç»„ã€‚ root ç”¨æˆ· uid 0 ç³»ç»Ÿç”¨æˆ· uid 1 - 1000 æ™®é€šç”¨æˆ· uid 1001+ ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„é…ç½®æ–‡ä»¶ etcpasswd etcgroup åˆ›å»ºç”¨æˆ·ç»„ useradd unmgroupadd gnm ä¿®æ”¹ç”¨æˆ·ç»„ ä¿®æ”¹ä¿¡æ¯ usermod [-u | -d | -g] unm # uid ä¸»ç›®å½• ä¸»ç»„groupmod [-n | -g | -o] gnm # åç§° gid å…è®¸é‡å¤çš„gid ä¿®æ”¹å¯†ç ç®¡ç†ç”¨æˆ·ç»„ passwdgpasswd [-A | -a | -d] # æŒ‡å®šç®¡ç†å‘˜ æ·»åŠ ç”¨æˆ· åˆ é™¤ç”¨æˆ· åˆ é™¤ç”¨æˆ·ç»„ userdel unmgroupdel gnm åˆ‡æ¢ç”¨æˆ· su unm who æŸ¥çœ‹ç™»é™†ç”¨æˆ·ä¿¡æ¯ ç¬¬ä¸€åˆ— ç™»é™†ç”¨æˆ·å ç¬¬äºŒåˆ— ç™»é™†ç»ˆç«¯ ttyè¡¨ç¤ºæœ¬åœ°ç»ˆç«¯ ptsè¡¨ç¤ºè¿œç¨‹ç™»é™†ç»ˆç«¯ ç¬¬ä¸‰åˆ— ç™»é™†æ—¶é—´ ç¬¬å››åˆ— ç™»é™†ä¸»æœºçš„IPåœ°å€ å¦‚æœæ²¡æœ‰å†™è¡¨ç¤ºæœ¬æœºç™»é™† w æŸ¥çœ‹ç™»é™†ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ ç¬¬ä¸€è¡Œæ˜¾ç¤º17:04:55 up 22 days, 21:32, | 2 users,| load average: 0.02, 0.02, 0.05 17:04:55 è¡¨ç¤ºå½“å‰æ—¶é—´ up 22 days, 21:32 è¡¨ç¤ºæœåŠ¡åŒºç³»ç»Ÿè¿ç»­è¿è¡Œæ—¶é—´æ²¡æœ‰é‡å¯æˆ–è€…å…³æœºï¼Œè¡¡é‡æœåŠ¡åŒºç¨³å®šæ€§ 2 users è¡¨ç¤ºå½“å‰æ€»å…±æœ‰å¤šå°‘ä¸ªç”¨æˆ·ç™»é™† load average: 0.02, 0.02, 0.05 è¡¨ç¤ºè´Ÿè½½å‡è¡¡æŒ‡æ•°ï¼Œåˆ†åˆ«è®°å½•äº†è¿‡å»ä¸€åˆ†é’Ÿï¼Œäº”åˆ†é’Ÿï¼Œåäº”åˆ†é’Ÿç³»ç»Ÿçš„è´Ÿè½½æƒ…å†µï¼ŒåŠ èµ·æ¥é™¤ä»¥ä¸‰å°±æ˜¯å¹³å‡è´Ÿè½½æŒ‡æ•°ï¼Œç³»ç»Ÿçš„è´Ÿè½½æƒ…å†µä¸»è¦æ˜¯æŒ‡ CPUå’Œå†…å­˜çš„è´Ÿè½½æƒ…å†µï¼Œæ•°å­—å¤§è¡¨ç¤ºè´Ÿè½½ä¸¥é‡ã€‚ uptime å‘½ä»¤ä¹Ÿå¯ä»¥æ˜¾ç¤ºæ­¤é¡¹æ•°æ® ç¬¬äºŒè¡Œæ˜¾ç¤ºUSER TTY FROM LOGIN@ IDLE JCPU PCPU WHAT IDLE è¡¨ç¤ºç”¨æˆ·ç™»é™†è¿‡æ¥åç©ºé—²å¤šä¹… PCPU è¡¨ç¤ºç”¨æˆ·ç™»é™†åæ‰§è¡Œçš„æ“ä½œå ç”¨çš„CPUçš„æ—¶é—´ CPUæ—¶é—´ JCPU è¡¨ç¤ºç´¯è®¡å ç”¨çš„CPUæ—¶é—´ WHAT è¡¨ç¤ºæ‰§è¡Œçš„æ“ä½œ who å‘½ä»¤ # rootwho am i username pts/0 2020-04-21 14:41 (:1.0)# rootwho mom likes username pts/0 2020-04-21 14:41 (:1.0)# pre userwhoami username# rootwho -m username pts/0 2020-04-21 14:41 (:1.0) pts/{num}ä¸­çš„ptsè¡¨ç¤ºä¼ªç»ˆç«¯ï¼Œ{num}è¡¨ç¤ºç”¨æˆ·æ‰“å¼€çš„ä¼ªç»ˆç«¯åºå·ã€‚ ç›¸å¯¹æ¥è¯´ï¼Œdev/ttyæ˜¯çœŸç»ˆç«¯ï¼Œptsæ˜¯åœ¨æŸä¸ªçœŸç»ˆç«¯ä¸‹çš„ä¼ªç»ˆç«¯ï¼Œå¯ä»¥å­˜åœ¨å¤šä¸ªã€‚ param description -a æ‰“å°èƒ½æ‰“å°çš„å…¨éƒ¨ -d æ‰“å°æ­»æ‰çš„è¿›ç¨‹ -m åŒam iï¼Œmom likes æ–‡ä»¶æ‰“åŒ…æ‰“åŒ…å’Œå‹ç¼©çš„åŒºåˆ« æ‰“åŒ… : å°†å¤šä¸ªæ–‡ä»¶å’Œç›®å½•é›†ä¸­å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ å‹ç¼© : åˆ©ç”¨ç®—æ³•å¯¹æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œä»è€Œè¾¾åˆ°ç¼©å‡å ç”¨ç£ç›˜ç©ºé—´çš„ç›®çš„ã€‚ Linuxä¸‹ï¼Œå¸¸ç”¨æ‰“åŒ…å‘½ä»¤æœ‰2ä¸ªï¼Œåˆ†åˆ«æ˜¯tarå’Œdd; å¸¸ç”¨çš„å‹ç¼©å‘½ä»¤æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚gzipã€zipã€bzip2ç­‰ã€‚ æ‰“åŒ… æ‰“åŒ…ï¼Œä¹Ÿç§°ä¸ºå½’æ¡£(archive)ï¼ŒæŒ‡çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„é›†åˆï¼Œè€Œè¿™ä¸ªé›†åˆè¢«å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ å½’æ¡£æ–‡ä»¶æ²¡æœ‰ç»è¿‡å‹ç¼©ï¼Œå› æ­¤ï¼Œå®ƒå ç”¨çš„ç©ºé—´æ˜¯å…¶ä¸­æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•çš„æ€»å’Œã€‚é€šå¸¸ï¼Œå½’æ¡£æ€»æ˜¯ä¼šå’Œç³»ç»Ÿå¤‡ä»½è”ç³»åœ¨ä¸€èµ·ã€‚ å‹ç¼© å‹ç¼©æ˜¯æŒ‡åˆ©ç”¨ç®—æ³•å°†æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œå·²è¾¾åˆ°ä¿ç•™æœ€å¤§æ–‡ä»¶ä¿¡æ¯ï¼Œè€Œè®©æ–‡ä»¶ä½“ç§¯å˜å°çš„ç›®çš„ã€‚ å…¶åŸºæœ¬åŸç†ä¸ºï¼Œé€šè¿‡æŸ¥æ‰¾æ–‡ä»¶å†…çš„é‡å¤å­—èŠ‚ï¼Œå»ºç«‹ä¸€ä¸ªç›¸åŒå­—èŠ‚çš„è¯å…¸æ–‡ä»¶ï¼Œå¹¶ç”¨ä¸€ä¸ªä»£ç è¡¨ç¤ºã€‚ æ‰“åŒ…å·¥å…·taræ‰“åŒ…tar -cf pack dir å¿…é€‰å‚æ•°ï¼š -f :ä½¿ç”¨æ¡£æ¡ˆåå­—ï¼Œè¯¥å‚æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œåé¢åªèƒ½æ¥æ¡£æ¡ˆåã€‚ -f æ˜¯æ‰§è¡Œtarè¿‡ç¨‹ä¸­éœ€è¦æºå¸¦çš„ å¯é€‰å‚æ•°ï¼š -pï¼Œä¿ç•™æ–‡ä»¶å±æ€§ï¼ˆæƒé™ç­‰ï¼‰ã€‚ -hï¼Œè¿½è¸ªé“¾æ¥å¹¶å½’æ¡£ã€‚ -Pä¿ç•™ç»å¯¹è·¯å¾„ç¬¦ï¼Œå³è·¯å¾„å‰çš„/ã€‚è‹¥ä¿ç•™ï¼Œåˆ™è§£å‹æ—¶ä¼šæŒ‰ç…§ç»å¯¹è·¯å¾„è¿›è¡Œè§£å‹ã€‚ è§£å‹æ—¶ä¹Ÿå¯é€šè¿‡-På‚æ•°æŒ‡å®šæ˜¯å¦é€šè¿‡ç»å¯¹è·¯å¾„è§£å‹ã€‚ä¸è¿‡ï¼Œå¯¹äºæ ¹æœ¬å°±ä¸æ˜¯ç»å¯¹è·¯å¾„çš„æ–‡ä»¶ï¼Œä¸ä¼šæŒ‰ç…§ç»å¯¹è·¯å¾„è§£å‹ã€‚ -c: å»ºç«‹å‹ç¼©æ¡£æ¡ˆ -xï¼šè§£å‹ï¼ˆä¼šæ ¹æ®å‹ç¼©æ ¼å¼è‡ªåŠ¨è¿›è¡Œè¯†åˆ«ï¼‰ -tï¼šæŸ¥çœ‹å†…å®¹ -rï¼šå‘å‹ç¼©å½’æ¡£æ–‡ä»¶æœ«å°¾è¿½åŠ æ–‡ä»¶ -uï¼šæ›´æ–°åŸå‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶ è¿™äº›é€‰é¡¹ä½œä¸º tar ä½¿ç”¨è¿‡ç¨‹ä¸­æ ¹æ®æ‰§è¡Œçš„æ“ä½œè¿›è¡Œé€‰æ‹©ï¼Œå¿…é¡»è¦æœ‰å…¶ä¸€ã€‚ æ³¨æ„ï¼šé»˜è®¤å°½å¯èƒ½åœ°æŒ‰ç…§ç›¸å¯¹è·¯å¾„è§£å‹ï¼Œé˜²æ­¢æ„å¤–è¦†ç›–æ–‡ä»¶ã€‚ tarè§£åŒ…ï¼š tar -xf pack -C dir -xè¡¨ç¤ºè§£åŒ…-C {dir}æŒ‡å®šè§£åŒ…ç›®å½•ã€‚ å¯é€‰å‚æ•°-Pä¿ç•™ç»å¯¹è·¯å¾„ç¬¦ï¼Œå¯¹äºä¸æ˜¯ç»å¯¹è·¯å¾„çš„æ–‡ä»¶ï¼Œä¸ä¼šæŒ‰ç…§ç»å¯¹è·¯å¾„è§£å‹ã€‚ tarä½¿ç”¨å‹ç¼©å·¥å…·ï¼š å‹ç¼©æ—¶åªéœ€è¦åŠ ä¸Šå¯¹åº”å‚æ•°å³å¯ï¼Œä¾‹å¦‚gzipå¯¹åº”-zï¼š tar -zcf pack dir è§£åŒ…æ—¶ç»Ÿæ ·ï¼š tar -zxf pack å‹ç¼©æ–‡ä»¶æ ¼å¼ å‚æ•° *.tar.gz -z *.tar.xz -J *tar.bz2 -j å‹ç¼©å·¥å…·ä¸‹é¢ä¸ºå‹ç¼©æˆ–è§£å‹æ¡£æ¡ˆæ—¶çš„å¯é€‰å‚æ•°ã€‚ -zï¼šæœ‰ gzip å±æ€§çš„å‹ç¼©åŠè§£å‹ -jï¼šæœ‰ bz2 å±æ€§çš„å‹ç¼©åŠè§£å‹ -Zï¼šæœ‰compresså±æ€§çš„å‹ç¼©åŠè§£å‹ -vï¼šæ˜¾ç¤ºæ‰€æœ‰æ‰“åŒ…åŠå‹ç¼©è§£å‹è¿‡ç¨‹ -Oï¼šå°†æ–‡ä»¶è§£å¼€åˆ°æ ‡å‡†è¾“å‡º zip å‹ç¼© zipæ‰“åŒ…ï¼š zip -r -q -9 -o pack dir -rè¡¨ç¤ºé€’å½’æ‰“åŒ…å­ç›®å½•ï¼Œ-qæ˜¯é™é»˜æ‰“åŒ…ï¼Œä¸è¾“å‡ºä¿¡æ¯ï¼Œ-9æ˜¯å‹ç¼©è´¨é‡ï¼Œæœ€é«˜ 9 æœ€ä½ 1ï¼Œ-oåç´§è·Ÿè¾“å‡ºçš„æ–‡ä»¶ã€‚ å¦å¤–è¿˜å¯ä»¥åŠ ä¸€ä¸ªå‚æ•°-eè¿›è¡ŒåŠ å¯†æ‰“åŒ…ã€‚ å¯¹äºè·¨å¹³å°çš„æ¢è¡Œé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡-lå‚æ•°åœ¨æ‰“åŒ…çš„åŒæ—¶è¿›è¡Œè½¬æ¢ï¼Œå°†LFè½¬æ¢ä¸ºCRLFã€‚ unzipè§£åŒ…ï¼š unzip -q pack å¯ä»¥ä½¿ç”¨-d {dir}æŒ‡å®šè§£å‹ç›®å½•ï¼šunzip -q {pack} -d {dir}ã€‚ -Oå¯ä»¥æŒ‡å®šç¼–ç ï¼Œä¾‹å¦‚-O GBKã€‚ unzipå¯ä»¥ç”¨æ¥æŸ¥çœ‹å‹ç¼©åŒ…ä¿¡æ¯ï¼Œé€šè¿‡-lå‚æ•°ï¼šunzip -l {pack}ã€‚ gzipå‹ç¼© gzipæ‰“åŒ… gzip [æ–‡ä»¶å] å‹ç¼©æ–‡ä»¶ åªèƒ½å‹ç¼©æ–‡ä»¶ä¸èƒ½å‹ç¼©ç›®å½•ï¼Œè€Œä¸”ä¸ä¿ç•™åŸæ–‡ä»¶ å‹ç¼©åæ ¼å¼ä¸ºï¼š.gz gzipè§£åŒ… gunzip [å‹ç¼©åŒ…å] è§£å‹ç¼©.gzæ–‡ä»¶ gzip -d [å‹ç¼©åŒ…å] ä¹Ÿæ˜¯ä¸€æ ·çš„ä½œç”¨ï¼Œè§£å‹ç¼©.gzæ–‡ä»¶ bzipå‹ç¼©bzip æ‰“åŒ…: bzip2 [é€‰é¡¹] [æ–‡ä»¶å] å‹ç¼©æ–‡ä»¶ å¤§å‹æ–‡ä»¶ä¸€èˆ¬ç”¨è¿™ä¸ªå‹ç¼© ä¾‹å­ï¼šbzip2 -k Japan -kï¼šä¿ç•™åŸæ–‡ä»¶ã€‚å¦‚æœä¸éœ€ä¿ç•™å¯å»æ‰ã€‚ å¯ä»¥ä¸tarç»“åˆä½¿ç”¨ tar -cjfv Japan.tar.bz2 Japan Bunzip è§£åŒ…: bunzip2 [é€‰é¡¹] [å‹ç¼©æ–‡ä»¶å] è§£å‹æ–‡ä»¶ -kï¼šä¿ç•™å‹ç¼©åŒ… ä¸tarç»“åˆä½¿ç”¨ : tar -xjfv Japan.tar.bz2 Japan å…³æœºå‘½ä»¤å…³æœºé‡å¯ shutdown [-r | -h] time #shutdown [é€‰é¡¹] æ—¶é—´shutdown -r now # é‡å¯rebootshutdown -h now # å…³æœºpoweroff#æ—¶é—´é€‰é¡¹é‡Œå¯ä»¥å¡«å…·ä½“æ—¶é—´æ¯”å¦‚ï¼š#now ç°åœ¨å…³æœº#20:30 å…«ç‚¹åŠå…³æœºshutdown -r +5 # 5minshutdown -h +5 # 5minshutdown -r 5:00 # 5:00shutdown -h 5:00 # 5:00 -cï¼šå–æ¶ˆå‰ä¸€ä¸ªå…³æœºå‘½ä»¤ -hï¼šå…³æœº -rï¼šé‡å¯ åœ¨æœåŠ¡å™¨ä¸Šé‡å¯éœ€è¦è°¨æ…ï¼Œéœ€è¦å…ˆåœæ‰æœåŠ¡ï¼Œå¦åˆ™ç‰©ç†å†…å­˜ä¼šåè€Œä¸”è¿œç¨‹æœåŠ¡å™¨åªèƒ½é‡å¯ï¼Œå…³æœºåéœ€è¦ç®¡ç†å‘˜æ‰‹åŠ¨å¼€æœº å…¶ä»–å…³æœºå‘½ä»¤ï¼š halt poweroff ç›¸å½“äºç›´æ¥æ–­ç”µ init 0 æ¨èä½¿ç”¨shutdownå…³æœºï¼Œä¼šä¿å­˜æ­£åœ¨è¿è¡Œçš„æœåŠ¡ å…¶ä»–é‡å¯å‘½ä»¤ï¼šreboot æŒ‚è½½å‘½ä»¤å¦‚æœæƒ³è¦è®¿é—®Linuxä¸­çš„æ ¹ç›®å½•ä»¥å¤–çš„æ–‡ä»¶ï¼Œéœ€è¦å°†å®ƒâ€œå…³è”â€åˆ°æ ¹ç›®å½•ä¸‹çš„æŸä¸€ä¸ªç›®å½•æ¥å®ç°ï¼Œè¿™ç§å…³è”æ“ä½œå°±å«åšâ€œæŒ‚è½½â€ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯â€œæŒ‚è½½ç‚¹â€ï¼Œè§£é™¤æ¬¡å…³è”å…³ç³»çš„è¿‡ç¨‹å°±æ˜¯â€œå¸è½½â€ã€‚ â€œæŒ‚è½½ç‚¹â€çš„ç›®å½•æœ‰3ä¸ªè¦æ±‚ï¼š ï¼ˆ1ï¼‰å¯ä»¥ç”¨mkdirå‘½ä»¤æ–°å»ºç›®å½•ï¼ˆç›®å½•äº‹å…ˆå­˜åœ¨ï¼‰ã€‚ ï¼ˆ2ï¼‰æŒ‚è½½ç‚¹ç›®å½•ä¸å¯è¢«å…¶ä»–è¿›ç¨‹ä½¿ç”¨åˆ°ã€‚ ï¼ˆ3ï¼‰æŒ‚è½½ç‚¹ä¸‹åŸæœ‰æ–‡ä»¶è¢«éšè—ã€‚ çŸ¥ä¹ï¼šæŒ‚è½½å¯ä»¥ç†è§£ä¸ºæ’ä¹é«˜ç§¯æœ¨ï¼ˆæˆ‘é—ºå¥³æœ€è¿‘å¾ˆçˆ±ç©è¿™ä¸ªï¼›ï¼‰ï¼Œé¦–å…ˆç³»ç»Ÿä¸€å®šè¦å…ˆæœ‰ä¸€ä¸ªæ ¹æ–‡ä»¶ç³»ç»Ÿå¹¶æŒ‚è½½åœ¨â€â€œä¸Šï¼Œä½ å¯ä»¥ç†è§£ä¸ºä½ ç”¨ä¹é«˜åšäº†ä¸€ä¸ªæœºå™¨äººï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨åè¿™å°±æ˜¯æ ¹æ–‡ä»¶ç³»ç»Ÿäº†ã€‚ä¹‹åä½ æƒ³å†æŒ‚è½½æ–°æ–‡ä»¶ç³»ç»Ÿï¼Œå°±å¥½åƒä½ åˆç”¨ä¹é«˜æ’å‡ºä¸€æŠŠå‰‘ï¼ˆä¸€ä¸ªæ–°çš„ç‹¬ç«‹æ–‡ä»¶ç³»ç»Ÿï¼‰ï¼Œä½ å¯ä»¥æŠŠå‰‘æ’åœ¨æœºå™¨äººä»»ä½•èƒ½æ’çš„åœ°æ–¹ï¼Œæ¯”å¦‚å³æ‰‹ä¸Šã€‚å‰‘æ˜¯ç‹¬ç«‹çš„ï¼Œä½ æ”¹å˜å‰‘çš„å½¢çŠ¶å¹¶ä¸å½±å“æœºå™¨äººæœ¬èº«ï¼Œå°†æ¥ä½ ä¸æƒ³ç”¨è¿™æŠŠå‰‘äº†å¯ä»¥ç›´æ¥æ‹†ä¸‹æ¥ï¼ˆå¸è½½ï¼‰æ”¶å¥½ï¼Œä¹Ÿå¯ä»¥å†æ’ï¼ˆæŒ‚è½½ï¼‰ä¸€æŠŠæªï¼ˆå¦ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼‰ä¸Šå»ã€‚ æ–‡ä»¶ç³»ç»ŸæŒ‚è½½æ—¶æœ‰è¦†ç›–ï¼ˆé®ç›–ï¼‰å…³ç³»ï¼Œå¦‚æœä½ æ‰€è¦æŒ‚è½½çš„æŒ‚è½½ç‚¹ï¼ˆç›®å½•ï¼‰ä¸‹é¢æœ‰æ–‡ä»¶æˆ–å·²æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œé‚£ä¹ˆæ–°æŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿä¼šé®ç›–å…¶ä¸‹é¢çš„å†…å®¹ã€‚è¿™ç‚¹å’Œä¹é«˜ä¸åŒï¼Œæ¯”å¦‚ä½ åˆåšäº†ä¸€ä¸ªæ–°çš„æœºå™¨äººå³æ‰‹è‡‚ï¼Œä½ å¾—è‡ªå·±æŠŠåŸå³æ‰‹è‡‚è¿åŒæ‰‹ä¸Šçš„ä¸œè¥¿æ‹†ä¸‹æ¥ï¼Œå†æ’ä¸Šæ–°ä½œçš„ã€‚è€Œå®é™…çš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ä¸éœ€è¦å…ˆå¸è½½ï¼Œæ–°æ–‡ä»¶ç³»ç»Ÿï¼ˆå³æ‰‹è‡‚ï¼‰ä¼šç›´æ¥ä»æŒ‚è½½ç‚¹ï¼ˆå³è‡‚æ¥å£ï¼‰å¼€å§‹è¦†ç›–ï¼ˆéšè—ï¼‰æŒ‚è½½ç‚¹ï¼ˆæ¥å£ï¼‰ä»¥ä¸‹æ‰€æœ‰çš„åŸå†…å®¹ã€‚è€Œå¸è½½ååŸå†…å®¹åˆä¼šæ˜¾ç°å‡ºæ¥ã€‚ æ¥è‡ªç”¨æˆ·ï¼šé†‰å§æ²™åœº mount [-t æ–‡ä»¶ç³»ç»Ÿ] è®¾å¤‡æ–‡ä»¶å æŒ‚è½½ç‚¹ mount è®¾å¤‡æ–‡ä»¶åæŒ‚è½½ç‚¹ å¸è½½å…‰ç›˜ï¼Œè®¾å¤‡æ–‡ä»¶åå’ŒæŒ‚è½½ç‚¹ä¸¤è€…ä»»é€‰å…¶ä¸€ æ”¾å…¥å…‰ç›˜ : è™šæ‹Ÿæœºä¸­æ”¾å…¥ï¼Œæˆ–è€…æœåŠ¡å™¨ä¸‹è½½iosæ–‡ä»¶ åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ï¼Œè®¾ä¸ºæŒ‚è½½ç‚¹ mkdir /media/cdrom /media è¾“å…¥å‘½ä»¤ mount -t iso9660 /dev/sr0 /media/cdrom è®¾å¤‡æ–‡ä»¶åé»˜è®¤å°±æ˜¯devsr0ï¼Œæ–‡ä»¶ç³»ç»Ÿä¸ºiso9660 å®ƒæ˜¯å›½é™…æ ‡å‡†çš„cdæ–‡ä»¶æ ¼å¼ï¼Œå®ƒå‘Šè¯‰mountå‘½ä»¤ï¼Œæˆ‘è¦æŒ‚è½½çš„æ˜¯ä¸€ä¸ªæ ‡å‡†çš„cdã€‚éœ€è¦æ­»è®°ï¼ï¼ï¼ devcdromä¹Ÿå¯ä»¥å†™ devsr0devcdromæ˜¯sr0çš„è½¯é“¾æ¥ã€‚ è¿›å…¥æŒ‚è½½åçš„ç›˜ç¬¦ cd /media/cdrom å¸è½½å…‰ç›˜ cd #å…ˆé€€å‡º/media/cdromumount /dev/sr0 #å†è¾“å…¥å‘½ä»¤ï¼šumount /dev/sr0 æ³¨æ„ï¼šå¦‚æœä¹‹å‰æŒ‚è½½è¿‡å…¶ä»–ç›˜ï¼Œéœ€è¦å¸è½½ä¹‹åæ‰èƒ½æŒ‚è½½ï¼Œè¾“å…¥å‘½ä»¤ï¼š umount /dev/sr0 ç½‘ç»œå‘½ä»¤ç»™åœ¨çº¿ç”¨æˆ·å‘ä¿¡æ¯ write ç”¨æˆ·å æŒ‰Ctrl+Dä¿å­˜ç»“æŸ åªèƒ½ç»™åœ¨çº¿ç”¨æˆ·å‘ å¯ä»¥ç”¨wæŸ¥è¯¢ç”¨æˆ·åœ¨çº¿æƒ…å†µ ä¸åœ¨çº¿å‘ä¸å‡ºå»ã€‚ wall [ä¿¡æ¯] å‘å¹¿æ’­ä¿¡æ¯ ç¾¤å‘æ‰€æœ‰åœ¨çº¿ç”¨æˆ· ping [IPåœ°å€] æµ‹è¯•ç½‘ç»œè¿é€šæ€§ ping -c æŒ‡å®šå‘é€æ¬¡æ•° ifconfig æŸ¥çœ‹ç½‘å¡ä¿¡æ¯ ä¸»è¦åŠŸèƒ½æ˜¯æŸ¥è¯¢å½“å‰æœ¬æœºIPåœ°å€ mail ç”¨æˆ·åç»™ä¸åœ¨çº¿çš„ç”¨æˆ·å‘é€é‚®ä»¶ mail friend_nameSubject headline #è¾“å…¥æ ‡é¢˜content#æ­£æ–‡#Ctrl D ä¿å­˜ç»“æŸå‘é€ h é”®æŸ¥çœ‹é‚®ç®±åˆ—è¡¨ d [n] åˆ é™¤ç¬¬nå°é‚®ä»¶ q é€€å‡º last åˆ—å‡ºç›®å‰ä¸è¿‡å»ç™»é™†ç³»ç»Ÿçš„ç”¨æˆ·ä¿¡æ¯ lastlog æ£€æŸ¥æŸç‰¹å®šç”¨æˆ·ä¸Šæ¬¡ç™»é™†çš„æ—¶é—´ lastlog -u [uID] æ£€æŸ¥uIDç”¨æˆ·ä¸Šæ¬¡ç™»é™†çš„æ—¶é—´ traceroute æ˜¾ç¤ºæ•°æ®åŒ…åˆ°ä¸»æœºé—´çš„è·¯å¾„è¿™é‡ŒCentOS7ç”¨æˆ·ä¹Ÿä¼šå‡ºç°tracerouteå‘½ä»¤ä¸èƒ½ä½¿ç”¨çš„é—®é¢˜ï¼Œç›´æ¥ä¸‹è½½tracerouteå°±å¥½äº†yum install -y traceroute å®‰è£… traceroute [ç½‘ç«™ç½‘å€] å¯ä»¥æ£€æŸ¥ç½‘ç»œå“ªä¸ªèŠ‚ç‚¹å‡ºç°é—®é¢˜ netstat [é€‰é¡¹] æ˜¾ç¤ºç½‘ç»œç›¸å…³ä¿¡æ¯ -t TCPåè®®ï¼šä¼ è¾“æ§åˆ¶åè®® -u UDPåè®®ï¼šç”¨æˆ·æ•°æ®æŠ¥ -l ç›‘å¬ -r è·¯ç”±ï¼šç½‘å…³ -n æ˜¾ç¤ºIPåœ°å€å’Œç«¯å£å· netstat -tlun ï¼šæŸ¥è¯¢æœ¬æœºç›‘å¬çš„ç«¯å£ netstat -an ï¼šæŸ¥çœ‹æœ¬æœºæ‰€æœ‰çš„ç½‘ç»œè¿æ¥ netstat -rn ï¼šæŸ¥çœ‹æœ¬æœºè·¯ç”±ï¼ˆç½‘å…³ï¼‰ setup é…ç½®ç½‘ç»œ ï¼ˆredhatä¸“æœ‰å‘½ä»¤ ,åœ¨å…¶ä»–ç‰ˆæœ¬ä¸å­˜åœ¨ï¼‰ æ°¸ä¹…ç”Ÿæ•ˆ , å’Œåˆšå¼€å§‹ä»‹ç»çš„ifconfigå‘½ä»¤ä¸ä¸€æ ·ã€‚CentOS7ä½¿ç”¨ nmtuiå‘½ä»¤ä»£æ›¿setupï¼Œä¸è¿‡æ˜¯åœ¨è™šæ‹Ÿæœºä¸­è°ƒè¯•"},{"title":"Shellå…¥é—¨","path":"/wiki/linux/Shellå…¥é—¨.html","content":"shellåŸºç¡€Shellæ¦‚è¿° Shellæ˜¯ä»€ä¹ˆ Shellæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå®ƒä¸ºç”¨æˆ·æä¾› äº†ä¸€ä¸ªå‘Linuxå†…æ ¸å‘é€è¯·æ±‚ä»¥ä¾¿è¿è¡Œç¨‹ åºçš„ç•Œé¢ç³»ç»Ÿçº§ç¨‹åºï¼Œç”¨æˆ·å¯ä»¥ç”¨Shellæ¥ å¯åŠ¨ã€æŒ‚èµ·ã€åœæ­¢ç”šè‡³æ˜¯ç¼–å†™ä¸€äº›ç¨‹åºã€‚ Shellè¿˜æ˜¯ä¸€ä¸ªåŠŸèƒ½ç›¸å½“å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ï¼Œ æ˜“ç¼–å†™ï¼Œæ˜“è°ƒè¯•ï¼Œçµæ´»æ€§è¾ƒå¼ºã€‚Shellæ˜¯è§£ é‡Šæ‰§è¡Œçš„è„šæœ¬è¯­è¨€ï¼Œåœ¨Shellä¸­å¯ä»¥ç›´æ¥è°ƒ ç”¨Linuxç³»ç»Ÿå‘½ä»¤ã€‚ Shellçš„åˆ†ç±» Bourne Shell:ä»1979èµ·Unixå°±å¼€å§‹ä½¿ç”¨ Bourne Shellï¼ŒBourne Shellçš„ä¸»æ–‡ä»¶åä¸º shã€‚ C Shell: C Shellä¸»è¦åœ¨BSDç‰ˆçš„Unixç³» ç»Ÿä¸­ä½¿ç”¨ï¼Œå…¶è¯­æ³•å’ŒCè¯­è¨€ç›¸ç±»ä¼¼è€Œå¾—å Shell çš„ä¸¤ç§ä¸»è¦è¯­æ³•ç±»å‹æœ‰Bourneå’ŒCï¼Œ è¿™ä¸¤ç§è¯­æ³•å½¼æ­¤ä¸å…¼å®¹ã€‚ Bourneå®¶æ—ä¸»è¦åŒ…æ‹¬shã€kshã€Bashã€pshã€zsh; C å®¶æ—ä¸»è¦åŒ…æ‹¬:cshã€tcsh Bash: Bashä¸shå…¼å®¹ï¼Œç°åœ¨ä½¿ç”¨çš„Linux å°±æ˜¯ä½¿ç”¨Bashä½œä¸ºç”¨æˆ·çš„åŸºæœ¬Shellã€‚ Linuxæ”¯æŒçš„Shellå­˜æ”¾åœ¨æ–‡ä»¶é‡Œï¼š/etc/shellsé»˜è®¤æƒ…å†µä¸‹æœ‰ï¼š /bin/sh/bin/bash/sbin/nologin/bin/tcsh/bin/csh Shellè„šæœ¬çš„æ‰§è¡Œè„šæœ¬æ–‡ä»¶ä¸€èˆ¬æ˜¯ .sh ç»“å°¾ã€‚ æ‰§è¡Œ: bash test.sh #ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„çš†å¯ æœ‰ä¸€ä¸ªæ“ä½œï¼šå¦‚æœä»Windowsé‡Œé¢æ‹·è´ä¸€ä¸ªè„šæœ¬åˆ°Linux è™½ç„¶æœ‰çš„æ—¶å€™æ ¼å¼ä¸€æ ·ä½†æ˜¯è¿˜æ˜¯ä¼šæŠ¥é”™ï¼Œè¿™ä¾¿æ˜¯å› ä¸ºä¸¤ä¸ªç³»ç»Ÿä¸­è„šæœ¬çš„æ ¼å¼ä¸åŒï¼Œæ¯”å¦‚Windowsä¸­çš„å›è½¦åœ¨è„šæœ¬ä¸­ç”¨^M$è¡¨ç¤ºï¼Œè€ŒLinuxä¸­ä¸º$ï¼Œï¼ˆå¯ä»¥ç”¨cat -A [æ–‡ä»¶å] æ¥æŸ¥è¯¢ï¼‰æ‰€ä»¥éœ€è¦è½¬å˜ï¼Œæ­¤æ—¶ç”¨åˆ°ä¸€ä¸ªå‘½ä»¤ï¼šdos2unix [æ–‡ä»¶å]è½¬æ¢åï¼ŒLinuxå°±å¯ä»¥æ‰§è¡Œå•¦ï¼Œé€šè¿‡æ²¡æœ‰è¿™ä¸ªå‘½ä»¤å¯ä»¥ä½¿ç”¨yumå®‰è£… å†å²å‘½ä»¤history [é€‰é¡¹] [å†å²å‘½ä»¤ä¿å­˜æ–‡ä»¶] -c: æ¸…ç©ºå†å²å‘½ä»¤ -w: æŠŠç¼“å­˜ä¸­çš„å†å²å‘½ä»¤å†™å…¥å†å²å‘½ä»¤ä¿å­˜æ–‡ä»¶ ~.bash_history å†å²å‘½ä»¤é»˜è®¤ä¼šä¿å­˜1000æ¡,å¯ä»¥åœ¨ç¯å¢ƒ å˜é‡é…ç½®æ–‡ä»¶etcprofileä¸­è¿›è¡Œä¿®æ”¹æ‰¾åˆ°HISTSIZE1000è¿›è¡Œä¿®æ”¹ï¼Œéšæ„ä¿®æ”¹åˆ°100000æ¡éƒ½å¯ä»¥ï¼Œä¿®æ”¹ä¹‹åé‡å¯ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ å†å²å‘½ä»¤çš„è°ƒç”¨ ä½¿ç”¨ä¸Šã€ä¸‹ç®­å¤´è°ƒç”¨ä»¥å‰çš„å†å²å‘½ä»¤ ä½¿ç”¨â€œ!nâ€é‡å¤æ‰§è¡Œç¬¬næ¡å†å²å‘½ä»¤ ä½¿ç”¨â€œ!!â€é‡å¤æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤ ä½¿ç”¨â€œ!å­—ä¸²â€é‡å¤æ‰§è¡Œæœ€åä¸€æ¡ä»¥è¯¥å­— ä¸²å¼€å¤´çš„å‘½ä»¤ å‘½ä»¤ä¸æ–‡ä»¶è¡¥å…¨åœ¨Bashä¸­ï¼Œåœ¨è¾“å…¥å‘½ä»¤æˆ–æ–‡ä»¶æ—¶ï¼ŒæŒ‰â€œTabâ€é”®å°±ä¼šè‡ªåŠ¨è¿›è¡Œè¡¥å…¨ å‘½ä»¤åˆ«å alias åˆ«å=â€˜åŸå‘½ä»¤â€™ è®¾å®šå‘½ä»¤åˆ«åalias æŸ¥è¯¢å‘½ä»¤åˆ«å å‘½ä»¤æ‰§è¡Œæ—¶é¡ºåºï¼š 1 ç¬¬ä¸€é¡ºä½æ‰§è¡Œç”¨ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„æ‰§è¡Œ çš„å‘½ä»¤ã€‚ 2 ç¬¬äºŒé¡ºä½æ‰§è¡Œåˆ«åã€‚ 3 ç¬¬ä¸‰é¡ºä½æ‰§è¡ŒBashçš„å†…éƒ¨å‘½ä»¤ã€‚ 4 ç¬¬å››é¡ºä½æ‰§è¡ŒæŒ‰ç…§$PATHç¯å¢ƒå˜é‡å®šä¹‰çš„ ç›®å½•æŸ¥æ‰¾é¡ºåºæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå‘½ä»¤ã€‚ è®©åˆ«åæ°¸ä¹…ç”Ÿæ•ˆï¼š vi /root/.bashrc åˆ é™¤åˆ«å unalias åˆ«å Bashå¸¸ç”¨å¿«æ·é”® å¿«æ·é”®\tä½œç”¨ctrl+a\tæŠŠå…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œå¼€å¤´ã€‚å¦‚æœæˆ‘ä»¬è¾“å…¥çš„å‘½ä»¤è¿‡é•¿ï¼Œæƒ³è¦æŠŠå…‰æ ‡ç§» åŠ¨åˆ°å‘½ä»¤è¡Œå¼€å¤´æ—¶ä½¿ç”¨ã€‚ctrl+e\tæŠŠå…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œç»“å°¾ã€‚ctrl+c\tå¼ºåˆ¶ç»ˆæ­¢å½“å‰çš„å‘½ä»¤ã€‚ctrl+l\tæ¸…å±ï¼Œç›¸å½“äºclearå‘½ä»¤ã€‚ctrl+u\tåˆ é™¤æˆ–å‰ªåˆ‡å…‰æ ‡ä¹‹å‰çš„å‘½ä»¤ã€‚æˆ‘è¾“å…¥äº†ä¸€è¡Œå¾ˆé•¿çš„å‘½ä»¤ï¼Œä¸ç”¨ä½¿ç”¨é€€ æ ¼é”®ä¸€ä¸ªä¸€ä¸ªå­—ç¬¦çš„åˆ é™¤ï¼Œä½¿ç”¨è¿™ä¸ªå¿«æ·é”®ä¼šæ›´åŠ æ–¹ä¾¿ctrl+k\tåˆ é™¤æˆ–å‰ªåˆ‡å…‰æ ‡ä¹‹åçš„å†…å®¹ã€‚ctrl+y\tç²˜è´´ctrl+Uæˆ–ctrl+Kå‰ªåˆ‡çš„å†…å®¹ã€‚ctrl+r\tåœ¨å†å²å‘½ä»¤ä¸­æœç´¢ï¼ŒæŒ‰ä¸‹ctrl+Rä¹‹åï¼Œå°±ä¼šå‡ºç°æœç´¢ç•Œé¢ï¼Œåªè¦è¾“å…¥ æœç´¢å†…å®¹ï¼Œå°±ä¼šä»å†å²å‘½ä»¤ä¸­æœç´¢ã€‚ctrl+d\té€€å‡ºå½“å‰ç»ˆç«¯ã€‚ctrl+z\tæš‚åœï¼Œå¹¶æ”¾å…¥åå°ã€‚è¿™ä¸ªå¿«æ·é”®ç‰µæ‰¯å·¥ä½œç®¡ç†çš„å†…å®¹ï¼Œæˆ‘ä»¬åœ¨ç³»ç»Ÿç®¡ ç†ç« èŠ‚è¯¦ç»†ä»‹ç»ã€‚ctrl+s\tæš‚åœå±å¹•è¾“å‡ºã€‚ctrl+q\tæ¢å¤å±å¹•è¾“å‡ºã€‚ æ³¨æ„ï¼šctrl+z å¿«æ·é”®ä¸€å®šè¦è°¨æ…ä½¿ç”¨ï¼Œå¦‚æœä½¿ç”¨çš„å¤šäº†ï¼Œç³»ç»Ÿä¼šå ç”¨å¤§é‡å­˜å‚¨ç©ºé—´æ¥å­˜æ”¾æš‚åœçš„æ•°æ®ï¼Œç”¨å¤šäº†ç³»ç»Ÿä¼šå˜å¡ï¼ï¼ï¼ è¾“å…¥è¾“å‡ºé‡å®šå‘ æ ‡å‡†è¾“å…¥è¾“å‡º è®¾å¤‡ è®¾å¤‡æ–‡ä»¶å æ–‡ä»¶æè¿°ç¬¦ ç±»å‹ é”®ç›˜ devstdin 0 æ ‡å‡†è¾“å…¥ æ˜¾ç¤ºå™¨ devsdtout 1 æ ‡å‡†è¾“å‡º æ˜¾ç¤ºå™¨ devsdterr 2 æ ‡å‡†é”™è¯¯è¾“å‡º è¾“å‡ºé‡å®šå‘ ç±»å‹ ç¬¦å· ä½œç”¨ æ ‡å‡†è¾“å‡ºé‡å®šå‘ å‘½ä»¤ æ–‡ä»¶ ä»¥è¦†ç›–çš„æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„æ­£ç¡®è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶æˆ–è®¾å¤‡å½“ä¸­ã€‚ æ ‡å‡†è¾“å‡ºé‡å®šå‘ å‘½ä»¤ æ–‡ä»¶ ä»¥è¿½åŠ çš„æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„æ­£ç¡®è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶æˆ–è®¾å¤‡å½“ä¸­ã€‚ æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ é”™è¯¯å‘½ä»¤ 2æ–‡ä»¶ ä»¥è¦†ç›–çš„æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„é”™è¯¯è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶æˆ–è®¾å¤‡å½“ä¸­ã€‚ æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘ é”™è¯¯å‘½ä»¤ 2æ–‡ä»¶ ä»¥è¿½åŠ çš„æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„é”™è¯¯è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶æˆ–è®¾å¤‡å½“ä¸­ã€‚ åœ¨è¾“å…¥æŠ¥é”™æ–‡ä»¶ä¸­ 2å’Œå¿…é€‰è¿ç€å†™ ã€‚ æ ‡å‡†é”™è¯¯è¾“å‡ºä¸å¸¸ç”¨ ç±»å‹ ç¬¦å· ä½œç”¨ æ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ å‘½ä»¤ æ–‡ä»¶ 21 ä»¥è¦†ç›–çš„æ–¹å¼ï¼ŒæŠŠæ­£ç¡®è¾“ å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½ä¿å­˜åˆ°åŒ ä¸€ä¸ªæ–‡ä»¶å½“ä¸­ã€‚ æ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ å‘½ä»¤ æ–‡ä»¶ 21 ä»¥è¿½åŠ çš„æ–¹å¼ï¼ŒæŠŠæ­£ç¡®è¾“ å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½ä¿å­˜åˆ°åŒ ä¸€ä¸ªæ–‡ä»¶å½“ä¸­ã€‚ æ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ å‘½ä»¤ æ–‡ä»¶ ä»¥è¦†ç›–çš„æ–¹å¼ï¼ŒæŠŠæ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½ä¿å­˜åˆ°åŒä¸€ä¸ªæ–‡ä»¶å½“ä¸­ã€‚ æ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ å‘½ä»¤ æ–‡ä»¶ ä»¥è¿½åŠ çš„æ–¹å¼ï¼ŒæŠŠæ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½ä¿ æ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ å‘½ä»¤ æ–‡ä»¶1 2æ–‡ä»¶2 æŠŠæ­£ç¡®çš„è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶1ä¸­ï¼ŒæŠŠé”™è¯¯çš„è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶2ä¸­ã€‚ å‘½ä»¤ æ–‡ä»¶ 21 ï¼Œå‘½ä»¤ æ–‡ä»¶ , ä¸¤ç§ä¿å­˜éƒ½ä¸€æ ·ï¼Œåªä¸è¿‡æ˜¯æ ¼å¼ä¸åŒã€‚ æœ‰ä¸€ä¸ªç”¨æ³•ï¼šå‘½ä»¤ /dev/unll ä¸ç®¡å‘½ä»¤æ˜¯å¦æ­£ç¡®ï¼Œç›´æ¥ä¸¢å…¥è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸ä¿å­˜ä»»ä½•æ•°æ®ï¼Œåœ¨å†™shellè„šæœ¬æ—¶æœ‰ç”¨ ã€‚ è¾“å…¥é‡å®š ä¸é€šè¿‡é”®ç›˜è¾“å…¥ï¼Œé€šè¿‡æ–‡ä»¶è¾“å…¥ï¼Œåœ¨å®é™…ä¸­ç”¨çš„ä¸å¤šï¼Œç”¨åœ¨ç»™æºç åŒ…æ‰“è¡¥ä¸ã€‚ wc [é€‰é¡¹] [æ–‡ä»¶å] -c ç»Ÿè®¡å­—èŠ‚æ•° -w ç»Ÿè®¡å•è¯æ•° -l ç»Ÿè®¡è¡Œæ•° ç”¨æ³•ï¼šå‘½ä»¤ æ–‡ä»¶ : æŠŠæ–‡ä»¶ä½œä¸ºå‘½ä»¤çš„è¾“å…¥ã€‚å‘½ä»¤ æ ‡è¯†ç¬¦ : ä¸€ç›´è¾“å…¥ï¼Œç›´åˆ°è¾“å…¥æ ‡è¯†åœæ­¢è¾“å…¥æŠŠæ ‡è¯†ç¬¦ä¹‹é—´å†…å®¹ä½œä¸ºå‘½ä»¤çš„è¾“å…¥ã€‚ ç®¡é“ç¬¦**ç®¡é“ç¬¦ä½œç”¨ï¼š**é“¾æ¥å¤šä¸ªå‘½ä»¤ï¼ŒæŠŠå‘½ä»¤1çš„ç»“æœä½œä¸ºå‘½ä»¤2çš„æ“ä½œå¯¹è±¡ã€‚ ç®¡é“æ˜¯ä¸€ç§é€šä¿¡æœºåˆ¶ï¼Œé€šå¸¸ç”¨äºè¿›ç¨‹é—´çš„é€šä¿¡ã€‚å®ƒè¡¨ç°å‡ºæ¥çš„å½¢å¼å°†å‰é¢æ¯ä¸€ä¸ªè¿›ç¨‹çš„è¾“å‡ºï¼ˆstdoutï¼‰ç›´æ¥ä½œä¸ºä¸‹ä¸€ä¸ªè¿›ç¨‹çš„è¾“å…¥ï¼ˆstdinï¼‰ å‘½ä»¤1 | å‘½ä»¤2 æ³¨æ„ï¼šå‘½ä»¤1çš„æ­£ç¡®è¾“å‡ºä½œä¸ºå‘½ä»¤2çš„æ“ä½œå¯¹è±¡ grep : ä¸»è¦ç”¨äºè¿‡æ»¤ grep [é€‰é¡¹] æ–‡ä»¶å/è·¯å¾„å†…å®¹ -i: å¿½ç•¥å¤§å°å†™ -n: è¾“å‡ºè¡Œå· -v: åå‘æŸ¥æ‰¾ â€“colorauto æœç´¢å‡ºçš„å…³é”®å­—ç”¨é¢œè‰²æ˜¾ç¤º ls / | grep â€œyâ€#é’ˆå¯¹ä¸Šé¢è¿™ä¸ªå‘½ä»¤è¯´æ˜ï¼š#ä»¥ç®¡é“ä½œä¸ºåˆ†ç•Œçº¿ï¼Œå‰é¢çš„å‘½ä»¤æœ‰ä¸ªè¾“å‡ºï¼Œåé¢éœ€è¦å…ˆè¾“å…¥ï¼ˆç¼ºå°‘æŸ¥æ‰¾èŒƒå›´ï¼‰ï¼Œç„¶åå†è¿‡æ»¤ï¼Œæœ€åå†è¾“å‡ºï¼Œé€šä¿—çš„è®²å°±æ˜¯ç®¡é“å‰é¢çš„è¾“å‡ºå°±æ˜¯åé¢æŒ‡ä»¤çš„è¾“å…¥ã€‚ ä¸ºäº†ä¾¿äºç†è§£ï¼Œä¸Šè¿°çš„æŒ‡ä»¤å˜ç›¸å®ç°å¯ä»¥å¦‚ä¸‹ï¼š ls / xxx.txt #å°†ls /çš„ç»“æœä¿å­˜åˆ°xxx.txtæ–‡ä»¶ä¸­grep â€œyâ€ xxx.txt #ä½¿ç”¨grepæŒ‡ä»¤æœç´¢xxx.txtä¸­çš„åŒ…å«yçš„è¡Œ xargså‘½ä»¤æ‰©å±• é—®é¢˜ï¼šä¸ºä»€ä¹ˆéœ€è¦xargså‘½ä»¤ï¼Ÿ ç­”ï¼šä¹‹æ‰€ä»¥èƒ½ç”¨åˆ°è¿™ä¸ªå‘½ä»¤ï¼Œå…³é”®æ˜¯ç”±äºå¾ˆå¤šå‘½ä»¤ä¸æ”¯æŒ|ç®¡é“æ¥ä¼ é€’å‚æ•°ï¼Œè€Œæ—¥å¸¸å·¥ä½œä¸­æœ‰æœ‰è¿™ä¸ªå¿…è¦ï¼Œæ‰€ä»¥å°±æœ‰äº† xargs å‘½ä»¤ã€‚ é¦–å…ˆæ¥çœ‹ä¸€ä¸ªå‘½ä»¤ï¼š find /etc -name *.conf | ls -l #(é”™è¯¯)find /etc -name *.conf | xargs ls -l #(æ­£ç¡® xargs å¯ä»¥å°†ç®¡é“æˆ–æ ‡å‡†è¾“å…¥ï¼ˆstdinï¼‰æ•°æ®è½¬æ¢æˆå‘½ä»¤è¡Œå‚æ•°ï¼Œä¹Ÿèƒ½å¤Ÿä»æ–‡ä»¶çš„è¾“å‡ºä¸­è¯»å–æ•°æ®ã€‚ xargs ä¹Ÿå¯ä»¥å°†å•è¡Œæˆ–å¤šè¡Œæ–‡æœ¬è¾“å…¥è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼ï¼Œä¾‹å¦‚å¤šè¡Œå˜å•è¡Œï¼Œå•è¡Œå˜å¤šè¡Œã€‚ xargs é»˜è®¤çš„å‘½ä»¤æ˜¯ echoï¼Œè¿™æ„å‘³ç€é€šè¿‡ç®¡é“ä¼ é€’ç»™ xargs çš„è¾“å…¥å°†ä¼šåŒ…å«æ¢è¡Œå’Œç©ºç™½ï¼Œä¸è¿‡é€šè¿‡ xargs çš„å¤„ç†ï¼Œæ¢è¡Œå’Œç©ºç™½å°†è¢«ç©ºæ ¼å–ä»£ã€‚ xargs æ˜¯ä¸€ä¸ªå¼ºæœ‰åŠ›çš„å‘½ä»¤ï¼Œå®ƒèƒ½å¤Ÿæ•è·ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºï¼Œç„¶åä¼ é€’ç»™å¦å¤–ä¸€ä¸ªå‘½ä»¤ã€‚ cat word.txt|xargs #å¤šè¡Œè¾“å…¥å•è¡Œè¾“å‡ºcat word.txt|xargs -n #å¤šè¡Œè¾“å‡º ls / | wc -l #ç»Ÿè®¡â€œ/â€ä¸‹çš„æ–‡æ¡£çš„ä¸ªæ•°cat /etc/passwd | wc -l #ç»Ÿè®¡æœ‰å¤šå°‘ä¸ªç”¨æˆ·ä¿¡æ¯ å¤šå‘½ä»¤é¡ºåºæ‰§è¡Œ å¤šå‘½ä»¤æ‰§è¡Œç¬¦ æ ¼å¼ ä½œç”¨ ; å‘½ä»¤1 ;å‘½ä»¤2 å¤šä¸ªå‘½ä»¤é¡ºåºæ‰§è¡Œï¼Œå‘½ä»¤ä¹‹é—´æ²¡æœ‰ä»»ä½•é€»è¾‘è”ç³»ï¼Œå°±ç®—ç¬¬ä¸€æ¡æŠ¥é”™ï¼Œç¬¬äºŒæ¡ä¹Ÿä¼šæ‰§è¡Œ å‘½ä»¤1 å‘½ä»¤2 é€»è¾‘ä¸å½“å‘½ä»¤1æ­£ç¡®æ‰§è¡Œï¼Œåˆ™å‘½ä»¤2æ‰ä¼šæ‰§è¡Œ å½“å‘½ä»¤1æ‰§è¡Œä¸æ­£ç¡®ï¼Œåˆ™å‘½ä»¤2ä¸ä¼šæ‰§è¡Œ | | å‘½ä»¤1 || å‘½ä»¤2 é€»è¾‘æˆ–å½“å‘½ä»¤1 æ‰§è¡Œä¸æ­£ç¡®ï¼Œåˆ™å‘½ä»¤2æ‰ä¼šæ‰§è¡Œ å½“å‘½ä»¤1æ­£ç¡®æ‰§è¡Œï¼Œåˆ™å‘½ä»¤2ä¸ä¼šæ‰§è¡Œ ç£ç›˜æ–‡ä»¶å¤åˆ¶ï¼š dd if=è¾“å…¥æ–‡ä»¶ / of=è¾“å‡ºæ–‡ä»¶ / bs=å­—èŠ‚æ•°/ count=ä¸ªæ•° if=è¾“å…¥æ–‡ä»¶ æŒ‡å®šæºæ–‡ä»¶æˆ–æºè®¾å¤‡ of=è¾“å‡ºæ–‡ä»¶ æŒ‡å®šç›®æ ‡æ–‡ä»¶æˆ–ç›®æ ‡è®¾å¤‡ bs=å­—èŠ‚æ•° æŒ‡å®šä¸€æ¬¡è¾“å…¥è¾“å‡ºå¤šå°‘å­—èŠ‚ï¼Œå³æŠŠè¿™äº›å­—èŠ‚çœ‹åš ä¸€ä¸ªæ•°æ®å— count=ä¸ªæ•° æŒ‡å®šè¾“å…¥è¾“å‡ºå¤šå°‘ä¸ªæ•°æ®å— è¿™æ¡å‘½ä»¤å¯ä»¥æŠŠç³»ç»Ÿæ–‡ä»¶ï¼Œç£ç›˜éƒ½å¤åˆ¶äº†ï¼Œéå¸¸å¼ºå¤§ã€‚ ä¾‹å­ï¼š date ; dd if=/dev/zero of=/root/testfile bs=1k count=100000 ; date é€šé…ç¬¦ä¸ç‰¹æ®Šç¬¦å·é€šé…ç¬¦ï¼š é€šé…ç¬¦ ä½œç”¨ ? åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ * åŒ¹é…0ä¸ªæˆ–ä»»æ„å¤šä¸ªä»»æ„å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒ¹é…ä»»ä½•å†…å®¹ [] åŒ¹é…ä¸­æ‹¬å·ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚:[abc]ä»£è¡¨ä¸€å®šåŒ¹é… ä¸€ä¸ªå­—ç¬¦ï¼Œæˆ–è€…æ˜¯aï¼Œæˆ–è€…æ˜¯bï¼Œæˆ–è€…æ˜¯cã€‚ [-] åŒ¹é…ä¸­æ‹¬å·ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œ-ä»£è¡¨ä¸€ä¸ªèŒƒå›´ã€‚ä¾‹å¦‚:[a-z] ä»£è¡¨åŒ¹é…ä¸€ä¸ªå°å†™å­—æ¯ã€‚ [^] é€»è¾‘éï¼Œè¡¨ç¤ºåŒ¹é…ä¸æ˜¯ä¸­æ‹¬å·å†…çš„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚:[ ^0- 9 ]ä»£è¡¨åŒ¹é…ä¸€ä¸ªä¸æ˜¯æ•°å­—çš„å­—ç¬¦ã€‚ ç‰¹æ®Šç¬¦å· ç¬¦å· ä½œç”¨ â€˜â€™ å•å¼•å·ã€‚åœ¨å•å¼•å·ä¸­æ‰€æœ‰çš„ç‰¹æ®Šç¬¦å·ï¼Œå¦‚â€œ$â€å’Œâ€œâ€(åå¼•å·)éƒ½ æ²¡æœ‰ç‰¹æ®Šå«ä¹‰ã€‚ â€œâ€ åŒå¼•å·ã€‚åœ¨åŒå¼•å·ä¸­ç‰¹æ®Šç¬¦å·éƒ½æ²¡æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œä½†æ˜¯â€œ$â€ã€â€œâ€ å’Œâ€œ\\â€æ˜¯ä¾‹å¤–ï¼Œæ‹¥æœ‰â€œè°ƒç”¨å˜é‡çš„å€¼â€ã€â€œå¼•ç”¨å‘½ä»¤â€å’Œâ€œè½¬ä¹‰ç¬¦â€çš„ç‰¹æ®Šå«ä¹‰ã€‚ åå¼•å·ã€‚åå¼•å·æ‹¬èµ·æ¥çš„å†…å®¹æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œåœ¨Bashä¸­ä¼šå…ˆæ‰§è¡Œå®ƒã€‚ å’Œ$()ä½œç”¨ä¸€æ ·ï¼Œä¸è¿‡æ¨èä½¿ç”¨$()ï¼Œå› ä¸ºåå¼•å·éå¸¸å®¹æ˜“çœ‹é”™ã€‚ $() å’Œåå¼•å·ä½œç”¨ä¸€æ ·ï¼Œç”¨æ¥å¼•ç”¨ç³»ç»Ÿå‘½ä»¤ã€‚ # åœ¨Shellè„šæœ¬ä¸­ï¼Œ#å¼€å¤´çš„è¡Œä»£è¡¨æ³¨é‡Šã€‚ $ ç”¨äºè°ƒç”¨å˜é‡çš„å€¼ï¼Œå¦‚éœ€è¦è°ƒç”¨å˜é‡nameçš„å€¼æ—¶ï¼Œéœ€è¦ç”¨$name çš„æ–¹å¼å¾—åˆ°å˜é‡çš„å€¼ã€‚ \\ è½¬ä¹‰ç¬¦ï¼Œè·Ÿåœ¨\\ä¹‹åçš„ç‰¹æ®Šç¬¦å·å°†å¤±å»ç‰¹æ®Šå«ä¹‰ï¼Œå˜ä¸ºæ™®é€šå­—ç¬¦ã€‚ å¦‚$å°†è¾“å‡ºâ€œ$â€ç¬¦å·ï¼Œè€Œä¸å½“åšæ˜¯å˜é‡å¼•ç”¨ã€‚ shellç¼–ç¨‹æ­£åˆ™è¡¨è¾¾å¼ æ­£åˆ™è¡¨è¾¾å¼ç”¨æ¥åœ¨æ–‡ä»¶ä¸­åŒ¹é…ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²ï¼Œæ­£åˆ™æ˜¯åŒ…å«åŒ¹é…ã€‚grepã€awkã€ sedç­‰å‘½ä»¤å¯ä»¥æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€‚ é€šé…ç¬¦ç”¨æ¥åŒ¹é…ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶åï¼Œé€šé…ç¬¦æ˜¯å®Œå…¨åŒ¹é…ã€‚lsã€findã€cpè¿™äº›å‘½ä»¤ä¸æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰€ä»¥åªèƒ½ä½¿ç”¨shellè‡ªå·±çš„é€šé…ç¬¦æ¥è¿›è¡ŒåŒ¹é…äº†ã€‚ é€šé…ç¬¦åŒ¹é…æ–‡ä»¶åï¼Œæ­£åˆ™åŒ¹é…å­—ç¬¦ä¸²ã€‚è¿™ç§åŒºåˆ†æ˜¯Linuxç‰¹ç‚¹ï¼Œå…¶ä»–è¯­è¨€å¾€å¾€ä¸åŒºåˆ†é€šé…ç¬¦å’Œæ­£åˆ™ã€‚æˆ–è€…è¯´é€šé…ç¬¦ä»…ä»…æ˜¯æ­£åˆ™ä¸­çš„ä¸€ä¸ªç¬¦å·è€Œå·²ã€‚ åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ å…ƒå­—ç¬¦ ä½œç”¨ - å‰ä¸€ä¸ªå­—ç¬¦åŒ¹é…0æ¬¡æˆ–ä»»æ„å¤šæ¬¡ã€‚ . åŒ¹é…é™¤äº†æ¢è¡Œç¬¦å¤–ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ ^ åŒ¹é…è¡Œé¦–ã€‚ä¾‹å¦‚:^helloä¼šåŒ¹é…ä»¥helloå¼€å¤´çš„è¡Œã€‚ $ åŒ¹é…è¡Œå°¾ã€‚ä¾‹å¦‚:helloä¼šåŒ¹é…ä»¥helloç»“å°¾çš„è¡Œã€‚ [] åŒ¹é…ä¸­æ‹¬å·ä¸­æŒ‡å®šçš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ŒåªåŒ¹é…ä¸€ä¸ªå­—ç¬¦ã€‚ ä¾‹å¦‚:[aoeiu] åŒ¹é…ä»»æ„ä¸€ä¸ªå…ƒéŸ³å­—æ¯ï¼Œ[0-9] åŒ¹é…ä»»æ„ä¸€ä½ æ•°å­—ï¼Œ [a-z][0-9]åŒ¹é…å°å†™å­—å’Œä¸€ä½æ•°å­—æ„æˆçš„ä¸¤ä½å­—ç¬¦ã€‚ [^] åŒ¹é…é™¤ä¸­æ‹¬å·çš„å­—ç¬¦ä»¥å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚:[^0-9] åŒ¹é… ä»»æ„ä¸€ä½éæ•°å­—å­—ç¬¦ï¼Œ[^a-z] è¡¨ç¤ºä»»æ„ä¸€ä½éå°å†™å­—æ¯ã€‚ \\ è½¬ä¹‰ç¬¦ã€‚ç”¨äºå–æ¶ˆè®²ç‰¹æ®Šç¬¦å·çš„å«ä¹‰å–æ¶ˆã€‚ {n} è¡¨ç¤ºå…¶å‰é¢çš„å­—ç¬¦æ°å¥½å‡ºç°næ¬¡ã€‚ä¾‹å¦‚:[0-9]{4} åŒ¹é…4ä½æ•° å­—ï¼Œ[1][3-8][0-9]{9} åŒ¹é…æ‰‹æœºå·ç ã€‚ {n\\ } è¡¨ç¤ºå…¶å‰é¢çš„å­—ç¬¦å‡ºç°ä¸å°äºnæ¬¡ã€‚ä¾‹å¦‚: [0-9]{2,} è¡¨ç¤ºä¸¤ ä½åŠä»¥ä¸Šçš„æ•°å­—ã€‚ {n,m} è¡¨ç¤ºå…¶å‰é¢çš„å­—ç¬¦è‡³å°‘å‡ºç°næ¬¡ï¼Œæœ€å¤šå‡ºç°mæ¬¡ã€‚ä¾‹å¦‚: [a- z]{6,8} åŒ¹é…6åˆ°8ä½çš„å°å†™å­—æ¯ã€‚ æ³¨æ„ï¼šæ–œæ  \\ æ˜¯è½¬ç§»ç¬¦ã€‚ ä½¿ç”¨â€{â€œ , â€œ}â€ éœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦ã€‚ grep è¿‡æ»¤æŒ‡ä»¤ç¤ºä¾‹ï¼š -i:å¿½ç•¥å¤§å°å†™ -c:åªè¾“å‡ºåŒ¹é…è¡Œçš„æ•°é‡ -l:åªåˆ—å‡ºç¬¦åˆåŒ¹é…çš„æ–‡ä»¶åï¼Œä¸åˆ—å‡ºå…·ä½“çš„åŒ¹é…è¡Œ -n:åˆ—å‡ºæ‰€æœ‰çš„åŒ¹é…è¡Œï¼Œå¹¶æ˜¾ç¤ºè¡Œå· -h:æŸ¥è¯¢å¤šæ–‡ä»¶æ—¶ä¸æ˜¾ç¤ºæ–‡ä»¶å -v:æ˜¾ç¤ºä¸åŒ…å«åŒ¹é…æ–‡æœ¬çš„æ‰€æœ‰è¡Œ -w:åŒ¹é…æ•´è¯ -x:åŒ¹é…æ•´è¡Œ -r:é€’å½’æœç´¢ â€œ * â€å‰ä¸€ä¸ªå­—ç¬¦åŒ¹é… 0 æ¬¡ï¼Œæˆ–ä»»æ„å¤šæ¬¡* grep â€œa*â€ test_rule.txtåŒ¹é…æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬ç©ºç™½è¡Œ grep â€œaa*â€ test_rule.txtåŒ¹é…è‡³å°‘åŒ…å«æœ‰ä¸€ä¸ªaçš„è¡Œ* grep â€œaaa*â€ test_rule.txtåŒ¹é…æœ€å°‘åŒ…å«ä¸¤ä¸ªè¿ç»­açš„å­—ç¬¦ä¸² grep â€œaaaaa*â€ test_rule.txtåˆ™ä¼šåŒ¹é…æœ€å°‘åŒ…å«å››ä¸ªä¸ªè¿ç»­açš„å­—ç¬¦ä¸² â€œ.â€ åŒ¹é…é™¤äº†æ¢è¡Œç¬¦å¤–ä»»æ„ä¸€ä¸ªå­—ç¬¦ grep â€œsâ€¦dâ€ test_rule.txtâ€œsâ€¦dâ€ä¼šåŒ¹é…åœ¨så’Œdè¿™ä¸¤ä¸ªå­—æ¯ä¹‹é—´ä¸€å®šæœ‰ä¸¤ä¸ªå­—ç¬¦çš„å•è¯ grep â€œs.*dâ€ test_rule.txtåŒ¹é…åœ¨så’Œdå­—æ¯ä¹‹é—´æœ‰ä»»æ„å­—ç¬¦* grep â€œ.*â€ test_rule.txtåŒ¹é…æ‰€æœ‰å†…å®¹ã€‚ â€œ^â€åŒ¹é…è¡Œé¦–ï¼Œâ€œ$â€åŒ¹é…è¡Œå°¾ grep â€œ^Mâ€ test_rule.txtåŒ¹é…ä»¥å¤§å†™â€œMâ€å¼€å¤´çš„è¡Œ grep â€œn$â€ test_rule.txtåŒ¹é…ä»¥å°å†™â€œnâ€ç»“å°¾çš„è¡Œ grep -n â€œ^$â€ test_rule.txtä¼šåŒ¹é…ç©ºç™½è¡Œ â€œ[]â€ åŒ¹é…ä¸­æ‹¬å·ä¸­æŒ‡å®šçš„ä»»æ„ä¸€ä¸ª å­—ç¬¦ï¼ŒåªåŒ¹é…ä¸€ä¸ªå­—ç¬¦ grep â€œs[ao]idâ€ test_rule.txtåŒ¹é…så’Œiå­—æ¯ä¸­ï¼Œè¦ä¸æ˜¯aã€è¦ä¸æ˜¯o grep â€œ[0-9]â€ test_rule.txtåŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­— grep â€œ^[a-z]â€ test_rule.txtåŒ¹é…ç”¨å°å†™å­—æ¯å¼€å¤´çš„è¡Œâ€œ[^]â€ åŒ¹é…é™¤ä¸­æ‹¬å·çš„å­—ç¬¦ä»¥å¤–çš„ ä»»æ„ä¸€ä¸ªå­—ç¬¦ grep â€œ^[ ^a-z ]â€ test_rule.txtåŒ¹é…ä¸ç”¨å°å†™å­—æ¯å¼€å¤´çš„è¡Œ grep â€œ^[ ^a-z A-Z ]â€ test_rule.txtåŒ¹é…ä¸ç”¨å­—æ¯å¼€å¤´çš„è¡Œ â€œ\\â€ è½¬ä¹‰ç¬¦ grep â€œ\\.$â€ test_rule.txtåŒ¹é…ä½¿ç”¨â€œ.â€ç»“å°¾çš„è¡Œ â€œ{n}â€è¡¨ç¤ºå…¶å‰é¢çš„å­—ç¬¦æ°å¥½å‡ºç°næ¬¡ grep â€œa\\{3\\}â€ test_rule.txtåŒ¹é…aå­—æ¯è¿ç»­å‡ºç°ä¸‰æ¬¡çš„å­—ç¬¦ä¸² grep â€œ[0-9]\\{3\\}â€ test_rule.txtåŒ¹é…åŒ…å«è¿ç»­çš„ä¸‰ä¸ªæ•°å­—çš„å­—ç¬¦ä¸² â€œ{n,}â€è¡¨ç¤ºå…¶å‰é¢çš„å­—ç¬¦å‡ºç°ä¸å°äºnæ¬¡ grep â€œ^\\[0-9]\\{3,\\}[a-z]â€ test_rule.txtåŒ¹é…æœ€å°‘ç”¨è¿ç»­ä¸‰ä¸ªæ•°å­—å¼€å¤´çš„è¡Œ â€œ{n,m}â€åŒ¹é…å…¶å‰é¢çš„å­—ç¬¦è‡³å°‘å‡ºç°næ¬¡ï¼Œ æœ€å¤šå‡ºç°mæ¬¡ grep â€œsa\\{1,3\\}iâ€ test_rule.txtåŒ¹é…åœ¨å­—æ¯så’Œå­—æ¯iä¹‹é—´æœ‰æœ€å°‘ä¸€ä¸ªaï¼Œæœ€å¤šä¸‰ä¸ªa å­—ç¬¦æˆªå–å‘½ä»¤cutcut [é€‰é¡¹] æ–‡ä»¶å -f åˆ—å·: æå–ç¬¬å‡ åˆ— -d åˆ†éš”ç¬¦: æŒ‰ç…§æŒ‡å®šåˆ†éš”ç¬¦åˆ†å‰²åˆ— ç‰¹ç‚¹ï¼š 1.æå–å¤šåˆ—æ—¶ï¼Œç”¨â€œï¼Œâ€éš”å¼€å°±å¯ä»¥ cut -f 2 student.txtcut -f 2,3 student.txt 2.æœ‰å…·ä½“åˆ†å‰²ç¬¦æ—¶ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰Tabé”®cut -d â€œ:â€ -f 1,3 /etc/passwd : ä»¥ï¼šä¸ºåˆ†éš”ç¬¦å–1ï¼Œ3åˆ— 3.ä¸€èˆ¬åœ¨ä½¿ç”¨cutå‘½ä»¤çš„æ—¶å€™å’Œç®¡é“ç¬¦â€œ|â€è¿ç€ä½¿ç”¨ å±€é™æ€§ï¼š catä¸æ”¯æŒç©ºæ ¼â€œ â€ä½œä¸ºåˆ†éš”ç¬¦ã€‚å› ä¸ºæœºå™¨è¯†åˆ«çš„ç©ºæ ¼å’Œè¾“å‡ºçš„ç©ºæ ¼æ•°å¯èƒ½ä¸ä¸€è‡´ã€‚ï¼ˆè¿™é‡Œå¾ˆç„å­¦ï¼Œä½ å¯ä»¥è‡ªå·±è·‘è·‘è¯•è¯•ï¼Œç¡®å®æ˜¯è¿™æ ·çš„ï¼‰ åº”å–è€Œä»£ä¹‹ä»¥åˆ¶è¡¨ç¬¦ tab ã€‚ é…åˆgrepï¼š #å¾—åˆ°passwdé‡Œçš„érootæ™®é€šç”¨æˆ·åcat /etc/passwd | grep /bin/bash | grep -v root |cut -d : -f 1 printfprintf â€˜è¾“å‡ºç±»å‹+è¾“å‡ºæ ¼å¼â€™ è¾“å‡ºå†…å®¹ è¾“å‡ºç±»å‹: %ns: è¾“å‡ºå­—ç¬¦ä¸²ã€‚næ˜¯æ•°å­—æŒ‡ä»£è¾“å‡ºå‡ ä¸ªå­—ç¬¦ %ni: è¾“å‡ºæ•´æ•°ã€‚næ˜¯æ•°å­—æŒ‡ä»£è¾“å‡ºå‡ ä¸ªæ•°å­— %m.nf: è¾“å‡ºæµ®ç‚¹æ•°ã€‚må’Œnæ˜¯æ•°å­—ï¼ŒæŒ‡ä»£è¾“å‡ºçš„æ•´æ•° ä½æ•°å’Œå°æ•°ä½æ•°ã€‚å¦‚%8.2fä»£è¡¨å…±è¾“å‡º8ä½æ•°ï¼Œ å…¶ä¸­2ä½æ˜¯å°æ•°ï¼Œ6ä½æ˜¯æ•´æ•°ã€‚ è¾“å‡ºæ ¼å¼: \\a: è¾“å‡ºè­¦å‘Šå£°éŸ³ \\b: è¾“å‡ºé€€æ ¼é”®ï¼Œä¹Ÿå°±æ˜¯Backspaceé”® \\f: æ¸…é™¤å±å¹• : æ¢è¡Œ \\r: å›è½¦ï¼Œä¹Ÿå°±æ˜¯Enteré”® \\t: æ°´å¹³è¾“å‡ºé€€æ ¼é”®ï¼Œä¹Ÿå°±æ˜¯Tabé”® \\v: å‚ç›´è¾“å‡ºé€€æ ¼é”®ï¼Œä¹Ÿå°±æ˜¯Tabé”® æ¯æœ‰ä¸€ä¸ª%sä»£è¡¨æ¯å‡ ä¸ªå­—ç¬¦è¾“å‡ºä¸€æ¬¡%s %s %s ä»£è¡¨æ²¡ä¸‰ä¸ªå­—ç¬¦è¾“å‡ºä¸€æ¬¡å¹¶ä¸”æ¢è¡Œ ä»–åœ¨ä¸catå‘½ä»¤ç»“åˆä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦ç”¨$()æŠŠcatå‘½ä»¤æ‰©èµ·æ¥ï¼Œä½¿ç”¨è¿™ç§å‘½ä»¤èµ‹äºˆå˜é‡çš„æ–¹å¼ï¼Œæ‰èƒ½æ­£ç¡®è¾“å‡ºæ–‡ä»¶å†…å®¹ï¼Œä½†æ˜¯å…·ä½“æ ¼å¼è¿˜å¾—ç”¨%s\\t æˆ–è€…%s æ§åˆ¶ã€‚ printf â€˜%sâ€™ $(cat student.txt) #ä¸è°ƒæ•´è¾“å‡ºæ ¼å¼printf â€˜%s\\t %s\\t %s\\t %s\\t %s\\t %s\\t â€™ $(cat student.txt) #è°ƒæ•´æ ¼å¼è¾“å‡º printf ä¸æ¥æ”¶ç®¡é“ç¬¦è¾“å‡ºï¼Œä¹Ÿä¸èƒ½æŒ‡å®šæ–‡ä»¶å(ä¼šè¢«å½“æˆå­—ç¬¦ä¸²ï¼‰ã€‚ å› ä¸º awk å‘½ä»¤ä¸æ”¯æŒ echo å’Œ cat å‘½ä»¤ï¼Œæ‰€ä»¥ printfä¸»è¦åœ¨ awk å‘½ä»¤ç¼–ç¨‹ä¸­ä½¿ç”¨ã€‚ åœ¨awkå‘½ä»¤çš„è¾“å‡ºä¸­æ”¯æŒprintå’Œprintfå‘½ä»¤ã€‚ print : printä¼šåœ¨æ¯ä¸ªè¾“å‡ºä¹‹åè‡ªåŠ¨åŠ å…¥ä¸€ ä¸ªæ¢è¡Œç¬¦(Linuxé»˜è®¤æ²¡æœ‰printå‘½ä»¤ï¼Œåªåœ¨ awk ä¸­ç”¨)printf : printfæ˜¯æ ‡å‡†æ ¼å¼è¾“å‡ºå‘½ä»¤ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨åŠ å…¥æ¢è¡Œç¬¦ï¼Œå¦‚æœéœ€è¦æ¢è¡Œï¼Œéœ€è¦æ‰‹å·¥ awkawkå‘½ä»¤ä¹Ÿå«awkç¼–ç¨‹ï¼Œå¯ä»¥è¯†åˆ«éåˆ¶è¡¨ç¬¦çš„ç©ºæ ¼ï¼Œç”¨æ¥è§£å†³cutå‘½ä»¤è§£å†³ä¸äº†çš„æå–åˆ—å·¥ä½œï¼Œä»–æ˜¯æŠŠéœ€è¦æå–çš„åŸæ–‡ä»¶ä¸€è¡Œä¸€è¡Œæ‰«æï¼Œæ‰«ææ¯ä¸€è¡Œä¸­æ‰€éœ€è¦ç‚¹åˆ—ï¼Œç„¶åæŠŠå®ƒè®°å½•ä¸‹æ¥ï¼Œåœ¨å…¨éƒ¨æ‰«æå®Œä¹‹åå…¨éƒ¨æ‰“å°å‡ºæ¥ã€‚ awk â€˜æ¡ä»¶1åŠ¨ä½œ1 æ¡ä»¶2åŠ¨ä½œ2â€¦â€™ æ–‡ä»¶å æ¡ä»¶(Pattern):ä¸€èˆ¬ä½¿ç”¨å…³ç³»è¡¨è¾¾å¼ä½œä¸ºæ¡ä»¶ x 10 åˆ¤æ–­å˜é‡ xæ˜¯å¦å¤§äº10x10 å¤§äºç­‰äºx10 å°äºç­‰äº åŠ¨ä½œ(Action): æ ¼å¼åŒ–è¾“å‡ºæµç¨‹æ§åˆ¶è¯­å¥ã€‚ å¯ä»¥æ˜¯å‡½æ•°ï¼Œå¯ä»¥æ˜¯ print/printfï¼Œå¯ä»¥æ˜¯æµç¨‹æ§åˆ¶ã€‚ ä¾‹å­ï¼švi student.txtID Name PHP Linux MySQL Average1 Liming 82 95 86 87.662 Sc 74 96 87 85.663 Gao 99 83 93 91.66 #æå–ç¬¬2åˆ—å’Œç¬¬6åˆ—ã€‚awk â€˜printf $2 â€œ\\tâ€ $6 â€œ â€â€™ student.txt#æå– df -hå‘½ä»¤æ˜¾ç¤ºä¹‹åçš„å†…å®¹ä¸­ç¬¬ä¸€åˆ—å’Œç¬¬ä¸‰åˆ—df -h | awk print $1 â€œ\\tâ€ $3#å…³ç³»è¿ç®—ç¬¦cat student.txt | grep -v Name | awk $6 = 87 printf $2 â€œ â€ å…¶ä¸­**$2ä»£è¡¨ç¬¬2åˆ—ï¼Œ$6ä»£è¡¨ç¬¬6åˆ—**ï¼Œä»–å¯ä»¥è¯†åˆ«éåˆ¶è¡¨ç¬¦çš„ç©ºæ ¼ï¼Œå•å¼•å·é‡Œé¢ç›´æ¥å¤§æ‹¬å·ä»£è¡¨æ²¡æœ‰æ¡ä»¶ï¼Œåªè¦æ˜¯è¾“å…¥æœ‰å†…å®¹å…¨éƒ¨ç¬¦åˆã€‚ ä¸€äº›ç‰¹æ®Šç”¨æ³•ï¼š BEGIN BEGINå¿…é¡»æ˜¯å¤§å†™ï¼Œä»–æ˜¯ä¸€ä¸ªæ¡ä»¶ã€‚ awk â€˜BEGINprintf â€œThis is a transcript â€ printf $2 â€œ\\tâ€ $6 â€œ â€â€™ student.txt ä»–ä¼šåœ¨æ‰“å°å‡º2ï¼Œ6è¡Œä¹‹å‰å…ˆè¾“å‡ºä¸€å¥è¯ This is a transcriptå®ƒçš„ä½œç”¨æ˜¯å¼ºåˆ¶æ‰§è¡ŒBEGINåçš„å‘½ä»¤ï¼Œå†å»æ‰§è¡Œæ¥ä¸‹æ¥çš„ç­›é€‰æ“ä½œã€‚ ä½ å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåˆå§‹åŒ–å‘½ä»¤ã€‚é€šå¸¸BEGINç”¨æ¥æŒ‡å®šåˆ†éš”ç¬¦ã€‚ å†…ç½®å˜é‡ FS ï¼šFSæ˜¯ç”¨æ¥æŒ‡å®šåˆ†éš”ç¬¦çš„ é»˜è®¤ç©ºæ ¼å’Œæ¢è¡Œç¬¦ä¸ºåˆ†éš”ç¬¦ã€‚ä¾‹å­ï¼šFSâ€œ:â€å°±æ˜¯æŒ‡å®šï¼šä¸ºåˆ†éš”ç¬¦ cat /etc/passwd | grep â€œ/bin/bashâ€ |awk BEGIN FS=: printf $1 â€œ\\tâ€ $3 â€œ â€ Q:è¿™æ˜¯æ‰“å°ç”¨æˆ·ä¿¡æ¯åœ°ä¸€å’Œç¬¬ä¸‰åˆ—ï¼Œä¸ºä»€ä¹ˆéœ€è¦åœ¨{FSâ€:â€} å‰åŠ BEGINå‘¢ï¼Ÿ A:å› ä¸ºå¦‚æœä½ ä¸åŠ BEGINä½ ä¼šå‘ç°é™¤äº†ç¬¬ä¸€è¡Œï¼Œå…¶ä»–éƒ½å·²ç»æŒ‰æ ¼å¼æ‰“å°å‡ºæ¥äº†ï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€è¡Œä¼šç…§åŸæ ·è¾“å‡ºï¼Œå› ä¸ºawké»˜è®¤æ˜¯ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼Œä»–åœ¨æ‰§è¡Œè¿™æ¡å‘½ä»¤çš„æ—¶å€™ï¼Œç¬¬ä¸€è¡Œæ•°æ®å·²ç»è¢«æ‰«æäº†ï¼Œæ‰€ä»¥æ¥ä¸åŠä¿®æ”¹æ ¼å¼ã€‚ åŠ äº†BEGINï¼Œä»–ä¼šç¬¬ä¸€æ­¥å¼ºåˆ¶å…ˆæŠŠé»˜è®¤åˆ†éš”ç¬¦ä¿®æ”¹äº†ã€‚ sedsedå‘½ä»¤:sed æ˜¯ä¸€ç§å‡ ä¹åŒ…æ‹¬åœ¨æ‰€æœ‰ UNIX å¹³å°(åŒ…æ‹¬ Linux)çš„è½»é‡çº§æµç¼–è¾‘å™¨ã€‚sedä¸»è¦æ˜¯ç”¨æ¥å°†æ•°æ®è¿›è¡Œé€‰å–ã€æ›¿æ¢ã€åˆ é™¤ã€æ–°å¢çš„å‘½ä»¤ã€‚ å®ƒä¸ä»…å¯ä»¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œè¿˜å¯ä»¥ä¿®æ”¹å‘½ä»¤ç»“æœï¼Œæ”¯æŒç®¡é“ç¬¦æ“ä½œï¼Œè¿™å°±æ˜¯ä¸vimæœ€å¤§çš„åŒºåˆ« sed [é€‰é¡¹] â€˜[åŠ¨ä½œ]â€™ æ–‡ä»¶å é€‰é¡¹ï¼š -n: ä¸€èˆ¬sedå‘½ä»¤ä¼šæŠŠæ‰€æœ‰æ•°æ®éƒ½è¾“å‡ºåˆ°å±å¹• ï¼Œ å¦‚æœåŠ å…¥æ­¤é€‰æ‹©ï¼Œåˆ™åªä¼šæŠŠç»è¿‡sedå‘½ä»¤å¤„ç†çš„è¡Œè¾“å‡ºåˆ°å±å¹•ã€‚ -e: å…è®¸å¯¹è¾“å…¥æ•°æ®åº”ç”¨å¤šæ¡sedå‘½ä»¤ç¼–è¾‘ -i: ç”¨sedçš„ä¿®æ”¹ç»“æœç›´æ¥ä¿®æ”¹è¯»å–æ•°æ®çš„æ–‡ä»¶ï¼Œ è€Œä¸æ˜¯ç”±å±å¹•è¾“å‡º åŠ¨ä½œ: a : è¿½åŠ ï¼Œåœ¨å½“å‰è¡Œåæ·»åŠ ä¸€è¡Œæˆ–å¤šè¡Œã€‚æ·»åŠ å¤šè¡Œæ—¶ï¼Œé™¤æœ€å ä¸€è¡Œå¤–ï¼Œæ¯è¡Œæœ«å°¾éœ€è¦ç”¨â€œ\\â€ä»£è¡¨æ•°æ®æœªå®Œç»“ã€‚ c : è¡Œæ›¿æ¢ï¼Œç”¨cåé¢çš„å­—ç¬¦ä¸²æ›¿æ¢åŸæ•°æ®è¡Œï¼Œæ›¿æ¢å¤šè¡Œæ—¶ï¼Œé™¤æœ€åä¸€è¡Œå¤–ï¼Œæ¯è¡Œæœ«å°¾éœ€ç”¨â€œ\\â€ä»£è¡¨æ•°æ®æœªå®Œç»“ã€‚ i : æ’å…¥ï¼Œåœ¨å½“æœŸè¡Œå‰æ’å…¥ä¸€è¡Œæˆ–å¤šè¡Œã€‚æ’å…¥å¤šè¡Œæ—¶ï¼Œé™¤æœ€å ä¸€è¡Œå¤–ï¼Œæ¯è¡Œæœ«å°¾éœ€è¦ç”¨â€œ\\â€ä»£è¡¨æ•°æ®æœªå®Œç»“ã€‚ d: åˆ é™¤ï¼Œåˆ é™¤æŒ‡å®šçš„è¡Œã€‚ p:æ‰“å°ï¼Œè¾“å‡ºæŒ‡å®šçš„è¡Œã€‚ s:å­—ä¸²æ›¿æ¢ï¼Œç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æ ¼å¼ä¸ºâ€œè¡ŒèŒƒ å›´sæ—§å­—ä¸²æ–°å­—ä¸²gâ€(å’Œvimä¸­çš„æ›¿æ¢æ ¼å¼ç±»ä¼¼)ã€‚ ä¾‹å­ï¼š sed â€˜2pâ€™ student.txt æŸ¥çœ‹æ–‡ä»¶çš„ç¬¬äºŒè¡Œä¼šæ˜¾ç¤ºï¼š ID Name PHP Linux MySQL Average 1 Liming 82 95 86 87.66 1 Liming 82 95 86 87.66 2 Sc 74 96 87 85.66 3 Gao 99 83 93 91.66 å‘ç°å¤šäº†ä¸€è¡Œï¼Œå› ä¸ºä¸€èˆ¬sedå‘½ä»¤ä¼šæŠŠæ‰€æœ‰æ•°æ®éƒ½è¾“å‡ºåˆ°å±å¹• ï¼Œåªä¸è¿‡ä¼šå…ˆè¾“å‡ºä½ æƒ³è¦çš„ï¼Œè¿™æ—¶å€™å°±éœ€è¦-né…åˆã€‚ sed -n â€˜2pâ€™ student.txtè¾“å…¥ -n åå°±æ²¡æœ‰å¤šä½™çš„äº† sed â€˜2,4dâ€™ student.txtåˆ é™¤ç¬¬äºŒè¡Œåˆ°ç¬¬å››è¡Œçš„æ•°æ®ï¼Œä½†ä¸ä¿®æ”¹æ–‡ä»¶æœ¬èº« sed â€˜2a helloâ€™ student.txtåœ¨ç¬¬äºŒè¡Œåè¿½åŠ  â€˜helloâ€™ sed â€˜2i hello \\ worldâ€™ student.txtåœ¨ç¬¬äºŒè¡Œå‰æ’å…¥ä¸¤è¡Œæ•°æ® sed â€˜2c No such personâ€˜ student.txt æ›¿æ¢ç¬¬äºŒè¡Œæ•°æ®ä½ â€˜No such personâ€™ ç‰¹æ®Šç”¨æ³•ï¼š æ•°æ®æ›¿æ¢ã€‚ sed â€˜s/æ—§å­—ä¸²/æ–°å­—ä¸²/gâ€™ æ–‡ä»¶å ä¾‹å­ï¼šå­—ç¬¦ä¸²æ›¿æ¢ sed â€˜3s/74/99/gâ€™ student.txt#åœ¨ç¬¬ä¸‰è¡Œä¸­ï¼ŒæŠŠ74æ¢æˆ99sed -i â€˜3s/74/99/gâ€™ student.txt#sedæ“ä½œçš„æ•°æ®ç›´æ¥å†™å…¥æ–‡ä»¶sed -e â€˜s/Liming//g ; s/Gao//gâ€™ student.txt#åŒæ—¶æŠŠâ€œLimingâ€å’Œâ€œGaoâ€æ›¿æ¢ä¸ºç©º å­—ç¬¦å¤„ç†å‘½ä»¤æ’åºå‘½ä»¤sortsort [é€‰é¡¹] æ–‡ä»¶å -f:å¿½ç•¥å¤§å°å†™ -n:ä»¥æ•°å€¼å‹è¿›è¡Œæ’åºï¼Œé»˜è®¤ä½¿ç”¨å­—ç¬¦ä¸²å‹æ’åº -r:åå‘æ’åº -t:æŒ‡å®šåˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯åˆ†éš”ç¬¦æ˜¯åˆ¶è¡¨ç¬¦ -k n[,m]: æŒ‰ç…§æŒ‡å®šçš„å­—æ®µèŒƒå›´æ’åºã€‚ä»ç¬¬nå­—æ®µå¼€å§‹ï¼Œ må­—æ®µç»“æŸ(é»˜è®¤åˆ°è¡Œå°¾) ä¾‹å­ï¼š sort /etc/passwd#æ’åºç”¨æˆ·ä¿¡æ¯æ–‡ä»¶sort -r /etc/passwd#åå‘æ’åºsort -t â€œ:â€ -k 3,3 /etc/passwd#æŒ‡å®šåˆ†éš”ç¬¦æ˜¯â€œ:â€ï¼Œç”¨ç¬¬ä¸‰å­—æ®µå¼€å¤´ï¼Œç¬¬ä¸‰å­—æ®µç»“å°¾æ’åºï¼Œå°±æ˜¯åªç”¨ç¬¬ä¸‰å­—æ®µæ’åº,ä½†æ˜¯ä»–ä¸è®¤è¯†æ•°å­—ï¼Œä¼šæŠŠæ•°å­—å½“æˆå­—ç¬¦ä¸²ï¼Œè®¤ä¸º3æ¯”11å¤§ ï¼Œæ‰€ä»¥æˆ‘éœ€è¦åŠ -nï¼Œè¿›è¡Œæ•°å€¼æ’åºsort -n -t â€œ:â€ -k 3,3 /etc/passwd ç»Ÿè®¡å‘½ä»¤wcwc [é€‰é¡¹] æ–‡ä»¶å -l: åªç»Ÿè®¡è¡Œæ•° -w: åªç»Ÿè®¡å•è¯æ•° -m: åªç»Ÿè®¡å­—ç¬¦æ•° æ¡ä»¶åˆ¤æ–­æŒ‰ç…§æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ¤æ–­ æµ‹è¯•é€‰é¡¹ ä½œç”¨ -b æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸º å—è®¾å¤‡æ–‡ä»¶(æ˜¯å—è®¾å¤‡æ–‡ä»¶ ä¸ºçœŸ) -cæ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºå­—ç¬¦è®¾å¤‡æ–‡ä»¶(æ˜¯å­—ç¬¦è®¾å¤‡ æ–‡ä»¶ä¸ºçœŸ) -d æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºç›®å½•æ–‡ä»¶(æ˜¯ç›®å½•ä¸ºçœŸ) -e æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨(å­˜åœ¨ä¸ºçœŸ) -f æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºæ™®é€šæ–‡ä»¶(æ˜¯æ™®é€šæ–‡ä»¶ä¸ºçœŸ) -L æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºç®¡é“æ–‡ä»¶(æ˜¯ç®¡é“æ–‡ä»¶ä¸ºçœŸ) -p æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºç¬¦å·é“¾æ¥æ–‡ä»¶(æ˜¯ç¬¦å·é“¾æ¥ æ–‡ä»¶ä¸ºçœŸ) -s æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºéç©º(éç©ºä¸ºçœŸ) -S æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºå¥—æ¥å­—æ–‡ä»¶(æ˜¯å¥—æ¥å­—æ–‡ä»¶ ä¸ºçœŸ) ä¸Šé¢çš„è¡¨ç»“åˆä»¥ä¸‹å‘½ä»¤æ¥åˆ¤æ–­ï¼š ä¸¤ç§åˆ¤æ–­æ ¼å¼ test -e rootinstall.log [ -e rootinstall.log ]ä¸­æ‹¬å·ä¸¤è¾¹å¿…é¡»æœ‰ç©ºæ ¼ï¼Œåªèƒ½ä¸º[ -e rootinstall.log ] ï¼Œä¸èƒ½æ˜¯[-e rootinstall.log] ç¤ºä¾‹ï¼š åœ¨åˆ¤æ–­ä¹‹åï¼Œä½¿ç”¨echo $?æ¥è§‚å¯Ÿè¾“å‡ºè¯­å¥æ˜¯å¦ä¸ºçœŸ [ -d /root ] echo â€œyesâ€ || echo no ç¬¬ä¸€ä¸ªåˆ¤æ–­å‘½ä»¤å¦‚æœæ­£ç¡®æ‰§è¡Œï¼Œåˆ™æ‰“å°â€œyesâ€ï¼Œå¦åˆ™æ‰“å°â€œnoâ€ æŒ‰ç…§æ–‡ä»¶æƒé™è¿›è¡Œåˆ¤æ–­ æµ‹è¯•é€‰é¡¹ ä½œç”¨ -r æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦è¯¥æ–‡ä»¶æ‹¥æœ‰è¯»æƒé™(æœ‰è¯» æƒé™ä¸ºçœŸ) -wæ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦è¯¥æ–‡ä»¶æ‹¥æœ‰å†™æƒé™(æœ‰å†™ æƒé™ä¸ºçœŸ) -x æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦è¯¥æ–‡ä»¶æ‹¥æœ‰æ‰§è¡Œæƒé™(æœ‰ æ‰§è¡Œæƒé™ä¸ºçœŸ) -u æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦è¯¥æ–‡ä»¶æ‹¥æœ‰SUIDæƒé™(æœ‰ SUIDæƒé™ä¸ºçœŸ) -g æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦è¯¥æ–‡ä»¶æ‹¥æœ‰SGIDæƒé™(æœ‰ SGIDæƒé™ä¸ºçœŸ) -k æ–‡ä»¶ åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦è¯¥æ–‡ä»¶æ‹¥æœ‰SBitæƒé™(æœ‰ SBitæƒé™ä¸ºçœŸ) ç¤ºä¾‹ï¼š[ -w student.txt ] echo â€œyesâ€ || echo â€œnoâ€åˆ¤æ–­æ–‡ä»¶æ˜¯æ‹¥æœ‰å†™æƒé™çš„ ä¸è¿‡ç³»ç»Ÿä¸ä¼šåŒºåˆ†ï¼Œæ¯”å¦‚-wï¼Œåªè¦ï¼ˆæ‰€æœ‰è€…ï¼Œæ‰€å±ç»„ï¼Œå…¶ä»–äººï¼‰å…¶ä¸­æœ‰ä¸€ä¸ªæœ‰å†™æƒé™ï¼Œä»–å°±ä¼šè¿”å›yesï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬è‡ªå·±å†™è„šæœ¬ ã€‚ ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ æµ‹è¯•é€‰é¡¹ ä½œç”¨ æ–‡ä»¶1 -nt æ–‡ä»¶2 åˆ¤æ–­æ–‡ä»¶1çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦æ¯”æ–‡ä»¶2çš„æ–°(å¦‚æœæ–°åˆ™ä¸ºçœŸ) æ–‡ä»¶1 -ot æ–‡ä»¶2 åˆ¤æ–­æ–‡ä»¶1çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦æ¯”æ–‡ä»¶2çš„æ—§(å¦‚æœæ—§åˆ™ä¸ºçœŸ) æ–‡ä»¶1 -ef æ–‡ä»¶2 åˆ¤æ–­æ–‡ä»¶1æ˜¯å¦å’Œæ–‡ä»¶2çš„Inodeå·ä¸€è‡´ï¼Œå¯ä»¥ç†è§£ä¸ºä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ä¸ºåŒä¸€ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªåˆ¤æ–­ç”¨äºåˆ¤æ–­ç¡¬é“¾æ¥æ˜¯å¾ˆå¥½çš„æ–¹æ³• ä¾‹å­ï¼šln rootstudent.txt tmpstu.txtå…ˆåˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥[ rootstudent.txt -ef tmpstu.txt ] echo â€œyesâ€ || echo â€œnoâ€ yesç„¶åç”¨testæµ‹è¯• ä¸¤ä¸ªæ•´æ•°ä¹‹é—´æ¯”è¾ƒ æµ‹è¯•é€‰é¡¹ ä½œç”¨ æ•´æ•°1 -eq æ•´æ•° 2 åˆ¤æ–­æ•´æ•°1æ˜¯å¦å’Œæ•´æ•°2ç›¸ç­‰(ç›¸ç­‰ä¸ºçœŸ) æ•´æ•°1 -ne æ•´æ•° 2 åˆ¤æ–­æ•´æ•°1æ˜¯å¦å’Œæ•´æ•°2ä¸ç›¸ç­‰(ä¸ç›¸ç­‰ä½ç½®) æ•´æ•°1 -gt æ•´æ•°2 åˆ¤æ–­æ•´æ•°1æ˜¯å¦å¤§äºæ•´æ•°2(å¤§äºä¸ºçœŸ) æ•´æ•°1 -lt æ•´æ•°2 åˆ¤æ–­æ•´æ•°1æ˜¯å¦å°äºæ•´æ•°2(å°äºä½ç½®) æ•´æ•°1 -ge æ•´æ•°2 åˆ¤æ–­æ•´æ•°1æ˜¯å¦å¤§äºç­‰äºæ•´æ•°2(å¤§äºç­‰äºä¸ºçœŸ) æ•´æ•°1 -le æ•´æ•°2 åˆ¤æ–­æ•´æ•°1æ˜¯å¦å°äºç­‰äºæ•´æ•°2(å°äºç­‰äºä¸ºçœŸ) ä¾‹å­ï¼š [ 23 -ge 22 ] echo â€œyesâ€ || echo â€œnoâ€ yes åˆ¤æ–­23æ˜¯å¦å¤§äºç­‰äº22 [ 23 -le 22 ] echo â€œyesâ€ || echo â€œnoâ€ no åˆ¤æ–­23æ˜¯å¦å°äºç­‰äº22 å­—ç¬¦ä¸²çš„åˆ¤æ–­ æµ‹è¯•é€‰é¡¹ ä½œç”¨ -z å­—ç¬¦ä¸² åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º(ä¸ºç©ºè¿”å›çœŸ) -n å­—ç¬¦ä¸² åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºéç©º(éç©ºè¿”å›çœŸ) å­—ä¸²1 å­—ä¸²2 åˆ¤æ–­å­—ç¬¦ä¸²1æ˜¯å¦å’Œå­—ç¬¦ä¸²2ç›¸ç­‰(ç›¸ç­‰è¿”å›çœŸ) å­—ä¸²1 ! å­—ä¸²2 åˆ¤æ–­å­—ç¬¦ä¸²1æ˜¯å¦å’Œå­—ç¬¦ä¸²2ä¸ç›¸ç­‰(ä¸ç›¸ç­‰è¿”å›çœŸ) ä¾‹å­ï¼š1.name=scç»™nameå˜é‡èµ‹å€¼2.[ -z â€œ$nameâ€ ] echo â€œyesâ€ || echo â€œnoâ€ noåˆ¤æ–­nameå˜é‡æ˜¯å¦ä¸ºç©ºï¼Œå› ä¸ºä¸ä¸ºç©ºï¼Œæ‰€ä»¥è¿”å›no aa=11bb=22å…ˆç»™å˜é‡aaå’Œå˜é‡bbèµ‹å€¼[ â€œ$aaâ€ == â€œ$bb ] echo â€œyesâ€ || echo noç„¶ååˆ¤æ–­ä¸¤ä¸ªå˜é‡çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œæ˜æ˜¾ä¸ç›¸ç­‰ ï¼Œæ‰€ä»¥è¿”å›no å¤šé‡æ¡ä»¶åˆ¤æ–­ æµ‹è¯•é€‰é¡¹ ä½œç”¨ åˆ¤æ–­1 -a åˆ¤æ–­2 é€»è¾‘ä¸ï¼Œåˆ¤æ–­1å’Œåˆ¤æ–­2éƒ½æˆç«‹ï¼Œæœ€ç»ˆçš„ç»“æœæ‰ä¸ºçœŸ åˆ¤æ–­1 -o åˆ¤æ–­2 é€»è¾‘æˆ–ï¼Œåˆ¤æ–­1å’Œåˆ¤æ–­2æœ‰ä¸€ä¸ªæˆç«‹ï¼Œæœ€ç»ˆçš„ç»“æœå°±ä¸º çœŸ !åˆ¤æ–­ é€»è¾‘éï¼Œä½¿åŸå§‹çš„åˆ¤æ–­å¼å–å ä¾‹å­ï¼šaa=11[ -n â€œ$aaâ€ -a â€œ$aaâ€ -gt 23 ] echo â€œyesâ€ || echo noåˆ¤æ–­å˜é‡aaæ˜¯å¦æœ‰å€¼ï¼ŒåŒæ—¶åˆ¤æ–­å˜é‡aaçš„æ˜¯å¦å¤§äº23å› ä¸ºå˜é‡aaçš„å€¼ä¸å¤§äº23ï¼Œæ‰€ä»¥è™½ç„¶ç¬¬ä¸€ä¸ªåˆ¤æ–­å€¼ä¸ºçœŸï¼Œ è¿”å›çš„ç»“æœä¹Ÿæ˜¯å‡aa=24[ -n â€œ$aaâ€ -a â€œ$aaâ€ -gt 23 ] echo â€œyesâ€ || echo â€œnoâ€ yes æµç¨‹æ§åˆ¶ifä¸¤ç§å½¢å¼ï¼ŒåŒºåˆ«åœ¨ ; if [ æ¡ä»¶åˆ¤æ–­å¼ ];then\tç¨‹åºfi ##########if [ æ¡ä»¶åˆ¤æ–­å¼ ]\tthen ç¨‹åº fi å•åˆ†æ”¯æ¡ä»¶è¯­å¥éœ€è¦æ³¨æ„å‡ ä¸ªç‚¹ ifè¯­å¥ä½¿ç”¨fiç»“å°¾ï¼Œå’Œä¸€èˆ¬è¯­è¨€ä½¿ç”¨å¤§æ‹¬å·ç»“å°¾ä¸åŒ [ æ¡ä»¶åˆ¤æ–­å¼ ]å°±æ˜¯ä½¿ç”¨testå‘½ä»¤åˆ¤æ–­ï¼Œæ‰€ä»¥ä¸­æ‹¬å·å’Œæ¡ä»¶åˆ¤æ–­å¼ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼ thenåé¢è·Ÿç¬¦åˆæ¡ä»¶ä¹‹åæ‰§è¡Œçš„ç¨‹åºï¼Œå¯ä»¥æ”¾åœ¨[]ä¹‹åï¼Œç”¨â€œ;â€åˆ†å‰²ã€‚ä¹Ÿå¯ä»¥æ¢è¡Œå†™å…¥ï¼Œå°±ä¸éœ€è¦â€œ;â€äº† if [ æ¡ä»¶åˆ¤æ–­å¼] then æ¡ä»¶æˆç«‹æ—¶ï¼Œæ‰§è¡Œçš„ç¨‹åº else æ¡ä»¶ä¸æˆç«‹æ—¶ï¼Œæ‰§è¡Œçš„å¦ä¸€ä¸ªç¨‹åºfi ##########if [ æ¡ä»¶åˆ¤æ–­å¼1 ] then å½“æ¡ä»¶åˆ¤æ–­å¼1æˆç«‹æ—¶ï¼Œæ‰§è¡Œç¨‹åº1 elif [ æ¡ä»¶åˆ¤æ–­å¼2 ] then å½“æ¡ä»¶åˆ¤æ–­å¼2æˆç«‹æ—¶ï¼Œæ‰§è¡Œç¨‹åº2#...çœç•¥æ›´å¤šæ¡ä»¶... else å½“æ‰€æœ‰æ¡ä»¶éƒ½ä¸æˆç«‹æ—¶ï¼Œæœ€åæ‰§è¡Œæ­¤ç¨‹åº fi casecase $å˜é‡å in å€¼1) å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼1ï¼Œåˆ™æ‰§è¡Œç¨‹åº1 ;; å€¼2) å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼2ï¼Œåˆ™æ‰§è¡Œç¨‹åº2 ;; #...çœç•¥å…¶ä»–åˆ†æ”¯... *) å¦‚æœå˜é‡çš„å€¼éƒ½ä¸æ˜¯ä»¥ä¸Šçš„å€¼ï¼Œåˆ™æ‰§è¡Œæ­¤ç¨‹åº;; esac ç¤ºä¾‹ï¼š #!/bin/bash #åˆ¤æ–­ç”¨æˆ·è¾“å…¥ #Author: yangyang (E-mail: 1771566679@qq.com) read -p Please choose yes/no: -t 30 chocase $cho in yes) echo Your choose is yes! ;; no) echo Your choose is no! ;; *) echo Your choose is error! ;; esac forä¸¤ç§è¡¨ç¤ºæ–¹æ³• for å˜é‡ in å€¼1 å€¼2 å€¼3do ç¨‹åºdone###############for ((åˆå§‹å€¼;å¾ªç¯æ§åˆ¶è°ƒèŠ‚;å˜é‡å˜åŒ–)) #C é£æ ¼å•¦ do ç¨‹åº done ä¾‹å­ï¼š #æ‰“å°æ—¶é—´#!/bin/bashfor time in morning noon afternoon evening\tdo echo â€œThis time is $time!â€\tdone #æ‰¹é‡è§£å‹ç¼©è½¯ä»¶åŒ…#!/bin/bashcd /lampls *.tar.gz ls.log #ls *.tar.gz è¾“å‡ºç»“æœè¦†ç›–åˆ°ls.logæ–‡ä»¶for i in $(cat ls.log) do tar -zxf $i $/dev/null donerm -rf /lamp/ls.log #æ‰¹é‡æ·»åŠ æ–°ç”¨æˆ·read -p Please input user name: -t 30 name #è¾“å…¥ç”¨æˆ·åï¼Œç­‰å¾…æ—¶é—´30sread -p Please input the number of users: -t 30 num #è¾“å…¥åˆ›å»ºç”¨æˆ·ä¸ªæ•°ï¼Œç­‰å¾…æ—¶é—´30sread -p Please input the password of users: -t 30 pass #è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œç­‰å¾…æ—¶é—´30sif [ ! -z $name -a ! -z $num -a ! -z $pass ] #åˆ¤æ–­è¾“å…¥ä¿¡æ¯æ˜¯å¦ä¸ºç©º then y=$(echo $num | sed s/^[0-9]*$//g) #è¿™é‡Œæ˜¯åˆ¤æ–­è¾“å…¥çš„ç”¨æˆ·ä¸ªæ•°æ˜¯å¦ä¸ºæ•°å­—ï¼Œsedåä¹Ÿå¯ä»¥æŠŠ^[0-9]*$æ¢ä¸ºs/[0-9]//g if [ -z $y ] #å¦‚æœä¸Šä¸€æ¡è¯­å¥è¾“å‡ºä¸ä¸ºç©ºï¼Œå°±æ˜¯è¾“å…¥çš„ç”¨æˆ·ä¸ªæ•°ä¸ºæ•°å­—ï¼Œç»§ç»­æ‰§è¡Œ then for ((i=1;i=$num;i++)) #å¼€å§‹å¾ªç¯ do /usr/sbin/useradd $name$i /dev/null #å»ºç«‹ç”¨æˆ· echo $pass | /usr/bin/passwd --stdin $name$i /dev/null #è®¾ç½®ç”¨æˆ·å¯†ç ï¼Œä¸ç”¨æˆ·åç›¸åŒ done echo Build seccees! fifi å¦‚æœè¾“å…¥çš„æ—¶å€™è¾“é”™äº†éœ€è¦æŒ‰ï¼Œctrl+é€€æ ¼é”® while ä¸ untilwhile å¾ªç¯ while [ æ¡ä»¶åˆ¤æ–­å¼ ] do ç¨‹åº done #ä»1åŠ åˆ°100i=1 s=0 while [ $i -le 100 ] #å¦‚æœå˜é‡içš„å€¼å°äºç­‰äº100ï¼Œåˆ™æ‰§è¡Œå¾ªç¯ do s=$(( $s+$i )) i=$(( $i+1 )) done echo The sum is: $s until å¾ªç¯ï¼Œå’Œwhileå¾ªç¯ç›¸åï¼Œuntilå¾ªç¯æ—¶åªè¦æ¡ä»¶åˆ¤æ–­å¼ä¸æˆç«‹åˆ™è¿›è¡Œå¾ªç¯ï¼Œå¹¶æ‰§è¡Œå¾ªç¯ç¨‹åºã€‚ä¸€æ—¦å¾ªç¯æ¡ä»¶æˆç«‹ï¼Œåˆ™ç»ˆæ­¢å¾ªç¯ã€‚ until [ æ¡ä»¶åˆ¤æ–­å¼ ] do ç¨‹åº done #ä»1åŠ åˆ°100i=1 s=0 until [ $i -gt 100 ] #å¾ªç¯ç›´åˆ°å˜é‡içš„å€¼å¤§äº100ï¼Œå°±åœæ­¢å¾ªç¯ do s=$(( $s+$i )) i=$(( $i+1 )) done echo The sum is: $s"},{"title":"æ‚é¡¹","path":"/wiki/linux/æ‚é¡¹.html","content":"ç¢ç¢å¿µ 2023.7.11 ç›®å½•é—®é¢˜åŸæ¥æ ¹ç›®å½•æ˜¯ ,æˆ‘ä¸€ç›´ä»¥ä¸ºæ ¹ç›®å½•æ˜¯å®¶ç›®å½• ï¼ˆhomeuser_nameï¼‰ å¯†ç é—®é¢˜ç”µè„‘å¾…æœºï¼Œä½†å¯†ç å¿˜è®°äº†ï¼Œæƒ³çŸ¥é“æ€ä¹ˆä¿®æ”¹å¯†ç ã€‚ å¾…æœºå¯¼è‡´ xshell å¤±è”ã€‚æ€ä¹ˆæŸ¥çœ‹è™šæ‹Ÿæœºipå‘¢ï¼Ÿifconfig bugå¥½å¤šå®‰è£…curlå‡ºç°äº†å¥½å¤šé—®é¢˜ã€‚ç½‘ä¸Šæœåˆ°å¾ˆå¤šè§£å†³å‘½ä»¤ï¼Œæˆ‘å°±æ— è„‘ç²˜è´´è¿è¡Œï¼Œç»“æœé¢‘é¢‘æŠ¥é”™ï¼Œä¸€å¤´é›¾æ°´ã€‚ çœ‹åˆ°äº†ä¸€ä¸ªå›ç­”è¯´çš„å¾ˆå¥½ï¼š åœ¨ä½¿ç”¨ dpkg -i å®‰è£….debè½¯ä»¶åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°å®‰è£…å¤±è´¥çš„å¯èƒ½ã€‚ä¹‹åæ— è®ºç”¨ sudo apt install -f or sud apt autoremove ç­‰å¸¸è§çš„ä¿®å¤å‘½ä»¤éƒ½æ˜¯æ— æ•ˆçš„ã€‚ç½‘ç»œä¸Šå¾ˆå¤šè§£å†³æ–¹æ¡ˆéƒ½ç›´æ¥ç»™å‡ºéœ€è¦è¿è¡Œçš„å‘½ä»¤ï¼Œä¸åˆ†æåŸå› ä¹Ÿä¸è¯´æ˜ç†ç”±ã€‚æˆ‘ä»æ¥ä¸å°è¯•è¿™æ ·çš„è§£å†³æ–¹æ¡ˆï¼Œé™¤éæˆ‘è‡ªå·±çŸ¥é“æˆ–æ˜¯åªèƒ½æ­»é©¬å½“æ´»é©¬åŒ»ã€‚ é‚£ç§å‚»ç“œå¼è§£å†³å¥½åƒå­¦ä¸åˆ°ä»€ä¹ˆä¸œè¥¿ï¼Œä¹Ÿå¾ˆæ— è¶£ã€‚ ä¸¤ä¸ªå‘½ä»¤source å‘½ä»¤ï¼šæ›´æ–°é…ç½®æ–‡ä»¶ é‡å®šå‘ç¬¦ ï¼š echo source ~/.oh-my-zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh ~/.zshrc #æŠŠ echo åçš„è¿™ä¸€ä¸²ä¸œè¥¿å†™åˆ°ç”¨æˆ·ä¸»ç›®å½•çš„ zshrc æ–‡ä»¶é‡Œã€‚ é‚£ä¸ºä»€ä¹ˆè¦å†™åˆ° zshrc æ–‡ä»¶é‡Œé¢å‘¢ï¼Ÿæ˜¾ç„¶å› ä¸ºå®ƒæ˜¯é…ç½®æ–‡ä»¶ã€‚ æ‹“å±•ï¼š zshä¼šè¯»å–çš„é…ç½®æ–‡ä»¶ ä¸€èˆ¬çš„shelléƒ½æœ‰ä¸¤ç§é…ç½®æ–‡ä»¶ï¼Œä¸€è€…æ˜¯å…¨å±€çš„ï¼Œæ”¾åœ¨etcé‡Œï¼Œæ–‡ä»¶åå‰é¢æ²¡æœ‰â€™.â€™ï¼ˆééšè—ï¼‰ï¼Œå¦ä¸€ç§æ˜¯æ”¾åœ¨ç”¨æˆ·å®¶ç›®å½•ï¼Œåªå¯¹å½“å‰ç”¨æˆ·ç”Ÿæ•ˆï¼Œæ˜¯éšè—çš„ã€‚ä»¥ä¸‹å¯¹è¿™ä¸¤ç§ä¸ä½œåŒºåˆ† 1ï¼Œzshenvï¼šä¸€èˆ¬æ”¾ç¯å¢ƒå˜é‡ 2ï¼Œzprofileï¼šç”¨äºç”¨æˆ·loginæ—¶è¯»å…¥ï¼ˆæ‰§è¡Œï¼‰çš„é…ç½® 3ï¼Œzshrcï¼šç”¨æˆ·å¼€å¯äº¤äº’æ˜¯å‘½ä»¤è¡Œæ—¶è¯»å…¥çš„é…ç½® ç”¨æˆ·ç¯å¢ƒå˜é‡æ­ç½‘ç«™éœ€è¦docsifyï¼Œdocsify åˆéœ€è¦ npm -js ï¼Œå®‰è£…å®Œå‘ç° docsify å‘½ä»¤æ— æ³•è¯†åˆ«ï¼ŒæŸ¥äº†æŸ¥å‘ç°æ˜¯ç¯å¢ƒå˜é‡çš„é—®é¢˜ã€‚ npm install -g foreverå®‰è£…äº†ä¹‹ååœ¨å…¶ä»–ç›®å½•æ— æ³•æ‰§è¡Œï¼Œæ‰¾ä¸åˆ°å‘½ä»¤ï¼Œåœ¨windowsä¸‹å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œåœ¨linuxä¸‹éœ€è¦é…ç½®ä¸‹ç¯å¢ƒå˜é‡ npm prefix -g è¯¥å‘½ä»¤å¯ä»¥çœ‹åˆ°nodeå…¨å±€ç¯å¢ƒçš„ç›®å½•åœ¨å“ªé‡Œ ç¯å¢ƒå˜é‡é…ç½®(LINUX) Linuxç¯å¢ƒå˜é‡é…ç½®æœ‰ä¸‰ç§ï¼š å½“å‰ç”¨æˆ·å½“å‰shellæœ‰æ•ˆã€‚ï¼ˆä¸´æ—¶ç¯å¢ƒå˜é‡,å…³é—­å³å¤±æ•ˆï¼‰å½“å‰ç”¨æˆ·æœ‰æ•ˆæ‰€æœ‰ç”¨æˆ·å‡æœ‰æ•ˆ ï¼ˆ1ï¼‰ ä¸´æ—¶ç¯å¢ƒå˜é‡ åœ¨ shell ä¸­è¿è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œ$PATH:åè·Ÿæƒ³è¦åŠ å…¥ç¯å¢ƒå˜é‡çš„ç›®å½• export PATH=$PATH:/usr/nodejssoft/node-v10.9.0-linux-x64/bin ï¼ˆ2ï¼‰ å¯¹å½“å‰ç”¨æˆ·æœ‰æ•ˆ ä¿®æ”¹ç”¨æˆ·ç›®å½•ä¸‹çš„.bashrcæ–‡ä»¶vi ~/.bashrcåœ¨æ–‡ä»¶æœ€åæ·»åŠ è¯¥è¯­å¥ PATH=$PATH:/usr/nodejssoft/node-v10.9.0-linux-x64/bin é‡æ–°ç™»å½•å³ç”Ÿæ•ˆ ï¼ˆ3ï¼‰ æ‰€æœ‰è´¦æˆ·å‡æœ‰æ•ˆ ä¿®æ”¹/etc/profileæ–‡ä»¶ åœ¨æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹ #sudo vi /etc/profileexport PATH=$PATH:/usr/nodejssoft/node-v10.9.0-linux-x64/bin é€€å‡ºå½“å‰shellå†é‡æ–°ç™»å½•å³å¯ç”Ÿæ•ˆæˆ–æ‰§è¡Œsource etcprofileè¯¥å‘½ä»¤ ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºqq_33788609åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚ echo -e export PATH=$(npm prefix -g)/bin:$PATH ~/.bashrc source ~/.bashrc æƒé™é—®é¢˜æˆåŠŸé…å¥½ç¯å¢ƒå˜é‡ï¼Œè¿è¡Œ docsify åï¼Œåˆé‡åˆ°äº†æƒé™é—®é¢˜ã€‚ Error: EACCES: permission denied, mkdir XXX/XXX ç½‘ä¸ŠæŸ¥äº†æŸ¥ï¼Œå‘ç°æ˜¯npmæ²¡æœ‰æƒé™ã€‚äºæ˜¯èµ‹äºˆäº†å®ƒæƒé™ï¼Œç”¨åˆ°äº†chmod: sudo chown -R $USER /usr/local/lib/node_modules æˆåŠŸäº†ã€‚ æ‰€ä»¥æƒé™é—®é¢˜æœ‰ä¸¤ç§è§£å†³æ€è·¯ï¼š sudo chown .node_moduleshexonode_moduleshexo-clibin æ‰€æœ‰å‘½ä»¤å¤±æ•ˆPATH=/bin:/usr/bin:/usr/local/bin:$PATHexport PATH .configure â€“ prefixå…³äºconfigureï¼š Linuxä¸‹æºç çš„å®‰è£…ä¸€èˆ¬ç”±3ä¸ªæ­¥éª¤ç»„æˆï¼šé…ç½®ï¼ˆconfigureï¼‰ã€ç¼–è¯‘ï¼ˆmakeï¼‰ã€å®‰è£…ï¼ˆmake installï¼‰ï¼Œå…·ä½“çš„å®‰è£…æ–¹æ³•ä¸€èˆ¬ä½œè€…éƒ½ä¼šç»™å‡ºæ–‡æ¡£ï¼Œè¿™é‡Œä¸»è¦è®¨è®ºé…ç½®ï¼ˆconfigureï¼‰ã€‚Configureæ˜¯ä¸€ä¸ªå¯æ‰§è¡Œè„šæœ¬ï¼Œå®ƒæœ‰å¾ˆå¤šé€‰é¡¹ï¼Œ å…³äºprefixï¼š linux configure --prefix çš„ä½œç”¨æ˜¯ï¼šç¼–è¯‘çš„æ—¶å€™ç”¨æ¥æŒ‡å®šç¨‹åºå­˜æ”¾è·¯å¾„ ã€‚ å¦‚ä¸‹é¢ç¤ºä¾‹ï¼š cd keepalived-1.2.18/ ./configure --prefix=/usr/local/keepalived å¦‚æœä¸æŒ‡å®š --prefix åˆ™ å®‰è£…ç¨‹åºçš„ å¯æ‰§è¡Œæ–‡ä»¶é»˜è®¤æ”¾åœ¨ /usr/local/bin ï¼›åº“æ–‡ä»¶é»˜è®¤æ”¾åœ¨ /usr/local/lib ï¼›é…ç½®æ–‡ä»¶é»˜è®¤æ”¾åœ¨ /usr/local/etc ï¼›å…¶å®ƒçš„èµ„æºæ–‡ä»¶æ”¾åœ¨ /usr /local/share ã€‚éå¸¸åœ°ä¹±ï¼ å¦‚æœæŒ‡å®š --prefix æ¯”å¦‚ï¼š --prefix=/usr/local/keepalived ï¼Œåˆ™æ­¤è½¯ä»¶çš„æ‰€æœ‰æ–‡ä»¶éƒ½æ”¾åˆ° /usr/local/keepalived ç›®å½•ä¸‹ï¼Œå¾ˆæ•´é½ã€‚ å…¶ä»–ä¼˜ç‚¹ï¼š å¸è½½è½¯ä»¶æ—¶ï¼Œåªé¡»ç®€å•çš„åˆ é™¤è¯¥å®‰è£…ç›®å½•ï¼Œå°±å¯ä»¥æŠŠè½¯ä»¶å¸è½½å¾—å¹²å¹²å‡€å‡€ï¼› ç§»æ¤è½¯ä»¶æ—¶ï¼Œåªéœ€æ‹·è´æ•´ä¸ªç›®å½•åˆ°å¦å¤–ä¸€ä¸ªæœºå™¨å³å¯ï¼› pip3çš„é•œåƒæºç”¨pip3å®‰è£…ä¸œè¥¿ï¼Œæç¤ºä¸€å †WARNINGè¿˜æœ‰ä¸€ä¸ªERRORï¼š Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by ReadTimeoutError(HTTPSConnectionPool(host=pypi.org, port=443): äºæ˜¯å°è¯•æ›´æ–°pip3æœ¬èº«ï¼Œä¾ç„¶æŠ¥é”™ï¼š Could not fetch URL https://pypi.python.org/simple/requests/: There was a problem confirming the ssl certificate: [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify faile æœäº†æœï¼Œå¥½åƒæ˜¯é»˜è®¤æºè¯†åˆ«ä¸‹è½½ä¸äº†ã€‚éœ€è¦æ”¹é•œåƒæºã€‚ ä¸‹é¢æ˜¯è§£å†³æ–¹æ³•ï¼š é—®é¢˜åŸå›  å›½å†…ä½¿ç”¨é»˜è®¤çš„pipçš„æºå°±ä¼šè¿™æ ·ä¿®æ”¹ä¸€ä¸‹å°±è¡Œï¼Œç”±äºæˆ‘æ˜¯ä¸´æ—¶ä½¿ç”¨è¿™å°ç”µè„‘ï¼Œæ‰€ä»¥æ¢äº†ä¸€ç§é…ç½®çš„æ–¹æ³•ã€‚ 1.è§£å†³æ–¹æ³•ã€ä¸´æ—¶ã€‘ pip install requests -i http://pypi.douban.com/simple â€“trusted-host pypi.douban.comã€ -i http://pypi.douban.com/simple â€“trusted-host pypi.douban.comï¼Œè¿™ä¸€æ®µå…¨éƒ¨å¤åˆ¶å°±è¡Œäº†ï¼Œinstallåé¢æ ¹ä½ éœ€è¦ä¸‹è½½çš„å†…å®¹ã€‘\\ 2.è§£å†³æ–¹æ³•ã€æ°¸ä¹…ã€‘ Windowsï¼š python -m pip install --upgrade pip -i https://pypi.tuna.tsinghua.edu.cn/simple some-packagepip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple Linuxï¼š cd ~ # è¿›å…¥å®¶ç›®å½• mkdir .pip # æ–°å»º.pipéšè—æ–‡ä»¶å¤¹ cd .pip # è¿›å…¥.pipéšè—æ–‡ä»¶å¤¹ touch pip.conf # æ–°å»ºpip.confæ–‡ä»¶ vim pip.conf # ç”¨vimç¼–è¾‘pip.confæ–‡ä»¶ï¼Œå†…å®¹ä¸Windowsä¸‹pip.iniæ–‡ä»¶çš„å†…å®¹ä¸€æ · pip.ini å†…å®¹ï¼š [global] index-url=http://pypi.douban.com/simple/[install]trusted-host=pypi.douban.com :wq # ä¿å­˜é€€å‡º vim-plugvim-plug æ˜¯ä¸€ä¸ªVimæ’ä»¶ç®¡ç†å™¨ï¼Œåˆ©ç”¨å¼‚æ­¥å¹¶è¡Œå¯ä»¥å¿«é€Ÿåœ°å®‰è£…ã€æ›´æ–°å’Œå¸è½½æ’ä»¶ã€‚å®ƒçš„å®‰è£…å’Œé…ç½®éƒ½éå¸¸ç®€å•ï¼Œè€Œä¸”åœ¨æ“ä½œè¿‡ç¨‹ä¸­ä¼šç»™å‡ºå¾ˆå¤šæ˜“è¯»çš„åé¦ˆä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªç›¸å½“å‹å¥½ç²¾ç®€çš„æ’ä»¶ã€‚ å®‰è£…é…ç½®ä¸‹è½½ plug.vim æ–‡ä»¶ï¼Œæ ¹æ®æ“ä½œç³»ç»Ÿä¸åŒï¼Œæ”¾ç½®åœ¨ä»¥ä¸‹autoloadç›®å½•ä¸­ï¼šLinux: ~.vimautoloadWindows: ~vimfilesautoloadplug.vim2. ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œä¹‹åå®‰è£…çš„æ’ä»¶å°†å­˜æ”¾åœ¨pluggedç›®å½•ä¸­ï¼š åœ¨vimrcé…ç½®æ–‡ä»¶ä¸­å¢åŠ plug-viméƒ¨åˆ†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š call plug#begin(â€˜.vimpluggedâ€™)â€œ Shorthand notation for pluginPlug â€˜foobarâ€™call plug#end()é…ç½®å®ä¾‹â€œ plug-vimâ€œâ€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€â€œ Specify a directory for pluginscall plug#begin(â€˜.vimpluggedâ€™) â€œ Make sure you use single quotesâ€œ Shorthand notation; fetches junegunnvim-easy-alignPlug â€˜vim-airlinevim-airlineâ€™Plug â€˜lilydjwgcolorizerâ€™Plug â€˜kshenoyvim-signatureâ€™â€œPlug â€˜mattngist-vimâ€™â€œ Any valid git URL is allowedâ€œPlug â€˜junegunnvim-github-dashboardâ€™â€œ Multiple Plug commands can be written in a single line using | separatorsâ€œPlug â€˜SirVerultisnipsâ€™ | Plug â€˜honzavim-snippetsâ€™â€œ On-demand loadingâ€œPlug â€˜scrooloosenerdtreeâ€™, { â€˜onâ€™: â€˜NERDTreeToggleâ€™ } å®‰è£…æ’ä»¶vim-plugæ”¯æŒæºç æ‰˜ç®¡åœ¨GitHubçš„æ’ä»¶ï¼Œä½ å¯ä»¥åœ¨github.comvim-scriptsä¸Šæ‰¾åˆ°vimå®˜ç½‘é‡Œæ‰€æœ‰æ’ä»¶çš„é•œåƒã€‚ å¦‚æœå¸Œæœ›å®‰è£…æ–°æ’ä»¶ï¼Œé¦–å…ˆæ‰¾åˆ°å…¶åœ¨http://github.comçš„ç½‘å€ï¼Œç„¶åå°†å…¶è¿½åŠ è‡³vimrcé…ç½®æ–‡ä»¶ä¸­çš„call plug#begin()å’Œcall plug#end()ä¹‹é—´ï¼Œæœ€åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æ‰€æœ‰å¼•ç”¨çš„æ’ä»¶ï¼š :PlugInstall ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ŒæŒ‡å®šå®‰è£…ç‰¹å®šçš„æ’ä»¶ï¼š :PlugInstall gist-vimå¸è½½æ’ä»¶å¦‚æœå¸Œæœ›å¸è½½æ’ä»¶ï¼Œè¯·å…ˆåœ¨vimrcé…ç½®æ–‡ä»¶ä¸­æ³¨é‡Šæˆ–è€…åˆ é™¤å¯¹åº”æ’ä»¶çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åå†æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š :PlugClean æ›´æ–°æ’ä»¶ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æ›´æ–°vim-plugæ’ä»¶è‡ªèº«ï¼š :PlugUpgradeä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æ‰¹é‡æ›´æ–°æ‰€æœ‰å·²å®‰è£…çš„æ’ä»¶ï¼š :PlugUpdate æ’ä»¶çŠ¶æ€ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰å·²å®‰è£…æ’ä»¶çš„çŠ¶æ€ä¿¡æ¯ï¼š :PlugStatus è®¾ç½®githubä»£ç† æŠ¥é”™ï¼š Failed to connect to github.com port 443: Connection timed outè¾“å…¥ä»¥ä¸‹ä¸¤è¡Œä»£ç è§£å†³ï¼š é¦–å…ˆï¼Œè®¾ç½®é»˜è®¤ä»£ç†ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ¸…é™¤ä»£ç†git config â€“global â€“unset http.proxygit config â€“global â€“unset https.proxy è®¾ç½®ä»£ç†git config â€“global http.proxy â€œä½ éœ€è¦çš„ä»£ç†â€git config â€“global https.proxy â€œä½ éœ€è¦çš„ä»£ç†â€ æŠ¥é”™ï¼šGnuTLS recv error (-110): The TLS connection was non-properly terminated.åœ¨ä½¿ç”¨ git clone æ—¶ï¼Œå‡ºç°äº†ä»¥ä¸‹æŠ¥é”™ï¼š GnuTLS recv error (-110): The TLS connection was non-properly terminated. ä¾æ¬¡è¾“å…¥ä»¥ä¸‹ä»£ç ï¼š # apt-get install gnutls-bingit config --global http.sslVerify falsegit config --global http.postBuffer 1048576000 ä¿®å¤DPKGé—®é¢˜apt å®‰è£…æ—¶å‡ºç°ä¸€å¤§å †dpkg: WARNING ç”¨åˆ é™¤infoå•¥çš„ä¸ç®¡ç”¨ã€‚è¿è¡Œä¸€ä¸ªè„šæœ¬æ„å¤–è§£å†³äº†ã€‚ #!/bin/bashset -e# Clean out /var/cache/apt/archivessudo apt-get clean# Fill it with all the .debs we needsudo apt-get --reinstall -dy install $(dpkg --get-selections | grep [[:space:]]install | cut -f1)DIR=$(mktemp -d -t info-XXXXXX)for deb in /var/cache/apt/archives/*.debdo # Move to working directory cd $DIR # Create DEBIAN directory mkdir -p DEBIAN # Extract control files dpkg-deb -e $deb # Extract file list, fixing up the leading ./ and turning / into /. dpkg-deb -c $deb | awk print $NF | cut -c2- | sed -e s/^\\/$/\\/./ DEBIAN/list # Figure out binary package name DEB=$(basename $deb | cut -d_ -f1) # Copy each control file into place cd DEBIAN for file in * do cp -a $file /var/lib/dpkg/info/$DEB.$file done # Clean up cd .. rm -rf DEBIANdonermdir $DIR å¦å¤–ä¸€ä¸ªè§£æ³•æ²¡æœ‰å°è¯• dpkg: warning: files list file for package ***** missing; assuming package has no files currently installed#1ã€åˆ—å‡ºæ‰€æœ‰ warningçš„åŒ…apt reinstall slã€€#ã€€ç»“æœå‘é€è‡³ä¸€ä¸ªæ–‡ä»¶ä¸­apt reinstall sl warning.sh#2ã€å†™ä¸€ä¸ªè„šæœ¬ï¼ŒæŒ‘é€‰å‡ºé”™è¯¯çš„è½¯ä»¶åŒ…è¿›è¡Œé‡æ–°å®‰è£…#!/bin/bash#/*å‚è€ƒä»£ç */for package in $(cat warning.txt | grep dpkg: warning: files list file for package | grep -Po [^]* | sed s///g)ï¼›do apt-get reinstall $package;done #æ­¤æ­¥éª¤éœ€è¦20åˆ†é’Ÿå·¦å³ã€‚ æ–‡æœ¬ç¼–è¾‘å™¨ubuntu è‡ªå¸¦ nano å’Œ vim ã€‚é©¯åŒ–äº†ä¸€å¤©åŠæ—¶é—´çš„vimï¼Œåˆšåˆšå°æœ‰ç†Ÿæ‚‰ï¼Œå‘ç°å±…ç„¶è¿˜æœ‰ä¸ªæ›´â€œäººæ€§åŒ–â€çš„ nanoã€‚ç½¢ä¹Ÿï¼Œè¿˜å¥½æˆ‘æ˜¯ä¸ªçˆ±æ£é¼“çš„äººã€‚ Sub-process error : dpkgcd /var/lib/dpkg/sudo mv info/ info_bak # ç°å°†infoæ–‡ä»¶å¤¹æ›´åsudo mkdir info # å†æ–°å»ºä¸€ä¸ªæ–°çš„infoæ–‡ä»¶å¤¹sudo apt-get update # æ›´æ–°sudo apt-get -f install # ä¿®å¤sudo mv info/* info_bak/ # æ‰§è¡Œå®Œä¸Šä¸€æ­¥æ“ä½œåä¼šåœ¨æ–°çš„infoæ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆä¸€äº›æ–‡ä»¶ï¼Œç°å°†è¿™äº›æ–‡ä»¶å…¨éƒ¨ç§»åˆ°info_bakæ–‡ä»¶å¤¹ä¸‹sudo rm -rf info # æŠŠè‡ªå·±æ–°å»ºçš„infoæ–‡ä»¶å¤¹åˆ æ‰sudo mv info_bak info # æŠŠä»¥å‰çš„infoæ–‡ä»¶å¤¹é‡æ–°æ”¹å›å å¸è½½python1ã€å¸è½½python3.5ï¼ˆæŒ‡å®šç›¸åº”çš„ç‰ˆæœ¬å°±å¯ä»¥ï¼‰ sudo apt-get remove --purge python3.5 2ã€å®Œå…¨å¸è½½python3.5åŠå…¶ä¾èµ–è½¯ä»¶ï¼ˆè¿™ä¸ªæˆ‘è¯•äº†ç®¡äº‹ï¼‰ sudo apt-get remove --auto-remove python3.5sudo apt-get purge --auto-remove python3.5 3ã€æ¸…é™¤python3.5åŠå…¶ä¾èµ–è½¯ä»¶çš„å®‰è£…åŒ… sudo apt-get autoclean python3.5 è½¯è¿æ¥ä½ç½®å‘ç°è½¯è¿æ¥å¥½åƒé»˜è®¤å®‰ç½®åœ¨ \\usr\\binç›®å½•ä¸‹å•Šã€‚ åˆ æ‰è½¯è¿æ¥ç›´æ¥ rm æ‰å°±è¡Œã€‚ journalctl -xe"},{"title":"ä¸Šæ‰‹æ–°ubuntuæœºå™¨çš„åˆå§‹åŒ–å·¥ä½œ","path":"/wiki/linux/ä¸Šæ‰‹æ–°ubuntuæœºå™¨çš„åˆå§‹åŒ–å·¥ä½œ.html","content":"ç¯å¢ƒç±»Vimç›´æ¥è´´é…ç½® vim-Plug let mapleader = ,let gmapleader = ,let maplocalleader = ,NerdTreennoremap leadern NERDTreeFocusCRnnoremap leaderm NERDTreeCRnnoremap leadert NERDTreeToggleCRnnoremap leaderf NERDTreeFindCRå¿«æ·é”®ä¿®æ”¹set tabstop=4 tabé”®ä½æ•°set shiftwidth=4 è‡ªåŠ¨ç¼©è¿›ä½æ•°set numberimap jk ESCnmap space vim-Plug ä¸‹è½½call plug#begin(~.vimplugged)Plug vim-airlinevim-airlinePlug vim-airlinevim-airline-themesPlug scrooloosenerdtreePlug luochen1990rainbowPlug scrooloosenerdcommenterPlug altercationvim-colors-solarizedPlug jiangmiaoauto-pairsPlug ValloricYouCompleteMecall plug#end()é…ç½®vim-airlineset laststatus=2 æ°¸è¿œæ˜¾ç¤ºçŠ¶æ€æ let gairline_powerline_fonts = 1 æ”¯æŒ powerline å­—ä½“let gairline#extensions#tabline#enabled = 1 æ˜¾ç¤ºçª—å£tabå’Œbufferlet gairline_theme=bubblegumif !exists(gairline_symbols)\tlet gairline_symbols = endiflet gairline_left_sep = â–¶let gairline_left_alt_sep = â¯let gairline_right_sep = â—€let gairline_right_alt_sep = â®let gairline_symbols.linenr = Â¶let gairline_symbols.branch = â‡airline end nerd - commenter Add spaces after comment delimiters by defaultlet gNERDSpaceDelims = 1 Use compact syntax for prettified multi-line commentslet gNERDCompactSexyComs = 1 Align line-wise comment delimiters flush left instead of following code indentationlet gNERDDefaultAlign = left Set a language to use its alternate delimiters by defaultlet gNERDAltDelims_java = 1 Add your own custom formats or override the defaultslet gNERDCustomDelimiters = c left ,right Allow commenting and inverting empty lines (useful when commenting a region)let gNERDCommentEmptyLines = 1 Enable trimming of trailing whitespace when uncommentinglet gNERDTrimTrailingWhitespace = 1 Enable NERDCommenterToggle to check all selected lines is commented or notlet gNERDToggleCheckAllLines = 1 vim-rainbowlet grainbow_active = 1 vim-color- solarizedif has(gui_runing) å¦‚æœåœ¨å›¾å½¢ç”¨æˆ·ç•Œé¢ set background=light è®¾ç½®èƒŒæ™¯è‰²ä¸ºäº®è‰²else è®¾ç½®èƒŒæ™¯è‰²ä¸ºæ·±è‰² set background=dark å°±å¼€å¯256è‰²æ”¯æŒï¼Œé»˜è®¤ä¸º8è‰² set t_Co=256endiflet gsolarized_bold=0let gsolarized_underline=1 vim-autopairsau Filetype FILETYPE let bAutoPairs = ( )au FileType php let bAutoPairs = AutoPairsDefine( , php )let gycm_server_python_interpreter=usrbinpython3let gycm_global_ycm_extra_conf=~.vimpluggedYouCompleteMethird_partyycmdexamples.ycm_extra_conf.py å¯¹vimå®ç°ä»£ç è¡¥å…¨æ’ä»¶ YouCompleteMeæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼šYouCompleteMe zsh1.zsh sudo apt install zsh 2.oh-my-zsh Basic install Oh My Zsh is installed by running one of the following commands in your terminal. You can install this via the command-line with either curl, wget or another similar tool. Method Command curl sh -c $(curl -fsSL httpsraw.githubusercontent.comohmyzshohmyzshmastertoolsinstall.sh) wget sh -c $(wget -O- httpsraw.githubusercontent.comohmyzshohmyzshmastertoolsinstall.sh) fetch sh -c $(fetch -o - httpsraw.githubusercontent.comohmyzshohmyzshmastertoolsinstall.sh) from httpsgithub.comohmyzshohmyzsh 3.powerlevel10kä¸€ä¸ªzshä¸»é¢˜ plugin plugins=( git zsh-history-substring-search zsh-autosuggestions zsh-syntax-highlighting ) ä»¥autosuggestiongsä¸ºä¾‹ï¼šæ‰¾åˆ°æ’ä»¶å¯¹åº”ä»“åº“ï¼Œç„¶ågit clone git clone httpsgithub.comzsh-userszsh-autosuggestions $ZSH_CUSTOMpluginszsh-autosuggestions Backupext4åˆ†åŒºçš„è¯æœ‰ext4magicï¼Œå¦å¤–è¿˜æœ‰timeshiftï¼Œsnapperä¹‹ç±»å¾ˆå¼ºçš„å¤‡ä»½å·¥å…·ï¼Œbtrfsåˆ†åŒºçš„å¿«ç…§ä¹Ÿå¯ä»¥è‡ªç”±å›æ»š other gcc g++ sudo apt updatesudo apt install build-essential git yum rpm AlienAlienæ˜¯ç”¨æ¥å°† rpm åŒ…è½¬æ¢æˆ deb åŒ…çš„ã€‚rpmæ–‡ä»¶ä¸èƒ½ç›´æ¥è¢«å®‰è£…ï¼Œéœ€è¦è½¬æ¢æˆ debã€‚ubuntu çš„å®‰è£…åŒ…æ ¼å¼æ˜¯ debã€‚ shellæœ‰zshæˆ–è€…fishï¼Œ ç¼–è¾‘å™¨æœ‰neovimæˆ–è€…emacs æ–‡ä»¶æµè§ˆæœ‰lså’Œrangerç‰ˆæœ¬æ§åˆ¶æœ‰lazygit ç»ˆç«¯å¤ç”¨æœ‰tmux è¿˜å¯ä»¥æ¢çš„ç©å…·æœ‰cgdb valgrind rr make autotools cmake meson xmake ç¤ºä¾‹å›¾ æ–‡ä»¶ç³»ç»Ÿï¼šext4 vulkan æ¸¸æˆï¼š wineæœ‰winetricksä¹‹ç±»å·¥å…·å¯ä»¥è¿›è¡Œç‰¹æ®Šé…ç½®ï¼Œå¦å¤–steamçš„protonå¯¹windowsæ¸¸æˆæ”¯æŒæ›´å¥½ï¼Œå»ºè®®ç›´æ¥åœ¨steamé‡Œç©ï¼Œè¿è¡Œä¸èµ·æ¥çš„å¯ä»¥çœ‹protondb.comä¸Šçš„è¯„è®ºåŒº åº”ç”¨ç±»Typoraæ”¯æŒtyporaç‰ˆæœ¬1.0.3 æœ¬äººå·²æµ‹è¯•å¹³å°ï¼šUbuntu22.04 æ¿€æ´»ç¯å¢ƒå‡†å¤‡ ç›¸å…³ä¾èµ– å®‰è£…Python3ã€Python3-pip å®‰è£…nodejs sudo apt-get install nodejs å…‹éš†typoraCrakeré¡¹ç›® git clone httpsgithub.comcnvetmantyporacracker.git pythonç›¸å…³ä¾èµ– åˆ‡æ¢åˆ°å…‹éš†ä¸‹æ¥çš„é¡¹ç›®æ ¹ç›®å½•typoracrackerä¸‹æ‰§è¡Œï¼š pip3 install -r requirements.txt ä¸‹è½½Typora1.0.3ç‰ˆæœ¬ é¡¹ç›®ç›®å½•ä¸‹æœ‰typora_1.0.3çš„debåŒ…ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ç›´æ¥å®‰è£…å³å¯ã€‚ dpkg -i typora_1.0.3_amd64.deb è§£åŒ…æ›¿æ¢æ–‡ä»¶app.asar ä»¥ä¸‹æ“ä½œéƒ½æ˜¯åˆ‡æ¢åˆ°typoraCrackeré¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ æ³¨æ„ï¼Œå¼ºçƒˆå»ºè®®åœ¨è§£åŒ…åŸç”Ÿæ–‡ä»¶åˆ°~Desktopä¸­ è§£åŒ…åŸç”Ÿapp.asar å®‰è£…Typoraåï¼ŒåŸç”Ÿapp.asaræ–‡ä»¶é»˜è®¤è·¯å¾„æ˜¯usrsharetyporaresourcesapp.asarï¼› è§£åŒ…åŸç”Ÿapp.asaræ–‡ä»¶ï¼š python3 typora.py usrsharetyporaresourcesapp.asar ~Desktop #è§£åŒ…åï¼Œåœ¨æ¡Œé¢ä¼šæœ‰ä¸€ä¸ª`dec_app`ç›®å½• ä¿®æ”¹License.js ä¿®æ”¹dec_appç›®å½•ä¸­çš„License.jsï¼›åœ¨typoraCrackeré¡¹ç›®ä¸‹ï¼Œæä¾›æœ‰ä¿®æ”¹å¥½çš„License.jsï¼Œæ‰€ä»¥ç›´æ¥æ›¿æ¢å³å¯ï¼š cp examplepatchLicense.js ~Desktopdec_app ç”Ÿæˆapp.asar python3 typora.py -u ~Desktopdec_app ~Desktop# åœ¨~Desktopè·¯å¾„ä¸‹ï¼Œä¼šç”Ÿæˆæ–°çš„çš„app.asaræ–‡ä»¶æ›¿æ¢app.asar æ›¿æ¢app.asar å°†TyporaåŸç”Ÿçš„çš„app.asaræ–‡ä»¶æ›¿æ¢ï¼š # å¤‡ä»½åŸç”Ÿapp.asaræ–‡ä»¶sudo cp usrsharetyporaresourcesapp.asar usrsharetyporaresourcesapp.asar.bak # ç”¨æ–°ç”Ÿæˆçš„app.asaræ–‡ä»¶æ›¿æ¢typoraè‡ªå¸¦çš„app.asaræ–‡ä»¶sudo cp ~Desktopapp.asar usrsharetyporaresourcesapp.asar æ¿€æ´»Typoraåœ¨typoraCrackeré¡¹ç›®æ ¹è·¯å¾„ä¸‹ï¼Œæ‰§è¡Œkeygen.jsè„šæœ¬ï¼š ç”Ÿæˆæ¿€æ´»ç  node examplekeygen.js å¾—åˆ°æ¿€æ´»ç åï¼Œæ‰“å¼€Typoraè½¯ä»¶ â€“ Typoraå¸®åŠ© â€“ æˆ‘çš„è®¸å¯è¯ â€“ è¾“å…¥ä½ çš„æ¿€æ´»ä¿¡æ¯ï¼Œéšä¾¿ä¸€ä¸ªé‚®ç®±åŠ ç”Ÿæˆçš„æ¿€æ´»ç ã€‚ ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸»åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚ åŸæ–‡é“¾æ¥ï¼šhttpsblog.csdn.netweixin_73546177articledetails132033297 VsCodeextension C++C extension Code Runner Tabnine AI autocomplete .vscode c_cpp_properties.json é¼ æ ‡ç‚¹åœ¨.cçš„æºæ–‡ä»¶å†…éƒ¨ï¼ŒæŒ‰ Ctrl+Shift+p å¿«æ·é”®ï¼Œåœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­é€‰æ‹© [CC++ç¼–é…ç½®(UI)]ï¼Œç„¶åè¿›å…¥è®¾ç½®é¡µé¢ã€‚ ç‚¹è¿›å»ä¹‹åæˆ‘ä»¬è¦è®¾ç½®æˆ‘ä»¬çš„ç¼–è¯‘å™¨è·¯å¾„å’ŒIntelliSense æ¨¡å¼ï¼š (windwosç”¨æˆ·å¯ä»¥è€ƒè™‘ã€‚æˆ‘ä½¿ç”¨ubuntu + gccæ²¡æœ‰æ“ä½œè¿™ä¸€æ­¥ï¼Œé»˜è®¤è®¾ç½®) tasks.json åˆ›å»ºæ‰§è¡Œä»»åŠ¡ task.json è¦ç¼–è¯‘ä»£ç ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ï¼Œåœ¨ç»ˆç«¯ä¸­é…ç½®ä»»åŠ¡ï¼Œå¦‚ä¸‹å›¾ï¼š ç„¶åé€‰æ‹©gcc.exeï¼š æ‰“å¼€ä¹‹åå°±ä¼šå‡ºç°ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼šè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸“é—¨æ¥æ‰§è¡Œç¼–è¯‘ä»»åŠ¡çš„ã€‚ åŸæ–‡é“¾æ¥ï¼šhttpsblog.csdn.netYikeforearticledetails130033638 launch.json Right click , then click Add Debug Configuration. ä¹±ç ubuntuä½¿ç”¨ Visual Studio Code è¿è¡ŒCç¨‹åºæ—¶ç»ˆç«¯ï¼ˆæ§åˆ¶å°ï¼‰ä¸Šæ˜¾ç¤ºï¼š result [1] + Done â€œusrbingdbâ€ --interpreter=mi --tty=$DbgTerm 0tmpMicrosoft-MIEngine-In-b608v45i.py3 1tmpMicrosoft-MIEngine-Out-42xjb3vz.7lk è§£å†³æ–¹å¼ åœ¨ launch.json æ–‡ä»¶ä¸­çš„ configurations å­—æ®µä¸­æ·»åŠ ä¸€é¡¹ miDebuggerArgs -q -ex quit; wait() fg devnull; ; bingdb -q --interpreter=mi, å†æ¬¡è¿è¡ŒCç¨‹åºå°±ä¸ä¼šå‡ºç°ä¸éœ€è¦çš„ä¿¡æ¯äº†ï¼â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåšä¸» ä¹æ€æ¢¦é¹¿ åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚ åŸæ–‡é“¾æ¥ï¼šhttpsblog.csdn.netWU2629409421perfectarticledetails113357420 ä¸‹é¢è¿™ä¸‰ä¸ªè½¯ä»¶æ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚è§‚æœ›ä¸‹debåŒ…ï¼Œç„¶åsudo dpkg -i å°±OKäº†ã€‚ä¸è¿‡è®©æˆ‘é•¿è§è¯†çš„æ˜¯ï¼ŒUbuntu æ¡Œé¢åº”ç”¨çš„å¿«æ·æ–¹å¼ï¼Œç«Ÿç„¶è¦åˆ°usrshareapplicationsè¿™ä¸ªç›®å½•ä¸‹ï¼Œæ‰¾åˆ°.desktopæ–‡ä»¶ï¼Œå³é”®é€‰æ‹©allow launchingï¼Œè¿™ä¸ªåº”ç”¨æ‰èƒ½ä»é»‘è‰²å˜æˆçº¢è‰²ï¼Œåå­—ä¹Ÿè‡ªåŠ¨å˜æˆæ‰€å†™ã€‚è¿˜è›®ç¥å¥‡çš„â€¦â€¦ è¯è¯´æˆ‘ä¸€å¼€å§‹å‘ç°åŸæ¥ deb åŒ…å°±æ˜¯å®‰è£…åŒ…ï¼Œdpkg -iå°±æ˜¯å®‰è£…çš„æ—¶å€™ï¼Œæˆ‘éœ‡æƒŠäº†ï¼› å‘ç°æ¡Œé¢å¿«æ·æ–¹å¼æ˜¯.desktopæ–‡ä»¶ï¼Œè€Œä¸”è¦allow launchingæ‰èƒ½æµ®ç°çœŸå®¹çš„æ—¶å€™ï¼Œæˆ‘åˆä¸€æ¬¡éœ‡æƒŠäº†ã€‚ å‘ç°usrbinä¸‹é¢çš„éƒ½æ˜¯ç³»ç»Ÿé¢„è£…çš„å¯æ‰§è¡Œç¨‹åº(å‘½ä»¤ï¼‰ï¼Œæˆ‘è¿˜å› ä¸ºå¤šæ•²äº†ä¸€ä¸ªç©ºæ ¼,sudo rmäº†binç›®å½•çš„æ‰€æœ‰æ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘åˆåˆåˆéœ‡éœ‡éœ‡æƒŠäº†â€”â€”åœ¨è¢«é”å±é¡µé¢å°†æˆ‘çš„æ€¥æ•‘å¤‡ä»½æ–‡ä»¶æ‹’ä¹‹é—¨å¤–çš„æ—¶å€™ï¼Œæˆ‘ç¬‘äº†ç¬‘ï¼Œæ„Ÿå¹è‡ªå·±äºŒåäºŒå²å·²ç»å†äº†äººç”Ÿä¸€æ¬¡å¤§èµ·å¤§è½è€Œç¬‘äº†ã€‚äºæ˜¯é‡è£…ç³»ç»Ÿå–½ã€‚(ç°åœ¨çœ‹æ¥ï¼Œè¿™ç¯‡æ–‡ç« ä»¥åŠ Ubuntu å…¨éƒ¨ Bug çš„è§£å†³æ²¡æœ‰è¾œè´Ÿè‡ªå·±ä¸¤å¤©å¿ƒæµçš„åŠªåŠ›å‘€ï¼ğŸ˜€) (ps usrlocalbinç›®å½•æ˜¯ç»™ç”¨æˆ·æ”¾ç½®è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åº.,ä¸ä¼šè¢«ç³»ç»Ÿå‡çº§è€Œè¦†ç›–åŒåæ–‡ä»¶ã€‚) WattToolkitQQWPSè¾“å…¥æ³•Fcitx6.4.2024è¾“å…¥æ³•ã€‚é€†å¤©è¾“å…¥æ³•ï¼Œæ€»æ˜¯å¡QT å’ŒGTKæ–‡ä»¶ã€‚ä¸€å¼€å§‹ç”¨fcitx4 GTKå…¨éƒ¨ä¸å…¼å®¹ã€‚åæ¥ç”¨fcitx5 ï¼Œæ”¯æŒç«ç‹æµè§ˆå™¨å’Œç»ˆç«¯ç”¨äº†ã€‚è‡ªå·±ä¸‹è½½çš„æ¡Œé¢åº”ç”¨ç¨‹åºè¿˜æ˜¯ç”¨ä¸äº†ã€‚é€†å¤© 6.6.2024æ›´æ–°ã€‚å¯ä»¥ç”¨äº†ï¼Œä¸¤å¤©æ²¡å¼€ç”µè„‘ï¼Œä»Šå¤©ä¸Šç½‘æœäº†æœï¼Œæ— æ„ä¸­å‘ç°æˆ‘çš„Typoraã€WPS å’ŒQQ è¿™ç±»æ¡Œé¢åº”ç”¨ç¨‹åºéƒ½èƒ½ç”¨äº†ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™fcitx-diagnoseè¿˜æ˜¯ä¼šæœ‰æŠ¥é”™ã€‚è‡³å°‘è¯´æ˜è¿™äº›é”™è¯¯å’Œâ€œæ˜¯å¦æ”¯æŒæ¡Œé¢ç¨‹åºâ€æ— å…³ã€‚4.fcitx-remote æ— æ³•è¿æ¥åˆ° fcitx. 5.DBus ç•Œé¢ä½¿ç”¨ dbus-send æ¥æ£€æŸ¥ dbusã€‚ æ‰¾ä¸åˆ° DBus åç§° org.fcitx.Fcitx çš„æ‰€æœ‰è€…ã€‚ æ‰¾ä¸åˆ° DBus åç§° org.fcitx.Fcitx çš„ pid æ‰€æœ‰è€…ã€‚2.ç”¨äº GTK+-2.0 çš„é…ç½®ç•Œé¢ï¼šæœªæ‰¾åˆ° gtk2 çš„é…ç½®ç•Œé¢. 2.æ ¹çª—å£ä¸Šçš„ XIM_SERVERS Xim æœåŠ¡åç§° fcitx5 ä¸ç¯å¢ƒå˜é‡ä¸­è®¾ç½®çš„å€¼ fcitx ä¸åŒ.3.QTè¾“å…¥æ³•æ¨¡å—æ–‡ä»¶æ— æ³•æ‰¾åˆ° Qt4 çš„ fcitx è¾“å…¥æ³•æ¨¡å—. 4.ç”¨æˆ·ç•Œé¢æ— æ³•æ‰¾åˆ° kimpanel dbus æ¥å£æˆ–é kimpanel ç”¨æˆ·ç•Œé¢. ä½†ä¹Ÿä¸æ’é™¤æ˜¯å› ä¸ºæˆ‘è¿è¡Œäº†è¿™ä¸ªæŒ‡ä»¤ sudo apt-get install fcitx-libs-dev æŠŠæœ€åæ¬ ç¼ºçš„ä¾èµ–ç»™å®‰è£…ä¸Šäº†ã€‚AnyWay,å±äºæ˜¯æŸ³æš—èŠ±æ˜åˆä¸€æ‘äº†ã€‚ è¿™æ¬¡ç»å†è®©æˆ‘æ‡‚å¾—äº†ï¼š1.ç”¨ sudo rm æ—¶è¯·æŠ±å¥½æå¤§æ±‚ç”Ÿæ¬²2.Github è¦å­¦ä¼šçœ‹ issue3.å°‘ç”¨ç™¾åº¦æœï¼Œéƒ½æ˜¯æ¥å›çš„copy.\tç”¨Bingæ›´å¥½ã€‚ Deepin-wine Wechatåœ¨ fcitx çš„ issue é‡Œæ‰¾è§£å†³æ–¹æ¡ˆçš„æ—¶å€™ï¼Œæˆ‘æ— æ„ä¸­å‘ç°äº† deepin-wine-ubuntu è¿™ä¸ªä»“åº“ã€‚è¿™ç©æ„å±…ç„¶èƒ½è£…å¾®ä¿¡ï¼ä¸éœ€è¦å€ŸåŠ© é“œè±Œè±† è¿™ç§åºç„¶å¤§ç‰©ï¼Œç”¨Dockerè§£å†³å¾®ä¿¡å®‰è£…é—®é¢˜ç¡®å®æ˜¯ä¸é”™çš„å®è·µã€‚åç»­æˆ‘ä¼šæ‰¾æœºä¼šæŠŠå¾®ä¿¡è¿™ä¸ªBOSSæ‹¿ä¸‹ã€‚ç°é˜¶æ®µå¯ä»¥è¯´é™¤å¾®ä¿¡å¤–çš„æ‰€æœ‰BUG ã€APP éƒ½å·²ç»æ‹¿ä¸‹äº†ã€‚å¥¥ï¼Œé™¤äº†å”¯ä¸€çš„å°é—®é¢˜ï¼šä¸ºä»€ä¹ˆ zsh çš„ plugins å¤±æ•ˆäº†ï¼Œä¸ç»™æˆ‘è‡ªåŠ¨è¡¥å…¨å’Œé«˜äº®ã€‚å¯æ¶ã€‚vim-Plug ä¹Ÿè¿˜æ²¡å®‰ä¸Šå‘¢ã€‚ OK ï¼Œä¸€èº«è½»æ¾ã€‚å¯ä»¥æ­‡æ­‡äº†ã€‚å¦‚æœè¿™ä¸ªä¸œè¥¿æ˜¯ä½ ä»0åˆ°1ï¼Œä¸€ä¸ªä¸€ä¸ª BUGè§£å†³ï¼Œä¸€ä¸ªä¸€ä¸ªé›¶ä»¶äº²æ‰‹å»ºè®¾èµ·æ¥çš„ã€‚éšæ‰‹çš„ä½¿ç”¨éƒ½ä¼šæœ‰å¾ˆå¤§çš„æˆå°±æ„Ÿã€‚ æ¯”å¦‚ç°åœ¨çš„ä¸­æ–‡è¾“å…¥æ³•å“ˆå“ˆã€‚ Linuxè¿è¡Œç§»åŠ¨ç«¯APPçš„ç­–ç•¥ pwaåº”ç”¨ å°†ç½‘é¡µæ‰“åŒ…æˆAPPåº”ç”¨ç¨‹åº WebCatelogä¸€ä¸ªæ”¯æŒmac,windows,linux çš„å¹³å°ï¼Œå·²ç»é¢„ç½®äº†æ•°åƒä¸ªå¯ä»¥æ‰“åŒ…çš„ç½‘é¡µæœåŠ¡ï¼Œå®‰è£…å®Œæˆåå°±ä¼šå‡ºç°åœ¨å¯åŠ¨å°ï¼ˆ Launchpadï¼‰é‡Œé¢ï¼Œå¯ä»¥ä½œä¸ºç‹¬ç«‹çš„åº”ç”¨ä½¿ç”¨ã€‚ naivefier æµè§ˆå™¨ï¼Œç±»ä¼¼Eageã€Chromeã€Firefoxæµè§ˆå™¨å†…ç½®appã€‚æˆ‘ä¸‹è½½ Cubox å°±æ˜¯è¿™ç§åº”ç”¨ éšæƒ³æ‰€æœ‰é—®é¢˜å·²è§£å†³ã€‚æ”¶å¿ƒå­¦æ•°å­¦å»äº†ã€‚ zshæ’ä»¶æ²¡æŸ¥åˆ°æ˜¯å› ä¸º.zshrcé‡ŒåŸæ¥çš„ plugins æ²¡çœ‹åˆ°ï¼Œå†™äº†ä¸¤ä¸ªpluginã€‚ fcitxè¾“å…¥æ³•æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼šfcitx4 å’Œ fcitx5ã€‚æˆ‘çš„ubuntu22.0ä¸æ”¯æŒ4,æ”¯æŒ5ã€‚ Vim-Plug å®‰è£…æ—¶æ€»è¿æ¥ä¸ä¸ŠGithubã€‚æ¢æºåå®Œç¾è§£å†³ã€‚ï¼ˆæ”¹plug.vimä¸¤å¤„) dockerå’Œè™šæ‹Ÿæœºè²Œä¼¼ä¹Ÿèƒ½å®ç°å¾®ä¿¡ã€‚ä½†æˆ‘ç›®å‰æ²¡æœ‰è¿™ä¸ªå¿ƒæ€å»ç ”ç©¶docker,å†æŠŠå¾®ä¿¡ç§»æ¤è¿‡å»ã€‚æ‰€ä»¥å…ˆç”¨ç®€å•æ˜“ç”¨çš„deepin-wineå§ã€‚ å¾®ä¿¡è¿™ç±»å®˜æ–¹ä¸æ”¯æŒçš„åº”ç”¨å¯ä»¥ç”¨wineè§£å†³ã€‚wineå†å¾€ä¸Šä¸€å±‚ï¼Œå°±æ˜¯æˆ‘æ‰€ç”¨çš„githubé¡¹ç›®ï¼šdeepin-wineã€‚deepin-wine æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªwszqkzqkï¼Œä¸€ä¸ªzq1997ã€‚ä¸¤ä¸ªrepéƒ½æœ‰5k+çš„star,ä½†æ˜¯wszqkzqkçš„ wine 22å¹´å°±ä¸å†ç»´æŠ¤ï¼Œå…³é—­äº†issueã€‚zqçš„ä¸€ç›´åœ¨æ›´æ–°ã€‚æ‰€ä»¥ç”¨ä»–çš„äº†ã€‚(å®é™…ä¸Šwçš„æˆ‘å°è¯•è¿‡ä½†æ²¡æœ‰å®‰è£…æˆåŠŸ) å…³äºwineï¼š wine è¿ç”¨APIè½¬æ¢æŠ€æœ¯å®åšå‡ºLinuxå¯¹åº”åˆ°Windowsç›¸å¯¹åº”çš„å‡½æ•°æ¥è°ƒç”¨DLLä»¥è¿è¡ŒWindowsç¨‹åºã€‚Wine å…è®¸åœ¨ Linux å’Œå…¶ä»–ç±» Unix æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ Windows åº”ç”¨ç¨‹åºçš„å…¼å®¹å±‚ã€‚ Wineæ˜¯è‡ªç”±è½¯ä»¶ï¼Œåœ¨GNUé€šç”¨å…¬å…±è®¸å¯è¯ï¼ˆLGPLï¼‰ ä¸‹å‘å¸ƒã€‚åç§°æ˜¯ Wine Is Not an Emulator çš„ç¼©å†™(Wineä¸æ˜¯Windowsæ¨¡æ‹Ÿå™¨ï¼Œ)ã€‚ Wine é€šè¿‡æä¾›ä¸€å¥—æ¨¡æ‹Ÿ Windows API çš„åº“ï¼Œä½¿å¾—è®¸å¤š Windows ç¨‹åºèƒ½å¤Ÿåœ¨ Linux ç³»ç»Ÿä¸Šè¿è¡Œï¼Œè€Œæ— éœ€å¯¹æºä»£ç è¿›è¡Œä¿®æ”¹ã€‚ è€Œ Deepin-Wine æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒåŸºäº Wineï¼ˆWine Is Not an Emulatorï¼‰è¿›è¡Œå¼€å‘ï¼Œæ—¨åœ¨ä¼˜åŒ– Wine åœ¨ Linux ç³»ç»Ÿä¸Šçš„ä½“éªŒï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹æ·±åº¦ç§‘æŠ€ï¼ˆDeepinï¼‰å›¢é˜Ÿç»´æŠ¤çš„ Linux å‘è¡Œç‰ˆ ä¸€ç§æœªæ¥çš„åº”ç”¨æ–¹æ¡ˆç”¨Windows + WSLï¼Œåœ¨WSLä¸­æ­å»ºå¼€å‘ç¯å¢ƒï¼ŒWindows Terminalåšç»ˆç«¯ã€‚ Bç«™ä¸Šæ”¶é›†çš„ä¿¡æ¯ï¼Œæœ‰æ—¶é—´å¯ä»¥å‚è€ƒï¼š @fvck_allæˆ‘è‡ªå·±æ˜¯å¼€å‘ï¼Œæˆ‘è¿˜æ˜¯æ¯”è¾ƒå–œæ¬¢Linuxçš„ï¼è½¯ä»¶ä¹ŸæŒºå¤šçš„ï¼æ¡Œé¢å¼€å‘è½¯ä»¶å¸¸ç”¨çš„éƒ½æœ‰ï¼ä¸€æ—¦æ¶‰åŠåˆ°winçš„è½¯ä»¶æˆ‘å°±è£…äº†ä¸€ä¸ªwinè™šæ‹Ÿæœºä½¿ç”¨ï¼è‡ªå·±ç”¨è›®çˆ½çš„ï¼æˆ‘ç°åœ¨çš„æ­é…æ˜¯ï¼Œè‡ªå·±ç”¨çš„ç¬”è®°æœ¬ï¼Œç„¶åå®¶é‡Œé¢æœ‰å°æœåŠ¡å™¨ï¼ç”¨è’²å…¬è‹±ç»„èƒ–è·¯ç”±ï¼Œç„¶åä¹Ÿèƒ½è®¿é—®å®¶é‡Œçš„æœåŠ¡å™¨[è„±å•doge]ï¼å¹²é‡æ´»ç”¨æœåŠ¡å™¨å¼€å‘è°ƒè¯•ç”¨ç¬”è®°æœ¬[æ»‘ç¨½] å›å¤ï¼šè®¿é—®å®¶é‡Œçš„æœåŠ¡å™¨ï¼Œç”¨èŠ±ç”Ÿå£³å°±è¡Œäº†ï¼Œtcpæ˜ å°„22ç«¯å£ @ç¼–ç¨‹è¯„è®ºlinuxé€‚åˆæ—¶é—´å¤šçš„äººç© @Speedycodeå›å¤ï¼š ç¡®å®ï¼Œæˆ‘ç”¨äº†å‡ æ˜ŸæœŸæ—¶é—´å»çœ‹åšå®¢ï¼Œç¼–ç¨‹ç¤¾åŒºï¼Œä¹Ÿæ²¡ç ”ç©¶æ˜ç™½æ€ä¹ˆæ‰“é©±åŠ¨ï¼Œæœ‰å“ªä½å¤§ç¥èƒ½æ•™æˆ‘ä¸€ä¸‹å—ï¼Ÿ[ç¬‘å“­] @çº³æ°æ—¥é‡‘å›å¤ @SpeedyCode Plocateä¸€ä¸‹è‡ªå·±makeä¸€ä¸‹æ›¿æ¢.ko @PTALTS-LKä½ è¯´çš„å¯¹ ä½†æ˜¯ã€ŠLinuxã€‹æ˜¯ç”±Linusè‡ªä¸»ç ”å‘çš„ä¸€æ¬¾å…¨æ–°å¼€æ”¾æºä»£ç æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚ä½¿ç”¨è¯¥å†…æ ¸çš„ç³»ç»Ÿè¿è¡Œåœ¨ä¸€ä¸ªè¢«ç§°ä½œã€Œext4ã€çš„æ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨è¿™é‡Œè¢«Kernelé€‰ä¸­çš„äººå°†è¢«æˆäºˆã€ŒTerminal simulatorã€ï¼Œå¼•å¯¼Shellçš„åŠ›é‡ã€‚ä½ å°†æ‰®æ¼”ä¸€ä½åä¸ºã€ŒRootã€çš„ç¥ç§˜ç”¨æˆ·ï¼Œåœ¨è‡ªç”±çš„ä½¿ç”¨ä¸­é‚‚é€…ä¸åŒå¼€æºåè®®ã€å„æœ‰åƒç§‹ç‹¬ç‰¹çš„æ¡Œé¢ç¯å¢ƒå’Œå„ç§è½¯ä»¶ä»¬ï¼Œå’Œå®ƒä»¬ä¸€èµ·æœåŠ¡å™¨è¿ç»´ï¼Œæ‰¾å›ä¸¢å¤±çš„è½¯ä»¶åŒ…çš„åŒæ—¶ï¼Œé€æ­¥å‘æ˜ã€Œdevnullã€çš„çœŸç›¸ã€‚ @ç°åœ¨åº”è¯¥æ²¡äººçœ‹æ˜µç§°æˆ‘ä¹ŸæŠ˜è…¾äº†å¾ˆä¹…Linuxï¼Œä¸å¾—ä¸è¯´ç³»ç»Ÿåªæœ‰æ›´é€‚åˆä¸ªäººå–œçˆ±çš„æ‰æ˜¯å¥½ç³»ç»Ÿï¼ŒLinuxç¡®å®æ²¡æœ‰ä¸€å †é¢†åŸŸå¤§ç¥å¹çš„é‚£æ ·ç¥ä¹å…¶ç¥ï¼ŒWindows ä¹Ÿæ²¡è¿™ä¹ˆç³Ÿç³• â€” ä½ åœ¨Windowsä¸Šä¸ä¼šå¤§æ¦‚ç‡åœ¨Linuxä¸Šä¹Ÿä¸ä¼šï¼Œé…ç¯å¢ƒä¹Ÿå¥½ï¼Œå†™ä»£ç ä¹Ÿå¥½â€¦é…ç¯å¢ƒçœ‹èµ·æ¥Linux aptpacman å¾ˆä¸é”™ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™è¿˜æ˜¯è¦ä½ è‡ªå·±æ”¹é…ç½®é…ç¯å¢ƒå˜é‡ã€‚Windows æœ‰DLLåœ°ç‹±ï¼ŒLinuxåŒ…ä¾èµ–ä¹Ÿæ˜¯å™©æ¢¦ã€‚Windows ä¼šè“å±ï¼ŒLinux KDEGnome è¿æ°”ä¸å¥½é‚£ä¹Ÿæ˜¯ä¸‰å¤©å´©ä¸¤å›ã€‚Windows UI ä¸ç»Ÿä¸€ï¼ŒLinux GTK + QT ä¸»é¢˜äº’ç›¸ç‹¬ç«‹æ··æ­å°±å¾ˆå¥½çœ‹ï¼Ÿæˆ‘ä¸¤ä¸ªç³»ç»Ÿæ··ç€ç”¨ï¼Œåªèƒ½è¯´ä¸¤è¾¹ç”¨ä¹ æƒ¯éƒ½å·®ä¸å¤šã€‚Windows æ›´åŠ åå‘æ™®é€šç”¨æˆ·ï¼Œä»…æ­¤è€Œå·²ã€‚ @æ…•å®¹å‡Œé¸¢å›å¤ @DSOE1024 ä¸ï¼Œæ™®é€šäººå¯ä»¥ç”¨linuxè£…ä¸€äº›æ¯”è¾ƒç®€å•çš„æœåŠ¡ï¼Œåƒæˆ‘è¿™ä¸ªæ²¡æœ‰ä»»ä½•è¯­è¨€åŸºç¡€çš„èŠ±50è…¾è®¯äº‘ä¹°ä¸ª2h2g,è¿™é…ç½®è£…winå•¥éƒ½å¹²ä¸äº†ï¼Œè£…centosæŒ‚ä¸ªçœŸå¯»ç¾¤èŠå¨±ä¹ç¾¤ç®¡æœºå™¨äººï¼Œè¿˜èƒ½å¼€ä¸ªmcåŸºå²©æœåŠ¡å™¨ï¼Œç”šè‡³èƒ½å†å¼€å‡ ä¸ªé¢æ¿æœåŠ¡[æ³ é¸¢yousa_æ»‘ç¨½]å°±æ˜¯è¿™æ ·å†…å­˜ä¹Ÿå°±75å·¦å³ï¼Œç¨³çš„ä¸€æ‰¹ï¼ˆå°±æ˜¯ç¼ºç¯å¢ƒæŠ˜è…¾åŠæ­»ï¼‰ å…¶ä»–æ–‡ç« things-to-do-after-installing-ubuntu-22-04"},{"title":"linuxè½¯ä»¶åŒ…ç®¡ç†","path":"/wiki/linux/linuxè½¯ä»¶åŒ…ç®¡ç†.html","content":"è½¯ä»¶åŒ…ç®¡ç† RPMåŒ…æ¦‚å¿µé˜è¿° ä½•ä¸ºrpmï¼Ÿ rpmè½¯ä»¶åŒ… RPM : RPMåŒ…ç®¡ç†å‘˜ï¼ˆç®€ç§°RPMï¼Œå…¨ç§°ä¸ºThe RPM Package Manager æ­¤åè¯æ—¢å¯èƒ½æŒ‡.rpmçš„æ–‡ä»¶æ ¼å¼è½¯ä»¶åŒ…ï¼Œä¹Ÿå¯èƒ½æŒ‡å…¶æœ¬èº«çš„è½¯ä»¶åŒ…ç®¡ç†å™¨(RPM Package Manager)ã€‚ æœ€æ—©ç”±Red Hatç ”åˆ¶ï¼Œç°åœ¨ä¹Ÿç”±å¼€æºç¤¾åŒºå¼€å‘ã€‚ ç›®å‰æ˜¯GNULinuxä¸‹è½¯ä»¶åŒ…èµ„æºæœ€ä¸°å¯Œçš„è½¯ä»¶åŒ…ç±»å‹ä¹‹ä¸€ã€‚ è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿæ˜¯åœ¨ç”µè„‘ä¸­è‡ªåŠ¨å®‰è£…ã€é…åˆ¶ã€å¸è½½å’Œå‡çº§è½¯ä»¶åŒ…çš„å·¥å…·ç»„åˆï¼Œåœ¨å„ç§ç³»ç»Ÿè½¯ä»¶å’Œåº”ç”¨è½¯ä»¶çš„å®‰ è£…ç®¡ç†ä¸­å‡æœ‰å¹¿æ³›åº”ç”¨ã€‚ åœ¨Linuxå‘è¡Œç‰ˆä¸­ï¼Œå‡ ä¹æ¯ä¸€ä¸ªå‘è¡Œç‰ˆéƒ½æœ‰è‡ªå·±çš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿã€‚ å¸¸è§çš„æœ‰ï¼š ç®¡ç†debè½¯ä»¶åŒ…çš„dpkgä»¥åŠå®ƒçš„å‰ç«¯aptï¼ˆä½¿ç”¨äºDebianã€Ubuntuï¼‰ã€‚ RPMåŒ…ç®¡ç†å‘˜ä»¥åŠå®ƒçš„å‰ç«¯dnfï¼ˆä½¿ç”¨äºFedoraï¼‰ã€ å‰ç«¯yumï¼ˆä½¿ç”¨äºRed Hat Enterprise Linuxï¼‰ã€ å‰ç«¯ ZYppï¼ˆä½¿ç”¨äºopenSUSEï¼‰ å‰ç«¯urpmiï¼ˆä½¿ç”¨äºMandriva Linuxã€Mageiaï¼‰ç­‰ã€‚ ä½¿ç”¨è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿå°†å¤§å¤§ç®€åŒ–åœ¨Linuxå‘è¡Œç‰ˆä¸­å®‰è£…è½¯ä»¶çš„è¿‡ç¨‹ã€‚ RPMè½¯ä»¶åŒ…åˆ†ä¸ºäºŒè¿›åˆ¶åŒ…ï¼ˆBinaryï¼‰ã€æºä»£ç åŒ…ï¼ˆSourceï¼‰å’ŒDeltaåŒ… ä¸‰ç§ã€‚ äºŒè¿›åˆ¶åŒ…å¯ä»¥ç›´æ¥å®‰è£…åœ¨è®¡ç®—æœºä¸­ï¼Œè€Œæºä»£ç åŒ…å°†ä¼šç”±RPMè‡ªåŠ¨ç¼–è¯‘ã€å®‰è£…ã€‚æºä»£ç åŒ…ç»å¸¸ä»¥src.rpmä½œä¸ºåç¼€åã€‚ ä»£è¡¨æ€§rpmä¸‹é¢èŠèŠä¸¤ä¸ªä»£è¡¨æ€§çš„rpmã€‚ yumyum: Yumï¼ˆå…¨ç§°ä¸º Yellow dog Updater, Modifiedï¼‰æ˜¯ä¸€ä¸ªåœ¨ Fedora ã€RedHat å’Œ CentOSä¸­çš„Shellå‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚ åŸºäºRPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…ã€‚ å¸¸ç”¨å‘½ä»¤ï¼š #å®‰è£…è½¯ä»¶yum install foo-x.x.x.rpm#åˆ é™¤è½¯ä»¶ï¼šyum remove foo-x.x.x.rpm#yum erase foo-x.x.x.rpm#å‡çº§è½¯ä»¶ï¼šyum update foo#yum update foo#æŸ¥è¯¢ä¿¡æ¯ï¼šyum info foo aptapt: linuxè½¯ä»¶åŒ…ç®¡ç†å·¥å…·ã€‚ç”¨äºåœ¨ Ubuntu, Debian , Linux å‘è¡Œç‰ˆä¸Šå®‰è£…ã€æ›´æ–°ã€åˆ é™¤å’Œç®¡ç† deb è½¯ä»¶åŒ…ã€‚ aptæ˜¯DebianåŠå…¶è¡ç”Ÿäº§å“çš„ä¸»è¦å‘½ä»¤è¡ŒåŒ…ç®¡ç†å™¨ï¼Œå®ƒæä¾›äº†ç”¨äºæœç´¢ã€ç®¡ç†å’ŒæŸ¥è¯¢çš„å‘½ä»¤è¡Œå·¥å…·ã€æœ‰å…³è½¯ä»¶åŒ…çš„ä¿¡æ¯ä»¥åŠå¯¹æ‰€æœ‰åŠŸèƒ½çš„ä½çº§è®¿é—® ä½œä¸ºæ“ä½œçš„ä¸€éƒ¨åˆ†ï¼ŒAPTä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶åˆ—å‡ºå¯è·å¾—è½¯ä»¶åŒ…çš„é•œåƒç«™ç‚¹åœ°å€ï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯/etc/apt/sources.listã€‚ å®¢æˆ·ç«¯åœ¨è¿›è¡Œå®‰è£…æˆ–å‡çº§æ—¶å…ˆè¦æŸ¥è¯¢DEBç´¢å¼•æ¸…å•ï¼Œä»è€Œå¯ä»¥è·çŸ¥æ‰€æœ‰å…·æœ‰ä¾èµ–å…³ç³»çš„è½¯ä»¶åŒ…ï¼Œå¹¶ä¸€åŒä¸‹è½½åˆ°å®¢æˆ·ç«¯ä»¥ä¾¿å®‰è£…ã€‚ å½“å®¢æˆ·ç«¯éœ€è¦å®‰è£…ã€å‡çº§æˆ–åˆ é™¤æŸä¸ªè½¯ä»¶åŒ…æ—¶ï¼Œå®¢æˆ·ç«¯è®¡ç®—æœºå–å¾—DEBç´¢å¼•æ¸…å•å‹ç¼©æ–‡ä»¶åï¼Œä¼šå°†å…¶è§£å‹ç½®æ”¾äºvarstateaptlistsï¼Œè€Œå®¢æˆ·ç«¯ä½¿ç”¨apt-get installæˆ–apt-get upgradeå‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šå°†è¿™ä¸ªæ–‡ä»¶å¤¹å†…çš„æ•°æ®å’Œå®¢æˆ·ç«¯è®¡ç®—æœºå†…çš„DEBæ•°æ®åº“æ¯”å¯¹ï¼ŒçŸ¥é“å“ªäº›DEBå·²å®‰è£…ã€æœªå®‰è£…æˆ–æ˜¯å¯ä»¥å‡çº§çš„ã€‚ ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼š #å®‰è£…åˆ é™¤sudo apt install package_namesudo apt remove package_name#è¦åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è½¯ä»¶åŒ…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼šsudo apt list#è¯¥å‘½ä»¤å°†è¾“å‡ºæ‰€æœ‰åŒ…çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬æœ‰å…³åŒ…çš„ç‰ˆæœ¬å’Œä½“ç³»ç»“æ„çš„ä¿¡æ¯ã€‚è¦äº†è§£æ˜¯å¦å®‰è£…äº†ç‰¹å®šçš„è½¯ä»¶åŒ…ï¼Œå¯ä»¥ä½¿ç”¨grepå‘½ä»¤è¿‡æ»¤è¾“å‡ºã€‚ [1]sudo apt list | grep package_name#è¦ä»…åˆ—å‡ºå·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œè¯·é”®å…¥ï¼š [1]sudo apt list --installed#åœ¨å®é™…å‡çº§è½¯ä»¶åŒ…ä¹‹å‰ï¼Œè·å–å¯å‡çº§è½¯ä»¶åŒ…çš„åˆ—è¡¨å¯èƒ½å¾ˆæœ‰ç”¨ï¼š [1]sudo apt list --upgradeable apt ä¸ rpm ä¸€æ ·æ˜¯ linux è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚ rpmæ“ä½œå‘½ä»¤å‘½åä¸ä¾èµ–æ€§RPMåŒ…å‘½åè§„åˆ™ ä¾‹å­ï¼šHttpd-2.2.15.el6.centos.1.i686.rpm å…¶ä¸­ï¼š Httpdï¼šè½¯ä»¶åŒ…åŒ…å2.2.15ï¼šè½¯ä»¶ç‰ˆæœ¬15ï¼šè½¯ä»¶å‘å¸ƒçš„æ¬¡æ•°el6.centosï¼šé€‚åˆçš„Linuxå¹³å°i686ï¼šé€‚åˆçš„ç¡¬ä»¶å¹³å° noarch è¡¨ç¤ºä»»ä½•ç¡¬ä»¶å¹³å°éƒ½å¯ä»¥å®‰è£… rpm rpmåŒ…æ‰©å±•åå¦‚æœè‡ªå·±ç»„å»ºrpmåŒ…ï¼Œéƒ½ä»¥rpmç»“å°¾ï¼Œè¿™æ ·æ›´åŠ æ¸…æ™°ï¼Œå…¶ä»–ç®¡ç†å‘˜å¯ä»¥æ˜ç™½ã€‚ æ³¨æ„ï¼šHttpd-2.2.15.el6.centos.1.i686.rpmä¸ºåŒ…å…¨åï¼ŒHttpd ä¸ºåŒ…åã€‚è¿™ä¸¤è€…æœ‰æ˜æ˜¾åŒºåˆ«çš„ï¼ŒLinuxç³»ç»Ÿå‘½ä»¤ä¸¥æ ¼åŒºåˆ†ä¸¤è€… RPMåŒ…ä¾èµ–æ€§ã€‚ æ ‘å½¢ä¾èµ–ï¼šaâ†’bâ†’c ç¯å½¢ä¾èµ–ï¼šaâ†’bâ†’câ†’a ç¯å½¢ä¾èµ–éœ€è¦æŠŠa,b,cä¸‰ä¸ªåŒæ—¶å®‰è£… æ¨¡å—ä¾èµ–ï¼šæ¨¡å—ä¾èµ–æŸ¥è¯¢ç½‘ç«™ï¼šwww.rpmfind.net å¦‚æœå®‰è£…æ—¶é‡åˆ°é—®é¢˜ï¼Œå‡ºç°ä¾èµ–æ€§é”™è¯¯çš„è¯ï¼šè‹¥è¢«ä¾èµ–æ–‡ä»¶ä»¥.so.[æ•°å­—]ç»“å°¾ï¼Œåˆ™ä¸ºåº“ä¾èµ–ï¼Œéœ€è¦ç›´æ¥å®‰è£…è¿™ä¸ªè½¯ä»¶ï¼Œé”™è¯¯ä¼šè‡ªåŠ¨è§£å†³ã€‚å®‰è£…è¿™ä¸ªåŒ…æ—¶éœ€è¦è¿›å…¥ç½‘ç«™ www.rpmfind.net æŸ¥è¯¢è¢«ä¾èµ–æ–‡ä»¶ å®‰è£…å‡çº§ä¸å¸è½½ åŒ…å…¨åï¼šæ“ä½œçš„åŒ…æ˜¯æ²¡æœ‰å®‰è£…çš„è½¯ä»¶åŒ…æ—¶ï¼Œä½¿ç”¨åŒ…å…¨åã€‚ æ³¨æ„è·¯å¾„ åŒ…åï¼šæ“ä½œå·²ç»å®‰è£…å¥½çš„å®‰è£…çš„è½¯ä»¶åŒ…æ—¶ï¼Œä½¿ç”¨åŒ…åã€‚ åŒ…åé»˜è®¤åœ¨æœç´¢varlibrpmä¸­çš„æ•°æ®åº“ rpm -ivh åŒ…å…¨å #RPMå®‰è£… å‚æ•°ï¼š -i å®‰è£…ï¼ˆinstallï¼‰ -v æ˜¾ç¤ºè¯¦ç»†å®‰è£…ä¿¡æ¯ï¼ˆverboseï¼‰ -h æ˜¾ç¤ºè¿›åº¦ï¼ˆhashï¼‰ â€“nodeps ä¸æ£€æµ‹ä¾èµ–æ€§ ä¸€èˆ¬ä¸ç”¨ï¼Œå®‰è£…æ—¶éƒ½å¾—æ˜¾ç¤ºä¾èµ–æ€§ æ³¨æ„ï¼šå®‰è£…ä¸€å®šè¦ç”¨åŒ…å…¨å rpm -Uvh åŒ…å…¨å #RPMåŒ…å‡çº§ å‚æ•°ï¼š -U å‡çº§ rpm -e åŒ…å -e å¸è½½ â€“nodeps ä¸æ£€æŸ¥ä¾èµ–æ€§ æŸ¥è¯¢#-q æŸ¥è¯¢ï¼ˆqueryï¼‰rpm -q åŒ…å #æŸ¥è¯¢æ˜¯å¦å®‰è£…#-a æ‰€æœ‰ï¼ˆallï¼‰rpm -qa #æŸ¥è¯¢æ‰€æœ‰å®‰è£…çš„åŒ…rpm -qa | grep [å…³é”®å­—]#æŸ¥è¯¢æ‰€æœ‰å«ä¹‰å…³é”®å­—çš„åŒ…ã€‚ | ä¸ºç®¡é“ç¬¦ ã€‚ä½œç”¨æ˜¯ï¼šå¯¹äºç®¡é“ç¬¦ä¸¤ä¾§ï¼Œå·¦è¾¹å‘½ä»¤çš„è¾“å‡ºèƒ½ä½œä¸ºå³è¾¹å‘½ä»¤çš„è¾“å…¥ã€‚ æ³¨æ„ï¼š1ã€ç®¡é“å‘½ä»¤åªå¤„ç†å‰ä¸€ä¸ªå‘½ä»¤æ­£ç¡®è¾“å‡ºï¼Œä¸å¤„ç†é”™è¯¯è¾“å‡ºã€‚2ã€ç®¡é“å‘½ä»¤å³è¾¹å‘½ä»¤ï¼Œå¿…é¡»èƒ½å¤Ÿæ¥æ”¶æ ‡å‡†è¾“å…¥æµå‘½ä»¤æ‰è¡Œã€‚ æŸ¥è¯¢å®‰è£…è¿‡è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯ rpm -qi åŒ…å #-i æŸ¥è¯¢è½¯ä»¶ä¿¡æ¯ï¼ˆinformationï¼‰#-p æŸ¥è¯¢æœªå®‰è£…åŒ…ä¿¡æ¯ï¼ˆpackageï¼‰rpm -qip åŒ…å…¨å#æŸ¥è¯¢æ²¡å®‰è£…è¿‡è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯ #å› ä¸ºåŒ…æ²¡æœ‰å®‰è£…æ‰€ä»¥å¾—åŠ åŒ…å…¨åï¼Œå› ä¸ºåŒ…åœ¨ç”Ÿäº§å¥½çš„æ—¶å€™ä»–çš„ä¿¡æ¯å°±å·²ç»ç”Ÿæˆï¼Œæ‰€ä»¥å¯ä»¥æŸ¥åˆ°æ²¡å®‰è£…å¥½çš„åŒ…çš„ä¿¡æ¯ã€‚ æŸ¥è¯¢åŒ…ä¸­æ–‡ä»¶å®‰è£…ä½ç½® rpm -ql åŒ…å #-l åˆ—è¡¨ï¼ˆlistï¼‰#-p æŸ¥è¯¢æœªå®‰è£…åŒ…ä¿¡æ¯ï¼ˆpackageï¼‰ æŸ¥è¯¢ç³»ç»Ÿæ–‡ä»¶å±äºå“ªä¸ªRPMåŒ… rpm -qf ç³»ç»Ÿæ–‡ä»¶å #-f æŸ¥è¯¢ç³»ç»Ÿæ–‡ä»¶å±äºå“ªä¸ªè½¯ä»¶åŒ…ï¼ˆfileï¼‰ æŸ¥è¯¢è½¯ä»¶åŒ…çš„ä¾èµ–æ€§ rpm -qR åŒ…å #-R æŸ¥è¯¢è½¯ä»¶åŒ…çš„ä¾èµ–æ€§ï¼ˆrequiresï¼‰#-p æŸ¥è¯¢æœªå®‰è£…åŒ…ä¿¡æ¯ï¼ˆpackageï¼‰ æ ¡éªŒå’Œæ–‡ä»¶æå–rpm -V å·²å®‰è£…çš„åŒ…å RPMåŒ…æ ¡éªŒ -V æ ¡éªŒæŒ‡å®šRPMåŒ…ä¸­çš„æ–‡ä»¶ï¼ˆverifyï¼‰ ä¾‹å­ï¼šrpm -V httpd æ˜¾ç¤ºï¼š S.5â€¦â€¦T. c etchttpdconfheepd.conf éªŒè¯å†…å®¹ä¸­çš„8ä¸ªä¿¡æ¯çš„å…·ä½“å†…å®¹ï¼š Sï¼šæ–‡ä»¶å¤§å°æ˜¯å¦æ”¹å˜ Mï¼šæ–‡ä»¶çš„ç±»å‹æˆ–æ–‡ä»¶çš„æƒé™(rwx)æ˜¯å¦è¢«æ”¹å˜ 5ï¼šæ–‡ä»¶MD5æ ¡éªŒå’Œæ˜¯å¦æ”¹å˜(å¯ä»¥çœ‹æˆæ–‡ä»¶å†…å®¹æ˜¯å¦æ”¹å˜) MD5æ˜¯è¿›è¡Œæ–‡ä»¶å®Œæ•´æ€§éªŒè¯çš„ Dï¼šè®¾å¤‡çš„ä¸­ï¼Œä»ä»£ç æ˜¯å¦æ”¹å˜ Lï¼šæ–‡ä»¶è·¯å¾„æ˜¯å¦æ”¹å˜ Uï¼šæ–‡ä»¶çš„å±ä¸»(æ‰€æœ‰è€…)æ˜¯å¦æ”¹å˜ Gï¼šæ–‡ä»¶çš„å±ç»„æ˜¯å¦æ”¹å˜ Tï¼šæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´æ˜¯å¦æ”¹å˜ æ–‡ä»¶ç±»å‹ï¼š cï¼šé…ç½®æ–‡ä»¶ï¼ˆconfig fileï¼‰ dï¼šæ™®é€šæ–‡æ¡£ï¼ˆdocumentationï¼‰ gï¼šâ€œé¬¼â€æ–‡ä»¶ï¼ˆghost fileï¼‰ï¼Œ å¾ˆå°‘è§ï¼Œæ„è¯†æ˜¯è¯¥æ–‡ä»¶ä¸åº”è¯¥è¢«è¿™ä¸ªRPMåŒ… åŒ…å«ã€‚ lï¼šæˆæƒæ–‡ä»¶ï¼ˆlicense fileï¼‰ rï¼šæè¿°æ–‡ä»¶ï¼ˆread meï¼‰ rpm2cpio åŒ…å…¨å | cpio -idv.æ–‡ä»¶ç»å¯¹è·¯å¾„ rpm2cpio æ˜¯å°†rpmåŒ…è½¬æ¢ä¸ºcpioæ ¼å¼çš„å‘½ä»¤cpio æ˜¯ä¸€ä¸ªæ ‡å‡†å·¥å…·ï¼Œä»–ç”¨äºåˆ›å»ºè½¯ä»¶æ¡£æ¡ˆæ–‡ä»¶å’Œä»æ¡£æ¡ˆæ–‡ä»¶ä¸­æå–æ–‡ä»¶ æºç åŒ…æºç åŒ…å’Œrpmçš„åŒºåˆ«æ¦‚å¿µä¸åŒæºç åŒ… æºç åŒ…ï¼šå¯ä»¥çœ‹åˆ°æºä»£ç ï¼Œä½†æ˜¯å®‰è£…æ—¶é—´è¾ƒæ…¢ã€‚åƒè„šæœ¬å®‰è£…åŒ…ç±»ä¼¼Windowså®‰è£…è½¯ä»¶ã€‚ å¯ä»¥çœ‹ä½œæ˜¯æ˜¯å†™äº†å®‰è£…ç•Œé¢çš„æºç åŒ… ä¼˜ç‚¹ï¼š å¼€æºï¼Œå¦‚æœæœ‰è¶³å¤Ÿçš„èƒ½åŠ›ï¼Œå¯ä»¥ä¿®æ”¹æºä»£ç  å¯ä»¥è‡ªç”±é€‰æ‹©æ‰€éœ€çš„åŠŸèƒ½ è½¯ä»¶æ˜¯ç¼–è¯‘å®‰è£…ï¼Œæ‰€ä»¥æ›´é€‚åˆè‡ªå·±çš„ç³»ç»Ÿï¼Œä½¿ç”¨æ›´åŠ ç¨³å®šä¹Ÿæ•ˆç‡æ›´é«˜ å¸è½½æ–¹ä¾¿ï¼Œç›´æ¥åˆ é™¤å®‰è£…ç›®å½• ç¼ºç‚¹ï¼š å®‰è£…è¿‡ç¨‹æ­¥éª¤è¾ƒå¤šï¼Œå°¤å…¶å®‰è£…è¾ƒå¤§çš„è½¯ä»¶é›†åˆæ—¶ï¼ˆå¦‚LAMPç¯å¢ƒæ­å»ºï¼‰ï¼Œå®¹æ˜“å‡ºç°æ‹¼å†™é”™è¯¯ ç¼–è¯‘è¿‡ç¨‹æ—¶é—´è¾ƒé•¿ï¼Œå®‰è£…æ¯”äºŒè¿›åˆ¶å®‰è£…æ—¶é—´é•¿ å› ä¸ºæ˜¯ç¼–è¯‘å®‰è£…ï¼Œå®‰è£…è¿‡ç¨‹ä¸­ä¸€æ—¦æŠ¥é”™æ–°æ‰‹å¾ˆéš¾è§£å†³ã€‚ äºŒè¿›åˆ¶åŒ… äºŒè¿›åˆ¶åŒ…ï¼šRPMåŒ…ï¼Œç³»ç»Ÿé»˜è®¤åŒ…ï¼Œå‚å•†å·²ç»è¿›è¡Œäº†ç¼–è¯‘ï¼Œçœ‹ä¸åˆ°æºä»£ç ï¼Œä½†æ˜¯å®‰è£…æ—¶é—´è¾ƒå¿« ä¼˜ç‚¹ï¼š åŒ…ç®¡ç†ç³»ç»Ÿç®€å•ï¼Œåªé€šè¿‡å‡ ä¸ªå‘½ä»¤å°±å¯ä»¥å®ç°åŒ…çš„å®‰è£…ï¼Œå‡çº§ï¼ŒæŸ¥è¯¢å’Œå¸è½½ã€‚ å®‰è£…é€Ÿåº¦æ¯”æºç åŒ…å®‰è£…å¿«å¾—å¤šã€‚ ç¼ºç‚¹ï¼š ç»è¿‡ç¼–è¯‘ï¼Œä¸å†å¯ä»¥çœ‹åˆ°æºä»£ç ã€‚ åŠŸèƒ½é€‰æ‹©ä¸å¦‚æºç åŒ…çµæ´»ã€‚ ä¾èµ–æ€§ ä¾èµ–æ€§æŒ‡çš„æ˜¯è¦æƒ³å®‰è£…AåŒ…å°±å¾—å…ˆå®‰è£…BåŒ…ï¼Œè¦æƒ³å®‰è£…BåŒ…åˆå¾—å…ˆå®‰è£…CåŒ…ï¼Œæ‰€ä»¥åªèƒ½ä»¥CBAçš„é¡ºåºã€‚å®‰è£…RPMåŒ…ï¼Œåˆ é™¤çš„æ—¶å€™å¾—æŒ‰ABCé¡ºåºåˆ é™¤å®‰è£…åŒ…ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„RPMåŒ…å…¨æœ‰ä¾èµ–æ€§ã€‚ å®‰è£…ä½ç½®ä¸åŒ RPMåŒ…é»˜è®¤å®‰è£…è·¯å¾„(ç»å¤§éƒ¨åˆ†è½¯ä»¶æ–‡ä»¶å®‰è£…ä½ç½®): /etc å®‰è£…æ–‡ä»¶å®‰è£…ç›®å½• /usr/bin/ å¯æ‰§è¡Œçš„å‘½ä»¤å®‰è£…ç›®å½• /usr/lib ç¨‹åºæ‰€ä½¿ç”¨çš„å‡½æ•°åº“ä¿å­˜ä½ç½® /usr/share/doc/ åŸºæœ¬çš„è½¯ä»¶ä½¿ç”¨æ‰‹å†Œä¿å­˜ä½ç½® /usr/share/man å¸®åŠ©æ–‡ä»¶ä¿å­˜ä½ç½® RPMåŒ…é»˜è®¤å®‰è£…è·¯å¾„(ç»å¤§éƒ¨åˆ†è½¯ä»¶æ–‡ä»¶å®‰è£…ä½ç½®): æºç åŒ…å®‰è£…ä½ç½®ï¼š å®‰è£…åœ¨æŒ‡å®šä½ç½®å½“ä¸­ï¼Œä¸€èˆ¬æ˜¯/usr/local/è½¯ä»¶å/ ã€‚ å®‰è£…ä½ç½®ä¸åŒå¸¦æ¥çš„å½±å“: RPMåŒ…ï¼š RPMåŒ…å®‰è£…çš„æœåŠ¡å¯ä»¥ä½¿ç”¨ç³»ç»ŸæœåŠ¡ç®¡ç†å‘½ä»¤(service)æ¥ç®¡ç†ï¼Œä¾‹å¦‚RPMåŒ…å®‰è£…çš„Apacheçš„å¯åŠ¨æ–¹æ³•æ˜¯ï¼š /etc/rc.d/init.d./httpd startservice httpd start #ï¼ˆçº¢å¸½ç³»åˆ—ä¸“æœ‰å‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰åªèƒ½é /etc/rc.d/init.d./å¯åŠ¨ï¼‰ RPMåŒ…çš„å¯åŠ¨æ–‡ä»¶å…¨åœ¨/etc/rc.d/init.d./é‡Œï¼Œservice ä¼šæœç´¢RPMåŒ…æ‰€æœ‰çš„å®‰è£…è·¯å¾„ï¼Œæ‰€ä»¥ service æ‰èƒ½å¯åŠ¨RPMåŒ…è½¯ä»¶ã€‚ ä½†æ˜¯serviceå¯åŠ¨ä¸äº†æºç åŒ…è½¯ä»¶ï¼Œå› ä¸ºæºç åŒ…åœ¨/usr/localé‡Œï¼Œå’ŒRPMåŒ…ä¸ä¸€æ ·ã€‚ æºç åŒ… æºç åŒ…å¯åŠ¨ä½¿ç”¨ç»å¯¹è·¯å¾„åŠ startã€‚ æºç åŒ…çš„å®‰è£…è¿™é‡Œä¸¾ä¾‹ï¼ˆå®‰è£…Apacheï¼‰è¯´æ˜ä¸€ä¸‹ï¼š å®‰è£…å‡†å¤‡ å®‰è£…Cè¯­è¨€ç¼–è¯‘å™¨ä½¿ç”¨å‘½ä»¤ï¼š yum -y install gcc gcc-c++ autoconf pcre pcre-devel make automake æ‰§è¡Œå‘½ä»¤å‰è¦ä¸‹è½½æºç åŒ…ï¼šhttp://mirror.bit.edu.cn/apache/httpd/é€‰æ‹©ä»»ä½•ç‰ˆæœ¬ï¼Œæ¯”å¦‚ï¼šhttpd-2.4.43.tar.bz2 ç‰ˆæœ¬ æ³¨æ„äº‹é¡¹ æºç åŒ…ä¿å­˜ä½ç½®ï¼šusrlocalsrc è½¯ä»¶å®‰è£…ä½ç½®ï¼šusrlocal ç„¶åçœ‹çœ‹å®‰è£…è¿‡ç¨‹æœ‰æ²¡æœ‰æŠ¥é”™ï¼šå®‰è£…è¿‡ç¨‹åœæ­¢ï¼Œå¹¶å‡ºç°errorï¼Œwarningæˆ–è€…noæç¤ºï¼Œå³å‘ç”Ÿé”™è¯¯ æŠŠç”µè„‘æœ¬æœºä¸‹è½½å¥½çš„æºç åŒ…ä¼ è¾“åˆ°Linuxç³»ç»Ÿæˆ–è€…æœåŠ¡å™¨ä¸Šã€‚Windowsä¸‹è½½WinSCPè½¯ä»¶è¿›è¡Œæœ¬æœºä¸è™šæ‹Ÿæœºæˆ–è€…è¿œç¨‹ä¼ è¾“Macè¿æ¥è¿œç¨‹é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œç»ˆç«¯ä½¿ç”¨å‘½ä»¤ scpè¿›è¡Œä¼ è¾“ï¼š scp -r localfile.txt username@192.168.0.1:/home/username/ å…¶ä¸­ï¼Œï¼‘ï¼‰scpæ˜¯å‘½ä»¤ï¼Œ-ræ˜¯å‚æ•°ï¼’ï¼‰localfile.txt æ˜¯æ–‡ä»¶çš„è·¯å¾„å’Œæ–‡ä»¶åï¼“ï¼‰usernameæ˜¯æœåŠ¡å™¨è´¦å·ï¼Œä¸€èˆ¬ä¸ºrootï¼”ï¼‰192.168.0.1æ˜¯è¦ä¸Šä¼ çš„æœåŠ¡å™¨ipåœ°å€ï¼•ï¼‰homeusernameæ˜¯è¦æ‹·å…¥çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œä¸€èˆ¬ä¸ºroot å®¶ç›®å½•ä¾‹å­ï¼šscp -r /Users/yangyangyang/Desktop/httpd-2.4.43.tar.bz2 root@47.95.5.171:/root è§£å‹ä¸‹è½½åˆ°æºç åŒ…ä½¿ç”¨å‘½ä»¤ tar -jxvf httpd-2.4.43.tar.bz2å¦‚æœæ˜¯tar.gzå‹ç¼©åŒ…å¯ä»¥ä½¿ç”¨ tar -zxvf å‘½ä»¤ è¿›å…¥è§£å‹ç¼©ç›®å½•è¾“å…¥å‘½ä»¤ï¼š cd httpd-2.4.43 INSTALLï¼šå®‰è£…è¯´æ˜READMEï¼šä½¿ç”¨è¯´æ˜ è¿›å…¥å®‰è£…è¯´æ˜ï¼š vi INSTALL$ ./configure --prefix=PREFIX ç¼–è¯‘å‰å‡†å¤‡$ make è¿›è¡Œç¼–è¯‘$ make install ç¼–è¯‘å®‰è£…$ PREFIX/bin/apachectl star å¯åŠ¨å‘½ä»¤ è¿™äº›ä¸ºè¯¦ç»†çš„å®‰è£…æ­¥éª¤ï¼Œå…¶ä¸­ï¼š.configureä¸ºè½¯ä»¶é…ç½®ä¸æ£€æŸ¥ æˆ‘ä»¬ä¹Ÿç§°ç¼–è¯‘å‰å‡†å¤‡1.å®šä¹‰éœ€è¦çš„åŠŸèƒ½é€‰é¡¹ã€‚2.æ£€æµ‹ç³»ç»Ÿç¯å¢ƒæ˜¯å¦ç¬¦åˆå®‰è£…è¦æ±‚3.æŠŠå®šä¹‰å¥½çš„åŠŸèƒ½é€‰é¡¹å’Œæ£€æµ‹ç³»ç»Ÿç¯å¢ƒçš„ä¿¡æ¯éƒ½å†™å…¥Makefileæ–‡ä»¶ï¼Œç”¨äºåç»­çš„ç¼–è¾‘ã€‚ å®šä¹‰å®‰è£…è·¯å¾„é€€å‡ºä¹‹åè¾“å…¥å‘½ä»¤ï¼š./configure --prefix=/usr/local/apache2 å¦‚æœæŠ¥é”™æ˜¾ç¤ºï¼šè¿›ä»¥ä¸‹ç½‘å€å¯»æ±‚è§£å†³åŠæ³•http://www.cnblogs.com/yuzhaokai0523/p/4382974.html å®Œæˆå®šä¹‰è¾“å…¥å‘½ä»¤ï¼šmake è¿›è¡Œç¼–è¯‘ å®Œæˆç¼–è¯‘è¾“å…¥å‘½ä»¤ï¼šmake install ç¼–è¯‘å®‰è£… å¯åŠ¨è¾“å…¥å‘½ä»¤ /usr/local/apache2/bin/apachectl start$ PREFIX/bin/apachectl star #$pREFIXä¸ºè½¯ä»¶å®‰è£…è·¯å¾„ ç¬¬ä¸‰ç§åŒ…ï¼šè„šæœ¬åŒ… è„šæœ¬å®‰è£…åŒ…å¹¶ä¸æ˜¯ç‹¬ç«‹çš„è½¯ä»¶åŒ…ç±»å‹ï¼Œå¸¸è§å®‰è£…çš„æ˜¯æºç åŒ…ã€‚ æ˜¯äººä¸ºæŠŠå®‰è£…è¿‡ç¨‹å†™æˆäº†è‡ªåŠ¨å®‰è£…çš„è„šæ­¥ï¼Œåªè¦æ‰§è¡Œè„šæœ¬ï¼Œå®šä¹‰ç®€å•çš„å‚èµ›ï¼Œå°±å¯ä»¥å®Œæˆå®‰è£…ã€‚ éå¸¸ç±»ä¼¼äºWindowsä¸‹è½¯ä»¶çš„å®‰è£…æ–¹å¼ã€‚ ä½¿ç”¨ç»å¯¹è·¯å¾„ç›´æ¥å›è½¦å®‰è£…ã€‚ linuxä¸­.shæ–‡ä»¶å³è„šæœ¬æ–‡ä»¶ï¼Œä¸€èˆ¬éƒ½æ˜¯bashè„šæœ¬ã€‚"},{"title":"inside object model","path":"/wiki/cpp/inside object model.html","content":"ç¬¬3ç«  Dataè¯­æ„å­¦ï¼ˆThe Semantics of Dataï¼‰ä¸€ä¸ª libraryclass X ;class Y : public virtual X ;class Z : public virtual X ;class A : public Y, public Z ; åœ¨è¿™ä¸ªç»§æ‰¿ä½“ç³»ä¸‹ï¼ŒX ã€Y ã€Z ã€A å„è‡ªçš„å¤§å°ä¸æ˜¯0ï¼Œè€Œåˆ†åˆ«æ˜¯ï¼š1ã€8 ã€ 8 ã€12ï¼ˆbyteï¼‰ã€‚ åŸå› ï¼š å¯¹äºXï¼šXå¤§å°ä¸º1ï¼Œæ˜¯å› ä¸ºç¼–è¯‘å™¨ä¸å…è®¸ç‹¬ç«‹ class å ç”¨å†…å­˜ä¸º0ã€‚å®ƒåœ¨ class X ä¸­å·å·æ’å…¥äº†ä¸€ä¸ª char æŒ‡é’ˆã€‚ å¯¹äºYã€Zï¼š è¯­è¨€æœ¬èº«çš„ overhead ï¼šä¸ºäº†æ”¯æŒ virtual base class , ç±»å†…ä¼šæ’å…¥ä¸€ä¸ª vptr æŒ‡é’ˆæ¥æŒ‡å‘ç›¸å…³ virtual tableã€‚ table é‡Œå­˜æ”¾ virtual base class subobject çš„åç§»åœ°å€æˆ–å®é™…åœ°å€ã€‚ X çš„ char æŒ‡é’ˆè¢«å·å·ç»§æ‰¿äº†ï¼Œæ­¤æ—¶å­ç±»å¤§å°ä¸º 1+4 5 byte ã€‚ è¿™é‡Œè®¸å¤šç¼–è¯‘å™¨ä¼šå¯¹è¿™ä¸ªcharæŒ‡é’ˆè¿›è¡Œä¼˜åŒ–ï¼Œä½†è¯¥ä¾‹ä¸­æ²¡æœ‰ã€‚ Alignment é½ä½è¦æ±‚å¯¼è‡´ 5-8 byteã€‚ 32ä½è®¡ç®—æœºçš„å†…å­˜é½ä½å¤§å°ï¼š4byte è®¸å¤šç¼–è¯‘å™¨å¯¹ç»§æ‰¿æ¥çš„ ç©ºç™½åŸºç±»charæŒ‡é’ˆä¼šè¿›è¡Œä¼˜åŒ–ã€‚ ï¼ˆä¼˜åŒ–åï¼ŒYå’ŒZ åªå‰©ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ä¸º 4 byteï¼‰ ä¼˜åŒ–æ–¹å¼ï¼šEBO ï¼Œè®©ç©ºç™½è™šåŸºç±»ä½œä¸ºå­ç±»å¯¹è±¡å¼€å¤´çš„ä¸€éƒ¨åˆ†ï¼ˆä¸èŠ±è´¹ä»»ä½•ç©ºé—´ï¼‰ å¯¹äº Aï¼švirtual base class ä¸ä¼šè®©Açš„å†…å­˜å˜æˆç®€å•çš„ 8+816ã€‚ è‡³äºä¸ºä½•å˜æˆ12ï¼š è™šåŸºç±»çš„subobjectï¼ˆå­å†…å®¹ï¼‰å  1 byteã€‚ Base class Y å’Œ Z å‡å»äº†vptr çš„å¤§å°ä¸º4 byteï¼Œ4+48byte class A è‡ªå·±çš„å¤§å°ä¸º 0 é½ä½è¦æ±‚ï¼š9-12 byte ã€‚ å¦‚æœç¼–è¯‘å™¨æœ‰EBOï¼Œå¤§å°åˆ™ä¸º 8 byteã€‚ ï¼ˆå¦‚æœè™šåŸºç±»é‡Œæœ¬èº«æœ‰æ•°æ®ï¼ˆä¸€ä¸ªä»¥ä¸Šï¼‰ï¼ŒEBOå°±ä¼šå¤±æ•ˆï¼Œä¸¤ç§ç¼–è¯‘å™¨çš„å¯¹è±¡å¸ƒå±€ä¼šå®Œå…¨ç›¸åŒï¼‰ å¦å¤– C++Standard ä¸å¼ºåˆ¶è§„å®š base class subobject çš„æ’åˆ—é¡ºåºæˆ– ä¸åŒå­˜å–å±‚çº§çš„ data member é¡ºåºã€‚ å®ƒä¹Ÿä¸è§„å®š virtual function æˆ– virtual base class çš„å®ç°ç»†èŠ‚ã€‚å®ƒè®¤ä¸ºè¿™äº›åº”è¯¥äº¤ç»™å‚å•†å†³å®š è¿™ä¸€ç« ä¸­æœ‰ä¸¤ä¸ªå…³é”®ç‚¹ï¼šclassä¸­çš„ data members å’Œ class hierarchy ã€‚ class.data membersèƒ½å¤Ÿè¡¨ç° class çš„çŠ¶æ€ï¼š Nonstatic data member æ”¾ç½®çš„æ˜¯é’ˆå¯¹ä¸ªåˆ« object çš„æ•°æ®ã€‚æ•°æ®å’Œå¯¹è±¡çš„å†…å­˜åœ¨ä¸€èµ·ã€‚ static data member æ”¾ç½®çš„æ˜¯é’ˆå¯¹æ•´ä¸ªç±»ï¼ˆå…±äº«ï¼‰çš„æ•°æ®ã€‚æ•°æ®è¢«æ”¾ç½®åœ¨ global data segment ä¸­ã€‚å®ƒæ°¸è¿œåªæœ‰ä¸€ä»½å®ä¾‹ã€‚ å³ä½¿ class æ²¡æœ‰ä»»ä½• object ï¼Œstatic data ä¹Ÿå­˜åœ¨ã€‚è¿™ä¸€ç‚¹åœ¨template class ä¸­ç¨æœ‰ä¸åŒã€‚ Nonstatic data çš„è®¾è®¡è€ƒè™‘åˆ°äº†ä¸ C-struct çš„å…¼å®¹ã€‚ ç¼–è¯‘å™¨ä¸ºå®ç° virtual ç­‰ä¼šåŠ ä¸Šè®¸å¤šé¢å¤– data member ï¼ŒåŠ ä¸Šè¾¹ç•Œéœ€è¦ï¼Œå†…å­˜å¾€å¾€æ¯”æƒ³è±¡ä¸­æ›´å¤§ã€‚ 3.1 The Binding of a Data Member ä»ç¼–è¯‘å™¨è§’åº¦æ¢ç´¢ä»£ç å®ç°çš„ä¸€äº›è¿‡ç¨‹ //æŸä¸ªfoo.hå¤´æ–‡ä»¶extern float x;\t//xåœ¨åˆ«å¤„è¢«å®šä¹‰ï¼Œæ­¤å¤„è¢«å¼•ç”¨ã€‚è¿™é‡Œxæ˜¯å£°æ˜ä¸æ˜¯å®šä¹‰ï¼Œå®šä¹‰æ˜¯è¦åˆ†é…å­˜å‚¨ç©ºé—´çš„ã€‚//Point3d.hæ–‡ä»¶class Point3d\tpublic: Point3d(float,float,float); //é—®é¢˜ï¼šè¢«å›ä¼ å’Œè®¾å®šçš„xæ˜¯å“ªä¸€ä¸ªxå‘¢ï¼Ÿ float X()const return x; void X(float new_x)const x=new_x; //...\tprivate: float x,y,z;; åœ¨ä»Šå¤©çš„ç¼–è¯‘å™¨ä¸‹ï¼Œpoint::X()ä¼ å› class å†…éƒ¨çš„xã€‚æ—©æœŸç¼–è¯‘å™¨ä¸ºäº†é˜²æ­¢æŒ‡å‘ global x object ï¼Œæœ‰ä¸¤ç§è®¾è®¡æ€è·¯ã€‚ æ‰€æœ‰data member æ”¾åœ¨å¼€å¤´ï¼Œæ¥ç¡®ä¿æ­£ç¡®ç»‘å®šã€‚ class Point3d float x,y,z; //çœ‹åˆ°å®ƒä»¬äº†public: float X() const return x; //ä¸æ€•è¢«å¤–éƒ¨å¼•å…¥è°ƒç”¨äº†ï¼ æŠŠæ‰€æœ‰ inline function æ”¾åˆ°ç±»çš„å£°æ˜ä¹‹å¤–ã€‚ classs Point3dpublic: Point3d(); float X() const; void X(float) const; //ç¼–è¯‘å™¨åªçœ‹åˆ°äº†å£°æ˜ï¼Œçœ‹åˆ°ä¸‹é¢çš„å†…éƒ¨å˜é‡åå†å»å®ç° ...inline float Point3d::X() const return x;æ”¾åˆ°å®ç°å¤–... è¿™ä¸¤ä¸ªå¤è€æ€è·¯è¢«ç§°ä¸º member rewriting rule ,ä¸å…è®¸ inline å‡½æ•°å®ä½“åœ¨ class å£°æ˜è¢«å®Œå…¨çœ‹è§ä¹‹å‰å»è¿›è¡Œ evaluateã€‚ C++ Standard ä»¥ member scope resolution rules æ¥æ›´å¥½å®Œæˆ rewriting rule ã€‚ æ•ˆæœï¼šinline function åœ¨classå£°æ˜åè¢«ç«‹åˆ»å®šä¹‰ï¼Œä»ç„¶å¯¹å…¶è¯„ä¼°æ±‚å€¼ã€‚ extern float x;\tclass Point3d\tpublic: ...\tvoid X(float new_x)const x=new_x; //å¯¹äºå‡½æ•°æœ¬ä½“çš„åˆ†æå°†å»¶è¿Ÿåˆ°ç¼–è¯‘å™¨å‘ç° class çš„ â€œâ€ æ—¶\tprivate: float x,y,z;; å¯¹member function çš„æœ¬ä½“åˆ†æï¼Œç›´åˆ°æ•´ä¸ª class å£°æ˜éƒ½å‡ºç°æ‰å¼€å§‹ã€‚è¿™æ—¶ä¸éœ€è¦æŠŠæ‰€æœ‰ç±»å†…éƒ¨å‡½æ•°å®ç°è½¬ç§»åˆ°ç±»å¤–éƒ¨äº†ã€‚ ç‰¹æ®Šæƒ…å†µï¼šmember function çš„ argument list typedef int length; //é‡å‘½åç±»å‹äº†class Point3d\tpublic: ...\tvoid X(length val)const _val=val; // argument 1 length mumble() return _val; // argument 2\t//å¯¹äºå‡½æ•°æœ¬ä½“çš„åˆ†æå°†å»¶è¿Ÿåˆ°ç¼–è¯‘å™¨å‘ç° class çš„ â€œâ€ æ—¶\tprivate: typedef float length; length _val;; éæˆ‘ä»¬æ‰€æ„¿çš„æ•°æ®ç»‘å®šæƒ…å†µåœ¨ä¸¤ä¸ªå‚æ•°ç¬¬ä¸€æ¬¡è¢«ç¼–è¯‘å™¨çœ‹åˆ°æ—¶ï¼Œä»ç„¶ä¼šå‘ç”Ÿã€‚ä¸Šé¢çš„ä¸¤ä¸ª length ç±»å‹ éƒ½è¢« resolve æˆ global typedef äº†ã€‚ è¿™æ ·ä¸€æ¥ï¼Œåç»­åœ¨å» nested - typedef lengthï¼Œå°±ä¼šå¯¼è‡´ç¼–è¯‘å™¨æŠ¥é”™å¹¶å®šä¹‰æœ€æ—©çš„ç»‘å®šä¸åˆæ³•ã€‚ æ‰€ä»¥ï¼ŒæŠŠåµŒå¥—çš„ typedef æ”¾åˆ° class èµ·å§‹å¤„å§ã€‚ 3.2 Data Member Layoutclass Point3d\tpublic: //...\tprivate: float x; static ListPoint3d* *freeList; float y; static const int chunkSize=250; float z;; non-static data member åœ¨ class object ä¸­çš„æ’åˆ—é¡ºåºå’Œå…¶è¢«å£°æ˜çš„é¡ºåºä¸€æ ·ã€‚ ä»»ä½•ä¸­é—´ä»‹å…¥ä¾‹å¦‚freeListå’ŒchunkSizeçš„staticæ•°æ®æˆå‘˜ éƒ½ä¸ä¼šè¢«æ”¾è¿›å¯¹è±¡çš„å¸ƒå±€ä¹‹ä¸­ã€‚ åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæ¯ä¸€ä¸ªPoint3dçš„å¯¹è±¡ç”±3ä¸ªfloatç»„æˆï¼Œæ¬¡åºæ˜¯x,y,z staticæ•°æ®æˆå‘˜å­˜æ”¾åœ¨ç¨‹åºçš„æ•°æ®æ®µä¸­ï¼Œå±äºæ•´ä¸ªç±»ï¼Œä¸å±äºæŸä¸ªå¯¹è±¡ã€‚ C++ Standardè¦æ±‚ï¼Œåœ¨åŒä¸€ä¸ªaccess sectionï¼ˆä¹Ÿå°±æ˜¯private,public,protectedç­‰åŒºæ®µï¼‰ä¸­ï¼Œåªéœ€è¦æ»¡è¶³**â€œè¾ƒæ™šå‡ºç°çš„æ•°æ®æˆå‘˜åœ¨å¯¹è±¡ä¸­æœ‰è¾ƒé«˜çš„åœ°å€â€**å³å¯ã€‚ å³åœ¨åŒä¸€ä¸ªacess sectionä¸­ï¼Œæ¬¡åºæŒ‰ç…§å£°æ˜çš„æ¬¡åºï¼Œä½†æ˜¯ä¸ä¸€å®šè¿ç»­ï¼Œå¯èƒ½å› ä¸ºé½ä½è°ƒæ•´(alignment)æˆ–è€…ç¼–è¯‘å™¨è‡ªåŠ¨åˆæˆçš„ä¸€äº›å†…éƒ¨ä½¿ç”¨çš„æ•°æ®æˆå‘˜ï¼Œå¦‚è™šå‡½æ•°è¡¨æŒ‡é’ˆvptræ’å…¥åˆ°è¿™äº›æ•°æ®æˆå‘˜åˆ°ä¸­é—´ã€‚ ï¼ˆä¼ ç»Ÿçš„ç¼–è¯‘å™¨ä¼šæŠŠvptræ”¾åˆ°æ‰€æœ‰æ˜ç¡®å£°æ˜çš„æ•°æ®æˆå‘˜æœ€åï¼Œå½“ç„¶ä¹Ÿæœ‰ç¼–è¯‘å™¨æ”¾åœ¨å¯¹è±¡çš„æœ€å‰ç«¯ã€‚æ€»ä¹‹C++ Standard å¯¹è¿™ç§å¸ƒå±€å¾ˆå®½æ¾å•¦ï¼‰ å¯¹äºä¸åŒaccess sectionçš„æƒ…å†µï¼š class Point3d\tpublic: //...\tprivate:\t//ä¸€ä¸ªacess section float x; static ListPoint3d* *freeList;\tprivate:\t//å¦ä¸€ä¸ªacess section float y; static const int chunkSize=250;\tprivate //å¦ä¸€ä¸ªacess section float z;; å¤§å°å’Œç»„æˆåŒå…ˆå‰çš„ä¸€æ ·ã€‚æ’åˆ—é¡ºåºç”±ç¼–è¯‘å™¨å†³å®šã€‚ ä¸»æµæƒ³æ³•æ˜¯ï¼šæŠŠä¸€ä¸ªä»¥ä¸Šçš„ access section è¿é”åœ¨ä¸€èµ·ï¼ŒæŒ‰ç…§å£°æ˜é¡ºåºå½¢æˆè¿ç»­åŒºå—ã€‚ Access section çš„å¤šå¯¡æ²¡æœ‰é¢å¤–è´Ÿæ‹…ã€‚8ä¸ªsectionä¸­çš„8ä¸ªmember å’Œ1ä¸ª section ä¸­çš„8ä¸ª member å¤§å°ä¸€æ ·ã€‚ æ‹“å±• ä¸€ä¸ªèƒ½åˆ¤æ–­è°å…ˆå‡ºç°åœ¨ class objectä¸­çš„ template functionã€‚ (ä¸¤ä¸ª member éƒ½æ˜¯ä¸åŒçš„ access section ä¸­ç¬¬ä¸€è¢«å£°æ˜è€…ï¼Œæ­¤å‡½æ•°å°±å¯ä»¥ç”¨æ¥åˆ¤æ–­å“ªä¸€ä¸ª section å…ˆå‡ºç°) template class class_type, class data_type1, class data_type2 char* access_order(data_type1 class_type::*mem1, data_type2 class_type::*mem2) assert (mem != mem2 ); return mem1 mem2 ? member 1 occurs first : member 2 occurs first access_order(Point3d::z , Point3d::y);//class_type == Point3d//data_type1 == data_type2 == float 3.3 Data Memberçš„å­˜å–Point3d origin;origin.x = 0.0; ä¸‹é¢æ¥æ ¹æ®æ ¹æ®ä¸åŒæƒ…å†µåˆ†æ x çš„å­˜å–æˆæœ¬ã€‚ åˆ†æå‰çš„ä¸€ä¸ªé—®é¢˜ Point3d origin, *pt = origin;origin.x = 0.0;pt-x = 0.0; é€šè¿‡ origin å­˜å–å’Œ é€šè¿‡ pt å­˜å– æœ‰ä»€ä¹ˆå·®åˆ«å—ï¼Ÿ ç¨åä¼šå›ç­”ã€‚ Static Data Members å‰é¢è®²è¿‡ï¼Œæ¯ä¸€ä¸ªstaticæˆå‘˜åªå­˜åœ¨ä¸€ä¸ªå®ä½“ï¼Œå­˜æ”¾åœ¨ç¨‹åºçš„data segmentæ•°æ®æ®µä¸­ï¼Œè¢«è§†ä¸ºä¸€ä¸ªglobalå˜é‡ï¼ˆåªåœ¨classå­˜åœ¨èŒƒå›´å†…å¯è§ï¼‰ origin.chunkSize=250;\t//è¿™æ ·è°ƒç”¨ï¼Œå†…éƒ¨è½¬åŒ–ä¸ºï¼š//Point3d::chunkSize=250;\tpt-chunkSize=250;\t//è¿™æ ·è°ƒç”¨ï¼Œå†…éƒ¨è½¬åŒ–ä¸ºï¼š//Point3d::chunkSize=250; é€šè¿‡ member selection operatorsï¼ˆâ€œ.â€è¿ç®—ç¬¦ï¼‰å¯¹ é™æ€æˆå‘˜å˜é‡è¿›è¡Œæ“ä½œåªæ˜¯è¯­æ³•ä¸Šçš„ç®€ä¾¿æ“ä½œã€‚å®é™…ä¸Šstatic-member å¹¶ä¸åœ¨ class å¯¹è±¡ä¸­ã€‚æ‰€ä»¥å­˜å– static member å¹¶ä¸éœ€è¦é€šè¿‡ class å¯¹è±¡ã€‚ chunksizeæ˜¯ç»§æ‰¿æ¥çš„member å„ç§å¤æ‚å…³ç³»ï¼Œæ¯”å¦‚è™šåŸºç±»çš„è™šåŸºç±»é‚£é‡Œç»§æ‰¿è€Œæ¥ã€‚ã€‚ã€‚ ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–ã€‚static-member ä»ç„¶åœ¨æ ˆé‡Œç­‰å¾…ç€ã€‚ static data member é€šè¿‡å‡½æ•°è°ƒç”¨ ä¸€ç§å¯èƒ½çš„è½¬åŒ–ï¼ˆä¸åŒæ ‡å‡†ä¸åŒå¤„ç†ï¼‰ foobar().chunkSize=250;\t//è¿™æ ·è°ƒç”¨ï¼Œå†…éƒ¨è½¬åŒ–ä¸ºï¼š//(void)foobar();//Point3d.chunkSize = 250; å–é™æ€æˆå‘˜å˜é‡åœ°å€ å› ä¸º static member ä¸å†…å«åœ¨ class å¯¹è±¡é‡Œï¼Œå–å…¶åœ°å€ä¸ä¼šå¾—åˆ°æŒ‡å‘å¯¹åº” class member çš„æŒ‡é’ˆï¼Œè€Œä¼šå¾—åˆ°æŒ‡å‘å…¶æœ¬èº«æ•°æ®ç±»å‹çš„æŒ‡é’ˆã€‚ Point3d::chunkSize; //å¾—åˆ° const int* ç±»å‹çš„å†…å­˜åœ°å€ //è€Œä¸æ˜¯Point3d::*ç±»å‹çš„åœ°å€ï¼ˆæŒ‡å‘ç±»å¯¹è±¡æˆå‘˜çš„æŒ‡é’ˆï¼‰ã€‚ å¯¹äºé™æ€æˆå‘˜å†²çªï¼š å¦‚æœä¸€ä¸ªç¨‹åºé‡Œå®šä¹‰äº†ä¸¤ä¸ªç±»ï¼Œä¸¤ä¸ªç±»éƒ½å£°æ˜äº†ä¸€ä¸ªstaticæˆå‘˜ï¼Œä¸”ä¸¤ä¸ªstaticæˆå‘˜åŒåï¼Œé‚£ä¹ˆéƒ½å­˜æ”¾åœ¨ç¨‹åºçš„æ•°æ®æ®µä¸­æ—¶ä¼šå¼•èµ·åŒåå†²çªã€‚ ç¼–è¯‘å™¨ä¼šæš—ä¸­å¯¹æ¯ä¸€ä¸ªstaticæˆå‘˜ç¼–ç ï¼Œå¾—åˆ°ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¨‹åºè¯†åˆ«ä»£ç (ä¸€èµ·æ‰”åˆ°æŸä¸ªè¡¨æ ¼ä¹‹ç±»çš„ä¸œè¥¿é‡Œ)ï¼Œè¿™ç§æ‰‹æ³•å«name-manglingï¼ˆä¸åŒç¼–è¯‘å™¨ç¼–ç ä¸åŒï¼‰ã€‚ä¸»è¦åšä¸¤ä»¶äº‹ï¼š 1ã€ä¸€ç§ç®—æ³•ï¼Œæ¨å¯¼å‡ºç‹¬ä¸€æ— äºŒçš„åç§° 2ã€æ¨å¯¼å‡ºçš„åç§°èƒ½å¤Ÿè¿˜åŸ(ä¸‡ä¸€ç¼–è¯‘ç³»ç»Ÿï¼ˆæˆ–ç¯å¢ƒå·¥å…·ï¼‰å¿…é¡»ä¸ä½¿ç”¨è€…äº¤è°ˆï¼Œé‚£ä¹ˆé‚£äº›ç‹¬ä¸€æ— äºŒçš„åç§° å¯ä»¥è½»æ˜“è¢«æ¨å¯¼å›åŸæ¥çš„åç§°) Nonstatic Data Member non-staticæˆå‘˜å­˜åœ¨äºæ¯ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œå¿…é¡»é€šè¿‡æ˜¾ç¤ºçš„æˆ–è€…éšå¼çš„å¯¹è±¡æ‰èƒ½å¯¹non-staticæˆå‘˜è¿›è¡Œå­˜å–ã€‚ åªè¦ç¨‹åºå‘˜åœ¨æˆå‘˜å‡½æ•°é‡Œç›´æ¥å¤„ç†non-staticæˆå‘˜ï¼Œéšå¼çš„å¯¹è±¡å°±ä¼šå‡ºç°ï¼ˆå®ƒå°±æ˜¯è¢«ç¼–è¯‘å™¨éšè—çš„å®¶ä¼™ï¼‰ã€‚ Point3d::translate(const Point3d pt)\tx+=pt.x;\ty+=pt.y;\tz+=pt.z;//å†…éƒ¨è½¬åŒ–ä¸ºï¼š(ç¼–è¯‘å™¨åœ¨å‚æ•°åˆ—è¡¨ä¸ŠåŠ äº†thisæŒ‡é’ˆ)Point3d::translate(Point3d *const this,const Point3d pt) //ç¬¬ä¸€ä¸ªå‚æ•° this æ˜¯éšè—çš„ï¼\tthis-x+=pt.x;\t//thisæŒ‡é’ˆå°±æ˜¯ä¸Šè¿°çš„éšå¼çš„å¯¹è±¡\tthis-y+=pt.y;\tthis-z+=pt.z; implicit class object ç”± this æŒ‡é’ˆè¡¨è¾¾ã€‚ å¯¹ nonstatic data member è¿›è¡Œå­˜å–æ“ä½œæ—¶ï¼Œç¼–è¯‘å™¨ä¼šè¦æ±‚ class object çš„èµ·å§‹åœ°å€ + offset(data member)åç§»åœ°å€ ã€‚ origin.y = 0.0;//å³origin + (Point3d::y-1); -1æ˜¯ä¸ºäº†è®©ç³»ç»ŸåŒºåˆ†æŒ‡å‘æˆå‘˜å˜é‡çš„æŒ‡é’ˆä¸­ï¼Œç©ºæŒ‡é’ˆå’ŒæŒ‡å‘ç¬¬ä¸€ä¸ªå˜é‡çš„æŒ‡é’ˆï¼ˆä¸¤è€…éƒ½æ˜¯0ï¼‰ nonstaic æˆå‘˜å˜é‡çš„offsetåœ¨ç¼–è¯‘æœŸå°±èƒ½å¾—çŸ¥ã€‚å³ä½¿è¯¥ member å±äº base class subobjectï¼ˆç»§æ‰¿æ¥çš„å­å†…å®¹ï¼‰ã€‚å› æ­¤å­˜å–æ•ˆç‡å’Œ C struct æˆå‘˜ æˆ–ç‹¬ç«‹ç±»ä¸­çš„ æˆå‘˜ æ˜¯ä¸€æ ·çš„ã€‚ è™šæ‹Ÿç»§æ‰¿ Point3d origin;Point3d *pt = origin;origin.x=0.0;pt-x=0.0; è™šæ‹Ÿç»§æ‰¿ä½¿ base class subobject å­˜å– class members å¢åŠ äº†æ–°çš„é—´æ¥æ€§ã€‚ ï¼ˆæŒ‡é’ˆçš„é—´æ¥æ€§ + virtual vptr é—´æ¥æ€§ï¼‰ å½“ç„¶ï¼Œx åœ¨ä½œä¸º struct æˆå‘˜ï¼Œç‹¬ç«‹ç±»æˆå‘˜ã€æ™®é€šç»§æ‰¿ï¼ˆévirtualï¼‰æˆå‘˜çš„æ•ˆç‡éƒ½ç›¸åŒã€‚ä½†åœ¨ä½œä¸ºæˆ‘ä»¬å½“å‰è®¨è®ºçš„ virtual base class æ—¶ï¼Œå­˜å–é€Ÿåº¦ä¼šç¨æ…¢ã€‚ è¿™æ—¶å°±å›åˆ°äº†è¯¥èŠ‚å¼€å¤´çš„é‚£ä¸ªé—®é¢˜ï¼šä»¥ä¸Šä¸¤ä¸ªå­˜å–æ–¹å¼æœ‰ä»€ä¹ˆé‡å¤§å·®åˆ«ï¼Ÿ ç­”æ¡ˆï¼šå½“Point3dä¸ºå­ç±»ï¼Œç»§æ‰¿è¿‡ä¸€ä¸ª virtual base classï¼Œè€Œ memberï¼ˆå¦‚xï¼‰åˆå±äºè¿™ä¸ªè™šåŸºç±»æ—¶ï¼Œå·®åˆ«å°±ä¼šå¾ˆå¤§ï¼š ptç”±äºé—´æ¥æ€§ï¼Œä¸èƒ½ç¡®å®šæŒ‡å‘å“ªä¸€ç§ class type ï¼Œäºæ˜¯åœ¨ç¼–è¯‘æœŸå°±æ— ä»çŸ¥æ™“è¯¥æˆå‘˜çš„åç§»ä½ç½®ã€‚æ‰€ä»¥è¿™ä¸ªå­˜å–æ“ä½œè¢«è½¬ç§»åˆ°äº†è¿è¡ŒæœŸï¼ˆé€šè¿‡é¢å¤–çš„é—´æ¥ç´¢å¼•æ¥è§£å†³ï¼‰ã€‚ origin ä¸ä¼šå­˜åœ¨ptçš„é—®é¢˜ï¼Œä»–çš„ç±»å‹å¾ˆæ˜ç¡®ï¼Œå³ Point3d classã€‚å³ä½¿å®ƒç»§æ‰¿è‡ªè™šåŸºç±»ï¼Œæˆå‘˜åç§»é‡ä¹Ÿèƒ½å¤Ÿåœ¨ç¼–è¯‘æœŸå›ºå®šã€‚ æˆä»½æ›´å¤šçš„ç¼–è¯‘å™¨ç”šè‡³èƒ½é€šè¿‡ origin é™æ€è§£å†³æ‰å¯¹xçš„å­˜å–æ“ä½œã€‚ 3.4 ç»§æ‰¿ä¸ Data MemberCPPç»§æ‰¿æ¨¡å‹ä¸­ï¼Œä¸€ä¸ªå­ç±»å¯¹è±¡è¡¨ç°å‡ºæ¥çš„ä¸œè¥¿ï¼Œæ˜¯ derived class member å’Œ base class member çš„æ€»å’Œã€‚ä½†è¿™ä¸¤è€…çš„æ’åˆ—é¡ºåºå¹¶æ²¡æœ‰æ˜ç¡®è§„å®šã€‚ é€šå¸¸ base class members å…ˆå‡ºç°ï¼Œå±äºvirtual base class çš„éƒ¨åˆ†é™¤å¤–ã€‚ class Point2d\tpuiblic: //functions\tprivate: float x,y;class Point3d\tpuiblic: //functions\tprivate: float x,y,z; ä¸‹é¢æˆ‘ä»¬å°†åœ¨ä»¥ä¸Šä¸¤ä¸ªç‹¬ç«‹ç±»ä¹‹é—´çš„å…³ç³»ä¸Šåšæ–‡ç« ï¼Œåˆ†åˆ«è®¨è®ºï¼šâ€œå•ä¸€ç»§æ‰¿ä¸”ä¸å« virtual functionâ€ã€â€œå•ä¸€ç»§æ‰¿å¹¶å«virtual functionsâ€ã€â€œå¤šé‡ç»§æ‰¿â€ã€â€œè™šæ‹Ÿç»§æ‰¿â€çš„æƒ…å†µã€‚ å…ˆçœ‹ä¸‹ç‹¬ç«‹ç±»æ—¶çš„çŠ¶æ€ï¼ˆnon-virtual functionï¼‰ å’Œ C struct å®Œå…¨ä¸€æ · åªè¦ç»§æ‰¿ä¸è¦å¤šæ€ç°åœ¨ä»Point2dæ´¾ç”Ÿå‡ºPoint3dï¼Œäºæ˜¯Point3då°†ç»§æ‰¿xå’Œyåæ ‡çš„ä¸€åˆ‡ï¼ˆåŒ…æ‹¬æ•°æ®å®ä½“å’Œæ“ä½œæ–¹æ³•ï¼‰ï¼Œä½¿Pointæ— è®º2dæˆ–3déƒ½å¯ä»¥å…±äº«æ•°æ®æœ¬èº«å’Œæ•°æ®çš„å¤„ç†æ–¹æ³•ã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œéè™šæ‹Ÿç»§æ‰¿å¹¶ä¸ä¼šå¢åŠ ç©ºé—´æˆ–å­˜å–æ—¶é—´ä¸Šçš„é¢å¤–è´Ÿæ‹…ã€‚ class Point2d\tpublic: Point2d(float x=0.0,float y=0.0):_x(x),_y(y); float x()return _x; float y()return _y; void x(float newX) _x=newX; void y(float newY) _y=newY; void operator+-(const Point2d rhs) _x += rhs.x(); _y += rhs.y(); //...\tprotected: float _x,_y;;class Point3d:public Point2d\tpublic: Point3d(float x=0.0,float y=0.0,float z=0.0): Point2d(x,y),_z(z); float z()return _z; void z(float newZ) _z=newZ; void operator+-(const Point3d rhs) Point2d::operator+=(rhs); _z += rhs.z(); //...\tprotected: float _z;; æ™®é€šç»§æ‰¿çš„å¥½å¤„æ˜¯è´Ÿè´£åæ ‡ç‚¹çš„ç¨‹åºä»£ç èƒ½å¤Ÿå±€éƒ¨åŒ–ï¼ŒåŒæ—¶èƒ½å¤Ÿè¡¨ç°å‡ºä¸¤ä¸ª class çš„ç´§å¯†å…³ç³»ã€‚å³ä½¿ä¸¤ä¸ªç±»ç‹¬ç«‹å‡ºæ¥ï¼Œä¹Ÿä¸éœ€è¦æ”¹å˜å£°æ˜å’Œä½¿ç”¨ã€‚ ä½†è¿™ç§è®¾è®¡æœ‰ä¸¤ä¸ªå‘ï¼š è¿™ç§ç»§æ‰¿å…³ç³»éœ€è¦é€‰æ‹©æŸäº›å‡½æ•°ä½œä¸º inline å‡½æ•°ï¼Œå¦åˆ™å°±ä¼šå‡ºç°ç›¸åŒæ“ä½œçš„å‡½æ•°é‡å¤å‡ºç°ã€‚ å¦‚ç¤ºä¾‹ä¸­çš„ operator + å’Œ constructor å‡½æ•°ï¼š Point3d object çš„åˆå§‹åŒ–å’ŒåŠ æ³•æ“ä½œï¼Œéœ€è¦éƒ¨åˆ†point2d å’Œ éƒ¨åˆ† point3d ä½œä¸ºæˆæœ¬ã€‚ å°†ä¸€ä¸ªç±»æ‹†åˆ†æˆä¸¤å±‚æˆ–è€…æ›´å¤šå±‚çš„ç±»æ—¶ï¼Œä¸ºäº†è¡¨ç°â€ç±»ä½“ç³»çš„æŠ½è±¡åŒ–â€œè€Œé€ æˆç©ºé—´è†¨èƒ€ã€‚ ä»¥ concrete ç±»ä¸ºä¾‹ class Concrete\tprivate: int val; char c1; char c2; char c3;; ç©ºé—´åˆ†æï¼ˆ32bitï¼‰ï¼šval - 4byte , c1 , c2 ,c3 å„å ç”¨ 1byteï¼›é½ä½è¦æ±‚ï¼š4+3â†’8byte è¿™ä¸ªæ¡ˆä¾‹ä¸­å¦‚æœæœ‰ä»¥ä¸‹åº”ç”¨åœºæ™¯ï¼šå°† concrete åˆ†è£‚æˆä¸‰å±‚ç»“æ„ class Concrete1\tprivate: int val; char bit1;;class Concrete2:public Concrete1\tprivate: char bit2;;class Concrete3:public Concrete2\tprivate: char bit3;; ç©ºé—´è†¨èƒ€å–½ï¼šä¸‰æ¬¡é½ä½è¦æ±‚é€ æˆå†…å­˜ä¸º 8+4+4 16 byte ä¸è¦æƒ³å½“ç„¶è®¤ä¸º concrete::nonstatic data member bit2 ä¼šå¡«è¡¥ concrete1çš„ç©ºé—´ã€‚é½ä½å¡«å……ä¼šæå‰å‘ç”Ÿã€‚ é‚£ä¹ˆè¿™ç§æå‰å¡«å……ï¼Œæˆ–è€…è¯´æ²¡æœ‰æŠŠå­ç±»å’Œçˆ¶ç±»å­å¯¹è±¡å¡«å……åœ¨ä¸€èµ·çš„è®¾è®¡ç”¨æ„ä½•åœ¨å‘¢ï¼Ÿ çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š Concrete2 *pc2;Concrete1 *pc1_1 , *pc1_2; //è¿™ä¿©å¯ä»¥æŒ‡å‘ä¸Šè¿°ä¸‰ç§classes objectã€‚ å‘ç”Ÿä¸‹è¿°æ“ä½œæ—¶ï¼š *pc1_2 = *pc1_1; åº”è¯¥æ‰§è¡Œä¸€ä¸ªé»˜è®¤çš„ memberwise å¤åˆ¶æ“ä½œï¼Œæ¥ä¸€ä¸ªä¸€ä¸ªå¤åˆ¶ Concrete1çš„member ã€‚ å¦‚æœpc1_1 æŒ‡å‘ä¸€ä¸ª Concrete2 object æˆ– Concrete3 object çš„è¯ï¼Œä¸Šè¿°æŒ‡é’ˆèµ‹å€¼æ“ä½œåº”å°†å¤åˆ¶å†…å®¹æŒ‡å®šä¸º Concrete1 subobjectã€‚ ä½†å¦‚æœå­ç±»æˆå‘˜å’Œçˆ¶ç±»å­å¯¹è±¡æ†ç»‘åœ¨ä¸€èµ·ï¼Œæ¥å¡«è¡¥ç©ºé—´çš„è¯ï¼Œå°±ä¼šå‘ç”Ÿæ„å¤–ï¼š //pc1_1å’Œpc2:æ—¢æœ‰åŸºç±»å­å¯¹è±¡ï¼Œåˆæœ‰è‡ªèº«æˆå‘˜å±æ€§ã€‚ä½†ä¸¤è€…ç»‘å®šåœ¨äº†ä¸€èµ·//pc1_2pc1_1 = pc2; //ä»¤ pc1_1 æŒ‡å‘ Concrete2 å¯¹è±¡*pc1_1=*pc1_2; // pc1_1 çš„ derived class subobject ä¼šè¢«è¦†ç›–ï¼Œä½¿bit2è¢«è¦†ç›–äº§ç”Ÿéé¢„æœŸ ä¸Šè¿°æ“ä½œä¼šæŠŠConcrete1å¯¹è±¡é€å¯¹è±¡æ‹·è´ï¼ŒåŒ…æ‹¬åŸæœ¬åº”è¯¥paddingçš„ä¸‰ä¸ªå­—èŠ‚ï¼Œäºæ˜¯å®é™…pc1_1æŒ‡å‘çš„Concrete2å¯¹è±¡çš„bit2ä¼šè¢«è¦†ç›–æ‰ï¼Œå‡ºç°ä¸€ä¸ªæ— æ³•ç¡®å®šçš„å€¼ã€‚ ä¸‹å›¾ä¸ºç»‘å®šåçš„è¿‡ç¨‹ ï¼š åœ¨å­ç±»ä¸­çš„ base class subobject çš„åŸæ ·æ€§è¢«ç ´ååï¼Œä¼šå¯¼è‡´ copy æ—¶ Concrete 1 çš„å­å¯¹è±¡å¤åˆ¶ç»™ Concrete2ï¼Œ ç ´åäº† Concrete 2 (æ†ç»‘å) çš„æˆå‘˜ã€‚ åŠ ä¸Šå¤šæ€å¤šæ€å˜›ï¼Œå¤„ç†ä¸€ä¸ªåæ ‡ç‚¹è€Œä¸åœ¨ä¹å®ƒæ˜¯ Point2d è¿˜æ˜¯ Point3d ï¼Œåœ¨ç»§æ‰¿å…³ç³»ä¸­æä¾›ä¸€ä¸ª virtual function æ¥å£ã€‚ class Point2d\tpublic: Point2d(float x=0.0,float y=0.0):_x(x),_y(y); float x()return _x; float y()return _y; void x(float newX) _x=newX; void y(float newY) _y=newY; //ä¿®æ”¹1ï¼šåŠ ä¸Šzçš„ä¿ç•™ç©ºé—´ï¼Œå½“å‰ä»€ä¹ˆä¹Ÿæ²¡åšï¼Œ2dçš„zç‚¹è¿”å›0.0ä¹Ÿæ˜¯åˆç†çš„(åªæ˜¯ä¸ºæ‰©å±•æ€§å­˜åœ¨) virtual float z()return 0.0; virtual void z(float) //ä¿®æ”¹2ï¼šè®¾å®šä¸‹é¢çš„è¿ç®—ç¬¦æ“ä½œä¸ºvirtual virtual void operator+=(const Point2d rhs) _x += rhs.x(); _y += rhs.y(); //...\tprotected: float _x,_y;; æ—¢ç„¶å¤šæ€ï¼Œå¯¼å…¥ä¸€ä¸ª virtual æ¥å£æ‰æ˜¾å¾—åˆç†ã€‚ void foo(Point2d p1,Point2d p2)\t//...\tp1+=p2; //p1 å¯èƒ½æ˜¯2dï¼Œå¯èƒ½æ˜¯3d\t//... Point3dï¼š class Point3d:public Point2d\tpublic: Point3d(float x=0.0,float y=0.0,float z=0.0):Point2d(x,y),_z(z); float z()return _z; void z(float newZ) _z=newZ; //ä¿®æ”¹ï¼šå‚æ•°æ”¹æˆconst Point2d rhsï¼ˆåŸæ¥æ˜¯Point3dï¼‰ void operator+=(const Point2d rhs) Point2d::operator+=(rhs); _z += rhs.z(); //...\tprotected: float _z;;//ä¿®æ”¹åæœ€å¤§çš„å¥½å¤„å°±æ˜¯å¯ä»¥æŠŠoperator+=è¿ç”¨åœ¨ä¸€ä¸ªPoint3då¯¹è±¡å’ŒPoint2då¯¹è±¡ä¸ŠPoint2d p2d(2.1,2.2);Point3d p3d(3.1,3.2,3.3);p3d+=p2d;//å¾—åˆ°çš„p3dæ–°å€¼ä¸º(5.2,5.4,3.3) ä¸¤ä¸ª z() member function å’Œ operator+()è¿ç®—ç¬¦ éƒ½æˆäº† virtual function æ¯ä¸€ä¸ªPoint3d class object å†…å«ä¸€ä¸ªé¢å¤–çš„ vptr memberï¼ˆfrom Point2dï¼‰ é¢å‘å¯¹è±¡çš„å¼¹æ€§ä¼šå¸¦æ¥ç›¸åº”çš„å®ç°è´Ÿæ‹…ï¼š å¯¼å…¥ä¸€ä¸ªå’ŒPoint2dæœ‰å…³çš„è™šå‡½æ•°è¡¨ï¼Œå­˜æ”¾å£°æ˜çš„è™šå‡½æ•°åœ°å€ï¼Œè¿˜æœ‰æ”¯æŒruntime type identificationç›¸å…³çš„ä¸œè¥¿ã€‚ æ¯ä¸€ä¸ªç±»å¯¹è±¡è¦åŠ ä¸€ä¸ªè™šå‡½æ•°è¡¨æŒ‡é’ˆvptrï¼Œæä¾›æ‰§è¡ŒæœŸçš„é“¾æ¥ï¼Œä½¿å¾—æ¯ä¸€ä¸ªå¯¹è±¡éƒ½èƒ½æ‰¾åˆ°ç›¸åº”çš„è™šå‡½æ•°è¡¨ã€‚ æ„é€ å‡½æ•°éœ€è¦ä¸ºvptræä¾›åˆå§‹å€¼ï¼Œè®©å®ƒæŒ‡å‘ç±»å¯¹åº”çš„è™šå‡½æ•°è¡¨ã€‚è¿™å¯èƒ½æ„å‘³ç€æ‰€æœ‰æ´¾ç”Ÿç±»å’ŒåŸºç±»çš„æ„é€ å‡½æ•°éƒ½è¦é‡æ–°è®¾å®švptrçš„å€¼ã€‚ è¿™äº›æ“ä½œéƒ½æ˜¯ç¼–è¯‘å™¨å·å·åšå‡ºçš„ã€‚ ææ„å‡½æ•°éœ€è¦æ¶ˆé™¤vptrã€‚vptrå¾ˆå¯èƒ½å·²ç»åœ¨æ´¾ç”Ÿç±»ææ„å‡½æ•°ä¸­è¢«è®¾å®šä¸ºæ´¾ç”Ÿç±»çš„è™šå‡½æ•°è¡¨åœ°å€ï¼Œææ„å‡½æ•°çš„è°ƒç”¨æ¬¡åºåå‘çš„ï¼Œä»æ´¾ç”Ÿç±»åˆ°åŸºç±»ã€‚ è´Ÿæ‹…ç¨‹åº¦è§†â€œè¢«å¤„ç†çš„Point2d objects çš„ä¸ªæ•°å’Œç”Ÿå‘½æœŸâ€è€Œå®šã€‚åŒæ—¶ä¹Ÿè¦è€ƒè™‘â€œå¤šæ€è®¾è®¡å–å¾—çš„æ”¶ç›Šâ€ã€‚ vpträ½ç½®é—®é¢˜ ç¼–è¯‘å™¨é¢†åŸŸæœ‰ä¸€ä¸ªè®¨è®ºç‚¹ï¼švptr æ”¾ç½®åœ¨ class object çš„å“ªä¸ªä½ç½®ã€‚ æ”¾åœ¨å°¾ç«¯ Struct no_virts\tint d1,d2;;class has_virts:public no_virts\tpublic: virtual void foo(); //...\tprivate: int d3;no_virts *p = new has_virts; å¥½å¤„ï¼šä¸ base class C struct å¯¹è±¡å¸ƒå±€ç›¸å…¼å®¹ã€‚ ä¸Šä¾‹ä¸­ï¼Œå¸¦æœ‰è™šå‡½æ•°çš„ç»§æ‰¿å¸ƒå±€ï¼ˆvptråœ¨å°¾ç«¯ï¼‰ æ”¾å¼€å¤´ vptr åœ¨ class object å‰ç«¯ï¼Œå¯¹äºå¤šé‡ç»§æ‰¿åœºæ™¯ï¼Œé€šè¿‡æŒ‡é’ˆ(æŒ‡å‘ç±»æˆå‘˜)è°ƒç”¨è™šå‡½æ•°æœ‰å¸®åŠ©ï¼š class object èµ·å§‹ç‚¹å¼€å§‹æµ‹é‡è®¡ç®—çš„ offset ä¸éœ€è¦åœ¨è¿è¡ŒæœŸå‡†å¤‡äº†ï¼›ä¸ class vptr é—´çš„ offset ä¹Ÿä¸éœ€è¦åœ¨è¿è¡ŒæœŸå‡†å¤‡ã€‚ ç¼ºç‚¹ï¼šä¸§å¤±äº†Cè¯­è¨€å…¼å®¹æ€§ã€‚ è€å®è¯´ï¼Œè¿™ç§å…¼å®¹æ— å…³ç—›ç—’ï¼Œè°ä¼šåœ¨ C struct ä¸Šæ´¾ç”Ÿå‡ºå¤šæ€ class å‘¢ï¼Ÿ å¤šé‡ç»§æ‰¿ è‡ªç„¶å¤šæ€ï¼ˆnatural polymorphismï¼‰:å•ä¸€ç»§æ‰¿ä¸­ï¼Œçˆ¶ç±»å’Œå­ç±»è½¬æ¢å¾ˆè‡ªç„¶ï¼Œå› ä¸ºå®ƒä»¬çš„ç»§æ‰¿å¯¹è±¡èµ·å§‹åœ°å€ç›¸åŒï¼Œæ‰€ä»¥çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡æ—¶ï¼Œä¸éœ€è¦ç¼–è¯‘å™¨å‚ä¸è°ƒæ•´åœ°å€ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚ non-virtual åŸºç±»ä¸‹å¦‚æœå­˜åœ¨ä¸€ä¸ªå­ç±»æœ‰ virtual functionï¼Œå°±ä¼šå¤±å»å•ä¸€ç»§æ‰¿çš„è‡ªç„¶å¤šæ€ã€‚è¿™æ—¶ï¼Œå­ç±»è½¬ä¸ºåŸºç±»ï¼Œå°±éœ€è¦ç¼–è¯‘å™¨ä»‹å…¥æ¥è°ƒæ•´åœ°å€ï¼ˆå› ä¸ºvptræ’å…¥åˆ°äº† class object çš„èµ·å§‹å¤„)ã€‚ å¤šé‡ç»§æ‰¿ä¸­ï¼Œå­ç±»å’ŒåŸºç±»çš„å…³ç³»å¹¶ä¸é‚£ä¹ˆâ€œè‡ªç„¶â€ã€‚ class Point2d\tpublic: //æœ‰è™šå‡½æ•°ï¼Œæ‰€ä»¥Point2då¯¹è±¡ä¸­æœ‰vptr\tprotected: float _x,_y;;class Point3d\tpublic: //...\tprotected: float _z;;class Vertex\tpublic: //æœ‰è™šå‡½æ•°ï¼Œæ‰€ä»¥Vertexå¯¹è±¡ä¸­æœ‰vptr\tprotected: Vertex *next;;class Vertex3d:public Point3d,public Vertex\tpublic: //...\tprotected: float mumble;; å¯¹äºè¿™ç§å¤šé‡æ´¾ç”Ÿå¯¹è±¡ï¼Œå°†å…¶åœ°å€æŒ‡å®šç»™æœ€ä¸Šå±‚çš„ base class æŒ‡é’ˆæ—¶ï¼Œæƒ…å†µå’Œå•ä¸€ç»§æ‰¿ç›¸åŒï¼ˆçˆ¶å­æŒ‡å‘ç›¸åŒåœ°å€ï¼Œæˆæœ¬åªæœ‰æŒ‡å®šåœ°å€çš„æ“ä½œï¼‰ã€‚ åç»­å­ç±»çš„åœ°å€æŒ‡å®šæ“ä½œï¼Œåˆ™éœ€è¦æ‰‹åŠ¨è°ƒæ•´åœ°å€ã€‚ Vertex3d v3d;Vertex *pv;Point2d *p2d;Point3d *p3d;\t//Point3dçš„å®šä¹‰çœ‹å›ä¸Šä¸€å°èŠ‚pv=v3d;\t//å†…éƒ¨è½¬åŒ–ä¸ºï¼špv=(Vertex*)(((char*)v3d)+sizeof(Point3d)); //Point3d åŒ…å« Point 2dã€‚p2d=v3d;\t//è¿™ä¸¤ä¸ªæ“ä½œåªéœ€è¦ç®€å•åœ°æ‹·è´åœ°å€å°±è¡Œäº†p3d=v3d;\t//å› ä¸ºPoint2då’ŒPoint3då’ŒVertex3dçš„å¯¹è±¡èµ·å§‹åœ°å€éƒ½ç›¸åŒVertex3d *pv3d;Vertex *pv;pv=pv3d;//ä¸èƒ½ç®€å•åœ°è½¬æ¢æˆä¸‹é¢è¿™æ ·ï¼Œå› ä¸ºå¦‚æœp3dä¸º0ï¼Œé‚£ä¹ˆå°†è·å¾—sizeof(Point3d)çš„å€¼ï¼Œè¿™æ˜¯é”™è¯¯çš„pv=(Vertex*)(char*)v3d+sizeof(Point3d);\t//é”™è¯¯//åº”è¯¥åŠ ä¸ªæ¡ä»¶åˆ¤æ–­åº”ä»˜ç©ºæŒ‡é’ˆæƒ…å†µï¼Œå¦‚æœæ˜¯å¼•ç”¨åˆ™ä¸éœ€è¦åŠ è¿™ä¸ªåˆ¤æ–­pv=pv3d ? (Vertex*)(char*)v3d+sizeof(Point3d):0;\t//æ­£ç¡® C++ Standard å¹¶æœªè¦æ±‚Vertex3d ä¸­çš„ base class Point3d å’Œ Vertex æœ‰ç‰¹å®šæ’åˆ—é¡ºåºã€‚ CFront å’Œè®¸å¤šç¼–è¯‘å™¨ï¼ŒæŒ‰ç…§å£°æ˜é¡ºåºæ’åˆ—ç»§æ‰¿çš„åŸºç±»ï¼šPoint3d subobject + Vertex subobject + Vertex 3d subobject ä¾æ¬¡å­˜å‚¨ã€‚ ï¼ˆåŠ ä¸Šè™šæ‹Ÿç»§æ‰¿å°±ä¸ä¸€æ ·äº†ï¼‰ å­˜å–ç¬¬äºŒå±‚ä»¥ä¸Šçš„åŸºç±»çš„ data member ï¼Œåªæ˜¯ä¸€ä¸ªç®€å•çš„ offset è¿ç®—ã€‚ è™šæ‹Ÿç»§æ‰¿è™šæ‹Ÿç»§æ‰¿çš„åº”ç”¨åœºæ™¯å¾ˆç‹­çª„ï¼Œå‡ ä¹æ˜¯ä¸ºè§£å†³å¤šé‡ç»§æ‰¿çš„é‡å¤å‰¯æœ¬è€Œç”Ÿçš„ã€‚ //å¤šé‡ç»§æ‰¿class ios//...;class istream:public ios//...;class ostream:public ios//...;class iostream:public istream,public ostream//...;//è™šæ‹Ÿç»§æ‰¿class ios//...;class istream:virtual public ios//...;class ostream:virtual public ios//...;class iostream:public istream,public ostream//...; iostream ç»§æ‰¿ istream å’Œ ostream æ—¶ï¼Œåªéœ€è¦ä¸€ä¸ª ios subobjectã€‚è§£å†³æ–¹æ³•å³è™šç»§æ‰¿ã€‚ è™šæ‹Ÿç»§æ‰¿çš„å®ç°éœ€è¦å°† ä¸¤ä¸ªåŸºç±»å„è‡ªç»´æŠ¤çš„ä¸€ä¸ª ios subobject æŠ˜å æˆä¸€ä¸ªç”±å…±åŒå­ç±»ç»´æŠ¤çš„å•ä¸€ subobjectï¼ŒåŒæ—¶ä¿å­˜å¥½åŸºç±»å’Œå­ç±»å„è‡ªçš„æŒ‡é’ˆ(å¼•ç”¨)é—´çš„å¤šæ€æŒ‡å®šæ“ä½œã€‚ Class ç»§æ‰¿ä½“ç³»å‡ºç° virtual base class subobject åï¼Œä¼šåˆ†å‰²æˆä¸¤éƒ¨åˆ†ï¼š ä¸å˜åŒºåŸŸï¼šè¿™é‡Œçš„æ•°æ®ä¸ç®¡åç»­ç»§æ‰¿çš„å˜åŒ–å¦‚ä½•ï¼Œæ‹¥æœ‰å›ºå®š offset ï¼ˆä» object å¼€å¤´ï¼‰ï¼Œå¯ç›´æ¥å­˜å–ã€‚ å…±äº«åŒºåŸŸï¼šå³virtual base class subobject éƒ¨åˆ†çš„æ•°æ®ï¼Œå…¶ä½ç½®éšç€æ¯æ¬¡çš„æ´¾ç”Ÿæ“ä½œéƒ½ä¼šæœ‰å˜åŒ–ï¼Œåªèƒ½é—´æ¥å­˜å–ã€‚ å„ç¼–è¯‘å™¨å¯¹é—´æ¥å­˜å–çš„å®ç°æŠ€æœ¯ä¸åŒã€‚ ä»¥ä¸‹æ˜¯ä¸‰ç§ v-base-class-s çš„é—´æ¥å­˜å–ç­–ç•¥ã€‚ æŒ‡é’ˆå®ç° class Point2d\tpublic: //...\tprotected: float _x,_y;;class Vertex:public virtual Point2d\tpublic: //...\tprotected: Vertex *next;;class Point3d:public virtual Point2d\tpublic: //...\tprotected: float _z;;class Vertex3d:public Vertex,public Point3d\tpublic: //...\tprotected: float mumble;; ä¸€èˆ¬çš„å¸ƒå±€ç­–ç•¥æ˜¯å…ˆå®‰æ’å¥½æ´¾ç”Ÿç±»ä¸­ä¸å˜çš„éƒ¨åˆ†ï¼Œå†å»ºç«‹å…±äº«éƒ¨åˆ†ã€‚cfrontç¼–è¯‘å™¨ä¼šåœ¨æ¯ä¸€ä¸ªæ´¾ç”Ÿç±»å¯¹è±¡ä¸­å®‰æ’ä¸€äº›æŒ‡é’ˆï¼Œæ¯ä¸ªæŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªè™šåŸºç±»ã€‚è¦å­˜å–ç»§æ‰¿å¾—æ¥çš„è™šåŸºç±»æˆå‘˜ï¼Œå¯ä»¥ä½¿ç”¨ç›¸å…³æŒ‡é’ˆé—´æ¥å®Œæˆã€‚ void Point3d::operator+=(const Point3d rhs)\t_x+=rhs._x;\t_y+=rhs._y;\t_z+=rhs._z;;//åœ¨cfrontçš„ç­–ç•¥ä¸‹ï¼Œè¿™ä¸ªè¿ç®—ç¬¦ä¼šè¢«å†…éƒ¨è½¬åŒ–ä¸ºï¼š//c++ä¼ªç _vbcPoint2d-_x += rhs_vbcPoint2d-_x;\t//vbc å³virtual base class_vbcPoint2d-_y += rhs_vbcPoint2d-_y;_z+=rhs._z;//ä¸€ä¸ªæ´¾ç”Ÿç±»å’ŒåŸºç±»çš„å®ä¾‹ä¹‹é—´çš„è½¬æ¢ï¼šPoint2d *p2d=pv3d;//åœ¨cfrontçš„å®ç°æ¨¡å‹ä¸‹ï¼Œä¼šå˜æˆï¼š//c++ä¼ªç Point2d *p2d=pv3dï¼Ÿpv3d-_vbcPoint2d:0; æ¯ä¸€ä¸ªå¯¹è±¡å¿…é¡»é’ˆå¯¹æ¯ä¸€ä¸ªè™šåŸºç±»èƒŒè´Ÿä¸€ä¸ªé¢å¤–çš„æŒ‡é’ˆï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›æ¯ä¸€ä¸ªç±»å¯¹è±¡çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œä¸å› ä¸ºå…¶è™šåŸºç±»çš„æ•°é‡è€Œå˜åŒ–ã€‚ è§£å†³æ–¹æ³•ï¼š 1ã€å¾®è½¯çš„ç¼–è¯‘å™¨é‡Œä¼šå¼•å…¥è™šåŸºç±»è¡¨ï¼ˆç±»ä¼¼äºè™šå‡½æ•°è¡¨ï¼‰ï¼Œåœ¨ç»§æ‰¿è™šåŸºç±»çš„å­ç±»å¯¹è±¡ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªè™šåŸºç±»è¡¨æŒ‡é’ˆæŒ‡å‘è™šåŸºç±»è¡¨ï¼ˆè™šåŸºç±»æŒ‡é’ˆå­˜æ”¾åœ¨è¿™äº›è¡¨æ ¼ä¸­ï¼‰ã€‚2ã€åœ¨è™šå‡½æ•°è¡¨ä¸­æ”¾ç½®è™šåŸºç±»çš„offsetï¼ˆè€Œä¸æ˜¯åœ°å€ï¼‰ã€‚ (ä½œè€…å®ç°æ—¶ï¼Œå°†è™šåŸºç±»åç§»åœ°å€å’Œè™šå‡½æ•°å…¥å£æ··æ‚åœ¨ä¸€èµ·ï¼Œé€šè¿‡æ­£è´Ÿå€¼ç´¢å¼•åŒºåˆ†è™šå‡½æ•°è¡¨ä¸­çš„åœ°å€ï¼šæ­£æ•°ç´¢å¼•åˆ°è™šå‡½æ•°ï¼Œè´Ÿæ•°æ‰€å¼•å¯¼è™šåŸºç±») ä¸‹å›¾æ˜¾ç¤ºäº†è¿™ç§base class offsetå®ç°æ¨¡å‹ï¼š void Point3d::operator+=(const Point3d rhs)//è¿™é‡Œ_vptr_Point3d[-1]å­˜æ”¾çš„æ˜¯è™šåŸºç±»è·ç¦»å¯¹è±¡èµ·å§‹åœ°å€çš„offset//thisæ˜¯å¯¹è±¡èµ·å§‹åœ°å€ï¼Œæ‰€ä»¥åŠ èµ·æ¥å°±æ˜¯è™šåŸºç±»çš„subobject(this+_vptr_Point3d[-1])-_x += (rhs + rhs._vptr_Point3d[-1])-_x;(this+_vptr_Point3d[-1])-_y += (rhs + rhs._vptr_Point3d[-1])-_y;_z+=rhs._z; ;//ä¸ºäº†å¯è¯»æ€§ï¼Œæ²¡æœ‰åšç±»å‹è½¬æ¢ï¼Œä¹Ÿæ²¡æœ‰å…ˆæ‰§è¡Œå¯¹æ•ˆç‡æœ‰å¸®åŠ©çš„åœ°å€é¢„å…ˆè®¡ç®—æ“ä½œ è¿™ç§åŠŸèƒ½çš„æˆæœ¬åªä¼šåœ¨memberä½¿ç”¨çš„è¿‡ç¨‹ä¸­æ¶ˆè€—ï¼Œæ‰€ä»¥å±äºå±€éƒ¨æ€§æˆæœ¬ï¼ˆè™½ç„¶æœ¬èº«æœ‰ç‚¹æ˜‚è´µï¼‰ã€‚ ç¤ºä¾‹ï¼š Point2d *p2d=pv3d;//åœ¨ä¸Šè¿°å®ç°æ¨¡å‹ä¸‹å˜æˆï¼šPoint2d *p2d=pv3d?pv3d+pv3d-_vptr_Point3d[-1]:0; æ¯æœ‰ä¸€å±‚è™šæ‹Ÿç»§æ‰¿ï¼Œé—´æ¥å­˜å–çš„å±‚æ¬¡å°±ä¼šåŠ ä¸€å±‚ï¼ˆä¸‰å±‚ç»§æ‰¿ï¼Œå°±è¦é€šè¿‡ä¸‰ä¸ª virtual base class æŒ‡é’ˆè¿›è¡Œä¸‰æ¬¡é—´æ¥å­˜å–ï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›æ¯æ¬¡å­˜å–æ—¶é—´éƒ½æ˜¯å›ºå®šçš„ï¼Œä¸å› ä¸ºè™šæ‹Ÿæ´¾ç”Ÿçš„æ·±åº¦è€Œæ”¹å˜ã€‚ é€šè¿‡æ‹·è´æ“ä½œå–å¾—æ‰€æœ‰åµŒå¥—è™šåŸºç±»æŒ‡é’ˆï¼Œå°†ä¹‹æ”¾åˆ°å­ç±»å¯¹è±¡ä¸­ï¼Œè¿™æ ·å°±ä¸ç”¨é—´æ¥å­˜å–äº†ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†è¿™ç§æ¨¡å‹çš„å®ç°ï¼š åŒºåˆ† éå¤šæ€çš„ class object å­˜å–ç»§æ‰¿è€Œæ¥çš„ virtual base class çš„æˆå‘˜ï¼š Point3d origin;...origin._x; å¯ç›´æ¥è¢«ä¼˜åŒ–ä¸ºç›´æ¥å­˜å–ï¼Œåœ¨è¿™æ¬¡å­˜å–å’Œä¸‹ä¸€æ¬¡å­˜å–çš„è¿‡ç¨‹ä¸­é—´ï¼Œå¯¹è±¡ç±»å‹ä¸å¯æ”¹å˜ã€‚ å¦‚åŒå¯¹è±¡è°ƒç”¨è™šå‡½æ•°å¯ä»¥åœ¨ç¼–è¯‘å™¨å®Œæˆã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œè™šåŸºç±»æœ€æœ‰æ•ˆçš„ä¸€ç§è¿ç”¨æ–¹å¼å°±æ˜¯ï¼šä¸€ä¸ªæŠ½è±¡çš„è™šåŸºç±»ï¼Œæ²¡æœ‰ä»»ä½•æ•°æ®æˆå‘˜ã€‚ 3.5 å¯¹è±¡æˆå‘˜çš„æ•ˆç‡1ã€ç›´æ¥å­˜å–å¯¹è±¡æˆå‘˜å’Œä½¿ç”¨inlineçš„Getå’ŒSetå‡½æ•°å­˜å–å¯¹è±¡æˆå‘˜ç»è¿‡ä¼˜åŒ–åæ•ˆç‡ä¸€æ ·ã€‚2ã€é™¤äº†è™šæ‹Ÿç»§æ‰¿æƒ…å†µå¤–ï¼Œ1ä¸­çš„æ•ˆç‡ä¸€æ ·ï¼ˆåŒ…æ‹¬å•ä¸€ç»§æ‰¿çš„æƒ…å†µï¼‰ã€‚éšç€è™šæ‹Ÿç»§æ‰¿å±‚æ•°å¢åŠ ï¼Œ1ä¸­å­˜å–å¯¹è±¡çš„æ—¶é—´å¢å¤§ã€‚ 3.6æŒ‡å‘æ•°æ®æˆå‘˜çš„æŒ‡é’ˆ#include pch.h#include iostreamusing namespace std;class Point3d public: ~Point3d(); void static getOffsetOfZ() printf(%d , Point3d::z);\t//8 //å› ä¸ºåŒä¸€ä¸ªacess sectioné‡Œçš„æˆå‘˜è¦æŒ‰å£°æ˜æ¬¡åºæ’åˆ—ï¼Œzå‰é¢æœ‰xå’Œy //ä¸€ä¸ªfloatæ˜¯4 bytesï¼Œè¿™é‡Œæ˜¯8è¯´æ˜vptræ”¾åœ¨å°¾ç«¯ï¼Œå¦‚æœæ˜¯æ”¾åœ¨å¤´ç«¯è¿™é‡Œçš„è¾“å‡ºåº”è¯¥æ˜¯12 bytes cout Point3d::z endl;\t//1,å› ä¸ºPoint3Dæ²¡æœ‰å®šä¹‰æ“ä½œï¼Œæ‰€ä»¥ç¼–è¯‘å™¨è¿™é‡Œè‡ª // å·±å·å·è¿›è¡Œè½¬åŒ–ï¼Œè¾“å‡ºç»“æœå°±ä¸º1 //... protected: static Point3d origin; float x, y, z;\t;int main() Point3d::getOffsetOfZ(); å®é™…ä¸Š offset å¾€å¾€æ¯” æ­£å¸¸åœ°å€ä½ç½® å¤š1ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœvptræ”¾åœ¨å¯¹è±¡å¤´ç«¯ï¼Œä¸‰ä¸ªåæ ‡å€¼åœ¨å¯¹è±¡å¸ƒå±€ä¸­çš„offsetåˆ†åˆ«æ˜¯1,5,9ï¼›å¦‚æœvptræ”¾åœ¨å¯¹è±¡å°¾ç«¯ï¼Œä¸‰ä¸ªåæ ‡å€¼åœ¨å¯¹è±¡å¸ƒå±€ä¸­çš„offsetåˆ†åˆ«æ˜¯5,9,13ã€‚ ï¼ˆåŸå› å’Œ3.3ä¸­non-staticæˆå‘˜ä¸­-1çš„åŸå› ä¸€æ ·ï¼‰ï¼šä¸ºäº†åŒºåˆ«ä¸€ä¸ªç±»æ•°æ®æˆå‘˜ç±»å‹çš„æŒ‡é’ˆæ˜¯ç©ºæŒ‡é’ˆå’ŒæŒ‡å‘ç¬¬ä¸€ä¸ªoffsetä¸º0çš„æˆå‘˜æ—¶çš„æƒ…å½¢. ç†è§£äº†æŒ‡å‘æˆå‘˜å˜é‡çš„æŒ‡é’ˆåï¼Œå°±å¯ä»¥æ˜ç¡®ä¸‹ Point3d::z å’Œ origin.z çš„å·®åˆ«äº†ã€‚ å– nonstatic data member çš„åœ°å€ï¼šå¾—åˆ°å®ƒåœ¨ç±»ä¸­çš„ offset å– ç»‘å®šåœ¨ç‰¹å®šå®ä¾‹å¯¹è±¡èº«ä¸Šçš„æˆå‘˜åœ°å€ï¼š å¾—åˆ°å®ƒåœ¨å†…å­˜ä¸­çš„çœŸæ­£ address origin.z å‡ z åç§»é‡ åŒæ—¶ åŠ  1 ï¼Œå³originèµ·å§‹åœ°å€ origin.z è¿”å›ç±»å‹ä¸º float* è€Œä¸æ˜¯ float Point3d::* åœ¨å¤šé‡ç»§æ‰¿ä¸‹ï¼Œå¦‚æœè¦å°†ç¬¬äºŒä¸ªæˆ–è€…åç»§çš„åŸºç±»æŒ‡é’ˆå’Œä¸€ä¸ªâ€œä¸æ´¾ç”Ÿç±»å¯¹è±¡ç»‘å®šâ€çš„æˆå‘˜ç»“åˆèµ·æ¥ï¼Œä¼šåœ¨åç§»é‡çš„é—®é¢˜ä¸Šå˜å¾—æ¯”è¾ƒå¤æ‚ï¼š #include pch.h#include iostreamusing namespace std;struct Base1 int val1; ;struct Base2 int val2; ;struct Derived :Base1, Base2 ;void func1(int Derived::*dmp, Derived *pd) //ç¬¬ä¸€ä¸ªå‚æ•°æœŸå¾…ä¼ å…¥çš„æ˜¯æŒ‡å‘ Derivedçš„æˆå‘˜ çš„æŒ‡é’ˆ\t//ä½†æ˜¯å¦‚æœä¼ è¿›æ¥çš„æ˜¯æŒ‡å‘ åŸºç±»çš„æˆå‘˜çš„ æŒ‡é’ˆå‘¢ï¼Ÿ\tprintf(%d , pd-*dmp);\t//-858993460void func2(Derived *pd) int Base2::* bmp = Base2::val2; //æ³¨æ„è¿™é‡Œç‰¹æ„è®¾ç½®ä¸º base2æŒ‡é’ˆè€Œébase1 pointer\tprintf(%d , bmp); //0ï¼Œpffsetä¸º0æ²¡é—®é¢˜(æ³¨æ„ï¼Œè¿™é‡Œç®—ä¸Šåç§»é‡ï¼Œbmpä¸º0+1=1)\t//ä½†æ˜¯åœ¨Derivedä¸­ï¼Œval2çš„offsetæ˜¯4 (é¢ï¼Œoffsetä¾¿æ˜¯4+1=5)\tfunc1(bmp, pd);int main() Derived d;\tfunc2(d); å½“ (æŒ‡å‘base2æˆå‘˜) å˜é‡çš„bmpè¢«ä½œä¸ºfunc1()çš„ç¬¬ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå®ƒçš„å€¼å°±å¿…é¡»å› ä»‹å…¥çš„Base1 classçš„å¤§å°è€Œè°ƒæ•´ï¼Œå¦åˆ™pd-*dmpå°†å­˜å–åˆ°Base1::val1ï¼Œè€Œä¸æ˜¯å¸Œæœ›çš„Base1:val2ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»ç»è¿‡ä»¥ä¸‹è¿‡ç¨‹ï¼š //ç»ç”±ç¼–è¯‘å™¨å†…éƒ¨è½¬æ¢func1(bmp+sizeof(Base1),pd);//è¿˜è¦é˜²èŒƒbmp==0func1(bmp?(bmp+sizeof(Base1)):0 ,pd);"},{"title":"ç¯å¢ƒå˜é‡","path":"/wiki/linux/ç¯å¢ƒå˜é‡.html","content":"ä¸‰ç§å˜é‡åœ¨ Linux ä¸­ï¼Œå˜é‡ä¾ç…§ä½œç”¨åŸŸåˆ†ä¸ºä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ç¯å¢ƒå˜é‡ã€æ™®é€šå˜é‡ã€å¯¼å‡ºå˜é‡ã€‚ ç¯å¢ƒå˜é‡å¯ä»¥ç†è§£ä¸º Windows ä¸­çš„ç¯å¢ƒå˜é‡ï¼Œåœ¨ä»»ä¸€ç»ˆç«¯æ€»å¯ä»¥ç›´æ¥è®¿é—®åˆ°ã€‚ å…¬å…±å˜é‡è¢«å­˜æ”¾åœ¨/etc/profileæ–‡ä»¶ä¸­ï¼Œç”¨æˆ·å˜é‡è¢«å­˜æ”¾åœ¨~/.profileä¸­ã€‚ cat /etc/profile æ™®é€šå˜é‡ä»…åœ¨å½“å‰è¿›ç¨‹å¯ç”¨ï¼Œåœ¨å­è¿›ç¨‹ä¸­æ— æ³•è®¿é—®ã€‚ å¯ä»¥é€šè¿‡declare {var}å£°æ˜å˜é‡æˆ–ä½¿ç”¨{var}={value}ç›´æ¥å®šä¹‰ã€‚é€šè¿‡echo ${var}æŸ¥çœ‹å˜é‡ã€‚é€šè¿‡unset {var}é‡Šæ”¾å˜é‡ã€‚ declare temptemp=333echo $tempunset temp å¯¼å‡ºå˜é‡æ˜¯ä¸´æ—¶ç¯å¢ƒå˜é‡ï¼Œå³ä¸´æ—¶å¯¼å‡ºåˆ°ç¯å¢ƒå˜é‡çš„æ™®é€šå˜é‡ã€‚å¯ä»¥é€šè¿‡export {var}å¯¹æ™®é€šå˜é‡è¿›è¡Œå¯¼å‡ºï¼Œæ­¤æ—¶å…¶å­è¿›ç¨‹ä¹Ÿå¯ä»¥è®¿é—®è¯¥å˜é‡ã€‚ å½“å‰è¿›ç¨‹ç»“æŸæ—¶ï¼Œè¯¥å¯¼å‡ºå˜é‡ä¸€å¹¶é”€æ¯ã€‚ export temp æœ‰ä¸‰ä¸ªå‘½ä»¤å¯ä»¥æŸ¥çœ‹å˜é‡ï¼š set # æ˜¾ç¤ºæ‰€æœ‰å˜é‡env # æ˜¾ç¤ºç”¨æˆ·ç›¸å…³çš„ç¯å¢ƒå˜é‡export # æ˜¾ç¤ºå¯¼å‡ºå˜é‡export å˜é‡å=å˜é‡å€¼ #ç”³æ˜å˜é‡env# æŸ¥è¯¢å˜é‡echo $å˜é‡å# å˜é‡è°ƒç”¨unset å˜é‡å #åˆ é™¤å˜é‡pstree æ ‘å½¢æ˜¾ç¤ºè¿›ç¨‹æ•°#æ²¡æœ‰è¿™æ¡å‘½ä»¤å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¸‹è½½ï¼š#yum -y install psmisc#yum provides /å‘½ä»¤ æŸ¥çœ‹æ²¡æœ‰çš„å‘½ä»¤çš„å®‰è£…åŒ… é…åˆyum -y installä½¿ç”¨ ç¯å¢ƒå˜é‡å®šä¹‰é˜è¿°ï¼šç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸­ï¼Œä¸»è¦æ˜¯å®šä¹‰å¯¹ç³»ç»Ÿçš„æ“ä½œç¯å¢ƒç”Ÿæ•ˆçš„ç³»ç»Ÿé»˜è®¤ç¯å¢ƒå˜é‡ï¼Œæ¯”å¦‚ PATHã€HISTSIZEã€PS1ã€HOSTNAMEç­‰ é»˜è®¤ç¯å¢ƒå˜é‡ã€‚ ä»¥ä¸‹å‡ ä¸ªç¯å¢ƒå˜é‡çš„é…ç½®æ–‡ä»¶æ˜¯æœ€ä¸»è¦çš„ï¼š etcprofile etcprofile.d*.sh (æŒ‡etcprofile.dä¸‹æ‰€æœ‰çš„.shç»“å°¾çš„æ–‡ä»¶) ~.bash_profile ~.bashrc etcbashrc ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶è°ƒç”¨å›¾ï¼š è¿™äº›æ˜¯åœ¨ç™»é™†çš„æ—¶å€™æŒ¨ä¸ªè°ƒç”¨ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œé¢è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç™»é™†ä¹‹åå°±ä¼šè‡ªåŠ¨è®¾ç½®å¥½ ç™»é™†è¾“å…¥å¯†ç ä¹‹åï¼Œç¬¬ä¸€æ­¥æ˜¯è¯»å–etcprofileæ–‡ä»¶etcprofileçš„ä½œç”¨ï¼šUSERå˜é‡LOGNAMEå˜é‡MAILå˜é‡PATHå˜é‡HOSTNAMEå˜é‡HISTSIZEå˜é‡umaské‡Œé¢æœ‰ä»¥ä¸Šç¯å¢ƒå˜é‡çš„é…ç½® æ¥ä¸‹æ¥ä¾¿è°ƒç”¨etcprofile.d .shæ–‡ä»¶*ç„¶åå°±æ˜¯ä¸‹é¢çš„æ–‡ä»¶ï¼Œè¯­è¨€åŒ…æ–‡ä»¶ï¼Œè¯†åˆ«ç³»ç»Ÿè‡ªå¸¦çš„è¯­è¨€ *~.bash_profileçš„ä½œç”¨è°ƒç”¨äº†.bashrcæ–‡ä»¶ã€‚åœ¨PATHå˜é‡åé¢åŠ å…¥äº†â€œ:$HOMEbinâ€ è¿™ä¸ªç›®å½•.bashrcçš„ä½œç”¨å®šä¹‰é»˜è®¤åˆ«åè°ƒç”¨etcbashrc etcbashrcçš„ä½œç”¨PS1å˜é‡umaskPATHå˜é‡ è°ƒç”¨etcprofile.d*.shæ–‡ä»¶è¿™ä¸€å—å°±æ˜¯è¿›å…¥ç•Œé¢ä»¥å†…ï¼Œåˆ‡æ¢shellç™»é™†æ–¹å¼ï¼Œè¿™ç§ä¸éœ€è¦å¯†ç ï¼Œæ‰€ä»¥å’Œå‰é¢çš„etcprofileçš„ä½œç”¨ä¸å†²çª å˜é‡æ“ä½œå˜é‡æ·»åŠ ï¼š ä»¥PATHä¸ºä¾‹ï¼Œå°†æŸè·¯å¾„æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­ã€‚ ç”±äºPATHå˜é‡ä»¥:ä½œä¸ºåˆ†éš”ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å°†:{dir}è¿½åŠ åˆ°PATHçš„æœ«å°¾ã€‚ PATH=$PATH:/home/user/dir å­—ç¬¦ä¸²æ‹¼æ¥ä¸éœ€è¦ä½¿ç”¨+ï¼Œç›´æ¥é¡ºç€å†™å³å¯ã€‚ æ³¨æ„ï¼ï¼è¿™ç§æ–¹å¼æ·»åŠ çš„ç¯å¢ƒå˜é‡æ˜¯ä¸´æ—¶çš„ï¼Œå½“å…³é—­ç»ˆç«¯æ—¶å¤±æ•ˆã€‚ æƒ³è¦è®©ç¯å¢ƒå˜é‡ä¸€ç›´ç”Ÿæ•ˆï¼Œå¯ä»¥è®©ä¸Šè¿°å‘½ä»¤åœ¨ç»ˆç«¯åˆå§‹åŒ–æ—¶æ‰§è¡Œï¼Œç»ˆç«¯åœ¨åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨ä¸€ä¸ªè„šæœ¬ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯zshï¼Œæ‰€ä»¥è¿™ä¸ªè„šæœ¬ä½äºç”¨æˆ·ä¸»ç›®å½•ä¸‹~/.zshrcã€‚ æˆ‘ä»¬å¯ä»¥ç¼–è¾‘ä»–ï¼Œå°†è¿™æ¡å‘½ä»¤æ·»åŠ è¿›å»ã€‚ echo PATH=$PATH:/home/user/dir .zshrc ä¸è¿‡å¯¹äºä¸åŒç»ˆç«¯ï¼Œè¿™ä¸ªåˆå§‹åŒ–è„šæœ¬ä¹Ÿä¸åŒï¼Œä¾‹å¦‚bashçš„åˆå§‹åŒ–è„šæœ¬æ˜¯.bashrcã€‚ å¯ä»¥é€šè¿‡cat /etc/shellsæŸ¥çœ‹å·²å®‰è£…çš„Shell cat /etc/shells ä»‹ç»ä¸€ä¸ªå‘½ä»¤echoï¼š echo string echoå¯ä»¥å°†å­—ç¬¦ä¸²è¾“å‡ºåˆ°ç»ˆç«¯ï¼Œå¦‚æœè¦è¾“å‡ºå˜é‡ï¼Œé‚£ä¹ˆå˜é‡åå‰åº”æ·»åŠ ä¸€ä¸ª$ã€‚ echoè¿˜å¯ä»¥å°†è¾“å‡ºå®šå‘è‡³æ–‡ä»¶ï¼š echo string filenameecho string filename æ˜¯ç›´æ¥è¦†ç›–æ–‡ä»¶ï¼Œæ˜¯è¿½åŠ åˆ°æ–‡ä»¶ã€‚ å˜é‡ä¿®æ”¹ å˜é‡ä¿®æ”¹æ–¹å¼ è¯´æ˜ ${å˜é‡å#åŒ¹é…å­—ä¸²} ä»å¤´å‘åå¼€å§‹åŒ¹é…ï¼Œåˆ é™¤ç¬¦åˆåŒ¹é…å­—ä¸²çš„æœ€çŸ­æ•°æ® ${å˜é‡å##åŒ¹é…å­—ä¸²} ä»å¤´å‘åå¼€å§‹åŒ¹é…ï¼Œåˆ é™¤ç¬¦åˆåŒ¹é…å­—ä¸²çš„æœ€é•¿æ•°æ® ${å˜é‡å%åŒ¹é…å­—ä¸²} ä»å°¾å‘å‰å¼€å§‹åŒ¹é…ï¼Œåˆ é™¤ç¬¦åˆåŒ¹é…å­—ä¸²çš„æœ€çŸ­æ•°æ® ${å˜é‡å%%åŒ¹é…å­—ä¸²} ä»å°¾å‘å‰å¼€å§‹åŒ¹é…ï¼Œåˆ é™¤ç¬¦åˆåŒ¹é…å­—ä¸²çš„æœ€é•¿æ•°æ® ${å˜é‡å/æ—§çš„å­—ä¸²/æ–°çš„å­—ä¸²} å°†ç¬¦åˆæ—§å­—ä¸²çš„ç¬¬ä¸€ä¸ªå­—ä¸²æ›¿æ¢ä¸ºæ–°çš„å­—ä¸² ${å˜é‡å//æ—§çš„å­—ä¸²/æ–°çš„å­—ä¸²} å°†ç¬¦åˆæ—§å­—ä¸²çš„å…¨éƒ¨å­—ä¸²æ›¿æ¢ä¸ºæ–°çš„å­—ä¸² ä¾‹å¦‚ï¼Œæˆ‘æƒ³å°†PATHå˜é‡ä¸­çš„:/home/user/diråˆ é™¤ï¼š PATH=PATH%%:/home/user/dir æ‰§è¡Œåˆå§‹åŒ–è„šæœ¬ æ›´æ”¹é…ç½®æ–‡ä»¶åï¼Œå¦‚æœæƒ³è¦ç«‹å³ç”Ÿæ•ˆï¼Œå°±è¦é‡æ–°æ‰§è¡Œä¸€éè¯¥è„šæœ¬ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨sourceå‘½ä»¤ï¼š source ./.zshrc æˆ–è€…ç›´æ¥ç®€å†™ä¸ºï¼š . ./zshrc å˜é‡è®¾ç½®è§„åˆ™å˜é‡è®¾ç½®è§„åˆ™ï¼š å˜é‡åç§°å¯ä»¥ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆ ï¼Œä½†æ˜¯ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚å¦‚æœå˜é‡åæ˜¯ â€œ2nameâ€åˆ™æ˜¯é”™è¯¯çš„ã€‚ åœ¨Bashä¸­ï¼Œå˜é‡çš„é»˜è®¤ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²å‹ ï¼Œå¦‚æœè¦è¿›è¡Œæ•°å€¼è¿ç®—ï¼Œåˆ™å¿…éœ€æŒ‡å®šå˜é‡ç±»å‹ä¸ºæ•°å€¼å‹ã€‚ é»˜è®¤å˜é‡ç±»å‹å…¨éƒ½æ˜¯å­—ç¬¦ä¸²å‹ï¼Œå’Œå…¶ä»–è¯­è¨€ä¸å¤ªä¸€æ ·ã€‚ å˜é‡ç”¨ç­‰å·è¿æ¥å€¼ï¼Œç­‰å·å·¦å³ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ å˜é‡çš„å€¼å¦‚æœæœ‰ç©ºæ ¼ï¼Œéœ€è¦ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·åŒ…æ‹¬ã€‚ åœ¨å˜é‡çš„å€¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨â€œ\\â€è½¬ä¹‰ç¬¦ã€‚ å¦‚æœéœ€è¦å¢åŠ å˜é‡çš„å€¼ï¼Œé‚£ä¹ˆå¯ä»¥è¿›è¡Œå˜é‡å€¼çš„å åŠ ã€‚ä¸è¿‡å˜é‡éœ€è¦ç”¨åŒå¼•å·åŒ…å« â€œ$å˜é‡åâ€æˆ–ç”¨${å˜é‡å}åŒ…å«ã€‚ å¦‚æœæ˜¯æŠŠå‘½ä»¤çš„ç»“æœä½œä¸ºå˜é‡å€¼èµ‹äºˆå˜é‡ ï¼Œåˆ™éœ€è¦ä½¿ç”¨åå¼•å·æˆ–$()åŒ…å«å‘½ä»¤ã€‚ ç¯å¢ƒå˜é‡åå»ºè®®å¤§å†™ï¼Œä¾¿äºåŒºåˆ†ã€‚ å˜é‡çš„åˆ†ç±»ï¼š ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ ç¯å¢ƒå˜é‡:è¿™ç§å˜é‡ä¸­ä¸»è¦ä¿å­˜çš„æ˜¯å’Œç³»ç»Ÿæ“ä½œç¯å¢ƒç›¸å…³çš„æ•°æ®ã€‚ ä½ç½®å‚æ•°å˜é‡:è¿™ç§å˜é‡ä¸»è¦æ˜¯ç”¨æ¥å‘è„šæœ¬å½“ ä¸­ä¼ é€’å‚æ•°æˆ–æ•°æ®çš„ï¼Œå˜é‡åä¸èƒ½è‡ªå®šä¹‰ï¼Œå˜é‡ä½œç”¨æ˜¯å›ºå®šçš„ã€‚ é¢„å®šä¹‰å˜é‡:æ˜¯Bashä¸­å·²ç»å®šä¹‰å¥½çš„å˜é‡ï¼Œå˜é‡åä¸èƒ½è‡ªå®šä¹‰ï¼Œå˜é‡ä½œç”¨ä¹Ÿæ˜¯å›ºå®šçš„ã€‚ å˜é‡åˆ’åˆ†ç³»ç»Ÿå¸¸è§ç¯å¢ƒå˜é‡ç³»ç»Ÿå¸¸è§ç¯å¢ƒå˜é‡ PATH:ç³»ç»ŸæŸ¥æ‰¾å‘½ä»¤çš„è·¯å¾„è¿™ä¾¿æ˜¯è¾“å…¥å‘½ä»¤ä¹‹å‰ä¸ç”¨è¾“å…¥ç»å¯¹è·¯å¾„çš„æ ¹æœ¬åŸå› ï¼Œç³»ç»Ÿä¼šæå‰åœ¨PATHç¯å¢ƒå˜é‡é‡Œçš„æ‰€æœ‰è·¯å¾„ä¸­æŸ¥è¯¢ä¸€éæœ‰æ²¡æœ‰ä½ è¾“å…¥çš„å‘½ä»¤ï¼Œæ‰¾åˆ°ä¹‹åç›´æ¥æ‰§è¡Œã€‚ å¦‚æœä½ æƒ³ç›´æ¥æ‰§è¡Œshellè„šæœ¬ï¼Œä¸åŠ ç»å¯¹è·¯å¾„ï¼Œç›´æ¥å†™å…¥PATHç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨å åŠ ã€‚ ä¾‹å­ï¼š echo $PATHPATH=$PATH:/root/sh #PATHå˜é‡å åŠ  æ­¤åï¼Œrootshè·¯å¾„é‡Œé¢çš„æ‰§è¡Œæ–‡ä»¶éƒ½å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹ç›´æ¥æ‰§è¡Œï¼Œä¸è¿‡æ˜¯ä¸´æ—¶ç”Ÿæ•ˆ PS1ï¼šå®šä¹‰ç³»ç»Ÿæç¤ºç¬¦çš„å˜é‡ ç”¨æ¥æ”¹[root@localhost ~]# è¿™ä¸ªæ˜¾ç¤º ä¸‹é¢æ˜¯ç³»ç»Ÿæç¤ºç¬¦çš„å˜é‡ï¼š \\d:æ˜¾ç¤ºæ—¥æœŸï¼Œæ ¼å¼ä¸ºâ€œæ˜ŸæœŸ æœˆ æ—¥â€ \\h:æ˜¾ç¤ºç®€å†™ä¸»æœºåã€‚å¦‚é»˜è®¤ä¸»æœºåâ€œlocalhostâ€ \\t:æ˜¾ç¤º24å°æ—¶åˆ¶æ—¶é—´ï¼Œæ ¼å¼ä¸ºâ€œHH:MM:SSâ€ \\T:æ˜¾ç¤º12å°æ—¶åˆ¶æ—¶é—´ï¼Œæ ¼å¼ä¸ºâ€œHH:MM:SSâ€ \\A:æ˜¾ç¤º24å°æ—¶åˆ¶æ—¶é—´ï¼Œæ ¼å¼ä¸ºâ€œHH:MMâ€ \\u:æ˜¾ç¤ºå½“å‰ç”¨æˆ·å \\w:æ˜¾ç¤ºå½“å‰æ‰€åœ¨ç›®å½•çš„å®Œæ•´åç§° \\W:æ˜¾ç¤ºå½“å‰æ‰€åœ¨ç›®å½•çš„æœ€åä¸€ä¸ªç›®å½• #:æ‰§è¡Œçš„ç¬¬å‡ ä¸ªå‘½ä»¤ $:æç¤ºç¬¦ã€‚å¦‚æœæ˜¯rootç”¨æˆ·ä¼šæ˜¾ç¤ºæç¤ºç¬¦ä¸ºâ€œ#â€ï¼Œå¦‚æœæ˜¯æ™®é€šç”¨æˆ· ä¼šæ˜¾ç¤ºæç¤ºç¬¦ä¸ºâ€œ$â€ ä½ç½®å‚æ•°å˜é‡åœ¨è„šæœ¬ä¸­ä¸»è¦é’ˆå¯¹å‚æ•°çš„ä¸€äº›å˜é‡æ“ä½œã€‚ ä½ç½®å‚æ•° å˜é‡ ä½œç”¨ $n nä¸ºæ•°å­—ï¼Œ$0ä»£è¡¨å‘½ä»¤æœ¬èº«ï¼Œ$1-9 ä»£ è¡¨ ç¬¬ ä¸€ åˆ° ç¬¬ ä¹ ä¸ª å‚ æ•° ï¼Œ å ä»¥ ä¸Š çš„ å‚ æ•° éœ€ è¦ ç”¨ å¤§ æ‹¬ å· åŒ… å« ï¼Œ å¦‚ 9ä»£è¡¨ç¬¬ä¸€ åˆ°ç¬¬ä¹ä¸ªå‚æ•°ï¼Œåä»¥ä¸Šçš„å‚æ•°éœ€è¦ç”¨å¤§æ‹¬å· åŒ…å«ï¼Œå¦‚9ä»£è¡¨ç¬¬ä¸€åˆ°ç¬¬ä¹ä¸ªå‚æ•°ï¼Œåä»¥ä¸Šçš„å‚æ•°éœ€è¦ç”¨å¤§æ‹¬å·åŒ…å«ï¼Œå¦‚{10}. $* è¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œ$*æŠŠæ‰€ æœ‰çš„å‚æ•°çœ‹æˆä¸€ä¸ªæ•´ä½“ $@ è¿™ä¸ªå˜é‡ä¹Ÿä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œä¸è¿‡ $@æŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾… $# è¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰å‚æ•°çš„ä¸ªæ•° ä¸¾ä¾‹ï¼š #$nçš„ä¾‹å­:ä¸€ä¸ªåŠ æ³•å™¨num1=$1num2=$2sum=$(( $num1 + $num2)) #å˜é‡sumçš„å’Œæ˜¯num1åŠ num2 echo $sum #æ‰“å°å˜é‡sumçš„å€¼echo $sum é¢„å®šä¹‰å˜é‡ é¢„å®šä¹‰å˜é‡ ä½œç”¨ $? æœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤çš„è¿”å›çŠ¶æ€ã€‚å¦‚æœè¿™ä¸ªå˜ é‡çš„å€¼ä¸º0ï¼Œè¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ­£ç¡®æ‰§è¡Œ;å¦‚æœ è¿™ä¸ªå˜é‡çš„å€¼ä¸ºé0(å…·ä½“æ˜¯å“ªä¸ªæ•°ï¼Œç”±å‘½ä»¤ è‡ªå·±æ¥å†³å®š)ï¼Œåˆ™è¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œä¸æ­£ç¡® äº†ã€‚ $$ å½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·(PID) $! åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·(PID) echo â€œThe current process is $$â€#è¾“å‡ºå½“å‰è¿›ç¨‹çš„PIDã€‚#è¿™ä¸ªPIDå°±æ˜¯variable.shè¿™ä¸ªè„šæœ¬æ‰§è¡Œæ—¶ï¼Œç”Ÿæˆçš„è¿›ç¨‹çš„PIDfind /root -name hello.sh #ä½¿ç”¨findå‘½ä»¤åœ¨rootç›®å½•ä¸‹æŸ¥æ‰¾hello.shæ–‡ä»¶ #ç¬¦å·çš„æ„æ€æ˜¯æŠŠå‘½ä»¤æ”¾å…¥åå°æ‰§è¡Œï¼Œå·¥ä½œç®¡ç†åœ¨ç³»ç»Ÿç®¡ç†ç« èŠ‚ä¼šè¯¦ç»†ä»‹ç»echo The last one Daemon process is $! æ¥å—é”®ç›˜è¾“å…¥ read [é€‰é¡¹] [å˜é‡å] -p â€œæç¤ºä¿¡æ¯â€:åœ¨ç­‰å¾…readè¾“å…¥æ—¶ï¼Œè¾“å‡ºæç¤ºä¿¡æ¯ -t ç§’æ•°: readå‘½ä»¤ä¼šä¸€ç›´ç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼Œä½¿ç”¨ æ­¤é€‰é¡¹å¯ä»¥æŒ‡å®šç­‰å¾…æ—¶é—´ -n å­—ç¬¦æ•°:readå‘½ä»¤åªæ¥å—æŒ‡å®šçš„å­—ç¬¦æ•°ï¼Œå°±ä¼šæ‰§è¡Œ -s: éšè—è¾“å…¥çš„æ•°æ®ï¼Œé€‚ç”¨äºæœºå¯†ä¿¡æ¯çš„è¾“å…¥ å…¶ä»–é…ç½®æ–‡ä»¶å’Œç™»å½•ä¿¡æ¯æ³¨é”€æ—¶ç”Ÿæ•ˆçš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ ~.bash_logoutæ³¨é”€ç™»é™†æ—¶å†™å…¥ å…¶ä»–é…ç½®æ–‡ä»¶ ~bash_history å†å²å‘½ä»¤æ–‡ä»¶ Shellç™»å½•ä¿¡æ¯ æœ¬åœ°ç»ˆç«¯æ¬¢è¿ä¿¡æ¯: etcissue è½¬ä¹‰ç¬¦ ä½œç”¨ \\d æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¥æœŸ \\s æ˜¾ç¤ºæ“ä½œç³»ç»Ÿåç§° \\l æ˜¾ç¤ºç™»å½•çš„ç»ˆç«¯å·ï¼Œè¿™ä¸ªæ¯”è¾ƒå¸¸ç”¨ã€‚ \\m æ˜¾ç¤ºç¡¬ä»¶ä½“ç³»ç»“æ„ï¼Œå¦‚i386ã€i686ç­‰ æ˜¾ç¤ºä¸»æœºå \\o æ˜¾ç¤ºåŸŸå \\r æ˜¾ç¤ºå†…æ ¸ç‰ˆæœ¬ \\t æ˜¾ç¤ºå½“å‰ç³»ç»Ÿæ—¶é—´ \\u æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·çš„åºåˆ—å· è¿œç¨‹ç»ˆç«¯æ¬¢è¿ä¿¡æ¯:/etc/issue.net è½¬ä¹‰ç¬¦åœ¨etcissue.netæ–‡ä»¶ä¸­ä¸èƒ½ä½¿ç”¨ã€‚ æ˜¯å¦æ˜¾ç¤ºæ­¤æ¬¢è¿ä¿¡æ¯ï¼Œç”±sshçš„é…ç½®æ–‡ä»¶ /etc/ssh/sshd_configå†³å®šï¼ŒåŠ å…¥â€œBanner etcissue.netâ€è¡Œæ‰èƒ½æ˜¾ç¤º(è®°å¾—é‡å¯SSHæœåŠ¡)ã€‚ ç™»é™†åæ¬¢è¿ä¿¡æ¯:/etc/motdä¸ç®¡æ˜¯æœ¬åœ°ç™»å½•ï¼Œè¿˜æ˜¯è¿œç¨‹ç™»å½•ï¼Œéƒ½å¯ä»¥æ˜¾ç¤ºæ­¤æ¬¢è¿ä¿¡æ¯ã€‚ å˜é‡è¿ç®—declare å£°æ˜å˜é‡ç±»å‹ declare [+/-][é€‰é¡¹] å˜é‡å -: ç»™å˜é‡è®¾å®šç±»å‹å±æ€§ +: å–æ¶ˆå˜é‡çš„ç±»å‹å±æ€§ -i: å°†å˜é‡å£°æ˜ä¸ºæ•´æ•°å‹(integer) set-x: å°†å˜é‡å£°æ˜ä¸ºç¯å¢ƒå˜é‡ -p: æ˜¾ç¤ºæŒ‡å®šå˜é‡çš„è¢«å£°æ˜çš„ç±»å‹ æ•°å€¼è¿ç®— æ•°å€¼è¿ç®— aa=11bb=22 #ç»™å˜é‡aaå’Œbbèµ‹å€¼declare -i cc=$aa+$bb expræˆ–letæ•°å€¼è¿ç®—å·¥å…· aa=11bb=22 #ç»™å˜é‡aaå’Œbbèµ‹å€¼dd=$(expr $aa + $bb)# ddçš„å€¼æ˜¯aaå’Œbbçš„å’Œã€‚æ³¨æ„â€œ+â€å·å·¦å³ä¸¤ ä¾§å¿…é¡»æœ‰ç©ºæ ¼ letä¸exprä¸€æ ·ã€‚ â€œ$((è¿ç®—å¼))â€æˆ–â€œ$[è¿ç®—å¼]â€ aa=11bb=22 ç»™å˜é‡aaå’Œbbèµ‹å€¼ff=$(( $aa+$bb ))gg=$[ $aa+$bb ] ä¼˜å…ˆçº§è¡¨ï¼š ä¼˜å…ˆçº§\tè¿ç®—ç¬¦\tè¯´æ˜13\t-, +\tå•ç›®è´Ÿã€å•ç›®æ­£12\t!, ~\té€»è¾‘éã€æŒ‰ä½å–åæˆ–è¡¥ç 11\t,, %\tä¹˜ã€é™¤ã€å–æ¨¡10\t+, -\tåŠ ã€å‡9 , æŒ‰ä½å·¦ç§»ã€æŒ‰ä½å³ç§»8 , , , å°äºæˆ–ç­‰äºã€å¤§äºæˆ–ç­‰äºã€å°äºã€å¤§äº7 , !\tç­‰äºã€ä¸ç­‰äº6 æŒ‰ä½ä¸5\t^\tæŒ‰ä½å¼‚æˆ–4\t|\tæŒ‰ä½æˆ–3 é€»è¾‘ä¸2\t||\té€»è¾‘æˆ–1\t,+,-,,,%,, ^,èµ‹å€¼ã€è¿ç®—ä¸”èµ‹å€¼ |, , å˜é‡æµ‹è¯•ä¸æ›¿æ¢ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå˜é‡åˆ°åº•æœ‰æ²¡æœ‰è®¾ç½®ï¼Œæµ‹è¯•è¡¨ï¼š å˜å˜é‡ç½®æ¢æ–¹å¼\tå˜é‡yæ²¡æœ‰è®¾ç½®\tå˜é‡yä¸ºç©ºå€¼\tå˜é‡yè®¾ç½®å€¼x${y-æ–°å€¼}\txæ–°å€¼\txä¸ºç©º\tx$yx${y:-æ–°å€¼}\txæ–°å€¼\txæ–°å€¼ x$y\tx${y+æ–°å€¼}\txä¸ºç©º\txæ–°å€¼\txæ–°å€¼x${y:+æ–°å€¼}\txä¸ºç©º\txä¸ºç©º\txæ–°å€¼x${yæ–°å€¼}\txæ–°å€¼ yæ–°å€¼\txä¸ºç©º yå€¼ä¸å˜\tx$y yå€¼ä¸å˜x${y:æ–°å€¼}\txæ–°å€¼ yæ–°å€¼\txæ–°å€¼ yæ–°å€¼\tx$y yå€¼ä¸å˜x${y?æ–°å€¼}\tæ–°å€¼è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯è¾“å‡º(å°±æ˜¯å±å¹•)\txä¸ºç©º\tx$yx${y:?æ–°å€¼}\tæ–°å€¼è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯è¾“å‡º\tæ–°å€¼è¾“å‡ºåˆ°æ ‡å‡†é”™è¯¯è¾“\tx$y ä¾‹å­ï¼šæµ‹è¯•x${y-æ–°å€¼} æµ‹è¯•yå˜é‡å­˜ä¸å­˜åœ¨ unset y åˆ é™¤å˜é‡yx=$y-new è¿›è¡Œæµ‹è¯•echo $x æ˜¾ç¤ºnewï¼Œyå˜é‡ä¸å­˜åœ¨å› ä¸ºå˜é‡yä¸å­˜åœ¨ï¼Œæ‰€ä»¥xnew y= ç»™å˜é‡yèµ‹å€¼ä¸ºç©ºx=$y-new è¿›è¡Œæµ‹è¯•echo $x æ˜¾ç¤ºç©ºï¼Œyä¸ºç©ºå€¼ y=old ç»™å˜é‡yèµ‹å€¼x=$y-new è¿›è¡Œæµ‹è¯•echo $x æ˜¾ç¤ºold ï¼Œyå˜é‡å­˜åœ¨ä¸”æœ‰å€¼ åœ¨ç”¨åˆ°çš„æ—¶å€™æŸ¥è¯¢å°±å¥½ï¼Œä¸éœ€è¦æ­»è®°ç¡¬èƒŒã€‚è¿™ä¸ªè¡¨æ˜¯åœ¨å†™è„šæœ¬çš„æ—¶å€™ç»™ç”µè„‘ç¨‹åºçœ‹çš„ï¼Œäººä¸å‚ä¸å…¶ä¸­"},{"title":"inside object model2","path":"/wiki/cpp/inside object model2.html","content":"ç¬¬å››ç«  Function è¯­æ„å­¦ (The Semantics of Function)å‰è¨€ï¼š float Point3d::magnitude()const return sqrt(_x*_x + _y*_y + _z*_z);Point3d Point3d::normalize()const /*\tç”¨registerè¯´æ˜çš„å±€éƒ¨å˜é‡ç§°ä¸ºå¯„å­˜å™¨å˜é‡ï¼Œè¯¥å˜é‡å°†å¯èƒ½ä»¥å¯„å­˜å™¨ä½œä¸ºå­˜å‚¨ç©ºé—´ã€‚\tregisterè¯´æ˜ä»…èƒ½å»ºè®®ï¼ˆè€Œéå¼ºåˆ¶ï¼‰ç³»ç»Ÿä½¿ç”¨å¯„å­˜å™¨ï¼Œè¿™æ˜¯å› ä¸ºå¯„å­˜å™¨è™½ç„¶å­˜å–é€Ÿ\tåº¦å¿«ï¼Œä½†ä¸ªæ•°æœ‰é™ï¼Œå½“å¯„å­˜å™¨ä¸å¤Ÿç”¨æ—¶ï¼Œè¯¥å˜é‡ä»æŒ‰autoå˜é‡å¤„ç†ã€‚\t*/\tregister float mag = magnitude();\tPoint3d normal;\tnormal._x = _x / mag;\tnormal._y = _y / mag;\tnormal._z = _z / mag;\treturn normal; ä¸‹é¢æˆ‘ä»¬è¿›è¡Œæ“ä½œï¼š Point3d obj;Point3d *ptr=obj;//What Will Happen?obj.normalize();ptr-normalize(); è¿™é‡Œè¿˜æ— æ³•ç¡®å®šå®é™…çš„æ“ä½œã€‚ C++æ”¯æŒä¸‰ç§å‡½æ•°è°ƒç”¨ï¼šstatic func , nontatic func , virtual func ã€‚ æ¯ç§æ–¹å¼éƒ½ä¸åŒï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦åŒºåˆ†çš„ã€‚ è¿™é‡Œå¯ä»¥ç¡®å®š normalize() å’Œ magnitude() ä¸¤å‡½æ•°ç»ä¸æ˜¯ staicã€‚ åŸå› ï¼š å¯ä»¥ç›´æ¥å­˜å– nonstatic æ•°æ® å®ƒè¢«å£°æ˜ä¸ºäº†const æ³¨é‡Šï¼šstatic æ•°æ®æ²¡æœ‰éšå¼ this æŒ‡é’ˆï¼ŒåŒç† static æˆå‘˜ä¸æ˜¯ä»»ä½•å¯¹è±¡çš„æˆåˆ†ï¼ˆå…ƒç´ ï¼‰ï¼Œæ²¡æœ‰ const å¯¹åº”çš„â€œä¸ä¿®æ”¹æ‰€å±å¯¹è±¡çš„æˆå‘˜å±æ€§â€ä¸€è¯´ã€‚ 4.1Member çš„ä¸‰ç§è°ƒç”¨æ–¹å¼Nonstatic Member Function1.nonstatic æˆå‘˜å‡½æ•°è‡³å°‘å’Œ nonmember function æœ‰ç›¸åŒæ•ˆç‡ è¾¾æˆè¿™ä¸ªæ•ˆæœï¼Œæ˜¯å› ä¸ºç¼–è¯‘å™¨å†…éƒ¨å·²å°† æˆå‘˜å‡½æ•° è½¬æ¢æˆäº†å¯¹ç­‰çš„ non-member å‡½æ•° ä¸¾ä¸ªä¾‹å­å§ï¼š float magnitude3d(const Point3d *_this) return sqrt(_this-_x*_this-_x + _this-_y*_this-_y + _this-_z*_this-_z); åå·®ï¼šåˆ©ç”¨ this æŒ‡é’ˆ ä¸æ–­é—´æ¥å–ç”¨åæ ‡æˆå‘˜å¥½åƒé™ä½äº†æ•ˆç‡ï¼Œä¸åŒäºéæˆå‘˜å‡½æ•°çš„ç›´æ¥å–ç”¨ã€‚ è½¬åŒ–æ­¥éª¤ï¼š æ”¹å†™å‡½æ•°åŸå‹ï¼ˆsignature)ï¼Œå®‰æ’ä¸€ä¸ª thisæŒ‡é’ˆ ä½œä¸ºé¢å¤–å‚æ•°åˆ°æˆå‘˜å‡½æ•°ä¸­ï¼Œä»è€Œä½¿ç±»å¯¹è±¡è¢«ç›´æ¥è°ƒç”¨ã€‚ const æˆå‘˜å‡½æ•°ï¼Œå…¶é¢å¤–å‚æ•° this æŒ‡é’ˆåŒæ ·æ˜¯ const *this pointerã€‚ å°†åç»­æ“ä½œä¸­æ¶‰åŠå­˜å– nonstatic data member çš„ï¼Œæ”¹ä¸ºé€šè¿‡ this æŒ‡é’ˆå­˜å–ã€‚ return sqrt(_this-_x*_this-_x + _this-_y*_this-_y + _this-_z*_this-_z); å°†æˆå‘˜å‡½æ•°é‡æ–°å†™æˆä¸€ä¸ªå¤–éƒ¨å‡½æ•° ä¸ºäº†é˜²æ­¢é‡åï¼Œå‡½æ•°åä¼šç»è¿‡ mangling å¤„ç†ï¼Œæˆä¸ºç»ä¸ä¼šé‡åçš„è¯ã€‚ extern magnitude__7Point3dFv( register Point3d *const this); æˆå‘˜å‡½æ•°è½¬æ¢ä¸ºå¤–éƒ¨å‡½æ•°ï¼Œæ„å‘³ç€è°ƒç”¨æ“ä½œä¹Ÿå®Œæˆäº†è½¬æ¢ï¼š obj.magnitude();å˜æˆäº†magnitude__7Point3dFv(obj); ptr-magnitude();å˜æˆäº†magnitude__7Point3dFv(ptr); è¿™æ—¶å›åˆ°åŸé¢˜ï¼šnormalizeå‡½æ•°çš„è°ƒç”¨é—®é¢˜ã€‚ //ä¼ªç void normalize__7Point3dFv(register const Point3d *const this,\tPoint3d __result) register float mag = this-magnitude();\t__result.Point3d::Point3d();//default constructor\t__result._x = this- _x / mag;\t__result._x = this- _x / mag;\t__result._x = this- _x / mag;\treturn; è¿™æ˜¯è½¬å˜æƒ…å†µä¹‹ä¸€ã€‚ å¦å¤–ä¸€ç§æƒ…å†µæ˜¯åˆ©ç”¨Point3dçš„æ„é€ å‡½æ•°æ„é€ åŒ¿åå¯¹è±¡ç®€åŒ–æ“ä½œï¼š Point3d::Point3d::normalize()const register float mag = magnitude();\treturn Point3d(_x / mag, _y / mag, _z / mag); è½¬åŒ–(å‡è®¾æ‹·è´æ„é€ ç›¸å…³æ“ä½œå·²å®Œæˆï¼ŒNRVä¼˜åŒ–^1ä¹Ÿå·²å®ç°)ï¼š void normalize__7Point3dFv(register const Point3d *const this, Point3d __result) //è°ƒç”¨æ‹·è´æ„é€ å‡½æ•°\t__result.Point3d::Point3d(this-_x / mag, this-_y / mag, this-_z / mag);\treturn; èŠ‚çœäº†é»˜è®¤æ„é€ åˆå§‹åŒ–çš„é¢å¤–è´Ÿæ‹…ã€‚ 2.åç§°çš„ç‰¹æ®Šå¤„ç†ï¼ˆName Mangling) ç¼–è¯‘å™¨çš„å¤„ç†ä¸‹ï¼Œé€šå¸¸æˆå‘˜åç§°å‰ä¼šè¢«åŠ ä¸Šç±»åç§°ã€‚ class Barpublic: int ival;//æˆå‘˜ ival ç»è¿‡Name Mangling åçš„å¯èƒ½ç»“æœï¼šival_3Bar Name Manglingçš„åŸå› ï¼šä¾¿äºåŒºåˆ†é‡åå˜é‡ã€‚ 1.å­ç±»ç»§æ‰¿æ—¶é‡å class Foo:public Barpublic:int ival; å­ç±»Fooå’Œçˆ¶ç±»å‘ç”Ÿæˆå‘˜å˜é‡é‡åçš„æƒ…å†µï¼›ç¼–è¯‘å™¨ä¸ºäº†åŒºåˆ†ä¼šå¤„ç†åç§°ï¼š class Foo public: int ival_3Bar; int ival_3Foo; 2.æˆå‘˜å‡½æ•°é‡è½½æ—¶é‡å class Point public:\tvoid x(float newX);\tfloat x();; ç®€å•è½¬æ¢ä¸º class Point public:\tvoid x__5Point(float newX); float x__5Point(); ;//ä¼šå¯¼è‡´è¢«é‡è½½çš„å‡½æ•°å®ä¾‹æ‹¥æœ‰ç›¸åŒåç§°ã€‚//ä¸ºäº†åŒºåˆ†ï¼Œè¿˜éœ€è¦åŠ ä¸Šå®ƒä»¬çš„å‚æ•°é“¾è¡¨ï¼ŒåŒæ—¶æŠŠå‚æ•°ç±»å‹ä¹Ÿç¼–ç è¿›å»ï¼Œå°±èƒ½å¤Ÿé˜²æ­¢é‡å¤ã€‚class Point public:\tvoid x__5PointFf(float newX);\tfloat x__5PointFv();; è¿™å°±æ˜¯cfrontçš„ç¼–ç æ–¹æ³•ã€‚ç›®å‰è¿˜æ²¡æœ‰Name Mangling çš„å·¥ä¸šæ ‡å‡†ç»Ÿä¸€è¿™ä¸€è¡Œä¸ºã€‚ Name Mangling èƒ½å®ç°æœ‰é™çš„ç±»å‹æ£€éªŒï¼š å£°æ˜å’Œå®šä¹‰ä¸¤éƒ¨åˆ†å‚æ•°ç±»å‹ä¸ä¸€è‡´çš„å‡½æ•°ï¼Œä¼šäº§ç”Ÿä¸åŒçš„ç¼–ç åç§°ï¼Œè¿™å°±ä¼šå¯¼è‡´é“¾æ¥æ—¶æœŸæ— æ³• resolved è€Œå¤±è´¥ã€‚ æœ‰é™ä¹‹å¤„åœ¨äºå®ƒåªèƒ½æ¶‰è¶³å‡½æ•°ç­¾åï¼ˆsignatureï¼‰ï¼Œä¸èƒ½æ£€æµ‹è¿”å›å€¼ã€‚ æ‹“å±•ï¼š ç°åœ¨çš„ç¼–è¯‘ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€ç§ demangling å·¥å…·ï¼Œèƒ½æŠŠç¼–ç åçš„åç§°è½¬æ¢å›å»ã€‚è¿™ä¸ªç³»ç»Ÿå†…ä¼šå­˜å‚¨ä¸¤ç§åç§°ï¼šâ€mangled ä¹‹å‰â€œå’Œâ€mangled ä¹‹åâ€ã€‚ **è¿™ä¼šå¯¼è‡´ä¸€ç§è¯¯å¯¼è¡Œä¸ºï¼š**ç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯æç¤ºæ—¶ï¼Œä½¿ç”¨æºç åç§°ï¼›é“¾æ¥å™¨å´ä½¿ç”¨ç¼–ç åçš„å†…éƒ¨åç§°ã€‚ æŠŠå†…éƒ¨åç§°ï¼ˆmangled ç¼–ç åï¼‰ç»™ user çœ‹ä¼šè®© user ä¸€å¤´é›¾æ°´ã€‚ Virtual Member Functionç¬¬ä¸‰ç« è®²è¿‡ï¼Œå¦‚æœnormalize()æ˜¯ä¸ªè™šæ‹Ÿæˆå‘˜å‡½æ•°: ptr-normalize()//converse to (*ptr-vptr[1])(ptr);register float mag = (*this-vptr[2])(this);//converse to register float mag = (*this-vptr[2])(this); vptr : æŒ‡å‘ virtual table çš„æŒ‡é’ˆï¼Œç”±ç¼–è¯‘å™¨äº§ç”Ÿå®‰æ’åœ¨ virtual function -involved class ä¸­ã€‚ vpträ¹Ÿä¼šè¢« name mangling å¤„ç†ã€‚ 1 æ˜¯ virtual table slot ç´¢å¼•å€¼ï¼Œå…³è”åˆ° normalize ç¬¬äºŒä¸ª ptr è¡¨ç¤º this æŒ‡é’ˆã€‚ è¿™é‡Œè¿˜ä¸æ˜¯æœ€ç»ˆç‰ˆæœ¬ï¼Œå› ä¸ºè¿™æ®µä»£ç è¿˜æœ‰å€¼å¾—ä¼˜åŒ–çš„åœ°æ–¹ï¼š åœ¨ä¸Šé¢çš„ code segmeng ä¸­ï¼Œmagnitude() æ˜¯åœ¨ normalize() ä¸­è¢«è°ƒç”¨çš„ï¼Œåè€…ç”±è™šæ‹Ÿæœºåˆ¶ resolved åï¼Œå¯ä»¥ç›´æ¥æ˜¾å¼è°ƒç”¨ Point3d å®ä¾‹ä¸­çš„ magnitude å‡½æ•°ã€‚ å¤§å®¶éƒ½åœ¨ä¸€ä¸ªç±»ä¸­ï¼Œæˆ‘åˆå¤„åœ¨ä½ çš„ä½œç”¨åŸŸé‡Œã€‚ register float mag=Point3d::magnitude();//ç›´æ¥è°ƒç”¨ç®—äº†ï¼Œè¿™èƒ½å›é¿ä¸å¿…è¦çš„è™šæ‹Ÿæœºç»‡é‡å¤è°ƒç”¨æ“ä½œ è¿˜å¯ä»¥ç»§ç»­ä¼˜åŒ–ï¼šå°† magnitude() å£°æ˜ä¸º inline å‡½æ•°ã€‚è¿™æ ·ä¸€æ¥ä»£ç ä¼šå˜æˆï¼š reginster float mag = magnitude__7Point3dFv(this); //mangled nameï¼ é€šè¿‡ this æŒ‡é’ˆæŒ‡å‡ºå¯¹è±¡æ‰€åœ¨ä½ç½®çš„åŒæ—¶è°ƒç”¨è™šå‡½æ•°ï¼Œresolve çš„çŠ¶æ€ä¼šå’Œéé™æ€æˆå‘˜å‡½æ•°ä¸€æ ·ï¼ å¦å¤–ï¼Œå¯¹äºå‡½æ•° obj.normalize()è½¬æ¢æˆ(* obj.vptr[1])(obj)çš„æ„ä¹‰ä¸å¤§ã€‚ å› ä¸ºè¿™ä¸ªæƒ…å†µä¸­çš„ç±»å¯¹è±¡å¹¶ä¸æ”¯æŒå¤šæ€ï¼Œæ‰€ä»¥é€šè¿‡ obj å®ä¾‹è°ƒç”¨çš„å‡½æ•°åªèƒ½æ˜¯ Point3d::normalize()ã€‚ é€šè¿‡ç±»å¯¹è±¡è°ƒç”¨è™šå‡½æ•°ï¼Œä¼šè¢«ç¼–è¯‘å™¨å¦‚åŒå¯¹å¾…éé™æ€æˆå‘˜å‡½æ•°ä¸€æ ·ï¼Œè¿…é€Ÿå®Œæˆ resolved ï¼Œæˆä¸ºå¸¦å¯¹è±¡å‚æ•°çš„æ™®é€šå‡½æ•°è°ƒç”¨ã€‚ æ­¤æ—¶ï¼Œè¿™ä¸ªè™šå‡½æ•°è¿˜æˆä¸ºäº† inlined function å®ä¾‹ï¼Œèƒ½å¤Ÿåœ¨åç»­åº”ç”¨ä¸­å¹¿æ³›æ‰©å±•ï¼Œæé«˜æ•ˆç‡ã€‚ obj.normalize(); //not to (* obj.vptr[1])(obj) //converse to normalize__7Point3dFv(obj); Static Member Function//å¦‚æœPoint3d::normalize()æ˜¯ä¸€ä¸ªstatic member functionï¼Œä»¥ä¸‹ä¸¤ä¸ªè°ƒç”¨æ“ä½œï¼šobj.normalize();ptr-normalize();//å°†è¢«è½¬æ¢ä¸ºä¸€èˆ¬çš„nonmemberå‡½æ•°è°ƒç”¨ï¼Œ//obj.normalize()â†“normalize__7Point3dSFv();//ptr-normalize()â†“normalize__7Point3dSFv(); å¯¹é™æ€æˆå‘˜å‡½æ•°çš„å¤„ç†ï¼Œè¦åˆ†ä¸ºâ€œå¼•å…¥é™æ€æˆå‘˜å‡½æ•°å‰â€ï¼ˆcfront2.0å¼•å…¥ï¼‰å’Œå¼•å…¥åã€‚ 1.å¼•å…¥å‰çš„å¤„ç†ï¼š æŠ›å¼€ä¸Šé¢çš„ä¾‹å­ï¼Œçœ‹ä¸€ä¸ªå¾ˆæœ‰ç‰¹ç‚¹çš„å‡½æ•°å½¢å¼ï¼š ((Point3d*) 0 )-object_count();//å—¯ï¼Œè¿™ä¸ª object_count åªæ˜¯ç®€å•ä¼ å› _object_count è¿™ä¸ªç®€å•é™æ€æˆå‘˜å˜é‡ã€‚ è¿™ç§å‡½æ•°å½¢å¼å‡ºç°çš„åŸå› ï¼š å¼•å…¥â€¦å‰ï¼ŒCPPè¦æ±‚æ‰€æœ‰çš„æˆå‘˜å‡½æ•°éƒ½å¿…é¡»é€šè¿‡å¯¹åº”ç±»çš„å®ä¾‹å¯¹è±¡æ¥è°ƒç”¨ã€‚ è¿™ä¹Ÿæ˜¯ this æŒ‡é’ˆçš„é‡è¦ä½œç”¨ä¹‹ä¸€ this æŒ‡é’ˆæŠŠ åœ¨æˆå‘˜å‡½æ•°ä¸­å­˜å–çš„éé™æ€æˆå‘˜ ç»‘å®šåœ¨äº† ç±»å¯¹è±¡å†…çš„ç›¸åº”æˆå‘˜ä¸Šã€‚ ä½†äº‹å®ä¸Šï¼š åªæœ‰å½“æˆå‘˜å‡½æ•°ä¸­ï¼Œå­˜åœ¨éé™æ€æˆå‘˜å˜é‡çš„å­˜å–æ—¶ï¼Œæ‰éœ€è¦ç±»å¯¹è±¡ã€‚ å…¶ä»–æƒ…å†µæ ¹æœ¬ç”¨ä¸åˆ° class object ã€‚ æˆå‘˜å‡½æ•°å¦‚æœæ²¡æœ‰æˆå‘˜è¢«å­˜å–ï¼Œé‚£ä¹ˆå®ƒå‹æ ¹å°±ä¸éœ€è¦ this æŒ‡é’ˆã€‚ä¹Ÿæ²¡æœ‰å¿…è¦å¼ºè¡Œè¦æ±‚é€šè¿‡ä¸€ä¸ªç±»å¯¹è±¡çš„å®ä¾‹æ¥è°ƒç”¨è¿™ä¸ªæˆå‘˜å‡½æ•°ã€‚ è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœè®¾è®¡è€…æŠŠé™æ€æˆå‘˜å˜é‡å£°æ˜ä¸º épublic ï¼Œä»–å°±å¿…é¡»æä¾›å¾ˆå¤šæˆå‘˜å‡½æ•°æ¥å­˜å–è¿™ä¸ªæˆå‘˜å˜é‡ã€‚ è¿™æ—¶ï¼Œå³ä½¿é™æ€æˆå‘˜å˜é‡ä¸éœ€è¦ç±»å¯¹è±¡å»å­˜å–ï¼Œå¯å¯¹åº”çš„å­˜å–å‡½æ•°è¿˜æ˜¯éœ€è¦ç±»å¯¹è±¡ï¼Œè¿™å°±æ˜¯ä¸€ç§æ— å¥ˆçš„ç»‘å®šå…³ç³»ã€‚ æ‰€ä»¥è„±ç¦»ç±»å¯¹è±¡çš„ä¸€äº›å­˜å–æ“ä½œè¿˜æ˜¯å¾ˆé‡è¦çš„ã€‚ä¸Šé¢çš„å¥‡è‘©å‡½æ•°å½¢å¼å°±æ˜¯è¿™ç§è„±ç¦»éœ€æ±‚ä¸‹çš„äº§ç‰©ï¼š ((Point3d*) 0 )-object_count();//å°† 0 å¼ºè½¬ä¸ºä¸€ä¸ªç±»æŒ‡é’ˆï¼Œæ¥æä¾›ä¸€ä¸ªç•¥æ˜¾ç”Ÿç¡¬çš„ thisæŒ‡é’ˆå®ä¾‹ã€‚//ï¼ˆç”Ÿç¡¬ä¹‹å¤„ï¼šè¿˜æ˜¯åœ¨è´¹å°½å¿ƒæœºå»è´´åˆæˆå‘˜å’Œå¯¹è±¡é—´çš„ç»‘å®šå…³ç³»ã€‚ï¼‰ è¿™æ—¶ï¼Œä¸ºäº†è®©ç‹¬ç«‹äºç±»å¯¹è±¡çš„ä¸€äº›å­˜å–å‡½æ•°æ“ä½œæ›´è‡ªç„¶ï¼šé™æ€æˆå‘˜å‡½æ•°å¼•å…¥äº†ã€‚ 2.å¼•å…¥åçš„å¤„ç† æˆ‘ä»¬æ¥çœ‹çœ‹å¼•å…¥çš„é™æ€æˆå‘˜å‡½æ•°ç‰¹æ€§ï¼š æ²¡æœ‰ this æŒ‡é’ˆã€‚ ä¸èƒ½ç›´æ¥å­˜å–æ‰€å±ç±»ä¸­çš„éé™æ€æˆå‘˜ã€‚ ä¸èƒ½è¢«å£°æ˜ä¸º constã€volatileã€virtualã€‚ ä¸éœ€è¦é€šè¿‡ç±»æˆå‘˜å»è°ƒç”¨ã€‚ é¦–å…ˆå…³äºé™æ€æˆå‘˜å‡½æ•°çš„â€œ.â€è¯­æ³•ï¼ˆæ‰“å®˜è…”å«â€œmember selectionâ€ï¼‰ï¼Œç¼–è¯‘å™¨æ˜¯è¿™æ ·å¤„ç†çš„ï¼š //ç±»æˆå‘˜å®ä¾‹çš„ç›´æ¥è°ƒç”¨ï¼šPoint3d p3;if(p3.object_count() 1) ...//converse to if(Point3d::object_count() 1) ... //é€šè¿‡è¡¨è¾¾å¼è·å¾—ç±»æˆå‘˜çš„è°ƒç”¨if(foo().object_count() 1) ...//converse to(void) foo();//foo()å‡½æ•°è¿˜æ˜¯è¢«è°ƒç”¨äº†ï¼Œåªæ˜¯æ²¡æœ‰è¹©è„šçš„è¿”å›å€¼è€Œå·²ã€‚if(Point3d::object_count() 1)... name mangled æ•ˆæœï¼š unsigned int Point3d::object_count() return _object_count;//converse to unsigned int object_count__5Point3dSFv() //é¢ï¼Œè¿™é‡Œçš„SFvè¡¨ç¤ºå®ƒæ˜¯ä¸€ä¸ªstatic member function,æ‹¥æœ‰ä¸€ä¸ªvoid(ç©ºç™½)çš„å‚æ•°\treturn _object_count__5Point3d; å–åœ°å€ å¦‚æœæ­¤æ—¶ä½ æƒ³å–ä¸€ä¸ª é™æ€æˆå‘˜å‡½æ•° çš„åœ°å€ï¼Œå°†è·å¾—å…¶åœ¨å†…å­˜ä¸­çš„åœ°å€ã€‚ è¿™å’Œå…¶ç±»æˆå‘˜å®ä¾‹æ— å…³ï¼Œä¸”ç±»å‹ä¸æ˜¯æŒ‡å‘ç±»æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ(å®ƒå’ŒthisæŒ‡é’ˆå·²ç»æ²¡æœ‰å…³ç³»)ï¼Œè€Œæ˜¯ä¸€ä¸ªå®å®åœ¨åœ¨çš„éæˆå‘˜å‡½æ•°æŒ‡é’ˆã€‚ Point3d::object_count();//ä¼šå¾—åˆ°ä¸€ä¸ªæ•°å€¼ï¼Œç±»å‹æ˜¯unsigned int(*)(); // right!//è€Œä¸æ˜¯unsigned int(Point3d::*)(); //wrong. é™æ€æˆå‘˜å‡½æ•°æ²¡æœ‰äº†thisæŒ‡é’ˆæŸç¼šï¼Œæ•ˆæœå‡ ä¹ç­‰åŒäºéæˆå‘˜å‡½æ•°äº†ã€‚ æ‰©å±•ï¼š ä¸€ä¸ªæ„æƒ³ä¸åˆ°çš„å¥½å¤„ï¼šstatic member function æˆä¸ºäº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆcallback funcï¼‰ã€‚ è¿™æœ‰åˆ©äºCPPå’Œ C-based X Window ç³»ç»Ÿçš„å…¼å®¹ï¼Œä¹Ÿå¯ä»¥è‡ªç„¶çš„åº”ç”¨åœ¨çº¿ç¨‹(thread)å‡½æ•°ä¸Šã€‚ 4.2 è™šæ‹Ÿæˆå‘˜å‡½æ•°è¿™ä¸€ç« æˆ‘ä»¬ä¼šä»å¤´åˆ°å°¾è¿‡ä¸€éè®¾è®¡è™šå‡½æ•°æ¨¡å‹çš„è¿‡ç¨‹ã€‚ è€ç”Ÿå¸¸è°ˆçš„æ¨¡å‹ï¼šä¸€ä¸ªç±»ï¼Œé‡Œé¢æœ‰è™šè¡¨ï¼Œè™šè¡¨é‡Œå­˜å‚¨ç€è™šå‡½æ•°çš„åœ°å€ã€‚è¯¥ç±»çš„æ¯ä¸ªå®ä¾‹å¯¹è±¡éƒ½ä¼šè‡ªå¸¦ä¸€ä¸ªè™šæŒ‡é’ˆï¼ŒæŒ‡å‘è¿™ä¸ªè™šè¡¨ï¼Œæ¥å®Œæˆå¤šæ€è°ƒç”¨ã€‚ æ‰§è¡ŒæœŸå¤šæ€çš„å®ç° æ—¢ç„¶æ˜¯è™šå‡½æ•°ï¼Œé‚£ä¹ˆçœ‹åˆ°è¿™ä¸ªæ“ä½œï¼š ptr-z(); ä½ é¢å¯¹çš„ç¬¬ä¸€ä¸ªé—®é¢˜ä¾¿æ˜¯æ‰§è¡ŒæœŸç±»å‹åˆ¤æ–­ï¼ˆruntime type resolutionï¼‰ã€‚ å…ˆä»ç¼–è¯‘æœŸå¤šæ€çš„å°è¯•èµ°èµ·ï¼š å°è¯•æŠŠä¿¡æ¯ç»‘å®šåœ¨å‡½æ•°æŒ‡é’ˆä¸Š åˆ¤æ–­æ–¹å¼é‡Œï¼Œæœ€è‡ªç„¶çš„æƒ³æ³•æ˜¯å°†å¸®åŠ©åˆ¤æ–­å¯¹è±¡çš„ä¿¡æ¯ç»‘å®šåœ¨ptrèº«ä¸Šã€‚ è¿™ç§ç­–ç•¥ä¸‹ï¼Œé€šå¸¸ä¸€ä¸ªæŒ‡é’ˆéœ€è¦çš„ä¿¡æ¯æœ‰ï¼š å®ƒæ‰€æŒ‡å‘çš„å¯¹è±¡åœ°å€ å¯¹è±¡ç±»å‹çš„ç¼–ç æˆ–è€…ç»“æ„ä¿¡æ¯çš„åœ°å€ã€‚ Psï¼šç»“æ„ä¿¡æ¯æ˜¯ç”¨æ¥åˆ†è¾¨å¯¹è±¡å‡½æ•°å®ä¾‹çš„ï¼Œå³help resolved to z()ã€‚ è¿™ç§ç­–ç•¥çš„é—®é¢˜ï¼š ç©ºé—´è´Ÿæ‹… å’ŒCç¨‹åºçš„é“¾æ¥ä¸å†å…¼å®¹ã€‚ å¦‚æœè¿™äº›é¢å¤–ä¿¡æ¯ä¸å’ŒæŒ‡é’ˆæ”¾åœ¨ä¸€èµ·ï¼Œé‚£å°±åªèƒ½æ”¾åœ¨å¯¹è±¡(classstruct)çš„èº«ä¸Šäº†ã€‚ ç±»ä¼¼è¿™ç§å½¢å¼ï¼šstruct data{ int m,d,y; } ï¼ˆè¿™ç§å½¢å¼æ²¡æœ‰æ‘†è„±æŠŠä¿¡æ¯ä¸æŒ‡é’ˆç»‘å®šçš„å¼Šç«¯ï¼‰ å¦‚æœä¸ºäº†Cå…¼å®¹æ€§ï¼Œè€Œè¦æ±‚è¿™ç§ç­–ç•¥åªé’ˆå¯¹classï¼Œä¹Ÿä¸èƒ½è§£å†³é—®é¢˜ã€‚ å› ä¸º struct å¯èƒ½ä¼šå‘ç”Ÿå¤šæ€ï¼Œè€Œ class å¯èƒ½å¹¶ä¸éœ€è¦è¿™äº›å†—ä½™ä¿¡æ¯ã€‚ æ‰§è¡ŒæœŸ å°è¯•åŠå¤©ï¼Œè¿™ä¸ªè´£ä»»è¿˜æ˜¯è½åˆ°äº†æ‰§è¡ŒæœŸã€‚æ‰€ä»¥æ‰§è¡ŒæœŸå¤šæ€åˆ°åº•æ€ä¹ˆå®ç°å‘¢ï¼Ÿ å¤šæ€çš„å®šä¹‰ï¼š åœ¨C++ä¸­ï¼Œå¤šæ€è¡¨ç¤ºä»¥ä¸€ä¸ªpublic base classçš„æŒ‡é’ˆï¼ˆæˆ–å¼•ç”¨ï¼‰ï¼Œå¯»å€å‡ºä¸€ä¸ªderived class objectçš„æ„æ€ã€‚ Point *ptr;ptr = new Point2d;ptr = new Point3d; æ¶ˆæå¤šæ€ï¼š è®©ptræ‰®æ¼”è¾“é€æœºåˆ¶çš„è§’è‰²ï¼Œä»…ä»…è®©åŸºç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡ï¼Œè€Œæ²¡æœ‰å…¶ä»–æ“ä½œã€‚ ç§¯æå¤šæ€ï¼š æŒ‡å‡ºçš„å¯¹è±¡é€šè¿‡æŒ‡é’ˆè¢«ä½¿ç”¨ã€‚ //1.ptr-z(); //ptræŒ‡å‘äº†å­ç±»//2.Point3d *p3d=dynamic_castPoint3d *(ptr)p3d-z();//è¿™å°±è¯´æ˜æ˜¯Point3dçš„_zå‡½æ•° ä»…ä»…æ˜¯è¿™ç§æ“ä½œè¿˜ä¸å¤Ÿã€‚å› ä¸ºæˆ‘ä»¬æ— ä»çŸ¥æ™“ptræŒ‡å‘çš„æ˜¯åŸºç±»è¿˜æ˜¯å­ç±»æˆ–è€…å®ƒæœ‰æ²¡æœ‰å®ç°å¤šæ€ã€‚ ç»“è®ºï¼š è¯†åˆ«ä¸€ä¸ªclassæ˜¯å¦æ”¯æŒå¤šæ€ï¼Œåªèƒ½çœ‹å®ƒæ˜¯å¦æœ‰è™šå‡½æ•°ã€‚åªè¦è¦è™šå‡½æ•°ï¼Œå®ƒå°±éœ€è¦é¢å¤–çš„æ‰§è¡ŒæœŸä¿¡æ¯ã€‚ å­˜å‚¨çš„é¢å¤–ä¿¡æ¯ä»€ä¹ˆï¼Ÿ ç°åœ¨æˆ‘ä»¬çŸ¥æ™“äº†ä¸€ä¸ªç±»è¦å®ç°å¤šæ€ï¼Œéœ€è¦æ‰§è¡ŒæœŸä¿¡æ¯æ¥å®Œæˆæ­£ç¡®å¤šæ€æ“ä½œã€‚ éœ€è¦çš„ä¿¡æ¯ï¼š ptræ‰€æŒ‡å¯¹è±¡çš„çœŸå®ç±»å‹ï¼Œæ–¹ä¾¿æ‰¾åˆ°æ­£ç¡®çš„å®ä¾‹ï¼ˆå¦‚z() å¯¹è±¡å®ä¾‹çš„ä½ç½®ï¼Œæ–¹ä¾¿ptrè°ƒç”¨ å®ç°ï¼š ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°å­—æ¥è¡¨ç¤ºç±»çš„ç±»å‹ ä¸€ä¸ªæŒ‡å‘è¡¨æ ¼çš„æŒ‡é’ˆï¼Œè¯¥è¡¨æ ¼å­˜å‚¨è™šå‡½æ•°æ‰§è¡ŒæœŸåœ°å€ è¿™æ—¶ï¼Œvptrå’Œ virtual table å¾ˆè‡ªç„¶çš„å‡ºç°äº†ã€‚ å‰©ä¸‹çš„é—®é¢˜æ˜¯ï¼Œè™šè¡¨æ€ä¹ˆæ‰¾åˆ°å¹¶æ„å»ºè¿™äº›åœ°å€ï¼Ÿ æ‰¾åˆ°åœ°å€ï¼šè™šå‡½æ•°åœ°å€åœ¨ç¼–è¯‘æœŸå°±èƒ½é€šè¿‡ç±»å¯¹è±¡æ‰¾åˆ°ã€‚è€Œä¸”è¿™äº›åœ°å€å›ºå®šä¸å˜ï¼Œä¸éœ€è¦æ‰§è¡ŒæœŸä»‹å…¥ã€‚ å­˜å‚¨å»ºæ„ï¼š ç”±ç¼–è¯‘å™¨åœ¨æ¯ä¸ªç±»å¯¹è±¡ä¸­å®‰æ’ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¯¥è¡¨æ ¼ã€‚ æ¯ä¸ªè™šå‡½æ•°ç”Ÿæˆä¸€ä¸ªè¡¨æ ¼ç´¢å¼•å€¼ï¼Œå¸®åŠ©è¡¨æ ¼å¯»æ‰¾åœ°å€ã€‚ PSï¼šè¡¨ç±»ä¼¼ä¸€ä¸ªæ•°ç»„ï¼Œç´¢å¼•å€¼å³ä¸‹æ ‡ï¼Œå…ƒç´ æ˜¯è™šå‡½æ•°åœ°å€ã€‚ (ç¼–è¯‘å™¨ç«‹å¤§åŠŸã€‚) è¿™äº›éƒ½æ˜¯ç¼–è¯‘æœŸå·¥ä½œã€‚æ‰§è¡ŒæœŸåªæ˜¯é€šè¿‡ virtual table slot (é‚£äº›ç´¢å¼•)æ‰¾åˆ°åœ°å€ï¼Œç„¶åè§¦å‘è™šå‡½æ•°ã€‚ å…³äºè™šè¡¨çš„è¯¦ç»†æ¢è®¨ï¼š ä¸€ä¸ªclass åªæœ‰ä¸€ä¸ªè™šè¡¨ï¼Œæ¯ä¸ªè¡¨é‡Œæœ‰ç§¯æè™šå‡½æ•°å®ä¾‹åœ°å€ã€‚ ç§¯æè™šå‡½æ•°(active virtual func): è¿™ä¸€classæ‰€å®šä¹‰çš„å‡½æ•°å®ä¾‹ã€‚å®ƒä¼šæ”¹å†™ä¸€ä¸ªå¯èƒ½å­˜åœ¨çš„base class virtual functionå‡½æ•°å®ä¾‹ ç»§æ‰¿è‡ªbase classçš„å‡½æ•°å®ä¾‹ã€‚è¿™æ˜¯åœ¨derived classå†³å®šä¸æ”¹å†™virtual functionæ—¶æ‰ä¼šå‡ºç°çš„æƒ…å†µï¼ˆä¹Ÿå°±æ˜¯å•çº¯çš„ç»§æ‰¿ï¼‰ ä¸€ä¸ªpure_virtual_called()å‡½æ•°å®ä¾‹ï¼ˆçº¯è™šå‡½æ•°ï¼Œæ²¡æœ‰å†…å®¹ï¼‰ï¼Œå¯ä»¥ç”¨æ¥ä¿å­˜çº¯è™šå‡½æ•°çš„ç©ºé—´ï¼Œæˆ–å½“ä½œæ‰§è¡ŒæœŸçš„å¼‚å¸¸å¤„ç†å‡½æ•°ç­‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š class Point public:\tvirtual ~Point();\tvirtual Point mult(float) = 0;\tfloat x()const return _x; virtual float y() const return 0; virtual float z() const return 0; protected:\tPoint(float x = 0.0);\tfloat _x;; è§£é‡Šï¼šè™šææ„å‡½æ•°ç”Ÿæˆ slot 1ï¼Œmult() ç”Ÿæˆ 2ï¼Œy() å’Œ z() åˆ†åˆ«ä¸º slot3 slot4ã€‚ x()ä¸æ˜¯è™šå‡½æ•°ï¼Œæ²¡æœ‰slotã€‚ PSï¼šmult()ä½œä¸ºçº¯è™šå‡½æ•°ï¼Œæ²¡æœ‰å®šä¹‰ã€‚å¦‚æœæ„å¤–è°ƒç”¨ï¼Œç›´æ¥ç»“æŸæ‰ã€‚ ç»§ç»­æ·±å…¥ä¸€ä¸‹ï¼Œæ‰¾ä¸ª class ç»§æ‰¿ Point ä¼šæ˜¯ä»€ä¹ˆç»“æ„å‘¢ï¼Ÿ class Point2d :public Point public:\tPoint2d(float x = 0.0, float y = 0.0) :Point(x), _y(x) ~Point2d();\t//æ”¹å†™base class virtual functions\tPoint2d mult(float);\tfloat y()const return _y; protected:\tfloat _y;; ä¸€å…±åˆä¸‰ç§å¯èƒ½æ€§ï¼š 1.å®ƒå¯ä»¥ç»§æ‰¿base classæ‰€å£°æ˜çš„virtual functionsçš„å‡½æ•°å®ä¾‹ã€‚æ­£ç¡®åœ°è¯´æ˜¯ï¼Œè¯¥å‡½æ•°å®ä¾‹çš„åœ°å€ä¼šè¢«æ‹·è´åˆ°derived tableçš„ç›¸å¯¹åº”slotä¹‹ä¸­ã€‚æ¯”å¦‚ä¸Šå›¾ä¸­çš„#4ä½ç½® 2.å®ƒå¯ä»¥ä½¿ç”¨è‡ªå·±çš„å‡½æ•°å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯åœ¨base classä¸­çš„virtual functionä¸Šåšæ”¹å˜äº†ã€‚è¿™è¡¨ç¤ºå®ƒè‡ªå·±çš„å‡½æ•°å®ä¾‹åœ°å€å¿…é¡»æ”¾åœ¨å¯¹åº”çš„slotä¹‹ä¸­ã€‚æ¯”å¦‚ä¸Šå›¾ä¸­çš„#2ã€#3ä½ç½® 3.å®ƒå¯ä»¥åŠ å…¥ä¸€ä¸ªæ–°çš„virtual functionã€‚è¿™æ—¶å€™virtual tableçš„å°ºå¯¸ä¼šå¢å¤§slotï¼Œè€Œæ–°çš„å‡½æ•°å®ä¾‹åœ°å€åˆ™ä¼šè¢«æ”¾å…¥è¯¥slotä¹‹ä¸­ ( Point2dçš„virtual tableåœ¨slot1ä¸­æŒ‡å‡ºææ„å‡½æ•°ï¼Œè€Œåœ¨slot2ä¸­æŒ‡å‡ºmult()(å–ä»£çº¯è™šå‡½æ•°)ã€‚å®ƒè‡ªå·±çš„y()å‡½æ•°å®ä¾‹æ”¾åœ¨slot 3ä¸­ï¼Œç»§æ‰¿è‡ªPointçš„z()å‡½æ•°å®ä¾‹åœ°å€åˆ™è¢«æ”¾åœ¨slot 4ä¸­ã€‚ ) ç»§ç»­ç»§æ‰¿ï¼š class Point3d :public Point2d public:\tPoint3d(float x = 0.0, float y = 0.0, float z = 0.0) :Point2d(x, y), _z(z) ~Point3d();\t//æ”¹å†™babse class virtual functions\tPoint3d mult(float);\tfloat z()const return _z; protected:\tfloat _z;; å…¶virtual tableä¸­çš„slot 1ä½ç½®æ”¾ç½®Point3dçš„destructorï¼Œslot 2æ”¾ç½®Point3d::mult()å‡½æ•°åœ°å€ï¼Œslot 3æ”¾ç½®ç»§æ‰¿è‡ªPoint2dçš„y()å‡½æ•°åœ°å€ï¼Œslot 4æ”¾ç½®è‡ªå·±çš„z()å‡½æ•°åœ°å€ã€‚ ç°åœ¨ï¼Œè®©æˆ‘ä»¬å†æ¬¡é¢å¯¹ptr-z(); å¦‚ä½•åœ¨ç¼–è¯‘æœŸè®¾å®šè™šå‡½æ•°çš„è°ƒç”¨ï¼Ÿ å¯ä»¥è§£ç­”å¦‚ä¸‹äº†ï¼š 1.ä¸€èˆ¬è€Œè¨€ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨z()æ—¶ï¼Œæˆ‘å¹¶ä¸çŸ¥é“ptræ‰€æŒ‡å¯¹è±¡çš„çœŸæ­£ç±»å‹ã€‚ç„¶è€Œæˆ‘çŸ¥é“ï¼Œç»ç”±ptrå¯ä»¥å­˜å–åˆ°è¯¥å¯¹è±¡çš„virtual tableã€‚ 2è™½ç„¶æˆ‘ä¸çŸ¥é“å“ªä¸€ä¸ªz()å‡½æ•°å®ä¾‹ä¼šè¢«è°ƒç”¨ï¼Œä½†æˆ‘çŸ¥é“æ¯ä¸€ä¸ªz()å‡½æ•°åœ°å€éƒ½è¢«æ”¾åœ¨slot4ä¸­ï¼Œä»ä¸Šé¢çš„å›¾å¯ä»¥çœ‹å‡ºæ¥ã€‚ ç”±è¿™ä¸¤æ¡ä¿¡æ¯ä½¿å¾—ç¼–è¯‘å™¨å¯ä»¥å°†è¯¥è°ƒç”¨è½¬åŒ–ä¸ºï¼š ï¼ˆ*ptr-vptr[4]ï¼‰(ptr);//ç¼–è¯‘æœŸå·¥ä½œï¼švptræŒ‡å‘vitrual tableï¼Œç”Ÿæˆç¼–å· slot4//æ‰§è¡ŒæœŸå·¥ä½œï¼šçŸ¥é“ slot 4 æŒ‡å‘çš„é‚£ä¸ªz()ç¤ºä¾‹ è¿™æ˜¯å•ä¸€ç»§æ‰¿ä¸‹ï¼Œè™šå‡½æ•°çš„å®ç°è¿‡ç¨‹ã€‚ å¤šé‡ç»§æ‰¿ä¸‹çš„è™šå‡½æ•° ç¼–è¯‘æœŸå®ç°å¤šæ€çš„å›°å¢ƒ å¤šé‡ç»§æ‰¿ä¸­è™šå‡½æ•°çš„å¤æ‚åº¦ï¼Œä¸»è¦æ¥æºäºç¬¬äºŒä¸ªæˆ–åç»­åŸºç±»å’Œæ‰§è¡ŒæœŸ this æŒ‡é’ˆçš„è°ƒæ•´ã€‚ ç¤ºä¾‹ï¼š class Base1 public:\tBase1();\tvirtual ~Base1();\tvirtual void speakClearly();\tvirtual Base1 *clone() const;protected:\tfloat data_Base1;;class Base2 public:\tBase2();\tvirtual ~Base2();\tvirtual void mumble();\tvirtual Base2 *chone() const;protected:\tfloat data_Base2;;class Derived :public Base1, public Base2 public:\tDerived();\tvirtual ~Derived();\tvirtual Derived *clone() const;protected:\tfloat data_Derived;; è®© Derived æ”¯æŒè™šå‡½æ•°å›°éš¾åº¦è½åœ¨äº† Base2 å­å¯¹è±¡ä¸Šã€‚ è¿™é‡Œæˆ‘çš„ç†è§£æ˜¯ï¼ŒBase1å’ŒDerivedçš„æŒ‡é’ˆä½ç½®æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¸º0ï¼›è€ŒBase2æŒ‡é’ˆçš„æŒ‡å‘åœ°å€åˆ™æ˜¯0 + sizeof(base1)ã€‚è¿™æ—¶æˆ‘ä»¬é¢å‰æœ‰ä¸‰ä¸ªé—®é¢˜ï¼š1.è™šææ„2.ç»§æ‰¿è€Œæ¥çš„Base2::mumble()3.ä¸€ç»„clone()å‡½æ•°å®ä¾‹ã€‚ è¿™æ—¶ï¼Œæˆ‘ä»¬å°è¯•å¤šæ€æ“ä½œï¼š æŒ‡é’ˆèµ‹å€¼ Base2 *pbase2 = new Derived;//ç¼–è¯‘æœŸçš„ä»£ç ä¼šå˜æˆè¿™æ ·ï¼šDerived* temp = new Derived;Base2 *pbase2 = temp?temp + sizeof(Base1) : 0;//è¿™é‡Œçš„æ€æƒ³ç¬¬ä¸‰ç« æœ‰é˜é‡Šï¼ˆä¾‹å¦‚ä¸è¿™æ ·åšï¼Œç›¸å…³ base2 è°ƒç”¨ä¼šå¤±è´¥ï¼‰ åˆ é™¤ delete pbase2; è¿™é‡Œå‡ºç°äº†é—®é¢˜ï¼šæŒ‡é’ˆå¿…é¡»å†æ¬¡è°ƒæ•´ï¼Œå› ä¸ºè¦æŒ‡å‘Derivedå¯¹è±¡çš„èµ·å§‹å¤„ã€‚ä½†è¿™ä¸ªæŒ‡å‘æ¶‰åŠçš„åç§»é‡æ“ä½œå·²ç»ä¸èƒ½åœ¨ç¼–è¯‘æœŸè®¾å®šï¼Œå› ä¸º pbase2 æŒ‡å‘çš„çœŸæ­£å¯¹è±¡æ ¹æœ¬ç¡®å®šä¸äº†ï¼ˆè¯¥æ­»çš„å¤šæ€ï¼‰ï¼Œé™¤éåœ¨æ‰§è¡ŒæœŸã€‚ 1ã€è¿™é‡Œæ˜¯å¼€å¤´æ‰€è¯´çš„é—®é¢˜ä¹‹ä¸€ï¼šè™šææ„ã€‚ delete pbase2çš„æ—¶å€™Derived,Base1,Base2çš„ææ„å‡½æ•°éƒ½è¦è¢«è°ƒç”¨ã€‚ å› ä¸ºä¸€ä¸ªDerivedå¯¹è±¡ä¸­å«æœ‰Base1å’ŒBase2çš„subobjectï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦è°ƒç”¨å®ƒä»¬çš„ææ„å‡½æ•°é”€æ¯å®ƒä»¬çš„å¯¹è±¡å¹¶é‡Šæ”¾å†…å­˜ç©ºé—´(å½“ç„¶åªæœ‰ææ„å‡½æ•°æ˜¯è¿™æ ·ï¼‰ã€‚ çˆ¶ç±»å­å¯¹è±¡å¯èƒ½æœ‰å¾ˆå¤šç§å¤šæ€æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•ç¡®å®šå…¶æŒ‡å‘çš„çœŸæ­£å¯¹è±¡ï¼Œï¼ˆä¸åŒå¯¹è±¡çš„åç§»é‡ä¸åŒï¼‰ï¼Œæ‰€ä»¥ä¸èƒ½åœ¨ç¼–è¯‘æœŸå‡†ç¡®è°ƒç”¨å…¶ææ„å‡½æ•°ã€‚ //æœ¬ä¾‹ä¸­çš„å¤šæ€å°±æœ‰ä¸¤ç§æƒ…å†µ//ä¸¤ä¸ªnewè¿”å›çš„éƒ½æ˜¯é¦–åœ°å€ï¼šå­ç±»å­å¯¹è±¡åœ¨åœ°å€0å¤„ï¼Œçˆ¶ç±»å­å¯¹è±¡åœ¨0+sizeof(Base2)å¤„Base2 *pbase2 = new Derived; //è¯¥æƒ…å†µä¸éœ€è¦åç§»ï¼ˆç”šè‡³ä¸éœ€è¦thisï¼‰Base2 *pbase2 = new Base2; //è¯¥æƒ…å†µéœ€è¦åç§»//äºæ˜¯ç¼–è¯‘å™¨å¤„ç†çš„ä¸¤ç§ç»“æœä¸åŒ(*pbase2-vptr[1])(pbase2 + offset???) è€Œä¸”æœ‰æ— åç§»é‡æ˜¯ä¸€ç§æƒ…å†µï¼Œåç§»é‡æ˜¯å¤šå°‘åˆæ˜¯ä¸€ç§æƒ…å†µï¼ˆæ¯”å¦‚åç»­åŸºç±»çš„Base3ï¼ŒBase4 â€¦ï¼‰ å¦å¤–ï¼Œè°ƒç”¨è™šææ„å‡½æ•°æ—¶ this æŒ‡é’ˆå‘ç”Ÿäº†åç§»(æŒ‡å‘pbase2 åˆ° æŒ‡å‘ derived ï¼Œå› ä¸ºä½ éœ€è¦è°ƒç”¨äººå®¶çš„å‡½æ•°)ã€‚æˆ‘æ—¢éœ€è¦è°ƒæ•´åçš„derivedå¯¹è±¡çš„èµ·å§‹åœ°å€ï¼Œæˆ‘åˆéœ€è¦è°ƒæ•´å‰çš„pbase2::vptrï¼Œæ¥æŒ‡å‘å­ç±»ææ„å‡½æ•°å®é™…åœ°å€ã€‚ è¿™é‡Œå‡ºç°çŸ›ç›¾ï¼šæˆ‘åŒæ—¶éœ€è¦è°ƒæ•´å‰åçš„ä¿¡æ¯ã€‚ç¼–è¯‘å™¨å¦‚ä½•å®ç°çš„æƒ…å†µï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼š 1.è°ƒæ•´å‰å…ˆé€šè¿‡pbase2æ‰¾åˆ°vpträ¸­Derivedçš„ææ„å‡½æ•°åœ°å€ï¼Œ 2.éšå¼åœ°ä¼ thisæŒ‡é’ˆæ—¶æ‰ä¼šè°ƒæ•´æŒ‡å›æ•´ä¸ªDerivedå¯¹è±¡çš„èµ·å§‹åœ°å€ï¼Œåƒè¿™æ ·ï¼š (*pbase2-vptr[1])(pbase2+offset);\t//pbase2-sizeof(Base1)//å·¦æ‹¬å·è°ƒæ•´å‰ï¼Œå³æ‹¬å·è°ƒæ•´å æ‰§è¡ŒæœŸè§£å†³æ–¹æ¡ˆï¼šæ›¿ä»£åŠ å¤§è™šè¡¨çš„æ–¹æ³•ï¼šthunkè®¾è®¡ æ‰§è¡ŒæœŸè§£å†³çš„ä¸€èˆ¬çš„æ€è·¯æ˜¯ï¼Œé€šè¿‡ç¬¬äºŒæˆ–åç»­çš„åŸºç±»æŒ‡é’ˆè°ƒç”¨å­ç±»è™šå‡½æ•°ã€‚ è¯¥æ“ä½œå¿…éœ€çš„â€œthisæŒ‡é’ˆè°ƒæ•´â€æ“ä½œï¼Œå¿…é¡»åœ¨æ‰§è¡ŒæœŸå®Œæˆã€‚ è¿™æ„å‘³ç€ï¼Œæ“ä½œçš„ä¿¡æ¯ï¼šoffsetçš„å¤§å°ï¼Œä»¥åŠæŠŠoffsetåŠ ä¸ŠthisæŒ‡é’ˆçš„é‚£ä¸€å°æ®µä»£ç å¿…é¡»ç”±ç¼–è¯‘å™¨å®‰æ’åœ¨æŸä¸ªåœ°æ–¹ã€‚ é—®é¢˜æ˜¯ï¼Œåœ¨é‚£ä¸ªåœ°æ–¹ï¼Ÿ æœ€è‡ªç„¶ï¼ˆæœ€ç¬¨ï¼‰çš„æ–¹æ³•æ˜¯ï¼Œéƒ½å¡åˆ°è™šè¡¨é‡Œï¼ŒæŠŠè™šè¡¨åŠ å¤§ï¼Œæ¥å®¹çº³è¿™äº›åç§»ä¿¡æ¯å’Œåœ°å€ã€‚ è™šè¡¨çš„ slot ä¹Ÿä»æ•´å‹ä¹‹ç±»çš„æ•°å­—ç±»å‹å˜æˆäº†ç»“æ„ä½“ã€‚ (pbase2-vptr[1])(pbase2);//æ”¹å˜ä¸ºï¼š(*pbase2-vptr[1].faddr) (pabse2 + pbase2-vptr[1].offset) æ¯«æ— ç–‘é—®ï¼Œå¤ªå¤§äº†ã€‚ä¸éœ€è¦è¿™äº›ä¿¡æ¯çš„ç©ºé—´ä¹Ÿè¢«å¡æ»¡äº†ã€‚ thunkï¼šä¸»è§’ç™»åœº thunkæ˜¯ä¸€å°æ®µæ±‡ç¼–ä»£ç ï¼Œå®ç°ï¼š1.è°ƒæ•´thisæŒ‡é’ˆåç§»é‡ 2.è·³åˆ°ç›®æ ‡è™šå‡½æ•°ä¸­ pbase2_dtor_thunk: this += sizeof(base1); Derived::~Derived(this); æ‰€ä»¥å¯ä»¥æš‚æ—¶å°†thunkç†è§£æˆä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯å¯¹ä¸Šè¿°ä¸¤ç‚¹æ“ä½œçš„å°è£…ï¼ˆè°ƒæ•´thisæŒ‡é’ˆå’Œè°ƒç”¨å¯¹åº”çš„å‡½æ•°ï¼‰ï¼Œåªä¸è¿‡å®ƒæ˜¯ç”¨æ±‡ç¼–è¯­è¨€å†™æ‰æœ‰æ•ˆç‡å¯è¨€ã€‚ thunk è®© è™šè¡¨ slot å†…å«ä¸€ä¸ªç®€å•æŒ‡é’ˆï¼Œè¦ä¹ˆæŒ‡å‘è™šå‡½æ•°ï¼Œè¦ä¹ˆæŒ‡å‘ä¸€ä¸ªthunkï¼ˆä¹Ÿå°±æ˜¯è¦è°ƒæ•´thisæŒ‡é’ˆæ—¶ï¼‰ã€‚ ä½†ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œå°±å¦‚æˆ‘ä»¬åˆ†æç¼–è¯‘æœŸå±€é™æ€§æ—¶ä¸€æ ·ï¼Œå¯èƒ½æœ‰å¤šä¸ªä¸åŒç»§æ‰¿å±‚çº§çš„å¯¹è±¡æ¥è°ƒç”¨åŒä¸€ä¸ªææ„å‡½æ•°ï¼Œè¿™æ—¶çš„åç§»é‡æ˜¯ä¸åŒçš„ï¼Œå¯¹åº”slotä¹Ÿä¸åŒã€‚ æœ€é«˜å±‚çº§ä¸”å¤„äºæœ€å·¦ä¾§çš„ç±»å¯¹è±¡ï¼Œç”šè‡³ä¸éœ€è¦åç§»é‡â€”â€”å®ƒå’Œå­ç±»å¯¹è±¡çš„èµ·å§‹åœ°å€ä¸€æ ·ã€‚è¿™æ—¶slotç›´æ¥æ”¾çœŸæ­£çš„è°ƒç”¨å‡½æ•°åœ°å€å°±å¥½äº†ã€‚ å¤šé‡ç»§æ‰¿ä¸‹ï¼Œä¸€ä¸ªæ´¾ç”Ÿç±»å†…å«n-1ä¸ªé¢å¤–çš„è™šå‡½æ•°è¡¨ï¼Œnè¡¨ç¤ºä¸Šä¸€å±‚åŸºç±»çš„æ•°ç›®(å› æ­¤å•ä¸€ç»§æ‰¿ä¸ä¼šæœ‰é¢å¤–çš„è™šå‡½æ•°è¡¨)ã€‚å¦‚æœå­ç±»æœ‰é¢å¤–çš„è™šå‡½æ•°ï¼Œä¼šå­˜æ”¾åœ¨ç¬¬ä¸€ä¸ªåŸºç±»çš„è™šå‡½æ•°è¡¨é‡Œã€‚ å¯¹æœ¬ä¾‹Derivedè€Œè¨€ï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿæœ‰ä¸¤ä¸ªè™šå‡½æ•°è¡¨ã€‚ åˆ†åˆ«å¯¹åº” Base1 å’Œ Base2 ã€‚é’ˆå¯¹æ¯ä¸ªè™šè¡¨ï¼Œå­ç±»å¯¹è±¡éƒ½ä¼šæœ‰ä¸“é—¨çš„ vptr ï¼Œä¸”è¿™äº› vptr ä¼šåœ¨æ„é€ å‡½æ•°ä¸­è¢«èµ‹åˆå€¼ï¼ˆç¼–è¯‘å™¨çš„å·¥ä½œå–½ï¼‰ äºæ˜¯å­ç±»å¯¹è±¡åœ°å€èµ‹ç»™å­ç±»æŒ‡é’ˆæˆ–çˆ¶ç±»æŒ‡é’ˆï¼Œå°±ä¼šäº§ç”Ÿå¤šæ€æ•ˆæœâ€”â€”æ ¹æ®ä¸åŒçš„ç±»å‹ï¼Œç”¨ä¸åŒè¡¨æ ¼æ¥å¤„ç†ã€‚ æ‰§è¡ŒæœŸé“¾æ¥å™¨å¤„ç†ç¬¦å·é“¾æ¥è¿™ç§ä¸œè¥¿å¯èƒ½æœ‰ç‚¹æ…¢ã€‚ä¸€ä¸ªæ€è·¯æ˜¯å°†å¤šä¸ªè™šè¡¨è¿æ¥æˆä¸€ä¸ªï¼šæ¬¡è¦è¡¨æ ¼ï¼ˆæ¬¡è¦ä»…ä»ç»§æ‰¿é¡ºåºä¸Šè¯´ï¼‰çš„è·å–åªéœ€è¦ä¸»è¦è¡¨æ ¼åœ°å€åŠ ä¸Šåç§»é‡ã€‚ åç»­åŸºç±»å½±å“è™šå‡½æ•°è¿è¡Œçš„ä¸‰ç§æƒ…å†µ è¿™ä¸‰ç§æƒ…å†µåœ¨ä¸Šé¢çš„å›¾é‡Œæœ‰æ‰€åæ˜  é€šè¿‡æŒ‡å‘åŒå±‚ã€æ¬¡çº§çˆ¶ç±»çš„æŒ‡é’ˆï¼Œè°ƒç”¨å­ç±»è™šå‡½æ•° Base2 *ptr = new Derived;//è°ƒç”¨Derived::~Derived//ptrè¦å‡å»sizeof(Base1)ä¸ªbytesdelete ptr; ä¹‹å‰å·²ç»è®¨è®ºè¿‡ï¼Œä¸ºäº†æ­£ç¡®æ‰§è¡Œï¼Œptrå¿…é¡»è°ƒæ•´æŒ‡å‘å­ç±»å¯¹è±¡çš„èµ·å§‹å¤„ ï¼ˆæ•´ä¸ªå¯¹è±¡åœ°å€çš„ 0ï¼‰ é€šè¿‡æŒ‡å‘å­ç±»å¯¹è±¡çš„æŒ‡é’ˆï¼Œè°ƒç”¨åŒå±‚ã€æ¬¡çº§çˆ¶ç±»ç»§æ‰¿è€Œæ¥çš„çˆ¶ç±»è‡ªå·±çš„è™šå‡½æ•° Derived *pder = new Derived;//è°ƒç”¨Base2::mumble()//pderè¦åŠ ä¸Šsizeof(Base1)ä¸ªbytespder-mumble(); ç¬¬ä¸€ç§æƒ…å†µçš„é€†å‘ã€‚åˆ°çˆ¶ç±»å­å¯¹è±¡é‚£é‡Œè°ƒç”¨çˆ¶ç±»çš„è™šå‡½æ•° å…è®¸ä¸€ä¸ªvirtual functionçš„è¿”å›å€¼ç±»å‹æœ‰æ‰€å˜åŒ–ï¼Œå¯èƒ½æˆä¸ºbase typeï¼Œä¹Ÿå¯èƒ½æ˜¯publicly derived typeã€‚ Base2 *pb1=new Derived;//è°ƒç”¨Derived* Derived::clone()//è¿”å›å€¼å¿…é¡»è¢«è°ƒæ•´ï¼Œä»¥æŒ‡å‘Base2 subobjectBase2 *pb2=pb1-clone(); Derived::clone()ä¼ å›ä¸€ä¸ªDerivedç±»æŒ‡é’ˆï¼Œæ”¹å†™äº†å®ƒçš„ä¸¤ä¸ªåŸºç±»çš„å‡½æ•°ä½“ã€‚å½“æˆ‘ä»¬é€šè¿‡æŒ‡å‘ç¬¬äºŒä¸ªåŸºç±»çš„æŒ‡é’ˆæ¥è°ƒç”¨clone()æ—¶ï¼ŒthisæŒ‡é’ˆçš„offseté—®é¢˜å°±ä¼šäº§ç”Ÿï¼š å½“è¿›è¡Œpb1-clone()æ—¶ï¼Œpb1ä¼šè¢«è°ƒæ•´æŒ‡å‘Derivedå¯¹è±¡çš„èµ·å§‹åœ°å€ï¼Œæ‰€ä»¥è°ƒç”¨çš„æ˜¯Derived::clone()ã€‚å®ƒä¼šä¼ å›ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªæ–°çš„Derivedå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åœ°å€åœ¨è¢«æŒ‡å®šç»™pb2å‰ï¼Œå¿…é¡»å…ˆç»è¿‡è°ƒæ•´ï¼Œä»¥æŒ‡å‘Base2 subobjectã€‚ ä¹¦ä¸­è¿˜æä¾›äº†ä¸¤ç§æé«˜æ•ˆç‡çš„æ–¹æ³•ï¼Œä¸€ç§æ˜¯sunç¼–è¯‘å™¨çš„â€split functionâ€ï¼Œä¸€ç§æ˜¯å¾®è½¯çš„â€œaddress pointsâ€ è™šç»§æ‰¿ä¸‹çš„è™šå‡½æ•°class Point2d public:\tPoint2d(float = 0.0, float = 0.0);\tvirtual ~Point2d();\tvirtual void mumble();\tvirtual float z();protected:\tfloat _x, _y; //çº¯çº¯æ¯’ç˜¤;class Point3d : public virtual Point2d public:\tPoint3d(float = 0.0, float = 0.0, float = 0.0);\t~Point3d();\tfloat z();protected:\tfloat _z;; å›¾å³ä¸‹è§’çš„ä¸¤ä¸ªvtblså†…å®¹æœ‰é”™ã€‚è‡³å°‘mumble()åº”è¯¥æ˜¯Point2d::mumble è€Œä¸æ˜¯ Point3d::mumbleã€‚ æ­¤ä¾‹åæ˜ å‡ºçš„å”¯ä¸€æœ‰ç”¨çš„ä¿¡æ¯ä¾¿æ˜¯è™šç»§æ‰¿ä¸‹çš„å†…å­˜ç©ºé—´æ’å¸ƒå’Œæ­£å¸¸ç»§æ‰¿ä¸ä¸€æ ·ï¼Œå¹¶ä¸”ä¸€æ—¦è™šåŸºç±»ä¸­è™šç»§æ‰¿äº†å¦ä¸€ä¸ªè™šåŸºç±»ï¼Œæ•´ä¸ªå†…å­˜ç©ºé—´ä¼šéå¸¸æ··ä¹±ã€‚this æŒ‡é’ˆçš„è°ƒæ•´å°±ä¼šå¤æ‚éš¾è¾¨ã€‚ æ‰€ä»¥æˆ‘ä»¬çš„å¯ç¤ºåªæœ‰ä¸€ä¸ªï¼šä¸è¦å†è™šåŸºç±»é‡Œå£°æ˜ nonstatic data members ã€‚ æŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ nonstatic æˆå‘˜å‡½æ•° å’Œ nonstatic æˆå‘˜å˜é‡ä¸ç±»å¯¹è±¡çš„ç»‘å®š å–éé™æ€æˆå‘˜å˜é‡çš„åœ°å€ï¼Œæ˜¯å®ƒåœ¨ç±»ä¸­çš„ç›¸å¯¹byteä½ç½®ï¼ˆå¯èƒ½+1ï¼‰ï¼Œè¿™ä¸ªoffsetéœ€è¦ç±»å¯¹è±¡çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯ç»‘å®šå…³ç³»ã€‚ å–éé™æ€æˆå‘˜å‡½æ•°çš„åœ°å€ï¼Œå¦‚æœå‡½æ•°ä¸ºnon-virtualï¼Œå®ƒå°±å’Œæˆå‘˜å˜é‡ä¸€æ ·ï¼Œæ˜¯ä¸ªç»‘å®šåœ¨ç±»å¯¹è±¡ä¸Šçš„offset åœ°å€ã€‚ å¯¹è±¡åœ°å€æ¥è‡ª thisæŒ‡é’ˆ ã€‚ æŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ //doubleæ˜¯è¿”å›å€¼ç±»å‹//Point::*è¯´æ˜æ˜¯Pointç±»æˆå‘˜ï¼Œpmfæ˜¯æˆå‘˜æŒ‡é’ˆå//æœ€åçš„()æ˜¯å‚æ•°åˆ—è¡¨double (Point::*pmf)();\t//ä¸¤ç§æ–¹æ³•å®šä¹‰å¹¶åˆå§‹åŒ–è¯¥æŒ‡é’ˆçš„ä¸¤ç§æ–¹æ³•ï¼šdouble (Point::*coord)() = Point::x;coord=Point::y;//è°ƒç”¨çš„ä¸¤ç§æ–¹æ³•ï¼š(origin.*coord)();(ptr-*coord)();//åˆ†åˆ«ä¼šè¢«è½¬æ¢æˆï¼ˆC++ä¼ªç ï¼‰(coord)(origin);(coord)(ptr); æŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆçš„å£°æ˜è¯­æ³•ï¼Œä»¥åŠæŒ‡å‘â€œmember selectionâ€è¿ç®—ç¬¦ï¼ˆ-æˆ– .ï¼‰çš„æŒ‡é’ˆï¼Œè¿™ä¸¤éƒ¨åˆ†çš„ä½œç”¨æ˜¯ä¸ºthisæŒ‡é’ˆä¿ç•™ç©ºé—´ã€‚ æ‰€ä»¥é™æ€æˆå‘˜å‡½æ•°çš„ç±»å‹æ˜¯å‡½æ•°æŒ‡é’ˆï¼Œå› ä¸ºä»–ä»¬ä¸éœ€è¦ member selection ï¼Œæ›´ä¸éœ€è¦ thisæŒ‡é’ˆã€‚ åœ¨æ²¡æœ‰è™šå‡½æ•°ï¼Œå¤šé‡ç»§æ‰¿ï¼Œè™šæ‹Ÿç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨å¯ä»¥è®© ä½¿ç”¨æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆä¸ä½¿ç”¨éæˆå‘˜å‡½æ•°çš„æŒ‡é’ˆ çš„æ•ˆç‡ç›¸åŒã€‚ æ”¯æŒâ€œæŒ‡å‘è™šæ‹Ÿæˆå‘˜å‡½æ•°â€çš„æŒ‡é’ˆ éœ€æ±‚åœºæ™¯ //z()æ˜¯ä¸ªè™šå‡½æ•°(Point::*pmf)()=Point::z;Point *ptr=new Point3d;ptr-z();\t//è°ƒç”¨Point3d::z()(ptr-*pmf)(); //è°ƒç”¨Point3d::z() ptr è°ƒç”¨ z()ï¼Œè¢«è°ƒç”¨çš„æ˜¯ Point 3d::z()ï¼› ptr é€šè¿‡ pmf è°ƒç”¨zï¼ˆï¼‰,è¢«è°ƒç”¨çš„è¿˜èƒ½æ˜¯ Point3d ä¸­çš„ z å—ï¼Ÿ ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ å®ç°æ–¹æ³• é¦–å…ˆï¼Œè™šå‡½æ•°çœŸæ­£åœ°å€åœ¨ç¼–è¯‘æœŸæœªçŸ¥ï¼Œåªèƒ½çŸ¥é“å®ƒçš„ virtual table slotã€‚ class Point\tpublic: virtual ~Point(); float x(); float y(); virtual float z();;Point::~Point; //å¾—åˆ°è™šå‡½æ•°è¡¨é‡Œçš„ç´¢å¼•1Point::x();\t//å¾—åˆ°å†…å­˜åœ°å€Point::y(); //å¾—åˆ°å†…å­˜åœ°å€Point::z();\t//å¾—åˆ°è™šå‡½æ•°è¡¨é‡Œçš„ç´¢å¼•2//é€šè¿‡ pmf è°ƒç”¨ z()ï¼Œä¼šè¢«å†…éƒ¨è½¬åŒ–ä¸ºç¼–è¯‘æœŸçš„å¼å­ï¼š(*ptr-vptr[(int)pmf])(ptr); //å¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­äº† äºæ˜¯å‡½æ•°æŒ‡é’ˆå°±æœ‰äº†ä¸¤ä¸ªæ„ä¹‰ï¼šæ™®é€šæˆå‘˜å‡½æ•°çš„å†…å­˜åœ°å€å’Œè™šå‡½æ•°çš„slotä¸“å±ç‰ˆã€‚ //pmfå†…éƒ¨å®šä¹‰float(Point::*pmf)(); è¿™ä¸ªå‡½æ•°è¦å…·å¤‡èƒ½å¯»å€ä¸¤ç§ç±»å‹çš„æˆå‘˜å‡½æ•°çš„èƒ½åŠ›ï¼š float Point::x() return _x; //ä¸€é•¿ä¸²å§float Point::z() return 0; //å°ä¸²//éƒ½å¯ä»¥æŒ‡å®šç»™ pmf äºæ˜¯pmfæœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š èƒ½æŒæœ‰ä¸¤ç§æ•°å€¼ï¼ˆæ³¨æ„ä¸æ˜¯åŒæ—¶) èƒ½åŒºåˆ†è¿™ä¸ªæ•°å€¼æ˜¯å†…å­˜åœ°å€è¿˜æ˜¯è™šè¡¨ç´¢å¼•å€¼ cfront2.0çš„è§£å†³åŠæ³•ï¼š (((int)pmf)~127) ?(*pmf)(ptr):(*ptr-vptr[(int)pmf](ptr)); è¿™ä¸ªå®ç°åªèƒ½åº”ç”¨åœ¨ç»§æ‰¿ä½“ç³»ä¸­æœ€å¤šåªæœ‰128ä¸ªè™šå‡½æ•°çš„æƒ…å†µã€‚ å¤šé‡ç»§æ‰¿ä¸‹ï¼ŒæŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆå¦‚é¢˜ï¼Œæ€æ ·è®©æŒ‡å‘æˆå‘˜å‡½æ•°çš„æŒ‡é’ˆåœ¨å¤šé‡ç»§æ‰¿ä¸‹å¯è¡Œï¼Ÿ Stroustrupçš„æ–¹æ³•ï¼š struct __mptr int delta;\tint index; //è¡¨ç° è™šè¡¨ç´¢å¼• ï¼ˆç”¨ä¸åˆ°å°±è®¾ä¸º-1ï¼‰\tunion ptrtofunc faddr; //è¡¨ç° æˆå‘˜å‡½æ•° int v_offset;\t;;(ptr-*pmf)();//è½¬æ¢ä¸º(pmf.index 0) ? //non-virtual\t(*pmf.faddr)(ptr) :\t//virtual\t(*ptr-vptr[pmf.index](ptr)); ç¼ºç‚¹ï¼š æ£€æŸ¥æˆæœ¬é«˜ MicrosoftæŠŠè¿™é¡¹æ£€æŸ¥æ‹¿æ‰ï¼Œå¯¼å…¥ä¸€ä¸ªå®ƒæ‰€è°“çš„vcall thunkã€‚ åœ¨æ­¤ç­–ç•¥ä¸‹ï¼Œfaddrè¢«æŒ‡å®šçš„è¦ä¸å°±æ˜¯çœŸæ­£çš„member function(å¦‚æœå‡½æ•°æ˜¯nonvirtualçš„è¯)ï¼Œè¦ä¸å°±æ˜¯vcall thunkçš„åœ°å€ã€‚ äºæ˜¯virtualæˆ–nonvirtualå‡½æ•°çš„è°ƒç”¨æ“ä½œé€æ˜åŒ–ï¼Œvcall thunkä¼šé€‰å‡ºå¹¶è°ƒç”¨ç›¸å…³virtual tableä¸­é€‚å½“çš„slotã€‚ ä¼ é€’ä¸€ä¸ªä¸å˜å€¼æŒ‡é’ˆç»™æˆå‘˜å‡½æ•°æ—¶ï¼Œå®ƒéœ€è¦äº§ç”Ÿä¸€ä¸ªä¸´æ—¶å¯¹è±¡ ä¸¾ä¾‹å­ï¼š extern Point3d foo(const Point3d , Point3d (Point3d::*)());void bar(const Point3d p ) Point3d pt = foo(p,Point3d::normal );//Point3d::normal çš„å€¼ç±»ä¼¼è¿™æ ·ï¼š0 , -1 , 10727417//éœ€è¦äº§ç”Ÿä¸´æ—¶å¯¹è±¡ï¼Œæœ‰æ˜ç¡®åˆå€¼_mptr temp = 0 , -1 , 10727417 //ä¼ªç foo(p,temp); å›åˆ°å¼€å§‹çš„é‚£ä¸ªç»“æ„ä½“ï¼š deltaå­—æ®µè¡¨ç¤ºthisæŒ‡é’ˆçš„offsetæŒ‡é’ˆï¼Œè€Œv_offsetå­—æ®µæ”¾çš„æ˜¯ä¸€ä¸ªvirtual base classï¼ˆæˆ–å¤šé‡ç»§æ‰¿ä¸­çš„ç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ªç­‰ç­‰ï¼‰çš„vpträ½ç½®ã€‚ å¦‚æœvptrè¢«ç¼–è¯‘å™¨æ”¾åœ¨classå¯¹è±¡çš„èµ·å¤´å¤„ï¼Œè¿™ä¸ªå­—æ®µå°±æ²¡ä»€ä¹ˆå¿…è¦äº†ï¼šè¿™äº›å­—æ®µåœ¨å¤šé‡ç»§æ‰¿æˆ–è™šæ‹Ÿç»§æ‰¿çš„æƒ…å†µä¸‹æ‰æœ‰å¿…è¦æ€§ã€‚ æœ‰è®¸å¤šç¼–è¯‘å™¨åœ¨è‡ªèº«å†…éƒ¨æ ¹æ®ä¸åŒçš„classesç‰¹æ€§æä¾›å¤šç§æŒ‡å‘member functionsçš„æŒ‡é’ˆå½¢å¼ï¼Œä¾‹å¦‚Microsoftå°±ä¾›åº”äº†ä¸‰ç§é’ˆå¯¹ï¼š ä¸€ä¸ªå•ä¸€ç»§æ‰¿å®ä¾‹(å…¶ä¸­å¸¦æœ‰vcall thunkåœ°å€æˆ–æ˜¯å‡½æ•°åœ°å€) ä¸€ä¸ªå¤šé‡ç»§æ‰¿å®ä¾‹(å…¶ä¸­å¸¦æœ‰faddrå’Œdeltaä¸¤ä¸ªmembers) ä¸€ä¸ªè™šæ‹Ÿç»§æ‰¿å®ä¾‹(å…¶ä¸­å¸¦æœ‰å››ä¸ªmembers) å†…è”å‡½æ•° åŠ äº†inlineå…³é”®å­—ï¼Œå‡½æ•°ä¸ä¸€å®šå°±æ˜¯å†…è”å‡½æ•°ã€‚ ç¼–è¯‘å™¨çœŸçš„ç›¸ä¿¡å®ƒå¯ä»¥æ‰©å±•æˆinlineå‡½æ•°æ—¶ï¼Œå…¶æ‰§è¡Œæˆæœ¬æ¯”ä¸€èˆ¬å‡½æ•°è°ƒç”¨å’Œè¿”å›æœºåˆ¶å¸¦æ¥çš„è´Ÿè·è¦ä½ã€‚ ç¼–è¯‘å™¨å¤„ç†inlineå‡½æ•°ï¼Œæœ‰ä¸¤ä¸ªé˜¶æ®µï¼š åˆ†æå‡½æ•°å®šä¹‰å’Œå¤æ‚åº¦ï¼Œç¼–è¯‘å™¨ä¼šåˆ¤æ–­èƒ½å¦æˆä¸ºinlineå‡½æ•°ã€‚ å¦‚æœå‡½æ•°æˆä¸äº†inline ï¼Œå°±ä¼šè½¬æˆä¸€ä¸ªstaticå‡½æ•°ï¼Œå¹¶åœ¨è¢«ç¼–è¯‘æ¨¡å—å†…äº§ç”Ÿå¯¹åº”å‡½æ•°å®šä¹‰ã€‚ çœŸæ­£çš„inlineå‡½æ•°æ‰©å±•æ“ä½œæ˜¯åœ¨è°ƒç”¨çš„é‚£ä¸€ç‚¹ä¸Šï¼Œè¿™ä¼šå¸¦æ¥å‚æ•°çš„æ±‚å€¼æ“ä½œä»¥åŠä¸´æ—¶æ€§å¯¹è±¡çš„ç®¡ç†ã€‚ Formal argumentsinline å‡½æ•°æ‰©å±•æœŸé—´ï¼Œå½¢å‚ä¼šè¢«å®å‚æ›¿ä»£ã€‚ ä½†æ— è„‘æ›¿ä»£å®å‚å†³å®šæ˜¯æœ‰å‰¯ä½œç”¨çš„ï¼Œæ¯”å¦‚ä¸€äº›è¡¨è¾¾å¼çš„é‡å¤æ±‚å€¼ä¹‹ç±»çš„ã€‚ inline int min(int i,int j)\treturn ij?i:j;inline int bar()\tint minval;\tint val1=1024;\tint val2=2048;\tminval=min(val1,val2);\t//å‚æ•°ç›´æ¥æ›¿æ¢ï¼Œä¼šæ‰©å±•æˆ minval=val1val2?val1:val2;\tminval=min(1024,2048);\t//è®¡ç®—å¸¸é‡è¡¨è¾¾å¼10242048?1024:2048å¾—å‡ºç»“æœ1024ï¼Œç›´æ¥ä½¿ç”¨å¸¸é‡minval=1024\tminval=min(foo(),bar()+1)\t//æœ‰å‰¯ä½œç”¨ï¼Œå¯¼å…¥ä¸´æ—¶å¯¹è±¡,é¿å…é‡å¤æ±‚å€¼\t//int t1,t2;\t//minval=(t1=foo()),(t2=bar()+1),t1t2?t1:t2;\treturn minval; Local variablesåŠ å…¥ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œç±»ä¼¼int minval inline int min(int i,intt j)\tint minval=ij?i:j;\treturn minval;//å¦‚æœè¿™æ ·è°ƒç”¨\tint local_val;\tint minval;\t//...\tminval=min(val1,val2);// inlineå‡½æ•°æ‰©å±•åçš„å±€éƒ¨å˜é‡å¯èƒ½å˜æˆä¸‹é¢çš„æ ·å­\tint local_val;\tint minval;\t//å°†inlineå‡½æ•°çš„å±€éƒ¨å˜é‡mangling\tint __min_lv_minval;\tminval=(__min_lv_minval=val1val2?val1:val2),__min_lv_minval; å¦‚æœ inline å‡½æ•°ä»¥å•ä¸€è¡¨è¾¾å¼æ‰©å±•å¤šæ¬¡ï¼Œåˆ™æ¯æ¬¡æ‰©å±•éƒ½éœ€è¦è‡ªå·±çš„ä¸€ç»„å±€éƒ¨å˜é‡ã€‚ inline å‡½æ•°ä»¥åˆ†ç¦»çš„å¤šä¸ªå¼å­è¢«æ‰©å±•å¤šæ¬¡ï¼Œé‚£ä¹ˆåªéœ€è¦ä¸€ç»„å±€éƒ¨å˜é‡æ±‚å€¼å°±èƒ½é‡å¤ä½¿ç”¨ã€‚ inline å‡½æ•°æ‰©å±•åçš„å±€éƒ¨å˜é‡ï¼Œå†åŠ ä¸Šæœ‰å‰¯ä½œç”¨çš„å‚æ•°ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¤§é‡ä¸´æ—¶æ€§å¯¹è±¡çš„äº§ç”Ÿï¼Œç‰¹åˆ«æ˜¯å®ƒä»¥å•ä¸€è¡¨è¾¾å¼è¢«æ‰©å±•å¤šæ¬¡çš„è¯ï¼Œä¾‹å¦‚ï¼š //ä¾‹å¦‚ï¼šminval=min(val1,val2)+min(foo(),foo()+1);//å¯èƒ½æ‰©å±•æˆï¼š//ä¸ºå±€éƒ¨å˜é‡äº§ç”Ÿä¸´æ—¶å˜é‡int __min_lv_minval_00;int __min_lv_minval_01;//ä¸ºæ”¾ç½®å‰¯ä½œç”¨å€¼è€Œäº§ç”Ÿä¸´æ—¶å˜é‡ ï¼ˆå‰¯ä½œç”¨å€¼å³è¦é‡å¤è®¡ç®—çš„å€¼ï¼‰int t1;int t2;minval= ((__min_lv_minval_00 = val1 val2 ? val1:val2), __min_lv_minval_00) + ((__min_lv_minval_01= (t1=foo()), (t2=foo()+1), t1 t2 ? t1:t2), __min_lv_minval_01 ); ä¸¤ä¸ªç‰¹æ€§ inline å‡½æ•°å¯ä»¥æœ‰æ•ˆå­˜å–å°è£…äºclassä¸­çš„nonpublicæ•°æ®ï¼ŒåŒæ—¶ä¹Ÿæ˜¯#defineçš„ä¸€ä¸ªå®‰å…¨ä»£æ›¿å“ã€‚ ä½†å…¶å¼Šç«¯æ˜¯ï¼Œä¸€ä¸ªinlineå‡½æ•°å¦‚æœè¢«è°ƒç”¨å¤ªå¤šæ¬¡ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„æ‰©å±•ç ï¼Œä½¿ç¨‹åºçš„å¤§å°æš´æ¶¨ã€‚ inlineé‡Œå†æœ‰inlineå¯èƒ½å› ä¸ºè¿é”å¤æ‚åº¦æ‰©å±•ä¸å‡ºæ¥ã€‚ æ‰€ä»¥ä½ éœ€è¦å°å¿ƒå¤„ç† inline å‡½æ•° è¿”å›ä¸€ä¸ªå³å°†é”€æ¯çš„å±€éƒ¨å¯¹è±¡ï¼Œåƒè¿™æ ·ï¼š X bar() X xx; ... return xx;//bar çš„è¿”å›å€¼æ€ä¹ˆä»å±€éƒ¨å¯¹è±¡ xx ä¸­æ‹·è´å›æ¥ã€‚ cfrontåšæ³•ï¼š åŠ ä¸Šä¸€ä¸ªç±»å‹ä¸ºç±»å¯¹è±¡å¼•ç”¨çš„é¢å¤–å‚æ•°ï¼Œç”¨æ¥æ”¾ç½®æ‹·è´æ„é€ å‡ºçš„è¿”å›å€¼ã€‚ return å‰ç©¿æ’ä¸€ä¸ªæ‹·è´æ„é€ çš„æ“ä½œï¼šåˆ©ç”¨ä¼ å›å€¼(ä¾‹å­ä¸­çš„xx )åˆå§‹åŒ–ä¸Šé¢å¢åŠ çš„é¢å¤–å‚æ•°ã€‚ äºæ˜¯æˆ‘ä»¬å¸Œæœ›å¾—åˆ°çš„å±€éƒ¨å¯¹è±¡å€¼ï¼Œåœ¨çœŸæ­£çš„è¿”å›å€¼è¿”å›é€šè¿‡é¢å¤–å‚æ•°è¿”å›äº†ï¼›è€ŒçœŸæ­£çš„è¿”å›å€¼å‘¢ï¼Ÿ void bar(X __result) //é¢å¤–å‚æ•° X xx xx.X::X(); //é»˜è®¤æ„é€  __result.X::XX(xx); //æ‹·è´æ„é€  return ; //çœŸæ­£çš„è¿”å›å€¼ä»€ä¹ˆéƒ½ä¸è¿”å›ï¼ˆæ³¨æ„å‡½æ•°ç±»å‹) æ¥ä¸‹æ¥è½¬æ¢æ¯ä¸ªbar()è°ƒç”¨æ“ä½œï¼š X xx = bar(); //è½¬åŒ–ä¸ºX xx; bar(xx); //ä¸å¿…å®è¡Œé»˜è®¤æ„é€ bar().memfunc();//å¯èƒ½è½¬åŒ–ä¸ºX __temp0(bar(__temp0),__temp0).memfunc();X (*pf)();pf = bar;//è½¬åŒ–ä¸ºvoid (*pf)(X);pf = bar; æ¦‚æ‹¬æ¥è¯´ï¼šç”¨ä¸€ä¸ªè½½ä½“æ¥ copy å¯¹è±¡ï¼ˆå·²ç»æœ‰è½½ä½“äº†å°±ä½œä¸ºå‚æ•°ï¼‰ã€‚"},{"title":"æ¹–ç§‘å¤§(1)","path":"/wiki/network/æ¹–ç§‘å¤§(1).html","content":"ç¬¬ä¸€ç« å› ç‰¹ç½‘æ¦‚è¿°ç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘ ç½‘ç»œï¼ˆNetworkï¼‰ç”±è‹¥å¹²ç»“ç‚¹ï¼ˆNode) å’Œè¿æ¥è¿™äº›ç»“ç‚¹çš„é“¾è·¯(link)ç»„æˆã€‚ äº’è”ç½‘ ( Network of Networks ):å¤šä¸ªç½‘ç»œé€šè¿‡è·¯ç”±å™¨äº’è¿æ„æˆçš„è¦†ç›–èŒƒå›´æ›´å¤§çš„ç½‘ç»œï¼ˆç½‘ç»œçš„ç½‘ç»œï¼‰ã€‚ å› ç‰¹ç½‘(Internet)ï¼šä¸–ç•Œä¸Šæœ€å¤§çš„äº’è¿ç½‘ç»œ åŒºåˆ† internet(äº’è”ç½‘)ï¼šé€šç”¨åè¯ï¼Œæ³›æŒ‡å¤šä¸ªè®¡ç®—æœºç½‘ç»œäº’è¿çš„ç½‘ç»œï¼Œé€šä¿¡åè®®éšæ„ã€‚ Internet (å› ç‰¹ç½‘)ï¼šä¸“æœ‰åè¯ï¼ŒæŒ‡ä¸€ä¸ªå‰èº«ä¸ºARPANETçš„ç‰¹å®šè®¡ç®—æœºç½‘ç»œï¼Œé‡‡ç”¨TCPIPåè®®æ—ä½œä¸ºé€šä¿¡è§„åˆ™ã€‚ å› ç‰¹ç½‘å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µå•ä¸ªç½‘ç»œARPANET â†’ ä¸‰çº§ç»“æ„å› ç‰¹ç½‘ â†’ å¤šå±‚æ¬¡ISPç»“æ„å› ç‰¹ç½‘ å› ç‰¹ç½‘æœåŠ¡æä¾›è€…ISPï¼šInternet Service Provider ï¼ˆè”é€šã€ç§»åŠ¨ã€ç”µä¿¡ï¼‰ ISP æ‹¥æœ‰é€šä¿¡çº¿è·¯å’Œè·¯ç”±å™¨ï¼ˆå¤§å‹ï¼‰ç­‰ç½‘ç»œè®¾å¤‡ï¼Œå› æ­¤æ™®é€šç”¨æˆ·å¾€å¾€é€šè¿‡ ISP æ¥å…¥å› ç‰¹ç½‘ï¼Œè¿™æ—¶ ISP ä¼šä»å› ç‰¹ç½‘ç®¡ç†æœºæ„ä¸ºç”¨æˆ·ç”³è¯·IPåœ°å€ã€‚ å¦ï¼šç”¨æˆ·ä¹Ÿèƒ½ä½œä¸ºISPã€‚ä½ åªéœ€è¦è´­ä¹°äº›è°ƒåˆ¶è§£è°ƒå™¨ä¹‹ç±»çš„ä¸œè¥¿ï¼Œè®©å…¶ä»–äººè¿æ¥ä½ ã€‚ å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œç›¸å…³éƒ¨é—¨ï¼š ISOC â€”â€” IAB â€”â€” IETF å’Œ IRTF å› ç‰¹ç½‘åˆ¶å®šæ ‡å‡†é¢å‘å…¬ä¼—ã€‚ æ­£å¼æ ‡å‡†åˆ¶å®šé˜¶æ®µï¼š å› ç‰¹ç½‘è‰æ¡ˆ å»ºè®®æ ‡å‡† ï¼ˆRFCæ–‡æ¡£ï¼‰ è‰æ¡ˆæ ‡å‡† å› ç‰¹ç½‘æ ‡å‡† å› ç‰¹ç½‘çš„ç»„æˆ è¾¹ç¼˜éƒ¨åˆ†ï¼šæ‰€æœ‰å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºã€‚éƒ¨åˆ†æ˜¯ç”¨æˆ·ç›´æ¥ä½¿ç”¨ï¼Œæ¥é€šä¿¡å’Œå…±äº«èµ„æºã€‚ æ ¸å¿ƒéƒ¨åˆ†ï¼šå¤§é‡ç½‘ç»œå’Œè¿æ¥ç½‘ç»œçš„è·¯ç”±å™¨ã€‚å®ƒä»¬ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡ã€‚ äº¤æ¢æ–¹å¼ç”µè·¯äº¤æ¢(Circuit Switching) ç”µè¯äº¤æ¢æœºæ¥é€šç”µè¯çº¿çš„æ–¹å¼ç§°ä¸ºç”µè·¯äº¤æ¢ã€‚ äº¤æ¢å³æŒ‰ç…§æŸç§æ–¹å¼åŠ¨æ€åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æºã€‚ ç”µè·¯äº¤æ¢ä¸‰ä¸ªæ­¥éª¤ï¼š å»ºç«‹è¿æ¥ï¼ˆåˆ†é…é€šä¿¡èµ„æºï¼‰ é€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰ é‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰ è¿™ä¸ªè¿æ¥æ˜¯ä¸€æ¡ä¸“ç”¨çš„ç‰©ç†é€šè·¯ã€‚ å»ºç«‹è¿æ¥çš„ä¼ è¾“ï¼šæ¯”ç‰¹æµç›´è¾¾ã€‚ åˆ†ç»„äº¤æ¢(Packet Switching)ä¼ è¾“ä¿¡æ¯åœ¨å‘é€æ—¶ï¼Œå°†ä¿¡æ¯åˆ†æ®µï¼Œæ¯ä¸€æ®µæ ¹æ®ä¸€å®šè§„åˆ™æ·»åŠ é¦–éƒ¨ä¿¡æ¯(åŒ…å¤´)ï¼Œæ„æˆåˆ†ç»„ï¼Œç§°ä¸ºåŒ…ã€‚åˆ†ç»„äº¤æ¢æœºä¼šæ ¹æ®åŒ…å¤´ä¿¡æ¯è¿›è¡Œåˆç†ä¼ è¾“ã€‚åˆ°è¾¾ç›®çš„åœ°åå»æ‰åŒ…å¤´ï¼Œè¿˜åŸä¿¡æ¯ã€‚ åˆç†ä¼ è¾“æ„å‘³ç€åŒ…çš„ä¼ è¾“å¯ä»¥èµ°ä¸åŒè·¯å¾„ã€‚ åˆ†ç»„ä¼ è¾“æ„å‘³ç€ä¼ è¾“æœ‰ä¹±åºæ€§ï¼šåˆ†ç»„åˆ°è¾¾ç›®çš„åœ°åé¡ºåºå¯èƒ½ä¸åŒã€‚ (è¿™ä¼šé€ æˆæ½œåœ¨çš„åˆ†ç»„ä¸¢å¤±ã€è¯¯ç ã€é‡å¤é—®é¢˜) ä¸‰ä¸ªä¸»ä½“ï¼šå‘é€æ–¹ï¼Œè·¯ç”±å™¨ï¼Œæ¥æ”¶æ–¹ã€‚ ä¸»ä½“ ä»»åŠ¡ å‘é€æ–¹ æ„é€ åˆ†ç»„ï¼Œå‘é€åˆ†ç»„ è·¯ç”±å™¨ ç¼“å­˜åˆ†ç»„ï¼Œè½¬å‘åˆ†ç»„ æ¥æ”¶æ–¹ æ¥æ”¶åˆ†ç»„ï¼Œè¿˜åŸæŠ¥æ–‡ åˆ†ç»„å­˜å‚¨è½¬å‘ï¼šå‡å°‘äº†è½¬å‘æ—¶å»¶ï¼Œé¿å…é•¿æŠ¥æ–‡é•¿æ—¶é—´å ç”¨é“¾è·¯ï¼Œæ–¹ä¾¿å·®é”™æ§åˆ¶ã€‚ æŠ¥æ–‡äº¤æ¢(Message Switching) ä¸»è¦ç”¨äºæ—©æœŸç”µæŠ¥é€šä¿¡ç½‘ç»œã€‚ç°å·²è¢«åˆ†ç»„äº¤æ¢å–ä»£ã€‚ éšæ—¶å‘é€æŠ¥æ–‡ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥ã€‚å…ˆä¼ é€åˆ°ç›¸é‚»ç»“ç‚¹äº¤æ¢æœºï¼Œå­˜ä¸‹æ¥åå­˜å‚¨è½¬å‘åˆ°ä¸‹ä¸€ç›¸é‚»ç»“ç‚¹äº¤æ¢æœºã€‚ **æŠ¥æ–‡å­˜å‚¨è½¬å‘ï¼š**ä¸é™åˆ¶æŠ¥æ–‡å¤§å°ï¼Œéœ€è¦ç»“ç‚¹äº¤æ¢æœºæœ‰è¾ƒå¤§ç¼“å­˜ç©ºé—´ã€‚ å¯¹æ¯” äº¤æ¢æ–¹å¼ ä¼˜ç‚¹ ç¼ºç‚¹ ç”µè·¯äº¤æ¢ 1) é€šä¿¡æ—¶å»¶å°2) æœ‰åºä¼ è¾“3) æ²¡æœ‰å†²çª4) é€‚ç”¨èŒƒå›´å¹¿5) å®æ—¶æ€§å¼º6) æ§åˆ¶ç®€å• 1)å»ºç«‹è¿æ¥æ—¶é—´é•¿2)çº¿è·¯ç‹¬å ï¼Œä½¿ç”¨æ•ˆç‡ä½3)çµæ´»æ€§å·®4)éš¾ä»¥è§„æ ¼åŒ– æŠ¥æ–‡äº¤æ¢ 1)æ— éœ€å»ºç«‹è¿æ¥2)åŠ¨æ€åˆ†é…çº¿è·¯3)æå±€çº¿è·¯å¯é æ€§4)æé«˜çº¿è·¯åˆ©ç”¨ç‡5)æä¾›å¤šç›®æ ‡æœåŠ¡ 1)èµ·äº†è½¬å‘æ—¶å»¶2)éœ€è¦è¾ƒå¤§å­˜å‚¨ç¼“å­˜ç©ºé—´3)éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡ åˆ†ç»„äº¤æ¢ 1)æ— éœ€å»ºç«‹è¿æ¥ 2)çº¿è·¯åˆ©ç”¨ç‡é«˜ 3)ç®€åŒ–äº†å­˜å‚¨ç®¡ç† 4)åŠ é€Ÿä¼ è¾“ 5)å‡å°‘å‡ºé”™æ¦‚ç‡å’Œé‡å‘æ•°æ®é‡ 1)å¼•èµ·äº†è½¬å‘æ—¶å»¶2)éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡3)å¯¹äºæ•°æ®æŠ¥æœåŠ¡ï¼Œå­˜åœ¨å¤±åºã€ä¸¢å¤±æˆ–é‡å¤åˆ†ç»„çš„é—®é¢˜ï¼šå¯¹äºè™šç”µè·¯æœåŠ¡ï¼Œå­˜åœ¨å‘¼å«å»ºç«‹ã€æ•°æ®ä¼ è¾“å’Œè™šç”µè·¯é‡Šæ”¾ä¸‰ä¸ªè¿‡ç¨‹ è®¡ç®—æœºç½‘ç»œå®šä¹‰ è®¡ç®—æœºç½‘ç»œç²¾ç¡®å®šä¹‰æœªç»Ÿä¸€ã€‚ ç®€å•å®šä¹‰ï¼šä¸€äº›äº’ç›¸è¿æ¥çš„ã€è‡ªæ²»çš„è®¡ç®—æœºçš„é›†åˆã€‚ äº’è¿ï¼šè®¡ç®—æœºé—´å¯ä»¥é€šè¿‡æœ‰çº¿æˆ–æ— çº¿çš„æ–¹å¼è¿›è¡Œæ•°æ®é€šä¿¡ï¼› è‡ªæ²»ï¼šæŒ‡æœ‰è‡ªå·±ç¡¬ä»¶è½¯ä»¶çš„ï¼Œå•ç‹¬è¿è¡Œä½¿ç”¨çš„ç‹¬ç«‹è®¡ç®—æœº é›†åˆï¼šè‡³å°‘ä¸¤å°è®¡ç®—æœºã€‚ ç²¾å‡†å®šä¹‰ï¼šè®¡ç®—æœºç½‘ç»œä¸»è¦ç”±ä¸€äº›é€šç”¨çš„ï¼Œå¯ç¼–ç¨‹çš„ç¡¬ä»¶äº’è¿è€Œæˆçš„ã€‚è¿™äº›å¯ç¼–ç¨‹çš„ç¡¬ä»¶èƒ½å¤Ÿç”¨æ¥ä¼ é€å¤šç§ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¹¶èƒ½å¤Ÿæ”¯æŒå¹¿æ³›å’Œæ—¥ç›Šå¢é•¿çš„åº”ç”¨ã€‚ è¿™äº›ç¡¬ä»¶å¹¶éä¸“é—¨ç”¨æ¥å®ç°æŸä¸€ç‰¹å®šç›®çš„ ï¼ˆä¾‹å¦‚ï¼Œä¼ é€æ•°æ®æˆ–è§†é¢‘ä¿¡å·ï¼‰ï¼Œè€Œæ˜¯èƒ½ä¼ é€ä¸åŒç±»å‹æ•°æ®ï¼ŒåŒ…æ‹¬åº”ç”¨ã€‚ ç¡¬ä»¶åŒ…æ‹¬æ™ºèƒ½æ‰‹è¡¨ç­‰ã€‚ åˆ†ç±»æŒ‰äº¤æ¢æŠ€æœ¯åˆ†ç±»ï¼š ç”µè·¯äº¤æ¢ç½‘ç»œ æŠ¥æ–‡äº¤æ¢ç½‘ç»œ åˆ†ç»„äº¤æ¢ç½‘ç»œ æŒ‰ä½¿ç”¨è€…åˆ†ç±»ï¼š å…¬ç”¨ç½‘ï¼šå¤§å‹ç½‘ç»œï¼Œä¸€èˆ¬ç”±ç”µä¿¡å…¬å¸å‡ºèµ„æ„å»ºã€‚æ™®é€šç”¨æˆ·ç¼´è´¹å‚ä¸ã€‚ ä¸“ç”¨ç½‘ï¼šé’ˆå¯¹ç‰¹å®šå•ä½ã€ç‰¹å®šç³»ç»Ÿçš„ä¸“ç”¨ç½‘ã€‚ æŒ‰ä¼ è¾“ä»‹è´¨åˆ†ç±»ï¼š æœ‰çº¿ç½‘ç»œï¼šåŒç»çº¿ç½‘ç»œã€å…‰çº¤ç½‘ç»œã€‚ æ— çº¿ç½‘ç»œï¼šwifi æŒ‰è¦†ç›–èŒƒå›´åˆ†ç±»ï¼š å¹¿åŸŸç½‘WANï¼ˆWide Area Networkï¼‰ ä½œç”¨èŒƒå›´é€šå¸¸ä¸ºå‡ ååˆ°å‡ åƒå…¬é‡Œï¼Œå› è€Œæœ‰æ—¶ä¹Ÿç§°ä¸ºè¿œç¨‹ç½‘ï¼ˆlong haul networkï¼‰ã€‚ ä»»åŠ¡æ˜¯é€šè¿‡é•¿è·ç¦»ï¼ˆä¾‹å¦‚ï¼Œè·¨è¶Šä¸åŒçš„å›½å®¶ï¼‰è¿é€ä¸»æœºæ‰€å‘é€çš„æ•°æ®ã€‚ å¹¿åŸŸç½‘æ˜¯äº’è”ç½‘çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚ åŸåŸŸç½‘MAN ä½œç”¨èŒƒå›´ä¸€èˆ¬æ˜¯ä¸€ä¸ªåŸå¸‚ï¼Œå¯è·¨è¶Šå‡ ä¸ªè¡—åŒºç”šè‡³æ•´ä¸ªåŸå¸‚ å±€åŸŸç½‘LAN ä¸€èˆ¬ç”¨å¾®å‹è®¡ç®—æœºæˆ–å·¥ä½œç«™é€šè¿‡é«˜é€Ÿé€šä¿¡çº¿è·¯ç›¸è¿ï¼ˆé€Ÿç‡é€šå¸¸åœ¨ 10 Mbits ä»¥ä¸Šï¼‰ï¼Œä½†åœ°ç†ä¸ŠèŒƒå›´è¾ƒå°ï¼ˆ1 km å·¦å³ï¼‰ ä¸ªåŸŸç½‘PAN å°±æ˜¯åœ¨ä¸ªäººå·¥ä½œçš„åœ°æ–¹æŠŠä¸ªäººä½¿ç”¨çš„ç”µå­è®¾å¤‡ç”¨æ— çº¿æŠ€æœ¯è¿æ¥èµ·æ¥çš„ç½‘ç»œã€‚ (æ— çº¿è€³æœºï¼Œè“ç‰™è®¾å¤‡) æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±»ï¼š æ€»çº¿å‹ç½‘ç»œ ä¼˜ç‚¹ï¼šå»ºç½‘å®¹æ˜“ï¼Œå¢å‡ç»“ç‚¹æ–¹ä¾¿ã€‚èŠ‚çœçº¿è·¯ã€‚ ç¼ºç‚¹ï¼š1.é‡è´Ÿè½½é€šä¿¡æ•ˆç‡ä¸é«˜ã€‚2.ä¸€å¤„æ•…éšœï¼Œå…¨çº¿ç˜«ç—ªã€‚ æ˜Ÿå‹ç½‘ç»œ ä¸­å¤®è®¾å¤‡ï¼šæ—©æœŸè®¡ç®—æœºï¼Œä¸­æœŸé›†çº¿å™¨ï¼ŒåæœŸè·¯ç”±å™¨äº¤æ¢æœºã€‚ ä¼˜ç‚¹ï¼šä¾¿äºç½‘ç»œé›†ä¸­æ§åˆ¶å’Œç®¡ç†ã€‚ ç¼ºç‚¹ï¼šæˆæœ¬é«˜ï¼Œä¸­å¤®è®¾å¤‡å¯¹æ•…éšœæ•æ„Ÿã€‚ ç¯å½¢ç½‘ç»œ ç½‘çŠ¶å‹ç½‘ç»œ ä¼˜ç‚¹ï¼šå¯é æ€§é«˜ ç¼ºç‚¹ï¼šæ§åˆ¶å¤æ‚ã€çº¿è·¯æˆæœ¬é«˜ æ€§èƒ½æŒ‡æ ‡é€Ÿç‡ å•†å®¶å£°ç§°çš„çš„250Gç¡¬ç›˜ä¹°æ¥åœ¨ç”µè„‘ä¸Šæ˜¾ç¤ºçš„å±…ç„¶æ˜¯236Gã€‚ä¸æ˜¯å•†å®¶ä½œå‡ï¼Œè€Œæ˜¯å› ä¸ºä¸¤ä¸ªæ•°æ®å•ä½ä¸åŒã€‚ ç°å®ä¸­çš„æµ‹é‡å•ä½ï¼Œ1k 1000bï¼Œè®¡ç®—æœºä¸­èµ„æºå•ä½ï¼Œ1K 1024 Bit ï¼Œè¿™æ˜¯è§†è§’é—®é¢˜ã€‚ é€Ÿç‡å•ä½å’Œæ¯”ç‰¹å•ä½çš„è§†è§’åŒç†ã€‚ (æ³¨æ„åŒºåˆ†Mã€Kç­‰å•ä½å Bå’Œb çš„å¤§å°å†™) æ¯”ç‰¹ï¼šè®¡ç®—æœºçš„æ•°æ®é‡å•ä½ï¼Œä¿¡æ¯å­¦çš„ä¿¡æ¯é‡å•ä½ã€‚ Byteï¼Œbit ï¼Œ 1KB 2^10B é€Ÿç‡ï¼šè®¡ç½‘ä¸»æœºåœ¨æ•°å­—ä¿¡é“ä¸Šï¼Œä¼ é€æ¯”ç‰¹çš„é€Ÿç‡å•ä½ï¼Œä¹Ÿç§°æ¯”ç‰¹ç‡ã€æ•°æ®ç‡ã€‚ bits, bps , bs , 1kbs 1000 bs ç¤ºä¾‹é¢˜ï¼š å¸¦å®½ åœ¨æ¨¡æ‹Ÿä¿¡å·ç³»ç»Ÿï¼šä¸åŒé¢‘ç‡æˆåˆ†å æ®çš„é¢‘ç‡èŒƒå›´ å•ä½ï¼šHz (kHz , MHz , GHz) åœ¨è®¡ç½‘ä¸­ï¼šç½‘ç»œå¸¦å®½ï¼Œè¡¨ç¤ºå•ä½æ—¶é—´å†…ä»ç½‘ç»œä¸€ç‚¹åˆ°å¦ä¸€ç‚¹æ‰€èƒ½é€šè¿‡çš„â€œæœ€é«˜æ•°æ®ç‡â€ å•ä½ï¼šbs (kbs , Mbs , Gbs , Tbs) è¡¨ç¤ºç½‘ç»œé€šä¿¡çº¿è·¯ä¼ é€æ•°æ®çš„èƒ½åŠ› ä¸¤è€…æœ‰å¯†åˆ‡è”ç³»ã€‚ä¸€æ¡é€šä¿¡çº¿è·¯çš„é¢‘å¸¦å®½åº¦è¶Šå®½ï¼Œä¼ è¾“æ•ˆç‡çš„æœ€é«˜æ•°æ®ç‡è¶Šé«˜ã€‚ æœ‹å‹é—®ï¼šä½ å®¶å‡ºå£ç½‘é€Ÿæœ‰å¤šå¤§ï¼Œå›ç­”æ˜¯200M(å…†) ï¼Œè¿™é‡Œçœç•¥äº†æ¯”ç‰¹æ¯ç§’ã€‚ æ­£ç¡®æè¿°ï¼šå®Œæ•´é€Ÿç‡ä¸º200Mbs ååé‡ååé‡ï¼šåœ¨å•ä½æ—¶é—´å†…é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡ã€‚ ç»å¸¸ç”¨äºæè¿°æµ‹é‡ç½‘ç»œçš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯æœ‰å¤šå°‘æ•°æ®é‡èƒ½é€šè¿‡ç½‘ç»œã€‚ ååé‡å—ç½‘ç»œå¸¦å®½å’Œé¢å®šé€Ÿç‡é™åˆ¶ã€‚ å¸¦å®½1 Gbsçš„ä»¥å¤ªç½‘ï¼Œä»£è¡¨å…¶é¢å®šé€Ÿç‡æ˜¯1 Gbsï¼Œè¿™ä¸ªæ•°å€¼ä¹Ÿæ˜¯è¯¥ä»¥å¤ªç½‘çš„ååé‡çš„ç»å¯¹ä¸Šé™å€¼ã€‚å› æ­¤ï¼Œå¯¹äºå¸¦å®½1 Gbsçš„ä»¥å¤ªç½‘ï¼Œå¯èƒ½å®é™…ååé‡åªæœ‰ 700 Mbsï¼Œç”šè‡³æ›´ä½ã€‚ æ³¨æ„ï¼šååé‡è¿˜å¯ä»¥ç”¨æ¯ç§’ä¼ é€çš„å­—èŠ‚æ•°æˆ–å¸§æ•°è¡¨ç¤º æ—¶å»¶æ—¶å»¶ : æ•°æ®ï¼ˆä¸€ä¸ªæŠ¥æ–‡æˆ–åˆ†ç»„ï¼Œç”šè‡³æ¯”ç‰¹ï¼‰ä»ç½‘ç»œï¼ˆæˆ–é“¾è·¯ï¼‰çš„ä¸€ç«¯ä¼ é€åˆ°å¦ä¸€ç«¯æ‰€éœ€çš„æ—¶é—´ã€‚ ç½‘ç»œæ—¶å»¶ç”±å‡ éƒ¨åˆ†ç»„æˆï¼š å‘é€æ—¶å»¶ ä¸»æœºæˆ–è·¯ç”±å™¨å‘é€æ•°æ®å¸§æ‰€éœ€è¦çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ä»å‘é€æ•°æ®å¸§çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ç®—èµ·ï¼Œåˆ°è¯¥å¸§çš„æœ€åä¸€ä¸ªæ¯”ç‰¹å‘é€å®Œæ¯•æ‰€éœ€çš„æ—¶é—´ã€‚ è®¡ç®—ï¼šåˆ†ç»„é•¿åº¦(b)å‘é€é€Ÿç‡(bs) ä¼ æ’­æ—¶å»¶ ç”µç£æ³¢åœ¨ä¿¡é“ä¸­ä¼ æ’­ä¸€å®šçš„è·ç¦»éœ€è¦èŠ±è´¹çš„æ—¶é—´ã€‚ è®¡ç®—ï¼šä¿¡é“é•¿åº¦(m)ç”µç£æ³¢ä¼ æ’­é€Ÿç‡(ms) å¤„ç†æ—¶å»¶ ä¸»æœºæˆ–è·¯ç”±å™¨åœ¨æ”¶åˆ°åˆ†ç»„æ—¶è¦èŠ±è´¹ä¸€å®šæ—¶é—´è¿›è¡Œå¤„ç† æ’é˜Ÿæ—¶å»¶ åˆ†ç»„åœ¨è¿›è¿‡ç½‘ç»œä¼ è¾“æ—¶ï¼Œè¦ç»è¿‡è®¸å¤šè·¯ç”±å™¨ã€‚ä½†åˆ†ç»„åœ¨è¿›å…¥è·¯ç”±å™¨åè¦å…ˆåœ¨è¾“å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿç­‰å¾…å¤„ç†ã€‚ æœ‰æ—¶ä¼šæŠŠæ’é˜Ÿæ—¶å»¶çœ‹æˆå¤„ç†æ—¶å»¶ ä¸€éƒ¨åˆ† æ€»æ—¶å»¶ å‘é€æ—¶å»¶ + ä¼ æ’­æ—¶å»¶ + å¤„ç†æ—¶å»¶ ï¼ˆå¤„ç†æ—¶å»¶ + æ’é˜Ÿæ—¶å»¶ï¼‰ æ³¨æ„ç‚¹ æ„å»ºè®¾å¤‡æ—¶ï¼Œä¸åŒè®¾å¤‡å’Œä¼ è¾“ä»‹è´¨çš„ä¼ é€é€Ÿç‡çš„é€Ÿåº¦åº”è¯¥è¿‘ä¼¼ã€‚å¦åˆ™é€Ÿåº¦å¿«çš„ä¼šåˆ¶çº¦äºé€Ÿåº¦æ…¢çš„éƒ¨åˆ†ã€‚ ä¸»æœºå‘é€é€Ÿç‡å—ç½‘å¡å‘é€é€Ÿç‡å’Œä¿¡é“å¸¦å®½ã€æ¥å£é€Ÿç‡å½±å“ï¼Œå…¶ä¸­é€Ÿç‡æœ€æ…¢çš„éƒ¨åˆ†ä¼šå†³å®šæ•´ä¸ªå‘é€é€Ÿç‡ã€‚ ç”µç£æ³¢åœ¨è‡ªç”±ç©ºé—´å’Œç½‘ç»œä¼ è¾“ä»‹è´¨ä¸­çš„ä¼ æ’­é€Ÿåº¦æ˜¯ä¸ä¸€æ ·çš„ã€‚ ä»‹è´¨ é€Ÿåº¦ è‡ªç”±ç©ºé—´ 3.0 * 10^8 é“œçº¿ 2.3 * 10^8 |å…‰çº¤ | 2.0 * 10^8| å½“å¤„ç†æ—¶å»¶å¿½ç•¥ä¸è®¡æ—¶ï¼Œå‘é€æ—¶å»¶ å’Œ ä¼ æ’­æ—¶å»¶ è°å ä¸»å¯¼ï¼Œè¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚ ä¾‹å¦‚åŒæ ·ä¼ æ’­è·ç¦»å’Œå¸¦å®½ï¼Œæ•°æ®å—é•¿åº¦ä¸åŒä¼šå¯¼è‡´å†³å®šå› ç´ çš„ä¸åŒã€‚ æ—¶å»¶å¸¦å®½ç§¯æ—¶å»¶å¸¦å®½ç§¯ ä¼ æ’­æ—¶å»¶ * å¸¦å®½ å‘é€ç«¯è¿ç»­å‘é€æ•°æ®ï¼Œç¬¬ä¸€ä¸ªæ¯”ç‰¹åˆ°è¾¾ç»ˆç‚¹ï¼Œå‘é€ç«¯è§†ä½œå·²å‘é€äº†æ—¶å»¶å¸¦å®½ç§¯çš„æ¯”ç‰¹ é“¾è·¯åˆç§°ä¸º ä»¥æ¯”ç‰¹ä¸ºå•ä½çš„é“¾è·¯é•¿åº¦ ç±»ä¼¼åœ†æŸ±ä½“ä½“ç§¯ï¼Œç‰©ç†æ„ä¹‰ä¸Šçš„å•ä½æ¯”ç‰¹æ•°é‡ å¾€è¿”æ—¶é—´äº’è”ç½‘ä¸Šçš„ä¿¡æ¯ä¸ä»…ä»…å•æ–¹å‘ä¼ è¾“è€Œæ˜¯åŒå‘äº¤äº’çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ‰æ—¶å¾ˆéœ€è¦çŸ¥é“åŒå‘äº¤äº’ä¸€æ¬¡æ‰€éœ€çš„æ—¶é—´ã€‚ RTT: Round Trip Time åˆ©ç”¨ç‡åˆ©ç”¨ç‡æœ‰ä¿¡é“åˆ©ç”¨ç‡å’Œç½‘ç»œåˆ©ç”¨ç‡ä¸¤ç§ã€‚ ä¿¡é“åˆ©ç”¨ç‡ï¼šç”¨æ¥è¡¨ç¤ºæŸä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„(æœ‰æ•°æ®é€šè¿‡) ç½‘ç»œåˆ©ç”¨ç‡ï¼šå…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡ã€‚ 1.åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½ æ ¹æ®æ’é˜Ÿè®ºï¼Œå½“æŸä¿¡é“çš„åˆ©ç”¨ç‡å¢å¤§æ—¶ï¼Œè¯¥ä¿¡é“å¼•èµ·çš„æ—¶å»¶ä¹Ÿä¼šè¿…é€Ÿå¢åŠ ï¼Œå› æ­¤åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½ 2.åˆ©ç”¨ç‡ä¸èƒ½å¤ªä½ è¿™ä¼šæµªè´¹é€šä¿¡èµ„æº å› æ­¤è¦ä½¿ç”¨ä¸€äº›æœºåˆ¶åŠ¨æ€è°ƒæ•´ç½‘ç»œé€šä¿¡é‡ã€‚ ä¸¢åŒ…ç‡ ä¸¢åŒ…ç‡ï¼šåˆ†ç»„çš„ä¸¢å¤±ç‡ï¼Œ æŒ‡åœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±çš„åˆ†ç»„æ•°é‡ä¸æ€»åˆ†ç»„æ•°é‡çš„æ¯”ç‡ ã€‚ å…·ä½“åˆ†ä¸ºï¼šæ¥å£ä¸¢åŒ…ç‡ï¼ŒèŠ‚ç‚¹ä¸¢åŒ…ç‡ï¼Œé“¾è·¯ä¸¢åŒ…ç‡ï¼Œè·¯å¾„ä¸¢åŒ…ç‡ï¼Œç½‘ç»œä¸¢åŒ…ç‡ç­‰ã€‚ ä¸¢åŒ…çš„ä¸¤ç§æƒ…å†µï¼š åˆ†ç»„åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«èŠ‚ç‚¹ä¸¢å¼ƒï¼› åˆ†ç»„åˆ°è¾¾ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºæ—¶è¢«ä¸¢å¼ƒï¼Œåœ¨é€šä¿¡é‡è¾ƒå¤§æ—¶å°±å¯èƒ½é€ æˆç½‘ç»œæ‹¥å µã€‚ ä¸¢åŒ…ç‡ååº”ç½‘ç»œæ‹¥å µæƒ…å†µ : æ— æ‹¥å¡æ—¶ä¸¢åŒ…ç‡ä¸º0 è½»åº¦æ‹¥å¡ï¼Œ1%~4% ä¸¥é‡æ‹¥å¡ï¼Œ5%~15% è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ OSIä½“ç³»ç»“æ„ï¼šä¸ƒå±‚ï¼Œå›½é™…æ ‡å‡†åŒ–ç»„ç»‡è®¾è®¡ï¼Œæ˜¯æ³•å¾‹ä¸Šçš„å›½é™…æ ‡å‡† ç»“æ„ä»ä¸‹å¾€ä¸Šæ˜¯ç‰©ç†å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œè¿è¾“å±‚ï¼Œä¼šè¯å±‚ï¼Œè¡¨ç¤ºå±‚ï¼Œåº”ç”¨å±‚ TCPIPä½“ç³»ç»“æ„ï¼šå› ç‰¹ç½‘ç»“æ„ï¼Œäº‹å®ä¸Šçš„å›½é™…æ ‡å‡†(å¸‚åœºå†³å®š)ã€‚ ä»ä¸‹å¾€ä¸Šä¾æ¬¡æ˜¯ç½‘ç»œæ¥å£å±‚ï¼Œç½‘é™…å±‚ï¼Œè¿è¾“å±‚ï¼Œåº”ç”¨å±‚ å¯¹äºTCPIPï¼š ç½‘é™…å±‚ï¼šIPæ˜¯TCPIPä½“ç³»ç»“æ„æ˜¯ç½‘é™…å±‚çš„æ ¸å¿ƒåè®®ã€‚ è¿™ä¸ªåè®®å¯ä»¥å°†ä¸åŒçš„ç½‘ç»œæ¥å£è¿›è¡Œäº’è¿ï¼Œå¹¶å‘å…¶ä¸Šçš„TCPåè®®å’ŒUDPåè®®æä¾›ç½‘ç»œäº’è¿æœåŠ¡ ã€‚ IPä¸­æ–‡æ„æ€å«ç½‘é™…ï¼Œæ‰€ä»¥ç½‘ç»œå±‚åˆç§°ç½‘é™…å±‚ã€‚ è¿è¾“å±‚ï¼šTCPå’ŒUDPæ˜¯TCPIPä½“ç³»ç»“æ„æ˜¯è¿è¾“å±‚ çš„ä¸¤ä¸ªé‡è¦åè®®ã€‚ TCPåè®®åœ¨äº«å—IPåè®®æä¾›çš„ç½‘ç»œäº’è¿æœåŠ¡çš„åŸºç¡€ä¸Šï¼Œå¯å‘åº”ç”¨å±‚çš„ç›¸åº”åè®®æä¾›å¯é ä¼ è¾“çš„æœåŠ¡ï¼›UDPåè®®åœ¨â€¦â€¦å¯å‘åº”ç”¨å±‚çš„ç›¸å…³åè®®æä¾›ä¸å¯é ä¼ è¾“æœåŠ¡ã€‚ åº”ç”¨å±‚ï¼šTCPIPä½“ç³»ç»“æ„çš„åº”ç”¨å±‚åŒ…å«äº†å¤§é‡çš„åº”ç”¨å±‚åè®®HTTP-SMTP DNS-RTP è·¯ç”±å™¨å’Œä¸»æœºéƒ½å¸¦æœ‰TCPIPåè®®æ—ï¼Œè·¯ç”±å™¨ä¸€èˆ¬åªåŒ…æ‹¬ç½‘ç»œæ¥å£å±‚å’Œç½‘é™…å±‚ ç½‘ç»œæ¥å£å±‚æ²¡ä»€ä¹ˆå…·ä½“å†…å®¹ï¼Œç›®çš„æ˜¯ä¸ºäº†è¿æ¥ä¸–ç•Œä¸Šå„ç§ä¸åŒæ¥å£ã€‚ è¿™ä¹Ÿæ„å‘³ç€è¯¥ä½“ç³»ç»“æ„æœ¬è´¨ä¸Šåªæœ‰ä¸Šé¢ä¸‰å±‚ï¼Œ TCPIPä¸¤åè®®çš„æ‰¿ä¸Šå¯ä¸‹é‡è¦ä½œç”¨è¯´æ˜äº†ä¸ºä»€ä¹ˆè¯¥ç»“æ„å«TCPIPåè®®ã€‚ äº”å±‚åè®®åŸç†ä½“ç³»ç»“æ„ï¼Œé€‚ç”¨äºæ•™å­¦ï¼Œä»ä¸‹åˆ°ä¸Šä¾æ¬¡æ˜¯ç‰©ç†å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ï¼Œç½‘ç»œå±‚ï¼Œè¿è¾“å±‚ï¼Œåº”ç”¨å±‚ TCPIPåè®®çš„ç½‘ç»œæ¥å£å±‚ä¸ºäº†çµæ´»æ€§æ²¡æœ‰ä»€ä¹ˆå…·ä½“å†…å®¹ï¼Œä¸æ–¹ä¾¿å­¦ä¹ ã€‚ç»“åˆOSIå’ŒTCPIPè¯ç”Ÿäº†åŸç†ä½“ç³»ç»“æ„ï¼Œå°†ç½‘ç»œæ¥å£å±‚æ¢æˆäº†æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚ã€‚ ä½“ç³»ç»“æ„åˆ†å±‚çš„å¿…è¦æ€§ç‰©ç†å±‚ ï¼šä½¿ç”¨ä½•ç§ä¿¡å·æ¥ä¼ è¾“æ¯”ç‰¹çš„é—®é¢˜ é‡‡ç”¨ä»€ä¹ˆä¼ è¾“åª’ä½“(ä»‹è´¨) é‡‡ç”¨ä»€ä¹ˆç‰©ç†æ¥å£ ä½¿ç”¨ä»€ä¹ˆä¿¡å· ç¬¬ä¸€ï¼Œä¸¥æ ¼æ¥è¯´ï¼Œä¼ è¾“åª’ä½“å¹¶ä¸å±äºç‰©ç†å±‚ è®¡ç®—æœºä¼ è¾“çš„ä¿¡å·ï¼Œå¹¶ä¸æ˜¯å›¾ç¤ºçš„æ–¹æ³¢ä¿¡å· æ•°æ®é“¾è·¯å±‚ ï¼šåˆ†ç»„åœ¨ä¸€ä¸ªç½‘ç»œä¸Šä¼ è¾“çš„é—®é¢˜ å¦‚ä½•æ ‡è¯†ç½‘ç»œä¸­çš„å„ä¸ªä¸»æœº-ä¾‹å¦‚IPåœ°å€ï¼ˆå‰ä¸‰æ®µæ ‡è¯†ç½‘ç»œï¼Œæœ€åä¸€ä¸ªæ•°æ ‡è¯†ä¸»æœºï¼‰ è¿™æ ·ä¹Ÿèƒ½çŸ¥é“ç›®çš„åœ°å€å’Œå‘é€åœ°å€ å¦‚ä½•ä»ä¿¡å·æ‰€è¡¨ç¤ºçš„ä¸€è¿ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºåœ°å€å’Œæ•°æ® å¦‚ä½•åè°ƒå„ä¸»æœºå¾ç”¨æ€»çº¿ï¼ˆä¸¤ä¸ªå¼‚å‘ä¿¡å·ç¢°æ’ï¼‰ æ€»çº¿å‹ç°å·²æ·˜æ±°ï¼Œä»£æ›¿çš„æ˜¯äº¤æ¢å¼ä»¥å¤ªç½‘ï¼šä»¥å¤ªç½‘äº¤æ¢æœºå°†å¤šå°ä¸»æœºäº’è”ã€‚ ç½‘ç»œå±‚ï¼šåˆ†ç»„åœ¨å¤šä¸ªç½‘ç»œä¸Šä¼ è¾“çš„é—®é¢˜ å¦‚ä½•æ ‡è¯†å„ç½‘ç»œä»¥åŠç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆç½‘ç»œå’Œä¸»æœºå…±åŒç¼–å€ï¼Œå¦‚IPåœ°å€ï¼‰ 192.168.1 è¿™å‰ä¸‰ä¸ªæ•°æ®å°±æ˜¯ä¸€ä¸ªå…±åŒç½‘ç»œç¼–å€ è·¯ç”±å™¨å¦‚ä½•è½¬å‘åˆ†ç»„ï¼Œå¦‚ä½•è¿›è¡Œè·¯ç”±é€‰æ‹©ï¼ˆå¤šä¸ªè·¯å¾„èµ°å“ªä¸ªï¼‰ è¿è¾“å±‚ï¼šè¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜ å¦‚ä½•è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜ å‡ºç°ä¼ è¾“é”™è¯¯ï¼Œå¦‚ä½•å¤„ç† åº”ç”¨å±‚ï¼šé€šè¿‡åº”ç”¨è¿›ç¨‹çš„äº¤äº’æ¥å®ç°ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜ åˆ¶å®šåº”ç”¨å±‚åè®®ï¼ŒæŒ‰ä¹‹ç¼–å†™appï¼Œé€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨ã€‚ è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚æ€æƒ³ä¸¾ä¾‹â€¢ ä¾‹å­ï¼šé€šè¿‡è®¡ç®—æœºè®¿é—®ä¸€ä¸ªç½‘ç«™â€¢ 1ï¼šåº”ç”¨å±‚æŒ‰HTTPåè®®çš„è§„å®šæ„å»ºä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ï¼Œç„¶åäº¤ä»˜ç»™è¿è¾“å±‚å¤„ç†â€¢ 2ï¼šè¿è¾“å±‚ç»™HTTPè¯·æ±‚æŠ¥æ–‡æ·»åŠ ä¸€ä¸ªTCPé¦–éƒ¨ï¼Œä½¿ä¹‹æˆä¸ºTCPæŠ¥æ–‡æ®µï¼Œç„¶å å°†TCPæŠ¥æ–‡æ®µ äº¤ä»˜ç»™ç½‘ç»œå±‚å¤„ç† TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨æ ¼å¼ä½œç”¨æ˜¯åŒºåˆ†åº”ç”¨è¿›ç¨‹ä»¥åŠå®ç°å¯é ä¼ è¾“ â€¢ 3ï¼šç½‘ç»œå±‚ç»™TCPæŠ¥æ–‡æ®µæ·»åŠ ä¸€ä¸ªIPé¦–éƒ¨ï¼Œä½¿ä¹‹æˆä¸ºIPæ•°æ®æŠ¥ï¼Œç„¶åäº¤ä»˜ç»™æ•°æ®é“¾è·¯å±‚ IPæ•°æ®æŠ¥çš„é¦–éƒ¨æ ¼å¼ä½œç”¨æ˜¯ä½¿IPæ•°æ®æŠ¥å¯ä»¥åœ¨äº’è”ç½‘ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯è¢«è·¯ç”±å™¨è½¬å‘ â€¢ 4ï¼šæ•°æ®é“¾è·¯å±‚ç»™IPæ•°æ®æŠ¥æ·»åŠ ä¸€ä¸ªé¦–éƒ¨å’Œä¸€ä¸ªå°¾éƒ¨ï¼Œä½¿ä¹‹æˆä¸ºå¸§ï¼Œç„¶åäº¤ä»˜ç»™ç‰©ç†å±‚ è¯¥é¦–éƒ¨çš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†è®©å¸§èƒ½å¤Ÿåœ¨ä¸€æ®µé“¾è·¯ä¸Šæˆ–ä¸€ä¸ªç½‘ç»œä¸Šä¼ è¾“ï¼Œèƒ½å¤Ÿè¢«ç›¸åº”çš„ç›®çš„ä¸»æœºæ¥æ”¶ è¯¥å°¾éƒ¨çš„ä½œç”¨æ˜¯è®©ç›®çš„ä¸»æœºæ£€æŸ¥æ‰€æ¥æ”¶åˆ°çš„å¸§æ˜¯å¦æœ‰è¯¯ç  â€¢ 5ï¼šç‰©ç†å±‚å…ˆå°†å¸§çœ‹åšæ˜¯æ¯”ç‰¹æµï¼Œä¼šåœ¨è¯¥æ¯”ç‰¹æµå‰é¢æ·»åŠ å‰å¯¼ç ,ç„¶åç‰©ç†å±‚å°†æ¯”ç‰¹æµå˜æ¢æˆç›¸åº”çš„ä¿¡å·å‘é€ç»™ä¼ è¾“åª’ä½“ï¼Œ è¿™é‡Œçš„ç½‘ç»œN1å‡è®¾æ˜¯ä»¥å¤ªç½‘ å‰å¯¼ç çš„ä½œç”¨æ˜¯ä¸ºäº†è®©ç›®çš„ä¸»æœºåšå¥½æ¥æ”¶å¸§çš„å‡†å¤‡ â€¢ 6:ä¿¡å·é€šè¿‡ä¼ è¾“åª’ä½“åˆ°è¾¾è·¯ç”±å™¨ â€¢ 7ï¼šè·¯ç”±å™¨ä¼šæŠŠè¿™äº›åå‘æ“ä½œä¸€éå†è½¬æ¢æˆæ¯”ç‰¹æµç»™WebæœåŠ¡å™¨ï¼ŒWebæœåŠ¡å™¨æ¥æ”¶åˆ°åç»è¿‡å±‚å±‚ç­›é€‰æ¥æ”¶HTTPè¯·æ±‚æŠ¥æ–‡ è·¯ç”±å™¨ä¸­ï¼š ç‰©ç†å±‚å°†ä¿¡å·å˜ä¸ºæ¯”ç‰¹æµï¼Œç„¶åå»æ‰å‰å¯¼ç åï¼Œå°†å…¶äº¤ä»˜ç»™æ•°æ®é“¾è·¯å±‚ æ•°æ®é“¾è·¯å±‚å°†å¸§çš„é¦–éƒ¨å’Œå°¾éƒ¨å»æ‰åï¼Œå°†å…¶äº¤ä»˜ç»™ç½‘ç»œå±‚ï¼Œè¿™å®é™…äº¤ä»˜çš„æ˜¯IPæ•°æ®æŠ¥ ç½‘ç»œå±‚è§£æIPæ•°æ®æŠ¥çš„é¦–éƒ¨ï¼Œä»ä¸­æå–ç›®çš„ç½‘ç»œåœ°å€ æå–ç›®çš„ç½‘ç»œåœ°å€åæŸ¥æ‰¾è‡ªèº«è·¯ç”±è¡¨ã€‚ç¡®å®šè½¬å‘ç«¯å£ï¼Œ ä»¥ä¾¿è¿›è¡Œè½¬å‘ ç½‘ç»œå±‚å°†IPæ•°æ®æŠ¥äº¤ä»˜ç»™æ•°æ®é“¾è·¯å±‚ æ•°æ®é“¾è·¯å±‚ç»™IPæ•°æ®æŠ¥æ·»åŠ ä¸€ä¸ªé¦–éƒ¨å’Œä¸€ä¸ªå°¾éƒ¨ï¼Œä½¿ä¹‹æˆä¸ºå¸§ æ•°æ®é“¾è·¯å±‚å°†å¸§äº¤ä»˜ç»™ç‰©ç†å±‚ ç‰©ç†å±‚å…ˆå°†å¸§çœ‹æˆæ¯”ç‰¹æµï¼Œè¿™é‡Œçš„ç½‘ç»œN2å‡è®¾æ˜¯ä»¥å¤ªç½‘ï¼Œæ‰€ä»¥ç‰©ç†å±‚è¿˜ä¼šç»™è¯¥æ¯”ç‰¹æµå‰é¢æ·»åŠ å‰å¯¼ç  ç‰©ç†å±‚å°†è£…æœ‰å‰å¯¼ç çš„æ¯”ç‰¹æµå˜æ¢æˆç›¸åº”çš„ä¿¡å·å‘é€ç»™ä¼ è¾“åª’ä½“ï¼Œä¿¡å·é€šè¿‡ä¼ è¾“åª’ä½“åˆ°è¾¾WebæœåŠ¡å™¨ â€¢8ï¼š ç„¶åWebæœåŠ¡å™¨ç»™ä¸»æœºå‘é€HTTPå“åº”æŠ¥æ–‡å•Šå§å•Šå§ï¼Œæ–¹æ³•å’Œè¯·æ±‚ä¸€æ · æ³¨æ„ï¼šæŠ¥æ–‡å’Œå¸§éƒ½æ˜¯é€šè¿‡åº•å±‚å†…å­˜çš„å›ºå®šæ’å¸ƒï¼Œæ¥è®©è®¡ç®—æœºç†è§£æ•°æ®å“ªä¸€éƒ¨åˆ†å¯¹åº”çš„ä¸œè¥¿ã€‚ æ³¨æ„æŠ¥æ–‡ä¸Šçš„ä½ è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„ä¸“ä¸šæœ¯è¯­å®ä½“ å®ä½“ï¼šä»»ä½•å¯å‘é€æˆ–æ¥æ”¶ä¿¡æ¯çš„ç¡¬ä»¶æˆ–è½¯ä»¶è¿›ç¨‹ å¯¹ç­‰å®ä½“ï¼šæ”¶å‘åŒæ–¹ç›¸ç­‰å±‚æ¬¡ä¸­çš„å®ä½“ï¼Œæ¯”å¦‚æ”¶å‘çš„ä¸¤ä¸ªåº”ç”¨å±‚ åè®®å®šä¹‰ï¼šæ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€»è¾‘é€šä¿¡çš„è§„åˆ™çš„é›†åˆ åè®®ä¸‰è¦ç´ ï¼šè¯­æ³•ï¼Œè¯­ä¹‰ï¼ŒåŒæ­¥ è¯­æ³•ï¼šå®šä¹‰æ‰€äº¤æ¢ä¿¡æ¯çš„æ ¼å¼ è¯­ä¹‰ï¼šå®šä¹‰æ”¶å‘åŒæ–¹æ‰€è¦æ“ä½œå®Œæˆçš„æ“ä½œ åŒæ­¥ï¼šå®šä¹‰æ”¶å‘åŒæ–¹çš„æ—¶åºå…³ç³» åº”ç”¨å±‚ä½¿ç”¨åº”ç”¨å±‚åè®®ï¼ˆä¾‹å¦‚HTTP, SMTPï¼‰è¿›è¡Œé€šä¿¡ï¼Œè¿è¾“å±‚åº”ç”¨è¿è¾“å±‚åè®®ï¼ˆä¾‹å¦‚TCP, UDPï¼‰è¿›è¡Œé€šä¿¡ï¼Œä¾æ¬¡ç±»æ¨ æœåŠ¡ åœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€»è¾‘é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ã€ è¦å®ç°æœ¬å±‚åè®®ï¼Œè¿˜éœ€è¦ä½¿ç”¨ä¸‹é¢ä¸€å±‚æ‰€æä¾›çš„æœåŠ¡ åè®®æ˜¯æ°´å¹³çš„ï¼ŒæœåŠ¡æ˜¯å‚ç›´çš„ å®ä½“çœ‹çš„è§ç›¸é‚»ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ï¼Œä½†å¹¶ä¸çŸ¥é“å®ç°è¯¥æœåŠ¡çš„å…·ä½“åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„å®ä½“æ˜¯é€æ˜çš„ã€å°±å¥½æ¯”æˆ‘ä»¬å¯ä»¥äº«å— æ‰‹æœºæä¾›çš„æœåŠ¡ï¼Œä½†ä¸éœ€è¦å¼„æ‡‚æ‰‹æœºè¿è¡Œçš„åŸç†ã€‘ æœåŠ¡åŸè¯­ï¼šä¸Šå±‚ä½¿ç”¨ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡å¿…é¡»é€šè¿‡ä¸ä¸‹å±‚äº¤æ¢ä¸€äº›å‘½ä»¤ æœåŠ¡è®¿é—®ç‚¹ï¼šåœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹ï¼Œ å¦‚æ•°æ®é“¾è·¯å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºå¸§çš„â€œç±»å‹â€å­—æ®µï¼› ç½‘ç»œå±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºIPæ•°æ®åŒ…é¦–éƒ¨ä¸­çš„â€œåè®®å­—æ®µâ€ï¼› è¿è¾“å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºâ€œç«¯å£å·â€ã€‚ åè®®æ•°æ®å•å…ƒ-PDU:å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…ç§°ä¸ºè¯¥å±‚çš„åè®®æ•°æ®å•å…ƒï¼Œ ä¾‹å¦‚ç‰©ç†å±‚çš„æ•°æ®åŒ…å°±æ˜¯æ¯”ç‰¹æµï¼Œä»¥æ­¤ç±»æ¨æœ‰å¸§ï¼Œåˆ†ç»„IPæ•°æ®æŠ¥ æœåŠ¡æ•°æ®å•å…ƒ-SDU:åŒä¸€ç³»ç»Ÿå†…ï¼Œå±‚ä¸å±‚ä¹‹é—´äº¤æ¢åˆ°æ•°æ®åŒ…ç§°ä¸ºæœåŠ¡æ•°æ®å•å…ƒã€‚ å¤šä¸ªSDUå¯ä»¥åˆæˆä¸ºä¸€ä¸ªPDUï¼›ä¸€ä¸ªSDUä¹Ÿå¯åˆ’åˆ†ä¸ºå‡ ä¸ªPDUã€‚"},{"title":"TCPIP1","path":"/wiki/network/TCPIP1.html","content":"1"},{"title":"æ¹–ç§‘å¤§(5)è¿è¾“å±‚","path":"/wiki/network/æ¹–ç§‘å¤§(5)è¿è¾“å±‚.html","content":"è¿è¾“å±‚æ¦‚å¿µï¼šç«¯å£å·ã€å¤ç”¨ã€åˆ†ç”¨ ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ä»¥åŠç½‘ç»œå±‚å®ƒä»¬å…±åŒè§£å†³äº†å°†ä¸»æœºé€šè¿‡å¼‚æ„ç½‘ç»œäº’è”èµ·æ¥æ‰€é¢ä¸´çš„çš„é—®é¢˜ï¼Œå®ç°äº†ä¸»æœºåˆ°ä¸»æœºçš„é€šä¿¡ ä½†å®é™…ä¸Šåœ¨è®¡ç®—æœºç½‘ç»œä¸­è¿›è¡Œé€šä¿¡çš„çœŸæ­£å®ä½“æ˜¯ä½äºé€šä¿¡ä¸¤ç«¯ä¸»æœºä¸­çš„è¿›ç¨‹ å¦‚ä½•ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹æä¾›ç›´æ¥çš„é€šä¿¡æœåŠ¡æ˜¯è¿è¾“å±‚çš„ä»»åŠ¡ï¼Œè¿è¾“å±‚åè®®åˆç§°ç«¯åˆ°ç«¯åè®® ç½‘ç»œå±‚èŒƒå›´ï¼šä¸»æœºåˆ°ä¸»æœº è¿è¾“å±‚èŒƒå›´ï¼šç«¯åˆ°ç«¯ è¿™é‡Œçš„ç«¯å£å¹¶ä¸æ˜¯ç‰©ç†ä¸Šçœ‹å¾—è§ã€æ‘¸å¾—ç€çš„ç‰©ç†ç«¯å£ï¼Œè€Œæ˜¯æŒ‡ç”¨æ¥åŒºåˆ†ä¸åŒåº”ç”¨è¿›ç¨‹çš„æ ‡è¯†ç¬¦ã€‚ è¿è¾“å±‚å‘é«˜å±‚ç”¨æˆ·å±è”½äº†ä¸‹é¢ç½‘ç»œæ ¸å¿ƒçš„ç»†èŠ‚(å¦‚ç½‘ç»œæ‹“æ‰‘ã€æ‰€é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®ï¼Œå®ƒä½¿åº”ç”¨è¿›ç¨‹çœ‹è§çš„å°±å¥½åƒæ˜¯åœ¨ä¸¤ä¸ªè¿è¾“å±‚å®ä½“ä¹‹é—´æœ‰ä¸€æ¡ç«¯åˆ°ç«¯çš„é€»è¾‘é€šä¿¡ä¿¡é“ç­‰) æ ¹æ®åº”ç”¨éœ€æ±‚çš„ä¸åŒï¼Œå› ç‰¹ç½‘çš„è¿è¾“å±‚ä¸ºåº”ç”¨å±‚æä¾›äº†ä¸¤ç§ä¸åŒçš„è¿è¾“åè®®ï¼Œå³é¢å‘è¿æ¥çš„TCPå’Œæ— è¿æ¥çš„UDPï¼Œè¿™ä¸¤ç§åè®®å°±æ˜¯æœ¬ç« è¦è®¨è®ºçš„ä¸»è¦å†…å®¹ã€‚ ç«¯å£ è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„è¿›ç¨‹ä½¿ç”¨è¿›ç¨‹æ ‡è¯†ç¬¦PIDæ¥æ ‡å¿—ã€‚ ä¸ºäº†ä½¿è¿è¡Œä¸åŒæ“ä½œç³»ç»Ÿçš„è®¡ç®—æœºçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´èƒ½è¿›è¡Œç½‘ç»œé€šä¿¡ï¼Œå¿…é¡»ä½¿ç”¨ç»Ÿä¸€çš„æ–¹æ³•å¯¹TCPIPä½“ç³»çš„åº”ç”¨è¿›ç¨‹è¿›è¡Œæ ‡è¯†ï¼Œå³ç«¯å£å·ã€‚ ä¸ºä»€ä¹ˆä¸èƒ½ä½¿ç”¨è¿›ç¨‹æ ‡è¯†ç¬¦PIDæ¥åŒºåˆ†å„è¿›ç¨‹ï¼Ÿ å› ä¸ºå› ç‰¹ç½‘ä¸Šçš„è®¡ç®—æœºå¹¶ä¸æ˜¯ä½¿ç”¨ç»Ÿä¸€çš„æ“ä½œç³»ç»Ÿï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿä½¿ç”¨ä¸åŒæ ¼å¼çš„è¿›ç¨‹æ ‡è¯†ç¬¦ ç«¯å£å·åªå…·æœ‰æœ¬åœ°æ„ä¹‰ï¼Œå³ç«¯å£å·åªæ˜¯ä¸ºäº†æ ‡è¯†æœ¬è®¡ç®—æœºåº”ç”¨å±‚ä¸­çš„å„è¿›ç¨‹ï¼Œåœ¨å› ç‰¹ç½‘ä¸­ï¼Œä¸åŒè®¡ç®—æœºä¸­çš„ç›¸åŒçš„ç«¯å£å·æ˜¯æ²¡æœ‰è”ç³»çš„ ç«¯å£å·ä½¿ç”¨16æ¯”ç‰¹è¡¨ç¤ºï¼Œå–å€¼èŒƒå›´0~65535ã€‚ ç†ŸçŸ¥ç«¯å£å·ï¼š0~1023ï¼ŒIANAæŠŠè¿™äº›ç«¯å£å·æŒ‡æ´¾ç»™äº†TCP/IPä½“ç³»ä¸­æœ€é‡è¦çš„ä¸€äº›åº”ç”¨åè®® ç™»è®°ç«¯å£å·ï¼š1024~49151ï¼Œä¸ºæ²¡æœ‰ç†ŸçŸ¥ç«¯å£å·çš„åº”ç”¨ç¨‹åºä½¿ç”¨ã€‚ä½¿ç”¨è¿™ç±»ç«¯å£å·å¿…é¡»åœ¨IANAæŒ‰ç…§è§„å®šçš„æ‰‹ç»­ç™»è®°ï¼Œä»¥é˜²æ­¢é‡å¤ã€‚å¦‚Microsoft RDPå¾®è½¯è¿œç¨‹æ¡Œé¢ä½¿ç”¨çš„ç«¯å£æ˜¯3389 çŸ­æš‚ç«¯å£å·ï¼š49152~65535ï¼Œç•™ç»™å®¢æˆ·è¿›ç¨‹é€‰æ‹©æš‚æ—¶ä½¿ç”¨ã€‚å½“æœåŠ¡å™¨è¿›ç¨‹æ”¶åˆ°å®¢æˆ·è¿›ç¨‹çš„æŠ¥æ–‡æ—¶ï¼Œå°±çŸ¥é“äº†å®¢æˆ·è¿›ç¨‹æ‰€ä½¿ç”¨çš„çš„åŠ¨æ€ç«¯å£å·ã€‚é€šä¿¡ç»“æŸåï¼Œè¿™ä¸ªç«¯å£å·å¯ä¾›å…¶ä»–å®¢æˆ·è¿›ç¨‹ä»¥åä½¿ç”¨ å¤ç”¨ã€åˆ†ç”¨ å‘é€æ–¹çš„æŸäº›åº”ç”¨è¿›ç¨‹æ‰€å‘é€çš„ä¸åŒåº”ç”¨æŠ¥æ–‡ï¼Œåœ¨è¿è¾“å±‚ä½¿ç”¨UDPåè®®è¿›è¡Œå°è£…ï¼Œè¿™æ˜¯UDPå¤ç”¨ï¼›è‹¥ç”¨TCPå°è£…åˆ™ç§°TCPå¤ç”¨ è¿è¾“å±‚ä½¿ç”¨ç«¯å£å·åŒºåˆ†ä¸åŒè¿›ç¨‹ï¼Œä¸ç®¡ä½¿ç”¨ä½•ç§åè®®å°è£…çš„æŠ¥æ–‡ï¼Œåœ¨ç½‘ç»œå±‚éƒ½éœ€è¦ä½¿ç”¨IPåè®®å°è£…æˆIPæ•°æ®æŠ¥ï¼Œè¿™æ˜¯IPå¤ç”¨ æ•°æ®æŠ¥ä¸­åè®®å­—æ®µçš„å€¼ç”¨æ¥è¡¨åå°è£…çš„æ˜¯ä½•ç§åè®®æ•°æ®å•å…ƒã€‚ å–å€¼ä¸º6ï¼Œè¡¨ç¤ºå°è£…çš„TCPç”¨æˆ·æ•°æ®æŠ¥ï¼› å–å€¼ä¸º17ï¼Œè¡¨ç¤ºå°è£…çš„UDPç”¨æˆ·æ•°æ®æŠ¥ã€‚ æ ¹æ®åè®®å­—æ®µçš„å€¼ï¼Œå°†IPæ•°æ®æŠ¥å°è£…çš„åè®®æ•°æ®å•å…ƒä¸Šäº¤è¿è¾“å±‚çš„è¿‡ç¨‹å«IPåˆ†ç”¨ åŒç†ï¼ŒUDPæ ¹æ®ç«¯å£å·å°†æ•°æ®äº¤ç»™åº”ç”¨è¿›ç¨‹å«åšUDPåˆ†ç”¨ï¼›TCPæ ¹æ®ç«¯å£å·å°†æ•°æ®äº¤ç»™åº”ç”¨è¿›ç¨‹å«åšTCPåˆ†ç”¨ å¸¸ç”¨ç«¯å£å· UDP è¿˜æœ‰ OSPF ã€‚ **ä¸¾ä¾‹ï¼š**åœ¨ç”¨æˆ·PCä¸­ä½¿ç”¨ç½‘é¡µæµè§ˆå™¨æ¥è®¿é—® Web æœåŠ¡å™¨çš„å†…å®¹ â‘ ç”¨æˆ·é€šè¿‡DNSæ‰¾åˆ°åŸŸåå¯¹åº”IPåœ°å€ ç”¨æˆ·åœ¨ç½‘é¡µæµè§ˆå™¨çš„åœ°å€æ ä¸­è¾“å…¥WebæœåŠ¡å™¨çš„åŸŸåï¼Œè¯·æ±‚è®¿é—® ç”¨æˆ·PCä¸­çš„DNSå®¢æˆ·ç«¯è¿›ç¨‹ä¼šå‘é€ä¸€ä¸ªDNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡ å…¶å†…å®¹ä¸ºâ€œåŸŸå www.porttest.com æ‰€å¯¹åº”çš„IPåœ°å€æ˜¯ä»€ä¹ˆ? DNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡éœ€è¦ä½¿ç”¨è¿è¾“å±‚çš„UDPåè®®,å°è£…æˆUDPç”¨æˆ·æ•°æ®æŠ¥ï¼Œ å¡«å†™UDPé¦–éƒ¨ä¸­çš„ä¸¤ä¸ªç«¯å£çš„æ•°å€¼ã€‚ æºç«¯å£å­—ï¼šåœ¨çŸ­æš‚ç«¯å£å·49151~65535ä¸­æŒ‘é€‰ä¸€ä¸ªæœªè¢«å ç”¨çš„ï¼Œç”¨æ¥è¡¨ç¤ºDNSå®¢æˆ·ç«¯è¿›ç¨‹ï¼Œä¾‹å¦‚49152ã€‚ ç›®çš„ç«¯å£å­—æ®µçš„å€¼è®¾ç½®ä¸º53ï¼Œè¿™æ˜¯DNSæœåŠ¡å™¨ç«¯è¿›ç¨‹æ‰€ä½¿ç”¨çš„ç†ŸçŸ¥ç«¯å£å·ã€‚ ä¹‹åï¼Œå°†UDPç”¨æˆ·æ•°æ®æŠ¥å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œé€šè¿‡ä»¥å¤ªç½‘å‘é€ç»™DNSæœåŠ¡å™¨ã€‚ DNSæœåŠ¡å™¨æ”¶åˆ°è¯¥æ•°æ®æŠ¥ï¼Œä»ä¸­è§£å°å‡ºUDPç”¨æˆ·æ•°æ®æŠ¥ï¼Œäº¤ä»˜ç»™æœ¬æœåŠ¡å™¨ä¸­çš„DNSæœåŠ¡å™¨ç«¯è¿›ç¨‹ã€‚ UDPé¦–éƒ¨ä¸­çš„ç›®çš„ç«¯å£å·ä¸º53ï¼Œè¿™è¡¨æ˜åº”å°†è¯¥UDPç”¨æˆ·æ•°æ®æŠ¥çš„æ•°æ®è½½è·éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯DNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡ã€‚ DNSæœåŠ¡å™¨ç«¯è¿›ç¨‹è§£æDNSæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡çš„å†…å®¹ï¼Œç„¶åæ¥å…¶è¦æ±‚æŸ¥æ‰¾å¯¹åº”çš„IPåœ°å€ã€‚ æ‰¾åˆ°å¯¹åº”IPåœ°å€åï¼Œä½¿ç”¨UDPåè®®å°è£…æˆUDPæ•°æ®æŠ¥ï¼Œè®¾ç½®UDPé¦–éƒ¨çš„ä¸¤ä¸ªç«¯å£å€¼ã€‚ æºç«¯å£å€¼å’Œç›®çš„ç«¯å£å€¼ã€‚è¿™ä¸ªå€¼å’Œç”¨æˆ·æºè¿›ç¨‹çš„ç«¯å£å€¼æ˜¯ç›¸åçš„ã€‚ å°†UDPæ•°æ®æŠ¥å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œé€šè¿‡ä»¥å¤ªç½‘ç»™ç”¨æˆ·PCå‘é€DNSå“åº”æŠ¥æ–‡ï¼Œ å†…å®¹ä¸ºâ€œåŸŸåwww.porttest.comæ‰€å¯¹åº”çš„IPåœ°å€æ˜¯192.168.0.3â€ã€‚ ç”¨æˆ·æŠŠDNSå“åº”æŠ¥æ–‡äº¤ä»˜ç»™DNSå®¢æˆ·ç«¯è¿›ç¨‹ï¼Œè§£æå®Œå“åº”æŠ¥æ–‡ï¼Œå°±å¯çŸ¥é“åŸŸåå¯¹åº”çš„IPåœ°å€äº†ã€‚ â‘¡ç”¨æˆ·é€šè¿‡HTTPè·å¾—ç½‘é¡µå†…å®¹ã€‚ ç”¨æˆ·PCä¸­çš„HTTPå®¢æˆ·ç«¯è¿›ç¨‹å‘WebæœåŠ¡å™¨å‘é€HTTPè¯·æ±‚æŠ¥æ–‡ å†…å®¹ä¸ºâ€œé¦–é¡µå†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿâ€ HTTPè¯·æ±‚æŠ¥æ–‡éœ€è¦ä½¿ç”¨è¿è¾“å±‚çš„TCPåè®®å°è£…æˆTCPæŠ¥æ–‡æ®µã€‚ å¡«å†™TCPé¦–éƒ¨ä¸­çš„ä¸¤ä¸ªç«¯å£å€¼ï¼šæºç«¯å£å’Œç›®çš„ç«¯å£ã€‚ HTTPè¿›ç¨‹çš„ç«¯å£å·ä¸€èˆ¬æ˜¯80ï¼Œå³ç›®çš„ç«¯å£ã€‚ WebæœåŠ¡å™¨æ”¶åˆ°åæ ¹æ®ç›®çš„ç«¯å£å·ï¼ŒæŠŠæ•°æ®è½½è·éƒ¨åˆ†ï¼ˆHTTPè¯·æ±‚æŠ¥æ–‡ï¼‰äº¤ä»˜ç»™æœ¬æœåŠ¡å™¨ä¸­çš„HTTPæœåŠ¡å™¨ç«¯è¿›ç¨‹ã€‚ HTTPæœåŠ¡å™¨ç«¯è¿›ç¨‹è§£æHTTPè¯·æ±‚æŠ¥æ–‡çš„å†…å®¹ï¼ŒæŒ‰å…¶è¦æ±‚æŸ¥æ‰¾é¦–é¡µå†…å®¹ï¼Œç»™ç”¨æˆ·PCå‘é€HTTPå“åº”æŠ¥æ–‡ã€‚ è¯·æ±‚æŠ¥æ–‡å†…å®¹æ˜¯è·å–å¯¹åº”çš„ç½‘é¡µå†…å®¹ã€‚ æ­¤å¤„åŒâ‘ ä¸­UDPçš„ç«¯å£å·è®¾ç½®ã€æŠ¥æ–‡æ®µåŒ…è£…ã€å®¢æˆ·ç«¯è§£æã€‚ UDPå’ŒTCPçš„å¯¹æ¯”è¿™ä¸¤ä¸ªè¿è¾“å±‚åè®®çš„ä½¿ç”¨é¢‘ç‡ä»…æ¬¡äºç½‘ç»œå±‚çš„IPåè®®ã€‚ UDPï¼šUser Datagram Protocol TCPï¼šTransmission Control Protocol UDPå’ŒTCPéƒ½æ”¯æŒå…¨åŒå·¥é€šä¿¡ã€‚ é€šä¿¡å‰ï¼ŒUDPä¸éœ€è¦è¿æ¥ã€‚TCP**é¢å‘è¿æ¥(**ä¸‰æ¡æ‰‹å››æŒ¥æ‰‹) UDP æ”¯æŒå•æ’­ã€å¤šæ’­ã€å¹¿æ’­ã€‚TCP åªèƒ½é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å•ç‹¬å»ºç«‹è¿æ¥ï¼Œä»…æ”¯æŒå•æ’­ã€‚ UDP é¢å‘åº”ç”¨æŠ¥æ–‡ï¼ŒTCP é¢å‘å­—èŠ‚æµã€‚ UDP å¯¹åº”ç”¨è¿›ç¨‹äº¤ä¸‹æ¥çš„æŠ¥æ–‡æ—¢ä¸åˆå¹¶ä¹Ÿä¸æ‹†åˆ†ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œã€‚ TCP å°†å­—èŠ‚æµç¼–å·å­˜å‚¨åœ¨å‘é€ç¼“å­˜ä¸­ï¼Œæ ¹æ®å‘é€ç­–ç•¥ï¼Œå°†ç¼“å­˜åˆ†æ®µå‘é€ã€‚ å¯¹äºTCPï¼š å¯¹äºæ”¶åˆ°çš„æ•°æ®ï¼Œæ¥æ”¶æ–¹ä¸€æ–¹é¢å–å‡ºæ•°æ®è½½è·éƒ¨åˆ†å­˜å‚¨åœ¨æ¥æ”¶ç¼“å­˜ä¸­ï¼Œä¸€æ–¹é¢ç›´æ¥å°†æ¥æ”¶ç¼“å­˜ä¸­çš„ä¸€äº›å­—èŠ‚äº¤ä»˜ç»™åº”ç”¨è¿›ç¨‹ã€‚ æ¥æ”¶æ–¹æ”¶åˆ°çš„æ•°æ®å—æ•°å¯èƒ½ä¸å‘é€æ–¹å‘å‡ºçš„æ•°æ®å—æ•°ä¸ä¸€è‡´ï¼Œä½†æ˜¯æ”¶å‘åŒæ–¹æ”¶å‘çš„å­—èŠ‚æµæ•°ç›®ä¸€è‡´ æ¯”å¦‚å‘é€æ–¹è¦å‘é€10ä¸ªå­—èŠ‚ï¼Œåˆ†äº”ä¸ªå­—èŠ‚ä¸€å—ï¼Œä¸€å…±ä¸¤å—ï¼Œä½†æ¥æ”¶æ–¹æ¥æ”¶å­—èŠ‚æ˜¯3.3.4ï¼Œä¸€å…±ä¸‰å— æ‰€ä»¥æ˜¯TCPä¸ä¿è¯ä¸€æ¬¡æ€§ä¼ å®Œï¼Œè¿™å°±è¦æ±‚åº”ç”¨è¿›ç¨‹æœ‰å¤„ç†è¿™ç§ä¹±åºã€å¤šæ¬¡ä¼ è¾“åè¿˜èƒ½æ‹¼æ¥å®Œæ•´çš„èƒ½åŠ›. é¢å‘å­—èŠ‚æµæ˜¯TCPæä¾›å¯é ä¼ è¾“ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶çš„åŸºç¡€ã€‚ UDPå‘ä¸Šå±‚æä¾›æ— è¿æ¥ä¸å¯é ä¼ è¾“æœåŠ¡(é€‚ç”¨äºIPç”µè¯ã€è§†é¢‘ä¼šè®®ç­‰å®æ—¶åº”ç”¨) TCPå‘ä¸Šå±‚æä¾›é¢å‘è¿æ¥çš„å¯é ä¼ è¾“æœåŠ¡(é€‚ç”¨äºè¦æ±‚å¯é ä¼ è¾“çš„åº”ç”¨ï¼Œä¾‹å¦‚æ–‡ä»¶ä¼ è¾“) IPæ•°æ®åŒ…å‘ä¸Šå±‚æä¾›çš„æ˜¯æ— è¿æ¥ä¸å¯é ä¼ è¾“æœåŠ¡ã€‚ UDP ç”¨æˆ·æ•°æ®æŠ¥é¦–éƒ¨ä»…ä»… 8 å­—èŠ‚ï¼Œè€ŒTCP ç”±äºè¦å®ç°å¯é ä¼ è¾“ç­‰ï¼ŒæŠ¥æ–‡æ®µé¦–éƒ¨æœ€å°20å­—èŠ‚ï¼Œæœ€å¤§60å­—èŠ‚ã€‚ æµé‡æ§åˆ¶ ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›æ•°æ®ä¼ è¾“èƒ½å¿«ä¸€äº›ï¼Œä½†å¦‚æœå‘é€æ–¹æŠŠæ•°æ®å‘é€å¾—è¿‡å¿«ï¼Œæ¥æ”¶æ–¹å°±å¯èƒ½æ¥ä¸åŠæ¥æ”¶ï¼Œè¿™ä¼šé€ æˆæ•°æ®çš„ä¸¢å¤± æµé‡æ§åˆ¶å°±æ˜¯è®©å‘é€æ–¹çš„å‘é€é€Ÿç‡ä¸è¦å¤ªå¿«ï¼Œè¦è®©æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ åˆ©ç”¨æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶ æ»‘åŠ¨çª—å£ï¼šå‘é€çª—å£å’Œæ¥æ”¶çª—å£ã€‚ å‘é€æ–¹å’Œæ¥æ”¶æ–¹çª—å£ä¿æŒä¸€è‡´ï¼Œå‘é€æ–¹çª—å£éšç€æ¥æ”¶æ–¹çª—å£å˜åŒ–è€Œå˜åŒ–(é€šè¿‡ç¡®è®¤æŠ¥æ–‡å‘ŠçŸ¥å‘é€æ–¹) å‘é€æ–¹å‘é€å®Œçª—å£å†…æ•°æ®åéœ€è¦ç­‰åˆ°ç¡®è®¤æŠ¥æ–‡æ‰ä¼šæ»‘åŠ¨çª—å£å¹¶ç»§ç»­å‘é€ï¼Œè‹¥çª—å£å†…çš„æŸä¸ªå€¼å¾ˆä¹…æ²¡æœ‰æ”¶åˆ°å›ç­”æŠ¥æ–‡ï¼Œåˆ™è¶…æ—¶é‡ä¼ æŠ¥æ–‡ ACKï¼šæ ‡å¿—ä½ï¼Œå–å€¼1è¡¨ç¤ºè¿™æ˜¯TCPç¡®è®¤ä¿æ¸©æ®µã€‚ ackï¼šç¡®è®¤å·å­—æ®µï¼Œå–å€¼201è¡¨ç¤ºåºå·201ä¹‹å‰çš„æ•°æ®å·²å…¨éƒ¨ç¡®æ¥æ”¶ã€‚ rwndï¼šçª—å£å­—æ®µï¼Œå–å€¼300è¡¨ç¤ºè‡ªå·±çš„æ¥æ”¶çª—å£å¤§å°ä¸º300ã€‚ seqï¼šåºå·å­—æ®µï¼Œå–å€¼1è¡¨ç¤ºTCPæŠ¥æ–‡æ®µæ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå·æ˜¯1ã€‚ ä¸€äº›é—®é¢˜ï¼š è‹¥æ¥æ”¶æ–¹çª—å£è°ƒä¸º0åï¼Œä¸€æ®µæ—¶é—´ä¹‹ååˆè°ƒä¸º200ï¼Œæ­¤æ—¶å‘å‘é€æ–¹ä¼ é€’ç¡®è®¤æŠ¥æ–‡ï¼Œå¯æ­¤æ—¶æŠ¥æ–‡ä¸¢å¤±ï¼Œåˆ™ä¼šé€ æˆå‘é€æ–¹çª—å£å§‹ç»ˆä¸º0ï¼Œæ¥æ”¶æ–¹ä»¥ä¸ºå‘é€æ–¹æ”¶åˆ°äº†ç¡®è®¤æŠ¥æ–‡è€Œå¼€å§‹ç­‰å¾…æ•°æ®ï¼Œé€ æˆæ­»é”ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ TCPä¸ºæ¯ä¸ªè¿æ¥è®¾ç½®ä¸€ä¸ªæŒç»­è®¡æ—¶å™¨ã€‚åªè¦TCPè¿æ¥çš„ä¸€æ–¹æ”¶åˆ°å¯¹æ–¹çš„é›¶çª—å£é€šçŸ¥ï¼Œå°±å¯åŠ¨æŒç»­è®¡æ—¶å™¨ã€‚æŒç»­è®¡æ—¶å™¨è¶…æ—¶ï¼Œå‘é€æ–¹å°±ä¼šå‘é€ä¸€ä¸ª1å­—èŠ‚å¤§å°çš„é›¶çª—å£æ¢æµ‹æŠ¥æ–‡ï¼ˆä»…æºå¸¦ä¸€å­—èŠ‚æ•°æ®ï¼‰ã€‚ å¯¹æ–¹ç¡®è®¤è¿™ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µæ—¶ï¼Œé€šè¿‡ç¡®è®¤æŠ¥æ–‡ç»™å‡ºè‡ªå·±çš„æ¥å—çª—å£å€¼ã€‚ å¦‚æœå‘é€æ–¹çª—å£å¤§å°ä¸º0æ—¶ï¼Œå‘é€æ–¹é‡æ–°å¯åŠ¨æŒç»­è®¡æ—¶å™¨ã€‚è¶…æ—¶åé‡æ–°å‘é€é›¶çª—å£æ¢æµ‹æŠ¥æ–‡ã€‚ å¦‚æœä¸æ˜¯0ï¼Œä¹Ÿå°±æ˜¯æ¥æ”¶æ–¹ä¸»æœºæ­¤æ—¶çš„æ¥æ”¶ç¼“å­˜åˆæœ‰äº†ä¸€äº›å­˜å‚¨ç©ºé—´ï¼Œè°ƒæ•´äº†çª—å£ï¼Œé‚£ä¹ˆæ­»é”å±€é¢å°±å¯ä»¥è¢«æ‰“ç ´äº†ã€‚ å¦‚æœä¸»æœºBæ­¤æ—¶çš„æ¥æ”¶çª—å£ä»ç„¶ä¸º0ï¼Œé‚£ä¹ˆä¸»æœºBæ ¹æœ¬å°±æ— æ³•æ¥å—è¯¥æŠ¥æ–‡æ®µï¼Ÿ TCPè§„å®šï¼Œå³ä½¿æ¥æ”¶æ–¹ä¸»æœºæ¥å—çª—å£ä¸º0ï¼Œä¹Ÿå¿…é¡»æ¥å—é›¶çª—å£æ¢æµ‹æŠ¥æ–‡æ®µï¼Œç¡®è®¤æŠ¥æ–‡æ®µä»¥åŠæºå¸¦ç´§æ€¥æ•°æ®çš„æŠ¥æ–‡æ®µã€‚ è‹¥å‘é€çš„é›¶çª—å£æ¢æµ‹æŠ¥æ–‡ä¹Ÿä¸¢å¤±äº†ï¼Œä¼šé€ æˆæ–°æ­»é”å—ï¼Ÿ ä¸ä¼šã€‚å› ä¸ºé›¶çª—å£æ¢æµ‹æŠ¥æ–‡ä¹Ÿæœ‰é‡ä¼ è®¡æ•°å™¨ï¼Œå…·å¤‡è¶…æ—¶é‡ä¼ æœºåˆ¶ã€‚ æ‹¥å¡æ§åˆ¶åœ¨æŸæ®µæ—¶é—´ï¼Œè‹¥å¯¹ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…è¿‡äº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œæ€§èƒ½å°±è¦å˜åï¼Œè¿™ç§æƒ…å†µå«åšæ‹¥å¡(congestion) åœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„é“¾è·¯å®¹é‡(å³å¸¦å®½)ã€äº¤æ¢ç»“ç‚¹ä¸­çš„ç¼“å­˜å’Œå¤„ç†æœºç­‰ï¼Œéƒ½æ˜¯ç½‘ç»œçš„èµ„æºã€‚ è‹¥å‡ºç°æ‹¥å¡è€Œä¸è¿›è¡Œæ§åˆ¶ï¼Œæ•´ä¸ªç½‘ç»œçš„ååé‡å°†éšè¾“å…¥è´Ÿè·çš„å¢å¤§è€Œä¸‹é™ ç†æƒ³æ‹¥å¡æ§åˆ¶çš„ç½‘ç»œï¼šåœ¨ååé‡è¾¾åˆ°é¥±å’Œä¹‹å‰ï¼Œç½‘ç»œååé‡åº”ç­‰äºæ‰€è¾“å…¥çš„è´Ÿè½½ã€‚æ•…ååé‡æ›²çº¿æ˜¯45åº¦çš„æ–œçº¿ã€‚ä½†å½“è¾“å…¥è´Ÿè½½è¶…è¿‡æŸä¸€é™åº¦æ—¶ï¼Œç”±äºç½‘ç»œèµ„æºå—é™ï¼Œååé‡å°±ä¸å†å¢é•¿è€Œä¿æŒæ°´å¹³çº¿ã€‚ä¹Ÿå°±æ˜¯ååé‡è¾¾åˆ°é¥±å’Œã€‚è¿™å°±è¡¨æ˜è¾“å…¥çš„è´Ÿè½½ä¸­æœ‰ä¸€éƒ¨åˆ†æŸå¤±åˆ°äº†ã€‚ä¾‹å¦‚è¾“å…¥åˆ°ç½‘ç»œä¸­çš„æŸäº›åˆ†ç»„è¢«æŸä¸ªç»“ç‚¹ä¸¢å¼ƒäº†ã€‚ å³ä¾¿å¦‚æ­¤ï¼Œç½‘ç»œçš„ååé‡ä»ç„¶ç»´æŒåœ¨å…¶æ‰€èƒ½è¾¾åˆ°çš„æœ€å¤§å€¼ã€‚ æ— æ‹¥å¡æ§åˆ¶çš„ç½‘ç»œï¼Œè¾“å…¥åˆ°è¾¾ä¸€å®šç¨‹åº¦ä¼šè½»åº¦æ‹¥å¡ï¼Œååé‡å¢é•¿å˜æ…¢ã€‚ä¸¥é‡æ‹¥å¡ï¼Œååé‡ç”šè‡³ä¼šä¸å¢åé™ï¼Œç›´åˆ°0ã€‚ å®é™…çš„æ‹¥å¡æ§åˆ¶åº”è¯¥å°½é‡æ¥è¿œç†æƒ³çš„æ‹¥å¡æ§åˆ¶æ›²çº¿ã€‚ ä¸‹é¢ä»‹ç»æ‹¥å¡æ§åˆ¶çš„å››ç§ç®—æ³•ï¼š æ…¢å¼€å§‹(slow-start) æ‹¥å¡é¿å…congestion avoidance å¿«é‡ä¼ (fast retransmit å¿«æ¢å¤(fast recovery) ä¸ºæ–¹ä¾¿åˆ†æï¼Œä¸‹é¢å¯¹å››ç§ç®—æ³•çš„æè¿°è¿›è¡Œäº†æ¡ä»¶å‡è®¾ï¼š æ•°æ®æ˜¯å•æ–¹å‘ä¼ é€ï¼Œè€Œå¦ä¸€ä¸ªæ–¹å‘åªä¼ é€ç¡®è®¤ã€‚ æ¥æ”¶æ–¹æ€»æ˜¯æœ‰è¶³å¤Ÿå¤§çš„ç¼“å­˜ç©ºé—´ï¼Œå› è€Œå‘é€æ–¹å‘é€çª—å£çš„å¤§å°ç”±ç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦æ¥å†³å®š ä»¥æœ€å¤§æŠ¥æ–‡æ®µMSSçš„ä¸ªæ•°ä¸ºè®¨è®ºé—®é¢˜çš„å•ä½ï¼Œè€Œä¸æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚ å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªå«åšæ‹¥å¡çª—å£cwndçš„çŠ¶æ€å˜é‡ï¼Œå…¶å€¼å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€å˜åŒ–ã€‚ æ‹¥å¡çª—å£cwndçš„ç»´æŠ¤åŸåˆ™ï¼šåªè¦ç½‘ç»œæ²¡æœ‰å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å†å¢å¤§ä¸€äº›(ç¡®è®¤æŠ¥æ–‡æ®µçª—å£å¤§å°)ï¼Œä½†åªè¦ç½‘ç»œå‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å‡å°‘ä¸€äº› åˆ¤æ–­å‡ºç°ç½‘ç»œæ‹¥å¡çš„ä¾æ®ï¼šæ²¡æœ‰æŒ‰æ—¶æ”¶åˆ°åº”å½“åˆ°è¾¾çš„ç¡®è®¤æŠ¥æ–‡(å‘é€è¶…æ—¶é‡ä¼ ) å‘é€æ–¹å°†æ‹¥å¡çª—å£ä½œä¸ºå‘é€çª—å£swndï¼Œå³swnd=cwnd ç»´æŠ¤ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ssthreshçŠ¶æ€å˜é‡ å½“cwnd ssthreshæ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ç®—æ³• å½“cwnd ssthreshæ—¶ï¼Œåœæ­¢ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•è€Œæ”¹ç”¨æ‹¥å¡é¿å…ç®—æ³• å½“cwnd = ssthreshæ—¶ï¼Œæ—¢å¯ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ‹¥å¡é¿å…ç®—æ³• 1. æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å… æ…¢å¼€å§‹cwnd ssthreshæ—¶ï¼Œæ‹¥å¡çª—å£ä»1å¼€å§‹ï¼Œæ ¹æ®åº”ç­”æŠ¥æ–‡å¤§å°æ¥æ‰©å¤§æ‹¥å¡çª—å£ï¼Œä¹Ÿå°±æ˜¯cwnd cwnd * 2ã€‚ å¦‚å‘é€æ–¹çª—å£2ï¼Œåº”ç­”å¤§å°2ï¼Œåˆ™ä¸‹æ¬¡å‘é€å¤§å°ä¸º4 æ‹¥å¡é¿å…cwnd = ssthresh æ—¶ï¼Œæ‹¥å¡çª—å£æ¯æ¬¡åªæ‰©å¤§1ï¼Œè€Œä¸æ˜¯å‘æ…¢å¼€å§‹é‚£æ ·æ ¹æ®å‘é€æ–¹çš„è¿”å›çª—å£è¿›è¡Œå¢åŠ ã€‚ è¶…æ—¶é‡ä¼ ï¼šå½“çª—å£å¢åŠ åˆ°ä¸€å®šå¤§å°ï¼Œå‘é€æ–¹å‘é€çš„æŠ¥æ–‡å‡ºç°äº†è¶…æ—¶é‡ä¼ ï¼Œåˆ™åˆ¤æ–­ç½‘ç»œå¯èƒ½å‡ºç°äº†æ‹¥å¡ï¼Œæ­¤æ—¶ï¼šâ‘ å°†æ‹¥å¡çª—å£åˆå§‹åŒ–ä¸º1ï¼Œâ‘¡æ…¢å¼€å§‹é—¨é™ssthreshè®¾ç½®ä¸ºå‘ç”Ÿæ‹¥å¡æ—¶çª—å£å¤§å°çš„ä¸€åŠ â€œæ‹¥å¡é¿å…â€å¹¶éæŒ‡å®Œå…¨èƒ½å¤Ÿé¿å…æ‹¥å¡ï¼Œè€Œæ˜¯æŒ‡åœ¨æ‹¥å¡é¿å…é˜¶æ®µå°†æ‹¥å¡çª—å£æ§åˆ¶ä¸ºæŒ‰çº¿æ€§è§„å¾‹å¢é•¿ï¼Œä½¿ç½‘ç»œæ¯”è¾ƒä¸å®¹æ˜“å‡ºç°æ‹¥å¡ 2. å¿«é‡ä¼ å’Œå¿«æ¢å¤ æ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…ç®—æ³•æ˜¯1988å¹´æå‡ºçš„TCPæ‹¥å¡æ§åˆ¶ç®—æ³•(TCP Tahoeç‰ˆæœ¬) 1990å¹´åˆå¢åŠ äº†ä¸¤ä¸ªæ–°çš„æ‹¥å¡æ§åˆ¶ç®—æ³•(æ”¹è¿›TCPçš„æ€§èƒ½)ï¼Œè¿™å°±æ˜¯å¿«é‡ä¼ å’Œå¿«æ¢å¤(TCP Renoç‰ˆæœ¬) æœ‰æ—¶ï¼Œä¸ªåˆ«æŠ¥æ–‡æ®µä¼šåœ¨ç½‘ç»œä¸­ä¸¢å¤±ï¼Œä½†å®é™…ä¸Šç½‘ç»œå¹¶æœªå‘ç”Ÿæ‹¥å¡ã€‚ è¿™å°†å¯¼è‡´å‘é€æ–¹è¶…æ—¶é‡ä¼ ï¼Œå¹¶è¯¯è®¤ä¸ºç½‘ç»œå‘ç”Ÿäº†æ‹¥å¡ã€‚ å‘é€æ–¹æŠŠæ‹¥å¡çª—å£cwndåˆè®¾ç½®ä¸ºæœ€å°å€¼1ï¼Œå¹¶é”™è¯¯åœ°å¯åŠ¨æ…¢å¼€å§‹ç®—æ³•ï¼Œå› è€Œé™ä½äº†ä¼ è¾“æ•ˆç‡ã€‚ å¿«é‡ä¼ å¿«é‡ä¼ æ˜¯ä½¿å‘é€æ–¹å°½å¿«è¿›è¡Œé‡ä¼ ï¼Œè€Œä¸æ˜¯ç­‰å¾…è¶…æ—¶é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶å†é‡ä¼  è¦æ±‚æ¥æ”¶æ–¹ä¸ç”¨ç­‰å¾…è‡ªå·±å‘é€æ•°æ®æ—¶æ‰è¿›è¡Œæå¸¦ç¡®è®¤ï¼Œè€Œæ˜¯è¦ç«‹å³å‘é€ç¡®è®¤ å³ä½¿æ”¶åˆ°äº†å¤±åºçš„æŠ¥æ–‡æ®µ(è¯´æ˜æœ‰ä¸€æ®µä¸¢å¤±äº†)ä¹Ÿè¦ç«‹å³å‘å‡ºå¯¹å·²æ”¶åˆ°çš„æŠ¥æ–‡æ®µçš„é‡å¤ç¡®è®¤ å‘é€æ–¹ä¸€æ—¦æ”¶åˆ°3ä¸ªè¿ç»­çš„é‡å¤ç¡®è®¤ï¼Œå°±å°†ç›¸åº”çš„æŠ¥æ–‡æ®µç«‹å³é‡ä¼ ï¼Œè€Œä¸æ˜¯ç­‰è¯¥æŠ¥æ–‡æ®µçš„è¶…æ—¶é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶å†é‡ä¼  å¯¹äºä¸ªåˆ«ä¸¢å¤±çš„æŠ¥æ–‡æ®µï¼Œå‘é€æ–¹ä¸ä¼šå‡ºç°è¶…æ—¶é‡ä¼ ï¼Œä¹Ÿå°±ä¸ä¼šè¯¯è®¤ä¸ºå‡ºç°äº†æ‹¥å¡ã€‚ä½¿ç”¨å¿«é‡ä¼ å¯ä»¥ä½¿æ•´ä¸ªç½‘ç»œçš„ååé‡æé«˜çº¦20% å¿«æ¢å¤å‘é€æ–¹ä¸€æ—¦æ”¶åˆ°3ä¸ªé‡å¤ç¡®è®¤ï¼Œå°±çŸ¥é“ç°åœ¨åªæ˜¯ä¸¢å¤±äº†ä¸ªåˆ«æŠ¥æ–‡æ®µã€‚ä¹Ÿæ˜¯ä¸å¯åŠ¨æ…¢å¼€å§‹ç®—æ³•ï¼Œè€Œæ‰§è¡Œå¿«æ¢å¤ç®—æ³• å‘é€æ–¹å°†æ…¢å¼€å§‹é—¨é™ssthreshå€¼å’Œæ‹¥å¡çª—å£cwndå€¼è°ƒæ•´ä¸ºå½“å‰çª—å£çš„ä¸€åŠï¼Œå¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³• å‘é€çª—å£ä¸ç”¨ä¸€ä¸‹å­å›åˆ° 1 äº†ã€‚ ä¹Ÿæœ‰çš„å¿«æ¢å¤å®ç°æ˜¯æŠŠå¿«æ¢å¤å¼€å§‹æ—¶çš„æ‹¥å¡çª—å£cwndå€¼å†å¢å¤§ä¸€äº›ï¼Œå³ç­‰äºæ–°çš„ssthresh+3 æ—¢ç„¶å‘é€æ–¹æ”¶åˆ°3ä¸ªé‡å¤çš„ç¡®è®¤ï¼Œå°±è¡¨æ˜æœ‰3ä¸ªæ•°æ®æŠ¥æ–‡æ®µå·²ç»ç¦»å¼€äº†ç½‘ç»œ è¿™ä¸‰ä¸ªæŠ¥æ–‡æ®µä¸å†æ¶ˆè€—ç½‘ç»œèµ„æºè€Œæ˜¯åœç•™åœ¨æ¥æ”¶æ–¹çš„æ¥æ”¶ç¼“å­˜ä¸­ å¯è§ç°åœ¨ç½‘ç»œä¸­ä¸æ˜¯å †ç§¯äº†æŠ¥æ–‡æ®µè€Œæ˜¯å‡å°‘äº†3ä¸ªæŠ¥æ–‡æ®µã€‚å› æ­¤å¯ä»¥é€‚å½“æŠŠæ‹¥å¡çª—å£æ‰©å¤§äº› è¶…æ—¶é‡ä¼ ã€å¾€è¿”æ—¶é—´è¶…æ—¶é‡ä¼ æ—¶é—´çš„é€‰æ‹©è¶…æ—¶é‡ä¼ æ—¶é—´ RTOçš„å€¼ï¼š çŸ­äºå¾€è¿”ï¼Œå‘é€æ–¹ä¼šæœ‰ä¸å¿…è¦çš„é‡ä¼ ï¼Œå¢å¤§ç½‘ç»œè´Ÿè·ã€‚ è¿œé•¿äºå¾€è¿”ï¼Œä½¿é‡ä¼ æ¨è¿Ÿæ—¶é—´å¤ªé•¿ï¼Œä½¿ç½‘ç»œç©ºé—²æ—¶é—´å¢å¤§ï¼Œé™ä½äº†ä¼ è¾“æ•ˆç‡ã€‚ æ‰€ä»¥æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¶…æ—¶é‡ä¼ æ—¶é—´åº”è¯¥è®¾ä¸ºç•¥å¤§äºå¾€è¿”æ—¶é—´ã€‚ ä½†æ˜¯ï¼ŒTCPä¸‹å±‚æ˜¯å¤æ‚çš„äº’è”ç½‘ç¯å¢ƒï¼Œç”±äºå„åŒºåŸŸçš„é€Ÿç‡å¯èƒ½ä¸ä¸€è‡´ï¼Œæ¯ä¸ªIPæ•°æ®æŠ¥çš„è½¬å‘è·¯ç”±ä¹Ÿå¯èƒ½ä¸åŒã€‚ å› æ­¤å°†è¶…æ—¶é‡ä¼ æ—¶é—´è®¾ç½®ä¸ºä¸€ä¸ªå›ºå®šå€¼æ˜¯è¡Œä¸é€šçš„ æ‰€ä»¥åªèƒ½åˆ©ç”¨æ¯æ¬¡æµ‹é‡å¾—åˆ°çš„RTTæ ·æœ¬ï¼Œè®¡ç®—åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´ RTTs(åˆç§°å¹³æ»‘çš„å¾€è¿”æ—¶é—´) æ˜¾ç„¶ï¼Œè¶…æ—¶é‡ä¼ æ—¶é—´RTOåº”ç•¥å¤§äºåŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTs åœ¨ä¸Šå›¾å¼å­ä¸­ï¼Œ0â‰¤ Î± I ï¼š è‹¥ Î± å¾ˆæ¥è¿‘äº0ï¼Œåˆ™æ–°RTTæ ·æœ¬å¯¹RTTçš„å½±å“ä¸å¤§; è‹¥ Î± å¾ˆæ¥è¿‘äº1ï¼Œåˆ™æ–°RTTæ ·æœ¬å¯¹RTTçš„å½±å“è¾ƒå¤§ã€‚ å·²æˆä¸ºå»ºè®®æ ‡å‡†çš„RFC6298æ¨èçš„Î± å€¼ä¸º18ï¼Œå³0.125 ã€‚ ç”¨è¿™ç§æ–¹æ³•å¾—å‡ºçš„åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTSå°±æ¯”æµ‹é‡å‡ºçš„RTTå€¼æ›´åŠ å¹³æ»‘ã€‚ å¾€è¿”æ—¶é—´æµ‹é‡é—®é¢˜ é’ˆå¯¹å‡ºç°è¶…æ—¶é‡ä¼ æ—¶æ— æ³•æµ‹å‡†å¾€è¿”æ—¶é—´RTTçš„é—®é¢˜ï¼Œæœ‰ä»¥ä¸‹è§£å†³æ–¹æ³• åœ¨è®¡ç®—åŠ æƒå¹³å‡å¾€è¿”æ—¶é—´RTTsæ—¶ï¼Œåªè¦æŠ¥æ–‡æ®µé‡ä¼ äº†ï¼Œå°±ä¸é‡‡ç”¨å…¶å¾€è¿”æ—¶é—´RTTæ ·æœ¬ã€‚ ä¹Ÿå°±æ˜¯å‡ºç°é‡ä¼ æ—¶ï¼Œä¸é‡æ–°è®¡ç®—RTTsï¼Œè¿›è€Œè¶…æ—¶é‡ä¼ æ—¶é—´RTOä¹Ÿä¸ä¼šé‡æ–°è®¡ç®—ã€‚ æ­¤æ–¹æ³•çš„æ¼æ´å¦‚ä¸‹ï¼šå¦‚æœæŠ¥æ–‡æ®µæ—¶å»¶çªç„¶å¢å¤§å¾ˆå¤šï¼Œå¹¶ä¸”ä¹‹åå¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¼šä¿æŒè¿™ç§æ—¶å»¶ã€‚å› æ­¤åœ¨åŸæ¥å¾—å‡ºçš„é‡ä¼ æ—¶é—´å†…ï¼Œä¸ä¼šæ”¶åˆ°ç¡®è®¤æŠ¥æ–‡æ®µï¼Œäºæ˜¯é‡ä¼ ã€‚æ ¹æ®ä¸Šè¿°ç®—æ³•ï¼Œæ¯æ¬¡é‡ä¼ åï¼Œå‘é€æ–¹éƒ½ä¸ä¼šæ”¶åˆ°ç¡®è®¤ï¼Œä½†é‡ä¼ æ—¶é—´æ°¸è¿œä¸ä¼šæ›´æ–°ï¼Œå‘é€æ–¹æ°¸è¿œè¦é‡ä¼ ï¼Œæ— å¤–åŠ›ä½œç”¨ï¼Œæ­¤è¿‡ç¨‹æ°¸è¿œä¸ä¼šç»“æŸï¼Œè¿™å°±é€ æˆäº†æ­»é”ã€‚ ä¿®æ­£æ–¹æ³•ï¼šæŠ¥æ–‡æ®µæ¯é‡ä¼ ä¸€æ¬¡ï¼Œå°±æŠŠè¶…æ—¶é‡ä¼ æ—¶é—´RTOå¢å¤§ä¸€äº›ï¼Œå…¸å‹çš„åšæ³•æ˜¯å°†RTOçš„å€¼å–ä¸ºæ—§RTOçš„2å€ å¯é ä¼ è¾“ä¼ è¾“æ—¶æ»‘åŠ¨çª—å£ç§»åŠ¨çš„ä¸åŒæƒ…å†µï¼š å‘åæ”¶ç¼©ã€å‰æ²¿ç§»åŠ¨çš„æƒ…å†µï¼ŒTCPå¼ºçƒˆä¸å»ºè®®å‡ºç°ã€‚ å› ä¸ºå¾ˆå¯èƒ½å‘é€æ–¹åœ¨æ”¶åˆ°è¿™ä¸ªé€šçŸ¥ä¹‹å‰ï¼Œå°±å·²ç»å‘é€äº†çª—å£ä¸­çš„è®¸å¤šæ•°æ®ï¼Œç°åœ¨åˆè¦æ”¶ç¼©çª—å£ï¼Œä¸è®©å‘é€è¿™äº›æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿé”™è¯¯ã€‚ å¦‚ä½•æè¿°å‘é€çª—å£çš„çŠ¶æ€ï¼Ÿä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆP1ï¼ŒP2ï¼ŒP3åˆ†åˆ«æŒ‡å‘ç›¸åº”çš„å­—èŠ‚åºå· å°äºP1çš„æ˜¯å·²å‘é€å¹¶å·²æ”¶åˆ°ç¡®è®¤çš„éƒ¨åˆ†; å¤§äºç­‰äºP3çš„æ˜¯ä¸å…è®¸å‘é€çš„éƒ¨åˆ†; P3-P1å‘é€çª—å£çš„å°ºå¯¸; P2-P1å·²å‘é€ä½†å°šæœªæ”¶åˆ°ç¡®è®¤çš„å­—èŠ‚æ•°; P3-P2å…è®¸å‘é€ä½†å½“å‰å°šæœªå‘é€çš„å­—èŠ‚æ•°(åˆç§°ä¸ºå¯ç”¨çª—å£æˆ–æœ‰æ•ˆçª—å£) è™½ç„¶å‘é€æ–¹çš„å‘é€çª—å£æ˜¯æ ¹æ®æ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£è®¾ç½®çš„ï¼Œä½†åœ¨åŒä¸€æ—¶åˆ»ï¼Œå‘é€æ–¹çš„å‘é€çª—å£å¹¶ä¸æ€»æ˜¯å’Œæ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£ä¸€æ ·å¤§ã€‚ ç½‘ç»œä¼ é€çª—å£å€¼éœ€è¦ç»å†ä¸€å®šçš„æ—¶é—´æ»åï¼Œå¹¶ä¸”è¿™ä¸ªæ—¶é—´è¿˜æ˜¯ä¸ç¡®å®šçš„ã€‚ å‘é€æ–¹è¿˜å¯èƒ½æ ¹æ®ç½‘ç»œå½“æ—¶çš„æ‹¥å¡æƒ…å†µé€‚å½“å‡å°è‡ªå·±çš„å‘é€çª—å£å°ºå¯¸ã€‚ å¯¹äº**ä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®åº”å¦‚ä½•å¤„ç†ï¼Œ**TCPå¹¶æ— æ˜ç¡®è§„å®šã€‚ å¦‚æœæ¥æ”¶æ–¹æŠŠä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®ä¸€å¾‹ä¸¢å¼ƒï¼Œé‚£ä¹ˆæ¥æ”¶çª—å£çš„ç®¡ç†å°†ä¼šæ¯”è¾ƒç®€å•ï¼Œä½†è¿™æ ·åšä¸åˆ©äºå¯¹ç½‘ç»œèµ„æºçš„åˆ©ç”¨ã€‚å› ä¸ºå‘é€æ–¹ä¼šé‡å¤ä¼ é€è¾ƒå¤šçš„æ•°æ®ã€‚ TCPé€šå¸¸å¯¹ä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®æ˜¯å…ˆä¸´æ—¶å­˜æ”¾åœ¨æ¥æ”¶çª—å£ä¸­ï¼Œç­‰åˆ°å­—èŠ‚æµä¸­æ‰€ç¼ºå°‘çš„å­—èŠ‚æ”¶åˆ°åï¼Œå†æŒ‰åºäº¤ä»˜ä¸Šå±‚çš„åº”ç”¨è¿›ç¨‹ã€‚ å½“ç¼ºå°‘å­—èŠ‚è¿˜æœªæ”¶åˆ°æ—¶ï¼Œåªèƒ½å¯¹å·²åˆ°è¾¾çš„æ•°æ®è¿›è¡Œç¡®è®¤ï¼Œè€Œä¸æ»‘åŠ¨çª—å£ã€‚è¿™æ„å‘³ç€æ¥æ”¶æ–¹å‘é€çš„ç¡®è®¤åºå·ä»ç„¶æ˜¯ç¼ºå°‘å­—èŠ‚çš„æœ€å°åºå·ã€‚ TCPè¦æ±‚æ¥æ”¶æ–¹å¿…é¡»æœ‰ç´¯ç§¯ç¡®è®¤å’Œæå¸¦ç¡®è®¤æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥å‡å°ä¼ è¾“å¼€é”€ã€‚æ¥æ”¶æ–¹å¯ä»¥åœ¨åˆé€‚çš„æ—¶å€™å‘é€ç¡®è®¤ï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±æœ‰æ•°æ®è¦å‘é€æ—¶æŠŠç¡®è®¤ä¿¡æ¯é¡ºä¾¿æå¸¦ä¸Šã€‚ æ¥æ”¶æ–¹ä¸åº”è¿‡åˆ†æ¨è¿Ÿå‘é€ç¡®è®¤ï¼Œå¦åˆ™ä¼šå¯¼è‡´å‘é€æ–¹ä¸å¿…è¦çš„è¶…æ—¶é‡ä¼ ï¼Œè¿™åè€Œæµªè´¹äº†ç½‘ç»œçš„èµ„æºã€‚ TCPæ ‡å‡†è§„å®šï¼Œç¡®è®¤æ¨è¿Ÿçš„æ—¶é—´ä¸åº”è¶…è¿‡0.5ç§’ã€‚è‹¥æ”¶åˆ°ä¸€è¿ä¸²å…·æœ‰æœ€å¤§é•¿åº¦çš„æŠ¥æ–‡æ®µï¼Œåˆ™å¿…é¡»æ¯éš”ä¸€ä¸ªæŠ¥æ–‡æ®µå°±å‘é€ä¸€ä¸ªç¡®è®¤[RFC 1122]ã€‚ æå¸¦ç¡®è®¤å®é™…ä¸Šå¹¶ä¸ç»å¸¸å‘ç”Ÿï¼Œå› ä¸ºå¤§å¤šæ•°åº”ç”¨ç¨‹åºå¾ˆå°‘åŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘å‘TCPæœåŠ¡å™¨è¿›ç¨‹å‘é€TCPè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µä¸Šå‘é€æ•°æ®ã€‚ TCPçš„é€šä¿¡æ˜¯å…¨åŒå·¥é€šä¿¡ã€‚é€šä¿¡ä¸­çš„æ¯ä¸€æ–¹éƒ½åœ¨å‘é€å’Œæ¥æ”¶æŠ¥æ–‡æ®µã€‚å› æ­¤ï¼Œæ¯ä¸€æ–¹éƒ½æœ‰è‡ªå·±çš„å‘é€çª—å£å’Œæ¥æ”¶çª—å£ã€‚åœ¨è°ˆåˆ°è¿™äº›çª—å£æ—¶ï¼Œä¸€å®šè¦å¼„æ¸…æ¥šæ˜¯å“ªä¸€æ–¹çš„çª—å£ã€‚ è¿è¾“è¿æ¥ç®¡ç†TCPè¿æ¥å»ºç«‹ï¼šä¸‰æ¡æ‰‹TCPçš„è¿è¾“è¿æ¥ç®¡ç†å°±æ˜¯ä½¿è¿è¾“è¿æ¥çš„å»ºç«‹å’Œé‡Šæ”¾éƒ½èƒ½æ­£å¸¸åœ°è¿›è¡Œã€‚ TCPçš„è¿æ¥å»ºç«‹è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜: ä½¿TCPåŒæ–¹èƒ½å¤Ÿç¡®çŸ¥å¯¹æ–¹çš„å­˜åœ¨; ä½¿TCPåŒæ–¹èƒ½å¤Ÿåå•†ä¸€äº›å‚æ•°(å¦‚æœ€å¤§çª—å£å€¼ã€æ˜¯å¦ä½¿ç”¨çª—å£æ‰©å¤§é€‰é¡¹å’Œæ—¶é—´æˆ³é€‰é¡¹ä»¥åŠæœåŠ¡è´¨é‡ç­‰); ä½¿TCPåŒæ–¹èƒ½å¤Ÿå¯¹è¿è¾“å®ä½“èµ„æº(å¦‚ç¼“å­˜å¤§å°ã€è¿æ¥è¡¨ä¸­çš„é¡¹ç›®ç­‰)è¿›è¡Œåˆ†é…ã€‚ å»ºç«‹è¿‡ç¨‹ï¼š æœ€åˆï¼Œä¸¤ç«¯çš„TCPè¿›ç¨‹éƒ½å¤„äºå…³å›¢çŠ¶æ€ã€‚ ä¸€å¼€å§‹ï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹é¦–å…ˆåˆ›å»ºä¼ è¾“æ§åˆ¶å—ï¼Œç”¨æ¥å­˜å‚¨TCPè¿æ¥ä¸­çš„ä¸€äº›é‡è¦ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼ŒTCPè¿æ¥è¡¨ï¼ŒæŒ‡å‘å‘é€å’Œæ¥æ”¶ç¼“å­˜çš„æŒ‡é’ˆï¼ŒæŒ‡å‘é‡ä¼ é˜Ÿåˆ—çš„æŒ‡é’ˆï¼Œå½“å‰çš„å‘é€å’Œæ¥æ”¶åºå·ã€‚ æ­¤æ—¶ï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹å°±è¿›å…¥ç›‘å¬çŠ¶æ€ï¼Œç­‰å¾…TCPå®¢æˆ·è¿›ç¨‹çš„è¿æ¥è¯·æ±‚ã€‚ å¯¹äºTCPæœåŠ¡å™¨ï¼ŒTCPæœåŠ¡å™¨è¿›ç¨‹æ˜¯è¢«åŠ¨ç­‰å¾…æ¥è‡ªTCPå®¢æˆ·è¿›ç¨‹çš„è¿æ¥è¯·æ±‚ï¼Œè€Œä¸æ˜¯ä¸»åŠ¨å‘èµ·ã€‚å› æ­¤ç§°ä¸ºè¢«åŠ¨æ‰“å¼€è¿æ¥ã€‚ å¯¹äºTCPå®¢æˆ·ï¼Œç”±äºTCPè¿æ¥å»ºç«‹æ˜¯ç”±TCPå®¢æˆ·ä¸»åŠ¨å‘èµ·çš„ï¼Œå› æ­¤ç§°ä¸ºä¸»åŠ¨æ‰“å¼€è¿æ¥ã€‚ TCPå®¢æˆ·è¿›ç¨‹ä¹Ÿæ˜¯é¦–å…ˆåˆ›å»ºä¼ è¾“æ§åˆ¶å—ã€‚ç„¶åï¼Œåœ¨æ‰“ç®—å»ºç«‹TCPè¿æ¥æ—¶ï¼Œå¹¶è¿›å…¥åŒæ­¥å·²å‘é€çŠ¶æ€ã€‚ è¿›å…¥â€œä¸‰æŠ¥æ–‡æ¡æ‰‹â€ SYNä¸º1ï¼šåŒæ­¥ä½ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªTCPè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µã€‚ è¯¥æŠ¥æ–‡æ®µä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†ä¼šæ¶ˆè€—ä¸€ä¸ªåºåˆ—å·seq ACK=1ï¼šç¡®è®¤ä½ï¼Œä»£è¡¨è¿™æ˜¯æ™®é€šç¡®è®¤æŠ¥æ–‡æ®µï¼Œackx+1è¡¨ç¤ºè¿™æ˜¯å¯¹æŠ¥æ–‡æ®µåºåˆ—å·seqxçš„ç¡®è®¤ ack=x+1ï¼šè¿™æ˜¯å¯¹TCPå®¢æˆ·è¿›ç¨‹æ‰€é€‰æ‹©çš„åˆå§‹åºå·çš„ç¡®è®¤ã€‚ è¯¥æŠ¥æ–‡æ®µåŒæ ·ä¸èƒ½æºå¸¦æ•°æ®ã€‚åŒæ ·ä¼šæ¶ˆè€—ä¸€ä¸ªåºåˆ—å·seq seq ï¼šåºå·å­—æ®µ ï¼Œè¢«è®¾ç½®äº†ä¸€ä¸ªåˆå§‹å€¼xï¼Œä½œä¸ºTCPå®¢æˆ·æœåŠ¡å™¨è¿›ç¨‹æ‰€é€‰æ‹©çš„åˆå§‹åºå·ã€‚ TCPè¿æ¥é‡Šæ”¾ï¼šå››æŒ¥æ‰‹é€šä¿¡ç»“æŸåï¼ŒTCPé€šä¿¡åŒæ–¹éƒ½å¯ä»¥é‡Šæ”¾è¿æ¥ã€‚ç°åœ¨TCPå®¢æˆ·è¿›ç¨‹å’ŒTCPæœåŠ¡å™¨è¿›ç¨‹éƒ½å¤„äºè¿æ¥å·²å»ºç«‹çŠ¶æ€ã€‚ å‡è®¾ä½¿ç”¨TCPå®¢æˆ·è¿›ç¨‹çš„åº”ç”¨è¿›ç¨‹é€šçŸ¥å…¶ä¸»åŠ¨å…³å›¢TCPè¿æ¥ï¼ŒTCPå®¢æˆ·è¿›ç¨‹ä¼šå‘é€TCPè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œå¹¶è¿›å…¥ç»ˆæ­¢ç­‰å¾…1çŠ¶æ€ã€‚ FINï¼šç»ˆæ­¢ä½ ACKï¼šç¡®è®¤ä½ ä¸Šé¢ä¸¤ä¸ªä½éƒ½ä¸º1ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªTCPè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µã€‚ TCPè§„å®šç»ˆæ­¢ä½ FINç­‰äº1çš„æŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—æ‰ä¸€ä¸ªåºå·ã€‚ seq:åºå·å­—æ®µã€‚ ack:å®ƒç­‰äºTCPå®¢æˆ·é€‰ç¨‹ä¹‹å‰å·²æ”¶åˆ°çš„ã€æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1. TCPæœåŠ¡å™¨è¿›ç¨‹æ”¶åˆ°TCPè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåï¼Œä¼šå‘é€ä¸€ä¸ªæ™®é€šçš„TCPç¡®è®¤æŠ¥æ–‡æ®µå¹¶è¿›å…¥å…³é—­ç­‰å¾…çŠ¶æ€ã€‚ TCPå®¢æˆ·è¿›ç¨‹åœ¨å‘é€å®Œæœ€åä¸€ä¸ªç¡®è®¤æŠ¥æ–‡æ®µåï¼Œå¿…é¡»è¿›å…¥æ—¶é—´ç­‰å¾…çŠ¶æ€ï¼Œ2MSLåæ‰è¿›å…¥å…³é—­çŠ¶æ€ã€‚å› ä¸ºè¦é˜²æ­¢å‘ç»™æœåŠ¡å™¨çš„ç¡®è®¤æŠ¥æ–‡ä¸¢å¤±ã€‚ å®¢æˆ·ç«¯å‘èµ·å…³é—­è¯·æ±‚ï¼Œä¸€å»ä¸€å›åè¿›å…¥åŠå…³é—­çŠ¶æ€ã€å®¢æˆ·ç«¯ä¸å†å‘é€æ•°æ®ï¼ŒæœåŠ¡ç«¯å¯èƒ½è¿˜ä¼šå‘ã€‘ æœåŠ¡å™¨å°†è‡ªå·±å‰©ä½™çš„æ•°æ®å‘é€å®Œåä¹Ÿå‘é€ä¸€ä¸ªå…³é—­è¯·æ±‚ï¼Œæ¥ç€å®¢æˆ·ç«¯ç»™äºˆå›åº”åæœåŠ¡å™¨å…³é—­ï¼Œå®¢æˆ·æœºåˆ™è¦ç­‰åˆ°ä¸€æ®µæ—¶é—´åå®Œå…¨å…³é—­ã€‚ é—®é¢˜ï¼šTCPå®¢æˆ·è¿›ç¨‹åœ¨å‘é€å®Œæœ€åä¸€ä¸ªç¡®è®¤æŠ¥æ–‡æ®µåï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥è¿›å…¥å…³é—­çŠ¶æ€ï¼Œè€Œæ˜¯è¦è¿›å…¥æ—¶é—´ç­‰å¾…çŠ¶æ€ï¼Œ2MSLåæ‰è¿›å…¥å…³é—­çŠ¶æ€ï¼Ÿ å›ç­”ï¼š å› ä¸ºè¿™å¿…ç„¶ä¼šé€ æˆTCPæœåŠ¡å™¨è¿›ç¨‹åå¤é‡ä¼ TCPè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼Œå¹¶ä¸€ç›´å¤„äºæœ€åç¡®è®¤çŠ¶æ€è€Œæ— æ³•è¿›å…¥å…³é—­çŠ¶æ€ã€‚ æ—¶é—´ç­‰å¾…çŠ¶æ€ä»¥åŠå¤„äºè¯¥çŠ¶æ€2MSLæ—¶é•¿ï¼Œå¯ç¡®ä¿TCPæœåŠ¡å™¨è¿›ç¨‹å¯ä»¥æ”¶åˆ°æœ€åä¸€ä¸ªTCPç¡®è®¤æŠ¥æ–‡æ®µè€Œè¿›å…¥å…³é—­çŠ¶æ€ã€‚ å¦å¤–ï¼ŒTCPå®¢æˆ·è¿›ç¨‹åœ¨å‘é€å®Œæœ€åä¸€ä¸ªTCPç¡®è®¤æŠ¥æ–‡æ®µåï¼Œå†ç»è¿‡2MSLæ—¶é•¿ï¼Œå°±å¯ä»¥ä½¿æœ¬æ¬¡è¿æ¥æŒç»­æ—¶é—´è‚‰æ‰€äº§ç”Ÿçš„æ‰€æœ‰æŠ¥æ–‡æ®µéƒ½ç½‘ç»œä¸­æ¶ˆå¤±ã€‚è¿™æ ·å°±å¯ä»¥ä½¿ä¸‹ä¸€ä¸ªæ–°çš„TCPè¿æ¥ä¸­ï¼Œä¸ä¼šå‡ºç°æ—§è¿æ¥ä¸­çš„æŠ¥æ–‡æ®µã€‚ TCPä¸­ä¿æ´»è®¡æ—¶å™¨çš„ä½œç”¨ï¼š TCP é¦–éƒ¨æ ¼å¼ æºç«¯å£ï¼šå 16æ¯”ç‰¹ï¼Œå†™å…¥æºç«¯å£å·ï¼Œç”¨æ¥æ ‡è¯†å‘é€è¯¥TCPæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹ ç›®çš„ç«¯å£ï¼šå 16æ¯”ç‰¹ï¼Œå†™å…¥ç›®çš„ç«¯å£å·ï¼Œç”¨æ¥æ ‡è¯†æ¥æ”¶è¯¥TCPæŠ¥æ–‡æ®µçš„åº”ç”¨è¿›ç¨‹ åºå·ï¼šå 32æ¯”ç‰¹ï¼Œå–å€¼èŒƒå›´[ 0 , 2^32^ âˆ’ 1 ] ï¼Œåºå·å¢åŠ åˆ°æœ€åä¸€ä¸ªåï¼Œä¸‹ä¸€ä¸ªåºå·å°±åˆå›åˆ°0ã€‚ ä½œç”¨æ˜¯æŒ‡å‡ºæœ¬TCPæŠ¥æ–‡æ®µæ•°æ®è½½è·çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå· ç¡®è®¤æ ‡å¿—ä½ACKï¼šå–å€¼ä¸º1æ—¶ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆï¼Œä¸º0æ—¶ç¡®è®¤å·å­—æ®µæ— æ•ˆ ç¡®è®¤å·ï¼šå 32æ¯”ç‰¹ï¼Œå–å€¼èŒƒå›´[ 0 , 2 ^32^ âˆ’1 ] ï¼Œåºå·å¢åŠ åˆ°æœ€åä¸€ä¸ªåï¼Œä¸‹ä¸€ä¸ªåºå·å°±åˆå›åˆ°0ã€‚ å¯ç†è§£ä¸ºè‹¥ç¡®è®¤å·nï¼Œåˆ™è¡¨æ˜åˆ°åºå·n-1ä¸ºæ­¢çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ­£ç¡®æ¥æ”¶ï¼ŒæœŸæœ›æ¥æ”¶åºå·ä¸ºnçš„æ•°æ® æ•°æ®åç§»ï¼šå 4æ¯”ç‰¹ï¼Œå¹¶ä»¥4å­—èŠ‚ä¸ºå•ä½ ç”¨æ¥æŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„æ•°æ®è½½è·éƒ¨åˆ†çš„èµ·å§‹å¤„è·ç¦»TCPæŠ¥æ–‡æ®µçš„èµ·å§‹å¤„ã€‚è¿™ä¸ªå­—æ®µå®é™…ä¸Šæ˜¯æŒ‡å‡ºTCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨é•¿åº¦ é¦–éƒ¨å›ºå®šé•¿åº¦ä¸º20å­—èŠ‚ï¼Œå› æ­¤æ•°æ®åç§»å­—æ®µçš„æœ€å°å€¼(0101)2ï¼›é¦–éƒ¨æœ€å¤§é•¿åº¦ä¸º60å­—èŠ‚ï¼Œå› æ­¤æ•°æ®åç§»å­—æ®µæœ€å¤§å€¼ä¸º(1111)2 ä¿ç•™å­—æ®µï¼šå 6æ¯”ç‰¹ï¼Œä¿ç•™ä¸ºä»Šåä½¿ç”¨ï¼Œä½†æ˜¯ç›®å‰åº”ç½®ä¸º0 çª—å£ï¼šå 16æ¯”ç‰¹ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚æŒ‡å‡ºå‘é€æœ¬æŠ¥æ–‡æ®µä¸€æ–¹çš„æ¥æ”¶çª—å£ çª—å£å€¼ä½œä¸ºæ¥æ”¶æ–¹è®©å‘é€æ–¹è®¾ç½®å…¶å‘é€çª—å£çš„ä¾æ®ï¼Œè¿™æ˜¯ä»¥æ¥æ”¶æ–¹çš„æ¥æ”¶èƒ½åŠ›æ¥æ§åˆ¶å‘é€æ–¹çš„å‘é€èƒ½åŠ›ï¼Œç§°ä¸ºæµé‡æ§åˆ¶ æ£€éªŒå’Œï¼šå 16æ¯”ç‰¹ï¼Œæ£€æµ‹èŒƒå›´åŒ…æ‹¬TCPæŠ¥æ–‡æ®µçš„é¦–éƒ¨å’Œæ•°æ®è½½è·ä¸¤éƒ¨åˆ† åœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼Œè¦åœ¨TCPæŠ¥æ–‡æ®µçš„å‰é¢åŠ ä¸Š12å­—èŠ‚çš„ä¼ªé¦–éƒ¨ åŒæ­¥æ ‡å¿—ä½SYNï¼šåœ¨TCPè¿æ¥å»ºç«‹æ—¶ç”¨æ¥åŒæ­¥åºå· ç»ˆæ­¢æ ‡å¿—ä½FINï¼šç”¨æ¥é‡Šæ”¾TCPè¿æ¥ å¤ä½æ ‡å¿—ä½RSTï¼šç”¨æ¥å¤ä½TCPè¿æ¥ å½“RST=1æ—¶ï¼Œè¡¨æ˜TCPè¿æ¥å‡ºç°äº†å¼‚å¸¸ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿æ¥ï¼›RSTç½®1è¿˜ç”¨æ¥æ‹’ç»ä¸€ä¸ªéæ³•çš„æŠ¥æ–‡æ®µæˆ–æ‹’ç»æ‰“å¼€ä¸€ä¸ªTCPè¿æ¥ æ¨é€æ ‡å¿—ä½PSHï¼šæ¥æ”¶æ–¹çš„TCPæ”¶åˆ°è¯¥æ ‡å¿—ä½ä¸º1çš„æŠ¥æ–‡æ®µä¼šå°½å¿«ä¸Šäº¤åº”ç”¨è¿›ç¨‹ï¼Œè€Œä¸å¿…ç­‰åˆ°æ¥æ”¶ç¼“å­˜éƒ½å¡«æ»¡åå†å‘ä¸Šäº¤ä»˜ ç´§æ€¥æ ‡å¿—ä½URGï¼šå–å€¼ä¸º1æ—¶ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆï¼›å–å€¼ä¸º0æ—¶ç´§æ€¥æŒ‡é’ˆå­—æ®µæ— æ•ˆã€‚ ç´§æ€¥æŒ‡é’ˆï¼šå 16æ¯”ç‰¹ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œç”¨æ¥æŒ‡æ˜ç´§æ€¥æ•°æ®çš„é•¿åº¦ å½“å‘é€æ–¹æœ‰ç´§æ€¥æ•°æ®æ—¶ï¼Œå¯å°†ç´§æ€¥æ•°æ®æ’é˜Ÿåˆ°å‘é€ç¼“å­˜çš„æœ€å‰é¢ï¼Œå¹¶ç«‹åˆ»å°è£…åˆ°ä¸€ä¸ªTCPæŠ¥æ–‡æ®µä¸­è¿›è¡Œå‘é€ã€‚ç´§æ€¥æŒ‡é’ˆä¼šæŒ‡å‡ºæœ¬æŠ¥æ–‡æ®µæ•°æ®è½½è·éƒ¨åˆ†åŒ…å«äº†å¤šé•¿çš„ç´§æ€¥æ•°æ®ï¼Œç´§æ€¥æ•°æ®ä¹‹åæ˜¯æ™®é€šæ•°æ® é€‰é¡¹ï¼šå¢åŠ é€‰é¡¹å¯ä»¥å¢åŠ TCPçš„åŠŸèƒ½ æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦MSSé€‰é¡¹ï¼šTCPæŠ¥æ–‡æ®µæ•°æ®è½½è·éƒ¨åˆ†çš„æœ€å¤§é•¿åº¦ çª—å£æ‰©å¤§é€‰é¡¹ï¼šä¸ºäº†æ‰©å¤§çª—å£(æé«˜ååç‡) æ—¶é—´æˆ³é€‰é¡¹ï¼š ç”¨æ¥è®¡ç®—å¾€è¿”æ—¶é—´RTT ç”¨äºå¤„ç†åºå·è¶…èŒƒå›´çš„æƒ…å†µï¼Œåˆç§°ä¸ºé˜²æ­¢åºå·ç»•å›PAWS é€‰æ‹©ç¡®è®¤é€‰é¡¹ï¼šå®ç°é€‰æ‹©ç¡®è®¤åŠŸèƒ½ å¡«å……ï¼šç”±äºé€‰é¡¹é•¿åº¦å¯å˜ï¼Œå› æ­¤ä½¿ç”¨å¡«å……æ¥ä¿è¯æŠ¥æ–‡æ®µé¦–éƒ¨èƒ½è¢«4æ•´é™¤"},{"title":"inside object model3","path":"/wiki/cpp/inside object model3.html","content":"æ„é€ ã€ææ„ã€æ‹·è´è¯­æ„å­¦ ä¸è¦åœ¨çº¯è™šåŸºç±»é‡Œå£°æ˜æˆå‘˜å˜é‡ï¼ è¿™æ˜¯ã€Šeffective c++ã€‹é‡Œçš„ä¸€æ¡å¿ å‘Šï¼Œç°åœ¨æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ã€‚ ä¸‹é¢æ˜¯ä¸ªæ¼æ´ç™¾å‡ºçš„ä¾‹å­ï¼Œå¹¶ä¸”å›´ç»•æ¼æ´ä¼šæœ‰æ‰€è®¨è®ºï¼š class Abstract_basepublic:\tvirtual ~Abstract_base() = 0;\tvirtual void interface() const = 0;\tvirtual const char* mumble() const return _mumble;protected:\tchar* _mumble; // damn bug...; //è¿™ä¸ªç±»éœ€è¦ä¸€ä¸ªæ˜¾å¼çš„æ„é€ å‡½æ•°åˆå§‹åŒ–mumbleï¼Œå¦åˆ™åç»­ä½¿ç”¨å¾ˆå®¹æ˜“å‡ºé—®é¢˜ å¯èƒ½ä½ æƒ³çš„æ˜¯åç»­å­ç±»èƒ½å®Œæˆåˆå§‹åŒ–å·¥ä½œã€‚è¿™æ ·æƒ³çš„è¯ï¼Œçº¯è™šåŸºç±»è¿˜æ˜¯è¦æä¾›ä¸€ä¸ªæ¥å£ï¼šå¸¦æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ï¼ˆæœ€å¥½è¿˜æ˜¯ protected æƒé™ï¼‰ã€‚ Abstract_base:: Abstract_base(char* mumble_value = 0) //like this\t:_mumble(mumble_value) çœŸæ˜¯æœ‰å¤Ÿéº»çƒ¦çš„â€¦â€¦ä¸è¦å†æåé¢çš„ä½¿ç”¨è€…æˆ–ä¿®æ”¹è€…å¿˜è®°èµ‹å€¼ä¹‹ç±»çš„é—®é¢˜äº†ã€‚ã€‚ æœ€å®ç”¨çš„è§‚ç‚¹è¿˜æ˜¯ï¼šä¸è¦åœ¨çº¯è™šåŸºç±»é‡Œå£°æ˜æˆå‘˜å˜é‡ã€‚ ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒæŠŠå­ç±»å…±äº«çš„æ•°æ®æ”¾åˆ°åŸºç±»é‡Œä¹Ÿç®—æ˜¯ä¸€ç§è‡ªç„¶çš„æƒ³æ³•å’Œè®¾è®¡ã€‚ çº¯è™šå‡½æ•°çš„å­˜åœ¨ è™½ç„¶å’Œè®¾è®¡åˆè¡·ç›¸è¿èƒŒï¼Œä½†çº¯è™šå‡½æ•°ç¡®å®å¯ä»¥åœ¨è™šåŸºç±»é‡Œå®šä¹‰ç”šè‡³è°ƒç”¨ã€‚ inline voidAbstract_base:: interface() const\tfunction\t//... inline voidConcrete_derived::interface() const\t//é™æ€è°ƒç”¨\t//è°ƒç”¨ä¸€ä¸ªpure virtual function\tAbstract_base::interface(); //è°ƒç”¨çš„æ–¹å¼æ˜¯é™æ€è°ƒç”¨è€Œéè™šæ‹Ÿæœºåˆ¶ç‰¹æœ‰çš„æ‰§è¡ŒæœŸåŠ¨æ€è°ƒç”¨ã€‚ Pure Virtual destruction ä¾‹å¤–æ˜¯çº¯è™šææ„ã€‚ä½ å¿…é¡»å®šä¹‰å®ƒã€‚ å› ä¸ºææ„â€œæ ‘â€çš„å­˜åœ¨ï¼Œå­ç±»å¯¹è±¡çš„ææ„è¿å¸¦ç€å…¶çˆ¶ç±»çš„æ‰€æœ‰ææ„ï¼Œåˆ°çº¯è™šåŸºç±»è¿™é‡Œä¸èƒ½ç¼ºå¸­å•Šã€‚ å‡†ç¡®æ¥è¯´ï¼šé™æ€å­ç±»ææ„ä¼šè¢«ç¼–è¯‘å™¨æ‰©å¼ ï¼Œé™æ€è°ƒç”¨å…¶åŸºç±»ï¼ˆåŒ…æ‹¬è™šåŸºç±»ï¼‰çš„ææ„å‡½æ•°ã€‚ææ„å‡½æ•°çš„ç¼ºå¤±ä¼šå¯¼è‡´é“¾æ¥å¤±è´¥ã€‚ çº¯è™šå‡½æ•°å®šä¹‰çš„å¯èƒ½æ€§ï¼Œä½¿ç¼–è¯‘å™¨ä¸ä¼šåœ¨é¢å¯¹çº¯è™šææ„å‡½æ•°æ—¶åœæ­¢æ‰§è¡Œã€‚ å¦å¤–ï¼Œç¼–è¯‘å™¨ä¸èƒ½åƒé»˜è®¤æ„é€ å‡½æ•°é‚£æ ·è‡ªåŠ¨åˆæˆçº¯è™šææ„å‡½æ•°ã€‚ å› ä¸ºç¼–è¯‘å™¨å¯¹å¯æ‰§è¡Œæ–‡ä»¶é‡‡å–â€œåˆ†ç¦»ç¼–è¯‘æ¨¡å‹â€ã€‚ç¼–è¯‘å™¨æ˜¯çœ‹ä¸åˆ°é‚£äº›å¿…è¦çš„ä¿¡æ¯çš„ã€‚ è¿™é‡Œçš„ç»“è®ºç§‰æ‰¿ä¸Šæ–‡ï¼šä¸è¦æŠŠè™šææ„å£°æ˜æˆçº¯è™šå‡½æ•°ã€‚ è™šæ‹Ÿå‡†åˆ™ï¼ˆvirtual specificationï¼‰ æ‰€è°“â€œè™šæ„å‡†åˆ™â€ï¼šä¸è¦æŠŠæ‰€æœ‰æˆå‘˜å‡½æ•°éƒ½ä¸€åˆ€åˆ‡çš„å£°æ˜ä¸ºè™šå‡½æ•°ï¼Œå¹¶å¦„æƒ³ç¼–è¯‘å™¨çš„ä¼˜åŒ–æ“ä½œèƒ½å»é™¤éå¿…è¦çš„virtual-invocationã€‚ åƒä¸Šä¾‹ä¸­åªæ˜¯è¿”å›æˆå‘˜å˜é‡çš„ Abstract_base::mumbleï¼š å› ä¸ºå‡½æ•°å®šä¹‰å†…å®¹å’Œç»§æ‰¿ç±»å‹æ— å…³ï¼Œå®Œå…¨æ²¡å¿…è¦ virtual ã€‚ å®ƒçš„non-virtualå‡½æ•°å®ä¾‹æ˜¯ä¸ªinlineå‡½æ•°ï¼Œå¸¸å¸¸è°ƒç”¨ä¼šæ‹‰ä½æ•ˆç‡ã€‚ ç†è®ºä¸Šï¼Œç¼–è¯‘å™¨å¦‚æœå‘ç°æ•´ä¸ªç»§æ‰¿ä½“ç³»ä¸­åªæœ‰è¿™ä¸€ä¸ªvirtualå‡½æ•°ï¼Œæ˜¯å¦èƒ½å°†å…¶è°ƒç”¨æ“ä½œè½¬æ¢ä¸ºé™æ€è°ƒç”¨ï¼Œå¹¶å…è®¸å…¶è°ƒç”¨æ“ä½œçš„ inline expansion å‘¢ï¼Ÿ è¿™ä¹ˆåšä»¥åï¼Œæ–°çš„ class åŠ å…¥åˆåŒ…å«äº†è¿™ä¸ªå•ä¸€virtualå‡½æ•°çš„è™šæ„å‡½æ•°ï¼Œå°±ä¼šç ´åè¿™ä¸ªä¼˜åŒ–ï¼šå‡½æ•°ä¼šè¢«é‡æ–°ç¼–è¯‘ï¼Œäº§ç”Ÿç¬¬äºŒä¸ª virtual å‡½æ•°å®ä¾‹æ¥é…åˆå¤šæ€ã€‚ (å®ä¾‹èƒ½å¤Ÿä»¥äºŒè¿›åˆ¶å½¢å¼å­˜æ”¾åœ¨ library ä¸­) å•Šï¼Œåˆ«æŠŠè¿™äº›éº»çƒ¦äº‹æ¨ç»™ç¼–è¯‘å™¨äº†ï¼Œè®°ä½è¿™å¥è¯ï¼š ä¸è¦ä¸ºäº†å›¾çœäº‹æŠŠæ‰€æœ‰å‡½æ•°å£°æ˜ä¸º virtual ã€‚ è™šæ‹Ÿå‡†åˆ™ä¸­ å¯¹ const çš„æ€åº¦ æ³¨æ„ï¼šè¯­å¢ƒä¸ºè™šæ‹Ÿç»§æ‰¿ä½“ç³»ä¸­ æ€åº¦ï¼šåˆ«ç”¨const å†³å®šè™šå‡½æ•°æ˜¯å¦ç”¨const ä½¿ç”¨constï¼šé¢„æœŸå­ç±»å¯¹è±¡ä¸­çš„ subclass object ä¼šè¢«ä½¿ç”¨æ— æ•°æ¬¡ã€‚ ä¸é€‚ç”¨constï¼šè¯¥å‡½æ•°å°†ä¸èƒ½è·å¾—ä¸€ä¸ª const å¼•ç”¨å’ŒæŒ‡é’ˆã€‚ çœŸæ­£çš„éš¾é¢˜ï¼šå£°æ˜ä¸ºconstï¼Œä½†å‘ç°å­ç±»å¯¹è±¡åˆè¦ä¿®æ”¹ç›¸å…³æˆå‘˜å˜é‡ã€‚ åˆ«ç”¨constã€‚ é‡æ–°è€ƒè™‘ class çš„å£°æ˜ ä¸Šä¾‹çš„æœ€ç»ˆç‰ˆæœ¬å¦‚ä¸‹ï¼š class Abstract_basepublic:\tvirtual ~Abstract_base(); //ä¸å†æ˜¯pure\tvirtual void interface() const = 0; //ä¸å†æ˜¯const const char* mumble() const return _mumble; //ä¸å†æ˜¯virtualprotected:\tAbstract_base(char* pc = 0); //æ–°å¢ä¸€ä¸ªå¸¦å”¯ä¸€å‚æ•°çš„constructor\tchar* _mumble;; 5.1 â€œæ— ç»§æ‰¿â€æƒ…å†µä¸‹çš„å¯¹è±¡æ„é€ ä¸‹é¢å±•ç¤ºäº§ç”Ÿä¸åŒå¯¹è±¡çš„æ–¹å¼ Point global; //global å†…å­˜é…ç½®Point foobar()\tPoint local; //localå†…å­˜é…ç½®\tPoint *heap = new point; //heapå†…å­˜é…ç½®\t*heap = local; //æŠŠä¸€ä¸ªç±»å¯¹è±¡æŒ‡å®šç»™å¦ä¸€ä¸ªï¼ˆæ‹·è´èµ‹å€¼ï¼‰ //...stuff... delete heap; //æ˜¾å¼ delete åˆ é™¤ heap object\treturn local; æ³¨æ„:è¿™é‡Œå‡ºç°çš„ Point æ•°æ®ç±»å‹å°šæœªå®šä¹‰ï¼Œå› ä¸ºæ¥ä¸‹æ¥ä¼šæ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œåˆ†æã€‚ æƒ…å†µ1ï¼šè´¨æœ´çš„C structtypedef struct\tfloat x, y, z;Point; æ™®åŠä¸€ä¸ªæ¦‚å¿µï¼šPOD â€”â€” Plain OIâ€™ Data ï¼Œå¯ä»¥ç†è§£ä¸ºä¸Cå…¼å®¹çš„ c++ æ•°æ®ç±»å‹ã€‚ è¿™é‡Œçš„ Point ä¾¿æ˜¯ POD ã€‚ ç”¨C++ç¼–è¯‘å™¨ç¼–è¯‘è¿™ä¸ªPODæ—¶ï¼š è§‚å¿µä¸ŠPointçš„trival constructorå’Œdestructoréƒ½ä¼šè¢«äº§ç”Ÿå‡ºæ¥å¹¶è¢«è°ƒç”¨ï¼Œconstructoråœ¨ç¨‹åºèµ·å§‹å¤„è¢«è°ƒç”¨è€Œdestructoråœ¨ç¨‹åºçš„exit()å¤„è¢«è°ƒç”¨ï¼ˆexit()æ˜¯ç”±ç³»ç»Ÿäº§ç”Ÿçš„ï¼Œæ”¾åœ¨main()ç»“æŸä¹‹å‰ï¼‰ã€‚**ç„¶è€Œï¼Œäº‹å®ä¸Šé‚£äº›trival membersè¦ä¸æ˜¯æ²¡è¢«å®šä¹‰ï¼Œå°±æ˜¯æ²¡è¢«è°ƒç”¨ã€‚**è¡¨ç°å’ŒCç¼–è¯‘å™¨æ²¡ä»€ä¹ˆåŒºåˆ«ã€‚ localå˜é‡ ä½œä¸ºPODæ²¡æœ‰è¢«æ„é€ ä¹Ÿæ²¡æœ‰å¿…è¦ææ„ï¼Œä½†è¿™é‡Œæ²¡æœ‰åˆå§‹åŒ– heap object Point *heap = new Point;//ä¼šè¢«è½¬æ¢ä¸ºPoint *head = __new(sizeof(Point)); //ç©ºé—´è€Œå·² æ²¡æœ‰é»˜è®¤æ„é€ å‡½æ•°è°ƒç”¨åœ¨ new å‡ºæ¥çš„ Point å¯¹è±¡ä¸Šã€‚ æ‹·è´èµ‹å€¼ local å¦‚æœè¢«åˆå§‹åŒ–äº†å°±å½“ç„¶æ²¡é—®é¢˜ï¼Œä½†æ²¡åˆå§‹åŒ–çš„è¯é—®é¢˜ä¹Ÿä¸å¤§ï¼šlocal å¯¹è±¡æ˜¯ä¸ªPODï¼Œæ‰€ä»¥èµ‹å€¼æ“ä½œåªæ˜¯ç®€å•çš„Cé£æ ¼çš„äºŒè¿›åˆ¶ç ä½æ¬ç§»ã€‚ delete æ“ä½œ delete heap;//è½¬æ¢ä¸º__delete(heap); è¿™ä¸ªæ“ä½œç†åº”è§¦å‘ç¼–è¯‘å™¨äº§ç”Ÿçš„ trival destructorï¼Œä½†ææ„å‡½æ•°è¦ä¹ˆæ²¡è¢«äº§ç”Ÿè¦ä¹ˆæ²¡è¢«è°ƒç”¨ã€‚ å‡½æ•°æœ€åé€šè¿‡ä¼ å€¼æ–¹å¼æŠŠlocalä¼ å›ï¼Œè¿™ä¹Ÿç†åº”è§¦å‘ trival constructorï¼Œä½†è¿™é‡Œ return ä»…ä»…æ˜¯ä¸ªä½æ‹·è´æ“ä½œï¼Œå› ä¸ºå¯¹è±¡æ˜¯ä¸ªPODã€‚ æ³¨æ„ä¾‹å¤–ï¼šglobal å˜é‡ â€”â€” åœ¨Cä¸­è¢«è§†ä¸ºä¸´æ—¶å®šä¹‰ï¼šå› ä¸ºå®ƒæ²¡æœ‰æ˜¾å¼åˆå§‹åŒ–æ“ä½œï¼Œæ‰€ä»¥å¯åœ¨ç¨‹åºä¸­å®šä¹‰å¤šæ¬¡ã€‚ å®šä¹‰å¤šæ¬¡çš„å®ä¾‹ä¼šè¢«é“¾æ¥å™¨æŠ˜å èµ·æ¥ï¼Œåªç•™ä¸‹å•ç‹¬ä¸€ä¸ªå®ä¾‹ï¼Œå­˜å‚¨åœ¨ç¨‹åº data segment ä¸­ä¸€ä¸ªç©ºé—´ä¸­ã€‚ è¿™ä¸ªç©ºé—´â€œç‰¹åˆ«ä¿ç•™ç»™æœªåˆå§‹åŒ–çš„å…¨å±€å¯¹è±¡ä½¿ç”¨â€ï¼Œç§°ä½œBBSï¼ˆBlock Started by Symbolï¼‰ã€‚ åœ¨C++ä¸­è¢«è§†ä¸ºå®Œå…¨å®šä¹‰ï¼ˆå®ƒä¼šé˜»æ­¢ç¬¬äºŒä¸ªæˆ–æ›´å¤šä¸ªå®šä¹‰ï¼‰ã€‚C++æ ¹æœ¬ä¸æ”¯æŒä¸´æ—¶å®šä¹‰ï¼Œå› ä¸ºclassæ„é€ è¡Œä¸ºçš„åº”ç”¨ã€‚ Cå’ŒC++çš„ä¸€ä¸ªå·®å¼‚å°±åœ¨äºï¼šC++çš„æ‰€æœ‰å…¨å±€å¯¹è±¡éƒ½è¢«ä»¥â€œåˆå§‹åŒ–è¿‡çš„æ•°æ®â€æ¥å¯¹å¾…ã€‚ BBSå¯¹c++æ¥è¯´æ²¡é‚£ä¹ˆé‡è¦ã€‚ å³ä½¿C++æœ‰èƒ½åŠ›åˆ¤æ–­è¿™ä¸ªç±»æ˜¯ class object è¿˜æ˜¯ PODã€‚ æƒ…å†µ2ï¼šæŠ½è±¡æ•°æ®ç±»å‹class Point pubblic:\tPoint(float x = 0.0, float y = 0.0, float z = 0.0) : _x(x), _y(y), _z(z) private:\tfloat _x, _y, _z;; æƒ…å†µ3ï¼šä¸ºç»§æ‰¿åšå‡†å¤‡class Point public:\tPoint(float x = 0.0, float y = 0.0) : _x(x), _y(y)\tvirtual float z();protected:\tfloat _x, _y;; 5.2 ç»§æ‰¿ä½“ç³»ä¸‹çš„å¯¹è±¡æ„é€ å½“æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªobjectï¼Œå¦‚ï¼š T object é™¤äº†ä¼šè°ƒç”¨å…¶æ„é€ å‡½æ•°å¤–ï¼Œè¿˜å¯èƒ½ä¼´éšå¤§é‡çš„éšè—ç ï¼šè¿™äº›éšè—ä»£ç ç”±ç¼–è¯‘å™¨æ‰©å……ã€‚æ‰©å……ç¨‹åº¦è¦çœ‹ class Tçš„ç»§æ‰¿ä½“ç³»ã€‚ æ‰©å……æ“ä½œå¦‚ä¸‹ï¼š åˆå§‹åŒ–åˆ—è¡¨ï¼šåœ¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­çš„æˆå‘˜å˜é‡åˆå§‹åŒ–æ“ä½œä¼šè¢«æ”¾è¿›æ„é€ å‡½æ•°æœ¬ä½“ï¼Œå¹¶ä»¥æˆå‘˜çš„å£°æ˜é¡ºåºä¸ºé¡ºåºã€‚ æˆ‘ä¸ªäººå¯¹â€œä»¥æˆå‘˜çš„å£°æ˜é¡ºåºä¸ºé¡ºåºâ€œ å­˜ç–‘ æˆå‘˜æ„é€ å‡½æ•°ï¼šæˆå‘˜å¦‚æœæ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œè€Œå®ƒæœ¬èº«æœ‰ä¸ªé»˜è®¤æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªé»˜è®¤æ„é€ å‡½æ•°ä¼šè¢«å¼ºåˆ¶è°ƒç”¨ã€‚ è™šè¡¨æŒ‡é’ˆï¼ˆvptr):å¦‚æœç±»å¯¹è±¡é‡Œæœ‰è™šè¡¨æŒ‡é’ˆï¼Œç¼–è¯‘å™¨ä¼šä¸ºå…¶è®¾å®šåˆå€¼æ¥æŒ‡å‘é€‚å½“çš„è™šè¡¨ã€‚ åŸºç±»æ„é€ å‡½æ•°ï¼šçˆ¶è¾ˆçš„åŸºç±»æ„é€ å‡½æ•°ä¼šæŒ‰å£°æ˜é¡ºåº(å’Œæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨æ— å…³)è¢«è°ƒç”¨ã€‚ å¦‚æœåŸºç±»åœ¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œå°±åº”æŠŠéœ€è¦æ˜¾å¼æŒ‡å®šçš„å‚æ•°éƒ½ä¼ é€’è¿‡å» åŸºç±»æ²¡æœ‰åœ¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œä½†å®ƒæœ‰é»˜è®¤æ„é€ å‡½æ•°(é»˜è®¤ memberwise æ‹·è´æ„é€ ä¹Ÿè¡Œ)ï¼Œå°±è°ƒç”¨ã€‚ å¦‚æœåŸºç±»æ˜¯å¤šé‡ç»§æ‰¿ä¸‹ï¼Œç¬¬äºŒæˆ–åç»§çš„åŸºç±»ï¼Œthis æŒ‡é’ˆå°±è¦æœ‰æ‰€è°ƒæ•´ã€‚ è°ƒç”¨æ‰€æœ‰è™šåŸºç±»æ„é€ å‡½æ•°ï¼ˆä»å·¦åˆ°å³ï¼Œä»æ·±åˆ°æµ…ï¼‰ï¼š å¦‚æœç±»åœ¨æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼Œå°±æŠŠéœ€è¦æ˜¾å¼æŒ‡å®šçš„å‚æ•°éƒ½ä¼ é€’è¿‡å»ï¼Œæ²¡æœ‰å°±è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•°ã€‚ ç±»ä¸­çš„è™šåŸºç±»å­å¯¹è±¡çš„åç§»é‡ï¼Œè¦èƒ½åœ¨æ‰§è¡ŒæœŸå­˜å–ã€‚ å¦‚æœç±»å¤„äºç»§æ‰¿ä½“ç³»ä¸­æœ€åº•å±‚ï¼Œå…¶æ„é€ å‡½æ•°ä¼šå¯èƒ½è¢«è°ƒç”¨ï¼Œæ‰€ä»¥å…¶è°ƒç”¨æœºåˆ¶ä¹Ÿè¦ç”±ç¼–è¯‘å™¨æ”¾è¿›æ¥ã€‚ ä¸‹é¢ç»“åˆå®é™…ä¾‹å­ï¼Œæ¥çœ‹çœ‹è¿™äº›æ‰©å……æœºåˆ¶çš„å¿…è¦æ€§ã€‚ ä»¥Pointä¸ºä¾‹ï¼ˆå¢åŠ äº†æ‹·è´å‡½æ•°å’Œè™šææ„ï¼‰: class Point Point(float x = 0.0, float y = 0.0);\tPoint(const Point);\tPoint operator=(const Point);\tvirtual ~Point();\tvirtual float z() return 0.0; protected:\tfloat _x, _y;;class Line Point _begin, _end; //å®ƒç”±ä¸¤ä¸ªç‚¹æ„æˆ~public:\tLine(float = 0.0, float = 0.0, float = 0.0, float = 0.0);\tLine(const Point, const Point);\tvoid draw();ï¼› å…ˆçœ‹çœ‹ line class çš„æ‰©å……ç»“æœï¼š æ¯ä¸€ä¸ªæ˜¾å¼æ„é€ å‡½æ•°éƒ½ä¼šæ‰©å……å’Œè°ƒç”¨å…¶ä¸¤ä¸ªæˆå‘˜ç±»å¯¹è±¡(Point)çš„æ„é€ å‡½æ•°ã€‚ Line::Line(const Point begin, const Point end)\t:_end(end), _begin(begin) ä¼šè¢«ç¼–è¯‘å™¨æ‰©å……ä¸º Line* Line::Line(Line *this, const Point bebgin, const Point end)\tthis-_begin.Point::Point(begin);\tthis-_end.Point::Point(end);\treturn this; äºPointå£°æ˜äº†ä¸€ä¸ªcopy constructorã€ä¸€ä¸ªcopy operatorï¼Œä»¥åŠä¸€ä¸ªdestructorï¼Œæ‰€ä»¥Line classçš„implicit copy constructorã€copy operatorå’Œdestructoréƒ½å°†æ˜¯æœ‰å…·ä½“æ•ˆç”¨çš„ï¼Œå³non-trivialã€‚ (trivialæ˜¯æ²¡æ„ä¹‰çš„æ‚é¡¹) å†çœ‹ä¸€ä¸ªä¾‹å­ï¼š Line a; implicit Line copy destructorä¼šè¢«åˆæˆå‡ºæ¥ï¼ŒåŒæ—¶ä¼šè°ƒç”¨å…¶æˆå‘˜ç±»å¯¹è±¡çš„ææ„å‡½æ•°(ä»¥æ„é€ çš„ç›¸åé¡ºåº)ã€‚ // C++ä¼ªä»£ç :åˆæˆå‡ºæ¥çš„Line destructorinline void Line::~Line(Line *this) this-_end.Point::~Point(); //è™½ç„¶Point::~Point()æ˜¯virtual\tthis-_begin.Point::~Point();//å…¶è°ƒç”¨æ“ä½œä»ç„¶ä¼šé™æ€å†³è®®ï¼Œåœ¨containing class destructorä¸­//å¦‚æœPointçš„ææ„æ˜¯inlineå‡½æ•°ï¼Œåˆ™ä¼šåœ¨è°ƒç”¨åœ°ç‚¹æ‰©å±•ã€‚ åŒç† line b = a;//mplicit line copy constructorä¼šè¢«åˆæˆå‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªinline public memberã€‚a = b;//mplicit copy assignment operatorä¼šè¢«åˆæˆå‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªinline public memberã€‚ æœ€åï¼Œå¤šæ•°ç¼–è¯‘å™¨ä¼šç¼ºå°‘å¯¹è‡ªæˆ‘æŒ‡æ´¾æƒ…å†µçš„å¤„ç†ã€‚ if(this == rhs) return *this; //like this ç„¶è€Œå¾ˆå¤šæ—¶å€™éƒ½è¦è€ƒè™‘è¿™ç§æƒ…å†µï¼Œåƒæ‹·è´æ“ä½œæ—¶å¿˜è®°ï¼š // ä½¿ç”¨è€…ä¾›åº”çš„copy assignment operator// å¿˜è®°æä¾›ä¸€ä¸ªè‡ªæˆ‘æ‹·è´æ—¶çš„ç­›é€‰String String::operator=(const String rhs) // è¿™é‡Œéœ€è¦ç­›é€‰(åœ¨é‡Šæ”¾èµ„æºä¹‹å‰) //if(this == rhs) return *this;\tdelete []str;\tstr = new char[strlen(rhs.str) + 1]; è™šæ‹Ÿç»§æ‰¿è™šæ‹Ÿç»§æ‰¿ï¼Œå•Šï¼Œè¿˜æ˜¯ç»§æ‰¿æˆ‘ä»¬çš„Point class å§ã€‚ class Point3d : public virtual Point public:\tPoint3d(float x = 0.0, float y = 0.0, float z = 0.0) : Point(x, y), _z(z) Point3d(const Point3d rhs) : Point(rhs), _z(rhs._z) ~Point3d();\tPoint3d operator=(const Point3d );\tvirtual float z() return _z; protected:\tfloat _z;; ä¼ ç»Ÿçš„â€constructoræ‰©å……ç°è±¡â€å¹¶æ²¡æœ‰ç”¨,è¿™æ˜¯å› ä¸º virtual base class çš„â€å…±äº«æ€§â€çš„ç¼˜æ•…: // C++ä¼ªä»£ç :ä¸åˆæ³•çš„constructoræ‰©å……å†…å®¹Point3d *Point3d::Point3d(Point3d *this, float x, float y, float z) this-Point::Point(x, y);\tthis-__vptr_Point3d = __vtbl_Point3d;\tthis-__vptr_Point3d__Point = __vtbl_Point3d_Point;\tthis-_z = rhs._z;\treturn this; Point3d constructor æ‰©å……å†…å®¹æœ‰é”™è¯¯ï¼Œè¿™é‡Œå–ä¸ªå…³å­ã€‚ ç°åœ¨å¯¹ä¸åŒç»§æ‰¿å±‚æ¬¡å¯¹è±¡çš„åˆå§‹åŒ–ç­–ç•¥ //çœ‹çœ‹è¿™ä¸‰ç§æ´¾ç”Ÿæƒ…å†µclass Vertex : virtual public Point ... ;//Vertexçš„constructorå¿…é¡»ä¹Ÿè°ƒç”¨Pointçš„constructorã€‚class Vertex3d : public Point3d, public Vertex ... ; //holly shit double inherit//å½“Point3då’ŒVertexåŒä¸ºVertex3dçš„subobjectsæ—¶,å®ƒä»¬å¯¹Point constructorçš„è°ƒç”¨æ“ä½œä¸€å®šä¸å¯ä»¥å‘ç”Ÿ,å–è€Œä»£ä¹‹çš„æ˜¯,ä½œä¸ºä¸€ä¸ªæœ€åº•å±‚çš„class,Vertex3dæœ‰è´£ä»»å°†Pointåˆå§‹åŒ–ã€‚class PVertex : public Vertex3d ... ;//æ›´å¾€ä¸‹çš„ç»§æ‰¿,åˆ™ç”±PVertex(ä¸å†æ˜¯Vertex3d)æ¥è´Ÿè´£å®Œæˆè¢«å…±äº«çš„Point subobjectçš„æ„é€ ã€‚ ä¼ ç»Ÿçš„åˆå§‹åŒ–ç­–ç•¥ ä¼ ç»Ÿçš„åˆå§‹åŒ–ç­–ç•¥å¦‚æœè¦æ”¯æŒåˆå§‹åŒ–è™šåŸºç±»,ä¼šå¯¼è‡´constructorä¸­æœ‰æ›´å¤šçš„æ‰©å……å†…å®¹,ç”¨ä»¥æŒ‡ç¤º virtual base class constructorsåº”ä¸åº”è¯¥è¢«è°ƒç”¨ã€‚ constructorçš„å‡½æ•°æœ¬èº«å› è€Œå¿…é¡»å°è¯•æµ‹è¯•ä¼ è¿›æ¥çš„å‚æ•°,ç„¶åå†³å®šè°ƒç”¨æˆ–ä¸è°ƒç”¨ç›¸å…³çš„ virtual base class constructorsã€‚ ä¸‹é¢æ˜¯Point3dçš„æ‰©å……å†…å®¹ï¼ˆä¼ªç ï¼‰ // C++ä¼ªä»£ç :åœ¨virtual base classæƒ…å†µä¸‹çš„constructoræ‰©å……å†…å®¹Point3d *Point3d::Point3d(Point3d *this, bool __most_derived, float x, float y, float z) if (__most_derived != false) this-Point::Point(x, y);\tthis-__vptr_Point3d = __vtbl_Point3d;\tthis-__vptr_Point3d_Point = __vtbl_Point3d__Point;\tthis-_z = rhs._z;\treturn this; åœ¨æ›´æ·±å±‚çš„ç»§æ‰¿æƒ…å†µä¸‹,ä¾‹å¦‚Vertex3d, å½“è°ƒç”¨Point3då’ŒVertexçš„constructoræ—¶,æ€»æ˜¯ä¼šæŠŠ__most_derivedå‚æ•°è®¾ä¸º false,äºæ˜¯å°±å‹åˆ¶äº†ä¸¤ä¸ªconstructorsä¸­å¯¹Point constructorçš„è°ƒç”¨æ“ä½œã€‚ // C++ä¼ªä»£ç :åœ¨virtual base classæƒ…å†µä¸‹çš„constructoræ‰©å……å†…å®¹Vertex3d *Vertex3d::Vertex3d(Vertex3d *this, bool __most_derived, float x, float y, float z) if (__most_derived != false) this-Point::Point(x, y);\t// è°ƒç”¨ä¸Šä¸€å±‚base classes\t// è®¾å®š__most_derivedä¸ºfalse\tthis-Point3d:::Point3d(false, x, y, z);\tthis-Vertex::Vertex(false, x, y);\t// è®¾å®švptrs\t// æ’å…¥user mode\treturn this; è¿™æ ·çš„ç­–ç•¥å¾—ä»¥ä¿æŒè¯­æ„çš„æ­£ç¡®æ— è¯¯.ä¾‹å¦‚, å½“å®šä¹‰: Point3d origin æ—¶ï¼Œ Point3d constructorå¯ä»¥æ­£ç¡®åœ°è°ƒç”¨å…¶Point virtual base class subobject å½“å®šä¹‰ï¼šVertex3d cvæ—¶ï¼Œ Vertex3d constructoræ­£ç¡®åœ°è°ƒç”¨Point constructor.Point3då’ŒVertexçš„constructorä¼šåšæ¯ä¸€ä»¶è¯¥åšçš„äº‹æƒ…â€”â€”å¯¹Pointçš„è°ƒç”¨æ“ä½œé™¤å¤–ã€‚ ç»“è®ºï¼šåªæœ‰å½“ä¸€ä¸ªå®Œæ•´çš„ç±»å¯¹è±¡è¢«å®šä¹‰å‡ºæ¥ï¼ˆorigin)ï¼Œè™šåŸºç±»æ„é€ å‡½æ•°æ‰ä¼šè¢«è°ƒç”¨ã€‚ å¦‚æœobject åªæ˜¯ä¸ªå­å¯¹è±¡ï¼Œå°±ä¸ä¼šè°ƒç”¨ã€‚ æŸäº›æ–°çš„ç¼–è¯‘å™¨ï¼Œä¸ºäº†äº§ç”Ÿæ›´æœ‰æ•ˆç‡çš„æ„é€ å‡½æ•°ï¼Œå°†æ¯ä¸ªæ„é€ å‡½æ•°ä¸€åˆ†ä¸ºäºŒï¼š ä¸€ä¸ªé’ˆå¯¹å®Œæ•´çš„objectï¼šâ€œå®Œæ•´objectâ€ç‰ˆæ— æ¡ä»¶åœ°è°ƒç”¨virtual base constructorï¼Œè®¾å®šæ‰€æœ‰çš„vptrsç­‰ã€‚ **ä¸€ä¸ªé’ˆå¯¹ subobject **ï¼šâ€œsubobjectâ€ç‰ˆåˆ™ä¸è°ƒç”¨virtual base constructorsï¼Œä¹Ÿå¯èƒ½ä¸è®¾å®švptrsç­‰ã€‚ vptråˆå§‹åŒ–è¯­æ„å­¦ ç»§æ‰¿ä½“ç³»ä¸‹ï¼Œæ„é€ å‡½æ•°çš„è°ƒç”¨é¡ºåº ä»¥ PVertex å¯¹è±¡ä¸ºä¾‹ï¼Œå®ƒçš„æ„é€ å‡½æ•°è°ƒç”¨é¡ºåºï¼š Point();Point3d();Vertex();Vertex3d();PVertex(); å‡è®¾æ¯ä¸ªclasséƒ½å®šä¹‰äº†ä¸€ä¸ªvirtual function size();è¿”å›è¯¥classçš„å¤§å°ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹å®šä¹‰çš„PVertex constructorï¼š PVertex::Pvertex(float x, float y, float z) : _next(0), Vertex3d(x, y, z), Point(x, y) if(spyOn)//æ¯ä¸ªæ„é€ å‡½æ•°å†…å«ä¸€ä¸ªè°ƒç”¨æ“ä½œ cerr Within Pvertex::PVertex() size: size() endl; åœ¨ä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°æˆ–ææ„å‡½æ•°ä¸­ï¼Œé€šè¿‡æ„é€ å¯¹è±¡æ¥è°ƒç”¨ä¸€ä¸ªè™šå‡½æ•°ï¼Œå…¶å‡½æ•°å®ä¾‹åº”è¯¥æ˜¯åœ¨æ­¤ç±»ä¸­çœŸæ­£æœ‰ä½œç”¨çš„é‚£ä¸ªã€‚ï¼ˆæœ¬ä¾‹ä¸­â€œè¯¥ç±»â€ä¸ºPoint3dï¼‰ åœ¨Point3d æ„é€ å‡½æ•°ä¸­è°ƒç”¨çš„ size() å‡½æ•°ï¼Œå¿…é¡»è¢«å†³è®®ä¸º Point3d::size() è€ŒéPVertex::size()ã€‚ åŸºç±»æ„é€ å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå­ç±»è¿˜æ²¡æœ‰æ„é€ èµ·æ¥ï¼š Pvertexæ„é€ å‡½æ•°æ²¡å®Œæˆå‰ï¼ŒPvertexè¿˜ä¸æ˜¯å®Œæ•´å¯¹è±¡ï¼› Point3dæ„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œç´§ç´§æ„å‘³ç€Point3dçš„å­å¯¹è±¡æ„é€ å®Œæ¯•äº† æ„é€ å‡½æ•°é¡ºåºï¼šç”±çˆ¶åˆ°å­ï¼Œç”±å†…è€Œå¤–ã€‚ å¦‚ä½•ä¿è¯é€‚å½“çš„é‡åå‡½æ•°è¢«è°ƒç”¨ ä¸Šé¢çš„å®ç°å¾ˆå¦¥å¸–ï¼Œå› ä¸ºæ¯ä¸ªPvertex åŸºç±»æ„é€ å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œç¼–è¯‘å™¨ä¿è¯äº†é€‚å½“çš„sizeå‡½æ•°è¢«è°ƒç”¨ã€‚ å¦‚ä½•å®ç°å‘¢ï¼Ÿ é™æ€å†³è®®æ¯ä¸ªè°ƒç”¨æ“ä½œ æ—¢ç„¶é™æ€å†³è®®äº†ï¼Œå°±ä¸è¦ç”¨è™šæ‹Ÿæœºåˆ¶ã€‚ åœ¨Point3d çš„æ„é€ å‡½æ•°é‡Œï¼Œå°±è°ƒç”¨Point3d çš„size()ã€‚ å¦‚æœsize()é‡Œåˆè°ƒç”¨è™šå‡½æ•°ï¼Œè¿™ä¸ªè°ƒç”¨å¿…é¡»å†³è®®ä¸ºPoint3dçš„å‡½æ•°å®ä¾‹ã€‚ å…¶ä»–æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè°ƒç”¨ä¼šè§†ä½œvirtualï¼Œè¦é€šè¿‡æ­£å¸¸è™šæ‹Ÿæœºåˆ¶å†³å®šæ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´è™šæ‹Ÿæœºåˆ¶æœ¬èº«è¦çŸ¥é“è¿™ä¸ªè°ƒç”¨æºæ¥ä¸æ¥è‡ªä¸€ä¸ªæ„é€ å‡½æ•°ä¸­ã€‚ åœ¨æ„é€ å‡½æ•°ææ„å‡½æ•°ä¸­è®¾ç«‹ä¸€ä¸ªæ ‡å¿— æ ‡å¿—çš„ä½œç”¨æ˜¯åˆ¤æ–­æ˜¯å¦è¦ä»¥é™æ€æ–¹å¼å†³è®®ã€‚ ä½†æ›´å¥½çš„è®¾è®¡æ˜¯æ‰§è¡Œæ„é€ å‡½æ•°åï¼Œè®©å¯èƒ½è¦è°ƒç”¨çš„è™šå‡½æ•°æ•°é‡å°‘äº›ã€‚ å†³å®šè™šå‡½æ•°æ•°é‡çš„å…³é”®æ˜¯è™šè¡¨ã€‚å†³å®šè™šè¡¨å¦‚ä½•å¤„ç†çš„å…³é”®æ˜¯vptrã€‚ vptr ï¼šå†³å®šè™šå‡½æ•°è°ƒç”¨çš„å…³é”® vptrçš„å†³å®šæ•ˆæœæ¥è‡ªåˆå§‹åŒ–å’Œè®¾å®šæ“ä½œã€‚è¿™äº›æ“ä½œæ˜¯ç¼–è¯‘å™¨çš„è´£ä»»ï¼Œç¨‹åºå‘˜ä¸ç”¨çæ“å¿ƒã€‚ ä½†è¿˜æ˜¯è¦çœ‹çœ‹ç¼–è¯‘å™¨æ€ä¹ˆåšåˆ°çš„: vptr ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–ï¼Ÿæ— éä¸‰ä¸ªæƒ…å†µï¼š1.åœ¨å…¶ä»–ä»»ä½•æ“ä½œå‰ 2.åœ¨åŸºç±»æ„é€ å‡½æ•°è°ƒç”¨åï¼Œä½†è¿˜æ²¡è¿›è¡Œæˆå‘˜åˆå§‹åŒ–ã€‚3.æ‰€æœ‰æ“ä½œå æƒ…å†µ2 æ›´å¥½ã€‚ ä»¤æ¯ä¸€ä¸ªbase class constructorè®¾å®šå…¶å¯¹è±¡çš„vptrï¼Œä½¿å®ƒæŒ‡å‘ç›¸å…³çš„virtual tableä¹‹åï¼Œæ„é€ ä¸­çš„å¯¹è±¡å°±å¯ä»¥ä¸¥æ ¼è€Œæ­£ç¡®åœ°å˜æˆâ€œæ„é€ è¿‡ç¨‹æ‰€å¹»åŒ–å‡ºæ¥çš„æ¯ä¸€ä¸ªclassâ€çš„å¯¹è±¡ã€‚ ä¸€ä¸ªPVertexå¯¹è±¡ä¼šå…ˆå½¢æˆä¸€ä¸ªPointå¯¹è±¡ã€ä¸€ä¸ªPoint3då¯¹è±¡ã€ä¸€ä¸ªVertexå¯¹è±¡ã€ä¸€ä¸ªVertex3då¯¹è±¡ï¼Œç„¶åæ‰æˆä¸ºä¸€ä¸ªPVeretexå¯¹è±¡ã€‚ åœ¨æ¯ä¸€ä¸ªbase class constructorsä¸­ï¼Œå¯¹è±¡å¯ä»¥ä¸constructorsâ€™s class çš„å®Œæ•´å¯¹è±¡ä½œæ¯”è¾ƒã€‚å¯¹äºå¯¹è±¡è€Œè¨€ï¼Œâ€œä¸ªä½“å‘ç”Ÿå­¦â€æ¦‚å†µäº†â€œç³»ç»Ÿå‘ç”Ÿå­¦â€ã€‚ æˆ‘çš„ç†è§£æ˜¯â€œä¸€ä¸ªæ¥ä¸€ä¸ªâ€è¿›åŒ–åˆ°äº†â€œæ•´ä½“â€ã€‚ constructorçš„æ‰§è¡Œæ­¥éª¤ï¼š åœ¨derived class constructorä¸­ï¼Œâ€œæ‰€æœ‰virtual base classesâ€åŠâ€œä¸Šä¸€å±‚base classâ€çš„constructorsä¼šè¢«è°ƒç”¨ ä¸Šè¿°å®Œæˆä¹‹åï¼Œå¯¹è±¡çš„vptrsè¢«åˆå§‹åŒ–ï¼ŒæŒ‡å‘ç›¸å…³çš„virtual tables å¦‚æœæœ‰member initialization listçš„è¯ï¼Œå°†åœ¨constructorä½“å†…æ‰©å±•å¼€æ¥ã€‚è¿™å¿…é¡»åœ¨vptrè¢«è®¾å®šä¹‹åæ‰åšï¼Œä»¥å…æœ‰ä¸€ä¸ªvirtual member functionè¢«è°ƒç”¨ã€‚ æœ€åï¼Œæ‰§è¡Œç¨‹åºå‘˜æ‰€æä¾›çš„ä»£ç  PVertex::PVertex(float x, float y, float z)_next(0), Vertex3d(x, y, z), Point(x, y)if(spyOn)cerr â€œWithin PVertex::PVertex()â€ size: size() endl;//å®ƒå¯èƒ½è¢«æ‰©å±•ä¸ºï¼šPVertex* PVertex::PVertex(PVertex *this, bool _most_derived,float x, float y, float z)//æ¡ä»¶å¼è°ƒç”¨virtual base constructorif(_most_derived != false)this-Point::Point(x, y);//æ— æ¡ä»¶åœ°è°ƒç”¨ä¸Šä¸€å±‚basethis-Vertex3d::Vertex3d(x, y, z);//å°†ç›¸å…³çš„vptråˆå§‹åŒ–this-_vptr_PVertex = _vtbl_PVertex;this-_vptr_Point_PVertex = _vtbl_Point_PVertex;//ç¨‹åºå‘˜ç¼©å†™ä»£ç if(spyOn) cerr Within PVertex::PVertex() Point3d::Point3d(), size: (*this-_vptr_PVertex[3].faddr)(this) endl;//ä¼ å›è¢«æ„é€ çš„å¯¹è±¡return this; vptr çš„åˆå§‹åŒ– ä¸‹é¢æ˜¯vptrå¿…é¡»è¢«è®¾å®šçš„ä¸¤ç§æƒ…å†µï¼š å½“ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡è¢«æ„é€ èµ·æ¥æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å£°æ˜ä¸€ä¸ªPointå¯¹è±¡ï¼ŒPoint constructorå¿…é¡»è®¾å®šå…¶vptrã€‚ å½“ä¸€ä¸ªsubobject constructorè°ƒç”¨äº†ä¸€ä¸ªvirtual function(ä¸ç®¡æ˜¯ç›´æ¥è°ƒç”¨è¿˜æ˜¯é—´æ¥è°ƒç”¨æ—¶)ã€‚ å¦‚æœæˆ‘ä»¬å£°æ˜ä¸€ä¸ªPVertexå¯¹è±¡ï¼Œç„¶åç”±äºæˆ‘ä»¬å¯¹å…¶base class constructorsçš„æœ€æ–°å®šä¹‰ï¼Œå…¶vptrå°†ä¸å†éœ€è¦åœ¨æ¯ä¸€ä¸ªbase class constructorsä¸­è¢«è®¾å®šã€‚ è§£å†³ä¹‹é“æ˜¯æŠŠconstructoråˆ†è£‚ä¸ºä¸€ä¸ªå®Œæ•´çš„objectå®ä½“å’Œä¸€ä¸ªsubobjectå®ä½“ã€‚åœ¨subobjectå®ä½“ä¸­ï¼Œvptrçš„è®¾å®šå¯ä»¥çœç•¥(å¦‚æœå¯ä»¥çš„è¯)ã€‚ è¿™æ ·èƒ½å›ç­”ä¸¤ä¸ªé—®é¢˜ï¼š 1.ç±»çš„æ„é€ å‡½æ•°çš„æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨è°ƒç”¨ç±»çš„è™šæ‹Ÿå‡½æ•°ï¼Œå®‰å…¨å—ï¼Ÿ ç¼–è¯‘å™¨ä½¿ vptr èƒ½ä¿è¯åœ¨æˆå‘˜åˆ—è¡¨åˆå§‹åŒ–å‰è®¾å®šå¥½ï¼ŒæŒºå®‰å…¨ï¼› å‡½æ•°æœ¬èº«å¯èƒ½ä¼šä¾èµ–æ²¡æœ‰è®¾å®šåˆå€¼çš„æˆå‘˜ï¼Œè¯­æ„ä¸Šä¸å¤ªå®‰å…¨ã€‚ 2.ä»€ä¹ˆæ—¶å€™ç»™åŸºç±»æ„é€ å‡½æ•°ä¸€ä¸ªå‚æ•°ï¼Ÿè¿™ç§æƒ…å†µï¼Œé—®é¢˜1æƒ…å†µè¿˜å®‰å…¨å—ï¼Ÿ ä¸å®‰å…¨ã€‚vptr è¿˜æ²¡è®¾å®šå¥½æˆ–è€…æŒ‡å‘é”™è¯¯çš„ç±»ã€‚è¯¥å‡½æ•°å­˜å–çš„ä»»ä½•ç±»æˆå‘˜æ•°æ®ä¸€å®šè¿˜æœªåˆå§‹åŒ–ã€‚ 5.3å¯¹è±¡å¤åˆ¶ å¯¹è±¡å¤åˆ¶ï¼Œå³ç ”ç©¶ copy assignment operator çš„è¯­æ„ï¼Œçœ‹çœ‹å®ƒä»¬æ€ä¹ˆè¢«å¡‘é€ å‡ºæ¥ã€‚ bitwise copy æ‰€è°“bitwise copy å’Œ memberwise copy å³æ·±æ‹·è´å’Œæµ…æ‹·è´ã€‚ æ·±æ‹·è´ï¼ˆmemberwise copyï¼‰å’Œæµ…æ‹·è´ï¼ˆbitwise copyï¼‰çš„åŒºåˆ«åœ¨äºï¼š æ·±æ‹·è´(å¯¹è±¡æ‹·è´)æ˜¯æŒ‡æºå¯¹è±¡ä¸æ‹·è´å¯¹è±¡äº’ç›¸ç‹¬ç«‹ï¼Œå…¶ä¸­ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„æ”¹åŠ¨éƒ½ä¸ä¼šå¯¹å¦å¤–ä¸€ä¸ªå¯¹è±¡é€ æˆå½±å“ã€‚ æµ…æ‹·è´ï¼ˆæŒ‰ä½æ‹·è´ï¼‰åœ¨æ‹·è´æŒ‡é’ˆã€å¼•ç”¨æ—¶ï¼ŒæŒ‰ä½æ‹·è´ä¼šå¯¼è‡´æ‹·è´çš„æŒ‡é’ˆå’ŒåŸæŒ‡é’ˆæŒ‡å‘äº†åŒä¸€åœ°å€ã€‚ åˆ©ç”¨Point class æ¥è®¨è®ºã€‚ class Point public: Point(float x= 0.0, float y = 0.0); // ... æ²¡æœ‰virtual functionprotected: float _x, _y;; å…³äºæ‹·è´èµ‹å€¼æ“ä½œï¼Œå…ˆçœ‹çœ‹é»˜è®¤ç”Ÿæˆçš„æ‹·è´è¡Œä¸ºæ˜¯å¦å¤Ÿç”¨ã€‚ å¦‚æœå¤Ÿç”¨ï¼Œé‚£ä¹ˆé»˜è®¤æ‹·è´æ“ä½œå°†æ›´æœ‰æ•ˆç‡ï¼Œä¸éœ€è¦å†ç”»è›‡æ·»è¶³ï¼Œé‡å†™ä¸ºæ–°çš„æ‹·è´æ“ä½œ é»˜è®¤è¡Œä¸ºä¸å¤Ÿç”¨ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´ä¸€äº›ä¸å®‰å…¨ã€ä¸æ­£ç¡®çš„æ“ä½œï¼Œéœ€è¦è‡ªå·±è®¾è®¡ä¸€ä¸ª copy assginment operator ã€‚æ‹¿ä¸Šé¢çš„Point classæ¥è¯´ï¼Œé»˜è®¤çš„ memberwise copyï¼Œç¼–è¯‘å™¨ä¸ä¼šäº§ç”Ÿç¤ºä¾‹ï¼ˆç±»ä¼¼æ‹·è´æ„é€ çš„æƒ…å†µï¼‰ï¼Œå› ä¸ºè¯¥ç±»å·²ç»æœ‰äº† bitwise copy è¯­æ„(è¿™ä¸ª class äººç•œæ— å®³ï¼Œæ²¡æœ‰æŒ‡é’ˆä¹Ÿæ²¡æœ‰å¤šæ€)ï¼Œæ‰€ä»¥éšå¼æ‹·è´èµ‹å€¼æ“ä½œæ²¡ä»€ä¹ˆæ„ä¹‰ã€‚ ä¸€ä¸ª class å¯¹äºé»˜è®¤çš„copy assignment operator,åœ¨ä¸‹é¢æƒ…å†µä¸ä¼šè¡¨ç°å‡ºbitwise copyè¯­æ„: å½“ class å†…å¸¦ä¸€ä¸ªmember object,è€Œå…¶ class æœ‰ä¸€ä¸ªcopy assignment operatoræ—¶. å½“ä¸€ä¸ª class çš„base class æœ‰ä¸€ä¸ªcopy assignment operatoræ—¶. å½“ä¸€ä¸ª class å£°æ˜äº†ä»»ä½• virtual functions (ä¸€å®šä¸å¯ä»¥æ‹·è´å³ç«¯ class objectçš„vptråœ°å€,ç”±äºå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªderived class object). å½“ class ç»§æ‰¿è‡ªä¸€ä¸ª virtual base class(ä¸è®ºæ­¤base class æœ‰æ²¡æœ‰copy operator)æ—¶ã€‚ C++ Standardä¸Šè¯´copy assignment operatorså¹¶ä¸è¡¨ç¤º bitwise copy semantics æ˜¯ nontrivial ã€‚ å®é™…ä¸Š,åªæœ‰å­˜åœ¨nontrivial instancesæ—¶æ‰ä¼šè¢«åˆæˆå‡ºæ¥ã€‚ Point a, b;a = b;//å…¶é—´å¹¶æ²¡æœ‰copy assignment operatorè¢«è°ƒç”¨. è¿›è¡ŒæŒ‰ä½æ‹·è´,æŠŠPoint bæ‹·è´ç»™Point aã€‚ æ³¨æ„: æˆ‘ä»¬è¿˜æ˜¯å¯èƒ½æä¾›ä¸€ä¸ªcopy constructor,æ¥é…åˆ name return value (NRV) çš„ä¼˜åŒ–ã€‚ copy constructorçš„å‡ºç°ä¸åº”è¯¥æš—ç¤ºå‡ºä¹Ÿä¸€å®šè¦æä¾›ä¸€ä¸ªcopy assignment operator ã€‚ ç»§æ‰¿ä¸‹çš„æ‹·è´æ„é€ è¡Œä¸º ç°åœ¨å¯¼å…¥ä¸€ä¸ªæ‹·è´èµ‹å€¼æ“ä½œï¼Œæ¥è¯´æ˜è¯¥æ“ä½œåœ¨ç»§æ‰¿ä¸‹çš„è¡Œä¸º inline Point Point::operator=(const Point p) _x = p._x; _y = p._y; return *this//è™šç»§æ‰¿class Point3d : virtual public Point public: Point3d(float x = 0.0, float y = 0.0, float z = 0.0);protected: float _z;; å¦‚æœæ²¡æœ‰å£°æ˜æ‹·è´èµ‹å€¼å‡½æ•°ï¼Œç¼–è¯‘å™¨å°±ä¼šåˆæˆç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼š // C++ä¼ªä»£ç :è¢«åˆæˆçš„copy assignment operatorinline Point3d Point3d::operator=(Point3d *const this, const Point3d p) //è°ƒç”¨base classçš„å‡½æ•°å®ä½“ this-Point::operator=(p); // memberwise copy the derived class members _z = p._z; return *this; è¿™æ—¶ï¼Œæ‹·è´èµ‹å€¼æ“ä½œæœ‰ä¸€ä¸ªä¸å¤ªç†æƒ³çš„æƒ…å†µï¼šç¼ºä¹æˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ã€‚ è¿™å¯¼è‡´ä¸‹é¢çš„æƒ…å†µå°†ä¸å­˜åœ¨ï¼š // C++ä¼ªä»£ç ,ä¸‹é¢æ€§è´¨å¹¶ä¸æ”¯æŒinline Point3d Point3d::operator=(const Point3d p3d) : Point(p3d), z(p3d._z)//å–è€Œä»£ä¹‹çš„æ˜¯Point::operator=(p3d);//æˆ–(*(Point *)this) = p3d; ç¼ºä¹åˆå§‹åŒ–åˆ—è¡¨ï¼Œåœ¨ç»§æ‰¿ä½“ç³»ä¸­è¯¥å¦‚ä½•é˜»æ­¢åŸºç±»çš„æ‹·è´æ“ä½œ ä¸ºä»€ä¹ˆè¦é˜»æ­¢å‘¢ï¼Ÿ a çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š // class Vertex : virtual public Pointinline Vertex Vertex::operator=(const Vertex v) this-Point::operator(v); _next = v._next; return *this;inline Vertex3d Vertex3d::operator=(const Vertex3d v) this-Point::operator=(v); this-Point3d::operator(v); this-Vertex::operator=(v); ä¼ ç»Ÿçš„ constructor è§£å†³æ–¹æ¡ˆï¼šé™„åŠ é¢å¤–å‚æ•° é™„åŠ é¢å¤–å‚æ•°æ²¡ç”¨ï¼Œå› ä¸ºï¼šå–æ‹·è´èµ‹å€¼å‡½æ•°åœ°å€æ˜¯åˆæ³•çš„ï¼Œä¸‹é¢çš„ä½¿ç”¨å°†æ¨ç¿»æ‹·è´èµ‹å€¼å‡½æ•°çš„è®¾è®¡ã€‚ typedef Point3d (Point3d::*pmfPoint3d) (const Point3d );pmfPoint3d pmf = Point3d::operator=;(x.*pmf)(x); ä»ç„¶éœ€è¦æ ¹æ®å…¶ç‹¬ç‰¹çš„ç»§æ‰¿ä½“ç³»,æ’å…¥ä»»ä½•å¯èƒ½æ•°ç›®çš„å‚æ•°ç»™copy assignment operator ä¸ºcopy assignment operator äº§ç”Ÿåˆ†åŒ–å‡½æ•°ï¼ˆsplit function) äº§ç”Ÿåï¼Œå¸Œæœ›å‡½æ•°èƒ½æ”¯æŒè¿™ä¸ªç±»æˆä¸ºä¸­é—´åŸºç±»æˆ–æœ€åº•å±‚å­ç±»ã€‚ æœ€å¥½è®©ç¼–è¯‘å™¨å€ŸåŠ©åˆ†åŒ–å‡½æ•°äº§ç”Ÿæ‹·è´èµ‹å€¼æ“ä½œã€‚class-defined user äº²è‡ªæ“åˆ€ï¼Œå¯èƒ½é¢ä¸´æŸäº›å‡½æ•°å¾ˆéš¾åˆ†åŒ–çš„å›°å¢ƒï¼š inline Vertex3d Vertex3d::operator=(const Vertex3d v) init_bases(v);//ç”šè‡³è®©å®ƒæˆä¸ºè™šå‡½æ•° copy assignment operatoråœ¨è™šæ‹Ÿç»§æ‰¿æƒ…å†µä¸‹å¾ˆå¤æ‚,éœ€è¦ç‰¹åˆ«å°å¿ƒåœ°è®¾è®¡å’Œè¯´æ˜. å¦‚æœä½¿ç”¨ä¸€ä¸ªä»¥è¯­è¨€ä¸ºåŸºç¡€çš„è§£å†³æ–¹æ³•,é‚£ä¹ˆåº”è¯¥ä¸ºcopy assignment operatoræä¾›ä¸€ä¸ªé™„åŠ çš„**â€member copy listâ€**ã€‚ ç®€å•åœ°è¯´,ä»»ä½•è§£å†³æ–¹æ¡ˆå¦‚æœæ˜¯ä»¥ç¨‹åºæ“ä½œä¸ºåŸºç¡€,å°†å¯¼è‡´è¾ƒé«˜çš„å¤æ‚åº¦å’Œè¾ƒå¤§çš„é”™è¯¯å€¾å‘. ä¸€èˆ¬å…¬è®¤,è¿™æ˜¯è¯­è¨€çš„ä¸€ä¸ªå¼±ç‚¹,ä¹Ÿæ˜¯åº”è¯¥å°å¿ƒæ£€éªŒç¨‹åºä»£ç çš„åœ°æ–¹(å½“ä½¿ç”¨ virtual base classesæ—¶). è¯­è¨€ä¸ºåŸºç¡€çš„æ–¹æ³•ï¼šåœ¨å­ç±»æ‹·è´å‡½æ•°ç¤ºä¾‹æœ€åè°ƒç”¨é‚£ä¸ª operator åœ¨derived class çš„copy assignment operatorå‡½æ•°å®ä½“çš„æœ€å,æ˜ç¡®åœ°è°ƒç”¨é‚£ä¸ªoperator inline Vertex3d Vertex3d::operator=(const Vertex3d v) this-Point3d::operator=(v); this-Vertex:;operator=(v); // must place this last if your compiler dose not suppress intermediate class invocations this-Point::operator=(v); è¿™å¹¶ä¸èƒ½çœç•¥subobjectsçš„å¤šé‡æ‹·è´,ä½†å´å¯ä»¥ä¿è¯è¯­æ„æ­£ç¡®.å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆè¦æ±‚æŠŠ virtual subobjectsæ‹·è´åˆ°ä¸€ä¸ªåˆ†ç¦»çš„å‡½æ•°ä¸­,å¹¶æ ¹æ®call pathæ¡ä»¶åŒ–è°ƒç”¨å®ƒã€‚ æœ€å¥½çš„åŠæ³•æ˜¯ å°½å¯èƒ½ä¸è¦å…è®¸ä¸€ä¸ª virtual base class çš„æ‹·è´æ“ä½œã€‚ ç”šè‡³æœ‰ä¸€ä¸ªå¥‡æ€ªçš„æ–¹æ³•æ˜¯: ä¸è¦åœ¨ä»»ä½• virtual base class ä¸­å£°æ˜æ•°æ® 5.4å¯¹è±¡çš„æ•ˆèƒ½ï¼ˆç•¥ï¼‰ç•¥ 5.5ææ„è¯­æ„å­¦ææ„å‡½æ•°ä¸æ˜¯æ‰€æœ‰æƒ…å†µéƒ½æ˜¯å¿…è¦çš„ å¦‚æœclassæ²¡æœ‰å®šä¹‰destructorï¼Œé‚£ä¹ˆåªæœ‰åœ¨classå†…å«çš„member object(æˆ–è€…æ˜¯classè‡ªå·±çš„base class)æ‹¥æœ‰destructorçš„æƒ…å†µä¸‹ï¼Œç¼–è¯‘å™¨æ‰ä¼šåˆæˆå‡ºä¸€ä¸ªæ¥ã€‚ å¦åˆ™ï¼Œdestructorè¢«è§†ä¸ºä¸éœ€è¦ï¼Œä¹Ÿå°±ä¸éœ€è¦è¢«åˆæˆï¼ˆå½“ç„¶æ›´ä¸éœ€è¦è¢«è°ƒç”¨ï¼‰ã€‚ ä¸‹é¢ä¸¾å‡ºä¸€ä¸ªæ²¡æœ‰åˆæˆææ„å‡½æ•°çš„ class ï¼ˆå®ƒç”šè‡³è¿˜æœ‰ä¸ªè™šå‡½æ•°ï¼‰ class Point public:\tPoint(float x = 0.0, float y = 0.0);\tPoint(const Point);\tvirtual float z();private:\tfloat _x, _y;; ç±»ä¼¼çš„é“ç†ï¼Œå¦‚æœæŠŠä¸¤ä¸ªPointå¯¹è±¡ç»„åˆæˆä¸€ä¸ªLine class: class Line public:Line(const Point, const Point); virtual draw();protected:\tPoint _begin, _end;; Lineä¹Ÿä¸ä¼šæ‹¥æœ‰ä¸€ä¸ªè¢«åˆæˆå‡ºæ¥çš„destructorï¼Œå› ä¸ºPointå¹¶æ²¡æœ‰destructorã€‚ å½“æˆ‘ä»¬ä»Pointæ´¾ç”Ÿå‡ºPoint3d(å³ä½¿æ˜¯ä¸€ç§è™šæ‹Ÿæ´¾ç”Ÿå…³ç³»)æ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰å£°æ˜ä¸€ä¸ªdestructorï¼Œç¼–è¯‘å™¨ä¹Ÿå°±æ²¡å¿…è¦åˆæˆä¸€ä¸ªdestructorã€‚ ä½ åº”è¯¥æ‹’ç»æŸç§å¼ºè¿«ç—‡ï¼šä½ å·²ç»å®šä¹‰äº†ä¸€ä¸ªconstructorï¼Œæ‰€ä»¥ä½ è§‰å¾—æä¾›ä¸€ä¸ªdestructoræ˜¯å¤©ç»åœ°ä¹‰çš„äº‹æƒ…ã€‚äº‹å®ä¸Šï¼Œç¨‹åºå‘˜åº”è¯¥æ ¹æ®éœ€è¦è€Œéæ„Ÿè§‰æ¥é€‰æ‹©æ˜¯å¦æä¾›destructorã€‚ æ€ä¹ˆåˆ¤æ–­ class æ˜¯å¦éœ€è¦ä¸€ä¸ªç¨‹åºå±‚é¢çš„ææ„å‡½æ•°æ„é€ å‡½æ•°è€ƒè™‘æ ‡å‡†ï¼š ä¿è¯å¯¹è±¡å®Œæ•´æ€§ ç±»å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„èµ·ç‚¹å’Œç»ˆç‚¹ ææ„å‡½æ•°é¡ºåºï¼š ä¸€ä¸ªç¨‹åºå‘˜å®šä¹‰çš„ææ„å‡½æ•°çš„æ‰©å±•æ–¹å¼ä¸æ„é€ å‡½æ•°æ–¹å¼ç›¸åŒï¼Œä½†é¡ºåºç›¸å: destructorçš„å‡½æ•°æœ¬ä½“ç°åœ¨è¢«æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´vpträ¼šåœ¨ç¨‹åºå‘˜çš„ä»£ç æ‰§è¡Œå‰è¢«é‡è®¾ï¼ˆresetï¼‰ã€‚ å¦‚æœclassæ‹¥æœ‰member class objectsï¼Œè€Œåè€…æ‹¥æœ‰destructorsï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šä»¥å£°æ˜é¡ºåºçš„ç›¸åé¡ºåºè¢«è°ƒç”¨ã€‚ å¦‚æœobjectå†…å«ä¸€ä¸ªvptrï¼Œé‚£ä¹ˆé¦–å…ˆé‡è®¾ï¼ˆresetï¼‰vptræ¥æŒ‡å‘ç›¸å…³çš„virtual tableã€‚ å¦‚æœæœ‰ä»»ä½•ç›´æ¥çš„ï¼ˆä¸Šä¸€å±‚ï¼‰nonvirtual base classesæ‹¥æœ‰destructorï¼Œå®ƒä»¬ä¼šä»¥å…¶å£°æ˜é¡ºåºçš„ç›¸åé¡ºåºè¢«è°ƒç”¨ã€‚ å¦‚æœæœ‰ä»»ä½•virtual base classesæ‹¥æœ‰destructorï¼Œåˆ°ç›®å‰è®¨è®ºçš„è¿™ä¸ªclassçš„æœ€å°¾ç«¯ï¼ˆmost-derivedï¼‰çš„classï¼Œé‚£ä¹ˆå®ƒä»¬ä¼šä»¥å…¶åŸæ¥çš„æ„é€ é¡ºåºçš„ç›¸åé¡ºåºè¢«è°ƒç”¨ã€‚ ææ„å‡½æ•°çš„æœ€ä½³å®ç°ç­–ç•¥å’Œ5.2ç« èŠ‚æœ€åï¼Œæ„é€ å‡½æ•°é‡‡å–çš„â€œä¸€åˆ†ä¸ºäºŒâ€æ³•ä¸€æ ·ï¼š å°±åƒconstructorä¸€æ ·ï¼Œç›®å‰å¯¹äºdestructorçš„ä¸€ç§æœ€ä½³å®ç°ç­–ç•¥å°±æ˜¯ç»´æŠ¤ä¸¤ä»½destructorå®ä¾‹ï¼š1ã€ä¸€ä¸ªcomplete objectå®ä¾‹ï¼Œæ€»æ˜¯è®¾å®šå¥½vptr(s)ï¼Œå¹¶è°ƒç”¨virtual base class destructorsã€‚2ã€ä¸€ä¸ªbase class subobjectå®ä¾‹ï¼›é™¤éåœ¨destructorå‡½æ•°ä¸­è°ƒç”¨ä¸€ä¸ªvirtual functionï¼Œå¦åˆ™å®ƒç»ä¸ä¼šè°ƒç”¨virtual base class destructorså¹¶è®¾å®švptrã€‚ ä¸€ä¸ªobjectçš„ç”Ÿå‘½ç»“æŸäºå…¶destructorå¼€å§‹æ‰§è¡Œä¹‹æ—¶ã€‚ç”±äºæ¯ä¸€ä¸ªbase class destructoréƒ½è½®ç•ªè¢«è°ƒç”¨ï¼Œæ‰€ä»¥derived objectå®é™…ä¸Šå˜æˆäº†ä¸€ä¸ªå®Œæ•´çš„objectã€‚ ä¾‹å¦‚ä¸€ä¸ªPVertexå¯¹è±¡å½’è¿˜å…¶å†…å­˜ç©ºé—´ä¹‹å‰ï¼Œä¼šä¾æ¬¡å˜æˆä¸€ä¸ªVertex3då¯¹è±¡ã€ä¸€ä¸ªVertexå¯¹è±¡ï¼Œä¸€ä¸ªPoint3då¯¹è±¡ï¼Œæœ€åæˆä¸ºä¸€ä¸ªPointå¯¹è±¡ã€‚ å½“æˆ‘ä»¬åœ¨destructorä¸­è°ƒç”¨member functionsæ—¶ï¼Œå¯¹è±¡çš„èœ•å˜ä¼šå› ä¸ºvptrçš„é‡æ–°è®¾å®šï¼ˆåœ¨æ¯ä¸€ä¸ªdestructorä¸­ï¼Œåœ¨ç¨‹åºå‘˜æ‰€ä¾›åº”çš„ä»£ç æ‰§è¡Œä¹‹å‰ï¼‰è€Œå—åˆ°å½±å“ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š Point pt;\tPoint *p = new Point3d;\tfoo(pt, p); ...\tdelete p; pt ã€ p ä½œä¸ºå‚æ•°ä¹‹å‰ï¼Œè¦åˆå§‹åŒ–ä¸ºåæ ‡å€¼ï¼Œé€šè¿‡æ„é€ å‡½æ•°æˆ–æ˜¾å¼æä¾›åæ ‡å€¼ã€‚ ç±»ä½¿ç”¨è€…æ²¡æ³•æ£€éªŒlocalæˆ–heapå˜é‡æ˜¯å¦éœ€è¦åˆå§‹åŒ–ã€‚ æ‰€ä»¥æ„é€ å‡½æ•°å¾ˆæœ‰å¿…è¦ã€‚ é‚£ä¹ˆæ˜¾å¼deleteæ‰ p æ˜¯å¦éœ€è¦æå‰å¤„ç†å‘¢ï¼Ÿ p-x(0);p-y(0); //like this æ²¡å¿…è¦ã€‚æ²¡æœ‰ä»»ä½•ç†ç”±è¯´åœ¨deleteä¸€ä¸ªå¯¹è±¡ä¹‹å‰å…ˆå¾—å°†å…¶å†…å®¹æ¸…é™¤å¹²å‡€ã€‚ å¦‚æœç¡®ä¿åœ¨ç»“æŸptå’Œpçš„ç”Ÿå‘½ä¹‹å‰ï¼Œæ²¡æœ‰ä»»ä½•å’Œè¯¥ class æœ‰å…³çš„ç¨‹åºæ“ä½œæ˜¯å¿…è¦çš„ï¼Œå¾€å¾€ä¸ä¸€å®šä¼šéœ€è¦ä¸€ä¸ªdestructorã€‚ ä¾‹å¤–æƒ…å†µ ï¼šdelete å­˜åœ¨â€œç»“æŸå‰å’Œè¯¥ class æœ‰å…³çš„ç¨‹åºæ“ä½œâ€ è€ƒè™‘Vertex classï¼Œå®ƒç»´æŠ¤äº†ä¸€ä¸ªç”±ç´§é‚»çš„é¡¶ç‚¹æ‰€å½¢æˆçš„é“¾è¡¨ï¼Œå¹¶ä¸”å½“ä¸€ä¸ªé¡¶ç‚¹çš„ç”Ÿå‘½ç»“æŸæ—¶ï¼Œåœ¨é“¾è¡¨ä¸Šæ¥å›ç§»åŠ¨ä»¥å®Œæˆåˆ é™¤æ“ä½œã€‚å¦‚æœè¿™æ­£æ˜¯ç¨‹åºå‘˜æ‰€éœ€è¦çš„ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯Vertex destructorçš„å·¥ä½œã€‚ è¿™ä¸ªdelete å­˜åœ¨â€œç»“æŸå‰å’Œè¯¥ class æœ‰å…³çš„ç¨‹åºæ“ä½œâ€ å½“æˆ‘ä»¬ä»Point3då’ŒVertexæ´¾ç”Ÿå‡ºVertex3dæ—¶ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä¾›åº”ä¸€ä¸ªexplicit Vertex3d destructorï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜æ˜¯å¸Œæœ›Vertex destructorè¢«è°ƒç”¨ï¼Œä»¥ç»“æŸä¸€ä¸ªVertex3d objectã€‚ å› æ­¤ç¼–è¯‘å™¨å¿…é¡»åˆæˆä¸€ä¸ªVertex3d destructorï¼Œå…¶å”¯ä¸€ä»»åŠ¡å°±æ˜¯è°ƒç”¨Vertex destructorã€‚ å¦‚æœæˆ‘ä»¬æä¾›ä¸€ä¸ªVertex3d destructorï¼Œç¼–è¯‘å™¨ä¼šæ‰©å±•å®ƒï¼Œä½¿å®ƒè°ƒç”¨Vertex destructor(åœ¨æˆ‘ä»¬æ‰€ä¾›åº”çš„ç¨‹åºä»£ç ä¹‹å)ã€‚"},{"title":"effective cpp","path":"/wiki/cpp/effective cpp.html","content":"å‰è¨€ï¼šæ‹–äº†å¥½ä¹…çš„å·¨å‘ã€‚ä¸æ˜¯å¾ˆæ·±ï¼Œæ‰“ç®—å¤§ç«çŒ›çƒ¹ï¼Œä¸€å£æ°”ç¿»å®Œæ˜Ÿç©ºcppï¼ˆeffective c++ï¼‰ï¼Œä¸ºå¼€å­¦å’Œå¦ä¸€æœ¬è“ä¹¦åšå‡†å¤‡ã€‚ä¸è¿‡æˆ‘ä¹°çš„é‚£æœ¬æ˜Ÿç©ºæ¨¡ç³Šçš„ä¸è¡Œï¼Œç›—ç‰ˆçš„æ„Ÿè§‰ã€‚é˜…è¯»ä½“éªŒè¿˜ä¸å¦‚pdf+padã€‚ è¿˜æœ‰å°±æ˜¯å­¦ä¹ çŸ¥è¯†ååŠæ—¶å¤ä¹ ã€‚é™¤äº† æ¸©æ•…çŸ¥æ–° å¯ä¸ºå¸ˆä¹Ÿ å¤–ï¼Œè¿˜å› ä¸ºäººæ˜¯çœŸçš„å¾ˆå¥å¿˜çš„ å¥½å§ã€‚ å¦ï¼šç”±äºç›®å‰åœ¨å­¦è‹±è¯­çš„è½¬å‹æœŸï¼Œä¼šæœ‰å¾ˆå¤šåŠè‹±åŠæ±‰çš„åˆ«æ‰­è¯­å¥ã€‚é¦–å…ˆè¿™ä¸æ˜¯ä¸ºäº†è£…é€¼ï¼Œå…¶æ¬¡å¦‚æœé˜…è¯»ä½“éªŒå®åœ¨ä¸ä½³å¯ä»¥æ¢å…¶ä»–çš„blogï¼Œä¸è¦æµªè´¹æ—¶é—´ã€‚ @[TOC] ç¬¬ä¸€ç« ï¼šAccustoming Yourself to C++1.è§†C++ä¸ºä¸€ä¸ªè¯­è¨€è”é‚¦ï¼ˆfederation of languagesï¼‰ C++ä½œä¸ºä¸€ä¸ªå¤šé‡æ³›å‹ç¼–ç¨‹è¯­è¨€ï¼Œæ–Ÿé…Œé€‰æ‹©ä½¿ç”¨å…¶æŸä¸€éƒ¨åˆ†æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚ å¦‚ä¸Šæ‰€è¨€ï¼Œä»Šå¤©çš„C++æ—©å·²è¶…è¿‡äº†C with class çš„è¦æ±‚ï¼Œå®ƒçš„å»¶ä¼¸æ€§éå¸¸é«˜â€”â€”å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªâ€œè¯­è¨€è”é‚¦â€ã€‚è”é‚¦åŒ…å«å››éƒ¨åˆ†ï¼š Cè¯­è¨€ ï¼šCçš„åŸºç¡€æ¨¡å—ã€‚blocksã€statemntsã€preprocessorã€built-in data typesã€arrayã€pointersç­‰éƒ½æ˜¯å’ŒCè¯­è¨€åŒæ°”è¿æã€‚ Object-Orientd C++ ï¼šé¢å‘å¯¹è±¡çš„ç¼–ç¨‹ã€‚å³C with classï¼ŒåŠŸèƒ½åŒ…æ‹¬ç»§æ‰¿ã€å°è£…ã€å¤šæ€ Template C++ ï¼šcppçš„æ³›å‹ç¼–ç¨‹(generic programming) éƒ¨åˆ†ã€‚å®ƒçš„èƒŒåæœ‰TMP(metaprogramming)æ¨¡æ¿å…ƒç¼–ç¨‹çš„æ€è·¯ï¼Œæ˜¯å¾ˆå¼ºå¤§çš„ç¼–ç¨‹èŒƒå‹ã€‚ STL ï¼šcontainers,iterators,algorithms å’Œ function objects ç”±templateç¨‹åºåº“ â€”â€” STL ç»Ÿç­¹é…åˆï¼Œå…±åŒå‘æŒ¥ä½œç”¨ã€‚ åœ¨è¿½æ±‚é«˜æ•ˆç¼–ç¨‹æ—¶ï¼Œè¿™å››éƒ¨åˆ†çš„è§„åˆ™å¾€å¾€æœ‰æ‰€åˆ†æ­§ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè¦æ ¹æ®éœ€æ±‚è€ƒè™‘è¿™å››éƒ¨åˆ†ï¼Œä»è€Œè¾¾åˆ°æœ€ä½³æ•ˆç‡ã€‚ ä¾‹å¦‚ï¼šåŒæ ·çš„æŒ‰å€¼ä¼ é€’(pass by value)å’ŒæŒ‰å¼•ç”¨ä¼ é€’(pass-by-reference), å‰è€…å¯¹Cè¯­è¨€å’ŒSTLä¸¤éƒ¨åˆ†æ›´åŠ ä½¿ç”¨ï¼Œè€Œåè€…åœ¨é¢å‘å¯¹è±¡å’Œæ³›å‹ç¼–ç¨‹æ—¶åˆ™æ›´åŠ é«˜æ•ˆï¼ˆå°¤å…¶Templateï¼‰ï¼Œè¿™æ˜¯ç”±äºuser-defined æ„é€ å’Œææ„å‡½æ•° çš„å­˜åœ¨ã€‚ 2.å°½é‡ä»¥constï¼Œenumï¼Œinline æ›¿æ¢ #define å•çº¯å¸¸é‡ï¼Œç”¨constæˆ–enums æ¥æ›¿ä»£ #define å‡½æ•°å®ï¼Œæ”¹ç”¨å†…è”å‡½æ•°(inline)æ›¿æ¢ #define ä¸€è¨€è”½ä¹‹ï¼Œè¿™æ˜¯ç”¨ ç¼–è¯‘å™¨çš„å¤„ç† æ›¿ä»£ é¢„å¤„ç†å™¨çš„å¤„ç†ã€‚ åŸå› ï¼š å®å®šä¹‰çš„å¸¸é‡ç”±é¢„å¤„ç†å¤„ç†ï¼Œè¿™æ„å‘³ç€ç¼–è¯‘å™¨çœ‹ä¸åˆ°ä»–ã€‚ç¼–è¯‘å™¨çœ‹ä¸åˆ°ï¼Œæ„å‘³ç€å®å¸¸é‡ä¸€æ—¦å‡ºé”™ï¼Œåœ¨è¿½è¸ªå®ƒæ—¶ä¼šç»™ä½ é€ æˆä¸å°éº»çƒ¦ã€‚ï¼ˆçœ‹ä¸åˆ°çš„åŸå› ï¼šå®å¸¸é‡æ²¡æœ‰è¿›å…¥è®°å·å¼è°ƒè¯•å™¨(symbolic debugger)å’Œè®°å·è¡¨(symbol table)ï¼‰ å¯¹äºæµ®ç‚¹å¸¸é‡ï¼Œdefine ç›´æ¥æ›¿æ¢å¯èƒ½å¯¼è‡´ç›®æ ‡ç (object code)å‡ºç°å¤šä»½æµ®ç‚¹æ•°ï¼Œå¯¼è‡´æ•°æ®å†—ä½™ã€‚ å¸¸é‡å®šä¹‰å¼é€šå¸¸è¢«æ”¾åœ¨å¤´æ–‡ä»¶å†…ã€‚ ä¸‰ç±»åœºæ™¯ classä¸“å±å¸¸é‡ ç¡®ä¿è¿™ä¸ªå¸¸é‡åªæœ‰ä¸€ä¸ªå®ä½“ï¼Œæœ‰å¿…è¦åŠ ä¸ŠstaticçŠ¶æ€ï¼Œå³class{static const type}ã€‚ å¦‚æœéœ€è¦å–åœ°å€ç¼–è¯‘å™¨æœ‰å®šä¹‰å¼è¦æ±‚ï¼Œå¯ä»¥åœ¨ç±»å¤–æä¾›å®šä¹‰å¼ï¼š const typename classname: : åç§°; (è¿™é‡Œå¯ä»¥èµ‹å€¼) å¦‚æœç¼–è¯‘å™¨ä¸å…è®¸åˆå€¼è®¾å®š,å¯ä»¥æ”¾å¼ƒstatic const æ”¹ç”¨æšä¸¾ç±»å‹ä½œä¸ºè¡¥å¿ï¼šclass{enum {num = 5}; int array_1[num];}ï¼Œä½¿å…¶æˆä¸ºè®°å·åç§° Defineç”±äºä½œç”¨åŸŸå°è£…æ€§åŸå› ï¼Œæœ‰å¾ˆå¤§å±€é™æ€§ã€‚ enum hack â€‹ å¯ä»¥ç”¨enumå®ç°å¸¸é‡å®šä¹‰ï¼Œå®ƒç›¸æ¯”cosntä¹Ÿæ›´åƒ#defineã€‚ enumèƒ½å¸®åŠ©å¸¸é‡å®ç°é˜»æ­¢å…¶ä»–æŒ‡é’ˆå’Œå¼•ç”¨æŒ‡å‘çš„çº¦æŸã€‚ eunmä¸ä¼šå¯¼è‡´éå¿…è¦å†…å­˜åˆ†é…ã€‚ å–conståœ°å€åˆæ³•ï¼› å–enumä¸åˆæ³•ï¼Œå–defineå¸¸é‡åŒæ ·ä¸åˆæ³•ã€‚ å®å‡½æ•° ç”¨template inline æ›¿ä»£define #define MAX(a,b) f((a)(b)?(a):(b)) //é€‰æ‹©è¾ƒå¤§å€¼ä½œä¸ºfå‡½æ•°çš„å‚æ•° æ›¿æ¢ä¸º templatetypename Tinline void MAX(const Ta,const Tb)f(ab?a:b) ; 3.å°½å¯èƒ½ä½¿ç”¨const åœ¨ä»»ä½•å¯è¡Œçš„åœºæ™¯å£°æ˜constæé†’ç¼–è¯‘å™¨ï¼Œä¹Ÿæé†’ä½ è‡ªå·±ã€‚ ç¼–è¯‘å™¨å¼ºåˆ¶å®æ–½ biwwise constnessï¼Œç¼–å†™ç¨‹åºæ—¶è¦åˆ©ç”¨conceptual constness çµæ´»å®ç°ç›®çš„ã€‚ const å’Œ non-const æˆå‘˜å‡½æ•°æœ‰åŒæ ·å®ç°æ—¶ï¼ŒæŠŠä¸¤ä»½å®ç°åˆå¹¶æˆä¸€ä»½ï¼Œä¸”åªå…è®¸ä»¤non-constè°ƒç”¨constã€‚ ç»†èŠ‚æ³¨æ„ï¼š constçš„ä½ç½®ï¼šåœ¨æ˜Ÿå· â€˜*â€™ å·¦è¾¹æ˜¯æŒ‡é’ˆå¸¸é‡æŒ‡å‘å†…å®¹ä¸å¯æ”¹å˜ï¼›åœ¨å³è¾¹åˆ™æ˜¯å¸¸é‡æŒ‡é’ˆæœ¬èº«ä¸å¯æ”¹å˜ã€‚ è¿­ä»£å™¨çš„constç”¨æ³•æ˜¯é™æ€è¿­ä»£å™¨ï¼šconst_iteratorã€‚ å¤šæ•°æƒ…å†µï¼Œå‡½æ•°è¿”å›ä¸€ä¸ªå¸¸é‡å€¼èƒ½å¤Ÿé˜²æ­¢å®¢æˆ·æ“ä½œå‡ºæ„å¤–ã€‚ å¯¹äº const æˆå‘˜å‡½æ•°çš„æ“ä½œæœ‰ä¸¤ç§æ€åº¦ï¼š bitwise(physicalï¼‰ constness: const æˆå‘˜å‡½æ•°ä¸èƒ½ä¿®æ”¹å¯¹è±¡çš„ä»»ä½•æˆå‘˜å˜é‡ï¼Œä¸€ä¸ªbitéƒ½ä¸è¡Œã€‚ conceptualï¼ˆlogicalï¼‰ constness: const æˆå‘˜å‡½æ•°å¯ä»¥é€šè¿‡mutableä¿®æ”¹å¯¹è±¡çš„æŸäº›bitã€‚ é¢å¯¹ non-cosnt å’Œconst ä¸¤ç§ç±»å‹éƒ½æœ‰éœ€æ±‚ï¼Œè€Œåœ¨å®ç°ä¸Šå®Œå…¨é‡å çš„æƒ…å†µæ—¶ï¼Œåˆå¹¶ã€‚ ç¤ºä¾‹ï¼š Class TextBlock public: const char operator[](std::size_t position) const #ç½—é‡Œå§å—¦ä¸€å¤§å †ä¸œè¥¿ return text[position]; char operator[](std::size_t position) const #ç½—é‡Œå§å—¦ä¸€å¤§å †ä¸œè¥¿ return text[position]; private: std::string text; æ›´æ”¹ä¸ºï¼š const char operator[](std::size_t position) const #ç½—é‡Œå§å—¦ä¸€å¤§å †ä¸œè¥¿ return text[position];//constç±»å‹çš„å®ç°ï¼Œå°†ç”±non-const å€ŸåŠ©è°ƒç”¨ char operator[](std::size_t position) const return const_castchar( //2.è°ƒç”¨å®Œæˆåç§»é™¤const static_castconst TextBlock(*this) //1.ä¸º*this æ·»åŠ const [position]; //åŒæ—¶å¸®åŠ©operator[]è°ƒç”¨constç‰ˆæœ¬ ); æé†’å¤§å®¶ï¼šåä¹‹ç”¨ non-const å»å®ç°çš„è¯ï¼Œconstè°ƒç”¨æ˜¯å¾ˆå±é™©[^2]çš„ã€‚ [^2]: consté‡ŒåŒ…å«è§£constæ“ä½œï¼Œå³const_cast ä¼šæ‰“ç ´é‡‘èº«ï¼Œå¸¦æ¥é£é™©ã€‚ 4.ä½¿ç”¨å¯¹è±¡å‰åˆå§‹åŒ–å®ƒ å¯¹å†…ç½®å¯¹è±¡ä½ è¦æ‰‹åŠ¨åˆå§‹åŒ–ï¼Œå…‹æœæ‡’æƒ°ã€‚ æ„é€ å‡½æ•°ç”¨æˆå‘˜åˆå€¼åˆ—(member initialization list) çš„æ–¹æ³•åˆå§‹åŒ–æˆå‘˜å˜é‡ï¼ˆåˆå§‹åŒ–é¡ºåºå¯¹åº”å…¶å£°æ˜é¡ºåºï¼‰ï¼Œ æ„é€ å‡½æ•°é‡Œç”¨ â€œâ€ èµ‹å€¼ ä»…ä»…æ˜¯èµ‹å€¼æ“ä½œ(assignment) ï¼Œä¸åˆå§‹åŒ–æ˜¯ä¸¤ç äº‹ ç”¨ local static å¯¹è±¡(å‡½æ•°å†…å¯¹è±¡)æ›¿æ¢ non-local static æ¥é¿å… Object_1 ä½¿ç”¨å¦ä¸€ä¸ªâ€œæœªç»åˆå§‹åŒ–â€çš„Object_2 æ¥åˆå§‹åŒ–è‡ªå·±ã€‚ æˆ‘ä»¬æ¥ç€é‡è§£é‡Šä¸‹ç¬¬ä¸‰ç‚¹ã€‚ å­˜åœ¨å‘¨æœŸå’Œç¨‹åºä¸€æ ·çš„å¯¹è±¡ä¸å¤šã€‚staticã€globalã€in-namespace çš„å¯¹è±¡éƒ½å±äºæ­¤ã€‚å‡½æ•°å†…é™æ€å¯¹è±¡ç§°ä¸ºlocal staticï¼ˆ local æ˜¯ç›¸å¯¹äºå‡½æ•°è€Œè¨€ï¼‰ï¼Œå…¶ä½™ä¸ºnon-local staticã€‚ C++å¯¹ä¸¤ä¸ªç¼–è¯‘å•å…ƒå†…çš„é™æ€å¯¹è±¡äº’ç›¸åˆå§‹åŒ–çš„è¡Œä¸ºï¼Œå¹¶æ— æ˜ç¡®å®šä¹‰ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬åœ¨ç¼–å†™ç¨‹åºæ—¶ç•™ä»½å¿ƒã€‚ ç¤ºä¾‹å¦‚ä¸‹ï¼š class Server public: size_t numDisks() const; extern Server tfs; //extern æ„å‘³ç€è¦åˆ°å¦ä¸€ä¸ªç¼–è¯‘å•å…ƒã€‚ è¿™é‡Œtfsè¿˜æ²¡æœ‰åˆå§‹åŒ– è¿™é‡Œæˆ‘ä»¬è®¾æƒ³Serverä½œä¸ºæœåŠ¡ç«¯ï¼Œå¯¹æä¾›ç»™å®¢æˆ·çš„tfså¯¹è±¡ï¼Œåœ¨è‡ªå·±çš„ç±»æ„é€ å‡½æ•°é‡Œæœ‰ä¸€ä¸ªæå…¶ä¼˜é›…çš„åˆå§‹åŒ–æ“ä½œã€‚å¯ä¸€æ—¦ç”¨æˆ·ä½¿ç”¨è¯¥å¯¹è±¡å…ˆäºå®ƒçš„åˆå§‹åŒ–æ“ä½œï¼Œå°±ä¼šå‡ºç°éå¸¸Crazyçš„åæœã€‚å°±åƒä¸‹é¢è¿™æ ·ï¼š class Userpublic: Init(params) //åˆå§‹åŒ–æ“ä½œ size_t disks = tfs.numDisks();//åœ¨æ­¤ç¼–è¯‘å•å…ƒä½¿ç”¨ tfs ã€‚ User temp(params); //è¿™ä¸ªåˆå§‹åŒ–è°ƒç”¨ï¼Œå¯èƒ½å˜æˆä¸‡æ¶ä¹‹æºã€‚ æ”¹è¿›ï¼š //Serverç«¯ï¼šServer:: Server tfs static Server tfs; return tfs;//å…ˆæä¸ªå‡½æ•°åˆå§‹åŒ–å¥½ï¼Œæˆä¸ºlocal staticå¯¹è±¡â†‘//Userç«¯ï¼šUser::Init(params)size_t disks = tfs().numDisks() ; //è¿™é‡Œè°ƒç”¨tfs()å‡½æ•°ï¼Œè¿”å›åˆå§‹åŒ–çš„å¯¹è±¡User temp()static User td; return td; //åŒServer æ›¿æ¢å¯¹è±¡ ç¬¬äºŒç«  : Constructors, Destructors, and Assignment Operators5.äº†è§£C++å·å·ç¼–å†™è°ƒç”¨çš„é‚£äº›å‡½æ•° ç¼–è¯‘å™¨ä¼šä¸ºç±»åˆ›å»ºé»˜è®¤æ„é€ å‡½æ•°ã€æ‹·è´æ„é€ å‡½æ•°ã€ææ„å‡½æ•° å’Œ æ‹·è´èµ‹å€¼å‡½æ•°ã€‚ ä½ è‡ªå·±å£°æ˜ç›¸å…³å‡½æ•°ï¼Œä¸ç®¡æœ‰å‚æ²¡å‚ï¼Œç¼–è¯‘å™¨éƒ½ä¸ä¼šæ’æ‰‹è¿™ä»¶äº‹æƒ…ã€‚ class nameobject\tpublic:\tnameobject(string name , const Tvalue): name(this-name),value(this-value);private:\tstring name;\tconst T value;; string newdog(Persephone);\tstring olddog(Satch);\tnameobjectintp(newdog,2);\tnameobjectints(olddog,36);\tp=s; //What happened in P memberï¼Ÿ CPPç¼–è¯‘å™¨ä¼šæ‹’ç»ç¼–è¯‘13è¡Œçš„æ‹·è´èµ‹å€¼ã€‚å› ä¸ºä½ å¾—è‡ªå·±å®šä¹‰ã€‚ base class å£°æ˜æ‹·è´èµ‹å€¼ä¸º private æƒé™ï¼Œç¼–è¯‘å™¨ä¼šæ‹’ç»ä¸ºç»§æ‰¿å®ƒçš„å­ç±»ç”Ÿæˆæ‹·è´èµ‹å€¼ã€‚ å­ç±»ç»§æ‰¿æ‹·è´èµ‹å€¼æ“ä½œæ˜¯ä¸ºäº†å¤„ç†base classå…ƒç´ ã€‚è¿™ä¸€å…ƒç´ å´æ˜¯ç§äººæƒé™ï¼Œç¼–è¯‘å™¨æ— èƒ½ä¸ºåŠ›ã€‚ å®é™…ä¸Šï¼Œè¿™äº›è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°åªæœ‰åœ¨è¢«è°ƒç”¨ä¸”æ²¡æœ‰å®ç°æ—¶ï¼Œæ‰ä¼šè¢«ç¼–è¯‘å™¨åˆ›å»ºå‡ºæ¥ï¼ˆç»™ä½ æ“¦å±è‚¡å–½ï¼‰ã€‚ 6.æ˜ç¡®æ‹’ç»ä¸æƒ³ä½¿ç”¨ï¼Œè€Œç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•° æ‹’ç» Compiler è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°ï¼š ä½ å¯ä»¥å°†å¯¹åº”æˆå‘˜å‡½æ•°å£°æ˜ä¸º private ä¸”ä¸äºˆå®ç°ï¼› ç»§æ‰¿ç‰¹å®šçš„base class copyæ„é€ å‡½æ•°å’Œcopy assignmentï¼ˆèµ‹å€¼ï¼‰å‡½æ•° å¾ˆå®¹æ˜“å› ä¸ºè°ƒç”¨è¢«ç¼–è¯‘å™¨åˆ›å»ºå‡ºæ¥ã€‚ä½†æœ‰äº›åœºæ™¯ä½ ä¼šåæ„Ÿè¿™ç§â€œå¸®å€’å¿™â€çš„è¡Œä¸ºã€‚çœ‹çœ‹æ€ä¹ˆæ˜ç¡®æ‹’ç»å§ã€‚ å°†copy å‡½æ•°å£°æ˜ä¸ºprivateï¼Œå¹¶å®ç°ä¸ºç©ºã€‚ è°ƒç”¨çš„è¯ä¼šè·å¾—è¿æ¥é”™è¯¯ï¼ˆlinkage errorï¼‰ã€‚ä½†memberå‡½æ•°å’Œfriendå‡½æ•°è°ƒç”¨è¿˜æ˜¯å¯ä»¥è°ƒç”¨å®ƒã€‚ æºç ä¸­çš„ ios_base , basic_ios , sentry éƒ½æœ‰è¿™ç§èŠ±æ‹›å‡ºç°ã€‚ ç»§æ‰¿ç‰¹å®šçš„ base class ã€‚ è¿™ç§æ–¹æ³•èƒ½æŠŠè¿æ¥é”™è¯¯è½¬ç§»åˆ°ç¼–è¯‘æœŸã€‚ class Uncopyable protected: Uncopyable() ~Uncopyable() private: Uncopyable(const Uncopyable); Uncopyable operator=(const Uncopyable); ä»¥ private ç±»å‹ç»§æ‰¿å®ƒï¼Œä¸è¦çŠ¹è±«ã€‚ å°è¯•æ‹·è´å®ƒçš„å­ç±»æ—¶ï¼Œç¼–è¯‘æœŸä¼šå°è¯•è‡ªåŠ¨ç”Ÿæˆcopyå‡½æ•°ï¼Œä½†base classçš„å‡ºç°ä½¿ç¼–è¯‘å™¨è½¬å‘è°ƒç”¨ base class çš„å‡½æ•°ï¼Œç„¶åè¢« private æƒé™æ‹’ç»ã€‚ 7.ä¸ºå¤šæ€åŸºç±»å£°æ˜virtualææ„å‡½æ•° polymorphicï¼ˆå¤šæ€ï¼‰æ€§è´¨çš„ base class åº”è¯¥å£°æ˜ä¸€ä¸ª virtual ææ„å‡½æ•°ã€‚ å³ï¼šclass ä¸­å‡ºç°äº†virtual å°±è¦æœ‰virtualææ„ Classåªæœ‰åœ¨ä½œä¸º base class çš„éœ€æ±‚å’Œå…·å¤‡å¤šæ€æ€§è´¨æ—¶ï¼Œæ‰å£°æ˜ virtual ææ„å‡½æ•°ã€‚ è¿™ä¸¤ç‚¹æ˜¯åŒä¸€é—®é¢˜çš„ä¸¤ä¸ªè§’åº¦ ä»¥ä¸Šä¸¤ç§æƒ…å†µçš„ virtual å½“ç„¶å¯ä»¥ç”¨ pure virtual çº¯è™šææ„å‡½æ•° å®ç° çº¯è™šææ„ä¼šä½¿è¯¥ base class æŠ½è±¡åŒ–ã€‚è¿™èƒ½ç£ä¿ƒå…¶ derived class ä¸»åŠ¨å®ç°å®Œæˆè™šææ„ã€‚ è¿™é‡Œéœ€è¦ä¸€ä¸ªæ¦‚å¿µï¼š factory function å·¥å‚å‡½æ•°ï¼šè¿”å›ä¸€ä¸ªbase class æŒ‡é’ˆ,æŒ‡å‘æ–°ç”Ÿæˆçš„ derived class å¯¹è±¡ã€‚ PSï¼šä¸ºäº†é¿å…æ³„éœ²å†…å­˜ï¼Œè¿”å›æŒ‡é’ˆæŒ‡å‘çš„å¯¹è±¡å¿…é¡»åœ¨heapä¸Šï¼Œç”±æ­¤ä½¿ç”¨ååŠ¡å¿…Deleteæ‰ã€‚ **é—®é¢˜åœºæ™¯ï¼š**å­ç±»ç»§æ‰¿çˆ¶ç±»åï¼Œå­ç±»å¯¹è±¡æ¥æ”¶äº†ä¸€ä¸ªçˆ¶ç±»çš„æŒ‡é’ˆï¼Œå¹¶ç”±çˆ¶ç±»æŒ‡é’ˆåˆ é™¤ã€‚è¿™ä¼šå¯¼è‡´å±€éƒ¨é”€æ¯è€Œå†…å­˜æ³„æ¼ï¼šç»§æ‰¿çš„çˆ¶ç±»éƒ¨åˆ†é”€æ¯è€Œå­ç±»éƒ¨åˆ†æœªè¢«é”€æ¯ï¼ˆå­ç±»ææ„å‡½æ•°æ²¡æœ‰è°ƒç”¨ï¼‰ã€‚ è§£å†³æ–¹æ³•ï¼š çˆ¶ç±»æœ¬èº«çš„ææ„å‡½æ•°è®¾ä¸ºvirtual æˆ– pure virtualã€‚ å­ç±»è¦æ‹’ç»ç»§æ‰¿non-virtualææ„å‡½æ•°çš„çˆ¶ç±»ã€‚ ä¸€äº›åŸç†ï¼š pure virtual çº¯è™šææ„çš„è¿ä½œæ–¹å¼ï¼šæœ€æ·±å±‚æ´¾ç”Ÿï¼ˆè¾ˆåˆ†æœ€å°çš„ï¼‰derived class çš„ææ„å…ˆè¢«è°ƒç”¨ï¼Œç„¶åé€ä¸ªè°ƒç”¨å…¶ base classã€‚ç¼–è¯‘å™¨ä¼šä¸ºå­ç±»çš„ææ„å‡½æ•°ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå¯¹çˆ¶ç±»çº¯ææ„å®ç°çš„è°ƒç”¨ï¼ˆå®ç°éœ€è¦è‡ªå·±å†™ï¼‰ã€‚ virtual å‡½æ•°çš„å®ç°ï¼Œè¦æ±‚å¯¹è±¡æºå¸¦ä¸€äº›ä¿¡æ¯ï¼Œä»è€Œåœ¨è¿è¡Œæ—¶èƒ½ å‡†ç¡®è°ƒç”¨æˆ‘ä»¬éœ€è¦çš„é‚£ä¸ª virtualã€‚è¿™ä»½ä¿¡æ¯ç”± vptr(virtual table pointer) æŒ‡é’ˆ æŒ‡å‡ºã€‚è¿™ä¸ªå°å®¶ä¼™æŒ‡å‘ä¸€ä¸ªç”±å‡½æ•°æŒ‡é’ˆæ„æˆçš„æ•°ç»„ï¼Œå³ vtbl(virtual table) ã€‚æ¯ä¸ªæœ‰ virtual å‡½æ•°çš„ class éƒ½æœ‰ä¸€ä¸ªç›¸åº”çš„vtblã€‚ æ‰€ä»¥å½“å¯¹è±¡è°ƒç”¨virtualå‡½æ•°ï¼Œ å®é™…å‡½æ•°å–å†³äºè¯¥å¯¹è±¡çš„ vptr æ‰€æŒ‡å‘çš„ vtblã€‚é€šè¿‡ vtbl ç¼–è¯‘å™¨ä¼šæ‰¾åˆ°åˆé€‚çš„å‡½æ•°æŒ‡é’ˆã€‚ **ä½¿ç”¨ virtual å‡½æ•° ä¼šå¸¦æ¥æ›´å¤§çš„å†…å­˜å ç”¨ã€‚**vptr ä½œä¸ºæŒ‡é’ˆï¼Œä¸å¯é¿å…ä¼šå ç”¨å†…å­˜ã€‚è€Œä¸” vptr å ç”¨çš„ç©ºé—´å’Œå…¶ä»–è¯­è¨€ä¹Ÿä¸åŒï¼ˆCç”šè‡³æ²¡æœ‰ vptr ï¼‰ï¼Œæ‰€ä»¥ç§»æ¤æ€§ä¹Ÿä¸å¥½ã€‚ åä¾‹ï¼šå¹¶éæ‰€æœ‰base class éƒ½æœ‰å¤šæ€æ€§è´¨ã€‚åƒ STL å’Œ stringï¼Œå®ƒä»¬æ²¡æœ‰è®¾è®¡ç”¨æ¥â€œé€šè¿‡ base class æ¥å£æ¥å¤„ç† derived class å¯¹è±¡â€ï¼Œå®ƒä»¬ä¸éœ€è¦ virtual ææ„å‡½æ•°ã€‚ç›¸ä¿¡æˆ‘ã€‚ 8.åˆ«è®©å¼‚å¸¸ä»ææ„å‡½æ•°è¿™æºœèµ° ææ„å‡½æ•°ä¸èƒ½å‘ç”Ÿå¼‚å¸¸ã€‚ä¸€æ—¦æœ‰å¯èƒ½å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µï¼Œææ„å‡½æ•°ä¹Ÿè¦èƒ½æ•æ‰åˆ°ï¼Œåœæ­¢å¼‚å¸¸çš„ä¼ æ’­æˆ–ç»“æŸç¨‹åºã€‚ class åº”è¯¥æä¾›ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ˆéææ„ï¼‰ï¼Œå¸®åŠ©ä½¿ç”¨è€…å¯¹æŸä¸ªæ“ä½œå‡½æ•°è¿è¡ŒæœŸé—´çš„å¼‚å¸¸ä½œå‡ºååº”ã€‚ ä¸€ä¸ªç¤ºä¾‹ï¼šDBConnection( æ•°æ®åº“è¿æ¥ç±» ) class DBConnection public: ... static DBConnection create(); //çœç•¥ä¸è¦å‚æ•°ï¼Œè¯¥å‡½æ•°è¿”å›DBConnectionå¯¹è±¡ void close(); //å…³é—­è”æœº å¾ˆè‡ªç„¶çš„åšæ³•ï¼šåˆ›å»ºä¸€ä¸ªç®¡ç†DBCèµ„æºçš„ class ï¼Œåœ¨è¯¥ class çš„ææ„å‡½æ•°ä¸­ è°ƒç”¨closeã€‚ ç±»ä¼¼è¿™æ ·ï¼š class DBManage //DBM å’Œ DBC éƒ½åœ¨æœåŠ¡ç«¯ã€‚ï¼ˆè™šæ‹Ÿåœºæ™¯ï¼‰public: ... ~DBManage() db.close(); ; private: DBConection db;; å¯¹äºç”¨æˆ·ï¼š //å¼€è¾Ÿä¸€ä¸ªblockDBConn dbc(DBConnection::create()) ; å½“ç„¶ï¼Œä»¥ä¸Šæ˜¯å»ºç«‹åœ¨è°ƒç”¨close()æˆåŠŸçš„åŸºç¡€ä¸Šã€‚ å¦‚æœè°ƒç”¨å¯¼è‡´å¼‚å¸¸ï¼Œææ„ä»ç„¶ä¼šä¼ æ’­å¼‚å¸¸ï¼Œå¼•å‡ºæ— æ³•é©¾é©­çš„éº»çƒ¦ã€‚ ä¸¤ä¸ªæ€è·¯è§£å†³ï¼š close()æŠ›å‡ºå¼‚å¸¸ï¼Œç»“æŸç¨‹åº â€”â€” é€šè¿‡è°ƒç”¨abort() DBConn::~DBConn() try db.close(); catch(...) // è®°å½•å¤±è´¥æ—¥å¿—ã€‚ std::abort(); åä¸‹è¿™ä¸ªå¼‚å¸¸ â€”â€” è®°å½•ä¿¡æ¯ï¼Œç„¶åè·³è¿‡å®ƒç»§ç»­â€œæ­£å¸¸è¿è¡Œâ€ DBConn::~DBConn() try db.close(); catch(...) //è®°å½•å¤±è´¥æ—¥å¿—ã€‚ ä¸è¿‡è¿™ä¸¤ç§æ–¹æ³•ä¸èƒ½ä¸»åŠ¨å¯¹å¼‚å¸¸æƒ…å†µåšå‡ºååº”ã€‚ è¿™é‡Œè§£å†³æ–¹æ¡ˆæ˜¯ï¼Œé‡æ–°è®¾è®¡DBMæ¥å£ï¼Œä½¿å®ƒå¢åŠ ä¸€ä¸ªä¸»åŠ¨ååº”çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„æ§åˆ¶æƒç»™ç”¨æˆ·ã€‚ //class DBManage::public: void close()db.close(); close = true; ... ~DBManage() if(!closed) try db.close(); catch(...) //è®°å½•å¤±è´¥æ—¥å¿—ï¼› ; private: DBConection db; bool closed; æ‰€ä»¥åˆ°æœ€åï¼Œç”¨æˆ·å’Œâ€œèµ„æºç±»â€ æˆä¸ºäº†åŒä¿é™©ï¼Œä»¥å°½æœ€å¤§åŠªåŠ›è§£å†³ææ„å‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸ã€‚ 9.ç»ä¸åœ¨æ„é€ å’Œææ„è¿‡ç¨‹ä¸­è°ƒç”¨virtual function Base class ä¸è¦åœ¨æ„é€ å’Œææ„è¿‡ç¨‹ä¸­è°ƒç”¨virtual functionï¼Œå› ä¸ºè¿™ç±»è°ƒç”¨ä¸èƒ½ä¸å­ç±»é‡Œé¢çš„å®ç°å®Œæˆå‘¼åº”ã€‚ è§£å†³æ–¹æ³•ï¼šä½ å¯ä»¥ç”¨ non-virtual å‡½æ•°ä¼ å‚çš„æ–¹æ³•ï¼Œä»£æ›¿çˆ¶ç±»å‡½æ•°æ ¹æ®ä¸åŒå­ç±»ä¿¡æ¯å®ç°ç±»ä¼¼åŠŸèƒ½çš„éœ€æ±‚ Base class è°ƒç”¨çš„æ‰€æœ‰å‡½æ•°å°½é‡æœä»ç»Ÿä¸€çº¦æŸã€‚å¦åˆ™ä¸ºäº†å°è£…æ€§ä½ ä¼šç‰ºç‰²å®‰å…¨æ€§ã€‚ï¼ˆé”™è¯¯æ›´åŠ éšè”½ï¼‰ åŸå› ï¼š å­ç±»å¯¹è±¡åˆ›å»ºåï¼Œé¦–å…ˆè¿›è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ã€‚åœ¨çˆ¶ç±»æˆåˆ†å®Œæˆåˆå§‹åŒ–ä¹‹å‰ï¼Œè¯¥å­ç±»çš„æ•°æ®çŠ¶æ€å§‹ç»ˆè§†ä¸ºçˆ¶ç±»ï¼ˆå³ä½¿æ˜¯dynamic_cast æˆ–å…¶ä»– runtime type information æ£€æµ‹ä¹Ÿæ˜¯ç›¸åŒç»“æœï¼‰ã€‚å½“ç„¶ï¼Œè¿™ä¸ªçŠ¶æ€ä¸‹ï¼Œå­ç±»æˆåˆ†å®Œå…¨æ²¡æœ‰åˆå§‹åŒ–ã€‚Derived class is not derived class until its construction finished. æ ¹æ®æ„é€ é¡ºåºï¼Œå³ä½¿è°ƒç”¨ virtual functionï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šé€‰æ‹©è°ƒç”¨å­ç±»å‡½æ•°ã€‚å› ä¸ºå­ç±»è¿˜æ²¡æœ‰å®Œæˆåˆå§‹åŒ–ã€‚ çº¯è™šå‡½æ•°çš„å­˜åœ¨ç”šè‡³ä¸èƒ½è®©ç¨‹åºå®Œæˆè¿æ¥ â€”â€” æ˜¯çš„ï¼Œå®ƒåœ¨çˆ¶ç±»ä¸­ã€‚ å¯¹äºä¸Šé¢çš„â€œå°è£…æ€§â€ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒç‚¹ï¼Œè¿™é‡Œç»™å‡ºé”™è¯¯ç¤ºèŒƒï¼š class testpublic: test() init(); virtual void vir_func() const = 0;private: void init() ... vir_func(); å¯¹äºè¿™ç§å¤šæ€éœ€æ±‚çš„è§£å†³æ–¹æ¡ˆçš„ç¤ºä¾‹ï¼ˆæ„é€ å‡½æ•°ä¼ å‚ï¼‰ï¼š class base public: explicit base(const string information)non_vir_func( information ); void non_vir_func(const string information) const ; //è´§çœŸä»·å®çš„ non-virtual()class deprived:public base public: deprived(const content):base( str(content) ); //åˆå§‹åŒ–åºåˆ—ï¼Œä¼ å‚ç»™çˆ¶ç±»æ„é€ å‡½æ•°ï¼ˆæœ‰å‚ï¼‰ private: static string str(content); //è¿™é‡Œåˆ©ç”¨äº†stringåˆå§‹åŒ–,ä¸è®©ä»–æŒ‡å‘ä¸ºåˆå§‹åŒ–çš„ç±»å†…å…¶ä»–æˆå‘˜ 10. è®© operator è¿”å›ä¸€ä¸ª å¼•ç”¨(reference to) *this èµ‹å€¼æ“ä½œç¬¦è¿”å›ä¸€ä¸ª reference to *thisã€‚ class Widget() public: ... Widget operator+=(const Widget rhs) ... return *this; Widget operator=(int rhs) ... return *this; è¿™æ˜¯ä¸ºäº†è®©è‡ªå®šä¹‰ç±»å‹èƒ½å®Œæˆè¿ç»­æ“ä½œã€‚ ç±»ä¼¼ x = y = z = 15 ; 11. åœ¨ operator ä¸­å¤„ç†â€œè‡ªæˆ‘èµ‹å€¼â€ ç¡®ä¿å½“å¯¹è±¡è‡ªæˆ‘èµ‹å€¼æ—¶ operator æœ‰æ­£å¸¸è¡Œä¸ºã€‚ ç¡®å®šä»»ä½•å‡½æ•°æ“ä½œå¤šä¸ªå¯¹è±¡ï¼Œä¸”å¤šä¸ªå¯¹è±¡ä¸ºåŒä¸€å¯¹è±¡æ—¶çš„æƒ…å†µï¼Œè¡Œä¸ºä»ç„¶æ­£ç¡®ã€‚ //é”™è¯¯ç¤ºèŒƒï¼šWidget Widgetï¼šï¼šoperator=(const Widget rhs) delete pb; pb = new Bitmap(*rhs.pb); return *this;//ç›¸åŒå¯¹è±¡ä¼šå¯¼è‡´pbæŒ‡å‘ä¸€ä¸ªå·²ç»åˆ é™¤çš„å¯¹è±¡ã€‚ è§£å†³æ€è·¯ï¼š identity test Widget Widgetï¼šï¼šoperator=(const Widget rhs) if(this == rhs) return *this; delete pb; pb = new Bitmap(*rhs.pb); return *this; è¿™æ ·åšçš„åå¤„å°±æ˜¯å³ä½¿åˆ¤æ–­é€šè¿‡ï¼Œpbåœ¨ new æ“ä½œæ—¶è¿˜ä¼šä¸å¯é¿å…çš„é‡åˆ°å¼‚å¸¸ï¼ˆå†…å­˜ä¸è¶³æˆ–bitmapçš„copyæ„é€ ï¼‰ã€‚ç„¶åpbæŒ‡å‘åŸåœ°å€ï¼Œå³å·²ç»åˆ é™¤çš„é‚£å—å†…å­˜ã€‚ exception safety Widget Widgetï¼šï¼šoperator=(const Widget rhs) Bitmap* pOrig = pb; pb = new Bitmap(*rhs.pb); delete pOrig; return *this; å› ä¸ºpOrigçš„å‰¯æœ¬å­˜åœ¨ï¼Œnewæ“ä½œå³ä½¿å¤±è´¥ï¼ŒpbæŒ‡å‘çš„åŸåœ°å€ä»ç„¶å­˜åœ¨ï¼Œä¹‹åæ­£å¸¸deleteã€‚ copy and swap æ–¹æ³•ä¸€ï¼š class Widget ...void swap(Widget rhs); //*this å’Œ å‚æ•° rhs äº¤æ¢;Widget Widget::operator=(const Widget rhs) Widget temp(rhs); //rhsæ•°æ®çš„å‰¯æœ¬ swap(temp); //å‰¯æœ¬ temp å’Œ *this äº¤æ¢ return *this; æ–¹æ³•äºŒï¼š Widget Widget::operator=(Widget rhs) //è¿™é‡Œæ˜¯å½¢å‚ï¼Œpass by value //ç›´æ¥ä¼ è¿‡æ¥å‰¯ä»¶ swap(temp); //å‰¯æœ¬ temp å’Œ *this äº¤æ¢ return *this; 12.å¤åˆ¶å¯¹è±¡æ—¶å‹¿å¿˜å…¶æ¯ä¸€ä¸ªæˆåˆ† Copy å‡½æ•° å¿…é¡»ä¿è¯å¤åˆ¶ æœ¬ class å†…æ‰€æœ‰æˆå‘˜å˜é‡ å’Œ æ‰€æœ‰ base class æˆåˆ†ã€‚ 1.å¤åˆ¶æ‰€æœ‰local member varaible 2.è°ƒç”¨æ‰€æœ‰ base class çš„ é€‚å½“ çš„ copy å‡½æ•° ä¸è¦å°è¯•ä»¥copyå‡½æ•°å®ç°å¦ä¸€ä¸ªcopyå‡½æ•°ã€‚ç”¨ç¬¬ä¸‰ä¸ªå‡½æ•°æ¥å®ç°ä¸¤è€…å…±åŒåŠŸèƒ½ã€‚ Copyå‡½æ•° å¿…é¡»ä¿è¯å¤åˆ¶ æœ¬ class å†…æ‰€æœ‰æˆå‘˜å˜é‡ å’Œ æ‰€æœ‰ base class æˆåˆ† å†™å¥½copyå‡½æ•°åï¼Œä¸€æ—¦class å†…çš„æˆå‘˜å˜é‡æœ‰æ”¹åŠ¨ï¼ˆå¢åŠ ï¼‰ï¼Œä½ çš„copyå‡½æ•°å°±è¦éšä¹‹ç›¸åº”çš„æ›´æ”¹ã€‚å¦åˆ™å°±ä¼šå¯¼è‡´ copy å‰¯æœ¬åˆå§‹åŒ–å·¥ä½œä¸å®Œæ•´ï¼Œäº§ç”Ÿä¸å¿…è¦éº»çƒ¦ã€‚ å½“ derived class ç»§æ‰¿çˆ¶ç±»åï¼Œcopy å‡½æ•°ä¸èƒ½åªè€ƒè™‘è‡ªå·±ã€‚å› ä¸ºéšåŒæ‹·è´çš„è¿˜æœ‰éšè—çš„ base class æˆåˆ†ã€‚è¿™ä¸€æˆåˆ†éœ€è¦ä½ åŒä¸»åŠ¨å®ç° derived classçš„ copy å‡½æ•°ä¸€æ ·ï¼Œå»ä¸»åŠ¨å®ç° base class çš„copyå‡½æ•°ã€‚ è¿™é‡Œç»™å‡ºä¸€ä¸ªç¤ºä¾‹ï¼š class derive::public base //ç»§æ‰¿çˆ¶ç±» public: derive(const derive rhs); derive operator= (const derive rhs); private: int value;derive::derive(const derive rhs):value(rhs.value) ... derivederive::operator=(const derive rhs) ... value = rhs.value; return *this; ä¸å¤Ÿå…¨é¢ã€‚åº”å½“å¦‚ä¸‹ï¼š derive::derive(const derive rhs):value(rhs.value),base(rhs) //base æˆåˆ† ... derive::operator=(const derive rhs) ... base::operator=(rhs); //base æˆåˆ† value = rhs.value; return *this; ä¸è¦å°è¯•ä»¥copingå‡½æ•°å®ç°å¦ä¸€ä¸ªcopingå‡½æ•° ä»copy assignment è°ƒç”¨ copy constructor ä¸åˆç†ï¼šä½ åœ¨æ„é€ ä¸€ä¸ªå·²ç»å­˜åœ¨å¹¶å®Œæˆåˆå§‹åŒ–å·¥ä½œçš„å¯¹è±¡ã€‚åŒæ—¶è¿™ä¼šå½±å“å¯¹è±¡çš„ç»“æ„ã€‚ ä»copy constructor è°ƒç”¨ copy assignment ä¸åˆç†ï¼šå¯¹ä¸€ä¸ªè¿˜æ²¡æœ‰å®Œæˆæ„é€ çš„å¯¹è±¡èµ‹å€¼ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ æ¯«æ— ç–‘é—®ï¼Œä»¥ä¸Šä¸¤ä¸ªé€‰æ‹©æ˜¯ä¸ºäº†èŠ‚çœä»£ç ã€‚è¿™ä¸€ç‚¹å¯ç”¨ç¬¬ä¸‰æ–¹å‡½æ•°æ¥å®ç°ï¼Œè®©ä¸¤è€…å…±åŒè°ƒç”¨è¯¥å‡½æ•°ã€‚ ç¬¬ä¸‰ç« ï¼šResource Management13.ç”¨å¯¹è±¡ç®¡ç†èµ„æº ç§‰æ‰¿â€œRAIIâ€ç†å¿µï¼Œåˆ©ç”¨å¯¹è±¡åˆå§‹åŒ–èµ„æºã€‚ RALLï¼šResource Acquisition is Initialization èµ„æºè·å–æ—¶ï¼Œå³æ˜¯åˆå§‹åŒ–æ—¶ã€‚ å¯¹è±¡çš„æ„é€ å‡½æ•°èƒ½è·å¾—èµ„æºï¼Œææ„å‡½æ•°èƒ½é‡Šæ”¾èµ„æºã€‚ RALL classes æœ‰ä¸¤ä¸ªç»å…¸ç±»ï¼šauto_ptr å’Œ tr1:: shared_ptr ã€‚ å‰è€…çš„å¤åˆ¶åŠ¨ä½œä¼šä½¿è¢«å¤åˆ¶å¯¹è±¡æŒ‡å‘nullï¼Œåè€… copy èƒ½åŒæ—¶æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ åœºæ™¯ï¼šä½ å¸Œæœ›åœ¨æŸä¸ªå‡½æ•°ä½œç”¨åŸŸå†…è·å¾—èµ„æºï¼ˆæ¯”å¦‚åˆ©ç”¨factory function)ï¼Œå¹¶åœ¨èµ„æºä½¿ç”¨å®Œæˆåçš„æŸä¸ªä½ç½®deleteæ‰å®ƒã€‚ä¸€æ—¦ç”³è¯·å’Œåˆ é™¤èµ„æºçš„ä¸­é—´ç¯èŠ‚å‡ºç°é—®é¢˜ï¼Œåˆ é™¤æ“ä½œä¼šè¢«å®Œå…¨æ— è§†ï¼Œè€Œé€ æˆå†…å­˜æ³„æ¼ã€‚ è§£å†³ï¼šä¸ºç¡®ä¿ç”³è¯·çš„èµ„æºèƒ½å¤Ÿè¢«åŠæ—¶é‡Šæ”¾ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯å¾ªã€‚ åœ¨å¯¹è±¡çš„ææ„å‡½æ•°è‡ªåŠ¨è°ƒç”¨æœºåˆ¶ã€‚ è¿™é‡Œå¯ä»¥å‚è€ƒä¸‹é¢çš„ Mutex å¯¹è±¡ åˆ©ç”¨ä¸¤ä¸ª pointer-like (ç±»æŒ‡é’ˆ) å¯¹è±¡,ä½ ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºæ™ºèƒ½æŒ‡é’ˆã€‚ ä»¥ä¸‹ï¼Œåˆ©ç”¨ investment ç±»æ¥ä¸¾ä¸ªä¾‹å­ã€‚ class Investment{...} auto_ptr : auto_ptrInvestment pInv(createInv()); //createInv()å³ Invç±»çš„å·¥å‚å‡½æ•°ï¼Œè¿”å›èµ„æº å¤šä¸ª auto_ptr æŒ‡å‘åŒä¸€å¯¹è±¡ä¼šå¯¼è‡´é‡å¤é‡Šæ”¾ï¼Œä»è€Œäº§ç”Ÿæ„æ–™ä¹‹å¤–çš„é”™è¯¯ã€‚ auto_ptr è¿™å®¶ä¼™è¿‡äºå¿ è¯šï¼Œä¸€æ—¦ auto_ptr é—´å‘ç”Ÿ copy æ“ä½œï¼Œ copy ç±»æŒ‡é’ˆæŒ‡å‘åŸå†…å®¹ï¼Œè¢« copy çš„åŸæŒ‡é’ˆè¢«è®¾ä¸º NULL ã€‚ auto_ptrInvestment pInv2(pInv1); //p2 exist , p1 nullpInv1 = pInv2; // p1 exist , p2 null shared_ptr : TR1 ä¸­çš„ä¸€ä¸ªç±»æŒ‡é’ˆï¼Œå±äºRCSPå‹ã€‚ RCSP: reference-counting smart pointer RCSP èƒ½æä¾› garbage collection ï¼ˆå›æ”¶ï¼‰ï¼Œ ä½†å› ä¸ºå¤ªå•çº¯ï¼Œä¸èƒ½æ‰“ç ´ç¯çŠ¶å¼•ç”¨ï¼šä¸¤ä¸ªæ²¡æœ‰åˆå§‹åŒ–çš„RCSPå½¼æ­¤äº’ç›¸æŒ‡å‘ï¼Œä»–ä»¬éƒ½ä»¥ä¸ºè‡ªå·±å¿ƒæœ‰æ‰€å±ï¼ˆå¤„äºè¢«ä½¿ç”¨çŠ¶æ€ï¼‰ã€‚ å®é™…ä¸Šæ²¡æœ‰ä¸“é—¨é’ˆå¯¹ array ç±»å‹çš„ èµ„æºç®¡ç†ç±»æŒ‡é’ˆã€‚ ä½†ä½ å¯ä»¥è€ƒè™‘Boosté‡Œçš„scoped_array , shared_array ï¼›ä½†æˆ‘æ›´æ¨èè€ƒè™‘ STLå®¹å™¨é‡Œçš„ vectorã€‚ 14.åœ¨èµ„æºç®¡ç†ç±»ä¸­å°å¿ƒ coping è¡Œä¸º å¯¹äºä¸Šä¸€æ¡æåˆ°è¿‡çš„èµ„æºç®¡ç†ç±»ï¼ˆRAII classï¼‰ï¼Œcopy å…¶å¯¹è±¡æ—¶ï¼Œä¸€å®šè¦åŒæ—¶å¤åˆ¶å®ƒæ‰€ç®¡ç†çš„èµ„æºã€‚ èµ„æºçš„ copy è¡Œä¸ºï¼Œå†³å®šRAIIå¯¹è±¡çš„ copy è¡Œä¸ºã€‚ ä¸¤ä¸ª RAII class copy è¡Œä¸ºï¼š1. æ‹’ç»copy 2. reference counting åœºæ™¯ï¼š RAIIå¯¹è±¡ï¼š //è¿™é‡Œæœ‰ä¸€ä¸ªç±»å‹ä¸º Mutex çš„äº’æ–¥å™¨å¯¹è±¡void lock(Mutex* pm); //é”å®špmæŒ‡å‘çš„äº’æ–¥å™¨void unlock(Mutex* pm); //è§£é”class lock public: explicit lock(Mutex* pm):mutexPtr(pm) lock(mutexPtr); //é”å®šï¼Œè·å¾—èµ„æº ~lock() unlock (mutexPtr); //ææ„è‡ªåŠ¨é‡Šæ”¾ è§£é”private: Mutex *mutexPtr; ç”¨æˆ·ç«¯ï¼š Mutex m;// user block lock ml(m); //æ­£å¸¸é”å®š ...lock ml2(ml); //è¿™ç§copyè¦æ€æ ·å¤„ç†ï¼Ÿ å¤„ç†ï¼š ç¦æ­¢copy ï¼šç»§æ‰¿Uncopyable classç­‰æ–¹æ³•ã€‚ [å¯å‚è€ƒæ¡æ¬¾6](## æ˜ç¡®æ‹’ç»ä¸æƒ³ä½¿ç”¨ï¼Œè€Œç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆçš„å‡½æ•°) reference-countï¼š æé«˜è¯¥èµ„æºçš„â€œè¢«å¼•ç”¨æ•°â€ã€‚ å°† Mutex* æ”¹ä¸º shared_ptrMutex å®ç°ã€‚ è¿™é‡Œæ³¨æ„ï¼šshared_ptr åœ¨å¼•ç”¨æ¬¡æ•°ä¸º0æ—¶ï¼Œé»˜è®¤deleteæŒ‡å‘çš„ç›®æ ‡ã€‚ è€Œè¿™é‡Œæˆ‘ä»¬çš„é‡Šæ”¾æ“ä½œæ˜¯ unlock è€Œé deleteã€‚ è¿˜å¥½ shared_ptr å…è®¸æŒ‡å®šåˆ é™¤å™¨(deleter),åœ¨å¼•ç”¨æ¬¡æ•°ä¸º0æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå®¶ä¼™ã€‚ deleter æ˜¯ä¸€ä¸ªå‡½æ•°å‡½æ•°å¯¹è±¡ï¼Œåœ¨è¯¥ç±»æŒ‡é’ˆé‡Œæ˜¯ç¬¬äºŒå‚æ•°ï¼ˆå¯æœ‰å¯æ— ï¼‰ class lock public: explicit lock(Mutex* pm):mutexPtr(pm,unlock) //æ³¨æ„ç¬¬äºŒå‚æ•° lock(mutexPtr.get()); //.get()è¿”å›æ™ºèƒ½æŒ‡é’ˆå†…éƒ¨çš„åŸå§‹æŒ‡é’ˆå‰¯ä»¶ // shared_ptr çš„è‡ªåŠ¨ææ„ç‰¹æ€§å¸®æˆ‘ä»¬çœç•¥äº†ææ„å‡½æ•°ã€‚æ‰€ä»¥è®©ç¼–è¯‘å™¨ç”Ÿæˆå§ã€‚private: Mutex std::tr1::shared_ptrMutex mutexPtr// Not *mutexPtr; deep copingï¼šæ·±åº¦æ‹·è´ã€‚copy æ—¶ ï¼Œé¢å¯¹è¦ copy çš„æŒ‡é’ˆæ—¶ï¼Œç”Ÿæˆä¸€ä¸ªæŒ‡å‘å‰¯ä»¶çš„æŒ‡é’ˆã€‚ è½¬ç§»åº•éƒ¨èµ„æºæ‹¥æœ‰æƒï¼šauto_ptr é‚£æ ·ï¼Œæ‹¥æœ‰æƒåªå­˜åœ¨äºä¸€ä¸ªpträ¸Šã€‚ 15.åœ¨RAIIç±»ä¸­æä¾›å¯¹åŸå§‹èµ„æºçš„è®¿é—®æ¥å£ RAIIåº”è¯¥æä¾›ä¸€ä¸ªå–å¾—å®ƒæ‰€ç®¡ç†çš„åŸå§‹èµ„æºçš„æ–¹æ³•ï¼Œæ¥æ»¡è¶³APIè®¿é—® raw resources çš„è¦æ±‚ã€‚ å¯¹åŸå§‹èµ„æºçš„è®¿é—®æ–¹æ³•æœ‰æ˜¾å¼è½¬æ¢å’Œéšå¼è½¬æ¢ä¸¤ç§æ–¹æ³•ã€‚æ˜¾å¼è½¬æ¢æ›´å®‰å…¨ï¼Œéšå¼è½¬æ¢æ›´æ–¹ä¾¿ã€‚ è¿™é‡Œåº”ç”¨ä¸Šé¢çš„ Investment class ä¾‹å­ å¯¹äºint daysHeld(const Investment* pi)è¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼šå®ƒçš„å‚æ•°æ˜¯åŸå§‹ç±»å‹ï¼Œå¯ä½ çš„å¯¹åº”èµ„æºå´è¢«RAIIç±»å°è£…èµ·æ¥ï¼Œå¦‚ shared_ptr ,å®ƒå°†æ— æ³•ä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°ã€‚ è¿™æ—¶æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹æ³•å»å–å¾— RAII ç±»ç®¡ç†çš„åŸå§‹èµ„æºã€‚ æ–¹æ³•ï¼š æ˜¾å¼ï¼š shared_ptr å’Œ auto_ptr éƒ½æœ‰ä¸€ä¸ª get() æˆå‘˜å‡½æ•°ï¼Œæ¥æ‰§è¡Œæ˜¾å¼è½¬æ¢ã€‚ä»–ä»¬èƒ½è¿”å›æŒ‡å‘çš„åŸå§‹èµ„æºã€‚ å®é™…ä¸Šï¼Œæ™ºèƒ½æŒ‡é’ˆéƒ½é‡è½½äº†æŒ‡é’ˆå–å€¼æ“ä½œç¬¦ - å’Œ * ï¼› ä»–ä»¬ä¼šéšå¼è½¬æ¢åˆ°åº•éƒ¨åŸå§‹æŒ‡é’ˆï¼Œé€šè¿‡è¯¥æŒ‡é’ˆåŠç›¸åº”æ“ä½œç¬¦å»è®¿é—®åŸå§‹ç±»ä¸­çš„æˆå‘˜å˜é‡æˆå‘˜å‡½æ•°ã€‚ class Fontpublic: FontHandle get() const return f;void changeFontsize(FontHandle f);Font f(getFont()); //factory funcchangeFontsize(f.get()); //good æ€»æ˜¯ç”¨æ˜¾å¼è½¬æ¢æ¥è®¿é—®ï¼Œä¸å…éº»çƒ¦ï¼Œä½†å®‰å…¨æ˜ç™½ã€‚ éšå¼ï¼šåˆ©ç”¨éšå¼ç±»å‹è½¬æ¢è¿ç®—ç¬¦ class: operator type () {return type-static ;} class Fontpublic: ... operator FontHandle() const return f;changeFontSize(f,newFontSize); //nice éšå¼è½¬æ¢ä¹Ÿä¼šå‘ç”Ÿåœ¨ä½ å¯Ÿè§‰ä¸åˆ°è€Œä¸å¸Œæœ›å‘ç”Ÿçš„åœ°æ–¹ã€‚ FontHandle f2 = f1; //æœ¬æƒ³ copy Font å¯¹è±¡çš„ f1é”€æ¯åï¼Œf2ä¼šæ²¦å…¥ dangle çŠ¶æ€ï¼Œå¤„äºæœªè¢«åˆå§‹åŒ–çš„æƒ…å†µã€‚ å®é™…ä¸Šï¼ŒRAII class æœ¬èº«çš„ç›®çš„ä¸æ˜¯ä¸ºå°è£…æ€§æœåŠ¡ï¼Œå®ƒæ˜¯ä¸ºäº†ç‰¹æ®Šè¡Œä¸ºï¼šèµ„æºé‡Šæ”¾è€ŒæœåŠ¡çš„ã€‚ tr1::shared_ptr ç»“åˆååˆ†æ¾æ•£çš„åº•å±‚èµ„æºå°è£…ï¼Œè·å¾—äº†çœŸæ­£çš„å°è£…æ•ˆæœâ€”â€”ä½ å¾ˆå®¹æ˜“æåˆ°è¯¥ class çš„åŸå§‹æŒ‡é’ˆï¼ŒåŒæ—¶å…¶ä»–çš„ reference-count å…ƒç´ åˆ™è¢«å°è£…çš„å¾ˆä¸¥å®ã€‚ è¿™æ˜¯å¾ˆç†æƒ³çš„ class ã€‚ 16.æˆå¯¹ä½¿ç”¨newå’Œdeleteæ—¶ï¼Œè¦é‡‡å–ç›¸åŒå½¢å¼ newè¡¨è¾¾å¼é‡Œä½¿ç”¨[ ],ç›¸åº”çš„ delete ä¹Ÿè¦ç”¨[ ]; åŒç†ï¼Œnewè¡¨è¾¾å¼é‡Œæ²¡æœ‰[ ], å°±ä¸è¦ç»™å¯¹åº” delete ç”»è›‡æ·»è¶³åŠ [ ]ã€‚ è¿™é‡Œä¸è®¨è®ºnewå’Œdeleteçš„åº•å±‚å½¢å¼ã€‚ newçš„å¯¹è±¡ï¼Œæ˜¯å•ä¸€å¯¹è±¡è¿˜æ˜¯å¯¹è±¡æ•°ç»„ï¼Ÿè¿™ä¸¤ä¸ªæ•°æ®ç±»å‹çš„å†…å­˜å¸ƒå±€æ˜¯ä¸ä¸€æ ·çš„ã€‚deleteå’Œdelete[ ]çš„æ–¹å¼ä¹Ÿæ˜¯ä¸åŒçš„ã€‚ 17.ä»¥ç‹¬ç«‹è¯­å¥å°†newedå¯¹è±¡ç½®å…¥æ™ºèƒ½æŒ‡é’ˆ ä»¥ç‹¬ç«‹è¯­å¥å°†newedå¯¹è±¡ç½®å…¥æ™ºèƒ½æŒ‡é’ˆ ä¸ç‹¬ç«‹çš„è¯ï¼Œå½“å‡½æ•°åŒæ—¶å­˜åœ¨å¤šä¸ªå®å‚æ—¶ï¼ŒC++çš„å®å‚æ‰§è¡Œé¡ºåºæ˜¯éšæœºçš„ã€‚ä¸€æ—¦newå‡ºçš„å¯¹è±¡å’Œåˆå§‹åŒ–æ™ºèƒ½æŒ‡é’ˆè¿™ä¸¤ä¸ªæ“ä½œä¸­é—´å‡ºç°å…¶ä»–å‚æ•°è°ƒç”¨ï¼Œå¹¶å‘ç”Ÿå¼‚å¸¸ï¼Œå°±ä¼šå¯¼è‡´ newed å¯¹è±¡è‡ªå·±ç•™åœ¨åŸåœ°ä¸çŸ¥æ‰€æªï¼Œå†…å­˜æ³„æ¼ã€‚ void processWidget(shared_ptrWidget pw, int priority);processWidget(std::tr1::shared_ptrWidget(new Widget),priority()); ä¸Šè¿°å‡½æ•°è°ƒç”¨ä¸­ï¼Œåˆ†ä¸‰ä¸ªè¿‡ç¨‹ï¼š è°ƒç”¨priority æ‰§è¡Œ new Widget è°ƒç”¨shared_ptr æ„é€ å‡½æ•° ä¸€æ—¦ è°ƒç”¨priority æ“ä½œæ’åœ¨äº†new Widget å’Œ è°ƒç”¨shared_ptræ„é€ å‡½æ•° ä¸­é—´å¹¶å‘ç”Ÿå¼‚å¸¸ä¸­æ–­ï¼Œå°±æ²¡æœ‰å¥½æœå­åƒäº†ã€‚ è§£å†³ï¼šåˆ†ç¦»è¯­å¥ï¼ŒæŠŠæ™ºèƒ½æŒ‡é’ˆå’Œå…¶ä»–å‚æ•°ç‹¬ç«‹ã€‚ shared_ptrWidget pw(new Widget);processWidget(pw, int priority()); ç¬¬å››ç« ï¼šDesigns and Declaration18.è®©æ¥å£ä¸æ˜“è¢«è¯¯ç”¨ï¼Œæ›´å®¹æ˜“è¢«æ­£ç¡®ä½¿ç”¨ã€‚ ä¸€ä¸ªå¥½çš„æ¥å£ï¼šä½¿ç”¨æ—¶ç®€å•æ˜“ç”¨ï¼Œéš¾ä»¥è¯¯ç”¨ã€‚ ç®€å•æ˜“ç”¨ï¼šæ¥å£çš„ä¸€è‡´æ€§ã€å†…ç½®ç±»å‹çš„è¡Œä¸ºå…¼å®¹ã€‚ éš¾ä»¥è¯¯ç”¨ï¼šå»ºç«‹æ–°ç±»å‹ã€é™åˆ¶ç±»å‹æ“ä½œã€æŸç¼šå¯¹è±¡å€¼ã€ä¸è¦è®©å®¢æˆ·æ¶‰è¶³èµ„æºç®¡ç† tr1::shared_ptr æ”¯æŒå®šåˆ¶å‹åˆ é™¤å™¨( custom deleter )ã€‚å¯é˜²èŒƒ DDL é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿèƒ½è‡ªåŠ¨è§£é™¤äº’æ–¥é”ï¼ˆ[æ¡æ¬¾14](## 14.åœ¨èµ„æºç®¡ç†ç±»ä¸­å°å¿ƒ coping è¡Œä¸ºï¼‰)ã€‚ DDLé—®é¢˜ï¼šå³ cross-DLL problem ã€‚object åœ¨ä¸€ä¸ªDDLä¸­ (Dynamic link library) ä¸­è¢« new åˆ›å»ºï¼Œå´åœ¨å¦ä¸€ä¸ª DLL å†…è¢« delete é”€æ¯ã€‚ shared_ptr èƒ½è¿½è¸ªè®°å½•åº”è¯¥è°ƒç”¨çš„ DLL çš„ deleteã€‚ é™¤éæœ‰æ›´å¥½çš„å®ç°ï¼Œå¦åˆ™å°±è¦ä»¤ä½ çš„ types è¡Œä¸ºå’Œå†…ç½® types ä¸€è‡´ã€‚ å‚è€ƒ STL çš„è®¾è®¡ï¼ˆåƒç»Ÿä¸€çš„ sizeï¼ˆï¼‰ï¼‰ï¼› å¯ä»¥æ”¾å¿ƒçš„æ˜¯ï¼Œç”¨æˆ·æ€»ä¼šæœ‰å„ç§å¥‡è‘©æ“ä½œï¼Œä½ èƒ½åšçš„å°±æ˜¯å·§å¦™çš„è§£å†³ã€é¿å…é¢„æƒ³ä¸­çš„é—®é¢˜ï¼Œè®©æ¥å£è¾¾æˆä»¥ä¸Šå…«å­—æ•ˆæœã€‚ å¦‚æœä½ è¦æ±‚å®¢æˆ·å¿…é¡»å»åšæŸä»¶äº‹ï¼Œå°±æ˜¯åœ¨äº²æ‰‹ç»™è‡ªå·±åœ¨åŸ‹å‘â€”â€”å®¢æˆ·å¾ˆå¯èƒ½å¿˜è®°è¿™ä»¶äº‹æƒ…ã€‚ ä»¥ä¸‹ç»™å‡ºä¸¤ä¸ªä¾‹å­ã€‚ å¯¹äºä¸€ä¸ª Date class ï¼Œé»˜è®¤æ„é€ å‚æ•°å¯èƒ½æ˜¯ Date(int month , int day , int year); ä½†ç”¨æˆ·ä¼šæŠŠæ—¥æœŸé¡ºåºæé”™ï¼Œä¼šåœ¨å¡«å†™æ•°æ®æ—¶è¾“å…¥è¿™ä¸ªæ˜Ÿçƒä¸Šæ ¹æœ¬ä¸å­˜åœ¨çš„æ—¥æœŸã€‚ è®¸å¤šé”™è¯¯å¯ä»¥ç”¨ä¸€ä¸ª new class è§£å†³ã€‚å¯ä»¥ç§°ä¹‹ä¸ºä¸€ä¸ª type system ã€‚ è¿™é‡Œå¯ä»¥ç”¨ wrapper types å®ŒæˆåŒºåˆ†ã€‚ class Day , class Month , class Year ,ä¸‰ä¸ªç‰¹å®šç±»å‹æ¥é…åˆ Date çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚ åœ¨è¿™ä¸ªç±»é‡Œï¼Œå¯ä»¥å®šä¹‰ä¸åŒå‡½æ•°æ¥é™å®šèŒƒå›´ï¼š class Monthpublic: static Month Jan() return Month(1); ...//è¿™é‡Œç”¨äº†ä¸€ä¸ªæŠ€å·§ï¼šä»¥å‡½æ•°ä»£æ›¿å¯¹è±¡ï¼Œæ¥é¿å…äº† non-local static å¯¹è±¡åˆå§‹åŒ–æ¬¡åºé—®é¢˜ï¼ˆè¯¦è§æ¡æ¬¾4ï¼‰ã€‚ class è®¾è®¡è€…å¸Œæœ›ç”¨æˆ·é¢å¯¹ä» factory function å–å¾— Investment* æŒ‡é’ˆæ—¶ï¼Œç”¨ç‰¹å®šçš„ â€œclass-deleteâ€ (æ¯”å¦‚ getRidOfInvestment )å»ä»£æ›¿æ™®é€šçš„ delete ã€‚ è¿™æ—¶ï¼Œç”¨æˆ· delete Investment çš„éšæ‚£å°±äº§ç”Ÿäº†ã€‚ é’ˆå¯¹è¿™ä¸ªéšæ‚£ï¼Œä½ å¯ä»¥åˆ©ç”¨è¿”å›ä¸€ä¸ªè‡ªå¸¦ç»‘å®šåˆ é™¤å™¨çš„ tr1::shared_ptr æ¥è§£å†³ã€‚ æŠŠå®ƒåŠ å…¥åˆ°create Investment()é‡Œï¼š std::tr1::shared_ptrInvestment createInvestment() //è¿™ä¸ªå¼ºè½¬å¾ˆæœ‰å¿…è¦ï¼Œè®©ç¼–è¯‘å™¨é€šè¿‡ std::tr1::shared_ptrInvestment retVal(static_castInvestment*(0), getRidofInvestment); retVal = ... ; //åˆ°è¿™é‡Œå†å®‰æ’æŒ‡é’ˆ return retVal; 19. è®¾è®¡ class çŠ¹å¦‚è®¾è®¡ type class è®¾è®¡å°±æ˜¯ type è®¾è®¡ã€‚å®šä¹‰ new type å‰ï¼Œè€ƒè™‘ä»¥ä¸‹é—®é¢˜ã€‚ ç»´æŠ¤ä½ çš„ personal type , æ„å‘³ç€ Overloading (é‡è½½) function instruction character (æ“ä½œç¬¦) , æ§åˆ¶å†…å­˜çš„åˆ†é…å’Œå½’è¿˜ã€å®šä¹‰å¯¹è±¡çš„åˆå§‹åŒ–ç»ˆç»“ ç­‰ç­‰ï¼Œéƒ½éœ€è¦åœ¨ä½ è®¾è®¡è¯­è¨€ç±»å‹æ—¶æ¥è€ƒè™‘ã€‚ å¯¹äºä¸€ä¸ªä¸¥è°¨çš„ class type ,ä¸‹é¢æ˜¯ä½ å¿…é¡»è¦è€ƒè™‘çš„é—®é¢˜ï¼š æ–° type çš„å¯¹è±¡å¦‚ä½•åˆ›å»ºä¸é”€æ¯ï¼Ÿ è€ƒè™‘å„ç§æ„é€ å‡½æ•°å’Œææ„å‡½æ•° ã€å†…å­˜åˆ†é…å’Œé‡Šæ”¾å‡½æ•°ï¼ˆ operator new , operator new[ ] )çš„è®¾è®¡ã€‚ å¯¹è±¡çš„åˆå§‹åŒ–å’Œå¯¹è±¡çš„èµ‹å€¼ çš„å·®åˆ«? è¿™å†³å®šäº† type çš„æ„é€ å‡½æ•° constructor å’Œèµ‹å€¼æ“ä½œç¬¦ assign çš„ä¸åŒè¡Œä¸ºã€‚ type å¯¹è±¡è¢« pass by value çš„å®ç°ï¼Ÿ è€ƒè™‘ä¸‹copy constructor function ã€‚ type çš„å€¼åŸŸï¼Ÿ å€¼åŸŸæ„å‘³ç€çº¦æŸæ¡ä»¶ï¼›çº¦æŸæ¡ä»¶æ„å‘³ç€è¦åœ¨ä½ çš„æˆå‘˜å‡½æ•°ã€èµ‹å€¼å’Œæ„é€ å‡½æ•°ä¸­éœ€è¦åšç›¸åº”çš„èŒƒå›´æ£€æŸ¥ã€‚ è€Œä¸”ä¸è¦å¿˜è®°ç›¸åº”çš„é”™è¯¯æ£€æŸ¥å·¥ä½œ â€”â€” exception specifications ã€‚ type éœ€è¦é…åˆæŸä¸ª inheritance graph å—ï¼Ÿ type ç»§æ‰¿äº† existed classï¼Œé‚£è¿™ä¸ª type å°±åŠ¿å¿…ä¼šå—åˆ° base class çš„çº¦æŸï¼ˆå°¤å…¶æ˜¯virtual non-virtualï¼‰ï¼›å¦‚æœä½ å¸Œæœ›å…¶ä»– class æ¥ç»§æ‰¿è¯¥ type ï¼Œé‚£è¯·ä½ å¥½å¥½è€ƒè™‘è¯¥ type çš„ inconstructor function is is not VIRTUAL ã€‚ ä½ çš„æ–°ç±»å‹å…è®¸æ€æ ·çš„ç±»å‹è½¬æ¢ï¼Ÿ å¦‚æœå¸Œæœ› type æœ‰éšå¼è½¬æ¢åŠŸèƒ½ï¼Œå°±å¾—å†™å‡ºä¸“é—¨è´Ÿè´£è½¬æ¢çš„å‡½æ•°ï¼ˆä¸èƒ½æ˜¯ type conversion operators non-exlicit-one-argument æ„é€ å‡½æ•°ï¼‰ã€‚ å¦‚æœä¸å¸Œæœ›ï¼Œå°†æ„é€ å‡½æ•°å£°æ˜ä¸ºexplicitæ¥é¿å…éšå¼ç±»å‹è½¬æ¢å§ã€‚ å“ªäº›æ“ä½œç¬¦å’Œå‡½æ•°èƒ½åˆç†ç”¨äº type ï¼Ÿ é—®é¢˜çš„ç­”æ¡ˆå†³å®šäº†ä½ å°†ä¸ºä½ çš„ class å£°æ˜çš„å‡½æ•°ï¼Œå’Œå‡½æ•°æ˜¯å¦ä¸º member å‹ã€‚ éœ€ä¸éœ€è¦é‚£äº›ç¼–è¯‘å™¨ç”Ÿæˆçš„é»˜è®¤å‡½æ•°ï¼Ÿ éœ€è¦çš„è¯ â†’ å‚è€ƒï¼šItem 6ï¼šç¦ç”¨é‚£äº›ä¸éœ€è¦çš„é»˜è®¤æ–¹æ³• è°å¯ä»¥è®¿é—® type çš„æˆå‘˜ï¼Ÿ è¯´ç™½äº†å°±æ˜¯æƒé™é—®é¢˜ï¼š1.ç»§æ‰¿å…³ç³» 2.å‹å…ƒ friends function 3. ä¸€äº›åµŒå¥—å…³ç³» type çš„ undeclared interface ï¼ˆæ½œåœ¨æ¥å£ï¼‰æœ‰å“ªäº›ï¼Ÿ è¿™ä¼šå…³ç³»åˆ° å¼‚å¸¸å®‰å…¨æ€§ã€æ•ˆç‡ã€èµ„æºä½¿ç”¨(å¦‚åŠ¨æ€å†…å­˜å¤šä»»åŠ¡é”å®š)ç­‰ã€‚ è¿™äº›æ½œåœ¨æ¥å£å°†ä¼šå½±å“ä½ çš„å®ç°ï¼Œæœ‰ä¸€äº›çº¦æŸæ€§çš„è¦æ±‚ã€‚ ä½ çš„ç±»å‹æœ‰å¤šä¹ˆé€šç”¨å’Œæ™®é€‚ï¼Ÿ å¦‚æœè¿™ä¸ª type å€¾å‘äºä½œä¸ºä¸€å¤§æ‰¹ type çš„åœ°åŸºï¼Œç¥–å®—çº§åœ°ä½ï¼Œé‚£å°±åˆ«å®šä¹‰æˆ class äº†ï¼Œå®šä¹‰æˆä¸€ä¸ª class template ä¸é¦™ä¹ˆã€‚ 20.å¤šç”¨ const æ›¿æ¢ å€¼ä¼ é€’ ï¼ˆpass by : reference-to-const replace valueï¼‰ å¤šæ•°æƒ…å†µä¸‹ç”¨ const æ›¿æ¢ pass by value æé«˜æ•ˆç‡ï¼ŒåŒæ—¶é¿å… slicing problemã€‚ å°‘æ•°æƒ…å†µæ˜¯å†…ç½®ç±»å‹ã€STLçš„è¿­ä»£å™¨ã€å‡½æ•°å¯¹è±¡ã€‚ å¯¹äºè¿™äº›æ•°æ®ç±»å‹ï¼Œæ•ˆç‡ä¸Šåè€Œæ˜¯pass by value æ›´èƒœä¸€ç­¹ã€‚ æ›¿æ¢åŸå› ï¼š å¯¹ä¸€ä¸ªä½“é‡å·¨å¤§çš„ class æ¥è¯´ ï¼Œpass by value æ„å‘³ç€ç”Ÿæˆä¸€ä¸ªå‰¯æœ¬ï¼Œæˆæœ¬ä¸ºè¯¥ class çš„æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ï¼Œæˆå‘˜å˜é‡ï¼Œç»§æ‰¿çš„çˆ¶ç±»æ•°æ®ï¼Œç”šè‡³é‡åˆ°åµŒå¥—çš„ç±»ï¼ˆå“ªæ€•æ˜¯ string ï¼‰è¿˜ä¼šæˆå€å¤åˆ¶ã€‚è¿™ä¸ªå¼€æ”¯è¿œä¸åŠä¸€ä¸ª const æ¥çš„ç—›å¿«ã€‚ pass by reference èƒ½å¤Ÿé¿å… slicing problemã€‚å½“ä¸€ä¸ª derived ç±»ä»¥å€¼ä¼ é€’æ–¹å¼åˆ°è¾¾ä¸€ä¸ª base class å‚æ•°ä¸Šï¼Œå‚æ•°å‰¯æœ¬åªä¼šè°ƒç”¨ base class :: constructor ã€‚derived ç±»å¯¹è±¡ä¼šè¢«åˆ‡å‰²æ‰ï¼Œæ— å½±æ— è¸ªã€‚ å°‘æ•°æƒ…å†µï¼ˆ ï¼Ÿ)ï¼š C++ç¼–è¯‘å™¨çš„åº•å±‚ä¸­ï¼Œreferences å¾€å¾€ä»¥æŒ‡é’ˆå®ç°å‡ºæ¥ã€‚è¿™æ„å‘³ç€ pass by reference çœŸæ­£ä¼ é€’çš„æ˜¯æŒ‡é’ˆã€‚ å†…ç½®ç±»å‹ï¼šå¦‚æœæœ‰ä¸ªå¯¹è±¡æ˜¯å†…ç½®ç±»å‹ï¼Œå€¼ä¼ é€’çš„å†…å­˜å ç”¨ä¸ä¸€å®šæ¯”ä¸€ä¸ªæŒ‡é’ˆå·®ï¼ˆç”šè‡³æ•ˆç‡å¯èƒ½æ›´é«˜ï¼‰ã€‚ STLï¼šå¯¹è±¡å°ä¸æ„å‘³ç€ copy constructor å°±å¾ˆè½»æ¾ã€‚å¤šæ•° STL å®¹å™¨çš„ä½“é‡åªæ¯”æŒ‡é’ˆå¤§ä¸€ç‚¹å„¿ï¼Œä½†å¤åˆ¶ STL è¿™ç§ä¸œè¥¿ï¼Œè¿˜è¦æ‰¿æ‹…â€œå¤åˆ¶é‚£äº›æŒ‡é’ˆæŒ‡å‘çš„æ¯ä¸€æ ·ä¸œè¥¿â€çš„è´£ä»»ï¼Œç›¸å¯¹æŒ‡é’ˆæ¥è¯´è¿˜æ˜¯æ¯”è¾ƒå†—ä½™çš„ã€‚ å¯¹äºç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼šå³ä½¿â€œå†…ç½®ç±»å‹â€å’Œâ€œè‡ªå®šä¹‰ç±»å‹â€çš„ underlying representation (åº•å±‚è¡¨è¿°) å®Œå…¨ç›¸åŒï¼ŒæŸäº›ç¼–è¯‘å™¨è¿˜æ˜¯ä¼šå¯¹ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ç‰¹æ®Šå¯¹å¾…ã€‚ æ¯”å¦‚ï¼šè¯¥ç¼–è¯‘å™¨æ‹’ç»æŠŠä¸€ä¸ªåªåŒ…å« double æ•°æ®çš„å¯¹è±¡æ”¾å…¥ç¼“å­˜å™¨ï¼Œå´å¯¹å…‰ç§ƒç§ƒçš„doubleç±»å‹æ•°æ®æœ¬èº«æ•å¼€å¤§é—¨ã€‚è¿™ç§äº‹æƒ…å‘ç”Ÿæ—¶ï¼Œå°±æœ‰å¿…è¦ç”¨ by reference æ¶ˆé™¤è¿™ç§åè§å–½ã€‚ å¦å¤–ï¼Œuser-defined class çš„æ‰©å±•æ€§æ„å‘³ç€å®ƒéšæ—¶å¯èƒ½å˜æˆä¸€ä¸ªå¤§å®¶ä¼™ã€‚è¿™æ—¶è¿˜æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå³ by reference æ›´è®©æˆ‘ä»¬çœå¿ƒã€‚ 21. å¦‚æœä¸€å®šè¦è¿”å›å¯¹è±¡ï¼Œåˆ«å¦„æƒ³è¿”å›å®ƒçš„ reference ä¸€å®šè¦ return ä¸€ä¸ª object ï¼Œå¤§èƒ†ç”¨ pass-by value å§ã€‚ æƒ…å†µ1ï¼š return pointer reference æŒ‡å‘ä¸€ä¸ª local static object çš„åŒæ—¶ï¼Œåˆéœ€è¦å¤šä¸ªè¿™æ ·çš„ object æƒ…å†µ2ï¼š æŒ‡é’ˆå¼•ç”¨ æŒ‡å‘ä¸€ä¸ª local stack å¯¹è±¡ æˆ– return reference æŒ‡å‘ä¸€ä¸ª heap-allocated ä»¥ä¸Šä¸¤ç§ Crazy æƒ…å†µä¼šåœ¨ä¸‹æ–‡ç»†è¯´ï¼Œä½†ä½ çš„åŸºæœ¬åŠŸè¶³å¤Ÿçš„è¯ï¼Œåº”è¯¥ä¹Ÿèƒ½çŒœå‡ºä¸ªæ‰€ä»¥ç„¶ã€‚ ä¸ºäº†è¡¨ç°ä¸¤ç§æƒ…å†µçš„å¼ åŠ›ï¼Œè¿™é‡Œéœ€è¦ä¸€ä¸ª classical instanceï¼š class Rationalpublic: Rational(int numerator = 0, int denominator = 1); ...private: int n,d; //n: numerator (åˆ†å­) dï¼šdenominator (åˆ†æ¯) friend const Rational //constï¼šè§ item 3 operator*(const Rational lhs const Rational rhs) æƒ…å†µ1ï¼š bool operator==(const Rational lhs , const Rational rhs);Rational a,b,c,d;...if((a*b) == (c*d)) //Trueï¼šä¹˜ç§¯ç›¸ç­‰ï¼Œ Do something boring.else //false:ä¹˜ç§¯ä¸ç­‰ï¼Œ Do something boring more. æ­¤æƒ…å†µèƒ½é¿å…è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½†ï¼š const æŒ‡å‘ä¸€ä¸ª static æ•°æ®ä¼šå¯¼è‡´ä¸Šè¿° IF è¯­å¥æ°¸è¿œä¸ºçœŸã€‚å› ä¸º a * b ä¸ c * d åœ¨é‡è½½*çš„æƒ…å†µä¸‹æŒ‡å‘äº†åŒä¸€åœ°å€ï¼Œä¹Ÿå°±æŒ‡å‘äº†åŒä¸€é™æ€å˜é‡ã€‚è¿™ä¸ªé™æ€å˜é‡å…ˆæ˜¯ a * b ï¼Œç„¶åè¢«è¦†ç›–ä¸º c * d ã€‚ æƒ…å†µ2ï¼š stack ä¸­çš„å¯¹è±¡åœ¨è°ƒç”¨ * ä¹˜æ³•è¿ç®—é‡è½½å‡½æ•°åï¼Œä½œä¸ºå±€éƒ¨å˜é‡å°±å·²ç»æ¶ˆå¤±äº†ã€‚const æŒ‡å‘äº†è™šæ— ã€‚ const Rational operator*(const Rational lhs , const Rational rhs) Rational result(lhs.n * rhs.n , lhs.d * rhs.d); return result; heapï¼š const Rational operator*(const Rational lhs , const Rational rhs) //è¿™é‡Œçš„ new è¦æ±‚åˆ†é…å†…å­˜ä¹‹åï¼Œç”¨æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–ã€‚å³ä½¿ reference ä¹Ÿæ²¡èƒ½é¿å… Rational* result = new Rational(lhs.n * rhs.n , lhs.d * rhs.d); return result; ä¹ä¸€çœ‹å¾ˆå®Œç¾ã€‚åªæ˜¯éœ€è¦è°ƒç”¨è€…å¦‚å±¥è–„å†°ä¸€æ ·ï¼Œä¿è¯ delete æ‰æ¯ä¸ªå¯¹è±¡ã€‚ å¯çœ‹çœ‹è¿™ä¸ªåº”ç”¨ï¼š Rational w,x,y,z; w = x * y * z; //operator*(operator*(x,y),z); è¿™æ„å‘³ç€åµŒå¥—è¿›å»çš„ operator* å‡½æ•°è¿”å›çš„æŒ‡é’ˆå°†è¢«è¿…é€Ÿä½¿ç”¨ï¼Œç„¶ååœ¨æ€¥ä¸å¯è€ä¸­æ¶ˆå¤±ï¼Œæœ€åå†…å­˜æ³„æ¼ã€‚ **æ‰€ä»¥ç»¼ä¸Šæ‰€è¿°ï¼š**stack å’Œ heap éƒ½åœ¨ *operator ä¸Šæ‘”äº†ä¸ªç‹—å•ƒæ³¥ã€‚ pass by value æ„å‘³ç€è¿”å›å€¼çš„æ„é€ æˆæœ¬å’Œææ„æˆæœ¬ã€‚ä½†è¯·ç›¸ä¿¡ C++ ï¼Œå®ƒä¼šå…è®¸ç¼–è¯‘å™¨å®ç°ä¼˜åŒ–ï¼Œåœ¨ä¿è¯è¡Œä¸ºç›¸åŒçš„æƒ…å†µä¸‹å°½é‡æ”¹å–„äº§å‡ºç æ•ˆç‡ï¼Œè¿™æ ·æ¥çœ‹ï¼Œä½ çš„ç¨‹åºå°†åœ¨åŸæ²¹è¡Œä¸ºçš„åŸºç¡€ä¸Šï¼Œæ‰§è¡Œçš„æ¯”é¢„æœŸè¦å¿«ä¸€äº›ã€‚ 22.å°†æˆå‘˜å˜é‡å£°æ˜ä¸º private protected ä¸èƒ½æ¯” public æ›´æœ‰å°è£…æ€§ã€‚ æˆå‘˜å˜é‡å£°æ˜ä¸º private ã€‚ è¿™æ„å‘³ç€å®¢æˆ·è®¿é—®æ•°æ®çš„ä¸€è‡´æ€§ ã€ å¯ç»†å¾®åˆ’åˆ†è®¿é—®æ§åˆ¶ã€çº¦æŸæ¡ä»¶çš„ä¿è¯ã€å……åˆ†çš„classä½œè€…å®ç°å¼¹æ€§ã€‚ privated member variable: è¯­æ³•ä¸€è‡´æ€§ ï¼šæˆå‘˜å˜é‡éƒ½å£°æ˜ä¸º private æƒé™äº†ï¼Œè®¿é—®å®ƒåªèƒ½é  public æˆå‘˜å‡½æ•°äº†ã€‚æ‰€ä»¥æ‰€æœ‰æ¥å£çš„ä½¿ç”¨éƒ½ä¸ç”¨è€ƒè™‘åŠ ä¸åŠ æ‹¬å·çš„é—®é¢˜â€”â€”éƒ½æ˜¯å‡½æ•°ï¼ŒåŠ å°±æ˜¯äº†ã€‚ å¼ºè°ƒæƒé™ ï¼špublic æƒé™çš„æˆå‘˜å˜é‡æ„å‘³ç€æ¯ä¸ªäººéƒ½å¯ä»¥å¯¹å®ƒæŒ‡æ‰‹ç”»è„šã€‚åªæœ‰é€šè¿‡å‡½æ•°è®¿é—® private member variable æ—¶ï¼Œæ‰èƒ½å®ç°â€œä¸å‡†è®¿é—®â€ã€â€œåªè¯»è®¿é—®â€ã€â€œè¯»å†™è®¿é—®â€ç­‰ç­‰ã€‚ å°è£…æ€§ï¼šPublic æ„å‘³ç€ä¸å°è£…ï¼Œå‡ ä¹ç­‰ä»·äºä¸å¯æ”¹å˜ï¼ˆé™¤éä»¥ç ´åç”¨æˆ·ç ä¸ºä»£ä»·ï¼‰ã€‚ å³ä½¿ä½¿ç”¨ protected æƒé™ï¼Œé¢å¯¹å­ç±»çš„ç‹‚è½°æ»¥ç‚¸ï¼Œä½ ä»ç„¶å¾ˆéš¾æ”¹å˜è¿™ä¸ª protected member variable çš„ä¸€åˆ‡ã€‚æ‰€ä»¥åœ¨è¿™ä¸ªè§’åº¦ä¸Šï¼Œå®ƒçš„æ„ä¹‰å’Œ public ç›¸å·®ä¸å¤§ï¼ˆä¸¤ç§æƒé™ : private å’Œ å…¶ä»–ï¼‰ã€‚ é€šè¿‡å‡½æ•°è®¿é—®è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œå°±å¥½åƒæä¸€ä¸ªé»‘ç›’â€”â€”å³ä½¿ä»¥æŸä¸ªè®¡ç®—æ›¿æ¢æ‰è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œä¹Ÿæ²¡æœ‰å…³ ç³»ã€‚å°†æˆå‘˜å˜é‡éšè—åœ¨æˆå‘˜å‡½æ•°èƒŒåï¼Œèƒ½ä¸ºâ€œæ‰€æœ‰å¯èƒ½çš„å®ç°â€æä¾›å¼¹æ€§: è¿™å¯ä½¿å¾—æˆå‘˜å˜é‡è¢«è¯»æˆ–è¢«å†™æ—¶è½»æ¾é€šçŸ¥å…¶å®ƒå¯¹è±¡ã€èƒ½å¤ŸéªŒè¯classçš„çº¦æŸæ¡ä»¶åŠå‡½æ•°çš„å‰æå’Œäº‹åçŠ¶æ€ã€èƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¿è¡ŒåŒæ­¥æ§åˆ¶ç­‰ç­‰ã€‚ 23.ç”¨ non-member ã€ non-friend æ›¿æ¢ member å‡½æ•° Replace member function by non-member ã€non-friend function. å¯ä»¥å¢åŠ å°è£…æ€§ã€å¼¹æ€§ ( packaging flexibility ) ã€æ‰©å……æ€§ã€‚ è¿™ä¸ª item ä¸‹ï¼Œå°è£…æ€§æ˜¯æ ¸å¿ƒã€‚ å°è£…æ€§å¼ºæ„å‘³ç€å¼¹æ€§å¤§ï¼šè¶Šå¤šçš„æ•°æ®è¢«å°è£…ï¼Œå³å¯è®¿é—®æ•°æ®çš„ä»£ç è¶Šå°‘ï¼Œæˆ‘ä»¬ä¹Ÿå°±è¶Šèƒ½è‡ªç”±åœ°æ”¹å˜å¯¹è±¡æ•°æ®ã€‚ item 22 æåˆ°æˆå‘˜å˜é‡åº”æ˜¯ private ã€‚å¦‚æœä¸è¿™æ ·åšï¼Œå°±æ„å‘³ç€æ— é™é‡çš„å‡½æ•°å¯ä»¥è®¿é—®å®ƒä»¬ï¼Œä¹Ÿå°±æ¯«æ— å°è£…æ€§å¯è¨€äº†ã€‚å®é™…ä¸Šï¼Œä¸€ä¸ª member function å¯ä»¥è®¿é—® private variable ï¼Œè¿˜å¯ä»¥ä»»æ„å–ç”¨ private function ã€ enums ã€typedefs ç­‰ç­‰ã€‚è€Œ non-member åˆ™ä»€ä¹ˆéƒ½å¹²ä¸äº†ã€‚è¿™æ„å‘³ç€ä¸¤ç§å‡½æ•°åŠŸèƒ½ç›¸åŒæ—¶ï¼Œåè€…å°è£…æ€§æ›´å¤§ã€‚ï¼ˆfriend function çš„æƒåˆ©å’Œmember function å¤§å·®ä¸å·®ï¼Œæ‰€ä»¥å®ƒçš„å°è£…æ€§ä¹Ÿä¸å¤§ï¼‰ã€‚ åŸºäºå¯¹å°è£…æ€§é‡è¦æ€§çš„è®¤è¯†ï¼Œæ¥çœ‹ä»¥ä¸‹ä¾‹å­ï¼š clss WebBrowser public: void clearCache(); void clearHistory(); void removeCookies(); ...; å¯¹äºè¿™æ ·ä¸€ä¸ªç±»ï¼ŒåŒæ—¶æ‰§è¡Œä»¥ä¸Šä¸‰ä¸ªå‡½æ•°çš„å®ç°æ–¹æ³•æœ‰ä¸¤ç§ï¼š member function: void class WebBrowser::clearEverything()//è°ƒç”¨ä¸‰ä¸ªå‡½æ•° ... non-member function: void clearBrowser(WebBrowser wb) wb.clearCache(); wb.clearHistory(); wb.removeCookie(); non-member å‡½æ•°çš„å°è£…æ€§æ¯” member å‡½æ•°è¦é«˜ï¼Œå¹¶ä¸”æœ‰æ›´å¤§çš„å°è£…å¼¹æ€§ï¼Œè¿›è€Œå­˜åœ¨æ›´ä½çš„ç¼–è¯‘ä¾èµ–åº¦ï¼Œå¢åŠ WebBrowser çš„å¯å»¶ä¼¸æ€§ã€‚ å®é™…ä¸Šï¼Œé¢å‘å¯¹è±¡å®ˆåˆ™è¦æ±‚ï¼šæ•°æ®ä»¥åŠæ“ä½œæ•°æ®çš„é‚£äº›å‡½æ•°åº”è¯¥æ†ç»‘åœ¨ä¸€å—ã€‚ è¿™æ„å‘³ç€è®¤å¯ member function is better choice. è¿™æ˜¯ä¸€ä¸ªè¯¯è§£ã€‚ å› ä¸ºè¯¥å®ˆåˆ™çš„ç›®çš„æ˜¯è¦æ±‚æ•°æ®å°½å¯èƒ½è¢«å°è£…ï¼Œä¸å®é™…é€‰æ‹©æ°æ°ç›¸åã€‚ æ³¨æ„ï¼šå¼ºè°ƒå°è£…æ€§çš„ non-member function åŒæ ·å¯ä»¥æ˜¯å¦ä¸€ä¸ª class çš„ menber ã€‚ ä¸Šé¢çš„ clearBrowser å¯ä»¥æ˜¯æŸ utility class çš„ä¸€ä¸ª static member function ã€‚åªè¦å®ƒä¸æ˜¯ WebBrowser çš„ä¸€éƒ¨åˆ†æˆ– friend funcï¼Œå°±ä¸ä¼šå½±å“å°è£…æ€§ã€‚ namespaceï¼š ä¸è¿‡ç›¸æ¯”æˆä¸º static memer func ï¼Œæ›´è‡ªç„¶çš„é€‰æ‹©æ˜¯è®© non-member function ï¼ˆclearBrowserï¼‰ å’Œå¯¹åº”çš„ class ï¼ˆWebBrowserï¼‰ ä½äºåŒä¸€ä¸ª namespace ä¸­ã€‚ namespace WebBrowserStuff class WebBrowser ... ; void clearBrowser(WebBrowser wb); åŒæ—¶ä½ ä¹Ÿå¯ä»¥ç”¨ namespace é…åˆ #incluede å®ç°åˆ†ç¦»å¼ç¼–ç¨‹ï¼Œä¿è¯å°è£…æ€§çš„åŒæ—¶è®©å®¢æˆ·æŒ‰éœ€æ‰€å–ã€‚ //webbrowser.h å¤´æ–‡ä»¶å†…namespace WebBrowserStuff class WebBrowser ... ; ... //WebBrowser æ ¸å¿ƒ//webbrowser_bookmarks.h å¤´æ–‡ä»¶å†…namespace WebBrowserStuff class WebBrowser ... ; ...//ä¹¦ç­¾ç›¸å…³ä¾¿åˆ©å‡½æ•°//webbrowser_cookies.h å¤´æ–‡ä»¶å†…namespace WebBrowserStuff class WebBrowser ... ; ...//cookieç›¸å…³ä¾¿åˆ©å‡½æ•° As shown above , éœ€è¦å•¥åŠŸèƒ½ï¼Œ#include å°±æ˜¯äº†ã€‚ namespace ç›¸æ¯” class çš„ä¼˜åŠ¿ï¼š ç§»æ¤æ€§ï¼šnamespace å¯è·¨è¶Šå¤šä¸ªæºç ï¼Œ class ä¸èƒ½ã€‚ åˆ†ç¦»æ€§ï¼šé€šå¸¸ç”¨æˆ·ç”¨åˆ°çš„åŠŸèƒ½åªæœ‰ä¸€éƒ¨åˆ†ã€‚é…åˆå¤´æ–‡ä»¶ç¼–å†™åŒä¸€å‘½åç©ºé—´çš„å‡½æ•°ï¼Œèƒ½è¾¾åˆ°è§£è€¦æ•ˆæœã€‚ æ‰©å±•æ€§ï¼šç”¨æˆ·æœ‰å…¶ä»–éœ€æ±‚ï¼Œåœ¨å‘½åç©ºé—´å†…åŠ ä¸ªå¤´æ–‡ä»¶å°±æ˜¯äº†ã€‚æ–°å‡½æ•°å’Œæ—§æœ‰å‡½æ•°ä¸€æ ·å¯ç”¨ä¸”ä½œä¸ºä¸€ä¸ªæ•´ä½“ã€‚ è¿™é‡Œå¤šä¸€å¥å˜´ï¼š è¿™ä¹Ÿæ˜¯ C++ æ ‡å‡†ç¨‹åºåº“çš„ç»„ç»‡æ–¹å¼ï¼šä¸æ˜¯ä¸€ä¸ªåºå¤§çš„C++StandardLibraryå¤´æ–‡ä»¶å’ŒåŒ…å«ç€std namespace çš„æ¯ä¸€æ ·ä¸œè¥¿ï¼Œè€Œæ˜¯æ•°åä¸ªå¤´æ–‡ä»¶å„è‡ªè´Ÿè´£è‡ªå·±çš„éƒ¨åˆ†ï¼ˆ,ç­‰ï¼‰ã€‚ è¿™ç§åˆ†å‰²æ–¹å¼æ˜¯ class function åŠ›æ‰€ä¸åŠçš„ï¼Œå®ƒå¿…é¡»æ•´ä½“å®šä¹‰ã€‚ 24.è‹¥æ‰€æœ‰å‚æ•°éƒ½è¦ç±»å‹è½¬æ¢ï¼Œé‚£å°±ç”¨ non-member å‡½æ•° å¦‚æœä½ éœ€è¦ä¸ºæŸä¸ªå‡½æ•°çš„æ‰€æœ‰å‚æ•°è¿›è¡Œç±»å‹è½¬æ¢ï¼Œè¿™ä¸ªå‡½æ•°å°±å¿…é¡»æ˜¯ non-member å‚æ•°åŒ…æ‹¬è¢« this pointer æŒ‡å‘çš„é‚£ä¸ªéšå«å‚æ•°ã€‚ class æ”¯æŒéšå¼ç±»å‹è½¬æ¢æœ¬èº«æ¯”è¾ƒå±é™©ï¼Œä½†æœ‰äº›ä¾‹å¤–æƒ…å†µï¼šåƒå»ºç«‹ä¸€ä¸ªæ•°å€¼ class ï¼Œä½ å¾€å¾€éœ€è¦ ç±»ä¼¼ int è½¬ double é‚£æ ·çš„ éšå¼è½¬æ¢ã€‚ ä¸‹é¢ä»¥æœ‰ç†æ•°ç±» Rational class ä¸ºä¾‹ï¼š class Rational public: Rational (int numerator = 0, int denominator = 1); int numerator() const; int denominator() const;private: ... éšå¼è½¬æ¢çš„å®ç°å½¢å¼æœ‰ member function ã€non-member function æˆ– non-member friend å‡½æ•°ã€‚ é¢å‘å¯¹è±¡çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠ operator* æ‰”åˆ° class å†…(å°¤å…¶åœ¨ä½ å¿˜æ‰ item 23 çš„æƒ…å†µä¸‹)ï¼Œåƒè¿™æ ·ï¼š class Rational public: ... const Rational operator* (const Rational rhs) const; å®ƒçš„å®ç°æœ‰å…¶åˆç†æ€§ï¼Œä½†ä¹Ÿä¼šé‡åˆ°ä¸€äº›éº»çƒ¦ï¼š Rational ondEighth(1,8);Rational oneHalf(1,2);Rational result = oneHalf * oneEighth;result = result * oneEighth;//no question â†‘result = oneHalf * 2; //okay equal to : oneHalf.operator*(2);result = 2 * oneHalf; //wrong equal to : 2.operator*(oneHalf); å¼å­1éƒ½å‘ç”Ÿäº†éšå¼ç±»å‹è½¬æ¢ï¼ˆæ²¡æœ‰æ¶‰åŠ explicit constructor function)ï¼Œ å¼å­2å´æ²¡èƒ½é¡ºåˆ©å®Œæˆï¼š æ··åˆå¼ç®—æœ¯ä¸­ï¼Œæ•´æ•°2æ²¡æœ‰å¯¹åº”çš„ class ï¼Œæ›´æ²¡æœ‰ç›¸åº”çš„ operator* member-function ã€‚ (è¿™ç§æƒ…å†µä¸‹ï¼Œcompiler è¿˜ä¼šå°è¯•å¯»æ‰¾æ›¿ä»£çš„ non-member functionï¼Œä½†æœ¬ä¾‹åŒæ ·æ²¡æœ‰) å¼å­1é€šè¿‡ç¼–è¯‘æ—¶ï¼Œç¼–è¯‘å™¨å¯¹2çš„æ“ä½œå¤§æ¦‚å¦‚ä¸‹ï¼š //ç¼–è¯‘å™¨çŸ¥é“å‚æ•°ç±»å‹Rationalè™½ç„¶å’Œintä¸ç¬¦ï¼Œä½†åªè¦è°ƒç”¨æ„é€ å‡½æ•°å°±æœ‰æœºä¼šå®Œæˆä¸€åˆ‡ã€‚const Rational temp(2); result = oneHalf * temp;//å¦‚æœ Rational constructor ä¸º explicit ï¼Œä¸¤å¼æ²¡æœ‰ä¸€ä¸ªèƒ½é€šè¿‡ç¼–è¯‘ã€‚ ç»“è®ºï¼š åªæœ‰å½“å‚æ•°ä½äº parameter list æ—¶ï¼Œæ‰èƒ½æ­£å¸¸è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ â€”â€” ç±»ä¼¼å¼å­1ï¼› è€Œæƒ…å†µç±»ä¼¼ The object that called-member-function belong to çš„å‚æ•° â€”â€” ç±»ä¼¼å¼å­2ï¼Œ å³ this æŒ‡é’ˆæŒ‡å‘çš„é‚£ä¸ªéšè—å‚æ•°æ˜¯ä¸å¯ä»¥è¿›è¡Œéšå¼è½¬æ¢çš„ã€‚ explicit èƒ½ä¿æŒç›¸å…³å‡½æ•°çš„ä¸€è‡´æ€§ï¼Œè®©å¼å­1å’Œå¼å­2éƒ½ç¼–è¯‘å¤±è´¥ã€‚ **æ›´å¥½çš„è§£å†³æ–¹å¼ï¼š**non-member function ï¼šå…è®¸ç¼–è¯‘å™¨åœ¨æ¯ä¸€ä¸ªå®å‚ä¸Šæ‰§è¡Œ implicit type conversionã€‚ å¸ˆæ‰¿ä¸Šä¾‹ï¼š const Rational operator*(const Rational lhs, const Rational rhs) return Rational(lhs.numerator() * rhs.numerator(), lhs.denominator() * rhs.denominator()); è¿™å¯¹ä¸Šé¢çš„å¼å­éƒ½é€‚ç”¨ã€‚ æœ€åçš„é—®é¢˜æ˜¯ operator* æ˜¯å¦æœ‰å¿…è¦æˆä¸º class å†…çš„ friend functionã€‚ ç­”æ¡ˆæ˜¯æ²¡è¿™ä¸ªå¿…è¦ï¼ˆè‡³å°‘åœ¨ç±»ä¼¼æƒ…å†µï¼‰ï¼šå› ä¸ºè¯¥é‡è½½å‡½æ•°å‡­å€Ÿ class-public interface å°±èƒ½å®Œæˆä»»åŠ¡ï¼Œä¸éœ€è¦å†’ç€ç ´åå°è£…æ€§çš„é£é™©ã€‚ member function çš„åé¢æ˜¯ non-member function ï¼Œè€Œé friend func ã€‚ 25.è¯•ç€å†™å‡ºä¸€ä¸ªä¸æŠ›å¼‚å¸¸çš„ swap å‡½æ•° å¦‚æœ std::swap å¯¹äºä½ çš„ç±»å‹æ¥è¯´æ˜¯ä½æ•ˆçš„ï¼Œè¯·æä¾›ä¸€ä¸ª swapæˆå‘˜å‡½æ•°ã€‚å¹¶ç¡®ä¿ä½ çš„ swapä¸ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ å¦‚æœä½ æä¾›ä¸€ä¸ªæˆå‘˜ swapï¼Œè¯·åŒæ—¶æä¾›ä¸€ä¸ªè°ƒç”¨æˆå‘˜ swap çš„éæˆå‘˜ swapã€‚å¯¹äºç±»ï¼ˆéæ¨¡æ¿ï¼‰ï¼Œè¿˜è¦ç‰¹åŒ– std::swapã€‚ è°ƒç”¨ swap æ—¶ï¼Œè¯·ä¸º std::swap ä½¿ç”¨ä¸€ä¸ª using declarationï¼Œç„¶ååœ¨è°ƒç”¨ swap æ—¶ä¸ä½¿ç”¨ä»»ä½• namespace é™å®šæ¡ä»¶ã€‚ ä¸ºç”¨æˆ·å®šä¹‰ç±»å‹å®Œå…¨åœ°ç‰¹åŒ– std æ¨¡æ¿æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ç»ä¸è¦è¯•å›¾å¾€ std ä¸­åŠ å…¥ä»»ä½•å…¨æ–°çš„ä¸œè¥¿ã€‚ å‰è¨€ï¼š ç‰¹åŒ–æ˜¯ template c++ çš„çŸ¥è¯†ã€‚ æ¨¡æ¿çš„å…¨ç‰¹åŒ–å’Œåç‰¹åŒ–éƒ½æ˜¯åœ¨å·²ç»å®šä¹‰çš„æ¨¡æ¿åŸºç¡€ä¹‹ä¸Šçš„ï¼Œä¸èƒ½å•ç‹¬å­˜åœ¨ã€‚ ç‰¹åŒ–æ ¹æ®æ¨¡æ¿å‚æ•°æ˜¯å¦å…¨éƒ¨ç‰¹åŒ–è€Œåˆ†ä½œ å…¨ç‰¹åŒ– å’Œåç‰¹åŒ–ã€‚ åç‰¹åŒ–ï¼š ç±»æ¨¡æ¿æ”¯æŒåç‰¹åŒ–ï¼Œå‡½æ•°æ¨¡æ¿æ²¡æœ‰åç‰¹åŒ–[^3]ã€‚ (åç‰¹åŒ–ä½¿ç”¨å¾ˆçµæ´»ï¼Œå¯ä»¥æ˜¯é™å®šå‚æ•°çš„æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚intï¼›ä¹Ÿå¯ä»¥æ˜¯é™å®šå‚æ•°çš„æ•°æ®ä¼ è¾“æ–¹å¼ï¼Œæ¯”å¦‚å¼•ç”¨ã€æŒ‡é’ˆï¼›ç­‰ç­‰ï¼‰ ç¼–è¯‘å™¨è°ƒç”¨é¡ºåºï¼šå…¨ç‰¹åŒ–åç‰¹åŒ–é€šç”¨æ¨¡æ¿ [^3]: å‡½æ•°æœ‰é‡è½½ç‰¹æ€§ï¼Œå› æ­¤åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œç‰¹åŒ–ä¼šäº§ç”Ÿä¸€äº›é¢„æœŸä¹‹å¤–çš„ç»“æœã€‚â€”è¯¦è§ ã€‚ swapæœ¬èº«ï¼š swap å‡½æ•°æœ€åˆç”± STL å¼•å…¥ï¼Œå·²ç»æˆä¸ºå¼‚å¸¸å®‰å…¨ç¼–ç¨‹çš„å…³é”®å‡½æ•°ï¼Œ åŒæ—¶ä¹Ÿæ˜¯è§£å†³è‡ªèµ‹å€¼é—®é¢˜çš„é€šç”¨æœºåˆ¶ã€‚ æ ‡å‡†ç¨‹åºåº“ä¸­çš„ swap ç®—æ³• namespace std templatetypename T void swap(T a, T b) T tmp(a); a = b; b = tmp; å¯ä»¥çœ‹å‡ºï¼Œåªè¦ T æ”¯æŒ coping å°±èƒ½å®Œæˆ swapã€‚ ä½†è¿™ç§ coping æ–¹å¼æœªå…æœ‰äº›ç®€å•ç²—æš´ã€‚ ç±»çš„swapï¼ˆé…åˆmember swapï¼‰ æœ‰æ—¶å¯¹è‡ªå®šä¹‰ç±»å‹è€Œè¨€ std::swap å¹¶ä¸é«˜æ•ˆã€‚ æ¯”å¦‚é‡‡ç”¨ pimpl idiom è®¾è®¡çš„ç±»ä¸­ï¼Œåªéœ€è¦äº¤æ¢å®ç°å¯¹è±¡çš„æŒ‡é’ˆå³å¯ï¼š class WidgetImpl;class Widget // pimpl idiom çš„ä¸€ä¸ªç±» WidgetImpl *pImpl; // æŒ‡å‘Widgetçš„å®ç°ï¼ˆæ•°æ®ï¼‰ public: Widget(const Widget rhs);; namespace std template // æ¨¡æ¿å‚æ•°ä¸ºç©ºï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªå…¨ç‰¹åŒ– void swapWidget(Widget a, Widget b) swap(a.pImpl, b.pImpl); // åªéœ€äº¤æ¢å®ƒä»¬å®ä½“ç±»çš„æŒ‡é’ˆ ä¸Šè¿°ä»£ç æ˜¯ä¸èƒ½ç¼–è¯‘çš„ï¼Œå› ä¸º pImpl æ˜¯ç§æœ‰æˆå‘˜ï¼æ‰€ä»¥ï¼ŒWidget åº”å½“æä¾›ä¸€ä¸ª swap æˆå‘˜å‡½æ•°æˆ–å‹å…ƒå‡½æ•°ã€‚ æƒ¯ä¾‹ä¸Šä¼šæä¾›ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼š class Widget public: void swap(Widget other) //member func using std::swap; swap(pImpl, other.pImpl); ;//æ¥ç€æˆ‘ä»¬ç»§ç»­ç‰¹åŒ–std::swapï¼Œåœ¨è¿™ä¸ªé€šç”¨çš„ swap ä¸­è°ƒç”¨é‚£ä¸ªæˆå‘˜å‡½æ•°ï¼šnamespace std template\tvoid swapWidget(Widget a, Widget b) a.swap(a,b); //è°ƒç”¨æˆå‘˜å‡½æ•° ä¸Šè¿°å®ç°ä¸STLå®¹å™¨æ˜¯ä¸€è‡´çš„ï¼šæä¾›å…±æœ‰ swap æˆå‘˜å‡½æ•°ï¼Œ å¹¶ç‰¹åŒ–std::swap æ¥è°ƒç”¨é‚£ä¸ªæˆå‘˜å‡½æ•°ã€‚ ç±»æ¨¡æ¿swapï¼ˆé…åˆ non-member functionï¼‰ å¦‚æœ class æ¶‰åŠåˆ° template ï¼Œæƒ…å†µä¼šä¸å¤§ä¸€æ ·ã€‚æŒ‰ç…§ä¸Šä¾‹ç…§çŒ«ç”»è™çš„å†™ä¸€ä¸‹ï¼š templatetypename Tclass WidgetImpl ... ; templatetypename Tclass Widget ... ; //ä¹‹å‰çš„ class namespace std templatetypename T // swapåçš„å°–æ‹¬å·è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªç‰¹åŒ–ï¼Œè€Œéé‡è½½ã€‚ // swapä¸­çš„ç±»å‹åˆ—è¡¨ä¸ºtemplateä¸­çš„ç±»å‹åˆ—è¡¨çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚ void swapWidgetT (WidgetT a, WidgetT b) swap(a,b); è¿™é‡Œæ¶‰åŠåˆ°ç¼–è¯‘å™¨ç‰¹ç‚¹ï¼šä¸å…è®¸åç‰¹åŒ– function template ã€‚å¦‚æœä½ éè¦åç‰¹åŒ–ï¼Œå¯ä»¥è€ƒè™‘ç”¨ overload æ¥å®ç°åŒæ ·åŠŸèƒ½ã€‚ namespace std templatetypename T // æ³¨æ„swapåé¢æ²¡æœ‰å°–æ‹¬å·ï¼Œè¿™æ˜¯ä¸€ä¸ªæ–°çš„æ¨¡æ¿å‡½æ•°ã€‚ // ç”±äºå½“å‰å‘½åç©ºé—´å·²ç»æœ‰åŒåå‡½æ•°äº†ï¼Œæ‰€ä»¥ç®—å‡½æ•°é‡è½½ã€‚ void swap(WidgetT a, WidgetT b) //è¿™æ—¶å°±éœ€è¦é…åˆ non-member function äº† a.swap(a,b); åˆé‡åˆ°äº†é—®é¢˜ï¼š è¿™é‡Œé‡è½½äº† std::swapï¼Œç›¸å½“äºåœ¨ std å‘½åç©ºé—´æ·»åŠ äº†ä¸€ä¸ªå‡½æ•°æ¨¡æ¿ã€‚è€Œ C++ æ ‡å‡†ä¸­æ˜¯ä¸å…è®¸æ·»åŠ æ–°çš„ templates ï¼ˆåŒ…æ‹¬ funtion æˆ– class ç­‰ï¼‰ã€‚ C++ æ ‡å‡†ä¸­ï¼Œå®¢æˆ·åªèƒ½ç‰¹åŒ– std ä¸­çš„æ¨¡æ¿ï¼Œä½†ä¸å…è®¸åœ¨ std å‘½åç©ºé—´ä¸­æ·»åŠ ä»»ä½•æ–°çš„æ¨¡æ¿ã€‚ ä¸Šè¿°ä»£ç è™½ç„¶åœ¨æœ‰äº›ç¼–è¯‘å™¨ä¸­å¯ä»¥ç¼–è¯‘ï¼Œä½†ä¼šå¼•å‘æœªå®šä¹‰çš„è¡Œä¸ºã€‚ ä¸å†ä½¿ç”¨ç‰¹åŒ–é‡è½½ç‰ˆçš„ non-member-func ï¼Œå°†åŸæœ¬çš„ non-member func è½¬ç§»åˆ°å…¶ä»– namespace ï¼ˆä¸ä¸€å®šéå¾—æ˜¯ global å•Šï¼‰ã€‚ namespace WidgetStuff templatetypename T class Widget ... ; templatetypename T void swap(WidgetT a, WidgetT b) a.swap(a,b); ä»»ä½•åœ°æ–¹åœ¨ä¸¤ä¸ª Widget ä¸Šè°ƒç”¨ swapæ—¶ï¼ŒC++æ ¹æ®å…¶ argument-dependent lookup ä¼šæ‰¾åˆ° WidgetStuff å‘½åç©ºé—´ä¸‹çš„ swapã€‚ é‚£ä¹ˆä¼¼ä¹ class çš„ swap ä¹Ÿåªéœ€è¦åœ¨åŒä¸€å‘½åç©ºé—´ä¸‹å®šä¹‰ swap å‡½æ•°ï¼Œè€Œä¸å¿…ç‰¹åŒ– std::swapã€‚ ä½†æ˜¯ï¼æœ‰äººå–œæ¬¢ç›´æ¥å†™std::swap(w1, w2)ï¼Œç‰¹åŒ– std::swapå¯ä»¥è®©ä½ çš„ç±»æ›´åŠ å¥å£®,æ›´åŠ ç¨³å®šã€‚ æ‰€ä»¥å®šä¹‰ class ä¸“å± swap åï¼Œç‰¹åŒ–ä¸€ä¸‹ std::swap å§ã€‚ ç¼–è¯‘å™¨è°ƒç”¨swap templatetypename Tvoid doSomething(T obj1, T obj2) using std::swap; // ä½¿å¾— std::swap åœ¨è¯¥ä½œç”¨åŸŸå†…å¯è§ swap(obj1, obj2); // ç°åœ¨ï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ é€‰æœ€å¥½çš„Swap ä»ç”¨æˆ·è§’åº¦æ¥çœ‹ï¼Œå¥½åƒ swap å‡½æ•°è°ƒç”¨ä»¥åä¼šé¢ä¸´é€‰æ‹©çš„å›°éš¾ã€‚ä½†C++ çš„ name lookup rules (åŒ…æ‹¬ argument-dependent lookup)èƒ½ç¡®ä¿æ‰¾åˆ° global ä½œç”¨åŸŸæˆ– T æ‰€åœ¨å‘½åç©ºé—´çš„ä»»ä½• T ä¸“å±çš„ swapã€‚ç¼–è¯‘å™¨ä¼šåçˆ±ä¸“å±ç‰ˆ swap çš„ï¼Œstd::swap åªæ˜¯ä¸€ä¸ªæœ€åé€‰é¡¹è€Œå·²ã€‚ æœ€å¥½ä¸è¦ç”»è›‡æ·»è¶³ä¸€ä¸ªé¢å¤–ä¿®é¥°ç¬¦ï¼šstd::swapï¼Œè¿™ä¼šè®©ç¼–è¯‘å™¨åªè®¤ std å†…çš„ swap ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆä½ éœ€è¦æŠŠä¸“å±ç±»çš„ std::swap è¿›è¡Œç‰¹åŒ–çš„åŸå› ã€‚ æ€»ç»“ï¼š å½“ç„¶äº†ï¼Œå¦‚æœé»˜è®¤ swap å®ç°ä¸ä¼šå¯¹ä½ çš„ class template æœ‰ä»»ä½•å½±å“ï¼Œå°±ä¸ç”¨å†è´¹è¿™ç•ªå¿ƒæ€äº†ã€‚ å¦‚æœåœ¨æ•ˆç‡ä¸Šç¡®å®ä¸è¶³ï¼Œé‚£å°±è€ƒè™‘ä»¥ä¸‹äº‹æƒ…ï¼š æä¾›ä¸€ä¸ªpublic swapæˆå‘˜å‡½æ•°ï¼Œè®©å®ƒé«˜æ•ˆçš„ç½®æ¢ä½ çš„ç±»å‹çš„ä¸¤ä¸ªå¯¹è±¡å€¼ï¼Œå¹¶ä¸”è¿™ä¸ªswapå‡½æ•°ç»ä¸èƒ½æŠ›å‡ºå¼‚å¸¸ã€‚ åœ¨ä½ çš„classæˆ–templateæ‰€åœ¨çš„å‘½åç©ºé—´å†…æä¾›ä¸€ä¸ªnon-member swapï¼Œå¹¶ä»¤å®ƒè°ƒç”¨ä¸Šè¿°swapæˆå‘˜å‡½æ•°ã€‚ å¦‚æœä½ åœ¨ç¼–å†™ä¸€ä¸ªclassè€Œéclass templateï¼Œä¸ºä½ çš„classç‰¹åŒ–std::swapã€‚å¹¶ä»¤å®ƒè°ƒç”¨ä½ çš„swapæˆå‘˜å‡½æ•° è°ƒç”¨ swap å‰ï¼Œè®°å¾—åŒ…å«ä¸€ä¸ªusing å£°æ˜å¼ï¼Œè®© std::swap åœ¨å‡½æ•°èŒƒå›´å†…å¯è§ã€‚è°ƒç”¨ swap æ—¶ä¸éœ€è¦æ·»åŠ  namespace ä¿®é¥°ï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ å®ŒæˆæŸ¥æ‰¾ã€‚ æˆå‘˜ç‰ˆ swap ä¸è¦æŠ›å‡ºå¼‚å¸¸ã€‚ä½ éœ€è¦å¸®åŠ© class class template æä¾› exception safety ä¿éšœã€‚ éæˆå‘˜ç‰ˆé€šå¸¸ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼šå¦‚ swap é»˜è®¤ç‰ˆæœ¬çš„ coping æœ‰ç€ä¸é”™çš„ç¨³å®šæ€§ï¼ŒåŸºäºå¯¹å†…ç½®ç±»å‹çš„æ“ä½œä¹Ÿå¾€å¾€ä¸ä¼šå‡ºç°å¼‚å¸¸ã€‚ ç¬¬äº”ç« ï¼šImplementation26. å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°æ—¶é—´ å°½å¯èƒ½å»¶åå˜é‡å®šä¹‰å¼çš„å‡ºç°æ—¶é—´ï¼Œå¢åŠ ç¨‹åºæ¸…æ™°åº¦çš„åŒæ—¶æ”¹å–„æ•ˆç‡ã€‚ å®šä¹‰å˜é‡æˆ–ç±»å‹ï¼Œæ„é€ ææ„å‡½æ•°ä¼šåœ¨ control flow åˆ°è¾¾æ—¶äº§ç”Ÿæˆæœ¬ï¼Œå³ä½¿ä½ æœªæ›¾ä½¿ç”¨ã€‚ ç”¨ä¾‹å­æ¥çœ‹çœ‹æ‰€è°“â€œå»¶åâ€çš„æ€è·¯ï¼š //åŸç‰ˆencrypt(string password); //åŠ å¯†èµ‹å€¼å‡½æ•°string encryptPassword(string password) sring encrypted; //if(ä¸€äº›å¯†ç è¦æ±‚åˆ¤æ–­) return encrypted; å®šä¹‰æ—¶æœºå»¶åï¼šéœ€è¦æ—¶å†å»æ„é€ ææ„ string encryptPassword(string password) //if(ä¸€äº›å¯†ç è¦æ±‚åˆ¤æ–­) string encrypted;//æ”¾åˆ°ifå encrypted = password; encrypt(encrypted); return encrypted; ç›®å‰æˆæœ¬ï¼šencrypted çš„ default constructor function ï¼Œcopy assignment function èµ‹å€¼æ—¶æœºâ€æå‰â€ï¼šå°½é‡åœ¨å®šä¹‰æ—¶å°±å¯¹å˜é‡å®Œæˆåˆå§‹åŒ–ï¼Œä¸è¦æµªè´¹æˆæœ¬ string encryptPassword(string password) //if(ä¸€äº›å¯†ç è¦æ±‚åˆ¤æ–­) string encrypted(password);//ç›´æ¥åˆå§‹åŒ– encrypt(encrypted); return encrypted; æ€»ç»“ï¼š é¿å…æ— æ„ä¹‰çš„ default constructorï¼› å»¶åå®šä¹‰åˆ°ä½¿ç”¨å˜é‡ï¼ˆç»™å®ƒåˆå€¼å®å‚ï¼‰çš„å‰ä¸€åˆ» è¿˜æœ‰å¾ªç¯é—®é¢˜ï¼šåŒä¸€å˜é‡åœ¨å¾ªç¯ä½¿ç”¨å˜é‡çš„é€‰æ‹©ã€‚ ä¸¤ç§æƒ…å½¢ï¼š æƒ…å½¢Aï¼š(å˜é‡ç±»å‹)å®šä¹‰äºå¾ªç¯å¤– Widget w;for(int i = 0;i n; ++i) w = i... æˆæœ¬ï¼š1 æ„é€ å‡½æ•° + 1 ææ„å‡½æ•° + n å¤åˆ¶æ“ä½œ æƒ…å½¢Bï¼š(å˜é‡ç±»å‹)å®šä¹‰äºå¾ªç¯å†… for(int i = 0;i n; ++i) Widget w(i...); æˆæœ¬ï¼š 1 æ„é€ å‡½æ•° + 1 ææ„å‡½æ•° ç»“è®ºï¼š é€‰æ‹©Aï¼š class çš„èµ‹å€¼æˆæœ¬ä½äºä¸€ç»„ æ„é€ +ææ„ func næ¯”è¾ƒå¤§ æ­£åœ¨å¤„ç†ä»£ç ä¸­çš„ performance-sensitive code å¦åˆ™é€‰æ‹©Bã€‚ 27.å°‘åšè½¬å‹æ“ä½œ å°½é‡é¿å…è½¬å‹ï¼Œé˜²æ­¢æ„å¤–ï¼›é¿å… dynamic_casts ï¼Œé˜²æ­¢æ‹‰ä½æ•ˆç‡ã€‚ å¦‚æœå®ç°éœ€è¦è½¬å‹ï¼Œå°½é‡å¯»æ‰¾æ— éœ€è½¬å‹çš„æ›¿ä»£å“ è½¬å‹å¦‚æœå¿…è¦ï¼Œå°½é‡æŠŠå®ƒéšè—åœ¨å‡½æ•°èƒŒå ä¸è¦è®© user æŠŠè½¬å‹æ”¾åˆ°è‡ªå·±çš„ code é‡Œï¼Œcall it å°±æ˜¯äº†ã€‚ å°½é‡ç”¨ C++ é£æ ¼ è½¬å‹ï¼Œå»æ›¿ä»£æ—§å¼è½¬å‹ã€‚ C++ style çš„ cast æ“ä½œæ›´æœ‰è¾¨è¯†åº¦ï¼Œä¸”åˆ†å·¥æ¸…æ¥šï¼Œæ˜“äºæ’é”™ã€‚ å››ç§è½¬å‹ï¼š const_cast ï¼šcast away the constness, ç§»é™¤å¯¹è±¡å¸¸é‡æ€§ã€‚ dynamic_cast : safe downcasting ï¼Œå®‰å…¨å‘ä¸‹è½¬å‹ï¼Œç»§æ‰¿æ–¹é¢ã€‚ reinterpret_cast : ä½çº§è½¬å‹ï¼Œä¸å¯ç§»æ¤ã€‚ç»“æœå–å†³äºç¼–è¯‘å™¨ã€‚ static_cast ï¼šå¼ºè¿«éšå¼è½¬æ¢ï¼Œåªæ˜¯ä¸èƒ½æŠŠ const è½¬ä¸º non-constã€‚ ä»»ä½•ä¸€ä¸ªç±»å‹è½¬æ¢éƒ½ä¼šä»¤ç¼–è¯‘å™¨ç¼–è¯‘å‡ºè¿è¡ŒæœŸé—´æ‰§è¡Œçš„ä»£ç ã€‚å¹¶ä¸”ç”±äºè®¡ç®—å™¨ä½“ç³»ç»“æ„ä¸­ï¼Œæ•°æ®ç»“æ„çš„åº•å±‚è¡¨è¿°ä¸åŒï¼Œint è½¬ double çš„è¿‡ç¨‹æ¯”æˆ‘ä»¬æƒ³è±¡çš„ä¼šå¤æ‚ä¸€ç‚¹ã€‚ ä¸¤ä¸ªæ³¨æ„ï¼š è½¬å‹æ“ä½œçš„ç§»æ¤æ€§å¾ˆä½ class Base ...class Derived: public Base ...;Derived d;Base* pb = d; //implicit conversion ï¼š Derived* â†’ Base* base æŒ‡é’ˆæŒ‡å‘ derived å¯¹è±¡å¯¼è‡´éšå¼è½¬æ¢ï¼Œå®ç°çš„æ–¹å¼æ˜¯ï¼šåœ¨è¿è¡ŒæœŸæ–½è¡Œä¸€ä¸ªåç§»é‡ï¼ˆoffsetï¼‰åˆ°DerivedæŒ‡é’ˆä¸Šï¼Œæ¥å–å¾—è¦æ±‚çš„ Base* å€¼ã€‚ è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªå¯¹è±¡å¯èƒ½æœ‰ä¸€ä¸ªä»¥ä¸Šçš„åœ°å€ï¼šDerive* æŒ‡å‘å®ƒçš„åœ°å€å’Œ Base* æŒ‡å‘ä»–çš„åœ°å€å°±æœ‰æ‰€ä¸åŒã€‚ä¸€æ—¦ä½¿ç”¨å¤šé‡ç»§æ‰¿ï¼Œè¿™ç§æƒ…å†µè¿˜ä¼šé¢‘ç¹å‘ç”Ÿã€‚ è€Œå¯¹è±¡çš„å¸ƒå±€æ–¹å¼å’Œåœ°å€è®¡ç®—æ–¹å¼ç”±ç¼–è¯‘å™¨å†³å®šï¼Œè¿™å°±æ„å‘³ç€ï¼Œè½¬å‹æ“ä½œçš„åº•å±‚å®ç°ä¼šåœ¨ä¸åŒå¹³å°æœ‰æ‰€ä¸åŒï¼Œç§»æ¤æ€§å ªå¿§ã€‚ ä¸ç†Ÿç»ƒçš„è½¬å‹æ“ä½œå®¹æ˜“æƒ³å½“ç„¶ï¼Œå¯¼è‡´ç¨‹åºä¼¼æ˜¯è€Œé è¿™é‡Œç”¨ä¸¤ä¸ªä¾‹å­æ¥çœ‹çœ‹ static_cast å’Œ dynamic_cast çš„é”™è¯¯ç¤ºä¾‹ï¼š static_cast //éœ€æ±‚æ˜¯ï¼šderivedç±»è¦é¦–å…ˆé‡å†™base.virtualï¼Œ//å¹¶ä¸”é‡å†™çš„ç¬¬ä¸€æ­¥ï¼šè°ƒç”¨base.function() çˆ¶ç±»æŸä¸ªå‡½æ•°class window virtual void onResize() ... ;class specialWindow:public Window public: virtual void onResize() static_castwindow(*this).onResize(); //thisè½¬ä¸ºwindowå†è°ƒç”¨onRize() è¿™ä¸ªç¨‹åºçš„æ€è·¯å¾ˆå¥½ï¼Œåªæ˜¯ä¼¼æ˜¯è€Œéçš„åœ°æ–¹æ˜¯ï¼Œå¼ºè½¬åè°ƒç”¨çš„window::onResize(),å…¶å¯¹è±¡æ˜¯ä¸€ä¸ªwindowå‰¯æœ¬ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„çˆ¶ç±»ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°å†…æœ‰ä¸€äº›å˜é‡æ“ä½œï¼Œå°±ç›¸å½“äºæ”¹åŠ¨å‰¯æœ¬çš„æ•°æ®ï¼Œå†çœ¼çççœ‹ç€å®ƒé”€æ¯ï¼Œå‰©ä¸‹æœªç»å˜åŠ¨çš„åŸ base class ï¼Œç«¹ç¯®æ‰“æ°´ä¸€åœºç©ºã€‚ //æ›´è‡ªç„¶çš„æ–¹æ³•ï¼švirtual void specialwindow:: onResize() window::onResize(); dynamic_cast é¦–å…ˆï¼Œä½¿ç”¨è¿™ä¸ªè½¬æ¢ç±»å‹ï¼Œæ„å‘³ç€è¦ç”¨ä¸€ä¸ª base pointerreference æ¥æ‰§è¡Œ derived function ã€‚ è¿™ç§æƒ…å†µæœ‰ä¸¤ç§æ€è·¯ï¼šä½¿ç”¨ç±»å‹å®‰å…¨å®¹å™¨ æˆ– endue base class with virtual functionã€‚ å»¶ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾ specialwindow å…·æœ‰ç‹¬ä¸€æ— äºŒçš„ blink åŠŸèƒ½ï¼ˆä»¥å‡½æ•°å‘ˆç°ï¼‰ã€‚ ç±»å‹å®‰å…¨å®¹å™¨ï¼šåœ¨å®¹å™¨ï¼ˆas usual to shared_ptrï¼‰ä¸­å­˜å‚¨æŒ‡å‘ derived class å¯¹è±¡çš„æŒ‡é’ˆï¼Œç›´æ¥æ¶ˆé™¤Using base interface to handle object çš„éœ€è¦ã€‚ //å®é™…ä¸Šè¿™ä¸ªæ–¹æ³•çœ‹èµ·æ¥æœ‰ç‚¹è‡­å±ï¼Œå› ä¸ºå®ƒæŠŠæ¡ä»¶ç›´æ¥æ”¹äº†ã€‚ä½†å®ƒæ¯•ç«Ÿæ˜¯å¼ºäºè¦ç±»å‹è½¬æ¢çš„åŸéœ€è¦typedef vectortr1::shared_prtSpecialWindow VPSW;VPSW winPtrs;...for( VPSW::iterator iter = winPtrs.begin(); iter != winPtrs.end(); ++iter) (*iter)-blink(); è¿™ç§æ–¹æ³•ä½¿ç”¨ç±»å‹è½¬æ¢å°±æ˜¯ä¸‹é¢çš„æ ·å­ï¼š typedef vectortr1::shared_ptrwindow VPW;VPW winPtrs;for(VPW::iterator iter = winPtrs.begin(); iter != winPtrs.end();++iter) if(SpecialWindow* psw = dynamic_castSpecialWindow*(iter-get())) psw-blink(); Anywayï¼Œå—é™äºå®¹å™¨ç±»å‹è¦æ±‚ï¼Œè¿™ä¸¤ç§æ–¹æ³•éƒ½ä¸èƒ½å¤„ç†â€œæŒ‡å‘æ‰€æœ‰windowæ´¾ç”Ÿç±»â€çš„æŒ‡é’ˆï¼Œé™¤éä½ ç”˜æ„¿ç”¨å¤šç§å®¹å™¨ä¸”éƒ½å…·å¤‡ type-safeã€‚ ä»¤çˆ¶ç±»ä½¿ç”¨è™šå‡½æ•° (åœ¨ base class å†…æä¾› virtual å‡½æ•°åšå„ä¸ªderive class åšçš„äº‹ï¼‰ class Windowpublic: virtual void blink() class SpecialWindow:public Window...//è™šå‡½æ•°é‡å†™ä¸èµ˜è¿°äº†typedef vectortr1::shared_ptrwindow VPW;VPW winPtrs;for(.../*åŒä¸Š1*/ ) (*iter)-blink(); è¿™ç§æ–¹æ³•æ”¯æŒå¤šç§ç±»å‹çš„æ´¾ç”Ÿç±»ã€‚ æ³¨æ„å¿…é¡»é¿å… cascading dynamic_casts ï¼Œä¸€è¿ä¸²çš„å¼ºè½¬ for(VPW::iterator iter = winPtrs.begin(); iter != winPtrs.end();++iter) if(SpecialWindow1 * psw1 = dynamic_castSpecialWindow1*(iter-get()))... else if(SpecialWindow2 * psw2 = dynamic_castSpecialWindow2*(iter-get()))... ... è¿™ç§åŠŸèƒ½ç”¨ virtual function å¹³æ›¿å³å¯ã€‚ ç»“è®ºï¼šå°‘åšè½¬å‹ï¼Œèƒ½æ›¿å°±æ›¿ã€‚é™¤éä½ åº”å¯¹çš„æ˜¯ int è½¬ double è¿™ç§æ— ä¼¤å¤§é›…ã€ç®€æ´æ˜äº†çš„æ“ä½œã€‚ 28.é¿å…è¿”å›handlesæŒ‡å‘å¯¹è±¡å†…éƒ¨æˆåˆ† é¿å…è¿”å› handles( references , è¿­ä»£å™¨ , pointer) æŒ‡å‘å¯¹è±¡å†…éƒ¨ã€‚ éµå®ˆå®ƒï¼Œæé«˜å°è£…æ€§ï¼Œè®© const member function æ²¡æœ‰å¿˜è®° const çš„åˆè¡·ã€‚ åŒæ—¶æŠŠâ€œç©ºæŒ‡é’ˆâ€ã€â€ç©ºå¼•ç”¨â€çš„æ¦‚ç‡é™åˆ°æœ€ä½ã€‚ Talk is cheap ,show me the code: class Point //åæ ‡ç‚¹public: Point(int x,int y); void setX(int val); void setY(int val);class recData point top_left; point low_right;class recTangle ... Point upperLeft()const return pData-top_left; Point lowerRight()const return pData-low_right;private: tr1::shared_ptrrecData pData; ä»¥ä¸Šä¾‹å­éå¸¸è‡ªç„¶ï¼Œä¸€ä¸ªåæ ‡ç‚¹ - ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªåæ ‡ç‚¹çš„çŸ©å½¢ç±» - ä¸€ä¸ªåŒ…å«çŸ©å½¢ç±»æŒ‡é’ˆå’Œç‚¹ä½æ¥å£çš„ç±»ã€‚ å®é™…ä¸Šè¿™é‡Œå‡ºç°äº†çŸ›ç›¾ï¼š å°è£…æ€§ï¼šä½ æŠŠè¿”å›ç‚¹ä½çš„å‡½æ•°è®¾ä¸º const ä¿æŒå°è£…æ€§çš„åŒæ—¶ï¼ŒåˆæŠŠç§å¯†æˆå‘˜å˜é‡æ¯«æ— ä¿ç•™çš„ return äº†å‡ºå»ã€‚rectangle . lowerRight().setX(num) ç±»ä¼¼è¿™ç§å®ç°ä¼šå®Œå…¨ç ´åå°è£…æ€§ã€‚ dangling handlesï¼šhandleæœ¬èº«æ‰€æŒ‡å‘çš„å¯¹è±¡ä¸å­˜åœ¨äº†ï¼ŒæŒ‡å‘äº†è™šç©ºã€‚ è¿™ä¸€çŸ›ç›¾åœ¨æœ¬ä¾‹ä¸­æ²¡æœ‰å‡ºç°ã€‚ç®€å•è¯´ï¼Œä½ è®© static handle æŒ‡å‘ä¸€ä¸ªå±€éƒ¨å¯¹è±¡ï¼Œå¯¹è±¡é”€æ¯åï¼Œhandleçš„çŠ¶æ€å°±æ˜¯ dangling handles äº†ã€‚ è§£å†³ï¼š Add const to the function which return private member variable. This canâ€™d avoid â€œdangling handlesâ€ phenomenon. Avoid using that function about returning varible as far as possible. åæ€ï¼š æˆå‘˜å˜é‡çš„å°è£…æ€§ å°äºç­‰äº â€œ è¿”å›å…¶ reference çš„å‡½æ•°â€œçš„è®¿é—®çº§åˆ«ã€‚ æœ¬ä¾‹ä¸­çš„æˆå‘˜å˜é‡è¡¨é¢æ˜¯ privateï¼Œå®é™…æ˜¯publicï¼šç”± public-member-functionå¯¼è‡´çš„ã€‚ const member function ä¼ å‡ºä¸€ä¸ªå¼•ç”¨ï¼Œå¼•ç”¨æ‰€æŒ‡æ•°æ®å’Œå¯¹è±¡è‡ªèº«æœ‰å…³ç³»ï¼Œè€Œä¸”è¢«å­˜åœ¨å¯¹è±¡ä¹‹å¤–ï¼Œè°ƒç”¨è€…å°±å¯ä»¥æœ‰æƒæ— æçš„ä¿®æ”¹è¿™ä¸ªæ•°æ®ã€‚ bitwise constness çš„ä¸€ä¸ªè¡¨ç°ã€‚ 29.ä¸ºâ€œå¼‚å¸¸å®‰å…¨â€åŠªåŠ›æ˜¯éå¸¸å€¼å¾—çš„ å³ä½¿å½“å¼‚å¸¸è¢«æŠ›å‡ºæ—¶ï¼Œå¼‚å¸¸å®‰å…¨çš„å‡½æ•°ä¸ä¼šæ³„éœ²èµ„æºï¼Œä¹Ÿä¸å…è®¸æ•°æ®ç»“æ„è¢«æ¶åŒ–ã€‚è¿™æ ·çš„å‡½æ•°æä¾›åŸºæœ¬çš„ï¼Œå¼ºçƒˆçš„ï¼Œæˆ–è€…ä¸æŠ›å‡ºä¿è¯ã€‚ å¼ºçƒˆä¿è¯ç»å¸¸å¯ä»¥é€šè¿‡ copy-and-swap è¢«å®ç°ï¼Œä½†æ˜¯å¼ºçƒˆä¿è¯å¹¶éå¯¹æ‰€æœ‰å‡½æ•°éƒ½å¯ç”¨ã€‚ ä¸€ä¸ªå‡½æ•°é€šå¸¸èƒ½æä¾›çš„ä¿è¯ä¸ä¼šå¼ºäºä»–æ‰€è°ƒç”¨çš„å‡½æ•°ä¸­æœ€å¼±çš„ä¿è¯ã€‚ å¼‚å¸¸å®‰å…¨æ˜¯æŒ‡å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼š ä¸ä¼šæ³„æ¼èµ„æºï¼Œ ä¹Ÿä¸ä¼šä½¿ç³»ç»Ÿå¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚ é€šå¸¸æœ‰ä¸‰ä¸ªå¼‚å¸¸å®‰å…¨çº§åˆ«ï¼šåŸºæœ¬ä¿è¯ã€å¼ºçƒˆä¿è¯ã€ä¸æŠ›å¼‚å¸¸ä¿è¯ï¼š åŸºæœ¬ä¿è¯ã€‚æŠ›å‡ºå¼‚å¸¸åï¼Œå¯¹è±¡ä»ç„¶å¤„äºåˆæ³•ï¼ˆvalidï¼‰çš„çŠ¶æ€ã€‚ä½†ä¸ç¡®å®šå¤„äºå“ªä¸ªçŠ¶æ€ã€‚ æ‰€æœ‰å¯¹è±¡å†…éƒ¨å‰åä¸€è‡´ã€‚ å¼ºçƒˆä¿è¯ : æˆåŠŸä¾¿æˆåŠŸï¼Œå¤±è´¥åˆ™æ¢å¤åˆ°åŸçŠ¶æ€ã€‚ å¦‚æœæŠ›å‡ºäº†å¼‚å¸¸ï¼Œç¨‹åºçš„çŠ¶æ€æ²¡æœ‰å‘ç”Ÿä»»ä½•æ”¹å˜ã€‚å°±åƒæ²¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ä¸€æ ·ã€‚ ä¸æŠ›å¼‚å¸¸(nothrow)ä¿è¯ã€‚è¿™æ˜¯æœ€å¼ºçš„ä¿è¯ï¼Œå‡½æ•°æ€»æ˜¯èƒ½å®Œæˆå®ƒæ‰€æ‰¿è¯ºçš„äº‹æƒ…è€Œç»ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ å†…ç½®ç±»å‹ä¸Šçš„æ“ä½œéƒ½æä¾›äº† nothrow ä¿è¯ã€‚ ä¸€ä¸ªæŠ›å‡ºå¼‚å¸¸çš„åœºæ™¯ ç°åœ¨å®ç°ä¸€ä¸ªèœå•ç±»ï¼Œå¯ä»¥è®¾ç½®å®ƒçš„èƒŒæ™¯å›¾ç‰‡ï¼Œæä¾›åˆ‡æ¢èƒŒæ™¯è®¡æ•°ï¼ŒåŒæ—¶æä¾›çº¿ç¨‹å®‰å…¨ã€‚ class Menu Mutex m; Image *bg; int changeCount;public: void changeBg(istream sr);; changeBg ç”¨æ¥æ”¹å˜èƒŒæ™¯å›¾ç‰‡ï¼Œå¯èƒ½æ˜¯è¿™æ ·å®ç°çš„ï¼š void Menu::changeBg(istream src) lock(mutex); delete bg; ++ changeCount; bg = new Image(src); unlock(mutex); å› ä¸º C++ ç»§æ‰¿è‡ªCï¼Œå®Œå…¨é¿å…æŠ›å¼‚å¸¸æ˜¯ä¸å¯èƒ½çš„ã€‚æ¯”å¦‚ç”³è¯·å†…å­˜æ€»æ˜¯å¯èƒ½å¤±è´¥çš„ï¼Œå¦‚æœå†…å­˜ä¸å¤Ÿå°±ä¼šæŠ›å‡º â€œbad allocâ€ å¼‚å¸¸ã€‚åŠ å…¥ new Image(src) æŠ›å‡ºå¼‚å¸¸ï¼Œ é‚£ä¹ˆå¼‚å¸¸å®‰å…¨çš„ä¸¤ä¸ªæ¡ä»¶éƒ½ä¼šç ´åï¼š mutex èµ„æºè¢«æ³„éœ²äº†ã€‚æ²¡æœ‰è¢« unlockã€‚ Menu æ•°æ®ä¸€è‡´æ€§è¢«ç ´åã€‚é¦–å…ˆ bg å˜æˆäº†ç©ºï¼Œç„¶å changeCount ä¹Ÿé”™è¯¯åœ°è‡ªå¢äº†ã€‚ é€šå¸¸æ¥è®²æä¾›å¼ºçƒˆä¿è¯æ˜¯ä¸å›°éš¾çš„ã€‚é¦–å…ˆæˆ‘ä»¬æŠŠèµ„æºéƒ½æ”¾åˆ°æ™ºèƒ½æŒ‡é’ˆé‡Œå»ï¼Œé€šå¸¸ shared_ptr æ¯” auto_ptr æ›´åŠ ç¬¦åˆç›´è§‰ï¼Œ è¿™æ ·å¯ä»¥ä¿è¯èµ„æºä¸è¢«æ³„éœ²ï¼›å†è°ƒæ•´ ++changeCount çš„ä½ç½®æ¥ä¿è¯å¼‚å¸¸å‘ç”Ÿåå¯¹è±¡ä»ç„¶ä¸€è‡´ã€‚ ä¸€ä¸ªå¥½çš„çŠ¶æ€å˜æ›´ç­–ç•¥æ˜¯ï¼šåªæœ‰å½“æŸç§äº‹æƒ…ï¼ˆæ¯”å¦‚èƒŒæ™¯å˜æ›´ï¼‰å·²ç»å‘ç”Ÿäº†ï¼Œæ‰å»æ”¹å˜æŸä¸ªçŠ¶æ€æ¥æŒ‡ç¤ºå®ƒå‘ç”Ÿäº†ã€‚ class Menu shared_ptrImage bg; ...;void Menu::changeBg(istream src) Lock m1(m); bg.reset(new Image(src)); ++changeCont; æ™ºèƒ½æŒ‡é’ˆçš„ reset æ˜¯ç”¨æ¥é‡ç½®å…¶ä¸­çš„èµ„æºçš„ï¼Œåœ¨å…¶ä¸­è°ƒç”¨äº†æ—§èµ„æºçš„ deleteã€‚ è¿™æ—¶å¦‚æœ new Image å‘ç”Ÿäº†å¼‚å¸¸ï¼Œä¾¿ä¸ä¼šè¿›å…¥ reset å‡½æ•°ï¼Œå› è€Œ delete ä¹Ÿä¸ä¼šè¢«è°ƒç”¨ã€‚ äº‹å®ä¸Šï¼Œä¸Šè¿°ä»£ç å¹¶ä¸èƒ½æä¾›å®Œç¾çš„å¼ºçƒˆä¿è¯ï¼Œæ¯”å¦‚Imageæ„é€ å‡½æ•°ä¸­ç§»åŠ¨ äº†istream src çš„è¯»æŒ‡é’ˆç„¶åå†æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆç³»ç»Ÿè¿˜æ˜¯å¤„äºä¸€ä¸ªè¢«æ”¹å˜çš„çŠ¶æ€ã€‚ è¿™æ˜¯ä¸€ç§å¯¹æ•´ä¸ªç³»ç»Ÿçš„å‰¯ä½œç”¨ï¼Œç±»ä¼¼çš„å‰¯ä½œç”¨è¿˜åŒ…æ‹¬æ•°æ®åº“æ“ä½œï¼Œå› ä¸ºæ²¡æœ‰é€šç”¨çš„åŠæ³•å¯ä»¥æ’¤é”€æ•°æ®åº“æ“ä½œã€‚ ä¸è¿‡è¿™ä¸€ç‚¹å¯ä»¥å¿½ç•¥ï¼Œæˆ‘ä»¬æš‚ä¸”è®¤ä¸ºå®ƒæä¾›äº†å®Œç¾çš„å¼ºçƒˆä¿è¯ã€‚ copy swap èŒƒå¼ ä¸€ä¸ªå«åš â€œcopy and swapâ€ çš„è®¾è®¡ç­–ç•¥é€šå¸¸èƒ½å¤Ÿæä¾›å¼‚å¸¸å®‰å…¨çš„å¼ºçƒˆä¿è¯ã€‚å½“æˆ‘ä»¬è¦æ”¹å˜ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…ˆæŠŠå®ƒå¤åˆ¶ä¸€ä»½ï¼Œç„¶åå»ä¿®æ”¹å®ƒçš„å‰¯æœ¬ï¼Œæ”¹å¥½äº†å†ä¸åŸå¯¹è±¡äº¤æ¢ã€‚ ä¸ºäº†æ›´å¥½åœ°ç¤ºä¾‹è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å°† Menu çš„å®ç°æ”¹å˜ä¸€ä¸‹ï¼Œé‡‡ç”¨ â€œpimpl idiomâ€ æŠŠå®ƒçš„å®ç°æ”¾åœ¨ MenuImpl ä¸­ã€‚ class Menu ...private: Mutex m; std::shared_ptrMenuImpl pImpl;;Menu::changeBg(std::istream src) using std::swap; Lock m1(mutex); std::shared_ptrMenuImpl copy(new MenuImpl(*pImpl)); copy-bg.reset(new Image(src)); ++copy-changeCount; swap(pImpl, copy); è¿™æ ·æˆ‘ä»¬çš„æ“ä½œéƒ½æ˜¯åœ¨ copy ä¸Šçš„ï¼Œå‘ç”Ÿä»»ä½•å¼‚å¸¸éƒ½ä¸ä¼šå½±å“åˆ°å½“å‰å¯¹è±¡ã€‚åªæœ‰æ”¹å¥½äº†ä¹‹åæˆ‘ä»¬æ‰ swap å®ƒä»¬ã€‚ swap åº”å½“æä¾›ä¸æŠ›å¼‚å¸¸çš„å¼‚å¸¸å®‰å…¨çº§åˆ«ã€‚ è¿å¸¦å½±å“ void Menu::changeBg(istream src) ... f1(); f2(); å› ä¸ºå…¶å®ƒçš„å‡½æ•°è°ƒç”¨ä¾‹å¦‚ f1() ä¸€æ—¦ä¸æä¾›å¼ºçƒˆçš„ä¿è¯ï¼Œé‚£ä¹ˆæ•´ä¸ªå‡½æ•°ä¸å¯èƒ½æä¾›å¼ºçƒˆçš„ä¿è¯ï¼ˆå› ä¸º changeBg æ— æ³•ä¿®å¤ f1 é€ æˆçš„èµ„æºæ³„æ¼å’Œä¸ä¸€è‡´æ€§ï¼‰ã€‚ å¦‚æœå‡½æ•°åªæ“ä½œå±€éƒ¨æ€§çŠ¶æ€ï¼Œå°±èƒ½æä¾›æ›´å¥½çš„ä¿è¯ã€‚å¦‚æœå‡½æ•°å¯¹éå±€éƒ¨æ€§æ•°æ®æœ‰è¿å¸¦å½±å“ï¼Œä¸å¯æ§å› ç´ å°±ä¼šæˆå€å¢åŠ ã€‚ ä¾‹å¦‚ï¼šå¦‚æœf1() ä¿®æ”¹äº†æ•°æ®åº“ï¼Œè¿™ä¸ªåŠ¨ä½œå‘ç”Ÿä»¥åï¼Œä¾¿æ²¡æœ‰ä»€ä¹ˆæ“ä½œå¯ä»¥å–æ¶ˆå¤åŸ â€”â€” ç”¨æˆ·å¯èƒ½å·²ç»çœ‹åˆ°äº†æ–°æ”¹åŠ¨ã€‚ è¿™æ„å‘³ç€ç›²ç›®è¿½æ±‚æœ€ä½³å®‰å…¨ä¿è¯ä¸æ˜¯ä¸€ä¸ªçµæ´»çš„æ–¹å¼ã€‚ æ•ˆç‡é—®é¢˜ copyswap çš„å…³é”®åœ¨äºå‰¯æœ¬ï¼Œè€Œå‰¯æœ¬æ„å‘³ç€è€—ç”¨å¯èƒ½å·¨å¤§çš„ç©ºé—´å’Œæ—¶é—´ï¼Œä»¥åŠè´¹åŠ²å¿ƒåŠ›å¸¦æ¥çš„å¤æ‚åº¦ã€‚æ‰€ä»¥é€€è€Œæ±‚å…¶æ¬¡é€‰æ‹©åŸºæœ¬ä¿è¯ å¹¶ä¸ä¸¢äººã€‚ ä¸€ä¸ªå‡½æ•°çš„å¼‚å¸¸å®‰å…¨çº§åˆ«ä¸ä¼šé«˜äºå®ƒè°ƒç”¨çš„æ‰€æœ‰å‡½æ•°ä¸­å®‰å…¨çº§åˆ«æœ€ä½çš„é‚£ä¸ªã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ä¸ºè‡ªå·±çš„å‡½æ•°æä¾›å¼ºçƒˆçš„å®‰å…¨ä¿è¯ï¼Œ ä¸€æ—¦æŸä¸ªå‡½æ•°ä¸å…·å¤‡å¼‚å¸¸å®‰å…¨æ€§ï¼Œæœ€ç»ˆæ•´ä¸ªç³»ç»Ÿéƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚â€œä¸€é¢—è€é¼ å±ï¼Œåäº†ä¸€é”…ç²¥ã€‚â€æ˜¯ä¹Ÿ å½“ä½ å†™æ–°çš„ä»£ç æˆ–ä¿®æ”¹åŸæœ‰ä»£ç æ—¶ï¼Œè€ƒè™‘å¦‚ä½•è®©å®ƒå…·å¤‡å¼‚å¸¸å®‰å…¨æ€§ï¼š ä¸€é©¬å½“å…ˆçš„æ˜¯â€œé€šè¿‡å¯¹è±¡ç®¡ç†èµ„æº( item 13)â€ï¼Œæ¥é˜»æ­¢å†…å­˜æ³„æ¼ã€‚ ä¹‹ååšæŒä¸‰ä¸ªâ€œå¼‚å¸¸å®‰å…¨ä¿è¯â€ä¸­çš„ä¸€ç§ï¼Œæ¥è´¯å½»åœ¨è‡ªå·±çš„æ¯ä¸€è¡Œä»£ç ã€‚ æœ€åå°†ä½ çš„æ€è·¯å†™æˆæ–‡æ¡£ï¼Œä¸ºç”¨æˆ·å’Œç»´æŠ¤äººå‘˜ç€æƒ³ã€‚ å‡½æ•°çš„ å¼‚å¸¸å®‰å…¨æ€§ä¿è¯ æ˜¯å¯è§æ¥å£çš„ä¸€éƒ¨åˆ†ï¼Œè¯·æ…é‡é€‰æ‹©ã€‚ ç†è®ºä¸Šï¼Œä½ æœ€å¥½é€‰æ‹©éœ€æ±‚åœºæ™¯ä¸‹å®‰å…¨ç¨‹åº¦æœ€é«˜çš„ä»£ç ã€‚ 30.äº†è§£ inlining çš„é‡Œé‡Œå¤–å¤– å°†å¤§å¤šæ•° inlining é™åˆ¶åœ¨å°å‹ã€é¢‘ç¹è°ƒç”¨çš„å‡½æ•°èº«ä¸Šã€‚ è¿™èƒ½è®©æ—¥åçš„è°ƒè¯•è¿‡ç¨‹å’Œ binary upgradability æ›´å®¹æ˜“ï¼Œæœ€å°åŒ–ä»£ç è†¨èƒ€ï¼Œæé«˜ç¨‹åºé€Ÿåº¦ã€‚ function templateå‡ºç°åœ¨å¤´æ–‡ä»¶ï¼Œä¸æ„å‘³ç€å°±è¦ç”¨ inline å½¢å¼ã€‚ æ³¨æ„ç‚¹ï¼š inline å¸®åŠ©ç¼–è¯‘å™¨å…é™¤å‡½æ•°è°ƒç”¨æˆæœ¬ï¼Œå¯¹ inline function çš„æ¯ä¸€ä¸ªè°ƒç”¨ä»¥å‡½æ•°æœ¬ä½“æ›¿æ¢ã€‚ç‰ºç‰²çš„æ˜¯å¢åŠ çš„ç›®æ ‡ç (object code) å¤§å°ã€‚ æœºå™¨å†…å­˜æœ‰é™ï¼Œinline function åè€Œä¼šå› ä¸ºå¤ªå¤§çš„ç¨‹åºä½“ç§¯é€ æˆé¢å¤–çš„ paging å’Œ é™ä½çš„ instruction cache hit rateã€‚ï¼ˆå½“ç„¶äº†ï¼Œinline å‡½æ•°æœ¬ä½“å°çš„è¯åè€Œä¼šæ¯”å‡½æ•°è°ƒç”¨çš„ object code æ›´å°ï¼Œäº§ç”Ÿç›¸åçš„è‰¯æ€§æ•ˆæœï¼‰ inline æœ¬èº«å¯è¯´å¯ä¸è¯´ã€‚ç¼–è¯‘å™¨å¯èƒ½å·å·å£°æ˜ inline ï¼ˆæ¯”å¦‚ ä¸€éƒ¨åˆ†class member functionï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‰ä½ çš„æƒ³æ³•è¦æ±‚ç¼–è¯‘å™¨è¿™æ ·åšï¼ˆvirtual å³ä½¿è¦æ±‚ä¹Ÿæ²¡æœ‰ç”¨ï¼Œå®ƒéœ€è¦ç­‰å¾…åˆ°è¿è¡ŒæœŸï¼‰ã€‚ ä¸€ä¸ªè¯¯åŒºï¼šinline function åœ¨å¤´æ–‡ä»¶å†…ï¼Œtemplate ä¹Ÿåœ¨å¤´æ–‡ä»¶é‡Œã€‚ä½†function templates ä¸ä¸€å®šæ˜¯ inlineã€‚ å‡½æ•°æŒ‡é’ˆçš„è°ƒç”¨é€šå¸¸ä¸ä¼šè¢« inline å…è®¸ã€‚ ç¼–è¯‘å™¨ inline çš„è¿‡ç¨‹ï¼Œé¦–å…ˆè¦ç”Ÿæˆä¸€ä¸ª outlined å‡½æ•°æœ¬ä½“ï¼Œå†é€šè¿‡æŒ‡é’ˆæŒ‡å‘é‚£äº›å‡½æ•°ã€‚å‡½æ•°æŒ‡é’ˆæœ‰æ—¶ä¼šæ‰°ä¹±ç¼–è¯‘å™¨çš„è¿™ä¸€æ“ä½œã€‚ æ„é€ å‡½æ•°å’Œææ„å‡½æ•°çš„ inline æ¯”è¡¨é¢çœ‹èµ·æ¥å¤æ‚çš„å¤šã€‚è¿™å“¥ä¿©ä¸é€‚åˆ inline ã€‚ class Basepublic: â€¦â€¦private: std::string bm1, bm2;;class Derived: public Base public: Derived()//Derivedæ„é€ å‡½æ•° â€¦â€¦private: std::string dm1, dm2, dm3;; çœ‹èµ·æ¥æ˜¯ä¸ªç©ºæ„é€ å‡½æ•°ï¼Œäººç•œæ— å®³ã€‚å®é™…ä¸Šâ€¦â€¦ åœ¨ç¼–è¯‘å™¨å¤„ç†ä¸‹å¯èƒ½æ˜¯è¿™ä¸ªæ ·å­ï¼š Derived::Derived()//æ¦‚å¿µå®ç° Base::Base(); try dm1.std::string::string();//æ„é€ dm1 catch(â€¦â€¦) Base::~Base();//é”€æ¯base classéƒ¨åˆ† throw;//æŠ›å‡ºå¼‚å¸¸ try dm2.std::string::string(); //æ„é€ dm2 catch(â€¦â€¦) dm1.str::string::~string();//é”€æ¯dm1 Base::~Base(); throw; try dm3.std::string::string(); catch(â€¦â€¦) dm2.std::string::~string(); dm1.std::string::~string(); Base::~Base(); //å®é™…ä»£ç ä¼šæ›´ç²¾è‡´å¤æ‚ ç”±æ­¤å¯çŸ¥ï¼Œinline constructordeconstructor çš„ä¸æ˜æ™ºï¼ˆç¼–è¯‘å™¨è‡ªå·±å¯èƒ½ä¼šç›´æ¥æ‹’ç» inlineï¼‰ã€‚ ä½ å¾—éšæ—¶è¯„ä¼° inline å‡½æ•°çš„å†²å‡»åŠ›ã€‚ inline function ä¸èƒ½éšç€ç¨‹åºåº“å‡çº§è€Œå‡çº§ã€‚ä¸€æ—¦ inline function è¢«æ”¹å˜ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯ç¨‹åºéƒ½è¦é‡æ–°ç¼–è¯‘ã€‚è€Œ non-inline function åªéœ€è¦å®¢æˆ·ç«¯é‡æ–°è¿æ¥ã€‚ ç»¼ä¸Šç»“è®ºï¼šæ…é‡ inlineã€‚æ­£å¸¸æµç¨‹æ˜¯å…ˆä¸è¦ inline ï¼ˆé™¤éå¥‘åˆåº¦å¤ªé«˜ï¼‰ï¼ŒæŠŠæ‰€æœ‰å‡½æ•°å†™å®Œå†æ ¹æ®äºŒå…«æ³•åˆ™è§‚å¯Ÿæ˜¯å¦æœ‰ inline çš„éœ€æ±‚ã€‚ 80-20ç»éªŒæ³•åˆ™ï¼šç¨‹åºå¾€å¾€å°†å…«æˆæ‰§è¡Œæ—¶é—´èŠ±åœ¨äºŒæˆä»£ç ä¸Šã€‚ 31.å°†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾å­˜å…³ç³»é™è‡³æœ€ä½ ç¨‹åºåº“å¤´æ–‡ä»¶åº”è¯¥ä»¥â€œå®Œæ•´ä¸”ä»…æœ‰å£°æ˜å¼â€çš„å½¢å¼å­˜åœ¨ã€‚ è¯¥åŸåˆ™æ— è®ºæ¶‰åŠ template éƒ½é€‚ç”¨ã€‚ å®ç°ä¾å­˜æ€§æœ€å°åŒ–çš„æ€æƒ³ï¼šç›¸ä¾äºå£°æ˜å¼ï¼Œä¸è¦ç›¸ä¾äºå®šä¹‰å¼ã€‚ åŸºäºæ€æƒ³çš„ä¸¤ä¸ªæ‰‹æ®µï¼šHandle class å’Œ Interface class ã€‚ åœºæ™¯ï¼š class Personpublic: Person(const stringname ,const Date birthday, const Address addr); string name() const; Date theBirthDate; Address theAddress; æ˜¾ç„¶è¿™ä¸ª class ä¸èƒ½ç¼–è¯‘ã€‚ä½ è¿˜å¾—æä¾› composition æ•°æ®ç±»å‹çš„å®šä¹‰(å®ç°)ï¼šstringï¼ŒDateï¼ŒAddressè¿™ç§ã€‚ è€Œè¿™ç§ç±»å‹å®šä¹‰é€šå¸¸åœ¨å¤´æ–‡ä»¶é‡Œï¼š#include ã€‚ è¿™ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šPerson å®šä¹‰æ–‡ä»¶å’Œ Person å†…å«æ–‡ä»¶å½¢æˆäº†ä¸€ç§ç¼–è¯‘ä¾å­˜å…³ç³»ï¼ˆcompilation dependencyï¼‰ã€‚åœ¨é«˜ç¼–è¯‘ä¾å­˜å…³ç³»ä¸‹ï¼Œä¸€æ—¦å†…å«åœ¨ class ä¸­çš„ç±»å‹è¢«é‡æ–°ç¼–è¯‘(åŒ…æ‹¬ç±»å‹å®šä¹‰æ–‡ä»¶ä¸­çš„å¤´æ–‡ä»¶æ”¹åŠ¨)ï¼Œå…¶ä»–æ‰€æœ‰åŒä¸€æ–‡ä»¶ä¸­åŒ…å«çš„å¤´æ–‡ä»¶éƒ½è¦è¿›è¡Œç¼–è¯‘ï¼Œç”šè‡³æ³¢åŠé‚£äº›ä½¿ç”¨äº† Person class çš„æ–‡ä»¶ã€‚è¿™å°†å¯¼è‡´éå¸¸å¤¸å¼ çš„è´è¶æ•ˆåº”ã€‚ é™ä½ç¼–è¯‘ä¾å­˜å…³ç³»çš„ä¸€ä¸ªæ‰‹æ®µï¼šå°†å¯¹è±¡å®ç°ç»†ç›®éšè—äºä¸€ä¸ªæŒ‡é’ˆèƒŒå æŠŠ Person åˆ†å‰²ä¸ºä¸¤ä¸ª class ï¼Œä¸€ä¸ªåªæä¾›æ¥å£ï¼Œä¸€ä¸ªè´Ÿè´£æ¥å£åçš„å…·ä½“å®ç°ã€‚ #includestring //string ä¸å‚ä¸å‰ç½®å£°æ˜ï¼Œå‡†ç¡®æ¥è¯´å®ƒæ˜¯ä¸ªå†…ç½® typedef ï¼ŒçœŸæ­£çš„å£°æ˜æ¯”è¾ƒå¤æ‚ã€‚#includememory //ä¸è¦è¯¯ä¼šï¼Œè¿™é‡Œæ˜¯ä¸ºäº†å…±äº«æŒ‡é’ˆæ‰å¼•å…¥//å‰ç½®å£°æ˜class PersonImpl;class Date;class Address;class Person //Person åˆ†åŠ:æ­¤Person classè´Ÿè´£æ¥å£å£°æ˜public: Person(const stringname ,const Date birthday, const Address addr); string name() const; Date theBirthDate; Address theAddress;private: //Person åˆ†åŠï¼šè´Ÿè´£å®ç°çš„é‚£ ä¸ªPerson class å–åä¸º PersonImpl tr1::shared_ptrPersonImpl pImpl; //ä¸»è§’ç™»åœºäº† class åªå†…å«ä¸€ä¸ªæŒ‡é’ˆæˆå‘˜ï¼Œæ¥æŒ‡å‘å®ç°ç±»ã€‚ è¿™ç§è®¾è®¡ç§°ä¸º pimpl idiom ï¼ˆpointer to implementationï¼‰ è¿™æ ·ä¸€æ¥ï¼ŒPerson å®¢æˆ·ä¸ç±»å‹å…·ä½“å®ç°åˆ†ç¦»äº†ï¼Œclassçš„å®ç°ä¿®æ”¹ä¹Ÿä¸éœ€è¦å®¢æˆ·ç«¯é‡æ–°ç¼–è¯‘ï¼Œå¹¶ä¸”ä¿è¯äº†å°è£…æ€§ã€‚ è¿™å°±æ˜¯â€œæ¥å£ä¸å®ç°åˆ†ç¦»â€çš„å¦™å¤„ã€‚ ç»“è®ºï¼š èƒ½ä½¿ç”¨object reference object pointer å¯ä»¥å®Œæˆä»»åŠ¡ï¼Œå°±ä¸è¦ç”¨ objects ã€‚ å¯ä»¥åªé ä¸€ä¸ªç±»å‹å£°æ˜å¼å°±å®šä¹‰å‡ºæŒ‡å‘è¿™ä¸ªç±»å‹çš„ reference pointer ã€‚ å°½é‡ä»¥ class å£°æ˜å¼æ›¿æ¢ class å®šä¹‰å¼ è¦ç”¨åˆ°æŸä¸ª class æ—¶ï¼Œä¸ä¸€å®šéè¦è¿™ä¸ª class çš„å®šä¹‰ã€‚ class Date;Date today();void clear(Date d); å£°æ˜å¯¹åº”å‡½æ•°è€Œæ— éœ€å®šä¹‰ Date ï¼Œå¬èµ·æ¥å¾ˆç¥å¥‡ã€‚ åç»­åœ¨è°ƒç”¨ç›¸åº”å‡½æ•°æ—¶ï¼Œå¯¹åº”ç±»å‹ Date çš„å®šä¹‰å°±éœ€è¦æå‰æ›å…‰äº†ã€‚ æœ‰å¯èƒ½ä¸€ä¸ªå‡½æ•°åº“æœ‰æ•°ç™¾ä¸ªå‡½æ•°å£°æ˜ï¼Œç”¨æˆ·å¼±æ°´ä¸‰åƒè€Œç‹¬å–ä¸€ç“¢ã€‚è¿™æ—¶å°† class å®šä¹‰å¼ä»å‡½æ•°å£°æ˜æ‰€åœ¨å¤´æ–‡ä»¶è½¬ç§»åˆ°å‡½æ•°è°ƒç”¨çš„å®¢æˆ·æ–‡ä»¶ï¼Œå°±å¯ä»¥å°†â€œä¸å¿…è¦çš„ç±»å‹å®šä¹‰â€å¸¦æ¥çš„ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„ç¼–è¯‘ä¾å­˜æ€§å»æ‰ã€‚ ä¸ºå£°æ˜å¼å’Œå®šä¹‰å¼æä¾›ä¸åŒçš„å¤´æ–‡ä»¶ å£°æ˜å’Œå®šä¹‰åˆ†ç¦»çš„è®¾è®¡éœ€è¦ä¸¤ä¸ªå¤´æ–‡ä»¶ã€‚ä¸€ä¸ªç”¨äºå£°æ˜å¼ï¼Œä¸€ä¸ªç”¨äºå®šä¹‰å¼ã€‚ä¸¤ä¸ªæ–‡ä»¶è¦ä¿æŒä¸€è‡´æ€§ï¼Œä¸€ä¸ªéšå¦ä¸€ä¸ªæ”¹å˜è€Œæ”¹å˜(æ­¤æ—¶æ˜¯å¦ä¼šæƒ³èµ· .h å’Œ .cpp ä¸¤ä¸ªæ–‡ä»¶ç±»å‹)ã€‚ æ‰¿æ¥ä¸Šè¿° Data ä¾‹å­ï¼š #include datefwd.h //Data åœ¨.hå¤´æ–‡ä»¶é‡Œå£°æ˜è€Œæœªå®šä¹‰Date today();void clear(Date d); è¿™é‡Œå¯å‚è€ƒæ ‡å‡†ç¨‹åºåº“ header file ã€‚è¿™ä¸ªå®¶ä¼™å†…å«å„ç»„ä»¶å£°æ˜å¼ã€‚å…¶å¯¹åº”å®šä¹‰åˆ†å¸ƒåœ¨å…¶ä»–ä¸åŒå¤´æ–‡ä»¶å†…ï¼š,,, å¦å¤–ï¼Œ ä¹Ÿè¯´æ˜äº†ä¸€ä¸ªäº‹å®ï¼šè¿™ä¸ªå‡†åˆ™æ—¢é€‚ç”¨äº template ï¼Œä¹Ÿé€‚ç”¨äº non-templateã€‚ å¯ä»¥å°†åªå«å£°æ˜å¼çš„å¤´æ–‡ä»¶æä¾›ç»™ template ï¼ˆæœ‰äº› build environment å…è®¸å®šä¹‰å¼åœ¨å¤´æ–‡ä»¶å†…ï¼Œä¹Ÿæœ‰ä¸€äº›å®šä¹‰å¼æ”¾åœ¨éå¤´æ–‡ä»¶å†…ï¼‰ã€‚ è¿™é‡Œ C++æœ‰ä¸ªå…³é”®å­—ï¼šexportï¼Œå…è®¸å°† template å£°æ˜å¼å’Œå®šä¹‰å¼åˆ†å‰²åœ¨ä¸åŒæ–‡ä»¶å†…ã€‚ä¸è¿‡æ”¯æŒå®ƒçš„ç¼–è¯‘å™¨å¾ˆå°‘ï¼Œè¿™é‡Œä¸èµ˜è¿°ã€‚ Handle classes å’Œ Interface classes Handle classes ï¼šä½¿ç”¨ pimpl idiom çš„ classã€‚ è¿™ç§ class æœ‰ä¸¤ç§å‘æŒ¥ä½œç”¨çš„åœºæ™¯ï¼š å°†è¯¥ class çš„æ‰€æœ‰å‡½æ•°è½¬äº¤ç»™å¯¹åº”å®ç°ç±»ï¼Œå¹¶è®©å®ç°ç±»å®ŒæˆçœŸæ­£å·¥ä½œã€‚ #include Person.h // æˆ‘ä»¬æ­£åœ¨å®ç°Person classï¼Œæ‰€ä»¥å¿…é¡»#includeå…¶classå®šä¹‰å¼#include PersonImpl.h // æˆ‘ä»¬ä¹Ÿå¿…é¡»#include PersonImplçš„classå®šä¹‰å¼ï¼Œå¦åˆ™æ— æ³•è°ƒç”¨ // å…¶æˆå‘˜å‡½æ•°ï¼› // æ³¨æ„ï¼ŒPersonImplæœ‰ç€å’ŒPersonå®Œå…¨ç›¸åŒçš„æˆå‘˜å‡½æ•°ï¼Œä¸¤è€…æ¥å£å®Œå…¨ç›¸åŒã€‚Person::Person(const std::string name, const Date birthday, const Address addr)\t:pImpl(new PersonImpl(name, birthday, addr))std::string Person::name() const\treturn pImpl-name(); å¦™æï¼Person constructor é€šè¿‡ new è°ƒç”¨ PersonImpl constructor ï¼Œä»¥åŠ Person::name å‡½æ•°å†…è°ƒç”¨ PersonImpl::name ï¼Œè¿™æ˜¯å¾ˆå€¼å¾—å…³æ³¨çš„åœ°æ–¹ã€‚ è®©Person æˆä¸º Handle class ä¸ä¼šæ”¹å˜å®ƒæœ¬è¯¥åšçš„äº‹ï¼Œåªä¼šæ”¹å˜å®ƒåšäº‹çš„æ–¹å¼ã€‚ ä»¤ Person æˆä¸ºä¸€ç§ç‰¹æ®Šçš„ abstract base class ï¼Œå³ Interface classã€‚ abstract class æ„å‘³ç€æ­¤å›å¾€å¾€æ²¡æœ‰æˆå‘˜å˜é‡ï¼Œä¹Ÿæ²¡æœ‰æ„é€ å‡½æ•°ï¼Œåªå‰©äº› virtual ææ„å‡½æ•°å’Œä¸€ç»„ pure virtual å‡½æ•°ã€‚ ä¸€ä¸ªé’ˆå¯¹ Person çš„ Interaface class ï¼š class Personpublic: virtual ~Person(); virtual string name() const =0; virtual string birthDate() const =0; virtual string address() const =0; è¯¥ class ä¸èƒ½å…·ç°å‡ºå®ä½“ã€‚ç”¨æˆ·é€šå¸¸ä¼šè°ƒç”¨ç±»ä¼¼ derived class çš„æ„é€ å‡½æ•°æ¥å®Œæˆå…·ç°åŒ–ã€‚è¿™ä¸ªå‡½æ•°å³ factory class æˆ– virtual constructor ã€‚å®ƒä»¬ä¼šè¿”å›æŒ‡é’ˆï¼ŒæŒ‡å‘åŠ¨æ€åˆ†é…çš„å¯¹è±¡ï¼ˆè¿™ä¸ªå¯¹è±¡æ”¯æŒ interface class çš„æ¥å£ï¼‰ã€‚ å‡½æ•°å®ç°èŒƒä¾‹ï¼š static:class Personpublic:... //åŒä¸Š//factory func â†“ static tr1::shared_ptrPerson //è¿”å›ä¸€ä¸ªshared_ptr ï¼ŒæŒ‡å‘ä¸€ä¸ªæ–°personï¼Œ create(const string name, //åˆ©ç”¨å‚æ•°åˆå§‹åŒ– const Date birthday. const Address addr); ...; æœ‰äº†è¿™ä¸ª class ï¼Œæ”¯æŒ Interface class æ¥å£çš„å…·è±¡ç±»(concrete class) å¿…é¡»è¢«å®šä¹‰å‡ºæ¥ï¼Œè€Œä¸”çœŸæ­£çš„æ„é€ å‡½æ•°éœ€è¦è¢«è°ƒç”¨ã€‚è¿™ä¸€åˆ‡éƒ½åœ¨ virtual æ„é€ å‡½æ•°å®ç°ä»£ç ï¼ˆå½“ç„¶åŒ…æ‹¬createï¼‰çš„æ‰€åœ¨æ–‡ä»¶å†…å‘ç”Ÿã€‚ åƒè¿™æ ·ï¼š class RealPerson : public Person public: RealPerson(const std::string name,const Date birthday, const Address addr) : theName(name),theBirthDate(birthday),theAddress(addr) virtual ~RealPerson() std::string name() const; std::string birthDate() const; std::string address() const;private: std::string theName; Date theBirthDate; Address theAddress;; RealPerson ä¸‹çš„ Person::create: std::tr1::shared_ptrPerson Person::create( const std::string name,const Date birthday, const Address addr) return std::tr1::shared_ptrPerson(new RealPerson(name,birthday,addr)); RealPerson æ¼”ç¤ºäº†ä»interface class ç»§æ‰¿æ¥å£ï¼Œç„¶åå®ç°æ¥å£æ‰€è¦†ç›–çš„å‡½æ•°ã€‚ å½“ç„¶ï¼Œå®é™…æƒ…å†µä¸­çš„ Person::create å®šä¹‰å®ç°ä¼šåˆ›å»ºä¸åŒç±»å‹çš„ derived class å¯¹è±¡ï¼Œæ¥å®Œæˆé¢å¤–å‚æ•°å€¼ç­‰ä»»åŠ¡ã€‚ ç»“è®ºï¼šHandle classes å’Œ Interface classes è§£é™¤äº†æ¥å£å’Œå®ç°ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œä»è€Œé™ä½äº†æ–‡ä»¶é—´çš„ç¼–è¯‘ä¾å­˜æ€§ï¼ˆcompilation dependenciesï¼‰ã€‚å½“ç„¶å®ƒç‰ºç‰²çš„æ˜¯ï¼šä½¿ä½ åœ¨è¿è¡ŒæœŸé™ä½é€Ÿåº¦ï¼ŒåŒæ—¶å¯¹æ¯ä¸ªå¯¹è±¡ä»˜å‡ºæ›´å¤šå†…å­˜ã€‚ Handle classï¼š åŠ¨æ€åˆ†é…çš„é¢å¤–å¼€é”€ï¼šæˆå‘˜å‡½æ•°å¿…é¡»é€šè¿‡ implementation pointer å–å¾—å¯¹è±¡æ•°æ®ï¼Œä»è€Œä¸ºè®¿é—®å¢åŠ ä¸€å±‚é—´æ¥æ€§ã€‚ä½†åŒæ—¶è¿™ä¹Ÿå¯¼è‡´è®¿é—®å¯¹è±¡æ¶ˆè€—çš„å†…å­˜å¿…é¡»å¢åŠ  i-pointer çš„å¤§å°ã€‚ bad_alloc å¼‚å¸¸(å†…å­˜ä¸è¶³)ï¼šimplementation pointer å¿…é¡»åˆå§‹åŒ–ï¼ˆåœ¨ Handle class constructor å†…)ï¼Œæ¥æŒ‡å‘åŠ¨æ€åˆ†é…å¾—åˆ°çš„ implementation object ã€‚ Interface classï¼š virtual æˆæœ¬ï¼šæ¯ä¸ªå‡½æ•°éƒ½æ˜¯ virtual ï¼Œæ„å‘³ç€æ¯æ¬¡ function-called éƒ½è¦å¢åŠ ä¸€ä¸ª indirect jump æˆæœ¬ã€‚ vptr æŒ‡é’ˆæˆæœ¬ï¼šVirtual æ„å‘³ç€ Interface class çš„æ´¾ç”Ÿå¯¹è±¡å¿…é¡»æœ‰ä¸€ä¸ª vptrï¼Œè¿™ä¸ªæŒ‡é’ˆå¯èƒ½ä¼šå¢åŠ å­˜æ”¾å¯¹è±¡çš„å†…å­˜å¤§å°ã€‚ æ— è®º Handle class è¿˜æ˜¯ Interface classï¼Œä¸€æ—¦è„±ç¦» inline å‡½æ•°éƒ½å¾ˆéš¾æœ‰æ‰€ä½œä¸ºã€‚å“¥ä¿©ç”¨æ¥éšè—å®ç°ç»†èŠ‚ï¼ˆåƒå‡½æ•°æœ¬ä½“ï¼‰çš„è®¾è®¡æ­£å¥½å¥‘åˆ inlined function body åº”è¯¥è¢«ç½®äºå¤´æ–‡ä»¶çš„è®¾è®¡ã€‚ æœ€åå¿ å‘Šï¼šé¢å¤–æˆæœ¬ä¸æ˜¯æ”¾å¼ƒè¿™äºŒä½çš„ç†ç”±ã€‚åƒ virtual function ä¸€æ ·ï¼Œå¦‚æœæ¯”èµ·è¿è¡Œé€Ÿåº¦æ–‡ä»¶å¤§å°ï¼Œä½ æ›´å…³æ³¨classes ä¹‹é—´çš„è€¦åˆæ€§çš„è¯ï¼Œå°±ç”¨è¿™ Handle class å’Œ Interface class ä»£æ›¿ concrete class å§ã€‚ ç¬¬å…­ç« ï¼šInheritance and Object-Oriented Design32.public ç»§æ‰¿æ„å‘³ç€ is-a å…³ç³» public ç»§æ‰¿æ„å‘³ç€ is-a å…³ç³»ã€‚ é€‚ç”¨äºbase class çš„æ¯ä¸€ä»¶äº‹ä¹Ÿä¸€å®šé€‚ç”¨äº derived class èº«ä¸Šã€‚ å› ä¸ºæ¯ä¸€ä¸ª derived class object ä¹Ÿæ˜¯ä¸€ä¸ª base class objectã€‚ public ç»§æ‰¿çš„ derived class object ä¸å…¶çˆ¶ç±»å¯¹è±¡èƒ½å‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ï¼Œå³å­ç±»å¯¹è±¡å¯ä»¥ä»£æ›¿çˆ¶ç±»å¯¹è±¡ã€‚ä½†åä¹‹ä¸è¡Œã€‚ä¸¤è€…æ˜¯ä¸€èˆ¬åŒ–å’Œå…·è±¡åŒ–çš„åŒºåˆ«ã€‚ è¯¯åŒºï¼šç†æƒ³å¡‘æ¨¡å…³ç³»å’Œé€»è¾‘ä¸Šçš„å…³ç³»å¯èƒ½ä¸å¤§ä¸€æ ·ï¼š class Birdpublic: virtual void fly(); ...class Penguin:public Bird ... ä¼é¹…æ˜¯é¸Ÿï¼Œé¸Ÿä¼šé£ï¼Œä½†ä¼é¹…å¹¶ä¸ä¼šé£ â€”â€” è¿™æ˜¯ä¸ä¸¥è°¨çš„è¡¨è¿°åœ¨é€»è¾‘ä¸Šçš„ç¡¬ä¼¤ã€‚ **è§£å†³ï¼š**ä½¿ç”¨ virtual ç¼–è¯‘æœŸè§£å†³:æ›´å®Œå–„çš„ç»§æ‰¿ä½“ç³» //ç»†åŒ–ï¼Œä½¿é€»è¾‘ä¸Šæ›´ä¸¥è°¨class Bird...class FlyingBird:public Bird //åˆ©ç”¨FlyingBird public: virtual void fly();class Penguin:public bird ... //ä¼é¹…å‹æ ¹å°±æ²¡æœ‰é£ç¿”çš„å‡½æ•° å®é™…ä¸Šï¼Œæœ‰æ—¶éœ€æ±‚å‹æ ¹å°±ä¸éœ€è¦åŒºåˆ†è¿™ä¸ªé¸Ÿä¼šé£è¿˜æ˜¯ä¸ä¼šé£ã€‚ï¼ˆä¹Ÿè®¸æ³¨æ„ç‚¹åœ¨é¸Ÿå˜´å’Œé¸Ÿç¿…ä¸Šï¼‰ è¿™è¡¨æ˜ï¼Œæ²¡æœ‰å®Œç¾çš„è®¾è®¡ï¼Œåªæœ‰å®Œç¾çš„æ»¡è¶³éœ€æ±‚ã€‚æ ¹æ®åœºæ™¯ï¼Œé€‰æ‹©æœ€ä½³è®¾è®¡ã€‚ è¿è¡ŒæœŸè§£å†³ï¼šè¿è¡ŒæœŸå‡ºé”™ //è¡¨è¿°æ²¡é—®é¢˜ï¼Œä½†é’ˆå¯¹ä¼é¹…ï¼Œè§†ä¼é¹…æœ¬èº«ä¸ºä¸€ä¸ªä¾‹å¤–void error(const string msg);class Penguin:public Bird virtual void fly() error( Error Happened !); æˆ‘ä»¬çŸ¥é“â€œå¥½çš„æ¥å£åº”é˜²æ­¢æ— æ•ˆä»£ç é€šè¿‡ç¼–è¯‘â€ï¼Œé‚£å°±åœ¨ç¼–è¯‘æœŸæ‹’ç»ä»–å§ã€‚ å®é™…ä¸Šï¼Œâ€æ­£æ–¹å½¢æ˜¯çŸ©å½¢â€œçš„ä¾‹å­ä¹Ÿå¾ˆæœ‰ä»£è¡¨æ€§ã€‚ æ­£æ–¹å½¢æ˜¯çŸ©å½¢æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œåº”è¯¥ç”¨ public inherit æ˜ç¡®è¡¨ç¤º is-a å…³ç³»ã€‚ä½†æ­£æ–¹å½¢å››æ¡è¾¹ç›¸åŒï¼Œæ›´æ–°ä¸€æ¡è¾¹æ—¶å…¶ä½™è¾¹åŒæ­¥æ›´æ–°çš„ç‰¹æ€§å’ŒçŸ©å½¢åˆ™å¤§ä¸ºä¸åŒã€‚è¿™ç§å·®å¼‚åœ¨ is-a å…³ç³»ä¸­æ˜¯ç¾éš¾æ€§çš„ã€‚ä¹Ÿæ˜¯è¿åç›´è§‰çš„äº‹æƒ…ã€‚ is-a å¤–ï¼Œè¿˜æœ‰ is implementation in terms of å’Œ has-a å…³ç³»ã€‚ 33.é¿å…æ©ç›–ç»§æ‰¿è€Œæ¥çš„åç§° derived class åç§°ä¼šè¦†ç›– base class ï¼›è¿™å’Œ public ç»§æ‰¿ç†å¿µæ ¼æ ¼ä¸å…¥ã€‚ å¯ä»¥é€šè¿‡ using å£°æ˜å¼æˆ–è½¬äº¤å‡½æ•°è®©è¢«è¦†ç›–çš„åç§°é‡è§å¤©æ—¥ã€‚ å†…å±‚ä½œç”¨åŸŸåç§°ä¼šé®æ©å¤–å›´ä½œç”¨åŸŸçš„åç§°ã€‚å¯¹äºç»§æ‰¿æ¥è¯´ï¼Œåˆ™æ˜¯ derived class ä½œç”¨åŸŸåµŒå¥—åœ¨ base class ä½œç”¨åŸŸå†…ã€‚ class Base public: virtual void mf1() = 0; virtual void mf1(int); void mf3(); void mf3(double);class Derived :public Basepublic: virtual void mf1(); void mf3(); è¿™ä¸ªå®ç°å¾ˆç¦»è°±ã€‚ä½ ç”¨ public ç»§æ‰¿æ˜¯ is-a å…³ç³»ï¼Œè€Œè¿™äº›é‡è½½å‡½æ•°åˆæ˜ç¡®åˆ’åˆ†äº†å­ç±»å’Œçˆ¶ç±»çš„ç•Œé™ã€‚ ç¼–è¯‘å™¨æ˜é¢ä¸Šåœ¨é˜»æ­¢è¿™ä»¶äº‹ï¼ˆé˜²æ­¢å»ºç«‹ new derived class åŒæ—¶æ— æ„é—´ç»§æ‰¿è¿œæˆ¿çš„ base classï¼‰ã€‚ è€Œä½ å´åœ¨å†’ compiler ä¹‹å¤§ä¸è®³ (is-a)ã€‚ åç§°é®æ©è§„åˆ™æ²¡æœ‰æ”¹å˜ã€‚å­ç±»çš„mf1() , mf3() éƒ½ä¼šå½»åº•è¦†ç›–çˆ¶ç±»çš„åŒåå‡½æ•°ã€‚ Derived d;d.mf1(); //derived::mf1();d.mf1(6); //error hiding è™½ç„¶å‚æ•°ç±»å‹ä¸åŒï¼Œä½†è¿˜æ˜¯è¢«é®ç›–äº†d.mf3(); //derived::mf2();d.mf3(6); //error hiding éœ€æ±‚1ï¼šå­ç±»æ— å‚åŒåå‡½æ•°è¦†ç›–çˆ¶ç±»æ— å‚åŒåå‡½æ•°ï¼Œä½†ä¹Ÿè¦ç»§æ‰¿çˆ¶ç±»åŒåå¸¦å‚å‡½æ•°ã€‚ è§£å†³ï¼šusing å£°æ˜å¼ class Derived:public Basepublic: using Base::mf1;//Base class å†…åä¸ºmf1å’Œmf3çš„æ‰€æœ‰ä¸œè¥¿ using Base::mf3;//åœ¨ Derived scope å…¨éƒ¨å¯è§ä¸”public virtual void mf1(); //å®šä¹‰ ...//mf3åŒç†d.mf1(); //derived::mf1();d.mf1(6); //base::mf1(6); éœ€æ±‚2ï¼šåªæƒ³ç»§æ‰¿æ— å‚åŒåå‡½æ•°ã€‚ è§£å†³ï¼šforwarding function ï¼ˆè½¬äº¤å‡½æ•°) class Base ... //åŒä¸Šclass Derived:private Base //private ç»§æ‰¿ï¼Œè¿™ä¸œè¥¿ç±»ä¼¼ has-a è€Œé is-apublic: virtual void mf1() Base::mf1(); //è½¬äº¤å‡½æ•°ï¼Œæš—è‡ªæˆä¸º inline ...d.mf1(); //è°ƒç”¨ derived::mf1ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯ base::mf1d.mf1(6); //error inline è½¬äº¤å‡½æ•°çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯ä¸ºä¸æ”¯æŒ using çš„è€æ—§ç¼–è¯‘å™¨æä¾›ä¸€ç§æ–¹æ³•ï¼Œå°†ç»§æ‰¿åç§°æ±‡å…¥å­ç±» scope å†…ã€‚ 34.åŒºåˆ†æ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿ æ¥å£ç»§æ‰¿å’Œå®ç°ç»§æ‰¿ä¸åŒã€‚ public ç»§æ‰¿ä¸‹ï¼Œderived class æ€»æ˜¯ç»§æ‰¿ base class æ¥å£ åŒºåˆ†ä¸åŒæ¥å£ï¼Œä½¿ä¹‹å„å¸å…¶èŒã€‚ pure virtual functionåªè´Ÿè´£æ¥å£ç»§æ‰¿ã€‚ impure virtual function è´Ÿè´£æŒ‡å®š æ¥å£ç»§æ‰¿ å’Œ é»˜è®¤å®ç°ç»§æ‰¿ã€‚ non-virtual function å…·ä½“æŒ‡å®šæ¥å£ç»§æ‰¿ä»¥åŠå¼ºåˆ¶æ€§å®ç°ç»§æ‰¿(ä¸å¯æ›´æ”¹)ã€‚ public ç»§æ‰¿ ä¸¥æ ¼æ¥è¯´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š function interface inheritance (å‡½æ•°æ¥å£ç»§æ‰¿) function implementation (å‡½æ•°å®ç°) è®¾è®¡ä¸€ä¸ª class ï¼Œå¾€å¾€ä½ æœ‰ä¸‰ç§å¯èƒ½çš„éœ€æ±‚ï¼š å­ç±»åªç»§æ‰¿æˆå‘˜å‡½æ•°æ¥å£ï¼ˆå‡½æ•°å£°æ˜ï¼‰ï¼› å­ç±»åŒæ—¶ç»§æ‰¿å‡½æ•°çš„æ¥å£å’Œå®ç°ï¼Œä½†å¸Œæœ›èƒ½ override è¿™äº›ç»§æ‰¿çš„å®ç°ã€‚ å­ç±»åŒæ—¶ç»§æ‰¿å‡½æ•°çš„æ¥å£å’Œå®ç°ï¼›ä½†ä¸å…è®¸ è¦†å†™ä»»ä½•ä¸œè¥¿ã€‚ class Shapepublic:\tvirtual void draw() const = 0;\tvirtual void error(const std::string msg);\tint objectID() const;; class Rectangle: public Shape...;class Ellipse: public Shape...; pure virtual function ï¼šè®© derived class åªç»§æ‰¿å‡½æ•°æ¥å£ virtual void draw() const = 0; å®é™…ä¸Šï¼Œä½ å¯ä»¥ä¸º pure virtual function æä¾›ä¸€ä»½å®šä¹‰ï¼Œä½œä¸º base class (Shape) çš„å®ç°ä»£ç ã€‚åªéœ€è¦åœ¨è°ƒç”¨æ—¶æ˜ç¡®æŒ‡å‡ºå…¶ class åã€‚è¿™ç§å®ç°èƒ½æä¾›ä¸€ç§æœºåˆ¶ï¼šä¸º impure virtual å‡½æ•°æä¾›æ›´å®‰å…¨çš„é»˜è®¤å®ç°ã€‚ impure virtual function ï¼šè®© derived class åŒæ—¶ç»§æ‰¿æ¥å£å’Œå®ç°ï¼Œå¹¶å…è®¸ override ã€‚ è¿™ä¸ªæ¥å£è¡¨ç¤ºï¼šæ¯ä¸ª class å¯ä»¥è‡ªç”±å®šä¹‰è‡ªå·±çš„é”™è¯¯å¤„ç†å‡½æ•°ï¼›ä½†å¦‚æœä½ ä¸æƒ³å†™ä»»ä½•ä¸œè¥¿ï¼Œè¯¥å‡½æ•°å°†é€€å›åˆ° base class æ¥å®ç°(é»˜è®¤ç‰ˆæœ¬)ã€‚ ä½†è¿™ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼š å¦‚æœ derived class åº”è¯¥é‡æ–°å®šä¹‰å¯¹åº” impure function ï¼Œè€Œç¨‹åºå‘˜åˆå¿˜è®°äº†åœ¨ class é‡Œå†™ä¸Šå®šä¹‰ï¼Œè¿™å°±ä¼šå¯¼è‡´å‡½æ•°åœ¨æ— æ„é—´æ­£å¸¸è¿è¡Œäº† base::function() ã€‚è¿™ä¸æ˜¯ä½ æƒ³è¦çš„ç»“æœã€‚ è§£å†³ï¼šåˆ‡æ–­ virtual func-interface å’Œ é»˜è®¤å®ç° çš„è¿æ¥ class Airplanepublic:\tvirtual void fly(const Airport destination) = 0; //é‡‡ç”¨çº¯è™šå‡½æ•°åªæä¾›æ¥å£ ...protected:\tvoid defaultFly(const Airport destination) ... //ç¼ºçœè¡Œä¸ºã€‚å¹¶ä¸”è®¿é—®æ–¹å¼æ˜¯protectedã€‚\t; è¿™æ ·ï¼Œimpure å°±å˜æˆäº† pure ã€‚åªæä¾›é£æœºé£è¡Œæ¥å£ã€‚ åŸæ¥çš„é»˜è®¤å®ç°ä»¥ç‹¬ç«‹å‡½æ•°çš„å§¿æ€å‡ºç°ã€‚ //å¸Œæœ›ä½¿ç”¨é»˜è®¤å®ç°çš„ model Aclass ModelA:public Airplanepublic: virtual void fly(const Airport destination) defaultFly(destination); ...//è‡ªå·±å®ç°çš„ model Bclass ModelB:public Airplanepublic: virtual void fly(const Airport destination) ... //è‡ªå·±å®ç°å§ ... å½“ç„¶ï¼Œç²—å¿ƒçš„ç¨‹åºå‘˜ç›´æ¥å‰ªåˆ‡code segment è¿˜æ˜¯ä¼šå¼•å‘é—®é¢˜ã€‚ä½†å®‰å…¨æ€§è‡³å°‘é«˜äº†ä¸€äº›ã€‚ æœ‰äº›äººåå¯¹ç”¨ä¸åŒçš„å‡½æ•°æä¾›æ¥å£å’Œå®ç°ã€‚å¦‚æœå®åœ¨æ„Ÿè§‰åˆ«æ‰­ï¼Œä½ å¯ä»¥åˆ©ç”¨ä¸Šæ–‡æåˆ°è¿‡çš„ï¼Œpure virtual çš„é»˜è®¤å®ç°ã€‚ //å¸Œæœ›ä½¿ç”¨åŒä¸€å‡½æ•°é»˜è®¤å®ç°çš„ model Aclass ModelA:public Airplanepublic: virtual void fly(const Airport destination) Airplane::fly(destination); ...//Bä¸å˜ã€‚ non-virtual function ï¼šä»¤ derived class ç»§æ‰¿å‡½æ•°æ¥å£å’Œä¸€ä»½å¼ºåˆ¶æ€§å®ç° int objectID() const; å¼ºåˆ¶æ€§ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºâ€œinvariant greater than specializationâ€ã€‚å®ƒç»å¯¹ä¸èƒ½è¢«é‡æ–°å®šä¹‰ã€‚ ä¸¤ä¸ªå¸¸è§é”™è¯¯ï¼š å°†æ‰€æœ‰å‡½æ•°å£°æ˜ä¸º non-virtual é¦–å…ˆ non-virtual ææ„ä¼šå¸¦æ¥é—®é¢˜ã€‚å…¶æ¬¡ä½ æ²¡å¿…è¦å¤ªæ‹…å¿ƒ virtual function çš„æ•ˆç‡æˆæœ¬ã€‚ä»»ä½• class æ‰“ç®—ä½œä¸º base classï¼Œéƒ½å¾—æœ‰å¥½å¤š virtual ã€‚ä¸è¦å¿˜è®°80-20æ³•åˆ™ã€‚ å°†æ‰€æœ‰æˆå‘˜å‡½æ•°å£°æ˜ä¸ºvirtual è¿™å±äºçŸ«æ‰è¿‡æ­£ã€‚å¯¹äºæŸäº›å‡½æ•°ï¼Œå®ƒå°±æ˜¯ä¸è¯¥è¢«é‡æ–°å®šä¹‰ã€‚è¦æœ‰åšå®šçš„ç«‹åœºã€‚ 35.è€ƒè™‘virtualå‡½æ•°ä»¥å¤–çš„é€‰æ‹© virtual å‡½æ•°çš„æ›¿ä»£æ–¹æ¡ˆæœ‰ NVI æ–¹æ³•å’Œä¸åŒå½¢å¼çš„ Strategy è®¾è®¡æ¨¡å¼ã€‚ NVIï¼ˆnon-virtual Interfaceï¼‰ æ–¹æ³•å±äºç‰¹æ®Šå½¢å¼çš„ Template Method è®¾è®¡æ¨¡å¼ å®ç°ä» member function æ›´æ¢ä¸º class å¤–éƒ¨å‡½æ•°ï¼Œä¼šå¯¼è‡´æ— æ³•è®¿é—® class å†…éƒ¨çš„ non-public æˆå‘˜ã€‚ é™¤éä½ æ„¿æ„é™ä½å°è£…æ€§ä½¿ç”¨ friend tr1::function å¯¹è±¡çš„è¡Œä¸ºåƒä¸€èˆ¬å‡½æ•°æŒ‡é’ˆï¼Œä½†å®ƒèƒ½æ¥çº³ä¸ target signature å…¼å®¹çš„æ‰€æœ‰ callable entities ã€‚ å…¼å®¹æ€§å¼ºå¤§ï¼šå‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼çš„éšå¼è½¬æ¢ã€‚ class GameCharacterpublic: virtual int healthValue() const; //çœç•¥å®ç° ... è®¡ç®—æ¸¸æˆè§’è‰²çš„è¡€é‡ã€‚è¡€é‡æœ‰ä¸åŒè®¡ç®—æ–¹æ³•ï¼Œè€ŒåŒä¸€æ–¹æ³•åˆå¯èƒ½é€‚ç”¨äºä¸åŒäººç‰©ã€‚ virtual å½“ç„¶æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚ä½†ä¸‹é¢ä¼šæä¾›å‡ ç§æ€è·¯ä¾›å‚è€ƒï¼Œæ¥å°½é‡é¿å¼€ virtual func çš„ä½¿ç”¨ã€‚ NVI æ‰‹æ³•å®ç° Template Method æ¨¡å¼ è¯¥æ–¹æ³•ä¸»å¼  virtual å‡½æ•°åº”è¯¥å‡ ä¹å…¨æ˜¯ private ï¼Œæœ€å¥½ä¿ç•™ Healthvalue ä¸º public æˆå‘˜å‡½æ•°ï¼Œä½†è®©å®ƒæˆä¸º non-virtual ï¼Œå¹¶è°ƒç”¨ä¸€ä¸ª private virtual å‡½æ•°ã€‚ class GameDCharacterpublic: int healthValue() const // non-virtual : a wrapper ... //äº‹å‰å·¥ä½œ int retVal = doHealthValue(); //æ ¸å¿ƒå·¥ä½œ ...//äº‹åå·¥ä½œ return retVal; ...private: virtual int doHealthValue() const //è¢«è½¬ç§»åˆ°æ­¤ ... //é»˜è®¤ç®—æ³•ï¼Œè®¡ç®—å¥åº·æŒ‡æ•° ; å®¢æˆ·èƒ½é€šè¿‡ public non-virtual æˆå‘˜å‡½æ•°é—´æ¥è°ƒç”¨ private å‡½æ•°ï¼Œå³NVIï¼ˆnon-virtual interfaceï¼‰æ‰‹æ³•ï¼Œæ˜¯Template Method è®¾è®¡æ¨¡å¼çš„è¡¨ç°å½¢å¼ä¹‹ä¸€ã€‚ è¿™ä¸ª non-virtual å¯ç§°ä¹‹ä¸º virtual å‡½æ•°çš„ wrapper ã€‚ ä¼˜ç‚¹ï¼š äº‹å‰å·¥ä½œå’Œäº‹åå·¥ä½œæœ‰å¾ˆå¤§çš„å¼¹æ€§ï¼šèƒ½å¤Ÿè®¾ç½®ä¸åŒæ¡ä»¶åœºæ™¯ã€‚ NVI æ‰‹æ³•å…è®¸ derived class é‡æ–°å®šä¹‰ private virtual å‡½æ•°ï¼ˆå®ç°ï¼‰ã€‚ â€é‡æ–°å®šä¹‰â€œ æ„å‘³ç€å‡½æ•°å¦‚ä½•å®Œæˆ ï¼Œç”± derived class å†³å®šã€‚ â€œè°ƒç”¨ virtual â€æ„å‘³ç€å‡½æ•°ä½•æ—¶è¢«å®Œæˆï¼Œç”± base class å†³å®šã€‚ æ³¨æ„ï¼š NVIæ‰‹æ³•ä¸‹ï¼Œæ²¡å¿…è¦ virtual å‡½æ•°å¿…é¡»æ˜¯ privateã€‚æœ‰äº›åœºæ™¯ä¸‹ derived class åœ¨ virtual å‡½æ•°å®ç°å†…å¿…é¡»è°ƒç”¨ base class çš„å¯¹åº”åŒåå…„å¼Ÿã€‚ä¸ºäº†ä½¿ä¹‹åˆç†ï¼Œ virtual å°±åªèƒ½æ˜¯ protected äº†ã€‚ é‡åˆ°å¤šæ€ base class çš„ ææ„å‡½æ•°ï¼Œä½ ç”šè‡³å¾—æ˜¯ publicã€‚ åŸºäº Function Pointers çš„ Strategy æ¨¡å¼ NVIæ‰‹æ³•åªæ˜¯å¯¹ public virtual å‡½æ•°çš„ä¸€ä¸ªä¿®é¥°ã€‚Strategy è®¾è®¡å°†ä½¿ äººç‰©çš„healthvalue ä¸äººç‰©æœ¬èº«æ¯«æ— å…³ç³»ï¼Œç›¸äº’ç‹¬ç«‹ã€‚ å¯ä»¥çŒœå‡ºæ¥ï¼šæ¯ä¸ªäººç‰©çš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼ŒæŒ‡å‘å“ªä¸ªå¥åº·è®¡ç®—å‡½æ•°ï¼Œå°±æ˜¯å“ªä¸ªå–½ã€‚ class GameCharacter;// foward declaration//ä¸»è§’ä¹‹ä¸€ï¼šå¥åº·è®¡ç®—çš„é»˜è®¤ç®—æ³•int default_Health_Calc(const GameCharacter gc);class GameCharacterpublic: typedef int (*Health_calc_func)(const GameCharacter); explicit GameCharacter(Health_calc_func hcf = default_Health_Calc) :healthFunc(hcf) //é»˜è®¤å‚æ•°â†‘ int healthValue() const //è¿”å›è¡€é‡ï¼ˆè¿”å›å‰é€šè¿‡æŒ‡é’ˆè°ƒç”¨ä¸€æ¬¡å‡½æ•°ï¼‰ return healthFunc(*this); ... private: Health_calc_func healthFunc; //ä¸»è§’ä¹‹äºŒï¼šå‡½æ•°æŒ‡é’ˆ å®ƒå’Œæ™®é€š virtual function ç›¸æ¯”ï¼Œå¼¹æ€§å¾ˆå¤§ï¼š åŒä¸€äººç‰©ç±»å‹çš„ä¸åŒå¯¹è±¡ï¼Œä»ç„¶å¯ä»¥æœ‰ä¸åŒå¥åº·è®¡ç®—å‡½æ•°ï¼š class GameCharacter //åŒä¸Š ; int loseHealthQuickly(const GameCharacter);int loseHealthSlowly(const GameCharacter); //ä¸åŒè¡€é‡è®¡ç®— class EvilBadGuy :public GameCharacter //æ„é€ å‡½æ•°åŒcharacterï¼šä½œä¸ºæ¥å£æ’å…¥å‡½æ•°æŒ‡é’ˆ explicit EvilBadGuy(Health_cala_func hcf = default_Health_Calc) :GameCharacter(hcf) ;void test() EvilBadGuy ebg1(loseHealthQuickly); //ç›¸åŒç±»å‹äººç‰©ï¼Œä¸åŒè¡€é‡è®¡ç®— EvilBadGuy ebg2(loseHealthSlowly); å·²çŸ¥äººç‰©çš„å¥åº·è®¡ç®—å‡½æ•°ï¼Œå¯ä»¥åœ¨è¿è¡ŒæœŸå˜æ›´ã€‚ GameCharacter::set_Health_Calc //ä½œä¸ºæ¥å£ï¼Œéšæ—¶æ›¿æ¢å®šä¹‰ã€‚ å¥åº·è®¡ç®—å‡½æ•°ä¸å†æ˜¯ GameCharacter ç»§æ‰¿ä½“ç³»å†…çš„æˆå‘˜å‡½æ•°ã€‚ è¿™äº›è®¡ç®—å‡½æ•°æ²¡æœ‰è®¿é—® class çš„å†…éƒ¨ non-public æˆåˆ†ã€‚ é—®é¢˜ï¼šå¦‚æœä½ éœ€è¦ class å†…çš„ non-public ä¿¡æ¯è¿›è¡Œç²¾ç¡®è®¡ç®—ï¼Œå°±ä¼šäº§ç”Ÿé—®é¢˜ã€‚ å½“ä½ éœ€è¦å¹³æ›¿ class å†…çš„æˆåˆ†ä¸º class å¤–éƒ¨çš„ç­‰ä»·æˆåˆ†ï¼ˆå¦‚ non-member non-friend å‡½æ•° å¦ä¸€ä¸ª class çš„non-friend æˆå‘˜å‡½æ•°ï¼‰æ—¶éƒ½ä¼šå¼•å‘äº‰è®®ã€‚ è§£å†³ï¼šå¼±åŒ–classå°è£… non-member â†’ friend ä¸ºå®ç°çš„æŸä¸€éƒ¨åˆ†æä¾› public è®¿é—®å‡½æ•° å®ƒçš„ä¼˜ç‚¹(çµæ´»æ€§)ç›¸å¯¹ç¼ºç‚¹ï¼ˆå°è£…æ€§æ½œåœ¨é™ä½ï¼‰ï¼Œéœ€è¦çœ‹ä½ çš„ä½¿ç”¨åœºæ™¯ã€‚ åŸºäºtr1::function çš„Strategy æ¨¡å¼ å“å‘€ï¼Œå‡½æ•°æŒ‡é’ˆçœ‹èµ·æ¥ç»ˆå½’æœ‰äº›è‹›åˆ»è€Œæ­»æ¿ã€‚æ”¹ç”¨å‡½æ•°æŒ‡é’ˆä¸º tr1::function å¯¹è±¡ï¼Œèƒ½èˆå»å¾ˆå¤šçº¦æŸã€‚ è¿™ä¸œè¥¿å…¼å®¹æ€§å¾ˆå¼ºã€‚åªè¦ signature å’Œéœ€æ±‚ç«¯åŒ¹é…ï¼Œå…¶ä»–çš„éƒ½å¯ä»¥å•†é‡å˜é€šã€‚ class GameCharacter;int defaultHealthCala(const GameCharacter gc); class GameCharacter public: ... //å…¶ä½™éƒ¨åˆ†åŒä¸Š //åªæ˜¯å°†å‡½æ•°æŒ‡é’ˆæ”¹ä¸ºäº†functionæ¨¡æ¿ï¼Œå…¶æ¥å—ä¸€ä¸ªconst GameCharacterå‚æ•°ï¼Œå¹¶è¿”å›int typedef tr1::functionint(const GameCharacter) HealthCalcFunc; //ä»¥ int ä¸ºä¾‹ï¼Œè¿”å›å…¼å®¹intçš„everythingï¼Œæ¥æ”¶å…¼å®¹GCçš„everything ï¼ˆéšå¼è½¬æ¢ï¼‰ explicit GameCharacter(HealthCalcFunc hcf = defaultHealthCalc) :healthFunc(hcf) private: HealthCalcFunc healthFunc;; ä»…ä»…æ˜¯ private çš„è½½ä½“æ”¹å˜äº†ï¼šå‡½æ•°æŒ‡é’ˆ â†’tr1::function ã€‚ ä¸‹é¢çœ‹çœ‹å®ƒå‘æŒ¥çš„ä½œç”¨ã€‚ class GameCharacter //åŒä¸Š;class EvilBadGuy :public GameCharacter //è½½ä½“æ”¹å˜ï¼Œå…¶ä»–å¦‚å‡åŒ…æ¢ã€‚;class EyeCandyCharacter :public GameCharacter //æ„é€ å‡½æ•°ç±»ä¼¼EvilBadGuy ; //ä¸‹é¢æ˜¯ä¸åŒç±»å‹çš„å¥åº·è®¡ç®—å‡½æ•°ï¼Œæ¥çªå‡º tr1::function çš„å…¼å®¹æ€§//1.ç±»å‹ä¸åŒçš„æ™®é€šå‡½æ•° short calcHealth(const GameCharacter);//2.å‡½æ•°å¯¹è±¡ï¼Œç”¨æ¥è®¡ç®—å¥åº·æŒ‡æ•°struct HealthCalculator int operator()(const GameCharacter)const ;//3.ä¸€ä¸ªç±»ï¼šæä¾›ä¸€ä¸ªæˆå‘˜å‡½æ•°ï¼Œç”¨ä»¥è®¡ç®—å¥åº·class GameLevel public: float health(const GameCharacter)const;;void test() //äººç‰©1ï¼Œå…¶ä½¿ç”¨calcHealth()å‡½æ•°æ¥è®¡ç®—å¥åº·æŒ‡æ•° EvilBadGuy ebg1(calcHealth); //äººç‰©2ï¼Œå…¶ä½¿ç”¨HealthCalculator()å‡½æ•°å¯¹è±¡æ¥è®¡ç®—å¥åº·æŒ‡æ•° EyeCandyCharacter ecc1(HealthCalculator()); //äººç‰©3ï¼Œå…¶ä½¿ç”¨GameLevelç±»çš„health()æˆå‘˜å‡½æ•°æ¥è®¡ç®—å¥åº·æŒ‡æ•° GameLevel currentLevel; EvilBadGuy ebg2(std::tr1::bind(GameLevel::health, currentLevel, _1)); äººç‰©1,2çš„é‚£ç§éšå¼è½¬æ¢ä½ å·²ç»å¸ç©ºè§æƒ¯ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ ebg2 â€”â€” äººç‰©3 GameLevel::health å®£ç§°è‡ªå·±æ¥æ”¶ä¸€ä¸ªå‚æ•°ã€‚ä½†å®ƒå®é™…ä¸Šæœ‰ä¸€ä¸ªç¬¬äºŒå‚æ•°ï¼šthisæŒ‡é’ˆ(GameLevel ç±»å‹) GameCharacter æ„é€ å‡½æ•°çœŸæ­£åªæ¥å—å•ä¸€å‚æ•°ã€‚ å¦‚æœä½ ä½¿ç”¨ GameLevel::health ä½œä¸ºebg2 çš„å¥åº·è®¡ç®—å‡½æ•°ï¼Œä½ å¾—è¯´æœ GameCharacter æ¥å—å®ƒï¼š è®©GameLevel::health å¯ä»¥é€šè¿‡ç»‘å®šï¼Œè®©å®ƒä¸æ¥æ”¶ä¸¤ä¸ªå‚æ•°â†“ å°† currentLevel ç»‘å®šä¸ºGLå¯¹è±¡ï¼Œè®©ä»–åœ¨æ¯æ¬¡â€œGameLevel::healthè¢«è°ƒç”¨æ¥è®¡ç®— ebg2å¥åº·â€æ—¶ä½¿ç”¨ã€‚ è¿™å°±æ˜¯ tr1::bind çš„å·¥ä½œäº† â€”â€” å®ƒè¡¨æ˜ï¼šebg2 çš„å¥åº·è®¡ç®—å‡½æ•°åº”è¯¥æ€»æ˜¯ä»¥ currentLevel ä½œä¸º GLå¯¹è±¡ã€‚ (OK,è¿™é‡Œ cuttrentLevel ä½œä¸ºä¸€ä¸ª GameLevel è½½ä½“ï¼Œä½œç”¨è¢«å…·ç°åŒ–ã€æ¡†å®šäº†) _1: å½“ä¸ºebg2 è°ƒç”¨ GameLevel::health æ—¶ç³»ä»¥ cuttrentLevel ä½œä¸º GameLevel å¯¹è±¡ã€‚ ç»¼ä¸Šï¼Œè¿™ç§å…¼å®¹æ€§è¿˜æ˜¯å¾ˆå¸å¼•äººçš„ã€‚ ä¼ ç»Ÿå¤å…¸ Strategy æ¨¡å¼ å°†å¥åº·è®¡ç®—å‡½æ•°åšæˆä¸€ä¸ªåˆ†ç¦»ä½“ç³»ä¸­çš„ virtual æˆå‘˜å‡½æ•°ã€‚ UMLå›¾å¦‚ä¸‹ï¼Œæ„ä¹‰å¦‚ä¸‹ï¼š GameCharacteræ˜¯ä¸€ä¸ªç»§æ‰¿ä½“ç³»çš„æ ¹ç±»ï¼Œå…¶æ´¾ç”Ÿç±»æœ‰EvilBadGuyã€EyeCandyCharacter HealthCalcFuncæ˜¯ä¸€ä¸ªç»§æ‰¿ä½“ç³»çš„æ ¹ç±»ï¼Œå…¶æ´¾ç”Ÿç±»æœ‰SlowHealthLoserã€FastHealthLoser æ¯ä¸€ä¸ªGameCharacterå¯¹è±¡éƒ½å†…å«ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘äºä¸€ä¸ªæ¥è‡ªHealthCalcFuncç»§æ‰¿ä½“ç³»ä¸­çš„å¯¹è±¡ Codeï¼š class GameCharacter;class HealthCalcFunc //è®¡ç®—å¥åº·æŒ‡æ•°çš„ç±» public: virtual int calc(const GameCharacter gc)const ; HealthCalcFunc defaultHealthCalc;class GameCharacter public: explicit GameCharacter(HealthCalcFunc* hcf = defaultHealthCalc):pHealthCalc(hcf) int healthValue() return pHealthCalc-calc(*this); private: HealthCalcFunc* pHealthCalc;; è¿™ä¸ªè®¾è®¡æä¾›ï¼šâ€œå°†ä¸€ä¸ªç°æˆçš„å¥åº·ç®—æ³•çº³å…¥ä½¿ç”¨â€çš„æ¸ é“ â€”â€” ä¸º HealthCalcFuc ç»§æ‰¿ä½“ç³»æ·»åŠ ä¸€ä¸ª derived class å³å¯ã€‚ æ€»ç»“ï¼šæ›¿æ¢ virtual å‡½æ•°çš„å››ä¸­æ–¹æ³• ä½¿ç”¨non-virtual interface æ–¹æ³•ï¼Œä»¥ public non-virtual æˆå‘˜å‡½æ•° åŒ…è£¹ è¾ƒä½è®¿é—®æ€§(private ptotected) çš„ virtual å‡½æ•°ã€‚ å°† virtual å‡½æ•°æ›¿æ¢ä¸ºâ€œå‡½æ•°æŒ‡é’ˆæˆå‘˜å˜é‡â€ è¿™æ˜¯ Strategy è®¾è®¡æ¨¡å¼ä¸€ç§è¡¨ç°å½¢å¼ã€‚ å°† virtual å‡½æ•°æ›¿æ¢ä¸º tr1::function æˆå‘˜å˜é‡ã€‚æå¼ºçš„å…¼å®¹æ€§ã€‚ è¿™ä¹Ÿæ˜¯ Strategy è®¾è®¡æ¨¡å¼ä¸€ç§è¡¨ç°å½¢å¼ã€‚ å°†ç»§æ‰¿ä½“ç³»å†…çš„ virtual å‡½æ•°æ›¿æ¢ä¸ºå¦ä¸€ä¸ªç»§æ‰¿ä½“ç³»å†…çš„ virtual å‡½æ•°ã€‚ Strategy è®¾è®¡æ¨¡å¼çš„ä¼ ç»Ÿè®¾è®¡æ‰‹æ³•ã€‚ 36.ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿çš„ non-virtual å‡½æ•° ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿çš„ non-virtual å‡½æ•° çœ‹çœ‹ä¾‹å­å§ï¼š // æ­£å¸¸æƒ…å†µclass Bpublic: void mf(); ...;class D:public B...;D x;B *pB = x;pB - mf();//ç»ç”±è¯¥æŒ‡é’ˆè°ƒç”¨\tB::mfD *pD = x;pD - mf();//ç»ç”±è¯¥æŒ‡é’ˆè°ƒç”¨B::mf//é‡æ–°å®šä¹‰class Bpublic: void mf(); ...;class D: public Bpublic: void mf(); //é®æ©äº†B:mf; ...D x;B *pB = x;pB - mf();//è°ƒç”¨B::mfD *pD = x;pD - mf();//è°ƒç”¨D::mf **åŸå› ï¼š**non-virtual éƒ½æ˜¯é™æ€ç»‘å®šï¼ˆstatically boundï¼‰ï¼Œè€Œvirtual å‡½æ•°æ˜¯åŠ¨æ€ç»‘å®šï¼ˆdynamically boundï¼‰ é™æ€ï¼špb ä½œä¸º pointer to B ï¼Œè°ƒç”¨çš„ non-virtual å‡½æ•°æ°¸è¿œæ˜¯ B æ‰€å®šä¹‰çš„ç‰ˆæœ¬ã€‚ åŠ¨æ€ï¼šå¦‚æœ mf æ˜¯ virtual function ï¼Œä¸è®ºæ˜¯é€šè¿‡ pointer-to-Bæˆ– p-to-A ,éƒ½æ˜¯è°ƒç”¨ D::mfï¼Œå› ä¸ºä¸¤è€…æŒ‡å‘çš„éƒ½æ˜¯ D å¯¹è±¡ã€‚ è¿™æ ·ä¸€æ¥ï¼Œä¸€ä¸ªDå¯¹è±¡æ—¢å¯èƒ½è¡¨ç° D object è¡Œä¸ºï¼Œä¹Ÿå¯èƒ½è¡¨ç° B object è¡Œä¸ºã€‚å†³å®šå› ç´ ä¸åœ¨å¯¹è±¡è‡ªèº«ï¼Œè€Œåœ¨æŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆçš„ç±»å‹ã€‚ **ç†å¿µå†²çªï¼š**public ç»§æ‰¿æ„å‘³ç€ is-a å…³ç³»ï¼›non-virtual æ„å‘³ç€ invariant greater than specialization ã€‚ é€‚ç”¨äº B å¯¹è±¡çš„æ¯ä¸€ä»¶äº‹ï¼Œä¹Ÿé€‚ç”¨äº D å¯¹è±¡ï¼Œå› ä¸ºæ¯ä¸ª Då¯¹è±¡éƒ½æ˜¯ä¸€ä¸ª Bå¯¹è±¡ã€‚ B çš„å­ç±»ä¸€å®šç»§æ‰¿ mf å‡½æ•°æ¥å£çš„å®ç°ï¼Œå› ä¸º mf æ˜¯ä¸€ä¸ª non-virtual B æ­¤æ—¶å´è¦è¦†ç›–æ‰ mf ä¸¤è€…å†²çªã€‚ 37.ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿æ¥çš„é»˜è®¤å‚æ•° ç»ä¸é‡æ–°å®šä¹‰ç»§æ‰¿æ¥çš„é»˜è®¤å‚æ•° é»˜è®¤å‚æ•°å€¼éƒ½æ˜¯é™æ€ç»‘å®šã€‚ virtual å‡½æ•°æ˜¯åŠ¨æ€ç»‘å®šã€‚ å¦‚ item 36æ‰€è¨€ï¼Œç»§æ‰¿ non-virtual è€Œé‡æ–°å®šä¹‰å¹¶ä¸åˆç†ã€‚æ‰€ä»¥åªéœ€è®¨è®º virtual å‡½æ•°é—®é¢˜ã€‚ ä¸‹é¢è§£é‡Šä¸‹é™æ€åŠ¨æ€ç»‘å®šï¼š statically bound:è¢«å£°æ˜æ—¶æ‰€é‡‡ç”¨çš„ç±»å‹ã€‚ //ä¸€ä¸ªæè¿°å‡ ä½•å½¢çŠ¶çš„classclass Shape public: enum ShapeColorRed,Green,Blue; //æ‰€æœ‰å‡½æ•°éƒ½å¿…é¡»æä¾›ä¸€ä¸ªå‡½æ•°ç”¨æ¥ç»˜åˆ¶è‡ªå·± virtual void draw(ShapeColor color=Red)const=0; //red ...;class Rectangle:public Shape public: //æ³¨æ„è¿™é‡Œå¯¹ç¼ºçœå‚æ•°çš„æ”¹å˜ï¼Œç³Ÿç³•é€äº† virtual void draw(ShapeColor color=Green)const; //green ...;class Circle:public Shape public: virtual void draw(ShapeColor color)const; //ä¸æŒ‡å®šå‚æ•° ç”¨æˆ·ä»¥å¯¹è±¡è°ƒç”¨æ—¶å¿…é¡»æŒ‡å®šå‚æ•° : å› ä¸ºé™æ€ç»‘å®šä¸‹ï¼Œè¿™ä¸ªå‡½æ•°å¹¶ä¸ä»baseç»§æ‰¿ç¼ºçœå‚æ•°å€¼ ç”¨æˆ·ä»¥å¼•ç”¨è°ƒç”¨æ—¶å¯ä»¥ä¸æŒ‡å®šå‚æ•° : å› ä¸ºåŠ¨æ€ç»‘å®šä¸‹ï¼Œè¿™ä¸ªå‡½æ•°ä¼šä»baseç»§æ‰¿ç¼ºçœå‚æ•°å€¼ dynamically boundï¼š Shape* ps; //é™æ€ç±»å‹ä¸ºShape*ï¼Œæ²¡æœ‰åŠ¨æ€ç±»å‹Shape* pc=new Circle;\t//é™æ€ç±»å‹ä¸ºShape*ï¼ŒåŠ¨æ€ç±»å‹ä¸ºCircle*Shape* pr=new Rectangle;//é™æ€ç±»å‹ä¸ºShape*,åŠ¨æ€ç±»å‹ä¸ºRectangle*//æ³¨æ„ä¸Šè¿°ä¸‰ä¸ªæŒ‡é’ˆï¼Œä¸è®ºä»–ä»¬çœŸæ­£æŒ‡å‘ä»€ä¹ˆï¼Œä»–ä»¬çš„é™æ€ç±»å‹éƒ½ä¸ä¼šå˜//åŠ¨æ€ç±»å‹åˆ™å¯ä»¥åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ”¹å˜ï¼ˆé€šå¸¸æ˜¯èµ‹å€¼å¼•èµ·ï¼‰ps = pc;ps = pr;//åŠ¨æ€ç±»å‹æ”¹å˜ virtual å‡½æ•°åˆ™æ˜¯åŠ¨æ€ç»‘å®šï¼šè°ƒç”¨ä¸€ä¸ª virtual å‡½æ•°ï¼Œè°ƒç”¨å“ªä¸€ä»½ function code ï¼Œå–å†³äº *this çš„åŠ¨æ€ç±»å‹ã€‚ é—®é¢˜ï¼š // Shape* pr=new Rectangle;pr-draw(); pr çš„åŠ¨æ€ç±»å‹ä¸º Rectangle* ï¼Œè°ƒç”¨çš„åº”æ˜¯ Rectangle çš„ virtual function drawã€‚ä½†ç”±äº pr çš„é™æ€ç±»å‹æ˜¯ Shape* ï¼Œæ‰€ä»¥é»˜è®¤å‚æ•°å€¼æ¥è‡ª Shape class è€Œé Rectangle class ï¼Œå‚æ•°ä¸º Red è€Œé Greenã€‚ è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚ è¿™æ˜¯ C++ ä¸ºäº†ä¿è¯è¿è¡ŒæœŸæ•ˆç‡çš„è¡¨ç°ã€‚é»˜è®¤å‚æ•°æ˜¯åŠ¨æ€ç»‘å®šçš„è¯ï¼Œç¼–è¯‘å™¨å¿…é¡»æœ‰æŸç§åŠæ³•åœ¨è¿è¡ŒæœŸä¸º virtual å‡½æ•°å†³å®šé€‚å½“çš„å‚æ•°é»˜è®¤å€¼ã€‚è¿™ä¼šæ¯”ç›®å‰çš„â€œç¼–è¯‘å™¨å†³å®šâ€æœºåˆ¶æ›´æ…¢æ›´å¤æ‚ã€‚ è§£å†³ï¼š å•çº¯çš„è®©å­ç±» virtual function å’Œ çˆ¶ç±»ä¸€è‡´ï¼Œä¼šå¯¼è‡´ä»£ç é‡å¤å’Œç›¸ä¾æ€§ï¼ˆwith dependenciesï¼‰ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚ æ›´å¥½çš„è§£å†³æ–¹æ³•å¯å‚è€ƒNVIæ‰‹æ³•ï¼š class Shape public:\tenum ShapeColor Red, Green, Blue ;\tvoid draw(ShapeColor color = Red) const // å¦‚ä»Šå®ƒæ˜¯non-virtual doDraw(color); // è°ƒç”¨ä¸€ä¸ªvirtual ...private:\tvirtual void doDraw(ShapeColor color) const = 0; // çœŸæ­£çš„å·¥ä½œåœ¨æ­¤å¤„å®Œæˆ;class Rectangle: public Shape public:\t...private:\tvirtual void doDraw(ShapeColor color) const; // æ³¨æ„ï¼Œä¸é¡»æŒ‡å®šç¼ºçœå‚æ•°å€¼\t...; ä»¤ base class å†…çš„ public non-virtual function è°ƒç”¨ private virtual å‡½æ•°ï¼Œåè€…å¯è¢« derived class é‡æ–°å®šä¹‰ã€‚ non-virtual ç»å¯¹ä¸èƒ½è¢«å­ç±»è¦†å†™ï¼Œæ‰€ä»¥è¯¥è®¾è®¡ç†è®ºä¸Šè®© draw function é»˜è®¤å‚æ•°å§‹ç»ˆä¸º Redã€‚ 38.Model â€œhas-aâ€ or â€œis-implemented-in-terms-ofâ€through composition å¤åˆ(composition)çš„æ„ä¹‰å’Œ public ç»§æ‰¿å®Œå…¨ä¸åŒ åœ¨ application domain ï¼Œå¤åˆæ„å‘³ç€ has-a ã€‚åœ¨ implementation ï¼Œå¤åˆæ„å‘³ç€ is-implemented-in-terms-of ï¼ˆæ ¹æ®æŸç‰©å®ç°ï¼‰ã€‚ å¤åˆè¡¨ç¤ºä¸€ç§ç±»å‹å…³ç³»ï¼šæŸç§ç±»å‹çš„å¯¹è±¡å†…åŒ…å«å¦ä¸€ç§ç±»å‹çš„å¯¹è±¡ã€‚ //composition (å¾ˆå¤šåŒä¹‰è¯ï¼š layering , containment , aggregation , embedding)class Address ...;class PhoneNumber ...;class Person public: ...private: string name; Address address; PhoneNumber voice Number; å¦‚åŒ public æ„å‘³ç€ is-a ä¸€æ ·ï¼Œå¤åˆæ„å‘³ç€ä¸¤ç§å…³ç³»ï¼šhas-a å’Œ is-implemented-in-terms-of ã€‚è¿™ä¸¤ç§å…³ç³»å¯¹åº”ä¸¤ç§ domains ã€‚ application domain: äººï¼Œæ±½è½¦ï¼Œè§†é¢‘ç”»é¢ç­‰ã€‚ implementation domain: ç¼“å†²åŒºï¼Œäº’æ–¥å™¨ï¼ŒæŸ¥æ‰¾æ ‘ç­‰ã€‚å¯ä»¥ç†è§£ä¸ºåº”ç”¨åŸŸçš„å¾®è§‚å®ç°ç»†èŠ‚ã€‚ has-a å’Œ is-a çš„åŒºåˆ†ï¼š Person class æœ‰åœ°å€ï¼Œç”µè¯å·ç ã€‚ä½†æ˜¾ç„¶ä¸æ˜¯ is-a æ‰€æŒ‡çš„äººæ˜¯ä¸ªç”µè¯ï¼Œäººæ˜¯ä¸ªå·ç è¿™æ ·ã€‚å³ has-aã€‚ is-implementation-in-terms-of å’Œ is-aï¼š â€œæ ¹æ®æŸç‰©å®ç°å‡ºâ€ï¼šä¸¾ä¸€ä¸ªä¾‹å­ï¼Œä½ æŠŠè‡ªè¡Œè½¦æ”¹é€ æˆäº†å·¡æ´‹èˆ°(è¿™é‡Œå¿½ç•¥æ”¹é€ ç»†èŠ‚)ï¼Œè‡ªè¡Œè½¦ä½œä¸ºå·¡æ´‹èˆ°çš„ä¸»ä½“ï¼Œå®ç°äº†å·¡æ´‹èˆ°çš„åŠŸèƒ½ã€‚è¿™æ˜¯ is-i-in-terms-of çš„æ•ˆæœäº†ã€‚è¿™æ—¶ä½ ä¸èƒ½è¯´è¿™è‰˜å·¡æ´‹èˆ°æ˜¯è‡ªè¡Œè½¦ï¼Œåè¿‡æ¥æ›´ä¸è¡Œã€‚ è¿™é‡Œå¼ºè°ƒä¸€ä¸ª â€œreuseâ€ æ•ˆæœï¼Œè¡¨ç°å°±æ˜¯ composition å¤ç”¨ã€‚ çœŸæ­£çš„ä¾‹å­ï¼šä½ è¦æ‰‹æ“ä¸€ä¸ª set template ï¼Œç§‰æ‰¿å°±åœ°å–æï¼ˆæ ¹æ®æŸç‰©å®ç°ï¼‰çš„ç²¾ç¥ï¼Œä½ å‡†å¤‡ä»¥ list å®¹å™¨ä¸ºä¸»ä½“ã€‚ templateclass T //list åº”ç”¨äº setclass Setpublic: bool member(cosnt T item) const; void insert(const T item); void remove(const T item); ...private: listT rep; //ä¸»ä½“ï¼Œæ‰¿è½½ set ç±»æ•°æ®//å®ç°templatetypename Tbool setT::member(const T item) return find(rep.begin(),rep.end(),item) != rep.end();... ä»è¿™ä¸ªä¾‹å­ä¸­åˆè§ç«¯å€ªï¼Œis-imp-in-terms-of å¼ºè°ƒçš„æ˜¯å®ç°åŸŸï¼Œhas-a å¼ºè°ƒçš„æ˜¯åº”ç”¨åŸŸã€‚ 39.æ˜æ™ºå®¡æ…çš„ä½¿ç”¨ private ç»§æ‰¿ private ç»§æ‰¿æ„å‘³ç€ is-implemented-in-terms-of ã€‚ è¿™é€šå¸¸æ¯”å¤åˆçš„çº§åˆ«ä½ï¼Œæ›´é€‚ç”¨äºå­ç±»éœ€è¦è®¿é—® protected çˆ¶ç±»æˆå‘˜ï¼Œæˆ–è€…é‡æ–°å®šä¹‰ç»§æ‰¿çš„ virtual å‡½æ•°æ—¶ã€‚ private inheritance å¯ä»¥å®Œæˆç©ºç™½åŸºç±»(empty base)ä¼˜åŒ–ã€‚ è¿™å¯¹â€œå¯¹è±¡å°ºå¯¸æœ€å°åŒ–â€çš„å¼€å‘éœ€æ±‚æ¥è¯´å¾ˆé‡è¦ã€‚ private inheritance ä¸æ„å‘³ç€ is-aï¼š item 32 å‘ˆç° is-aå…³ç³»æ—¶(public inherit)æåˆ°ç¼–è¯‘å™¨åœ¨å¿…è¦æ—¶å…è®¸ Student ç±»å·å·è½¬æ¢ä¸º Person ã€‚è€Œ private ç»§æ‰¿åˆ™ä¸è¡Œã€‚ private inheritance æ„å‘³ç€æ‰€æœ‰ç»§æ‰¿æˆå‘˜æ˜¯ private ã€‚ å¯¹äº private ç»§æ‰¿çš„æ„ä¹‰ï¼š private inherit çº¯ç²¹æ˜¯ä¸€ç§å®ç°æŠ€æœ¯ï¼šä½œä¸ºå®ç°ç»†èŠ‚ï¼Œç”±å­ç±»ç»§æ‰¿æ¥ä½¿ç”¨çˆ¶ç±»ä¸­çš„ç°æˆçš„æŸäº›ç‰¹æ€§ã€‚ è¿™ç§ç°æˆç‰¹æ€§çš„åˆ©ç”¨å°±æ˜¯ is-implementation-in-terms-of ã€‚ å¤åˆçš„æ„ä¹‰ä¹Ÿæ˜¯è¿™æ ·ï¼Œä½†å°½é‡ç”¨å¤åˆï¼Œå¿…è¦æ—¶æ‰ç”¨ private inheritanceï¼šå³å½“ç‰µæ‰¯åˆ° protected member å’Œvirtual function è¿™äº›éº»çƒ¦å®¶ä¼™æ—¶ã€‚è¿˜æœ‰ä¸€ç§ç©ºç™½åŸºç±»çš„ä¼˜åŒ–æŠ€æœ¯è¦åˆ©ç”¨ private ç»§æ‰¿ã€‚ ä¾‹å­ï¼šWidgets classï¼Œä¸€ä¸ªçª—å£ç±» //Widget éœ€è¦å€ŸåŠ© Timer è®°å½•æˆå‘˜å‡½æ•°è°ƒç”¨æ¬¡æ•°class Timerpublic: explicit Timer(int tickFrequency); virutal void onTick() const; ...; private inheritï¼š class Widget:private Timerprivate: //public ç ´åå°è£…æ€§ï¼Œè¯¯å¯¼ç”¨æˆ· virtual void onTick() const; ... compositionï¼š class Widget private: class WidgetTimer:public Timer public: virtual void onTick() const; WidgetTimer timer;//è¿™ä¸ªè®¾è®¡æ¶‰åŠ public inherit ï¼Œ compositionï¼ŒåŒæ—¶å¯¼å…¥äº†æ–° class ä¸¤ä¸ªæ³¨æ„ç‚¹ï¼š å°è£…æ€§è®©æˆ‘ä»¬å¸Œæœ› derived class ä¸èƒ½ä¿®æ”¹ base class é‡Œçš„å…³é”®å‡½æ•°ï¼ˆonTickï¼‰ ä½† derived å¯ä»¥é‡æ–°å®šä¹‰virtual funcï¼Œprivateç»§æ‰¿ä¹Ÿä¸è¡Œã€‚ è€Œå¦‚æœä½ ç”¨ä¸Šé¢çš„ composition æ¥å®ç°ï¼Œè¿™ä¸€è¦æ±‚å°†å¾—åˆ°å®ç°ã€‚ (Allocate a new class (called â€œWidgetTimerâ€ ) public inheriting Timer as private member in Widget .) (Then , derived class inheriting Widget canâ€™t modify that virtual function .) é™ä½ç¼–è¯‘ä¾å­˜æ€§ Widget ç»§æ‰¿ Timer ï¼Œç¼–è¯‘ Widgetæ—¶ Timer å®šä¹‰å°±å¿…é¡»å¯è§ï¼Œäºæ˜¯å°±ä¸å¯é¿å…çš„#includeTimer.hã€‚ å¦‚æœ WidgetTimer å®šä¹‰æ”¾åˆ° Widget å¤–ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æŠŠæŒ‡å‘å®šä¹‰çš„æŒ‡é’ˆæ”¾åœ¨ Widget é‡Œï¼Œè¿™æ ·ä½ å°±åªéœ€è¦ä¸€ä¸ªç®€å•å£°æ˜å’Œä¸€ä¸ªæŒ‡é’ˆå°±å¤Ÿäº†ã€‚ è¿™æ ·çš„è§£è€¦æ€§(decoupling)æ“ä½œéå¸¸é‡è¦ï¼Œå°¤å…¶å¯¹äºå¤§å‹ç³»ç»Ÿã€‚ ç¥ç§˜ä¸»è§’ï¼šempty base æ—¢ç„¶æ˜¯ empty base ï¼Œå°±ä¸è¦æœ‰ä»»ä½•ä¸œè¥¿ã€‚ æŒ‰ç†è¯´å®ƒä¸è¯¥å ç”¨ä»»ä½•å†…å­˜ã€‚è€Œ C++ æœ‰ä¸€ä¸ªå‡†åˆ™ï¼šç‹¬ç«‹å¯¹è±¡éƒ½å¿…é¡»æœ‰éé›¶å¤§å°ã€‚ like thisï¼š class empty ;class Hold_An_Intprivate: int x; Empty e; å®é™…æƒ…å†µæ˜¯ï¼Œsizeofï¼ˆHold_An_Intï¼‰ sizeofï¼ˆintï¼‰ã€‚ å¤šæ•°ç¼–è¯‘å™¨ä¸­ï¼Œsizeof(empty) 1ã€‚ é¢å¯¹å¤§å°ä¸º0çš„ç‹¬ç«‹å¯¹è±¡ emptyï¼Œc++ ä¼šå·å·æ’å…¥ä¸€ä¸ª char åˆ°ç©ºå¯¹è±¡é‡Œã€‚ ä½†è¿™æ ·ä¸€æ¥ï¼Œé½ä½éœ€æ±‚ï¼ˆalignmentï¼‰ä¼šè¦æ±‚ç¼–è¯‘å™¨å†åŠ å…¥ä¸€äº› paddingï¼Œæ‰©å¤§åˆ°ä¸€ä¸ª int ç­‰ã€‚ ä¸è¿‡æ—¢ç„¶è¦æ±‚æ˜¯ç‹¬ç«‹å¯¹è±¡ï¼Œé‚£å°±ä¸ç‹¬ç«‹å¥½äº†ï¼Œå°±å¯ä»¥ä¸º0äº†ã€‚ class Hold_An_Int:private Emptyprivate: int x; sizeofï¼ˆHold_An_Intï¼‰ sizeofï¼ˆintï¼‰ï¼Œæ•ˆæœè¾¾åˆ°äº†ã€‚è¿™å°±æ˜¯æ‰€è°“çš„EBOï¼ˆempty base optimizationï¼‰ã€‚ EBO ä¸€èˆ¬åªåœ¨å•ä¸€ç»§æ‰¿ä¸‹æ‰è¡Œã€‚ ç°å®æƒ…å†µä¸‹ï¼ŒEBOçš„ empty class å¹¶ä¸æ˜¯çœŸçš„ emptyã€‚é‡Œé¢å¾€å¾€æœ‰ä¸€äº› unary_function , binary_function ã€‚è¿™äº›ä¸œè¥¿æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„å‡½æ•°å¯¹è±¡ï¼Œç”¨æ¥è¢«ç»§æ‰¿ï¼ˆæ˜¯å¦æƒ³èµ·äº† is-implementation-in-terms-ofï¼‰ã€‚ è¯´å®ŒEBOï¼Œè¯·å…è®¸æˆ‘åœ¨æœ€åå¤šä¸€å¥å˜´ï¼šcomposition æ··åˆäº† public ç»§æ‰¿å’Œå¤åˆçš„è®¾è®¡çœ‹èµ·æ¥å¾ˆå¤æ‚ï¼Œä½†å¯è¡Œæ€§ä¾ç„¶éå¸¸é«˜ã€‚ç›¸å¯¹äºè¿™ä¸ªæ€è·¯ï¼Œâ€œæ˜çŸ¥è€Œå®¡æ…â€çš„ä½¿ç”¨ private inherit æ˜¯å€¼å¾—ä½ è€ƒè™‘çš„äº‹æƒ…ã€‚ 40.æ˜æ™ºå®¡æ…çš„ä½¿ç”¨å¤šé‡ç»§æ‰¿(judiciously) å¤šé‡ç»§æ‰¿æ¯”å•ä¸€ç»§æ‰¿å¤æ‚ã€‚ è¿™å¯èƒ½å¯¼è‡´æ­§ä¹‰æ€§ï¼Œä»¥åŠå¯¹ virtual ç»§æ‰¿çš„éœ€æ±‚ã€‚ virtual ç»§æ‰¿ä¼šå¢åŠ å¤§å°ã€é€Ÿåº¦ã€åˆå§‹åŒ–å¤æ‚åº¦ç­‰æˆæœ¬ã€‚ å¦‚æœ virtual base classes ä¸å¸¦ä»»ä½•æ•°æ® å¤šé‡ç»§æ‰¿é€‚ç”¨äºç‰¹å®šçš„åº”ç”¨åœºæ™¯ã€‚ ä¾‹å¦‚â€ public ç»§æ‰¿æŸä¸ª interface class â€œ å’Œ â€œprivate ç»§æ‰¿æŸä¸ªååŠ©å®ç°çš„ classâ€œ ä¸¤é¡¹ç»„åˆ ä¸‹é¢æ¥é€ä¸ªåˆ†æï¼š ç»§æ‰¿å¸¦æ¥çš„æ­§ä¹‰æ€§ åŒåå‡½æ•° æœ‰ç€ç›¸åŒå‡½æ•°checkout()ä¸åŒå®ç°çš„ä¸¤ä¸ª class Aå’ŒBï¼Œè¢«ä¸€ä¸ª derived class å¤šé‡ç»§æ‰¿ï¼ˆåŒæ—¶ç»§æ‰¿ä¸¤ä¸ª class ï¼‰ï¼Œè¯¥å­ç±»è°ƒç”¨checkoutæ—¶ï¼Œç¼–è¯‘å™¨ä¼šè€ƒè™‘ä¸¤ä¸ªå‡½æ•°å¯¹è°ƒç”¨çš„åŒ¹é…ç¨‹åº¦ï¼ˆç±»ä¼¼ resolving é‡è½½å‡½æ•°è°ƒç”¨é‚£æ ·ï¼‰ï¼Œè¯¥ä¾‹ä¸¤ä¸ªè°ƒç”¨åŒ¹é…ç¨‹åº¦ç›¸åŒã€‚ä¸ºæ­¤ä½ å¿…é¡»æŒ‡å‡ºè°ƒç”¨å“ªä¸ªå‡½æ•°ï¼šC.A::checkout()ã€‚ é’»çŸ³ç»§æ‰¿ (è±å½¢ç»§æ‰¿) class File...;class InputFile:public File...;class OutFile:public File...;class IOFile:public InputFile, public OutputFile ...; ç»§æ‰¿ä½“ç³»å‡ºç°ä¸€ä¸ªä»¥ä¸Šçš„ç›¸åŒè·¯çº¿ï¼ˆä¸Šä¾‹æœ‰ä¸¤æ¡ï¼‰ï¼Œå°±è¦è€ƒè™‘ï¼šæ˜¯å¦æ‰“ç®—è®© base class çš„æˆå‘˜åœ¨æ¯ä¸€æ¡è·¯å¾„éƒ½è¢«å¤åˆ¶ä¸€éã€‚ å¦‚æœå›ç­”ä¸ºæ˜¯ï¼Œå°±æ„å‘³ç€æ”¶æŸå­ç±»(IOFile)å°†æœ‰ä¸¤ä»½ä¸€æ¨¡ä¸€æ ·çš„ä»£ç æ®µï¼ˆæˆå‘˜å˜é‡ï¼Œæˆå‘˜å‡½æ•°ï¼‰ã€‚é€»è¾‘ä¸Šæ¥è¯´ï¼ŒIOFile object åªéœ€è¦ä¸€ä»½å°±å¤Ÿäº†ï¼Œä¸è¯¥é‡å¤ã€‚ C++é»˜è®¸äº†ä¸¤ç§æ–¹æ³•ï¼š é‡å¤å‡ ä»½ï¼šå¦‚ä¸Šä¾‹ä¸€æ ·ã€‚ åªä¿ç•™ä¸€ä»½ï¼švirtual ç»§æ‰¿ï¼š class InputFile:virtual public File...;class OutFile:virtual public File...; virtual çš„æˆæœ¬ åœºæ™¯éœ€æ±‚å½“ç„¶æ˜¯ virtual ç»§æ‰¿å¤šä¸€ç‚¹ã€‚ä½†è¿™ä¸æ„å‘³ç€ä½ ç¢°åˆ°å¤šé‡ç»§æ‰¿ä¾¿è¦ virtual ã€‚ virtual ç»§æ‰¿å¯¹è±¡ å¾€å¾€æœ‰æ›´å¤§çš„ä½“ç§¯ï¼Œè®¿é—® virtual base class member-variable æ—¶ï¼Œé€Ÿåº¦ä¹Ÿæ›´æ…¢ã€‚ virtual base class åˆå§‹åŒ–è§„åˆ™æ¯”èµ· non-virtual æ›´ä¸ºå¤æ‚ä¸”ä¸ç›´è§‚ã€‚ 1.derived class è‹¥é€‰æ‹© virtual inherit base class è€Œéœ€è¦åˆå§‹åŒ–ï¼Œå¿…é¡»æ¸…æ¥šçŸ¥æ™“ base class çš„æ‰€æœ‰ç›¸å…³æˆåˆ†ï¼Œä¸ç®¡ç»§æ‰¿æœ‰å¤šè¿œã€‚ 2.æ–°çš„ derived class åŠ å…¥ç»§æ‰¿ä½“ç³»ä¸­ï¼Œä¹Ÿå°±æ„å‘³ç€å¿…é¡»æ‰¿æ‹… base class çš„åˆå§‹åŒ–è´£ä»»ã€‚ æˆæœ¬è¿™ä¹ˆå¤§ï¼Œæ€æ ·çœ‹å¾… virtual base class å‘¢ï¼Ÿï¼ˆv-inheritï¼‰ 1.éå¿…è¦ä¸ç”¨ virtual base classã€‚èƒ½ç”¨ non-virtual å°±ç”¨ã€‚ 2.å¿…é¡»ä½¿ç”¨ virtual base class ï¼Œé‚£å°±é¿å…åœ¨å…¶ä¸­æ”¾ç½®æ•°æ®ã€‚ å¤šé‡ç»§æ‰¿çš„é€‚ç”¨èŒƒä¾‹ ä¸€ä¸ª model äººçš„ C++ interface classã€‚ class IPerson public: virtual ~IPerson(); virtual std::string name() const = 0; virtual std::string birthDate() const =0; ;//no doult ï¼šè¿™ç©æ„å„¿éœ€è¦å®ä½“åŒ–ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„ factory function//factory function,æ ¹æ®ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„æ•°æ®åº“IDåˆ›å»ºä¸€ä¸ªPersonå¯¹è±¡ std::tr1::shared_ptrIPerson makePerson(DatabaseID personIdentifier); DatabaseID askUserForDatabaseID(); //ä»ä½¿ç”¨è€…æ‰‹ä¸Šå–å¾—æ•°æ®åº“IDDatabaseID id(askUserForDatabaseID()); std::tr1::shared_ptrIPerson pp(makePerson(id));//object Interface class IPerson çš„å…·ç°åŒ–å·¥ä½œåœ¨ factory function é‡Œï¼Œæ„å‘³ç€ f-function éœ€è¦å®šä¹‰å…·ç°åŒ– derived class ã€‚æˆ‘ä»¬ç”¨ CPerson å……å½“ derived class ã€‚è¿™æ—¶æ°å¥½æœ‰ä¸ª PersonInfo æœ‰ç°æˆçš„å…ƒç´ ä½¿ç”¨ï¼‰ï¼š class PersonInfo public: explicit PersonInfo(DatabaseID pid); virtual ~PersonInfo(); virtual const char* theName()const; //const char*æœ‰ç‚¹è€å¥—ï¼Œä¸è¿‡è¿™ä¸æ˜¯é‡ç‚¹ virtual const char* theBirthDate() const; private: virtual const char* valueDelimOpen() const; //è¿™ä¸ªä¸œè¥¿æ˜¯æ ‡æ˜å­—ç¬¦ä¸²èµ·å§‹ç‚¹å’Œç»“æŸç‚¹çš„ return [ ; virtual const char* valueDelimClose() const; //ä»¥ç‰¹æ®Šå­—ç¬¦ä¸²ä¸ºç•Œï¼ˆé»˜è®¤[]ï¼Œå¯è‡ªå®šä¹‰ï¼‰ return ] ;;const char* PersonInfo::theName() const //ä¿ç•™ç¼“å†²åŒºç»™è¿”å›å€¼ä½¿ç”¨ï¼šstaticï¼Œè‡ªåŠ¨åˆå§‹åŒ–ä¸ºâ€œå…¨0â€ static char value[Max_Formatted_Field_Value_Length]; //å†™å…¥èµ·å§‹ç¬¦å· std::strcpy(value, valueDelimOpen()); //å°†valueå†…çš„å­—ç¬¦ä¸²é™„åˆ°è¿™ä¸ªå¯¹è±¡çš„nameæˆå‘˜å˜é‡ä¸­ //å†™å…¥ç»“å°¾ç¬¦å· std::strcat(value, valueDelimClose()); return value; theName è°ƒç”¨ valueDelimOpen äº§ç”Ÿå­—ç¬¦ä¸²èµ·å§‹ç¬¦å· â†’ äº§ç”Ÿ name å€¼ â†’ è°ƒç”¨ valueDelimCloseã€‚ valueDelimOpen å’Œ valueDelimClose éƒ½æ˜¯ virtual funciton ï¼Œæ‰€ä»¥ theName è¿”å›çš„ç»“æœä¸ä»…å–å†³äº PersonInfoï¼Œä¹Ÿå–å†³äºä» PersonInfo æ´¾ç”Ÿä¸‹å»çš„ class ã€‚ è¿™é‡Œä½¿ç”¨åŸºäº private ç»§æ‰¿çš„ is-implemented-in-terms-of æ–¹æ³•ã€‚ class Cperson: public IPerson, private PersonInfo //info æ˜¯ in terms åŠŸèƒ½è¦æ±‚public: //iperson æ˜¯ å…·ç°å·¥ä½œ è¦æ±‚ explicit Cperson(DatabaseID pid): PersonInfo(pid) virtual std::string name() const return PersonInfo::theName(); virtual std::string birthDate() const return PersonInfo::theBirthDate(); private: const char* valueDelimOpen() const return ; const char* valueDelimClose() const return ; ; ä»¥ CPerson ä¸ºä¸»ä½“ï¼Œåˆ©ç”¨ Private PerosnInfo å®ç°å‡º IPerson çš„æ¥å£å®Œæˆå…·ç°åŒ–å·¥ä½œã€‚ 7.Templates and Generic Programming41.äº†è§£éšå¼æ¥å£å’Œç¼–è¯‘æœŸå¤šæ€ class å’Œ template éƒ½æ”¯æŒæ¥å£å’Œå¤šæ€ å¯¹ class è€Œè¨€ : æ¥å£æ˜¯æ˜¾å¼çš„ï¼Œä»¥å‡½æ•°ç­¾åä¸ºä¸­å¿ƒï¼›å¤šæ€æ˜¯é€šè¿‡ virtual function å‘ç”Ÿåœ¨è¿è¡ŒæœŸã€‚ å¯¹ template è€Œè¨€ï¼šæ¥å£æ˜¯éšå¼çš„ï¼Œä»¥æœ‰æ•ˆè¡¨è¾¾å¼ä¸ºä¸­å¿ƒï¼›å¤šæ€æ˜¯é€šè¿‡ template å…·ç°åŒ–å‡½æ•°é‡è½½å‘ç”Ÿåœ¨ç¼–è¯‘æœŸã€‚ è¿™ä¸€ç« å¼€å§‹è¿›å…¥æ¨¡æ¿å’Œæ³›å‹ç¼–ç¨‹ã€‚è¿™éœ€è¦æˆ‘ä»¬ä»¥å¦ä¸€ä¸ªæ€è·¯æ¥è€ƒè™‘ã€‚ é¦–å…ˆæ¥åŒºåˆ†ä¸åŒæ¥å£åœ¨å‡½æ•°å¤šæ€ä¸Šçš„ä¸åŒï¼š æ˜¾å¼æ¥å£ï¼š class Widget public: Widget(); virtual ~Widget(); virtual std::size_t size() const; virtual void normalize(); virtual swap(Widget other); ; void doProcessing(Widget w) if (w.size() 10 w != someNastyWidget) Widget temp(w); temp.normalize(); temp.swap(w); æ¥å£å®šä¹‰ç”±å‡½æ•°çš„ç­¾åå¼æ„æˆï¼ˆå‡½æ•°åç§°ï¼Œå‚æ•°ç±»å‹ï¼Œè¿”å›ç±»å‹ï¼‰ã€‚ ä¸Šä¾‹ public æ¥å£ä¸­çš„ constructor ,size,swapâ€¦â€¦ ï¼Œå½“ç„¶åŒ…æ‹¬å„ç§ç±»å‹ã€å¸¸é‡æ€§ã€‚ æ¥å£å®šä¹‰åœ¨æºç ä¸­æ¸…æ™°å¯è§ åŸºäº virtual å‡½æ•°çš„è¿è¡ŒæœŸå¤šæ€ è¿è¡ŒæœŸæ ¹æ® object çš„åŠ¨æ€ç±»å‹å†³å®šè°ƒç”¨å“ªä¸€ä¸ªå‡½æ•°ã€‚ éšå¼æ¥å£ï¼š templatetypename T void doProcessing(T w) if (w.size() 10 w != someNastyWidget) T temp(w); temp.normalize(); temp.swap(w); æ¥å£å®šä¹‰åŸºäºéœ€æ±‚æœ‰äº›çº¦æŸã€‚ çœ‹çœ‹æ¡ä»¶è¯­å¥ï¼Œå¯ä»¥çŸ¥é“ t å¿…é¡»æä¾› size member functionï¼Œå¿…é¡»æ”¯æŒ operator ï¼ ç­‰ã€‚ ä»¥ä¸Šçš„â€œå¿…é¡»â€å¯ä»¥é€šè¿‡ operator overloading æœ‰æ‰€æ”¹è§‚ï¼š ä»¥ size ä¸ºä¾‹ï¼ŒT ç±»å‹å¯¹è±¡å¯ä»¥å•çº¯ä» base class ç»§æ‰¿ï¼Œå¹¶ä¸”è¿”å›ç±»å‹Xä¸ä¸€å®šéè¦æ˜¯ int â€”â€” ä½ åªéœ€è¦è®©Xå’Œ10ä¸€èµ·æ”¯æŒ operator å°±è¡Œï¼ˆç”šè‡³Xå¯ä»¥å‘ç”Ÿéšå¼è½¬æ¢è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼‰ã€‚ å¯¹è±¡(æœ¬ä¾‹ä¸º w )æ”¯æŒçš„æ¥å£ï¼Œç”± template æ‰§è¡Œåœ¨å¯¹è±¡æœ¬èº«æ—¶çš„æ“ä½œå†³å®šã€‚ éœ€è¦ç”¨åˆ°ä»€ä¹ˆï¼Œcompiler å°±åœ¨ç¼–è¯‘æœŸå…·ç°åŒ–ä»€ä¹ˆã€‚ å¯¹è±¡çš„å‡½æ•°è°ƒç”¨å‘ç”Ÿåœ¨ç¼–è¯‘æœŸã€‚ ç¼–è¯‘æœŸä¼šè®©è¿™ç§å¤šæ€ä»¥å¤šä¸ªé‡è½½å‡½æ•°çš„å½¢å¼å®ç°ã€‚ 42.äº†è§£ typename çš„åŒé‡æ„ä¹‰ ä½œä¸º template å‚æ•°ï¼Œclass å’Œ typename å¯äº’æ¢ typename èƒ½å¤Ÿæ ‡è¯†åµŒå¥—ä»å±ç±»å‹åç§°ã€‚ ä¸èƒ½å† base class list æˆ– member initialization list å†…ä½œä¸º base class ä¿®é¥°ç¬¦ã€‚ å…³äºç¬¬äºŒç‚¹ï¼š templatetypename Cvoid print2nd(const C container) // æ‰“å°å®¹å™¨å†…ç¬¬äºŒä¸ªå…ƒç´  // æ³¨æ„è¿™ä¸æ˜¯æœ‰æ•ˆC++ä»£ç  if (container.size() = 2) C::const_iterator iter(container.begin()); // å–å¾—ç¬¬ä¸€å…ƒç´ çš„è¿­ä»£å™¨ ++iter; // å°†iterç§»å¾€ç¬¬äºŒå…ƒç´  int value = *iter; // å°†è¯¥å…ƒç´ å¤åˆ¶åˆ°æŸä¸ªint std::cout value; // æ‰“å°é‚£ä¸ªint ä»å±åç§°: template å†…ï¼ŒåŒ…å«æ¨¡æ¿å‚æ•°çš„åç§°ã€‚ åµŒå¥—ä»å±åç§°ï¼šä»å±åç§°åœ¨ class å†…å‘ˆåµŒå¥—çŠ¶ã€‚(æ¨¡æ¿ç±»ä¸­çš„æ¨¡æ¿æˆå‘˜) åµŒå¥—ä»å±ç±»å‹åç§°ï¼šå…·å¤‡ä»¥ä¸Šå±æ€§çš„åŒæ—¶ï¼ŒæŒ‡æ¶‰äº†æŸç±»å‹ã€‚ ç¤ºä¾‹ï¼šC::const_iterator intï¼ˆéä»å±åç§°ï¼‰ typenameçš„å¦ä¸€é‡è¦ç”¨æ³•ï¼šè¯æ˜ä¸€ä¸ªåç§°æ˜¯åµŒå¥—ä»å±ç±»å‹åç§° è€Œä¸æ˜¯å˜é‡ æˆ–è€…å…¶ä»–ä»€ä¹ˆä¸œè¥¿ã€‚ æ‰€ä»¥ä¸Šé¢çš„ä»£ç éœ€è¦æ›´æ­£ï¼š if (container.size() = 2) typename C::const_iterator iter(container.begin()); //ç²¾é«“ typename ä¾‹å¤–æƒ…å†µï¼š templatetypename Tclass Derived: public BaseT::Nested // 1.base class listä¸­ä¸å…è®¸â€œtypenameâ€public: explicit Derived(int x) : BaseT::Nested(x) // 2.mem.init.listä¸­ä¸å…è®¸â€œtypenameâ€ typename BaseT::Nested temp; // 3.åµŒå¥—ä»å±ç±»å‹åç§°æ»¡è¶³ï¼š ... // æ—¢ä¸åœ¨base class listä¸­ä¹Ÿä¸åœ¨mem.init.list // ä½œä¸ºä¸€ä¸ªbase classä¿®é¥°ç¬¦éœ€åŠ ä¸Štypename ...; æœ€åï¼štypename åœ¨ä¸åŒç¼–è¯‘å™¨ä¸Šæœ‰ä¸åŒè§„åˆ™ã€‚å®ƒåœ¨ç§»æ¤æ€§æ–¹é¢æœ‰ä¸€äº›æ— ä¼¤å¤§é›…çš„é—®é¢˜ã€‚ 43.å­¦ä¹ å¤„ç†æ¨¡æ¿åŒ–åŸºç±»çš„åç§° ç¼–è¯‘å™¨çœ‹ä¸åˆ°æ¨¡æ¿çˆ¶ç±»çš„æˆå‘˜ï¼Œæœ‰ä¸‰ç§æ–¹æ³•å¤„ç†è¿™ç§æƒ…å†µã€‚ æ¨¡æ¿å…¨ç‰¹åŒ– å¯¹ è°ƒç”¨ç»§æ‰¿æ¨¡æ¿ç±»å‡½æ•° çš„å†²å‡»ï¼š templatetypename T1class Class_Apublic:\tvoid send1(T1 var);;template typename T1class Class_B:public Class_A T1 public:\tvoid send2(T1 var) send1(var); //ç¼–è¯‘é”™è¯¯ï¼Œè°ƒç”¨æ¨¡æ¿åŸºç±»å†…å‡½æ•°å¤±è´¥; Class_B ç»§æ‰¿ Class_Aåï¼Œè°ƒç”¨ A çš„å‡½æ•°ç†æ‰€åº”å½“ï¼Œä½†ç¼–è¯‘å‘ç”Ÿé”™è¯¯ï¼šç¼–è¯‘å™¨çœ‹ä¸åˆ°æ¨¡æ¿çˆ¶ç±»çš„æˆå‘˜ã€‚ æ›´å‡†ç¡®çš„è¯´ï¼Œå³ä½¿çœ‹åˆ°äº†ä¹Ÿæ— æµäºäº‹ï¼šæ¨¡æ¿ä¸­çš„å…¨ç‰¹åŒ–ä¼šè®©åŸæ¨¡æ¿ç±»é€ æˆç¼–è¯‘å™¨çš„é”™è§‰ï¼Œæ‰€ä»¥å¹²è„†å‡è£…çœ‹ä¸è§å–½ã€‚ ï¼ˆCPP compiler ç§‰æŒç€ â€œæ—©å‘ç°æ—©æ²»ç–—â€ çš„è¯­æ³•æ£€æµ‹åŸåˆ™ : ä¸å…¶åœ¨ template å®å‚å…·ç°åŒ–æ—¶ï¼Œä¸å¦‚åœ¨ parsing å­ç±»æ¨¡æ¿å®šä¹‰å¼ æ—¶ï¼‰ å…¨ç‰¹åŒ–ç¤ºä¾‹ï¼š templateclass Class_AType_1 //ç‰¹åŒ–æ¨¡æ¿ç±»ï¼Œç±»å‹ä¸ºType_1æ—¶çš„æ¨¡æ¿ç±»public:\tvoid send3(Type_1 var); // è¯¥ç‰¹åŒ–ç±»ä¸­å‹æ ¹ä¸å­˜åœ¨send1å‡½æ•°; ç»§æ‰¿åœ¨ template CPP ä¸­ä¸åƒ Object Oriented CPP é‚£æ ·ç•…é€šæ— é˜»äº†ã€‚ è§£å†³æ–¹æ³•ï¼š base class å‡½æ•°è°ƒç”¨å‰åŠ ä¸Š â€œthis-â€ void Class_B:: send2(T1 var) this-send1(var); using å£°æ˜å¼ template typename T1class Class_B:public Class_A T1 public:\tusing Class_AT1::send1; void send2(T1 var) send1(var); ; æŒ‡æ˜è°ƒç”¨å‡½æ•°çš„æ‰€åœ¨åŒºåŸŸ void Class_B:: send2(T1 var) Class_AT1::send1(var); å¦‚æœè¢«è°ƒç”¨çš„æ˜¯ virtual å‡½æ•°ï¼Œä¸Šè¿°çš„ explicit qualification ä¼šå…³é—­ â€œvirtual ç»‘å®šè¡Œä¸ºâ€ã€‚ æ€»ç»“ï¼š ä¸‰ä¸ªæ–¹æ³•æœ¬è´¨ç›¸åŒï¼šè®©ç¼–è¯‘å™¨çŸ¥é“ï¼Œbase class template çš„æ‰€æœ‰ç‰¹åŒ–ç‰ˆæœ¬éƒ½èƒ½æ”¯æŒæˆ‘ä»¬éœ€è¦çš„æ™®é€šæ¥å£ã€‚ å¦‚æœä½ å¯¹ç¼–è¯‘å™¨ä¿è¯ï¼Œå´ä¸é‚£ä¹ˆåšï¼Œç¼–è¯‘å™¨ä¹Ÿä¸ä¼šè®©ä½ é€šè¿‡çš„ã€‚ 44.å°†ä¸å‚æ•°æ— å…³çš„ä»£ç æŠ½ç¦» template Templateç”Ÿæˆå¤šä¸ªclassesä¸å¤šä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ä»»ä½•templateä»£ç éƒ½ä¸è¯¥ä¸æŸä¸ªé€ æˆè†¨èƒ€çš„templateå‚æ•°äº§ç”Ÿç›¸ä¾å…³ç³»ã€‚ å› éç±»å‹æ¨¡æ¿å‚æ•°(non-type template parameters)è€Œé€ æˆçš„ä»£ç è†¨èƒ€ï¼Œå¾€å¾€å¯ä»¥æ¶ˆé™¤ï¼Œåšæ³•æ˜¯ä»¥å‡½æ•°å‚æ•°æˆ–è€…classæˆå‘˜å˜é‡æ›¿æ¢templateå‚æ•°ã€‚ å› ç±»å‹å‚æ•°(type parameters)è€Œé€ æˆçš„ä»£ç è†¨èƒ€ï¼Œä¹Ÿå¯ä»¥é™ä½ï¼Œåšæ³•æ˜¯è®©å¸¦æœ‰å®Œå…¨ç›¸åŒäºŒè¿›åˆ¶è¡¨è¿°(binary representations)çš„å…·ç°ç±»å‹(instantiation types)å…±äº«å®ç°ç ã€‚ template ä½¿ç”¨ä¸å½“å¯èƒ½ä¼šå¯¼è‡´ code bloat ï¼Œè®©äºŒè¿›åˆ¶ç å‘ˆç°ä¸€æ‰¹é›·åŒçš„ä»£ç ï¼Œæµªè´¹ç©ºé—´ã€‚ è¿™éœ€è¦ä½ æ´æ‚‰å‡½æ•°çš„å…±åŒéƒ¨åˆ†ï¼ŒæŠ½ç¦»é‚£äº›ä¸ªæ€§çš„éƒ¨åˆ†ã€‚ ä¸è¿‡é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ï¼Œé‡å¤éƒ¨åˆ†å¯ä»¥é€šè¿‡è‚‰çœ¼çœ‹å‡ºæ¥ï¼› template è®¾è®¡ä¸­åˆ™éœ€è¦æå‰è€ƒè™‘å¯èƒ½çš„é‡å¤ã€‚ template class T, size_t nclass SquareMatrixpublic: void Invert();;int main() SquareMatrixint, 10 a; SquareMatrixint, 5 b; è¿™ä¼šå…·ç°åŒ–ä¸¤ä»½ invert å‡½æ•°ã€‚ä¸¤ä¸ªå‡½æ•°é™¤äº†å¸¸é‡5å’Œ10ï¼Œå…¶ä»–éƒ¨åˆ†å®Œå…¨ç›¸åŒã€‚ ä¸ºäº†å‡å°‘ä»£ç å†—ä½™ï¼Œä½ ä¼šæƒ³å»ºç«‹ä¸€ä¸ªå‡½æ•°ï¼ˆç±»å®ç°ï¼‰ã€‚ templatetypename Tclass SquareMatrixBasepublic: SquareMatrixBase(size_t n,T* pMem) : size(n),pDate(p) void Invert(size_t n) void setDataPtr(T* ptr)pData = ptr;private: T* pData; size_t size;; ä¸¤ç§ç»§æ‰¿ï¼šæ ˆå’Œå † æ ˆï¼š template class T, size_t nclass SquareMatrix: private SquareMatrixBaseTpublic: SquareMatrix() : SquareMatrixBaseT(n,data) void Invert() this-Invert(n); private: T data[n * n]; //ä½ ä¹Ÿå¯ä»¥ç”¨ T*[pData]æŒ‡å‘çŸ©é˜µå†…å®¹; å †ï¼š template class T, size_t nclass SquareMatrix: private SquareMatrixBaseTpublic: // //å°†åŸºç±»çš„ æ•°æ®æŒ‡é’ˆ è®¾ä¸ºNULL SquareMatrix() : SquareMatrixBaseT(n,0),data(new T[n*n] ) this-setDatePtr(data.get();) //å°†æŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆå­˜èµ·æ¥ï¼Œå°†å®ƒçš„å‰¯æœ¬äº¤ç»™åŸºç±» ... void Invert() this-Invert(n); private: boost::scoped_arrayT data;; æˆå‘˜å‡½æ•°å¯ä»¥ç”¨ inline æ–¹å¼è°ƒç”¨ base class ç‰ˆæœ¬ï¼ˆå¦‚ invertï¼‰ï¼Œå¹¶ä¸”ä¸åŒå¯¹è±¡æœ‰ç€ä¸åŒç±»å‹ï¼šdouble,5å’Œdouble,10å…±åŒè°ƒç”¨ base æˆå‘˜å‡½æ•°çš„åŒæ—¶ï¼Œå‰è€…éƒ¨åˆ†ä¸ä¼šè·‘åˆ°åè€…éƒ¨åˆ†ä¸­å»ã€‚ ä¸€æ–¹é¢ï¼Œå°ºå¯¸ä¸“å±ç‰ˆå‡½æ•°å¯èƒ½æ¯”è¿™ç§å…±äº«ç‰ˆæœ‰æ›´å¥½çš„ä»£ç ã€‚ ï¼ˆå°ºå¯¸ä¸“å±ç‰ˆä¸­ï¼Œå°ºå¯¸æœ¬èº«æ˜¯ä¸ªç¼–è¯‘å™¨å¸¸é‡ï¼Œäºæ˜¯å¸¸é‡çš„å¹¿ä¼ è¾¾åˆ°æœ€ä¼˜åŒ–ï¼ŒæŠŠå®ƒä»¬æŠ˜è¿›è¢«ç”ŸæˆæŒ‡ä»¤ä¸­æˆä¸ºç›´æ¥æ“ä½œæ•°ç­‰ï¼‰ å¦ä¸€æ–¹é¢ï¼šä¸åŒå¤§å°çŸ©é˜µå…±äº«å•ä¸€ç‰ˆæœ¬ invert ï¼Œå¯å‡å°‘æ‰§è¡Œæ–‡ä»¶å¤§å°ï¼Œé™ä½ç¨‹åºçš„ working set å¤§å°ï¼Œå¼ºåŒ–æŒ‡ä»¤é«˜é€Ÿç¼“å­˜åŒºå†…çš„ locality of reference ã€‚ ç›¸åçš„ä¸¤ä¸ªä½œç”¨ï¼Œè¦é äº²è‡ªä¸Šæœº test æ¥ç¡®å®šå“ªæ–¹é¢å ä¸»å¯¼åœ°ä½ã€‚ è‡³äºå¯¹è±¡å¤§å°ï¼Œä½ å¯ä»¥æŠŠ ä¸Šé¢æœ€è¿‘çš„ç‰ˆæœ¬ï¼ˆä¸çŸ©é˜µå¤§å°æ— å…³çš„å‡½æ•°ç‰ˆæœ¬ï¼‰æ‰”åˆ° base class é‡Œï¼Œè¿™ä¼šå¢åŠ æ¯ä¸€ä¸ªå¯¹è±¡çš„å¤§å° ã€‚ä¾‹å¦‚æ¯ä¸ª derived class æœ‰ä¸€ä¸ªæŒ‡é’ˆæˆå‘˜æŒ‡å‘ base class å†…çš„æ•°æ®ã€‚è¿™ä¼šè®©æ¯ä¸ª derived class å¢åŠ è‡³å°‘ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼Œä½†èƒ½é€šè¿‡ä»£ç é‡å¤æ¥è·å¾—æ›´æœ‰æ¡ç†çš„ç»“æ„ å½“ç„¶ä½ å¯ä»¥å°è¯•ä»¤ä¸€ä¸ª base class è´®å­˜ä¸€ä¸ª protected æŒ‡é’ˆæŒ‡å‘çŸ©é˜µæ•°æ®ï¼ˆå³ä½¿ä¸§å¤±å°è£…æ€§ï¼‰ã€‚è¿™æ · delete ä¸€ä¸ªæŒ‡é’ˆçš„åˆ¤æ–­åˆä¼šè®©äººä¼¤è„‘ç­‹ã€‚ä¸è¿‡æœ‰ä¸€ç‚¹æ¯‹åº¸ç½®ç–‘ : è¶Šç²¾å¯†çš„åšæ³•æ„å‘³ç€è¶Šå¤æ‚ã€‚ æœ€åï¼šè¿™ä¸ª item åªè®¨è®º non-type template parameters çš„è†¨èƒ€ã€‚ type parameters ä¹Ÿä¼šå¸¦æ¥è†¨èƒ€ï¼Œåƒä¸€äº›å¹³å°å¯¹äºåŒä¸€æ¨¡æ¿çš„ int å’Œ long ä¸ä¼šåˆå¹¶ å¯¼è‡´ä¸¤ä¸ªç‰ˆæœ¬çš„æˆå‘˜å‡½æ•°äº§ç”Ÿã€‚ å¤šæ•°å¹³å°ä¸Šï¼Œæ‰€æœ‰æŒ‡é’ˆç±»å‹æœ‰ç€ç›¸åŒçš„äºŒè¿›åˆ¶è¡¨è¿°ï¼Œå› æ­¤template æŒæœ‰æŒ‡é’ˆç±»å‹çš„åç§°ï¼Œåº”å¯¹æ¯ä¸€ä¸ªæˆå‘˜ä½¿ç”¨åŒä¸€ä»½åº•å±‚å®ç°ã€‚ æœ€åï¼šå¤šé‡ç»§æ‰¿ç¡®ä¹æœ‰å…¶ç‹¬ç‰¹çš„åº”ç”¨åœºæ™¯ï¼Œå¹¶ä¸”ç¡®å®å¥½ç”¨ã€‚ä½†åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæœ‰å•ä¸€ç»§æ‰¿å¯ä»¥å®ç°çš„è®¾è®¡ï¼Œä¸ºäº†è®©ç¨‹åºæ›´å¥½ç†è§£å’Œç®€æ´ï¼Œè¿˜æ˜¯ä½¿ç”¨å•ä¸€ç»§æ‰¿æ›´å¥½ã€‚ 45.è¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿æ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹ ä½¿ç”¨æˆå‘˜å‡½æ•°æ¨¡æ¿å¯ä»¥ç”Ÿæˆæ¥å—æ‰€æœ‰å…¼å®¹ç±»å‹çš„å‡½æ•°ã€‚ å¦‚æœä½ ä¸ºæ³›åŒ–æ‹·è´æ„é€ æˆ–æ³›åŒ–èµ‹å€¼å£°æ˜äº†æˆå‘˜æ¨¡æ¿ï¼Œä½ ä¾ç„¶éœ€è¦å£°æ˜å¸¸è§„æ‹·è´æ„é€ å‡½æ•°å’Œæ‹·è´èµ‹å€¼è¿ç®—ç¬¦ã€‚ æ™ºèƒ½æŒ‡é’ˆæ˜¯è¡Œä¸ºåƒæŒ‡é’ˆè€Œå…·å¤‡ä¸€äº›ç‰¹æ€§çš„ç±»æŒ‡é’ˆå¯¹è±¡ã€‚è¿™ç§å¯¹è±¡åœ¨ STLçš„è¿­ä»£å™¨ä¸­æœ‰æ‰€åº”ç”¨ã€‚ ä½†æ™ºèƒ½æŒ‡é’ˆçš„ç±»å‹è½¬æ¢éœ€è¦æ‰‹åŠ¨è®¾è®¡ï¼Œç›¸æ¯”ä¹‹ä¸‹å†…ç½®æŒ‡é’ˆçš„å¥½å¤„å°±æ˜¯æ”¯æŒå„ç§éšå¼è½¬æ¢ã€‚ class Top;class Middle: public Top;class Bottom: public Middle; å†…ç½®æŒ‡é’ˆï¼š Top *p1 = new Bottom;const Top *p2 = p1; æ™ºèƒ½æŒ‡é’ˆè½¬æ¢ï¼š templatetypename Tclass SmartPtr public: explicit SmartPtr(T* realPtr); ..;SmartPtrToppt1 = SmartPtrMiddle(new Middle);SmartPtrToppt2 = SmartPtrBottom(new Bottom);SmartPrtconst Top pct2 = pct1; è¿™æ˜¯ç”±äºï¼Œæ¨¡æ¿ç»§æ‰¿å…³ç³»çš„ä¸¤ä¸ªç±»å‹ï¼Œåœ¨å…·ç°åŒ–ä»¥åçš„å¯¹è±¡ä¸ä¼šæœ‰ç»§æ‰¿å…³ç³»ã€‚ åœ¨ç¼–è¯‘å™¨çœ‹æ¥ SmartPtr å’Œ SmartPtr æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ä¸ªç±» ã€‚ ç”¨ Middle åˆå§‹åŒ– Top éœ€è¦é‡è½½ SmartPtr çš„æ„é€ å‡½æ•°ã€‚å±‚çº§çš„å¢åŠ ä¼´éšç€é‡è½½æ„é€ å‡½æ•°çš„å¢åŠ ï¼Œç†è®ºä¸Šæ˜¯æ²¡æœ‰ç©·å°½çš„ã€‚è¿™æ—¶ éœ€è¦ä¸º SmartPtr å†™ä¸€ä¸ª template æ„é€ æ¨¡æ¿ã€‚å³æ‰€è°“çš„ member function template templatetypename Tclass SmartPtrpublic: templatetypename U SmartPtr(const SmartPtrU other); //ä¸ºäº†ç”Ÿæˆ copy æ„é€ å‡½æ•° å¯¹ä»»ä½•ç±»å‹ï¼Œæ ¹æ® SmartPtrU å¯ä»¥ç”Ÿæˆä¸€ä¸ª SmartPtrT : åè€…çš„æ„é€ å‡½æ•°å¯ä»¥æ¥æ”¶å‰è€…å‚æ•°ã€‚ä¸¤è€…ç±»å‹æ˜¯åŒä¸€ä¸ª template çš„ä¸åŒå…·ç°ä½“ã€‚è¿™å¯ç§°ä½œ generalized copy construactor function . ä¸ºäº†æ”¯æŒéšå¼è½¬æ¢,æ„é€ å‡½æ•°æœªåŠ å…¥ explicit ã€‚ ä¸è¿‡è¿™ç§è½¬æ¢æœ‰é£é™©ï¼ˆæ¯”å¦‚å­ç±»è½¬æˆçˆ¶ç±»ï¼‰ï¼Œéœ€è¦ä¸€äº›çº¦æŸï¼š templatetypename Tclass SmartPtrpublic: templatetypename U SmartPtr(const SmartPtrU other ) //other çš„ heldPtr åˆå§‹åŒ– this çš„ heldPtr :heldPtr(other.get())... //è¿™é‡Œèƒ½å¤Ÿå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ T* get() const return heldPtr; ...private: T* heldPtr; //SmartPtr çš„åŸå§‹æŒ‡é’ˆ å€ŸåŠ© åŸå§‹æŒ‡é’ˆ çš„è½¬å‹æ“ä½œ æ¥å®ŒæˆSmartPtrçš„éšå¼è½¬æ¢ã€‚ åŒæ—¶ member function template çš„ä½œç”¨ä¸æ­¢æ„é€ å‡½æ•°ï¼Œè¿˜æœ‰å¯¹èµ‹å€¼æ“ä½œçš„æ”¯æŒã€‚ ç”¨ tr1::shared_ptr ä½œä¸ºèŒƒä¾‹ï¼š templateclass T class shared_ptrpublic: templateclass Y explicit shared_ptr(Y *p); //æ„é€ ï¼Œæ¥è‡ªå…¼å®¹å†…ç½®æŒ‡é’ˆã€‚ templateclass Y //æ³›åŒ–æ„é€ å‡½æ•° shared_ptrshared_ptrY const r; //æˆ–shared_ptr templateclass Y explicit shared_ptr operator=(shared_ptrY const r); //æˆ–weak_ptr templateclass Y explicit shared_ptr(auto_ptrY r); //æˆ–auto_ptr templateclass Y shared_ptr operator=(shared_ptrY const r); //èµ‹å€¼ tempalteclass Y //å…¼å®¹ shared_ptr shared_ptr operator=(auto_ptrY r); //å’Œ auto_ptr; æ³›åŒ–æ„é€ å‡½æ•°æ”¯æŒéšå¼è½¬æ¢ï¼Œå…¶ä»–æ„é€ å‡½æ•°åˆ™ä¸ç„¶ï¼ˆåŠ ä¸Šexplicitï¼‰ã€‚ å¦å¤–ï¼Œauto_ptr çš„ç‰¹æ€§ä¸æ”¯æŒ const ã€‚ äº‹å®ä¸Šï¼Œæˆå‘˜å‡½æ•°æ¨¡æ¿ä¸ä¼šæ”¹å˜C++çš„è§„åˆ™ã€‚C++è§„åˆ™è®²ï¼šå¦‚æœä½ æ²¡æœ‰å£°æ˜æ‹·è´æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åº”è¯¥ç”Ÿæˆä¸€ä¸ªã€‚ æ‰€ä»¥Y = Tæ—¶æ‹·è´æ„é€ å‡½æ•°ä¸ä¼šä»æˆå‘˜å‡½æ•°æ¨¡æ¿å®ä¾‹åŒ–ï¼Œè€Œæ˜¯ä¼šè‡ªå·±ç”Ÿæˆä¸€ä¸ªã€‚ è¿™æ—¶ä½ å¦‚æœæƒ³æ§åˆ¶ copy æ„é€ å‡½æ•°çš„ä¸€åˆ‡ï¼Œé‚£å°±åŒæ—¶å£°æ˜ æ³›åŒ–copyæ„é€ å‡½æ•°å’Œæ­£å¸¸copyæ„é€ å‡½æ•°å§ã€‚ï¼ˆè¿™åŒæ ·é€‚ç”¨äºèµ‹å€¼) templateclass Tclass shared_ptrpublic: shared_ptr(shared_ptr const r); templateclass Y shared_ptr(shared_ptrY const r); shared_ptr operator=(shared_ptr const r); templateclass Y shared_ptr operator=(shared_ptrY const r);; 46.éœ€è¦ç±»å‹è½¬æ¢æ—¶ï¼Œå¯ä¸ºæ¨¡æ¿å®šä¹‰éæˆå‘˜å‡½æ•°ã€‚ é˜¿è¨å¾· é—®é¢˜ï¼š item 24 æè¿°è¿‡ non-member å‡½æ•°åœ¨æ‰€æœ‰å®å‚èº«ä¸Šçš„éšå¼ç±»å‹è½¬æ¢ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°† Rationalç±»å‹å’Œoperator*æ¨¡æ¿åŒ–äº†ï¼š templatetypename Tclass Rational public: Rational(const T numerator = 0, const T denominator = 1); const T numerator() const; const T denominator() const; ; templatetypename Tconst RationalT operator*(const RationalT lhs, const RationalT rhs) æ¨¡æ¿åŒ–ä»¥åï¼Œç†æ‰€åº”å½“çš„è®¤ä¸ºå®ƒåº”è¯¥æ”¯æŒæ··åˆå¼ç®—æœ¯è¿ç®—ï¼š Rationalint oneHalf(1, 2); // OKRationalint result = oneHalf * 2; // Error! å®é™…ä¸Šè¿™å¹¶ä¸èƒ½é€šè¿‡ç¼–è¯‘ : template åœ¨å®å‚æ¨å¯¼è¿‡ç¨‹ä¸­ä¸ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚ ç¼–è¯‘å™¨ä¸èƒ½åƒ item 24 é‚£æ ·çŸ¥é“æˆ‘ä»¬è°ƒç”¨å“ªä¸ªå‡½æ•°ã€‚template ä¸‹å®ƒä»¬åœ¨å¯»æ‰¾å…·ç°åŒ–å‡ºæ¥çš„åœ¨è¢«åä¸º operator çš„å‡½æ•°æ—¶ï¼Œä¼šå› ä¸º T çš„åå·®è€Œå—é˜»ã€‚ ä¸Šä¾‹æ¥è¯´ï¼Œç¼–è¯‘å™¨é€šè¿‡ç¬¬ä¸€å‚æ•° oneHalf å‘ç°æ¨¡æ¿å‚æ•°Tæ˜¯ Rational åï¼Œåº”è¯¥æŠŠ 2 éšå¼è½¬æ¢ä¸º Rational ä¸ oneHalf å¯¹åº”ã€‚ä½† template åœºæ™¯è¿™ç§æƒ…å†µä¸èƒ½å‡ºç°ã€‚ æ¨¡æ¿æ¨å¯¼å’Œå‡½æ•°è°ƒç”¨æ˜¯ä¸¤ä¸ªè¿‡ç¨‹ï¼š éšå¼ç±»å‹è½¬æ¢å‘ç”Ÿåœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œè€Œåœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰ç¼–è¯‘å™¨éœ€è¦å®ä¾‹åŒ–ä¸€ä¸ªå‡½æ•°ã€‚è€Œåœ¨æ¨¡æ¿å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨æ— ä»æ¨å¯¼Tçš„ç±»å‹ã€‚ è§£å†³: å‘æŒ¥ friend çš„å¦ä¸€ä¸ªåŠŸèƒ½ï¼štemplate class å†…çš„ friend å£°æ˜å¼å¯ä»¥æŒ‡æ¶‰æŸä¸ªç‰¹å®šå‡½æ•°ã€‚ ç±»æ¨¡æ¿ä¸å†ä¾èµ–å®å‚æ¨å¯¼ï¼Œç¼–è¯‘å™¨å¯ä»¥åœ¨ class Rationalå…·ç°åŒ–æ—¶å¾—çŸ¥ Tã€‚ templatetypename Tclass Rational public: friend const Rational operator*(const Rational lhs, const Rational rhs);;templatetypename Tconst RationalT operator*(const RationalT lhs, const RationalT rhs) åœ¨ Rational ä¸­å£°æ˜çš„ friend æ²¡æœ‰æ·»åŠ æ¨¡æ¿å‚æ•°Tï¼Œè¿™æ˜¯ä¸€ä¸ªç®€ä¾¿å†™æ³•ï¼Œå®ƒå®Œå…¨ç­‰ä»·äºï¼š friend const RationalT operator*(const RationalT lhs, const RationalT rhs); é€šè¿‡ç¼–è¯‘åï¼Œoperator* é€šè¿‡ç¼–è¯‘ï¼Œclass Rationalè¢«å…·ç°åŒ–å‡ºæ¥ã€‚friend å‡½æ•° operator* è¢«è‡ªåŠ¨å£°æ˜å‡ºæ¥ã€‚äºæ˜¯è¿›å…¥å‡½æ•°è°ƒç”¨è¿‡ç¨‹ï¼Œæ”¯æŒéšå¼ç±»å‹è½¬æ¢ã€‚ é€šè¿‡ç¼–è¯‘åï¼Œé“¾æ¥è¿˜ä¼šå‡ºé”™ã€‚ è™½ç„¶åœ¨ç±»ä¸­å£°æ˜äº† friend operator*ï¼Œç¼–è¯‘å™¨å´ä¸ä¼šå®ä¾‹åŒ–è¯¥å£°æ˜å¯¹åº”çš„å‡½æ•°å®šä¹‰ã€‚ ç”±äºå‡½æ•°æ˜¯æˆ‘ä»¬è‡ªå·±å£°æ˜çš„ï¼Œç¼–è¯‘å™¨è®¤ä¸ºæˆ‘ä»¬æœ‰ä¹‰åŠ¡è‡ªå·±å»å®šä¹‰é‚£ä¸ªå‡½æ•°ã€‚ templatetypename Tclass Rational public: friend const Rational operator*(const Rational lhs, const Rational rhs) return Rational(lhs.numerator() * rhs.numerator(), lhs.denominator() * rhs.denominator()); ; æ€»ç»“ï¼š ä¸ºäº†å¯¹æ‰€æœ‰å‚æ•°æ”¯æŒéšå¼ç±»å‹è½¬æ¢ï¼Œoperator* éœ€è¦å£°æ˜ä¸ºéæˆå‘˜å‡½æ•°ï¼› ä¸ºäº†è®©ç¼–è¯‘å™¨æ¨å¯¼å‡ºæ¨¡æ¿å‚æ•°ï¼Œoperator* éœ€è¦åœ¨ç±»ä¸­å£°æ˜ï¼› ä¸ºäº†å‡½æ•°è‡ªåŠ¨å…·ç°åŒ–ï¼Œéœ€è¦åœ¨ç±»ä¸­å£°æ˜éæˆå‘˜å‡½æ•°å¹¶ä»¤å…¶ä¸º friendï¼› å£°æ˜çš„å‡½æ•°çš„åŒæ—¶æˆ‘ä»¬æœ‰ä¹‰åŠ¡ç»™å‡ºå‡½æ•°å®šä¹‰ï¼Œæ‰€ä»¥åœ¨å‡½æ•°å®šä¹‰ä¹Ÿåº”å½“æ”¾åœ¨ friend å£°æ˜ä¸­ã€‚ ç‰¹æ®Šåœºæ™¯ï¼š å¦‚ item30 æ‰€è¯´ï¼Œå®šä¹‰åœ¨ç±»å®šä¹‰ä¸­çš„å‡½æ•°æ˜¯ inline å‡½æ•°ã€‚ å¦‚æœ operator* å‡½æ•°ä½“å˜å¾—å¾ˆå¤§ï¼Œé‚£ä¹ˆ inline å‡½æ•°å°±ä¸å†åˆé€‚äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥è®© operator* è°ƒç”¨å¤–éƒ¨çš„ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼š templatetypename T class Rational;templatetypename Tconst RationalT doMultiply(const RationalT lhs, const RationalT rhs); templatetypename Tclass Rationalpublic: friend RationalT operator*(const RationalT lhs, const RationalT rhs) return doMultiply(lhs, rhs); ; ç¼–è¯‘å™¨å¯èƒ½æœ‰æŠŠ template å®šä¹‰å¼æ”¾åˆ°å¤´æ–‡ä»¶é‡Œçš„è¦æ±‚ã€‚ä½ å¯ä»¥åœ¨å¤´æ–‡ä»¶å†…å®šä¹‰helper template ,è¿™é‡Œç”¨ doMultiply ä¸¾ä¾‹ï¼š templatetypename Tclass RationalT doMultiply(const RationalT lhs, const RationalT rhs) return RationalT(lhs.numerator() * rhs.numerator(), lhs.denominator() * rhs.denominator()) ; doMultiply ä½œä¸ºæ¨¡æ¿ï¼Œåƒæœ¬æ–‡æœ€å¼€å§‹çš„ operator* ä¸€æ ·ä¸æ”¯æŒæ··åˆå¼ä¹˜æ³•ã€‚ä½†å®ƒåªè´Ÿè´£è¢« operator* è°ƒç”¨ã€‚è€Œ operator* è´Ÿè´£éšå¼è½¬æ¢ï¼Œç¡®ä¿ä¸¤ä¸ªå¯¹è±¡èƒ½è¢«ç›¸ä¹˜ï¼Œä¼ é€’ç»™é€‚å½“çš„ doMultiply template å…·ç°ä½“ï¼Œå®Œæˆä¹˜æ³•æ“ä½œã€‚ 47.ä½¿ç”¨traits classes è¡¨ç°ç±»å‹ä¿¡æ¯ traits classes ä½¿å…³äºç±»å‹çš„ä¿¡æ¯åœ¨ç¼–è¯‘æœŸé—´å¯ç”¨ã€‚å®ƒä»¬ä½¿ç”¨æ¨¡æ¿å’Œæ¨¡æ¿ç‰¹åŒ–å®ç°ã€‚ ç»“åˆé‡è½½ï¼Œtraits classes ä½¿å¾—æ‰§è¡Œç¼–è¯‘æœŸç±»å‹ ifâ€¦else æ£€éªŒæˆä¸ºå¯èƒ½ã€‚ è¿­ä»£å™¨åˆ†ç±»ï¼š æœ€ç®€å•çš„è¿­ä»£å™¨æ˜¯è¾“å…¥è¿­ä»£å™¨ï¼ˆinput iteratorï¼‰å’Œè¾“å‡ºè¿­ä»£å™¨ï¼ˆoutput iteratorï¼‰ï¼Œ å®ƒä»¬åªèƒ½å‘å‰ç§»åŠ¨ï¼Œå¯ä»¥è¯»å–å†™å…¥å®ƒçš„å½“å‰ä½ç½®ï¼Œä½†åªèƒ½è¯»å†™ä¸€æ¬¡ã€‚æ¯”å¦‚ ostream_iterator å°±æ˜¯ä¸€ä¸ªè¾“å‡ºè¿­ä»£å™¨ã€‚ æ¯”å®ƒä»¬ç¨å¼ºçš„æ˜¯å‰å‘è¿­ä»£å™¨ï¼ˆforward iteratorï¼‰ï¼Œå¯ä»¥å¤šæ¬¡è¯»å†™å®ƒçš„å½“å‰ä½ç½®ã€‚ å•å‘é“¾è¡¨ï¼ˆslistï¼ŒSTL å¹¶æœªæä¾›ï¼‰å’Œ TR1 å“ˆå¸Œå®¹å™¨çš„è¿­ä»£å™¨å°±å±äºå‰å‘è¿­ä»£å™¨ã€‚ åŒå‘è¿­ä»£å™¨ï¼ˆbidirectional iteratorï¼‰æ”¯æŒå‰åç§»åŠ¨ï¼Œæ”¯æŒå®ƒçš„å®¹å™¨åŒ…æ‹¬ set, multiset, map, multimapã€‚ éšæœºè®¿é—®è¿­ä»£å™¨ï¼ˆrandom access iteratorï¼‰æ˜¯æœ€å¼ºçš„ä¸€ç±»è¿­ä»£å™¨ï¼Œå¯ä»¥æ”¯æŒ +, - ç­‰ç§»åŠ¨æ“ä½œï¼Œæ”¯æŒå®ƒçš„å®¹å™¨åŒ…æ‹¬ vector, deque,string ç­‰ã€‚ å¯¹äºä¸Šè¿°äº”ç§è¿­ä»£å™¨ï¼ŒC++ æä¾›äº†äº”ç§ Tag æ¥æ ‡è¯†è¿­ä»£å™¨çš„ç±»å‹ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯ â€is-aâ€ çš„å…³ç³»ï¼š struct input_iterator_tag ;struct output_iterator_tag ;struct forward_iterator_tag: public input_iterator_tag ;struct bidirectional_iterator_tag: public forward_iterator_tag ;struct random_access_iterator_tag: public bidirectional_iterator_tag ; STLæœ‰ä¸€å·¥å…·æ€§ template åä¸º advance ï¼Œç”¨æ¥å°†æŒ‡å®šè¿­ä»£å™¨ç§»åŠ¨ç»™å®šè·ç¦»ã€‚ templatetypename IterT, typename DistTvoid advance (IterT iter, DistT d); ç§»åŠ¨è·ç¦»é€šå¸¸æ˜¯ä¸æ–­æ‰§è¡Œ ++ â€“ ã€‚åªæœ‰éšæœºè®¿é—®è¿­ä»£å™¨èƒ½ + ã€‚ templatetypename IterT, typename DistTvoid advance(IterT iter, DistT d) if (iter is a random access iterator) iter += d; // use iterator arithmetic // for random access iters else if (d = 0) while (d--) ++iter; // use iterative calls to else while (d++) --iter; // ++ or -- for other // iterator categories è¿™é‡Œçš„å…³é”®æ˜¯å–å¾—ç±»å‹ä¿¡æ¯ï¼Œè®©æ¡ä»¶åˆ¤æ–­è¯­å¥å¾—ä»¥æ‰§è¡Œã€‚ traits çš„æ„ä¹‰å°±æ˜¯è®©ä½ åœ¨ç¼–è¯‘æœŸé—´å–å¾—ç±»å‹ä¿¡æ¯ã€‚ Traits ä¸æ˜¯å…³é”®å­—æˆ–è€…é¢„å®šæ„ä»¶ ï¼› å®ƒæ˜¯ä¸€ç§æŠ€æœ¯ï¼Œéœ€è¦åœ¨é¢å¯¹å†…ç½®ç±»å‹å’Œç”¨æˆ·è‡ªå®šä¹‰ç±»å‹æ—¶çš„è¡¨ç°ä¸€æ ·å¥½ã€‚ å¯¹å†…ç½®ç±»å‹çš„è¦æ±‚æ„å‘³ç€ traits ä¸èƒ½å€ŸåŠ©ç±»æ¥å®ç°ã€‚ ä¸‹é¢é€šè¿‡é’ˆå¯¹è¿­ä»£å™¨çš„ traits æ¥æ¢ç´¢è¿™ç§æŠ€æœ¯ï¼ˆè¿™ç§ template åœ¨æ ‡å‡†ç¨‹åºåº“ä¸­å¹¶ä¸å°‘è§ï¼‰ã€‚ iterator_traits å°†ä¼šæ ‡è¯† IterT çš„è¿­ä»£å™¨ç±»åˆ«ï¼šé’ˆå¯¹è¯¥ç±»å‹ï¼Œåœ¨ struct iterator_traitså†…ä¸€å®šå£°æ˜ typedef ä½œä¸º iterator_category æ¥ç¡®è®¤åˆ†ç±»ã€‚ iterator_traits çš„å®ç°åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š ç”¨æˆ·å®šä¹‰ç±»å‹çš„è¿­ä»£å™¨ ä»¥ deque å¯„å­˜å™¨ä¸ºä¾‹ï¼š template ... // template params elidedclass deque public: class iterator public: typedef random_access_iterator_tag iterator_category; :; ç„¶ååœ¨å…¨å±€çš„ iterator_traits æ¨¡æ¿ä¸­å“åº” typedef é‚£ä¸ªç”¨æˆ·ç±»å‹ä¸­çš„ Tagï¼Œä»¥æä¾›å…¨å±€å’Œç»Ÿä¸€çš„ç±»å‹è¯†åˆ«ã€‚ templatetypename IterTstruct iterator_traits typedef typename IterT::iterator_category iterator_category;; åŸºæœ¬æ•°æ®ç±»å‹æŒ‡é’ˆ æŒ‡é’ˆåµŒå¥—ä¸äº† typedef ã€‚iterator_traits å¯ä»¥é’ˆå¯¹æŒ‡é’ˆç±»å‹æä¾›ä¸€ä¸ªåç‰¹åŒ–ç‰ˆæœ¬(partial template specialization)ã€‚ templatetypename IterT // partial template specializationstruct iterator_traitsIterT* typedef random_access_iterator_tag iterator_category; //æŒ‡é’ˆç±»ä¼¼éšæœºè®¿é—®è¿­ä»£å™¨ ...; æ€»ç»“ä¸€ä¸‹ trait class ï¼š ç¡®è®¤è‹¥å¹²å¯èƒ½å–å¾—çš„ç±»å‹ç›¸å…³ä¿¡æ¯ã€‚ å¯¹è¿­ä»£å™¨è€Œè¨€æ˜¯å–å¾—å…¶ catagory ä¸ºè¯¥ä¿¡æ¯èµ·ä¸€ä¸ªåç§° æœ¬ä¾‹ä¸­çš„ iterator_category æä¾›ä¸€ä¸ª template å’Œä¸€ç»„ç‰¹åŒ–ç‰ˆæœ¬(iterator_traits) ï¼ŒåŒ…å«å¸Œæœ›æ”¯æŒçš„ç±»å‹ç›¸å…³ä¿¡æ¯ã€‚ æˆ‘ä»¬å·²ç»ç”¨ iterator_traits æä¾›äº†è¿­ä»£å™¨çš„ç±»å‹ä¿¡æ¯ï¼Œæ˜¯æ—¶å€™ç»™å‡º advance çš„å®ç°äº†ã€‚ templatetypename IterT, typename DistTvoid advance(IterT iter, DistT d) if (typeid(typename std::iterator_traitsIterT::iterator_category) == typeid(std::random_access_iterator_tag)) //è¿™é‡Œä»ç„¶æœ‰ç¼ºé™· ... ä¸Šè¿°å®ç°å…¶å®å¹¶ä¸å®Œç¾ï¼Œif è¯­å¥ä¸­çš„æ¡ä»¶ï¼ˆIterTç±»å‹ï¼‰åœ¨ç¼–è¯‘æ—¶å°±å·²ç»å†³å®šï¼Œå®ƒçš„åˆ¤æ–­å´æ¨è¿Ÿåˆ°äº†è¿è¡Œæ—¶ï¼ˆæ˜¾ç„¶æ˜¯ä½æ•ˆçš„ï¼‰ã€‚ ç¼–è¯‘å™¨æ¡ä»¶åˆ¤æ–­è¯­å¥çš„å®ç°ï¼Œéœ€è¦ä¸ºä¸åŒçš„ iterator æä¾›ä¸åŒçš„æ–¹æ³•ï¼Œç„¶ååœ¨ advance é‡Œè°ƒç”¨å®ƒä»¬ã€‚ æ‰€è°“â€œæä¾›ä¸åŒæ–¹æ³•â€å³é‡è½½ã€‚ å¯¹äºä¼ è¿‡æ¥çš„å®å‚ï¼Œå“ªä¸€ä¸ªé‡è½½ä»¶æœ€åŒ¹é…å°±è°ƒç”¨å“ªä¸€ä¸ªã€‚è¿™æ­£æ˜¯ä¸€ä¸ªé’ˆå¯¹ç±»å‹çš„ç¼–è¯‘å™¨æ¡ä»¶è¯­å¥ã€‚ templatetypename IterT, typename DistTvoid advance(IterT iter, DistT d) doAdvance(iter, d,typename std::iterator_traitsIterT::iterator_category()); // éšæœºè®¿é—®è¿­ä»£å™¨templatetypename IterT, typename DistTvoid doAdvance(IterT iter, DistT d, std::random_access_iterator_tag) iter += d; // åŒå‘è¿­ä»£å™¨templatetypename IterT, typename DistTvoid doAdvance(IterT iter, DistT d, std::bidirectional_iterator_tag) if (d = 0) while (d--) ++iter; else while (d++) --iter; // è¾“å…¥è¿­ä»£å™¨templatetypename IterT, typename DistTvoid doAdvance(IterT iter, DistT d, std::input_iterator_tag) if (d 0 ) throw std::out_of_range(Negative distance); // see below while (d--) ++iter; è¿™é‡Œåˆ©ç”¨ doAdvance çš„é‡è½½ç‰ˆæœ¬ï¼Œè®© Advance è°ƒç”¨å®ƒä»¬å¹¶é¢å¤–ä¼ é€’ä¸€ä¸ªå¯¹è±¡æ¥åŒºåˆ†è¿­ä»£å™¨ã€‚ ä¸åŒè¿­ä»£é—´å­˜åœ¨ â€œis-aâ€ ç»§æ‰¿å…³ç³»ï¼Œèƒ½å¤Ÿè®©é€‚ç”¨äºçˆ¶ç±»çš„è¿­ä»£å™¨åŒæ—¶ä½¿ç”¨å­ç±»çš„è¿­ä»£å™¨ã€‚ æœ€åæ€»ç»“å¦‚ä½•ä½¿ç”¨ traits classï¼š å»ºç«‹ä¸€ç»„é‡è½½å‡½æ•°ï¼ˆèº«ä»½åƒåŠ³å·¥ï¼‰æˆ–å‡½æ•°æ¨¡æ¿ï¼ˆä¾‹å¦‚doAdvanceï¼‰ï¼Œå½¼æ­¤é—´çš„å·®å¼‚åªåœ¨äºå„è‡ªçš„traitså‚æ•°ï¼Œä»¤æ¯ä¸ªå‡½æ•°å®ç°ç ä¸å…¶æ¥å—ä¹‹traitsä¿¡æ¯ç›¸åº”å’Œã€‚ å»ºç«‹ä¸€ä¸ªæ§åˆ¶å‡½æ•°ï¼ˆèº«ä»½åƒå·¥å¤´ï¼‰æˆ–å‡½æ•°æ¨¡æ¿ï¼ˆä¾‹å¦‚Advanceï¼‰ï¼Œå®ƒè°ƒç”¨ä¸Šè¿°é‚£äº›åŠ³å·¥å‡½æ•°å¹¶ä¼ é€’ traits class æ‰€æä¾›çš„ä¿¡æ¯ã€‚ å•Šï¼Œé™¤äº†é’ˆå¯¹è¿­ä»£å™¨çš„ Traits ï¼Œæ ‡å‡†ç¨‹åºåº“é‡Œè¿˜æœ‰ char_traits ç”¨æ¥ä¿å­˜å­—ç¬¦ç±»å‹çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠnumeric_limits ç”¨æ¥ä¿å­˜æ•°å€¼ç±»å‹ç›¸å…³ä¿¡æ¯(æ¯”å¦‚æ•°å€¼ç±»å‹çš„æœ€å¤§å€¼å’Œæœ€å°å€¼)ã€‚ tr1 ä¹Ÿå¯¼å…¥äº†å¾ˆå¤šæ–°çš„ traits classes æ¥æä¾›ç±»å‹ä¿¡æ¯ã€‚ 48.è®¤è¯†å…ƒç¼–ç¨‹ Template metaprogrammingï¼ˆTMPï¼Œæ¨¡æ¿å…ƒç¼–ç¨‹ï¼‰å¯å°†å·¥ä½œç”±è¿è¡ŒæœŸç§»å¾€ç¼–è¯‘æœŸã€‚ è¿™èƒ½å¸®åŠ©å®ç°æ—©æœŸé”™è¯¯ä¾¦æµ‹å’Œæ›´é«˜çš„æ‰§è¡Œæ•ˆç‡ã€‚ TMP å¯è¢«ç”¨æ¥ç”Ÿæˆâ€œbased on combinations of policy choicesâ€çš„å®¢æˆ·å®šåˆ¶ä»£ç ï¼Œä¹Ÿå¯ç”¨æ¥é¿å…ç”Ÿæˆå¯¹ç‰¹æ®Šç±»å‹å¹¶ä¸é€‚åˆçš„ä»£ç  æ¨¡æ¿å…ƒç¼–ç¨‹ï¼ˆTemplate Metaprogrammingï¼ŒTMPï¼‰å°±æ˜¯åˆ©ç”¨æ¨¡æ¿æ¥ç¼–å†™template-based C++ç¨‹åºå¹¶ä½¿å…¶è¿è¡Œäºç¼–è¯‘æœŸçš„è¿‡ç¨‹ã€‚ æ¨¡æ¿å…ƒç¨‹åºï¼ˆTemplate Metaprogramï¼‰æ˜¯ç”±C++å†™æˆçš„ï¼Œè¿è¡Œåœ¨ç¼–è¯‘å™¨ä¸­çš„ç¨‹åºã€‚å½“ç¨‹åºè¿è¡Œç»“æŸåï¼Œå®ƒçš„è¾“å‡ºä»ç„¶ä¼šæ­£å¸¸åœ°ç¼–è¯‘ã€‚ C++å¹¶ä¸æ˜¯ä¸ºæ¨¡æ¿å…ƒç¼–ç¨‹è®¾è®¡çš„ï¼Œä½†è‡ª90å¹´ä»£ä»¥æ¥ï¼Œæ¨¡æ¿å…ƒç¼–ç¨‹çš„ç”¨å¤„é€æ¸åœ°è¢«ä¸–äººæ‰€å‘ç°ï¼ˆä¸æ˜¯å‘æ˜ï¼‰ã€‚ å¥½å¤„ï¼š æ¨¡æ¿ç¼–ç¨‹æä¾›çš„å¾ˆå¤šä¾¿åˆ©åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­å¾ˆéš¾å®ç°ï¼› ç¨‹åºçš„å·¥ä½œæ—¶é—´ä»è¿è¡ŒæœŸè½¬ç§»åˆ°ç¼–è¯‘æœŸï¼Œå¯ä»¥æ›´æ—©å‘ç°é”™è¯¯ï¼Œè¿è¡Œæ—¶æ›´åŠ é«˜æ•ˆã€‚ åœ¨è®¾è®¡æ¨¡å¼ä¸Šï¼Œå¯ä»¥åŸºäºä¸åŒçš„ç­–ç•¥ï¼Œè‡ªåŠ¨ç»„åˆè€Œç”Ÿæˆå…·ä½“çš„è®¾è®¡æ¨¡å¼å®ç°ã€‚ å°†è¿è¡ŒæœŸç¨‹åºè½¬ç§»åˆ°ç¼–è¯‘æœŸçš„åŠŸèƒ½éå¸¸ä¼˜ç§€ã€‚ä»¥ item 47 ä¸­ advance( )ä¸ºä¾‹ï¼š è¿è¡ŒæœŸè½¬ç§»åˆ°ç¼–è¯‘æœŸèƒ½é™ä½å¯æ‰§è¡Œæ–‡ä»¶å¤§å°ï¼› èƒ½å¤Ÿé¿å…ä¸å¿…è¦çš„é™æ€ç±»å‹æ£€æŸ¥é”™è¯¯ åœ¨ typeid-based æ¡ä»¶åˆ¤æ–­è¯­å¥çš„ advance å‡½æ•°å†…ï¼Œä¼šå‡ºç°ä¸èƒ½ç¼–è¯‘çš„æƒ…å†µï¼šè®¾æƒ³ä»¥ä¸‹advance::iterator, intä¸­çš„è¿™æ¡è¯­å¥ï¼š iter += d; å³ä½¿ list::iterator æ˜¯åŒå‘è¿­ä»£å™¨ï¼Œä¸æ”¯æŒ+=è¿ç®—ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šè¿è¡Œè¯¥æ­»çš„+=ç®—æœ¯è¿ç®—ï¼Œç¼–è¯‘æœŸä»ç„¶ä¼šæé†’ç±»å‹é”™è¯¯ï¼Œâ€iterator ä¸æ”¯æŒ + è¿ç®—ç¬¦â€ ã€‚ å…ƒç¼–ç¨‹çš„å¨åŠ›ï¼š TMP æ˜¯å›¾çµå®Œå…¨ï¼ˆturing-comleteï¼‰çš„ï¼Œå¯ä»¥åˆ©ç”¨å®ƒ å£°æ˜å˜é‡ã€æ‰§è¡Œå¾ªç¯ã€ç¼–å†™å’Œè°ƒç”¨å‡½æ•°ç­‰ç­‰ã€‚ ä½†å®ƒçš„ä½¿ç”¨é£æ ¼å’Œæ™®é€š C++ å®Œå…¨ä¸åŒã€‚ TMP ä¸»è¦æ˜¯ä¸ªå‡½æ•°å¼è¯­è¨€ã€‚ç”¨æ­£å¸¸ c++ çš„é˜¶ä¹˜å¾ªç¯å‡½æ•°ä¸¾ä¾‹ï¼š TMP æ²¡æœ‰çœŸæ­£çš„å¾ªç¯æ„ä»¶ï¼Œå®ƒæ˜¯é é€’å½’å®Œæˆç±»ä¼¼åŠŸèƒ½ã€‚ templateunsigned nstruct Factorial enum value = n * Factorialn-1::value ;;templatestruct Factorial0 enum value = 1 ;; void test() coutFactorial5::value; //5! = 120 TMPä»¥ recursive tepmlate instantiation å–ä»£å¾ªç¯ï¼Œæ¯ä¸ªå…·ç°ä½“éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½ value ï¼Œæ¯ä¸ª value æœ‰è‡ªå·±â€œ å¾ªç¯â€œçš„é€‚å½“å€¼ã€‚ æœ€åï¼š æ€»ç»“ä¸€ä¸‹ TMP çš„å®é™…åº”ç”¨åœºæ™¯ï¼š ç¡®ä¿é‡çº²æ­£ç¡®ã€‚åœ¨ç§‘å­¦è®¡ç®—ä¸­ï¼Œé‡çº²çš„ç»“åˆè¦å§‹ç»ˆä¿æŒæ­£ç¡®ã€‚æ¯”å¦‚ä¸€å®šè¦å•ä½ä¸º â€mâ€ çš„å˜é‡å’Œå•ä½ä¸º â€sâ€ çš„å˜é‡ç›¸é™¤æ‰èƒ½å¾—åˆ°ä¸€ä¸ªé€Ÿåº¦å˜é‡ï¼ˆå…¶å•ä½ä¸ºâ€msâ€ï¼‰ã€‚ ä½¿ç”¨ TMP æ—¶ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¿è¯è¿™ä¸€ç‚¹ã€‚å› ä¸ºä¸åŒçš„é‡çº²åœ¨ TMP ä¸­ä¼šè¢«æ˜ å°„ä¸ºä¸åŒçš„ç±»å‹ã€‚ ä¼˜åŒ–çŸ©é˜µè¿ç®—ã€‚æ¯”å¦‚çŸ©é˜µè¿ä¹˜é—®é¢˜ï¼ŒTMP ä¸­æœ‰ä¸€é¡¹è¡¨è¾¾å¼æ¨¡æ¿çš„æŠ€æœ¯ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸå»é™¤ä¸´æ—¶å˜é‡å’Œåˆå¹¶å¾ªç¯ã€‚ å¯ä»¥åšåˆ°æ›´å¥½çš„è¿è¡Œæ—¶æ•ˆç‡ã€‚ è‡ªå®šä¹‰è®¾è®¡æ¨¡å¼çš„å®ç°ã€‚è®¾è®¡æ¨¡å¼å¾€å¾€æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œè€Œä¸€é¡¹å«åŸºäºç­–ç•¥è®¾è®¡çš„ TMP æŠ€æœ¯å¯ä»¥å¸®ä½ åˆ›å»ºç‹¬ç«‹çš„è®¾è®¡ç­–ç•¥ï¼Œè€Œè¿™äº›è®¾è®¡ç­–ç•¥å¯ä»¥ä»¥ä»»æ„æ–¹å¼ç»„åˆã€‚ç”Ÿæˆæ— æ•°çš„è®¾è®¡æ¨¡å¼å®ç°æ–¹å¼ã€‚ å¾€å°åœºæ™¯é‡Œè¯´ï¼š è¿è¡ŒæœŸè½¬ç§»åˆ°ç¼–è¯‘å™¨çš„æ•ˆç‡æå‡ å®Œæˆâ€œä¸èƒ½åœ¨è¿è¡ŒæœŸå®ç°çš„åŠŸèƒ½â€ éƒ½ä»¤äººå°è±¡æ·±åˆ»ã€‚ ç¬¬å…«ç« ï¼šCustomizing new and delete49.äº†è§£ new-handler çš„è¡Œä¸º set_new_handler å…è®¸å®¢æˆ·æŒ‡å®šä¸€ä¸ªå½“å†…å­˜åˆ†é…è¯·æ±‚ä¸èƒ½è¢«æ»¡è¶³æ—¶å¯ä»¥è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ nothrow new ä½œç”¨æœ‰é™ï¼Œå› ä¸ºå®ƒä»…é€‚ç”¨äºå†…å­˜åˆ†é…ï¼Œéšåçš„ constructor è°ƒç”¨å¯èƒ½ä¾ç„¶ä¼šæŠ›å‡º exceptionsã€‚ new-handler ç™»åœºï¼š new ç”³è¯·å†…å­˜å¤±è´¥æ—¶ä¼šæŠ›å‡º bad alloc å¼‚å¸¸ï¼Œæ­¤å‰ä¼šè°ƒç”¨ä¸€ä¸ªç”± std::set_new_handler() æŒ‡å®šçš„é”™è¯¯å¤„ç†å‡½æ•°new-handlerã€‚ â€œnew-handlerâ€ å‡½æ•°é€šè¿‡ std::set_new_handler() æ¥è®¾ç½®ï¼Œstd::set_new_handler() å®šä¹‰åœ¨ä¸­ï¼š namespace std typedef void (*new_handler)(); //å®šä¹‰å‡ºä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘å‡½æ•°ï¼ˆnew å¤±è´¥æ—¶æ‰€è°ƒç”¨ï¼‰ new_handler set_new_handler(new_handler p) throw();//å°¾ç«¯çš„ throw æ˜¯ä¸€ä»½å¼‚å¸¸æ˜ç»† //è¡¨ç¤ºè¯¥å‡½æ•°ä¸æŠ›å‡ºä»»ä½•å¼‚å¸¸ ä½¿ç”¨ç¤ºä¾‹ï¼š void outOfMem() std::coutUnable to alloc memory; std::abort();int main() std::set_new_handler(outOfMem); int *p = new int[100000000L]; å½“ new ç”³è¯·å†…å­˜å¤±è´¥æ—¶ï¼Œå®ƒä¼šä¸æ–­è°ƒç”¨ new-handler å‡½æ•°ï¼Œç›´åˆ°æ‰¾åˆ°è¶³å¤Ÿå†…å­˜ã€‚ æ€»ç»“ä¸€ä¸‹ new-handler çš„ä½œç”¨ï¼š ä½¿æ›´å¤šå†…å­˜å¯ç”¨ï¼› è¿™æ˜¯ä¸ºäº†è®©ä¸‹ä¸€æ¬¡å†…å­˜åˆ†é…å¯èƒ½æˆåŠŸã€‚(å¯èƒ½ç¨‹åºå¼€å§‹å°±åˆ†é…äº†å¤§å—å†…å­˜ä¾›æ­¤ä½¿ç”¨) å®‰è£…ä¸€ä¸ªæ–°çš„ â€new-handlerâ€ï¼› å½“å‰new-handlerå¤±æ•ˆåå¯ä»¥æ›¿æ¢ä¸ºå¦ä¸€ä¸ªæ›´æœ‰æ•ˆçš„ã€‚ï¼ˆå¯ä»¥ä¿®æ”¹è‡ªå·±çš„æˆå‘˜æ¥å¢å¼ºä¸‹æ¬¡è°ƒç”¨ï¼‰ å¸è½½å½“å‰ â€new-handlerâ€ï¼› å°† null ä¼ ç»™set_new_handlerã€‚ï¼ˆæ²¡æœ‰å®‰è£… new-handler ä¼šå¯¼è‡´å†…å­˜åˆ†é…ä¸æˆåŠŸæ—¶æŠ›å‡ºå¼‚å¸¸ï¼‰ æŠ›å‡º bad_allocï¼ˆæˆ–å®ƒçš„å­ç±»ï¼‰å¼‚å¸¸ï¼› è¿™ä¸ªå¼‚å¸¸ä¸ä¼šè¢« new æ•æ‰ï¼Œè€Œæ˜¯ä¼ è¾“åˆ°ç”³è¯·å†…å­˜çš„åœ°æ–¹ã€‚ ä¸è¿”å›ï¼Œå¯ä»¥ abort æˆ–è€… exit ã€‚ é‡è½½ operator newï¼š äº†è§£å®Œ new-handler ï¼Œæ¥è€ƒè™‘ä¸‹é¢å¯¹ä¸åŒç±»å‹æ—¶çš„å¤„ç†æƒ…å†µã€‚ std::set_new_handler è®¾ç½®çš„æ˜¯å…¨å±€çš„ bad_alloc çš„é”™è¯¯å¤„ç†å‡½æ•°ï¼ŒC++å¹¶æœªæä¾›ç±»å‹ç›¸å…³çš„ bad_alloc å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚ ä½†ä½ å¯ä»¥åœ¨ class å†…é‡è½½ new å’Œ new-handler ï¼Œç”¨å®Œåœ¨æ”¹å›å»å°±æ˜¯äº†ã€‚ ä»¥ Widget ç±»ä¸ºä¾‹ï¼š class Widgetpublic: static std::new_handler set_new_handler(std::new_handler p) throw(); static void * operator new(std::size_t size) throw(std::bad_alloc);private: static std::new_handler current;; // é™æ€æˆå‘˜éœ€è¦å®šä¹‰åœ¨ç±»çš„å¤–é¢ï¼Œå…·ä½“çœ‹ item 2std::new_handler Widget::current = 0; //åˆå§‹åŒ–std::new_handler Widget::set_new_handler(std::new_handler p) throw() std::new_handler old = current; current = p; return old;//æ›¿æ¢ä½¿ç”¨å®Œæ¯•å å½’è¿˜åŸæŒ‡é’ˆ å…³äº abort, exit, terminate çš„åŒºåˆ«ï¼šabort ä¼šè®¾ç½®ç¨‹åºéæ­£å¸¸é€€å‡ºï¼Œexit ä¼šè®¾ç½®ç¨‹åºæ­£å¸¸é€€å‡ºï¼Œå½“å­˜åœ¨æœªå¤„ç†å¼‚å¸¸æ—¶C++ä¼šè°ƒç”¨ terminateï¼Œ å®ƒä¼šå›è°ƒç”± std::set_terminate è®¾ç½®çš„å¤„ç†å‡½æ•°ï¼Œé»˜è®¤ä¼šè°ƒç”¨ abortã€‚ operator new çš„å·¥ä½œåˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š è°ƒç”¨ std::set_new_handlerï¼ŒæŠŠ Widget::current è®¾ç½®ä¸ºå…¨å±€çš„é”™è¯¯å¤„ç†å‡½æ•°ï¼› è°ƒç”¨å…¨å±€çš„ operator new æ¥åˆ†é…çœŸæ­£çš„å†…å­˜ï¼› å¦‚æœåˆ†é…å†…å­˜å¤±è´¥ï¼ŒWidget::current å°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼› ä¸ç®¡æˆåŠŸä¸å¦ï¼Œéƒ½å¸è½½ Widget::currentï¼Œå¹¶å®‰è£…è°ƒç”¨ Widget::operator new ä¹‹å‰çš„å…¨å±€é”™è¯¯å¤„ç†å‡½æ•°ã€‚ æˆåŠŸç”³è¯·å†…å­˜åç”± widget ææ„å‡½æ•°æ¢å¤ï¼Œå¤±è´¥åç”± new å‡½æ•°æœ¬èº«å¤„ç†ã€‚ RAIIç±» class NewHandlerHolder //èµ„æºå¤„ç†ç±»ï¼Œå¸®åŠ©å…¶ä»–ç±»å®ç° new-handlerpublic: explicit NewHandlerHolder(new_handler nh): handler(nh) //å–å¾—ç›®å‰çš„new-hander ~NewHandlerHolder() set_new_handler(handler); //é‡Šæ”¾private: new_handler handler; NewHandlerHolder(const HandlerHolder); // ç¦ç”¨æ‹·è´æ„é€ å‡½æ•° è§ item 14 const NewHandlerHolder operator=(const NewHandlerHolder); // ç¦ç”¨èµ‹å€¼è¿ç®—ç¬¦;//äºæ˜¯ Widget::operator new çš„å®ç°å…¶å®éå¸¸ç®€å•ï¼švoid * Widget::operator new(size_t size) throw(bad_alloc) NewHandlerHolder h(set_new_handler(currentHandler));//è¿”å›åŸnew-hæ¥è®°å½•ï¼Œä½¿ç”¨ç°åœ¨çš„nh return ::operator new(size); // è°ƒç”¨å…¨å±€çš„newï¼ŒæŠ›å‡ºå¼‚å¸¸æˆ–è€…æˆåŠŸ // å‡½æ•°è°ƒç”¨ç»“æŸï¼Œæ¢å¤ global new-handler åœ¨å®¢æˆ·ç«¯ä½¿ç”¨æƒ…å†µæ˜¯è¿™æ ·çš„ï¼š void outofMem();Widget::set_new_handler(outOfMem); // è®¾å®šoutOfMemä¸ºWidgetçš„new-handingWidget* pw1 = new Widget; // å¦‚æœå†…å­˜åˆ†é…å¤±è´¥è°ƒç”¨outOfmemstd::string* ps = new std::string; // å¦‚æœå†…å­˜åˆ†é…å¤±è´¥è°ƒç”¨global new-hanldingå‡½æ•°Widget::set_new_handler(0); // è®¾å®šWidgetçš„new-handingä¸ºnullWidget* pw2 = new Widget; // å¦‚æœå†…å­˜åˆ†é…å¤±è´¥ï¼Œç«‹åˆ»æŠ›å‡ºå¼‚å¸¸ ä»”ç»†è§‚å¯Ÿä¸Šé¢çš„ä»£ç ï¼Œå¾ˆå®¹æ˜“å‘ç°è‡ªå®šä¹‰ â€new-handlerâ€ çš„é€»è¾‘å…¶å®å’Œ class æœ¬èº«æ˜¯æ— å…³çš„ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè¿™äº›é€»è¾‘æŠ½å–å‡ºæ¥ä½œä¸ºä¸€ä¸ª template base class (åŠŸèƒ½ç±»ï¼‰ï¼š ä½ åªéœ€è¦è®©templateéƒ¨åˆ†ç¡®ä¿æ¯ä¸€ä¸ª class è·å¾—ä¸€ä¸ªä¸åŒçš„ currentHandler æˆå‘˜å˜é‡ templatetypename Tclass NewHandlerSupportpublic: static std::new_handler set_new_handler(std::new_handler p) throw(); static void * operator new(std::size_t size) throw(std::bad_alloc);private: static std::new_handler current;; templatetypename Tstd::new_handler NewHandlerSupportT::set_new_handler(std::new_handler p) throw() std::new_handler old = current; current = p; return old; templatetypename Tvoid * NewHandlerSupportT::operator new(std::size_t size) throw(std::bad_alloc) NewHandlerHolder h(std::set_new_handler(current)); return ::operator new(size);//å°†æ¯ä¸€ä¸ª currentHandler åˆå§‹åŒ–ä¸ºnulltemplatetypename Tstd::new_handler NewHandlerSupportT::current = 0; å®é™…ä¸Šè¯¥ base class ä»æœªä½¿ç”¨å‚æ•°Tã€‚é‚£æ²¡ä»€ä¹ˆå½±å“ã€‚åªæ˜¯ç”±äºæˆå‘˜å˜é‡ current æ˜¯ staticï¼Œéœ€è¦æˆ‘ä»¬ä¸ºä¸åŒ class ä¾æ¬¡å®šåˆ¶ currentHandler å‰¯æœ¬ã€‚ç±»å‹Tåªæ˜¯ç”¨æ¥åŒºåˆ†ä¸åŒ derived class ï¼Œ æœ‰äº†è¿™ä¸ªæ¨¡æ¿åŸºç±»åï¼Œç»™ Widget æ·»åŠ  â€new-handlerâ€ æ”¯æŒåªéœ€è¦ public ç»§æ‰¿å³å¯ï¼š class Widget: public NewHandlerSupportWidget ... ; å­ç±»ç»§æ‰¿ä¸€ä¸ªæ¨¡æ¿åŒ–çš„ base class ,åŒæ—¶åè€…ä»¥å‰è€…ä¸ºç±»å‹å‚æ•°ã€‚ è¿™ä¸ªæœ‰ç‚¹ç»•å¼¯å¼¯çš„æŠ€æœ¯ç§°ä½œï¼šcuriously recurring template pattern CRTP ã€‚ å…³äºnothrowï¼š 1993 å¹´ä¹‹å‰ C++ çš„ operator new åœ¨å¤±è´¥æ—¶ä¼šè¿”å› null è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚å¦‚ä»Šçš„ C++ ä»ç„¶æ”¯æŒè¿™ç§ nothrow çš„operator newï¼š Widget *p1 = new Widget; // å¤±è´¥æ—¶æŠ›å‡º bad_alloc å¼‚å¸¸assert(p1 != 0); // è¿™æ€»æ˜¯æˆç«‹çš„if(p1 == 0) ... //è¿™ä¸ªæµ‹è¯•ä¸€å®šå¤±è´¥Widget *p2 = new (std::nothrow) Widget; å¦‚æœåˆ†é… widget å¤±è´¥ï¼Œè¿”å›0if(p2 == 0) ... // å¯èƒ½æˆåŠŸï¼Œå¤±è´¥æ—¶ p2 == 0 â€œnothrow newâ€ åªé€‚ç”¨äºå†…å­˜åˆ†é…é”™è¯¯ã€‚è€Œæ„é€ å‡½æ•°ä¹Ÿå¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè¿™æ—¶å®ƒä¹Ÿä¸èƒ½ä¿è¯æ˜¯ new è¯­å¥æ˜¯ â€nothrowâ€ çš„ã€‚ 50.äº†è§£ new å’Œ delete çš„åˆç†æ›¿æ¢æ—¶æœº æœ‰å¾ˆå¤šæ­£å½“çš„ç¼–å†™ new å’Œ delete çš„è‡ªå®šä¹‰ç‰ˆæœ¬çš„ç†ç”±ï¼ŒåŒ…æ‹¬æ”¹è¿›æ€§èƒ½ï¼Œè°ƒè¯• heapï¼ˆå †ï¼‰ç”¨æ³•é”™è¯¯ï¼Œä»¥åŠæ”¶é›† heapï¼ˆå †ï¼‰ç”¨æ³•ä¿¡æ¯ã€‚ åˆ—ä¸¾ä¸€ä¸‹æ›¿æ¢é»˜è®¤ new å’Œ delete çš„åœºæ™¯ï¼š ç”¨æ¥æ£€æµ‹è¿ç”¨ä¸Šçš„é”™è¯¯ã€‚ è‡ªè¡Œå®šä¹‰çš„ new èƒ½å¤Ÿè¶…é¢åˆ†é…å†…å­˜ï¼Œç”¨é¢å¤–ç©ºé—´æ”¾ç½®ç‰¹å®šçš„ byte patternï¼ˆå³ signatureï¼‰ã€‚delete èƒ½å¤Ÿå¾—ä»¥æ£€æŸ¥ä¸Šè¿°ç­¾åæ˜¯å¦åŸå°ä¸åŠ¨ã€‚ä¸åŠ¨è¯´æ˜åˆ†é…åŒºæŸä¸ªæ—¶é—´å‘ç”Ÿäº† overrun æˆ– underrunï¼Œdelete æ­¤æ—¶å¯ä»¥è®°å½•è¿™ä¸ªæŒ‡é’ˆã€‚ æé«˜æ•ˆç‡ ç¼–è¯‘å™¨è‡ªå¸¦çš„ new å’Œ delete è¦å¤„ç†é•¿æ—¶é—´æ‰§è¡Œç¨‹åºå’Œå„ç§éœ€æ±‚ï¼Œå¤§å°å—å†…å­˜å’Œå„ç§åˆ†é…å½¢æ€ã€‚è¿™æ„å‘³ç€ è‡ªå¸¦ new å’Œ delete ä¼šæœ‰ç€å¼ºå¤§çš„å…¼å®¹æ€§ï¼ŒåŒæ—¶ä¸ä¼šå¯¹æŸä¸ªéœ€æ±‚æœ‰å¤ªå¤šçš„å€¾å‘ã€‚æ‰€ä»¥å®šåˆ¶ç‰ˆ new å’Œ delete ä¼šæ¯”è‡ªå¸¦çš„æ›´æœ‰æ•ˆç‡ã€‚ æ”¶é›†åŠ¨æ€åˆ†é…å†…å­˜çš„ä½¿ç”¨ä¿¡æ¯ã€‚ åœ¨ç»§ç»­è‡ªå®šä¹‰ new ä¹‹å‰ï¼Œä½ å¯èƒ½éœ€è¦å…ˆè‡ªå®šä¹‰ä¸€ä¸ª new æ¥æ”¶é›†åœ°å€åˆ†é…ä¿¡æ¯ï¼Œæ¯”å¦‚åŠ¨æ€å†…å­˜å—å¤§å°æ˜¯æ€æ ·åˆ†å¸ƒçš„ï¼Ÿåˆ†é…å’Œå›æ”¶æ˜¯å…ˆè¿›å…ˆå‡º FIFO è¿˜æ˜¯åè¿›å…ˆå‡º LIFOï¼Ÿ ä¸ºäº†å¢åŠ åˆ†é…å’Œå½’è¿˜é€Ÿåº¦ å®šåˆ¶åˆ†é…å™¨é’ˆå¯¹ç‰¹å®šç±»å‹å’Œå›ºå®šå°ºå¯¸èƒ½å¤Ÿæœ‰æ›´å¥½çš„æ•ˆæœã€‚åƒBoost::Pool ä¸ºäº†é™ä½é»˜è®¤å†…å­˜ç®¡ç†å™¨çš„é¢å¤–å¼€é”€ å¼¥è¡¥é»˜è®¤åˆ†é…å™¨çš„éæœ€ä½³é½ä½(suboptimal alignment) å°†ä¸ä¿è¯å¯¹é½çš„newæ›¿æ¢ä¸ºå¯¹é½çš„ç‰ˆæœ¬ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºæ•ˆç‡å¤§å¹…æå‡ã€‚ å°†ç›¸å…³å¯¹è±¡é›†ä¸­ å¦‚æœæŒ‡å®šæŸä¸ªæ•°æ®ç»“æ„å¾€å¾€ä¸€èµ·ä½¿ç”¨ï¼Œè€Œä½ æœ‰å¸Œæœ›å¤„ç†è¿™äº›æ•°æ®æ—¶ï¼Œå°†â€œå†…å­˜é¡µé”™è¯¯â€ï¼ˆpage faultï¼‰çš„é¢‘ç‡é™è‡³æœ€ä½ï¼Œé‚£ä¹ˆä¸ºæ­¤æ•°æ®ç»“æ„åˆ›å»ºå¦ä¸€ä¸ªheapå°±æœ‰æ„ä¹‰ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥è¢«æˆç°‡é›†ä¸­åœ¨å°½å¯èƒ½å°‘çš„å†…å­˜é¡µï¼ˆpageï¼‰ä¸Šã€‚è§æ¡æ¬¾52ã€‚ å®Œæˆéä¼ ç»Ÿè¡Œä¸º æœ‰æ—¶å¸Œæœ›operator newå’Œdeleteåšç¼–è¯‘å™¨æä¾›çš„ç¼ºçœç‰ˆæœ¬æ²¡åšçš„äº‹æƒ…ï¼Œå¦‚å°†C APIå°è£…æˆC++ APIï¼Œå°†å½’è¿˜å†…å­˜è¦†ç›–ä¸º0 é‡å†™ç¤ºä¾‹ï¼š è‡ªå®šä¹‰ä¸€ä¸ª operator new å¾ˆå®¹æ˜“çš„ï¼Œæ¯”å¦‚å®ç°ä¸€ä¸ªæ”¯æŒè¶Šç•Œæ£€æŸ¥çš„ newï¼š static const int signature = 0xDEADBEEF; // è¾¹ç•Œç¬¦typedef unsigned char Byte; void* operator new(std::size_t size) throw(std::bad_alloc) // å¤šç”³è¯·ä¸€äº›å†…å­˜æ¥å­˜æ”¾å ä½ç¬¦ size_t realSize = size + 2 * sizeof(int); // ç”³è¯·å†…å­˜ void *pMem = malloc(realSize); if (!pMem) throw bad_alloc(); // å†™å…¥è¾¹ç•Œç¬¦ *(reinterpret_castint*(static_castByte*(pMem)+realSize-sizeof(int))) = *(static_castint*(pMem)) = signature; // è¿”å›çœŸæ­£çš„å†…å­˜åŒºåŸŸ return static_castByte*(pMem) + sizeof(int); å…¶å®ä¸Šè¿°ä»£ç æ˜¯æœ‰ä¸€äº›ç‘•ç–µçš„ï¼š operator new åº”å½“ä¸æ–­åœ°è°ƒç”¨new handlerï¼Œä¸Šè¿°ä»£ç ä¸­æ²¡æœ‰éµå¾ªè¿™ä¸ªæƒ¯ä¾‹ï¼› é½ä½è¦æ±‚ï¼ˆalignmentï¼‰ï¼š è®¸å¤š computer architectures ä½“ç³»ç»“æ„ä¸‹ï¼Œä¸åŒçš„ç±»å‹è¢«è¦æ±‚æ”¾åœ¨å¯¹åº”çš„å†…å­˜ä½ç½®ã€‚æ¯”å¦‚ double çš„èµ·å§‹åœ°å€åº”å½“æ˜¯ 8 çš„æ•´æ•°å€ï¼Œintçš„èµ·å§‹åœ°å€åº”å½“æ˜¯ 4 çš„æ•´æ•°å€ã€‚ä¸Šè¿°ä»£ç å¯èƒ½ä¼šå¼•èµ·è¿è¡Œæ—¶ç¡¬ä»¶é”™è¯¯ã€‚ èµ·å§‹åœ°å€å¯¹é½ã€‚C++è¦æ±‚åŠ¨æ€å†…å­˜ç”³è¯·çš„èµ·å§‹åœ°å€å¯¹æ‰€æœ‰ç±»å‹æ¥è¯´éƒ½æ˜¯å­—èŠ‚å¯¹é½çš„ï¼Œnew å’Œ malloc éƒ½éµå¾ªè¿™ä¸€ç‚¹ï¼Œç„¶è€Œæˆ‘ä»¬è¿”å›çš„åœ°å€åç§»äº†ä¸€ä¸ªintã€‚è¿™å°†é€ æˆç¨‹åºå´©æºƒæˆ–æ‰§è¡Œé€Ÿåº¦å˜æ…¢ã€‚åˆ°æ­¤ä¸ºæ­¢ä½ å·²ç»çœ‹åˆ°äº†ï¼Œå®ç°ä¸€ä¸ª operator new å¾ˆå®¹æ˜“ï¼Œä½†å®ç°ä¸€ä¸ªå¥½çš„ operator new å´å¾ˆéš¾ã€‚ é½ä½å’Œå†…å­˜ç®¡ç†å™¨æœ‰å…³ã€‚ä½ å¯ä»¥æµè§ˆä¸€ä¸‹ä¸åŒå†…å­˜ç®¡ç†å™¨æ¥é‡æ–°è¿æ¥ï¼Œåˆ°å¼€æ”¾æºç ä¸­å»æ‰¾ï¼ˆå¦‚ boost ç¨‹åºåº“çš„ Poolï¼‰ã€‚ 51.ç¼–å†™ new å’Œ delete æ—¶å›ºå®ˆå¸¸è§„ operator new åº”è¯¥åŒ…å«ä¸€ä¸ªè®¾æ³•åˆ†é…å†…å­˜çš„æ— é™å¾ªç¯ï¼Œå¦‚æœå®ƒä¸èƒ½æ»¡è¶³ä¸€ä¸ªå†…å­˜è¯·æ±‚ï¼Œåº”è¯¥è°ƒç”¨ new-handlerï¼Œè¿˜åº”è¯¥å¤„ç†é›¶å­—èŠ‚è¯·æ±‚ã€‚class-specificï¼ˆç±»ä¸“ç”¨ï¼‰ç‰ˆæœ¬åº”è¯¥å¤„ç†å¯¹æ¯”é¢„æœŸæ›´å¤§çš„åŒºå—çš„è¯·æ±‚ã€‚ operator delete å¦‚æœæ”¶åˆ°ä¸€ä¸ªç©ºæŒ‡é’ˆåº”è¯¥ä»€ä¹ˆéƒ½ä¸åšã€‚class-specificï¼ˆç±»ä¸“ç”¨ï¼‰ç‰ˆæœ¬åº”è¯¥å¤„ç†æ¯”é¢„æœŸæ›´å¤§çš„åŒºå—ã€‚ å¦‚é¢˜ï¼Œä¸‹é¢è¯´æ˜æ‰€è°“ new å’Œ delete çš„å¸¸è§„æ ‡å‡†ï¼š è¿”å›å€¼å¿…é¡»æ­£ç¡®ï¼šç”³è¯·æˆåŠŸè¿”å›å†…å­˜åœ°å€ï¼Œç”³è¯·å¤±è´¥å°±è¦è°ƒç”¨ new-handling å‡½æ•°ã€‚ å…·å¤‡é‡å¤ç”³è¯·å†…å­˜çš„èƒ½åŠ›ï¼šåœ¨æ¯æ¬¡å¤±è´¥åè°ƒç”¨ new-handling å‡½æ•°ã€‚ åªæœ‰å½“æŒ‡å‘ new-handling å‡½æ•°çš„æŒ‡é’ˆæ˜¯ nullï¼Œoperator new æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ ç”³è¯·å¤§å°ä¸ºé›¶æ—¶ä¹Ÿåº”è¿”å›åˆæ³•çš„æŒ‡é’ˆã€‚ ç¤ºä¾‹ï¼šä¸€ä¸ª non-member operator new ã€‚ void * operator new(std::size_t size) throw(std::bad_alloc) if(size == 0) size = 1; while(true) // å°è¯•ç”³è¯· void *p = malloc(size); // ç”³è¯·æˆåŠŸ,ç›´æ¥è¿”å› if(p) return p; // ç”³è¯·å¤±è´¥ï¼Œè·å¾—new handler new_handler h = set_new_handler(0); set_new_handler(h); if(h) (*h)(); else throw bad_alloc(); 1.ç”³è¯·å¤§å°ä¸º0æ—¶ï¼Œç¤ºä¾‹ç»™å‡ºçš„è§£å†³æ–¹æ³•æ˜¯æŠŠå¤§å°æ”¹ä¸º1ã€‚è™½ç„¶ç¬¨ä½†æ˜¯æœ‰æ•ˆã€‚ 2.é‡å¤ç”³è¯·å†…å­˜çš„èƒ½åŠ›å³æ­»å¾ªç¯ while(true) ã€‚ 3.è°ƒç”¨ new-handling å‡½æ•°çš„æ–¹æ³•ç•¥å¾®æœ‰äº›ç¬¨æ‹™ï¼šè®¾ä¸ºnullï¼Œåˆ©ç”¨è¿”å›å€¼è¿”å›æ—§å‡½æ•°æŒ‡é’ˆï¼Œå†è¿”å›åŸæ ·ã€‚ (å› ä¸ºæ²¡æœ‰åŠæ³•ç›´æ¥å–å¾— new-handling æŒ‡é’ˆï¼Œåªèƒ½é€šè¿‡ set_new_handler æ‰¾å‡ºå®ƒ) member operator new function åœ¨ç»§æ‰¿æ—¶çš„é—®é¢˜ï¼š è‡ªå®šä¹‰ new å‡½æ•°ä¼šè¢« derived class ç»§æ‰¿ã€‚ä½†è¿™ä¸ªå‡½æ•°çš„éœ€æ±‚å¾€å¾€åªé’ˆå¯¹ç‰¹å®š class ï¼Œè€Œéå®ƒçš„æ‰€æœ‰ derived class ã€‚ä¸ºé˜²æ­¢ä¸å¿…è¦çš„éº»çƒ¦ï¼Œå¯ä»¥æ ¹æ®å¤§å°ä¸åŒæ¥åˆ¤æ–­ï¼š class Base public: static void* operator new(std::size_t size) throw(std::bad_alloc); ...;class Derived: public Base // å‡è®¾Derivedæœªå£°æ˜operator new ... ;Derived* p = new Derived; // è¿™é‡Œè°ƒç”¨çš„æ˜¯Base::operator new//ä¸ºé˜²æ­¢ä¸å¿…è¦çš„éº»çƒ¦ï¼Œå¯ä»¥æ ¹æ®å¤§å°ä¸åŒæ¥åˆ¤æ–­ï¼švoid* Base::operator new(std::size_t size) throw(std::bad_alloc) if (size != sizeof(Base)) // å¦‚æœå¤§å°é”™è¯¯ï¼Œ return ::operator new(size); // ä»¤æ ‡å‡†çš„operator newèµ·è€Œå¤„ç†ã€‚ ... // å¦åˆ™åœ¨è¿™é‡Œå¤„ç†ã€‚ ä¸ç”¨æ‹…å¿ƒ size=0 çš„æƒ…å†µï¼Œç¼–è¯‘å™¨ä¼šä¾æ® C++ â€œç‹¬ç«‹å¯¹è±¡å¿…é¡»æœ‰éé›¶å¤§å°â€ã€‚(æ’å…¥ä¸€ä¸ª char ç­‰) å¦å¤–å¯¹äº array å†…å­˜åˆ†é…çš„ class newï¼Œéœ€è¦å®ç° operator new[ ] ã€‚å†™å®ƒçš„æ—¶å€™åªéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šåˆ†é…ä¸€å— æœªåŠ å·¥å†…å­˜ (raw memory) ã€‚ ä½ ä¸èƒ½çŸ¥é“ array é‡Œçš„å…ƒç´ å¯¹è±¡æœ‰å¤šå¤§ï¼Œä¹Ÿä¸èƒ½è®¡ç®—å‡ºä¸ªæ•°ã€‚å¹¶ä¸”åŠ¨æ€åˆ†é…çš„ arrays å¯èƒ½éœ€è¦é¢å¤–ç©ºé—´æ¥å­˜æ”¾å…ƒç´ ä¸ªæ•°ã€‚ è‡³äº operator delete ç›¸æ¯”äºnewï¼Œå®ç°deleteçš„è§„åˆ™è¦ç®€å•å¾ˆå¤šã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ C++ ä¿è¯äº†delete ä¸€ä¸ª NULLæ€»æ˜¯å®‰å…¨çš„ï¼Œä½ å°Šé‡è¯¥æƒ¯ä¾‹å³å¯ã€‚ non-member ç‰ˆæœ¬: void operator delete(void *rawMem) throw() if(rawMem == 0) return; //é¢å¯¹ç©ºæŒ‡é’ˆï¼Œdo nothing # ä¸æ˜¯ç©ºæŒ‡é’ˆ ï¼Œ å½’è¿˜ rawmemory æ‰€æŒ‡å†…å­˜ member delete ç‰ˆæœ¬ï¼š å¤šåŠ ä¸€ä¸ªæ£€æŸ¥åˆ é™¤æ•°é‡çš„åŠ¨ä½œï¼šè¿™æ˜¯å¤„ç†å®šåˆ¶ class new å°†å¤§å°æœ‰è¯¯çš„åˆ†é…è¡Œä¸ºè½¬äº¤ç»™::operator newæ‰§è¡Œã€‚ä¸€æ—¦å‡ºç°è¿™ç§æƒ…å†µè½¬è€Œè°ƒç”¨å¯¹åº”çš„ ::operator delete æ‰§è¡Œã€‚ class Basepublic: static void* operator new(std::size_t size) throw(std::bad_alloc); static void operator delete(void* rawMemory,size_t size) throw(); ...;void Base::operator delete(void* rawMemory,size_t size) throw() if(rawMemory == 0) return ; if(size != sizeof(Base)) ::operator delete(rawMemory); return; #åˆ°è¿™é‡Œï¼Œæ­£å¸¸å½’è¿˜rawMemoryæ‰€æŒ‡å†…å­˜ return; 1.æ³¨æ„ä¸Šé¢çš„æ£€æŸ¥çš„æ˜¯ rawMem ä¸ºç©ºï¼Œsize æ˜¯ä¸ä¼šä¸ºç©ºçš„ã€‚ 2.å…¶å® size å®å‚çš„å€¼æ˜¯é€šè¿‡è°ƒç”¨è€…çš„ç±»å‹æ¥æ¨å¯¼çš„ï¼ˆå¦‚æœæ²¡æœ‰è™šææ„å‡½æ•°çš„è¯ï¼‰ï¼š Base *p = new Derived; // å‡è®¾Base::~Baseä¸æ˜¯è™šå‡½æ•°delete p; // ä¼ å…¥`delete(void *rawMem, std::size_t size)`çš„`size == sizeof(Base)`ã€‚ 3.å¦‚æœ Base::~Base() å£°æ˜ä¸º virtualï¼Œåˆ™ä¸Šè¿° size å°±æ˜¯æ­£ç¡®çš„ sizeof(Derived)ã€‚ è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆItem 7 æŒ‡å‡ºææ„å‡½æ•°ä¸€å®šè¦å£°æ˜ virtualã€‚ 52.å†™äº† placement new å°±è¦å†™ placement delete åœ¨ç¼–å†™ä¸€ä¸ª operator new çš„ placement ç‰ˆæœ¬æ—¶ï¼Œç¡®ä¿åŒæ—¶ç¼–å†™ operator delete çš„ç›¸åº”çš„ placement ç‰ˆæœ¬ã€‚å¦åˆ™ï¼Œä½ çš„ç¨‹åºå¯èƒ½ä¼šå‘ç”Ÿå¾®å¦™çš„ï¼Œæ–­ç»­çš„ memory leaksï¼ˆå†…å­˜æ³„æ¼ï¼‰ã€‚ å½“ä½ å£°æ˜ new å’Œ delete çš„ placement ç‰ˆæœ¬æ—¶ï¼Œç¡®ä¿ä¸ä¼šæ— æ„ä¸­è¦†ç›–è¿™äº›å‡½æ•°çš„å¸¸è§„ç‰ˆæœ¬ã€‚ é˜è¿°å®šä¹‰ï¼š placement newï¼š å¹¿ä¹‰ä¸Šçš„ â€placement newâ€ æŒ‡çš„æ˜¯æ‹¥æœ‰é¢å¤–å‚æ•°çš„ operator newã€‚ ç‹­ä¹‰ä¸Šé€šå¸¸æ˜¯ä¸“æŒ‡æŒ‡å®šäº†ä½ç½®çš„ new(std::size_t size, void *pmemory) throw()ï¼Œç”¨äº vector ç”³è¯· capacity å‰©ä½™çš„å¯ç”¨å†…å­˜ã€‚ é—®é¢˜åœºæ™¯ï¼š Widget* pw = new Widget; è¿™ä¸ªè¯­å¥ä¼šè°ƒç”¨ä¸¤ä¸ªå‡½æ•°ï¼š Widget çš„ operator new ï¼ŒWidget çš„ é»˜è®¤æ„é€ å‡½æ•° å½“å†…å­˜ç”³è¯·æˆåŠŸï¼Œè€Œæ¥æ”¶å†…å­˜çš„é»˜è®¤æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸æ—¶ï¼Œéœ€è¦åŠæ—¶å–æ¶ˆåˆ†é…æ¢å¤åŸæ ·ï¼Œå¦åˆ™å°±ä¼šå†…å­˜æ³„æ¼ã€‚ åˆ†é…çš„è´£ä»»ä¸åœ¨ç”¨æˆ·èº«ä¸Šï¼Œè€Œåœ¨ C++ è¿è¡ŒæœŸç³»ç»Ÿä¸Šï¼šå¯¹äºä¸€ä¸ªæ­£å¸¸çš„ operator newï¼Œç³»ç»Ÿä¼šè°ƒç”¨é»˜è®¤çš„ delete functionã€‚å¯¹äº user-defined operator new , ç³»ç»Ÿå¦‚æœæ‰¾ä¸åˆ°å¯¹åº” delete å°±ä¼šè·³è¿‡åˆ é™¤æ“ä½œä»è€Œäº§ç”Ÿé—®é¢˜ã€‚ ç¤ºä¾‹ï¼š class Widgetpublic: ... static void* operator new(size_t size,ostream logStream) throw(bad_alloc); /*static void* operator delete(void* pMemory size_t size) throw();*/ //é»˜è®¤deleteï¼Œåé¢æ•™æ void* operator delete(size_t size,ostream logStream) throw(); //placement new ... ä½†å®¢æˆ·è¿˜å¯èƒ½ç›´æ¥è°ƒç”¨ delete pï¼Œè¿™æ—¶ C++ è¿è¡Œæ—¶ä¸ä¼šæŠŠä¸€ä¸ªæ™®é€šæŒ‡é’ˆè§£é‡Šä¸º â€placement deleteâ€ã€‚ æ‰€ä»¥åœ¨ Widget ä¸­ä¸ä»…è¦å£°æ˜ â€placement deleteâ€ï¼Œè¿˜è¦å£°æ˜ä¸€ä¸ªæ­£å¸¸çš„ deleteã€‚ placement delete åªæœ‰åœ¨â€œä¼´éš placement new è°ƒç”¨è€Œè§¦å‘æ„é€ å‡½æ•°â€å‡ºç°å¼‚å¸¸æ—¶æ‰ä¼šè¢«å¯»æ‰¾è°ƒç”¨ã€‚ Widgetpublic: static void* operator new(std::size_t size, std::ostream log) throw(std::bad_alloc); static void operator delete(void *mem, std::ostream log); static void operator delete(void *mem) throw(); Widget() throw 1; ; è¿™æ ·ï¼Œæ— è®ºæ˜¯æ„é€ å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œè¿˜æ˜¯ç”¨æˆ·ç›´æ¥è°ƒç”¨ delete pï¼Œå†…å­˜éƒ½èƒ½æ­£ç¡®åœ°å›æ”¶äº†ã€‚ è¦†ç›–é—®é¢˜ï¼š åœ¨Item 33ä¸­æåˆ°ï¼Œç±»ä¸­çš„åç§°ä¼šéšè—å¤–éƒ¨çš„åç§°ï¼Œå­ç±»çš„åç§°ä¼šéšè—çˆ¶ç±»çš„åç§°ã€‚ æ‰€ä»¥å½“ä½ å£°æ˜ä¸€ä¸ª â€placement new â€ æ—¶ï¼š class Basepublic: static void* operator new(std::size_t size, std::ostream log) throw(std::bad_alloc);;Base *p = new Base; // Error!Base *p = new (std::cerr) Base; // OK æ™®é€šçš„ new å°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º â€placement newâ€ éšè—äº†å¤–éƒ¨çš„ â€normal newâ€ã€‚ åŒæ ·é“ç†ï¼Œderived class ä¸­çš„ operator new ä¼šæ©ç›– global ç‰ˆæœ¬å’Œç»§æ‰¿è€Œå¾—çš„ operator new ç‰ˆæœ¬ã€‚ class Derived: public Basepublic: static void* operator new(std::size_t size) throw(std::bad_alloc);;Derived *p = new (std::clog) Derived; // Error!Derived *p = new Derived; // OK è¿™æ˜¯å› ä¸ºå­ç±»ä¸­çš„ â€normal newâ€ éšè—äº†çˆ¶ç±»ä¸­çš„ â€placement newâ€ï¼Œè™½ç„¶å®ƒä»¬çš„å‡½æ•°ç­¾åä¸åŒã€‚ ä½† Item 33 ä¸­æåˆ°ï¼ŒæŒ‰ç…§ C++ çš„åç§°éšè—è§„åˆ™ä¼šéšè—æ‰€æœ‰åŒåï¼ˆnameï¼‰çš„ä¸œè¥¿ï¼Œå’Œç­¾åæ— å…³ã€‚ è¦†ç›–è§£å†³ï¼š è§£å†³å‰è§‚å¯Ÿ global ä½œç”¨åŸŸçš„ operator newï¼š void* operator new(std::size_t) throw(std::bad_alloc); // normal newvoid* operator new(std::size_t, void*) throw(); // placement newvoid* operator new(std::size_t, const std::nothrow_t) throw(); // è§ Item 49 éå¿…è¦æƒ…å†µï¼Œè¯·ç¡®ä¿è¿™äº›å‡½æ•°åœ¨ä½ çš„ user-defined operator new ä¹‹å¤–è¿˜å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚å¦‚æœç±»å†…æœ‰ä¸€èˆ¬æ€§éœ€æ±‚ï¼Œ åœ¨åˆ›å»ºè‡ªå®šä¹‰çš„ â€newâ€ æ—¶ï¼Œä¹Ÿè¦å£°æ˜è¿™äº›ç­¾åçš„ â€newâ€ å¹¶è°ƒç”¨å…¨å±€çš„ç‰ˆæœ¬ã€‚ ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºè¿™äº›å…¨å±€ç‰ˆæœ¬çš„è°ƒç”¨å£°æ˜ä¸€ä¸ªçˆ¶ç±» StandardNewDeleteFormsï¼š class StandardNewDeleteForms public: // normal new/delete static void* operator new(std::size_t size) throw(std::bad_alloc) return ::operator new(size); static void operator delete(void *pMemory) throw() ::operator delete(pMemory); // placement new/delete static void* operator new(std::size_t size, void *ptr) throw() return ::operator new(size, ptr); static void operator delete(void *pMemory, void *ptr) throw() return ::operator delete(pMemory, ptr); // nothrow new/delete static void* operator new(std::size_t size, const std::nothrow_t nt) throw() return ::operator new(size, nt); static void operator delete(void *pMemory, const std::nothrow_t) throw() ::operator delete(pMemory); ; ç„¶ååœ¨ç”¨æˆ·ç±»å‹ Widget ä¸­ using StandardNewDeleteForms::newdelete å³å¯ä½¿å¾—è¿™äº›å‡½æ•°éƒ½å¯è§ï¼š class Widget: public StandardNewDeleteForms // inherit std formspublic: using StandardNewDeleteForms::operator new; using StandardNewDeleteForms::operator delete; static void* operator new(std::size_t size, std::ostream log) throw(std::bad_alloc); // è‡ªå®šä¹‰ placement new static void operator delete(void *pMemory, std::ostream logStream) throw(); // å¯¹åº”çš„ placement delete; ç¬¬ä¹ç« ï¼šMiscellany53.ä¸è¦è½»æ˜“å¿½è§†ç¼–è¯‘å™¨çš„è­¦å‘Š ä¸¥è‚ƒå¯¹å¾…ç¼–è¯‘å™¨å‘å‡ºçš„è­¦å‘Šä¿¡æ¯ã€‚åŠªåŠ›åœ¨ä½ çš„ç¼–è¯‘å™¨çš„æœ€é«˜ï¼ˆæœ€ä¸¥è‹›ï¼‰è­¦å‘Šçº§åˆ«ä¸‹äº‰å–æ— ä»»ä½•è­¦å‘Šçš„è£èª‰ã€‚ ä¸è¦è¿‡åº¦å€šèµ–ç¼–è¯‘å™¨çš„æŠ¥è­¦èƒ½åŠ›ï¼Œå› ä¸ºä¸åŒçš„ç¼–è¯‘å™¨å¯¹å¾…äº‹æƒ…çš„æ€åº¦å¹¶ä¸ç›¸åŒã€‚ä¸€æ—¦ç§»æ¤åˆ°å¦ä¸€ä¸ªç¼–è¯‘å™¨ä¸Šï¼Œä½ åŸæ¥å€šèµ–çš„è­¦å‘Šä¿¡æ¯æœ‰å¯èƒ½æ¶ˆå¤±ã€‚ ç¼–è¯‘å™¨çš„è­¦å‘Šå¯èƒ½ç»™å‡ºå¾ˆé‡è¦çš„ä¿¡æ¯,ä¾‹å¦‚: class Bpublic: virtual void f() const; ...;class D:public Bpublic: virtual void f(); ...; ç”±äº B ä¸­çš„ f() æ˜¯ const æˆå‘˜å‡½æ•°,è€ŒDä¸­çš„f() æ˜¯éconst,å› æ­¤D::f()æ˜¯å¯¹B::f() çš„ override è€Œéé‡æ–°å£°æ˜,ç¼–è¯‘å™¨é€šå¸¸ä¼šç»™å‡ºâ€warning: D:f() hides virtual B::f()â€œçš„è­¦å‘Š,è¿™ä¸ªè­¦å‘Šå…¶å®åŒ…å«ä¸¤å±‚æ„æ€: Då¹¶æ²¡æœ‰é‡æ–°å£°æ˜virtual void f() const,å› è€Œå®ƒç»§æ‰¿äº†Bçš„virtual void f() constå®ç°. ç”±äºDå£°æ˜äº†virtual void f(),å®ƒæ˜¯å¯¹virtual void f() constçš„é‡å†™,ç”±äºåç§°é®æ©,å°†ä¸èƒ½é€šè¿‡Dç±»å‹å¯¹è±¡æ¥è°ƒç”¨virtual void f() const. å› æ­¤,ä¼šå‡ºç°ä»¥ä¸‹æƒ…å†µ(è§æ³¨é‡Š): B b;D d;B* pb=b;pb-f(); //è°ƒç”¨çš„æ˜¯B::f()pb=d;pb-f(); //è°ƒç”¨çš„ä»ç„¶æ˜¯B::f() ! ä¸ç®¡æ€ä¹ˆè¯´ï¼Œé¢å¯¹è­¦å‘Šä¿¡æ¯æ—¶ï¼Œä½ ä¸€å®šè¦æ¸…æ¥šçš„äº†è§£å®ƒçš„çœŸå®å«ä¹‰ï¼Œç„¶åæ‰å¯ä»¥é€‰æ‹©æ€§çš„å¤„ç†æˆ–è€…å¿½ç•¥ã€‚ ä¸åŒç¼–è¯‘å™¨æœ‰ä¸åŒè­¦å‘Šæ ‡å‡†,å› è€Œä¸èƒ½ä¾èµ–ç¼–è¯‘å™¨æ¥æŒ‡å‡ºé”™è¯¯. è­¦å‘Šä¿¡æ¯å¤©ç”Ÿå’Œç¼–è¯‘å™¨ç›¸å…³ï¼Œä¸åŒçš„ç¼–è¯‘å™¨æœ‰ä¸åŒçš„è­¦å‘Šæ ‡å‡†ã€‚æ‰€ä»¥ï¼Œè‰ç‡ä¾èµ–ç¼–è¯‘å™¨ä¸ºä½ æŒ‡å‡ºé”™è¯¯ï¼Œå¹¶ä¸å¯å–ã€‚ä¸€äº›è€æ—§çš„ç¼–è¯‘å™¨é¢å¯¹åŒæ ·çš„é—®é¢˜å¯èƒ½åŠå¥æŠ±æ€¨éƒ½æ²¡æœ‰ã€‚ 54.è®©è‡ªå·±ç†Ÿæ‚‰åŒ…æ‹¬TR1åœ¨å†…çš„æ ‡å‡†ç¨‹åºåº“è¯¦æƒ…çœ‹ä¹¦ 55.è®©è‡ªå·±ç†Ÿæ‚‰boostè¯¦æƒ…çœ‹ä¹¦"},{"title":"æ¹–ç§‘å¤§(2)","path":"/wiki/network/æ¹–ç§‘å¤§(2).html","content":"ç¬¬äºŒç« ï¼šç‰©ç†å±‚ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µç‰©ç†å±‚åŸºæœ¬æ¦‚å¿µ ç‰©ç†å±‚è€ƒè™‘æ€æ ·æ‰èƒ½åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµã€‚ ç‰©ç†å±‚ä¸ºæ•°æ®é“¾è·¯å±‚å±è”½äº†å„ç§ä¼ è¾“åª’ä½“çš„å·®å¼‚ï¼Œä½¿æ•°æ®é“¾è·¯å±‚åªéœ€è¦è€ƒè™‘å¦‚ä½•å®Œæˆæœ¬å±‚çš„åè®®å’ŒæœåŠ¡ï¼Œè€Œä¸å¿…è€ƒè™‘ç½‘ç»œå…·ä½“çš„ä¼ è¾“åª’ä½“æ˜¯ä»€ä¹ˆ ã€‚ ç‰©ç†å±‚åè®®ä¸»è¦ä»»åŠ¡ æœºæ¢°ç‰¹æ€§ï¼šæŒ‡æ˜æ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„å½¢çŠ¶å’Œå°ºå¯¸ã€å¼•è„šæ•°ç›®å’Œæ’åˆ—ã€å›ºå®šå’Œé”å®šè£…ç½® ç”µæ°”ç‰¹æ€§ï¼šæŒ‡æ˜åœ¨æ¥å£ç”µç¼†çš„å„æ¡çº¿ä¸Šå‡ºç°çš„ç”µå‹èŒƒå›´ åŠŸèƒ½ç‰¹æ€§ï¼šæŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„ç”µå‹è¡¨ç¤ºä½•ç§æ„ä¹‰ è¿‡ç¨‹ç‰¹æ€§ï¼šæŒ‡æ˜å¯¹äºä¸åŒåŠŸèƒ½çš„å„ç§å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåº ç‰©ç†å±‚ä¸‹çš„ä¼ è¾“åª’ä½“ä¼ è¾“åª’ä½“åˆ†ä¸¤ç±»ï¼š å¯¼å¼•å‹ï¼šç”µç£æ³¢è¢«å¯¼å¼•åˆ°å›ºä½“åª’ä½“ä¼ æ’­ åŒè½´ç”µç¼†ï¼š ç”µç¼†å„å±‚éƒ½æ˜¯åŒè½´å¿ƒçš„ï¼Œå› æ­¤ç§°åŒè½´ç”µç¼† ã€‚ åŸºå¸¦åŒè½´ç”µç¼†(50Î© \\OmegaÎ©)ï¼šæ•°å­—ä¼ è¾“ï¼Œè¿‡å»ç”¨äºå±€åŸŸç½‘å®½å¸¦åŒè½´ç”µç¼†(75Î© \\OmegaÎ©)ï¼šæ¨¡æ‹Ÿä¼ è¾“ï¼Œç›®å‰ä¸»è¦ç”¨äºæœ‰çº¿ç”µè§†çš„å…¥æˆ·çº¿ã€‚ åŒè½´ç”µç¼†ä»·æ ¼è¾ƒè´µä¸”å¸ƒçº¿ä¸å¤Ÿçµæ´»å’Œæ–¹ä¾¿ï¼Œéšç€é›†çº¿å™¨çš„å‡ºç°ï¼Œåœ¨å±€åŸŸç½‘é¢†åŸŸåŸºæœ¬ä¸Šéƒ½æ˜¯é‡‡ç”¨åŒç»çº¿ä½œä¸ºä¼ è¾“åª’ä½“ã€‚ åŒç»çº¿ï¼š æŠŠä¸¤æ ¹äº’ç›¸ç»ç¼˜çš„é“œå¯¼çº¿å¹¶æ’æ”¾åœ¨ä¸€èµ·ï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™ç»åˆèµ·æ¥å°±æ„æˆäº†åŒç»çº¿ã€‚ è¿™æ˜¯ç§å¤è€ä¸”å¸¸ç”¨çš„åª’ä½“ã€‚ ç»åˆä½œç”¨ï¼šæŠµå¾¡å¤–ç•Œç”µç£æ³¢å¹²æ‰°ï¼Œå‡å°‘ç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°ã€‚ æœ‰æ— å±è”½åŒæ§çº¿UTPç”µç¼†å’Œå±è”½åŒæ§çº¿STPç”µç¼†ï¼Œå·®äº†ä¸€ä¸ªé‡‘å±ä¸å±è”½å±‚è€Œå·²ã€‚ å…‰çº¤ï¼š å…‰çº¤å¾ˆç»†ï¼Œå› æ­¤å¿…é¡»å°†å…¶åšæˆç»“å®çš„å…‰ç¼†ã€‚ä¸€æ ¹å…‰ç¼†å°‘åˆ™ä¸€æ ¹å…‰çº¤ï¼Œå¤šåˆ™å¯åŒ…æ‹¬æ•°ç™¾æ ¹ ã€‚ åŸç† å¦‚æœå…¨åå°„ä¸€ç›´è¿›è¡Œï¼Œåˆ™å…‰å°±ä¼šæ²¿ç€å…‰çº¤ä¸€ç›´ä¼ è¾“ä¸‹å»ã€‚ å®é™…ä¸Šåªè¦å…¥å°„è§’å¤§äºæŸä¸ªä¸´ç•Œè§’åº¦å°±å¯ä»¥å‘ç”Ÿå…¨åå°„ï¼Œå› æ­¤å¤šæ¡ä¸åŒè§’åº¦çš„å…‰å¯ä»¥åœ¨å…‰çº¿é‡Œä¸€èµ·ä¼ è¾“ï¼Œè¿™ç§å…‰çº¤ç§°ä½œå¤šæ¨¡å…‰çº¤ã€‚ ç”±äºè‰²æ•£(æ¨¡å¼ã€ææ–™ã€æ³¢å¯¼è‰²æ•£)ï¼Œå…‰åœ¨å¤šæ¨¡å…‰çº¤ä¸­ä¼ è¾“ä¸€å®šè·ç¦»åå¿…ç„¶äº§ç”Ÿå¤±çœŸ(è„‰å†²å±•å®½) å› æ­¤å¤šæ¨¡å…‰çº¤åªé€‚åˆè¿‘è·ç¦»ä¼ è¾“(å»ºç­‘ç‰©å†…) å‘é€å…‰æºå¯ä½¿ç”¨å‘å…‰äºŒæç®¡(ä¾¿å®œ)ï¼›æ¥æ”¶æ£€æµ‹å¯ç”¨å…‰ç”µäºŒæç®¡ è‹¥å…‰çº¤ç›´å¾„å‡å°åˆ°åªæœ‰ä¸€ä¸ªå…‰çš„æ³¢é•¿ï¼Œåˆ™å…‰çº¤å°±åƒä¸€æ ¹æ³¢å¯¼ä¸€æ ·ï¼Œå¯ä½¿å…‰çº¿ä¸€ç›´å‘å‰ä¼ æ’­ï¼Œè€Œä¸ä¼šäº§ç”Ÿå¤šæ¬¡åå°„ï¼Œè¿™æ ·çš„å…‰çº¤ç§°ä½œå•æ¨¡å…‰çº¤ æ²¡æœ‰æ¨¡å¼è‰²æ•£ï¼Œåœ¨1.31å¾®ç±³æ³¢é•¿é™„è¿‘ï¼Œææ–™è‰²æ•£å’Œæ³¢å¯¼è‰²æ•£å¤§å°ç›¸ç­‰ç¬¦å·ç›¸åï¼Œä¸¤è€…æ­£å¥½æŠµæ¶ˆ å•æ¨¡å…‰çº¤é€‚åˆé•¿è·ç¦»ä¼ è¾“ä¸”è¡°å‡å°ï¼Œä½†å…¶åˆ¶é€ æˆæœ¬é«˜ï¼Œå¯¹å…‰æºè¦æ±‚é«˜ å‘é€å…‰æºéœ€è¦ä½¿ç”¨æ¿€å…‰å‘ç”Ÿå™¨(è´µ)ï¼›æ¥æ”¶æ£€æµ‹ç”¨æ¿€å…‰æ£€æ³¢å™¨ çº¤èŠ¯ç›´å¾„å¤šæ¨¡å…‰çº¤ï¼š50å¾®ç±³ï¼Œ62.5å¾®ç±³å•æ¨¡å…‰çº¤ï¼š9å¾®ç±³çº¤èŠ¯å¤–åŒ…å±‚ï¼š125å¾®ç±³ å·¥ä½œæ³¢é•¿0.85å¾®ç±³(è¡°å‡è¾ƒå¤§)1.30å¾®ç±³(è¡°å‡è¾ƒå°)1.55å¾®ç±³(è¡°å‡è¾ƒå°) ä¼˜ç‚¹é€šä¿¡å®¹é‡å¤§(25000~30000GHzçš„å¸¦å®½)ä¼ è¾“æŸè€—å°ï¼Œè¿œè·ç¦»ä¼ è¾“æ—¶æ›´åŠ ç»æµæŠ—é›·ç”µå’ŒæŠ—ç”µç£å¹²æ‰°æ€§èƒ½å¥½ã€‚è¿™åœ¨å¤§ç”µæµè„‰å†²å¹²æ‰°ç¯å¢ƒä¸‹å°¤ä¸ºé‡è¦æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ï¼Œä¸æ˜“è¢«çªƒå¬ä½“ç§¯å°ï¼Œé‡é‡è½» ç¼ºç‚¹å‰²æ¥éœ€è¦ä¸“ç”¨è®¾å¤‡å…‰ç”µæ¥å£ä»·æ ¼è¾ƒè´µ ç”µåŠ›çº¿ ç”µåŠ›çº¿ç”µè¯ éå¯¼å¼•å‹ï¼šè‡ªç”±ç©ºé—´ä¼ æ’­ æ— çº¿ç”µæ³¢ ä½é¢‘å’Œä¸­é¢‘é¢‘æ®µç”¨åœ°é¢æ³¢ä¼ æ’­ï¼›é«˜é¢‘å’Œç”šé«˜é¢‘é ç”µç¦»å±‚(åœ°çƒä¸Šæ–¹100~500åƒç±³é«˜ç©ºçš„å¸¦ç”µç¦»å­å±‚)åå°„ å¾®æ³¢ å¾®æ³¢ä¼šç©¿é€ç”µç¦»å±‚è¿›å…¥å®‡å®™ï¼Œå› æ­¤å…¶ä¸èƒ½é€šè¿‡ç”µç¦»å±‚åå°„åˆ°å¾ˆè¿œçš„åœ°æ–¹ åœ°é¢å¾®æ³¢æ¥åŠ›é€šä¿¡ å¾®æ³¢æ˜¯ç›´çº¿ä¼ æ’­çš„ï¼Œè€Œåœ°çƒè¡¨é¢æ˜¯ä¸ªæ›²é¢ï¼Œå› æ­¤ä¼ æ’­è·ç¦»å—åˆ°é™åˆ¶ï¼Œä¸€èˆ¬åªæœ‰50KMå·¦å³ï¼›å¦‚æœé‡‡ç”¨100ç±³é«˜çš„å¤©çº¿å¡”ï¼Œåˆ™ä¼ æ’­è·ç¦»å¯å¢å¤§åˆ°100å…¬é‡Œã€‚ä¸ºå®ç°è¿œè·ç¦»é€šä¿¡ï¼Œå¿…é¡»åœ¨ä¸€ä¸ªå¾®æ³¢é€šä¿¡ä¿¡é“çš„ä¸¤ä¸ªç»ˆç«¯ä¹‹é—´å»ºç«‹è‹¥å¹²ä¸ªä¸­ç»§ç«™ï¼Œä¸­ç»§ç«™æŠŠå‰ä¸€é˜µé€æ¥çš„ä¿¡å·ç»è¿‡æ”¾å¤§åå†å‘é€åˆ°ä¸‹ä¸€ç«™ã€‚ å«æ˜Ÿé€šä¿¡ åœ¨åœ°çƒç«™ä¹‹é—´ï¼Œåˆ©ç”¨ä½äºçº¦36000KMé«˜ç©ºçš„äººé€ åŒæ­¥åœ°çƒå«æ˜Ÿä½œä¸ºä¸­ç»§å™¨çš„ä¸€ç§å¾®æ³¢æ¥åŠ›ï¼Œå…¶æœ€å¤§ç‰¹ç‚¹æ˜¯é€šä¿¡è·ç¦»è¿œï¼Œä¼ æ’­æ—¶å»¶å¤§(çº¦250~300ms)ã€‚ä½è½¨é“å«æ˜Ÿé€šä¿¡ç³»ç»Ÿä¹Ÿå·²ç»æ­£åœ¨éƒ¨ç½²ã€‚ çº¢å¤–çº¿ ç‚¹å¯¹ç‚¹æ— çº¿ä¼ è¾“ ç›´çº¿ä¼ æ’­ï¼Œä¸­é—´ä¸èƒ½æœ‰éšœç¢ç‰©ï¼Œä¼ è¾“è·ç¦»çŸ­ ä¼ è¾“é€Ÿç‡ä½(4Mb/s~16Mb/s) å¯è§å…‰ï¼ˆLiFiï¼‰ å³å…‰æºä½œä¸ºä¿¡å·æºï¼Œå‰æ™¯å¥½ï¼Œæš‚æ—¶æœªè¢«å¤§èŒƒå›´åº”ç”¨ ä¼ é€æ–¹å¼ ä¸²è¡Œå¹¶è¡Œä¼ è¾“ ä¸²è¡Œä¼ è¾“æ˜¯æŒ‡æ•°æ®æ˜¯1ä¸ªæ¯”ç‰¹1ä¸ªæ¯”ç‰¹ä¾æ¬¡å‘é€çš„ï¼Œå‘é€ç«¯ä¸æ¥æ”¶ç«¯ä¹‹é—´åªç”¨1æ¡æ•°æ®ä¼ è¾“çº¿å³å¯ã€‚ å¹¶è¡Œä¼ è¾“æ˜¯æŒ‡ä¸€æ¬¡å‘é€nä¸ªæ¯”ç‰¹è€Œä¸æ˜¯ä¸€ä¸ªæ¯”ç‰¹ï¼Œåœ¨å‘é€ç«¯å’Œæ¥æ”¶ç«¯ä¹‹é—´è¦æœ‰næ¡ä¼ è¾“çº¿è·¯ã€‚ åœ¨è®¡ç®—æœºç½‘ç»œä¸­ï¼Œæ•°æ®åœ¨ä¼ è¾“çº¿è·¯ä¸Šçš„ä¼ è¾“æ—¶ä¸²è¡Œä¼ è¾“ï¼›è€Œè®¡ç®—æœºå†…éƒ¨(å¦‚CPUå’Œå†…å­˜)å¤šä½¿ç”¨å¹¶è¡Œä¼ è¾“ã€‚ åŒæ­¥å¼‚æ­¥ä¼ è¾“ åŒæ­¥ä¼ è¾“ æ•°æ®å—ä»¥ç¨³å®šçš„æ¯”ç‰¹æµå½¢å¼ä¼ è¾“ï¼Œå­—èŠ‚ä¹‹é—´æ²¡æœ‰é—´éš”ã€‚æ¥æ”¶ç«¯åœ¨æ¯ä¸ªæ¯”ç‰¹ä¿¡å·çš„ä¸­é—´æ—¶åˆ»(æœ‰åŒºåˆ†0,1çš„æ ‡å¿—)è¿›è¡Œæ£€æµ‹ï¼Œä»¥åˆ¤åˆ«æ¥æ”¶åˆ°çš„æ˜¯æ¯”ç‰¹0è¿˜æ˜¯1ã€‚ ç”±äºä¸åŒè®¾å¤‡çš„æ—¶é’Ÿé¢‘ç‡å­˜åœ¨ä¸€å®šå·®å¼‚ï¼Œä¸å¯èƒ½å®Œå…¨ç›¸åŒï¼Œåœ¨ä¼ è¾“å¤§é‡æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œæ‰€äº§ç”Ÿçš„åˆ¤åˆ«æ—¶åˆ»çš„ç´¯è®¡è¯¯å·®ä¼šå¯¼è‡´æ¥æ”¶ç«¯å¯¹æ¯”ç‰¹ä¿¡å·çš„åˆ¤åˆ«é”™ä½ã€‚å› æ­¤éœ€è¦é‡‡å–æ–¹æ³•ä½¿åŒæ–¹çš„æ—¶é’Ÿä¿æŒåŒæ­¥ã€‚ æ”¶å‘åŒæ–¹æ—¶é’ŸåŒæ­¥æ–¹æ³• å¤–åŒæ­¥ï¼šåœ¨æ”¶å‘åŒæ–¹ä¹‹é—´åŠ ä¸€æ¡å•ç‹¬çš„æ—¶é’Ÿä¿¡å·çº¿ å†…åŒæ­¥ï¼šå‘é€ç«¯å°†æ—¶é’ŸåŒæ­¥ä¿¡å·ç¼–ç åˆ°å‘é€æ•°æ®ä¸­ä¸€èµ·ä¼ è¾“(å¦‚æ›¼å½»æ–¯ç‰¹ç¼–ç ) å¼‚æ­¥ä¼ è¾“ ä»¥å­—èŠ‚ä¸ºç‹¬ç«‹çš„ä¼ è¾“å•ä½ï¼Œå­—èŠ‚é—´çš„æ—¶é—´é—´éš”ä¸æ˜¯å›ºå®šçš„ï¼Œæ¥æ”¶ç«¯ä»…åœ¨æ¯ä¸ªå­—èŠ‚çš„èµ·å§‹å¤„å¯¹å­—èŠ‚å†…çš„æ¯”ç‰¹å®ç°åŒæ­¥ï¼Œä¸ºæ­¤ä¼ é€å‰è¦åœ¨æ¯ä¸ªå­—èŠ‚å‰ååŠ ä¸Šèµ·å§‹ä½å’Œç»“æŸä½ã€‚ å¼‚æ­¥æ˜¯æŒ‡å­—èŠ‚ä¹‹é—´å¼‚æ­¥(å­—èŠ‚ä¹‹é—´çš„æ—¶é—´é—´éš”ä¸å›ºå®š)å­—èŠ‚ä¸­çš„æ¯ä¸ªæ¯”ç‰¹ä»ç„¶è¦åŒæ­¥(å„æ¯”ç‰¹çš„æŒç»­æ—¶é—´æ˜¯ç›¸åŒçš„) å•å·¥åŠåŒå·¥å…¨åŒå·¥ï¼ˆå•å‘é€šä¿¡..) å•å·¥é€šä¿¡ï¼šé€šä¿¡åŒæ–¹åªæœ‰ä¸€ä¸ªæ•°æ®ä¼ è¾“æ–¹å‘ã€‚ (æ— çº¿ç”µå¹¿æ’­) åŠåŒå·¥é€šä¿¡ï¼šé€šä¿¡åŒæ–¹å¯ä»¥ç›¸äº’ä¼ è¾“æ•°æ®ï¼Œä½†ä¸èƒ½åŒæ—¶è¿›è¡Œã€‚ (å¯¹è®²æœº) å…¨åŒå·¥é€šä¿¡ï¼šé€šä¿¡åŒæ–¹å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚ (ç”µè¯) å•å·¥éœ€è¦ä¸€æ¡ä¿¡é“ï¼›å…¶ä»–çš„éœ€è¦ä¸¤æ¡(ä¸€ä¸ªæ–¹å‘ä¸€æ¡) ç¼–ç ä¸è°ƒåˆ¶é€»è¾‘å‰æï¼š æ¶ˆæ¯(message)åŒ…æ‹¬æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘ã€‚ æ•°æ®æ˜¯è¿é€æ¶ˆæ¯çš„å®ä½“ï¼›è®¡ç®—æœºä¸­çš„ç½‘å¡å°†æ¯”ç‰¹1å’Œ0å˜æ¢æˆç›¸åº”ç”µä¿¡å·å‘é€åˆ°ç½‘çº¿ï¼Œå³ä¿¡å·ã€‚ ä¿¡å·æ˜¯æ•°æ®çš„ç”µç£è¡¨ç°ï¼Œç”±ä¿¡æº(ç½‘å¡)å‘å‡ºçš„åŸå§‹ç”µä¿¡å·ç§°ä¸ºåŸºå¸¦ä¿¡å·ã€‚ åŸºå¸¦ä¿¡å·åˆåˆ†ä¸ºæ•°å­—åŸºå¸¦ä¿¡å·(CPUå’Œå†…å­˜ä¼ è¾“çš„ä¿¡å·)å’Œæ¨¡æ‹ŸåŸºå¸¦ä¿¡å·(éº¦å…‹é£æ”¶åˆ°å£°éŸ³åè½¬å˜çš„ç”µä¿¡å·) ä¿¡å·éœ€è¦åœ¨ä¿¡é“ä¸­è¿›è¡Œä¼ è¾“ï¼Œä¿¡é“å¯åˆ†ä¸ºæ•°å­—ä¿¡é“å’Œæ¨¡æ‹Ÿä¿¡é“ã€‚ å¦‚æœä½¿ç”¨ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼Œä¼ è¾“åª’ä½“é‡Œå¯ä»¥æœ‰å¤šä¸ªä¿¡é“ã€‚ ä¾‹å¦‚ï¼Œå…¨åŒå·¥å°±éœ€è¦ä¸¤ä¸ªä¿¡é“ï¼Œä¸€ä¸ªå‘é€ä¿¡é“ï¼Œä¸€ä¸ªæ¥æ”¶ä¿¡é“ã€‚ ç¼–ç ï¼šåœ¨ä¸æ”¹å˜ä¿¡å·æ€§è´¨çš„å‰æä¸‹ï¼Œä»…å¯¹åŸºå¸¦ä¿¡å·çš„æ³¢å½¢è¿›è¡Œå˜æ¢ï¼Œç§°ä¸ºç¼–ç ã€‚ç¼–ç åäº§ç”Ÿçš„ä¿¡å·è¿˜æ˜¯æ•°å­—ä¿¡å·ï¼Œå¯ä»¥åœ¨æ•°å­—ä¿¡é“ä¸­ä¼ è¾“ã€‚ è°ƒåˆ¶ï¼šæŠŠåŸºå¸¦ä¿¡å·çš„é¢‘ç‡èŒƒå›´æ¬ç§»åˆ°è¾ƒé«˜çš„é¢‘æ®µï¼Œå¹¶è½¬æ¢ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œç§°ä¸ºè°ƒåˆ¶ã€‚è°ƒåˆ¶åäº§ç”Ÿçš„ä¿¡å·è¿˜æ˜¯æ¨¡æ‹Ÿä¿¡å·ï¼Œå¯ä»¥åœ¨æ¨¡æ‹Ÿä¿¡é“ä¸­ä¼ è¾“ã€‚ ç å…ƒï¼šåœ¨ä½¿ç”¨æ—¶é—´åŸŸçš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢ã€‚ å¸¸ç”¨ç¼–ç  ä¸å½’é›¶ç¼–ç æ­£ç”µå¹³ä»£è¡¨æ¯”ç‰¹1ï¼Œè´Ÿç”µå¹³ä»£è¡¨æ¯”ç‰¹0ã€‚åœ¨æ•´ä¸ªç å…ƒæ—¶é—´å†…ï¼Œç”µå¹³ä¸ä¼šå‡ºç°é›¶ç”µå¹³ è¿™ç§ç¼–ç æ–¹å¼å¦‚ä½•åŒºåˆ†è¿ç»­å‡ ä¸ªç›¸åŒç”µå¹³å‘¢ï¼Ÿ è¿™è¦æ±‚å‘é€æ–¹å‘é€å’Œæ¥æ”¶æ–¹æ¥æ”¶ä¸¥æ ¼åŒæ­¥ï¼Œä¹Ÿå°±éœ€è¦é¢å¤–ä¸€æ ¹ä¼ è¾“çº¿æ¥ä¼ è¾“æ—¶é’Ÿä¿¡å·ã€‚æ¥æ”¶æ–¹æŒ‰ç…§æ—¶é’ŸèŠ‚æ‹é€ä¸ªæ¥æ”¶ç å…ƒã€‚ ä½†æ˜¯å¯¹äºè®¡ç®—æœºç½‘ç»œï¼Œå¤šçš„çº¿ä¸å¦‚æ‹¿æ¥ä¼ è¾“æ•°æ®ï¼Œå› æ­¤ç”±äºå­˜åœ¨åŒæ­¥é—®é¢˜ï¼Œè®¡ç®—æœºä¸­çš„æ•°æ®ä¼ è¾“ä¸ä½¿ç”¨ä¸å½’é›¶ç¼–ç ã€‚ å½’é›¶ç¼–ç æ¯ä¸ªç å…ƒä¼ è¾“ç»“æŸåä¿¡å·éƒ½è¦â€å½’é›¶â€ï¼Œæ‰€ä»¥æ¥æ”¶æ–¹åªè¦åœ¨ä¿¡å·å½’é›¶åè¿›è¡Œé‡‡æ ·å³å¯ï¼Œä¸éœ€è¦å•ç‹¬çš„æ—¶é’Ÿä¿¡å·ã€‚ å®é™…ä¸Šï¼Œå½’é›¶ç¼–ç ç›¸å½“äºæŠŠæ—¶é’Ÿä¿¡å·ç”¨â€å½’é›¶â€æ–¹å¼ç¼–ç åœ¨äº†æ•°æ®ä¹‹å†…ï¼Œè¿™ç§°ä¸ºâ€è‡ªåŒæ­¥â€ä¿¡å· å½’é›¶ç¼–ç ä¸­çš„å¤§éƒ¨åˆ†æ•°æ®å¸¦å®½éƒ½ç”¨æ¥ä¼ è¾“â€å½’é›¶â€è€Œæµªè´¹æ‰äº†(ç¼–ç æ•ˆç‡ä½) æ›¼å½»æ–¯ç‰¹ç¼–ç ç å…ƒçš„ä¸­é—´æ—¶åˆ»æ—¢è¡¨ç¤ºæ—¶é’Ÿï¼Œåˆè¡¨ç¤ºæ•°æ®ã€‚æ ¹æ®æ­£è´Ÿè·³å˜æ¥åŒºåˆ†æ¯”ç‰¹. å…·ä½“å¦‚ä½•æ ¹æ®è·³å˜å®ç°åŒæ­¥ï¼Ÿ ç¬¬ä¸€æ¬¡æ•°æ®è·³å˜çš„æ—¶é—´è®°å½•ä¸‹æ¥ã€å³åŠä¸ªç å…ƒçš„æ—¶é—´ã€‘ï¼Œæ­¤åæ¯è¿‡ä¸€ä¸ªç å…ƒçš„æ—¶é—´å°±è¿›è¡Œæ£€æµ‹ï¼Œæ ¹æ®è·³å˜æ–¹å‘å†³å®šæ•°æ®ä¸º0è¿˜æ˜¯1ã€‚è¿™ä¸ªä¸ä¸€å®šå“¦ å·®åˆ†æ›¼å½»æ–¯ç‰¹ç¼–ç â‘ è·³å˜ä»…è¡¨ç¤ºæ—¶é’Ÿ â‘¡ç å…ƒå¼€å§‹å¤„ç”µå¹³æ˜¯å¦å‘ç”Ÿå˜åŒ–è¡¨ç¤ºæ•°æ®ã€‚ æ¯”æ›¼å½»æ–¯ç‰¹å˜åŒ–å°‘ï¼Œæ›´é€‚åˆè¾ƒé«˜çš„ä¼ è¾“é€Ÿç‡ã€‚ åŸºæœ¬è°ƒåˆ¶æ–¹æ³• æ•°å­—åŸºå¸¦ä¿¡å·ï¼šåŸå§‹çš„1ï¼Œ0ã€‚ è°ƒå¹…ï¼šæœ‰æ— è½½æ³¢è¾“å‡ºã€‚ è°ƒé¢‘ï¼šé¢‘ç‡çš„å¤§å°ã€‚ è°ƒç›¸ï¼šåˆç›¸åº¦ä¸åŒã€‚ å¦‚ä¸Šä¸€ä¸ªç å…ƒå¯¹åº”ä¸€ä¸ªæ¯”ç‰¹ï¼Œå¦‚ä½•èƒ½è®©1ä¸ªç å…ƒåŒ…å«å¤šä¸ªæ¯”ç‰¹å‘¢ï¼Ÿ å¯ä»¥ä½¿ç”¨æ··åˆè°ƒåˆ¶ã€‚æ­£å¼¦ä¿¡å·A sin â¡ Ï‰ ( x + Ï† / Ï‰ ) ç›¸ä½å’Œé¢‘ç‡æ˜¯ç›¸å…³çš„ï¼Œå› æ­¤äºŒè€…ä¸å¯åŒæ—¶åšä¿®æ”¹ã€‚ é€šå¸¸æƒ…å†µä¸‹,ç›¸ä½å’ŒæŒ¯å¹…å¯ä»¥ç»“åˆèµ·æ¥å…¶ä¸€è°ƒåˆ¶ï¼Œç§°ä¸ºæ­£äº¤æŒ¯å¹…è°ƒåˆ¶QAMã€‚ åŸºæœ¬è°ƒåˆ¶æˆä¸ºäºŒå…ƒåˆ¶ã€‚ æ··åˆè°ƒåˆ¶å¯ä»¥å®ç°å¤šå…ƒåˆ¶ã€‚ QAM-16 12ç§ç›¸ä½ æ¯ç§ç›¸ä½æœ‰1æˆ–2ç§æŒ¯å¹…å¯é€‰ å¯ä»¥è°ƒåˆ¶å‡º16ç§ç å…ƒ(æ³¢å½¢)ï¼Œå³16ä¸ªå½¢çŠ¶å¯ä»¥ç”¨4ä¸ªäºŒè¿›åˆ¶ä½æ’åˆ—ç»„åˆè¡¨ç¤ºï¼Œæ‰€ä»¥ä¸€ä¸ªç å…ƒå¯ä»¥å¯¹åº”4æ¯”ç‰¹ ç å…ƒä¸4ä¸ªæ¯”ç‰¹çš„å¯¹åº”å…³ç³»è¦é‡‡ç”¨æ ¼é›·ç ã€ä»»æ„ä¸¤ä¸ªç›¸é‚»ç å…ƒåªæœ‰ä¸€ä½ä¸åŒã€‘ å…³äºQAM-16ï¼š qam16ä¸ºä»€ä¹ˆæœ‰12ç§ç›¸ä½? 12ç§ç›¸ä½2ä¸ªæŒ¯å¹…ä¸ºä»€ä¹ˆæœ‰16ç§æ³¢å½¢? å°šæœªè§£å†³ã€‚ã€‚ã€‚ ä¿¡é“çš„æé™å®¹é‡ é€šä¿¡è´¨é‡è¾ƒå·®çš„ä¿¡é“åœ¨ä¼ è¾“ä¿¡å·çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä¸¥é‡å¤±çœŸ(æ— æ³•è¯†åˆ«åŸä¿¡å·)ã€ç é—´ä¸²æ‰°ã€‘ å¤±çœŸå› ç´  ç å…ƒä¼ è¾“é€Ÿç‡ ä¿¡å·ä¼ è¾“è·ç¦» å™ªå£°å¹²æ‰° ä¼ è¾“åª’ä½“è´¨é‡ é‚£æ€ä¹ˆé¿å…è¿™ç§å¤±çœŸå‘¢ï¼Ÿ ä¸»è¦ç†è®ºæœ‰ä¸¤ä¸ªï¼šå¥ˆæ°å‡†åˆ™å’Œé¦™å†œå®šç†ã€‚ ä¸Šé¢çš„è°ƒé¢‘ã€è°ƒå¹…ã€è°ƒç›¸çš„ä¸‰ç§åŸºæœ¬è°ƒåˆ¶æ–¹æ³•ï¼Œæ˜¯äºŒå…ƒè°ƒåˆ¶ï¼Œåªèƒ½è°ƒå‡ºä¸¤ç§æ³¢å½¢ä¸¤ç§ç å…ƒã€‚å› æ­¤æ¯ç§ç å…ƒåªèƒ½æœ‰1bitçš„ä¿¡æ¯æµã€‚ QAM-16å¯ä»¥è°ƒåˆ¶å‡º16ç§ç å…ƒï¼Œæ‰€ä»¥æ¯ä¸ªç å…ƒå¯ä»¥æºå¸¦4bitçš„ä¿¡æ¯é‡ã€‚ æ¯ä¸ªç å…ƒä¿¡æ¯é‡çš„è®¡ç®—ï¼šlog(2)2 1 ï¼› log(2) 16 4 ã€‚ ä¸Šé™æ•°å€¼ï¼šå¥ˆæ°å‡†åˆ™çš„æ¨å¯¼æ˜¯åœ¨ç†æƒ³æ¡ä»¶ä¸‹å¾—å‡ºçš„ï¼Œæ²¡æœ‰è€ƒè™‘å™ªå£°å¹²æ‰°ã€ä¼ è¾“åª’ä½“è´¨é‡ç­‰ï¼Œæ‰€ä»¥å®é™…ä¿¡é“ä¼ è¾“çš„æœ€é«˜ç å…ƒé€Ÿç‡è¦ä½äºä¸Šé™æ•°å€¼ã€‚ **ä¿¡å™ªæ¯”ï¼š**ä¿¡é“ä¸­çš„å™ªå£°ä¹Ÿä¼šå½±å“æ¥æ”¶ç«¯å¯¹ç å…ƒçš„è¯†åˆ«ã€‚ ä¿¡é“åŠŸç‡è¶Šå¤§ï¼Œå™ªå£°åŠŸç‡ç›¸å¯¹å½±å“è¶Šå¤§ã€‚ åœ¨ä¿¡é“å¸¦å®½ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®å¥ˆæ°å‡†åˆ™å’Œé¦™å†œå…¬å¼ï¼Œè¦æƒ³æé«˜ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡å°±å¿…é¡»é‡‡ç”¨å¤šå…ƒåˆ¶ã€æ›´å¥½çš„è°ƒåˆ¶æ–¹æ³•ã€‘å’ŒåŠªåŠ›æé«˜ä¿¡é“ä¸­çš„ä¿¡å™ªæ¯”ã€‚ è‡ªä»é¦™å†œå…¬å¼å‘å¸ƒåï¼Œå„ç§æ–°çš„ä¿¡å·å¤„ç†å’Œè°ƒåˆ¶æ–¹æ³•å°±ä¸æ–­å‡ºç°ï¼Œå…¶ç›®çš„éƒ½æ˜¯ä¸ºäº†å°½å¯èƒ½åœ°æ¥è¿‘é¦™å†œå…¬å¼ç»™å‡ºçš„ä¼ è¾“é€Ÿç‡æé™ã€‚ ä¾‹é¢˜ï¼š"},{"title":"æ·˜å®ç½‘æŠ“å–æœˆé”€é‡çš„è¯¾è®¾","path":"/wiki/python/æ·˜å®ç½‘æŠ“å–æœˆé”€é‡çš„è¯¾è®¾.html","content":"Githubä»“åº“ï¼š https://github.com/Back2Zer0/md-CS_Note/tree/master/python/python%E8%AF%BE%E8%AE%BE"},{"title":"çˆ¬è™«å…¥é—¨1","path":"/wiki/python/çˆ¬è™«å…¥é—¨1.html","content":"æ‚é¡¹ç®€å•çš„çˆ¬è™«çˆ¬è™«æ¦‚å¿µï¼šç¼–å†™ç¨‹åºè·å–äº’è”ç½‘èµ„æº from urllib.request import urlopenurl = http://www.baidu.comresp = urloepn(url)with open(mybaidu.html, mode=w) as f: f.write(resp.read().decode(utf8)) å¾—åˆ°æ¨¡æ‹Ÿç™¾åº¦é¦–é¡µçš„å†…å®¹ã€‚ ä¸¤ç§Request Method:POST ã€ GET ä¸¤ç§æ¸²æŸ“æ–¹å¼ï¼š æœåŠ¡å™¨æ¸²æŸ“ï¼šç”±æœåŠ¡å™¨æŠŠhtmlå’Œæ•°æ®ç»“åˆåœ¨ä¸€èµ·ç»Ÿä¸€å‘ç»™å®¢æˆ·ç«¯ å®¢æˆ·ç«¯æ¸²æŸ“ï¼šä¸¤æ¬¡è¯·æ±‚ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨å‘é€htmléª¨æ¶ï¼Œç¬¬äºŒæ¬¡è¯·æ±‚æ‹¿åˆ°æ•°æ® åŒºåˆ«æ–¹å¼ï¼šåœ¨é¡µé¢æºä»£ç ä¸­æ˜¯å¦èƒ½çœ‹åˆ°æ•°æ® HTTPåè®®åè®®ï¼šä¸¤ä¸ªè®¡ç®—æœºä¹‹é—´ä¸ºäº†èƒ½æµç•…æ²Ÿé€šè®¾ç½®çš„ä¸€ä¸ªå›å­åå®šã€‚å¸¸è§åè®®ï¼šTCPIPï¼ŒHTTP HTTPï¼šHyper text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ è¯·æ±‚å’Œç›¸åº”åˆ†ä¸‰å—ï¼šè¯·æ±‚ï¼š è¯·æ±‚è¡Œï¼šè¯·æ±‚æ–¹å¼ï¼Œè¯·æ±‚urlåœ°å€ï¼Œåè®® è¯·æ±‚å¤´ï¼šæœåŠ¡å™¨éœ€è¦çš„é™„åŠ ä¿¡æ¯ è¯·æ±‚ä½“ï¼šå‚æ•° å“åº”ï¼š çŠ¶æ€è¡Œï¼šåè®®ï¼ŒçŠ¶æ€ç  å“åº”å¤´ï¼šå®¢æˆ·ç«¯ä½¿ç”¨çš„é™„åŠ ä¿¡æ¯ æœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„å†…å®¹ï¼ˆHTMLï¼Œjsonï¼‰ ä¸¤ç§openwith open(baidutest.html, mode=w,encoding = utf8) as f1: f1.write(resp.read().decode(utf-8)) f2 = open(baidutest.html, mode=w,encoding = utf8)f2.close() ä¸‰ç§è¾“å‡ºæ–¹å¼i = 1print(asdas:ddasd.format(i))print(fasdasidasd)print(asdas%ddasd%(i)) æ•°æ®æå–é—®é¢˜æœ‰ä¸‰ç§è§£ææ–¹æ¡ˆï¼šreè§£æï¼Œbs4è§£æï¼Œxpathè§£æ reæ¨¡å—çš„åº”ç”¨è±†ç“£æƒ³è¯»çˆ¬è™« import re, requests , csvhead = User-agent:OperaWin7:Opera/9.80 (Windows NT 6.1; U; zh-cn) Presto/2.9.168 Version/11.50obj = re.compile(rli class=subject-item.*?title=(?Pname.*?).*?div class=pub(?Pinformation.*?)/div, re.S)f = open(pics.csv, mode= w, encoding= utf8, newline= )csvwrite = csv.writer(f)i = 0while i 1141: url = https://book.douban.com/people/211783344/wish?start= + str(i) resp = requests.get(url=url, headers=head) res = obj.finditer(resp.text) for it in res: dic = it.groupdict() dic[name] = ã€Š + dic[name].strip() + ã€‹ ---- dic[information] = dic[information].strip() csvwrite.writerow(dic.values()) i = i + 15f.close()resp.close() ç”µå½±å¤©å ‚è¶…é“¾æ¥çˆ¬è™« import requests, redomain = http://www.dytt89.com/resp1 = requests.get(url= domain,verify=False)resp1.encoding = gb2312obj1 = re.compile(2022å¿…çœ‹çƒ­ç‰‡.*?ul(?Pul.*?)ul,re.S)obj2 = re.compile(lia href=(?Phref.*?).*?(?Pfilm.*?)/a,re.S)obj3 = re.compile(â—ç‰‡ å(?Pname.*?).*?td style=WORD-WRAP:.*?href=(?Pdownload.*?)magnet:,re.S)res1 = obj1.search(resp1.text)ul = res1.group(ul)res2 = obj2.finditer(ul)for it2 in res2: url = domain.rstrip(/) + it2.group(href) resp2 = requests.get(url,verify=False) resp2.encoding = gb2312 res3 = obj3.finditer(resp2.text) for it3 in res3: print(it3.group(name).strip(),end=:) print(it3.group(download)) bs4åº“ï¼š from bs4 import BeautifulSoup å¸¸è§æ–¹æ³•ï¼š #BeautifulSoupmain_name = BeautifulSoup(resp.text, html.parser)#find_all å’Œ find:find_allæœå¯»æ‰€æœ‰æ»¡è¶³æ¡ä»¶ä»£ç å¹¶æ’å…¥åˆ°åˆ—è¡¨ï¼Œfindå°±è¿‘æ‰¾ï¼Œbs4å½¢å¼taotus = main_page.find_all(div, class_= taotu-main) å±æ€§å’Œå…³é”®å­—é‡å¤æ—¶ï¼š # table = page.find(table, class_=hq_table) # classæ˜¯pythonçš„å…³é”®å­—table = page.find(table, attrs=class: hq_table) #å’Œä¸Šä¸€è¡Œæ˜¯ä¸€ä¸ªæ„æ€. æ­¤æ—¶å¯ä»¥é¿å…class ç¤ºä¾‹ï¼šçˆ¬å–å”¯ç¾å›¾ç‰‡ #1.æ‹¿åˆ°ä¸»é¡µé¢æºä»£ç ï¼Œæå–å­é¡µé¢é“¾æ¥åœ°å€ï¼Œhref#2.hrefæ‰¾åˆ°å­é¡µé¢å†…å®¹ï¼Œå­é¡µé¢å†…æå–å›¾ç‰‡è¿æ¥#3.æ ¹æ®å›¾ç‰‡é“¾æ¥ä¸‹è½½import requestsfrom bs4 import BeautifulSoupurl = https://www.umei.cc/bizhitupian/resp = requests.get(url)resp.encoding = utf8#æºç äº¤ç»™bs4ï¼ŒæŒ‡å®šhtmlè§£é‡Šå™¨main_page = BeautifulSoup(resp.text, html.parser)# èŒƒå›´ç¬¬ä¸€æ¬¡ç¼©å°# å‚æ•°åååŠ â€œ_â€,åŒºåˆ†å‚æ•°åå’Œå…³é”®å­—taotus = main_page.find_all(div, class_= taotu-main)for taotu in taotus: pictures = taotu.find_all(p) for picture in pictures: # get æ‹¿å­ç½‘é¡µé“¾æ¥ href = picture.find(a).get(href) #æ‹¿å­ç½‘é¡µæºç  child_page_resp = requests.get(fhttps://www.umei.cc/href) child_page_resp.encoding = utf8 cptext = child_page_resp.text child_page = BeautifulSoup(cptext, html.parser) page = child_page.find(div,class_=big-pic) #æ³¨æ„_ a = page.find(a) img = a.find(img) src = img.get(src) #ä¸‹è½½å›¾ç‰‡ img_resp = requests.get(src) img_name = src.split(/)[-1] with open(img+img_name, mode=wb) as f: f.write(img_resp.content) xpathxpathæ˜¯xmlæ–‡æ¡£ä¸­æœç´¢å†…å®¹çš„ä¸€é—¨è¯­è¨€ã€‚html åˆæ˜¯ xml çš„ä¸€é—¨è¯­è¨€ã€‚ from lxml import etreename = etree.HTML()name = etree.XML()xpath(/book) #/name æŒ‡ nameå±‚çº§ ï¼Œ ç¬¬ä¸€ä¸ª/æŒ‡æ ¹èŠ‚ç‚¹#1. //æŒ‡æ‰€æœ‰è¯¥å±‚çº§ä¹‹åçš„å†…å®¹ï¼ˆåä»£ï¼‰#2. /*æŒ‡é€šé…ç¬¦ï¼Œæ‰€æœ‰å½“å‰å±‚çº§çš„ç›®å½•ï¼ˆè€Œéå†…å®¹ï¼‰ è¯­æ³•å…¥é—¨ï¼š !DOCTYPE htmlhtml lang=en head meta charset=UTF-8 / titleTitle/title /head body ul lia href=http://www.baidu.comç™¾åº¦/a/li lia href=http://www.google.comè°·æ­Œ/a/li lia href=http://www.sogou.comæœç‹—/a/li /ul ol lia href=feijié£æœº/a/li lia href=dapaoå¤§ç‚®/a/li lia href=huocheç«è½¦/a/li /ol div class=jobæå˜‰è¯š/div div class=commonèƒ¡è¾£æ±¤/div /body/html from lxml import etreetree = etree.parse(b.html)result1 = tree.xpath(/html/body/ol/li/a[@href=feiji]/text()) #å‚æ•°ï¼ˆæ­¤æ¦‚å¿µå¯èƒ½ä¸æ˜ç¡®ï¼‰result2 = tree.xpath(/html//li/a/text()) result3 = tree.xpath(/html/body/ul/li)for it in result3: temp1 = it.xpath(./a/text()) # ./è¡¨å½“å‰è·¯å¾„ print(temp1) temp2 = it.xpath(./a/@href) # è¾“å‡ºå½“å‰è·¯å¾„çš„å‚æ•°å€¼ print(temp2) temp3 = it.xpath(./a[postion()1]) # ç´¢å¼•å¤§äº1çš„å±æ€§ ç¤ºä¾‹ï¼ˆçˆ¬å–çŒªå…«æˆ’ç½‘ï¼‰ from lxml import etreeimport requestsresp = requests.get(https://cangzhou.zbj.com/search/service/?kw=saasl=0r=2)tree = etree.HTML(resp.text)divs = tree.xpath(/html/body//div[@class=search-result-list-service search-result-list-service-width]/div)for div in divs: name = div.xpath(.//div[@class = name-pic-box]/a/text()) price = div.xpath(./div//div[@class = price]/span/text()) print(price,end= ) print(name) for div in divs: price = div.xpath(./ div / div[3] / div[1]/span/text()) name = div.xpath(./div/div[2]/div[2]/a/text()) print(price,end= ) print(name)#ç»å¯¹è·¯å¾„ä¸é è°±ï¼Œç½‘é¡µçš„å¸ƒå±€å¯èƒ½ä¸éµå¾ªè§„å¾‹ï¼Œè€Œä¸”æ›´æ–°åè¦é‡æ–°å®šä½ã€‚#æ‰€ä»¥ç›´æ¥æ‰¾å˜é‡æ˜¯æ›´å¥½çš„æ–¹æ³•ï¼ˆåƒä¸Šé¢é‚£æ ·[@]ï¼‰ è¦ç†Ÿæ‚‰æŠ“åŒ…å·¥å…·ï¼Œæ‰¾åˆ°ç½‘é¡µå†…å®¹ï¼Œæ–¹ä¾¿è§£æï¼ˆç²¾å‡†æŠ“å–ï¼‰ cookiecookie:ç½‘ç«™ç”¨äºè¯†åˆ«ç”¨æˆ·çš„ä¸€è¿ä¸²ä»£ç  æ­¥éª¤ï¼š ç™»é™† -å¾—åˆ° cookie å¸¦ç€ cookie è¯·æ±‚åˆ°ä¹¦æ¶çš„ url -å¾—åˆ°ä¹¦æ¶ä¸Šçš„å†…å®¹ è¿™ä¸¤ä¸ªæ­¥éª¤éœ€è¦åˆå¹¶åœ¨ä¸€èµ·ï¼Œå³ç¬¬äºŒæ­¥çš„è¿›è¡Œéœ€è¦ç«‹å³ä½¿ç”¨ç¬¬ä¸€æ­¥çš„ä¿¡æ¯ æ–¹æ³•ä¸€ï¼š import requests#1 åˆ©ç”¨postçš„dataå‚æ•°url = https://passport.17k.com/ck/user/logindata = loginName: 15532608912, password: asd123sess = requests.session()sess.post(url, data= data, )resp = sess.get(https://user.17k.com/ck/author/shelf?page=1appKey=2406394919)print(resp.json()) æ–¹æ³•äºŒï¼š #2 åˆ©ç”¨cookieï¼ˆè·³è¿‡postï¼‰,ä¹Ÿå°±ä¸éœ€è¦sessionurl = https://passport.17k.com/ck/user/loginhead = cookie:GUID=31f82c40-9141-4860-a059-8eb54cb91250; sajssdk_2015_cross_new_user=1; Hm_lvt_9793f42b498361373512340937deb2a0=1668070477; c_channel=0; c_csc=web; accessToken=avatarUrl%3Dhttps%253A%252F%252Fcdn.static.17k.com%252Fuser%252Favatar%252F00%252F00%252F03%252F99430300.jpg-88x88%253Fv%253D1668071104000%26id%3D99430300%26nickname%3D%25E4%25B9%25A6%25E5%258F%258B777e827gw%26e%3D1683623230%26s%3Db904c643179ed595; sensorsdata2015jssdkcross=%7B%22distinct_id%22%3A%2299430300%22%2C%22%24device_id%22%3A%2218460bf8d334a4-012d512c1dffe8-3e604809-1049088-18460bf8d3414f%22%2C%22props%22%3A%7B%22%24latest_traffic_source_type%22%3A%22%E5%BC%95%E8%8D%90%E6%B5%81%E9%87%8F%22%2C%22%24latest_referrer%22%3A%22https%3A%2F%2Fgraph.qq.com%2Foauth2.0%2Fshow%3Fwhich%3DLogin%26display%3Dpc%26response_type%3Dcode%26client_id%3D215314%26scope%3Dget_user_info%26redirect_uri%3Dhttps%253A%252F%252Fpassport.17k.com%252Fsns%252FqqCallback.action%253FfromUrl%253Dhttp%22%2C%22%24latest_referrer_host%22%3A%22graph.qq.com%22%2C%22%24latest_search_keyword%22%3A%22%E6%9C%AA%E5%8F%96%E5%88%B0%E5%80%BC%22%7D%2C%22first_id%22%3A%2231f82c40-9141-4860-a059-8eb54cb91250%22%7D; Hm_lpvt_9793f42b498361373512340937deb2a0=1668071834resp = sess.get(https://user.17k.com/ck/author/shelf?page=1appKey=2406394919,headers= head)print(resp.json()) ååçˆ¬ï¼šé˜²ç›—é“¾é˜²ç›—é“¾ç¤ºä¾‹ç½‘ç«™ï¼šæ¢¨è§†é¢‘ åˆ†æ é¦–å…ˆæ¢¨è§†é¢‘å®˜ç½‘é‡‡ç”¨äºŒæ¬¡ä¼ è¾“ï¼ˆå®¢æˆ·ç«¯æ¸²æŸ“ï¼Ÿï¼‰ï¼Œç¬¬äºŒæ¬¡æ‰ä¼ é€è§†é¢‘ä¿¡æ¯ã€‚è¿™æ„å‘³ç€ç½‘ç«™æºä»£ç é‡Œçœ‹ä¸åˆ°è§†é¢‘ä¿¡æ¯ã€‚ é¦–å…ˆå¯ä»¥åœ¨é¡µé¢æ£€æŸ¥é‡Œæ‰¾åˆ°è§†é¢‘æ’­æ”¾åœ°å€ï¼Œå› ä¸ºå®ƒæ˜¯å®æ—¶æ›´æ–°çš„ã€‚ è§†é¢‘ä»£ç ï¼š video webkit-playsinline= playsinline= x-webkit-airplay= autoplay=autoplay src=https://video.pearvideo.com/mp4/short/20170818/cont-1135255-10772797-hd.mp4 style=width: 100%; height: 100%;/video srcåé¢å³ä½¿è§†é¢‘æ’­æ”¾åœ°å€ã€‚ æ—¢ç„¶æ˜¯äºŒæ¬¡åˆ·æ–°ï¼Œåº”è¯¥åœ¨ç½‘é¡µæ‰“å¼€çš„è¿‡ç¨‹ä¸­ä¼ é€æ–‡ä»¶ã€‚ æ£€æŸ¥é¡¹é‡Œ Network ä¸­æ‰¾åˆ°äº†å”¯ä¸€ä¸€ä¸ªXHRæ–‡ä»¶ï¼Œæ ‡é¢˜å°±æ˜¯ videoStatus... åœ¨æ–‡ä»¶çš„previewé‡Œï¼Œèƒ½æ‰¾åˆ°,é‡Œé¢æœ‰ä¸ªsrcUrlï¼š https://video.pearvideo.com/mp4/short/20170818/1668059979658-10772797-hd.mp4 è¿™ä¸ªåœ°å€å’Œä¸Šé¢è§†é¢‘çš„çœŸæ­£çš„åœ°å€ï¼Œå·®åˆ«åœ¨äºcont-æ•°å­—é‚£éƒ¨åˆ†ã€‚è¿™ä¸ªcont-æ•°å­—æ˜¯åœ¨çˆ¬å–ä¸­éœ€è¦æ›¿æ¢çš„å…³é”®ä½ç½®ã€‚ è¢«æ›¿æ¢æ•°æ®ï¼šåœ¨åŒä¸€ä¸ªXHRæ–‡ä»¶é‡Œï¼Œ systemTime å‚æ•°å³srcUrlä¸­æˆ‘ä»¬è¦æ›¿æ¢çš„é‚£ä¸²æ•°å­— æ›¿æ¢æ•°æ®ï¼šæ¯ä¸ªè§†é¢‘éƒ½æœ‰ç›¸åŒçš„cont-,åé¢çš„æ•°å­—å’Œæ¢¨è§†é¢‘å±•ç°è¯¥è§†é¢‘çš„ç½‘é¡µç½‘å€æœ‰å…³ã€‚ ç¤ºä¾‹è§†é¢‘å®˜ç½‘ç½‘é¡µä¸ºï¼šhttps://www.pearvideo.com/video_1135255 cont-1135255å³æ›¿æ¢æ•°æ®ã€‚ ç»è¿‡ä¸Šè¿°åˆ†æï¼Œç¡®è®¤ä»¥ä¸‹æ­¥éª¤ã€‚ æ‰¾åˆ°è§†é¢‘å¯¹åº”ç½‘é¡µ æ‰¾åˆ°æŠ“åŒ…åˆ°çš„XHRæ–‡ä»¶ä¸­çš„srcUrlå†…å®¹ é˜²ç›—é“¾ è¿™ä¸€æ­¥éœ€è¦è¿æ¥æ–‡ä»¶headerä¸­çš„Request URLï¼Œåœ¨è¿æ¥æ—¶ï¼Œä¼šé‡åˆ°â€œæ–‡ç« å·²ä¸‹çº¿â€çš„é—®é¢˜ï¼ˆå³ä½¿ç½‘é¡µå¹¶æœªå…³é—­ï¼‰ï¼Œè¿™å°±æ˜¯é˜²ç›—é“¾çš„ä½œç”¨ã€‚ å¦‚æœæ­£å¸¸ç½‘é¡µçš„è¿æ¥è¿‡ç¨‹ä¸º1-2-3 ï¼Œé˜²ç›—é“¾ä¼šåœ¨è¿æ¥2æˆ–3æ—¶è¿›è¡Œå›æº¯ï¼Œå³æŸ¥çœ‹å‰é¢çš„æ­¥éª¤æ˜¯å¦å®Œæ•´ã€‚å¦‚æœæ˜¯NULL-2 , è¿™ä¸ª2å°±ä¼šå¼•èµ·æ€€ç–‘ï¼Œæ‹’ç»è¿æ¥è¦æ±‚ã€‚ è§£å†³åŠæ³• : å¦‚åŒè¡¥å……User-Agentä¸€æ ·ï¼Œåœ¨è¿æ¥æ—¶çš„headerå‚æ•°ä¸­è¡¥å…… Referer æ•°æ®ã€‚ æ›¿æ¢srcUrlå†…å®¹ ä¸‹è½½æ–°åœ°å€å¯¹åº”çš„ç›®æ ‡è§†é¢‘ å†æŠ½è±¡åˆ°ä»£ç å±‚é¢ï¼š æ‹¿åˆ°cont-id æ‹¿åˆ°videoStatusé‡Œçš„srcUrlï¼ˆjsonæ ¼å¼ï¼‰ ä»¥cont-idæ›¿æ¢srcUrlå†…å®¹ ä¸‹è½½è§†é¢‘ ä»£ç å®ç° import requests# 1. æ‹¿åˆ°cont-idurl = https://www.pearvideo.com/video_1135255cont_id = url.split(_)[-1]# 2. æ‹¿åˆ°videoStatusé‡Œçš„srcUrlï¼ˆjsonæ ¼å¼ï¼‰ #æ³¨æ„é˜²ç›—é“¾head= User-Agent:Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.198 Safari/537.36, Referer:url,videoStatus = fhttps://www.pearvideo.com/videoStatus.jsp?contId=cont_idmrd=0.768106800161237resp = requests.get(videoStatus, headers= head, )dic = resp.json()srcUrl = dic[videoInfo][videos][srcUrl]systemTime = dic[systemTime]# 3. ä»¥cont-idæ›¿æ¢srcUrlå†…å®¹srcUrl = srcUrl.replace(systemTime,fcont-cont_id)# 4. ä¸‹è½½è§†é¢‘with open(asd.mp4,mode=wb) as f: f.write(requests.get(srcUrl).content)resp.close() ä»£ç†import requestsproxies = https:http://114.86.181.92resp = requests.get(https://www.baidu.com)resp.encoding = utf8print(resp.text) ä»£ç†ï¼šç±»ä¼¼æ‰¾é»„ç‰›ä¹°ç¥¨ï¼Œæ›´æ¢è‡ªå·±çš„IPåœ°å€æ¥è¿›è¡Œç›®æ ‡æœåŠ¡å™¨è®¿é—®ã€‚"},{"title":"æ¹–ç§‘å¤§(6)åº”ç”¨å±‚","path":"/wiki/network/æ¹–ç§‘å¤§(6)åº”ç”¨å±‚.html","content":"åº”ç”¨å±‚åº”ç”¨å±‚æ¦‚è¿° åº”ç”¨å±‚ï¼šè§£å†³é€šè¿‡åº”ç”¨è¿›ç¨‹çš„äº¤äº’æ¥å®ç°ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜ è¿è¾“å±‚ï¼šè§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜ ç½‘ç»œå±‚ï¼šè§£å†³åˆ†ç»„åœ¨å¤šä¸ªç½‘ç»œä¸Šä¼ è¾“(è·¯ç”±)çš„é—®é¢˜è§£å†³ æ•°æ®é“¾è·¯å±‚ï¼šåˆ†ç»„åœ¨ä¸€ä¸ªç½‘ç»œ(æˆ–ä¸€æ®µé“¾è·¯)ä¸Šä¼ è¾“çš„é—®é¢˜ ç‰©ç†å±‚ï¼šè§£å†³ä½¿ç”¨ä½•ç§ä¿¡å·æ¥ä¼ è¾“æ¯”ç‰¹çš„é—®é¢˜ åº”ç”¨å±‚æ˜¯è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„çš„æœ€é¡¶å±‚ï¼Œæ˜¯è®¾è®¡å’Œå»ºç«‹è®¡ç®—æœºç½‘ç»œçš„æœ€ç»ˆç›®çš„ï¼Œä¹Ÿæ˜¯è®¡ç®—æœºç½‘ç»œä¸­å‘å±•æœ€å¿«çš„éƒ¨åˆ†ã€‚ æ—©æœŸåŸºäºæ–‡æœ¬çš„åº”ç”¨(ç”µå­é‚®ä»¶ã€è¿œç¨‹ç™»å½•ã€æ–‡ä»¶ä¼ è¾“ã€æ–°é—»ç»„) 20ä¸–çºª90å¹´ä»£å°†å› ç‰¹ç½‘å¸¦å…¥å¹²å®¶ä¸‡æˆ·çš„ä¸‡ç»´ç½‘WWW å½“ä»Šæµè¡Œçš„å³æ—¶é€šä¿¡ã€P2Pæ–‡ä»¶å…±äº«åŠå„ç§éŸ³è§†é¢‘åº”ç”¨è®¡ç®—è®¾å¤‡çš„å°å‹åŒ–å’Œâ€œæ— å¤„ä¸åœ¨â€ï¼Œå®½å¸¦ä½å®…æ¥å…¥å’Œæ— çº¿æ¥å…¥çš„æ—¥ç›Šæ™®åŠå’Œè¿…é€Ÿå‘å±•ï¼Œä¸ºæœªæ¥æ›´å¤šçš„æ–°å‹åº”ç”¨æä¾›äº†å¹¿é˜”çš„èˆå°ã€‚ åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬ä»¥ä¸€äº›ç»å…¸çš„ç½‘ç»œåº”ç”¨ä¸ºä¾‹æ¥å­¦ä¹ æœ‰å…³ç½‘ç»œåº”ç”¨çš„åŸç†ã€åè®®å’Œå®ç°æ–¹é¢çš„çŸ¥è¯†ã€‚ CS å®¢æˆ·-æœåŠ¡å™¨æ–¹å¼ å’Œ P2P å¯¹ç­‰æ–¹å¼ ç½‘ç»œåº”ç”¨ç¨‹åºè¿è¡Œåœ¨å¤„äºç½‘ç»œè¾¹ç¼˜çš„ä¸åŒçš„ç«¯ç³»ç»Ÿä¸Šï¼Œé€šè¿‡å½¼æ­¤é—´çš„é€šä¿¡æ¥å…±åŒå®ŒæˆæŸé¡¹ä»»åŠ¡ã€‚ å¼€å‘ä¸€ç§æ–°çš„ç½‘ç»œåº”ç”¨é¦–å…ˆè¦è€ƒè™‘çš„é—®é¢˜å°±æ˜¯ç½‘ç»œåº”ç”¨ç¨‹åºåœ¨å„ç§ç«¯ç³»ç»Ÿä¸Šçš„ç»„ç»‡æ–¹å¼å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ç›®å‰æµè¡Œçš„ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§: å®¢æˆ·æœåŠ¡å™¨(ClientServerï¼ŒCS) æ–¹å¼ å¯¹ç­‰(Peer-to-Peerï¼ŒP2P) æ–¹å¼ å®¢æˆ·æœåŠ¡å™¨æ–¹å¼(CS) å®¢æˆ·æœåŠ¡å™¨ å®¢æˆ·å’ŒæœåŠ¡å™¨æ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ å®¢æˆ·æœåŠ¡å™¨æ–¹å¼æ‰€æè¿°çš„æ˜¯è¿›ç¨‹ä¹‹é—´æœåŠ¡å’Œè¢«æœåŠ¡çš„å…³ç³» å®¢æˆ·æ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼ŒæœåŠ¡å™¨æ˜¯æœåŠ¡æä¾›æ–¹ æœåŠ¡è¯·æ±‚æ–¹æ˜¯å®¢æˆ·ç¨‹åºï¼Œç§°ä¸ºå®¢æˆ·è¿›ç¨‹ï¼Œè¿è¡Œå®¢æˆ·è¿›ç¨‹çš„ä¸»æœºç§°ä¸ºå®¢æˆ·è®¡ç®—æœºã€‚ æœåŠ¡æä¾›æ–¹æ˜¯æœåŠ¡å™¨ç¨‹åºï¼Œç§°ä¸ºæœåŠ¡å™¨è¿›ç¨‹ï¼Œè¿è¡ŒæœåŠ¡å™¨è¿›ç¨‹çš„ä¸»æœºç§°ä¸ºæœåŠ¡å™¨è®¡ç®—æœºã€‚ æœåŠ¡å™¨æ€»æ˜¯å¤„äºè¿è¡Œç­‰å¾…çŠ¶æ€ï¼Œå¹¶ç­‰å¾…å®¢æˆ·çš„æœåŠ¡è¯·æ±‚ã€‚æœåŠ¡å™¨å…·æœ‰å›ºå®šç«¯å£å·(ä¾‹å¦‚HTTPæœåŠ¡å™¨çš„é»˜è®¤ç«¯å£å·ä¸º80)ï¼Œè€Œè¿è¡ŒæœåŠ¡å™¨çš„ä¸»æœºä¹Ÿå…·æœ‰å›ºå®šçš„IPåœ°å€ CSæ–¹å¼æ˜¯å› ç‰¹ç½‘ä¸Šä¼ ç»Ÿçš„ã€åŒæ—¶ä¹Ÿæ˜¯æœ€æˆç†Ÿçš„æ–¹å¼ï¼Œå¾ˆå¤šæˆ‘ä»¬ç†Ÿæ‚‰çš„ç½‘ç»œåº”ç”¨é‡‡ç”¨çš„éƒ½æ˜¯CSæ–¹å¼åŒ…æ‹¬ä¸‡ç»´ç½‘WWWã€ç”µå­é‚®ä»¶ã€æ–‡ä»¶ä¼ è¾“FTPç­‰ã€‚ åŸºäºC/Sæ–¹å¼çš„åº”ç”¨æœåŠ¡é€šå¸¸æ˜¯æœåŠ¡é›†ä¸­å‹çš„ï¼Œå³åº”ç”¨æœåŠ¡é›†åœ¨ç½‘ç»œä¸­æ¯”å®¢æˆ·è®¡ç®—æœºå°‘å¾—å¤šçš„æœåŠ¡å™¨è®¡ç®—æœºä¸Š ç”±äºä¸€å°æœåŠ¡å™¨è®¡ç®—æœºè¦ä¸ºå¤šä¸ªå®¢æˆ·æœºæä¾›æœåŠ¡ï¼Œåœ¨C/Såº”ç”¨ä¸­ï¼Œå¸¸ä¼šå‡ºç°æœåŠ¡å™¨è®¡ç®—æœºè·Ÿä¸ä¸Šä¼—å¤šå®¢æˆ·æœºè¯·æ±‚çš„æƒ…å†µ ä¸ºæ­¤ï¼Œåœ¨C/Såº”ç”¨ä¸­ï¼Œå¸¸ç”¨è®¡ç®—æœºç¾¤é›†(æˆ–æœåŠ¡å™¨åœº)æ„å»ºä¸€ä¸ªå¼ºå¤§çš„è™šæ‹ŸæœåŠ¡å™¨ å¯¹ç­‰æ–¹å¼ï¼ˆP2Pæ–¹å¼ï¼‰ å¯¹ç­‰(Peer-to-Peerï¼ŒP2P)æ–¹å¼ åœ¨P2Pæ–¹å¼ä¸­ï¼Œæ²¡æœ‰å›ºå®šçš„æœåŠ¡è¯·æ±‚è€…å’ŒæœåŠ¡æä¾›è€…ï¼Œåˆ†å¸ƒåœ¨ç½‘ç»œè¾¹ç¼˜å„ç«¯ç³»ç»Ÿä¸­çš„åº”ç”¨è¿›ç¨‹æ˜¯å¯¹ç­‰çš„ï¼Œè¢«ç§°ä¸ºå¯¹ç­‰æ–¹ã€‚å¯¹ç­‰æ–¹ç›¸äº’ä¹‹é—´ç›´æ¥é€šä¿¡ï¼Œæ¯ä¸ªå¯¹ç­‰æ–¹æ—¢æ˜¯æœåŠ¡çš„è¯·æ±‚è€…ï¼Œåˆæ˜¯æœåŠ¡çš„æä¾›è€…ã€‚ ç›®å‰ï¼Œåœ¨å› ç‰¹ç½‘ä¸Šæµè¡Œçš„P2Påº”ç”¨ä¸»è¦åŒ…æ‹¬P2Pæ–‡ä»¶å…±äº«ã€å³æ—¶é€šä¿¡ã€P2Pæµåª’ä½“ã€åˆ†å¸ƒå¼å­˜å‚¨ç­‰ã€‚ åŸºäºP2Pçš„åº”ç”¨æ˜¯æœåŠ¡åˆ†æ•£å‹çš„ï¼Œå› ä¸ºæœåŠ¡ä¸æ˜¯é›†ä¸­åœ¨å°‘æ•°å‡ ä¸ªæœåŠ¡å™¨è®¡ç®—æœºä¸­ï¼Œè€Œæ˜¯åˆ†æ•£åœ¨å¤§é‡å¯¹ç­‰è®¡ç®—æœºä¸­ï¼Œè¿™äº›è®¡ç®—æœºå¹¶ä¸ä¸ºæœåŠ¡æä¾›å•†æ‰€æœ‰ï¼Œè€Œæ˜¯ä¸ºä¸ªäººæ§åˆ¶çš„æ¡Œé¢è®¡ç®—æœºå’Œç¬”è®°æœ¬ç”µè„‘ï¼Œå®ƒä»¬é€šå¸¸ä½äºä½å®…ã€æ ¡å›­å’ŒåŠå…¬å®¤ä¸­ã€‚ P2Pæ–¹å¼çš„æœ€çªå‡ºç‰¹æ€§ä¹‹ä¸€å°±æ˜¯å®ƒçš„å¯æ‰©å±•æ€§ã€‚å› ä¸ºç³»ç»Ÿæ¯å¢åŠ ä¸€ä¸ªå¯¹ç­‰æ–¹ï¼Œä¸ä»…å¢åŠ çš„æ˜¯æœåŠ¡çš„è¯·æ±‚è€…ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†æœåŠ¡çš„æä¾›è€…ï¼Œç³»ç»Ÿæ€§èƒ½ä¸ä¼šå› è§„æ¨¡çš„å¢å¤§è€Œé™ä½ã€‚ P2Pæ–¹å¼å…·æœ‰æˆæœ¬ä¸Šçš„ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒé€šå¸¸ä¸éœ€è¦åºå¤§çš„æœåŠ¡å™¨è®¾æ–½å’ŒæœåŠ¡å™¨å¸¦å®½ã€‚ä¸ºäº†é™ä½æˆæœ¬ï¼ŒæœåŠ¡æä¾›å•†å¯¹äºå°†P2Pæ–¹å¼ç”¨äºåº”ç”¨çš„å…´è¶£è¶Šæ¥è¶Šå¤§ã€‚ P2P ç½‘ç»œç‰¹ç‚¹ï¼š â–ªéä¸­å¿ƒåŒ– â–ªå¯æ‰©å±•æ€§ â–ªå¥å£®æ€§ â–ªé«˜æ€§ä»·æ¯” â–ªéšç§ä¿æŠ¤ â–ªè´Ÿè½½å‡è¡¡ ä¼˜åŠ¿ä¸å®¢æˆ·ç«¯æœåŠ¡å™¨ç½‘ç»œç›¸æ¯”ï¼Œå…¶ï¼š ä¼˜åŠ¿ï¼š å¯åœ¨ç½‘ç»œçš„ä¸­å¤®åŠè¾¹ç¼˜åŒºåŸŸå…±äº«å†…å®¹å’Œèµ„æºã€‚åœ¨å®¢æˆ·ç«¯æœåŠ¡å™¨ç½‘ç»œä¸­ï¼Œé€šå¸¸åªèƒ½åœ¨ç½‘ç»œçš„ä¸­å¤®åŒºåŸŸå…±äº«å†…å®¹å’Œèµ„æºã€‚ ç”±å¯¹ç­‰æ–¹ç»„æˆçš„ç½‘ç»œæ˜“äºæ‰©å±•ï¼Œè€Œä¸”æ¯”å•å°æœåŠ¡å™¨æ›´åŠ å¯é ã€‚å•å°æœåŠ¡å™¨ä¼šå—åˆ¶äºå•ç‚¹æ•…éšœï¼Œæˆ–è€…ä¼šåœ¨ç½‘ç»œä½¿ç”¨ç‡åé«˜æ—¶ï¼Œå½¢ä¸ºç“¶é¢ˆã€‚ ç”±å¯¹ç­‰æ–¹ç»„æˆçš„ç½‘ç»œå¯å…±äº«å¤„ç†å™¨ï¼Œæ•´åˆè®¡ç®—èµ„æºä»¥æ‰§è¡Œåˆ†å¸ƒå¼è®¡ç®—ä»»åŠ¡ï¼Œè€Œä¸åªæ˜¯å•çº¯ä¾èµ–ä¸€å°è®¡ç®—æœºï¼Œå¦‚ä¸€å°è¶…çº§è®¡ç®—æœºã€‚ ç”¨æˆ·å¯ç›´æ¥è®¿é—®å¯¹ç­‰è®¡ç®—æœºä¸Šçš„å…±äº«èµ„æºã€‚ç½‘ç»œä¸­çš„å¯¹ç­‰æ–¹å¯ç›´æ¥åœ¨æœ¬åœ°å­˜å‚¨å™¨ä¸Šå…±äº«æ–‡ä»¶ï¼Œè€Œä¸å¿…åœ¨ä¸­å¤®æœåŠ¡å™¨ä¸Šè¿›è¡Œå…±äº«ã€‚ ä¸è¶³ å½±å“ç”¨æˆ·è®¡ç®—æœºçš„æ€§èƒ½å¯¹ç­‰ç½‘ç»œä¸­çš„è®¡ç®—æœºéœ€è¦åŒæ—¶æ‰¿æ‹…æœåŠ¡å™¨ä¸å·¥ä½œç«™ä¸¤æ–¹é¢çš„ä»»åŠ¡ï¼Œè¿™å°±ä½¿åŸå…ˆçš„å•ç”¨æˆ·è®¡ç®—è¢«å½“ä½œå¤šç”¨æˆ·è®¡ç®—æœºæ¥ä½¿ç”¨ã€‚åœ¨è¿›è¡Œå¤§æ‰¹é‡çš„æ•°æ®äº¤æ¢æ—¶ï¼Œç½‘ç»œçš„æ€§èƒ½ä¼šå—åˆ°è¾ƒå¤§çš„å½±å“ã€‚ ç½‘ç»œå®‰å…¨æ€§è¾ƒå·®åœ¨å¯¹ç­‰ç½‘ç»œä¸­ï¼Œèµ„æºä¸æ˜¯è¢«é›†ä¸­å­˜æ”¾åœ¨æŸäº›è®¡ç®—æœºä¸­ï¼Œè€Œæ˜¯åˆ†æ•£åœ°ä½äºæ•´ä¸ªç½‘ç»œä¹‹ä¸­ï¼Œè¢«è‹¥å¹²ç”¨æˆ·æ‰€ç®¡ç†ç€ï¼Œæ— æ³•ä¿è¯æ‰€æœ‰çš„ç”¨æˆ·éƒ½å¯ä»¥ä¿æŠ¤å¥½å„è‡ªçš„èµ„æºã€‚å¦å¤–å¯¹ç­‰ç½‘ç»œä¸­ç”¨æˆ·è´¦å·ä¸å¯†ç çš„ç®¡ç†ä¹Ÿæ˜¯ä¸ªé‡è¦é—®é¢˜ï¼Œä¸€ä¸ªç”¨æˆ·è¦è®°å¿†å¤šå¥—è´¦å·ä¸å¯†ç æ‰å¯ä»¥è®¿é—®ä¸åŒè®¡ç®—æœºä¸­çš„èµ„æºã€‚ å¤‡ä»½ã€æ¢å¤èµ„æºå›°éš¾å¯¹ç­‰ç½‘ç»œä¸­çš„èµ„æºè¾ƒä¸ºåˆ†æ•£ï¼Œå¯¹æ‰€æœ‰è®¡ç®—æœºä¸­çš„èµ„æºè¿›è¡Œå¤‡ä»½ä¸æ¢å¤éƒ½æ˜¯è¾ƒä¸ºå¤æ‚çš„ã€‚ç”±äºä¸Šè¿°ç‰¹ç‚¹ï¼Œå¯¹ç­‰ç½‘ç»œé€‚ç”¨äºç”¨æˆ·å°‘ã€è§„æ¨¡å°åŠå®‰å…¨æ€§èƒ½è¦æ±‚è¾ƒä½çš„åœºåˆã€‚ åŠ¨æ€ä¸»æœºé…ç½®åè®®DHCPåº”ç”¨åœºæ™¯ å¦‚ä½•é…ç½®ç”¨æˆ·ä¸»æœºçš„ç½‘ç»œä¿¡æ¯ï¼Œæ‰èƒ½ä½¿ç”¨æˆ·ä¸»æœºæ­£å¸¸è®¿é—®WebæœåŠ¡å™¨? æ‰‹å·¥é…ç½®çš„å·¥ä½œé‡å¤§ï¼Œä¸”å®¹æ˜“å‡ºé”™! é€šè¿‡DHCPæœåŠ¡å™¨ä¸ºæŒ‡å®šç½‘æ®µä¸»æœºé…ç½®ç½‘ç»œä¿¡æ¯ï¼Œåƒåˆ†é…IPåœ°å€ã€å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³ã€DNSæœåŠ¡å™¨ç­‰è‡ªåŠ¨å®Œæˆã€‚ DHCPä½¿ç”¨ CS æ–¹å¼ï¼ ä½¿ç”¨è¿è¾“å±‚UDPæä¾›çš„æœåŠ¡ã€‚ DHCPæœåŠ¡å™¨ä½¿ç”¨çš„UDPç«¯å£æ˜¯67ï¼ŒDHCPå®¢æˆ·ä½¿ç”¨çš„UDPç«¯å£æ˜¯68ã€‚ å·¥ä½œè¿‡ç¨‹ DHCPå®¢æˆ·æœºé¦–å…ˆè¿›è¡Œå¹¿æ’­å¯»æ‰¾DHCPæœåŠ¡å™¨(â€œDHCPå‘ç°â€œæ¶ˆæ¯)ï¼Œæºåœ°å€ä¸ºæœ¬æœº0.0.0.0ï¼Œç›®çš„åœ°å€ä¸ºå¹¿æ’­åœ°å€255.255.255.255 ä¹‹æ‰€ä»¥æºåœ°å€IPä¸º0.0.0.0ï¼Œè¿™æ˜¯å› ä¸ºä¸»æœºç›®å‰è¿˜æœªåˆ†é…åˆ°IPåœ°å€ï¼Œä½¿ç”¨ç½‘ç»œåœ°å€ä»£æ›¿ã€‚ ä¹‹æ‰€ä»¥å¹¿æ’­ï¼Œæ˜¯å› ä¸ºä¸»æœºå¹¶ä¸çŸ¥é“ç½‘ç»œä¸­æœ‰å“ªå‡ ä¸ªDHCPæœåŠ¡å™¨ï¼Œä»¥åŠå®ƒä»¬çš„IPåœ°å€å„æ˜¯ä»€ä¹ˆã€‚ DHCPæœåŠ¡å™¨æ”¶åˆ°å‘ç°æŠ¥æ–‡åï¼Œæ ¹æ®å…¶ä¸­å°è£…çš„DCHPå®¢æˆ·ç«¯MACåœ°å€æ¥æŸ¥æ‰¾è‡ªå·±çš„æ•°æ®åº“ï¼Œçœ‹æ˜¯å¦æœ‰é’ˆå¯¹è¯¥MACåœ°å€çš„é…ç½®ä¿¡æ¯ã€‚å¦‚æœæœ‰ç›´æ¥å‘é€ï¼Œæ²¡æœ‰ä½¿ç”¨é»˜è®¤é…ç½®ä¿¡æ¯æ„å»ºã€‚ æ³¨æ„ï¼šDHCPæœåŠ¡å™¨ä»è‡ªå·±çš„IPåœ°å€æ± ä¸­æŒ‘é€‰å¾…ç§Ÿç”¨ç»™ä¸»æœºçš„IPåœ°å€æ—¶ï¼Œä¼šé€šè¿‡ARPåè®®ç¡®è®¤æ­¤åœ°å€æœªè¢«ç½‘ç»œä¸­å…¶ä»–ä¸»æœºä½¿ç”¨ã€‚ è¿”å›â€DHCPæä¾›æŠ¥æ–‡â€œæ¶ˆæ¯ï¼Œå…¶ä¸­åŒ…å«æä¾›ç»™DHCPå®¢æˆ·æœºçš„IPåœ°å€å’Œç›¸å…³é…ç½®ä¿¡æ¯ã€‚æºåœ°å€ä¸ºDHCPæœåŠ¡å™¨åœ°å€ï¼Œç›®çš„åœ°å€ä¸ºå¹¿æ’­åœ°å€(å› ä¸ºæ­¤æ—¶ç›®çš„å®¢æˆ·æœºè¿˜æ²¡æœ‰IPåœ°å€) ç½‘ç»œå±‚æ‰€æœ‰ä¸»æœºéƒ½ä¼šæ”¶åˆ°è¯¥IPæ•°æ®æŠ¥(DHCPå‘ç°æŠ¥æ–‡)ï¼Œå¹¶å¯¹å…¶å±‚å±‚è§£å°ç»§è€Œå‘ç°UDPç”¨æˆ·æ•°æ®æŠ¥ã€‚ å¯¹äºDHCPå®¢æˆ·ï¼Œå…¶åº”ç”¨å±‚æ²¡æœ‰ç›‘å¬è¯¥UDPç”¨æ•°æ®æŠ¥ç›®çš„ç«¯å£67çš„è¿›ç¨‹ï¼Œå› æ­¤æ— æ³•äº¤ä»˜DHCPå‘ç°æŠ¥æ–‡ï¼Œåªèƒ½ä¸¢å¼ƒã€‚ å¯¹äºDHCPæœåŠ¡å™¨ï¼Œå…¶åº”ç”¨å±‚å§‹ç»ˆè¿è¡Œç€DHCPæœåŠ¡å™¨è¿›ç¨‹ï¼Œå› æ­¤ä¼šæ¥å—è¯¥DHCPå‘ç°æŠ¥æ–‡å¹¶ä½œå‡ºå“åº”ã€‚ DHCPæŠ¥æ–‡æ ¼å¼æ¯”è¾ƒå¤æ‚ï¼Œåªéœ€çŸ¥é“å‘ç°æŠ¥æ–‡å†…éƒ¨å°è£…æœ‰äº‹ç‰©IDå’ŒDHCPå®¢æˆ·ç«¯çš„MACåœ°å€å³å¯ã€‚ DHCPæœåŠ¡å™¨å’Œå®¢æˆ·æ”¶åˆ°DHCPæä¾›æŠ¥æ–‡åŒç†ï¼Œåº”ç”¨å±‚åº”å½“ç›‘å¬ç«¯å£68ã€‚ DHCPå®¢æˆ·æ”¶åˆ°æä¾›æŠ¥æ–‡åï¼Œæ ¹æ®æä¾›æŠ¥æ–‡ä¸­çš„äº‹ç‰©IDæ¥åˆ¤æ–­è¯¥æŠ¥æ–‡æ˜¯å¦æ˜¯è‡ªå·±æ‰€è¯·æ±‚çš„æŠ¥æ–‡ã€‚äº‹åŠ¡IDæ˜¯å¦ç›¸ç¬¦ï¼Œç›¸ç¬¦è¡¨æ˜æ˜¯è‡ªå·±è¯·æ±‚çš„æŠ¥æ–‡ï¼Œæ¥å—ã€‚è‹¥ä¸ç¬¦åˆ™ä¸¢å¼ƒã€‚ æä¾›æŠ¥æ–‡ä¸­è¿˜å°è£…äº†é…ç½®ä¿¡æ¯å¦‚IPåœ°å€ã€å­ç½‘æ©ç ã€åœ°å€ç§ŸæœŸã€é»˜è®¤ç½‘å…³ã€DNSæœåŠ¡å™¨ç­‰ã€‚ å®¢æˆ·æœºå¯èƒ½ä¼šæ”¶åˆ°å¤šä¸ªDHCPæä¾›æ¶ˆæ¯ï¼Œä¸€èˆ¬é€‰æ‹©æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªã€‚ ç„¶åå‘æœåŠ¡å™¨å‘é€DHCPè¯·æ±‚æŠ¥æ–‡ï¼Œæ¥å¾å¾—åˆšåˆšé€‰æ‹©çš„DHCPæœåŠ¡å™¨çš„åŒæ„ã€‚åŒæ„åæ‰èƒ½æ­£å¼ä½¿ç”¨å‘è¯¥DHCPæœåŠ¡å™¨ç§Ÿç”¨çš„IPåœ°å€ã€‚ æŠ¥æ–‡çš„æºåœ°å€ä¸º0.0.0.0ï¼Œç›®çš„åœ°å€ä¸º255.255.255.255 ã€‚ è¯·æ±‚æŠ¥æ–‡ä¸­å°è£…äº†äº‹åŠ¡IDã€DHCPå®¢æˆ·ç«¯çš„MACåœ°å€ã€æ¥å—çš„ç§Ÿçº¦ä¸­çš„IPåœ°å€ã€æä¾›æ­¤ç§Ÿçº¦çš„DHCPæœåŠ¡å™¨ç«¯çš„IPåœ°å€ã€‚ å¹¿æ’­åœ°å€æ„å‘³ç€DHCPå®¢æˆ·ä¸ç”¨å‘ç½‘ç»œä¸­çš„æ¯ä¸€ä¸ªDHCPæœåŠ¡å™¨å•æ’­å‘é€DHCPè¯·æ±‚æŠ¥æ–‡ï¼Œæ¥å‘ŠçŸ¥å®ƒä»¬æ˜¯å¦è¯·æ±‚å®ƒä»¬ä½œä¸ºè‡ªå·±çš„DHCPæœåŠ¡å™¨ã€‚ DHCPæœåŠ¡å™¨åŒæ„åï¼Œç»™DHCPå®¢æˆ·å‘é€DHCPç¡®è®¤æŠ¥æ–‡ã€‚ å°è£…è¯¥æŠ¥æ–‡çš„IPæ•°æ®æŠ¥çš„æºIPåœ°å€ä¸ºDHCPæœåŠ¡å™¨1çš„IPåœ°å€; ç›®çš„åœ°å€ä»ä¸ºå¹¿æ’­åœ°å€ã€‚ å®¢æˆ·æœºæ”¶åˆ°DHCPç¡®è®¤ä¿¡æ¯åï¼ŒæŸ¥çœ‹å…¶ä¸­äº‹åŠ¡IDæ˜¯å¦ç›¸ç¬¦ï¼Œä¸ç¬¦åˆ™ä¸¢å¼ƒï¼›ç¬¦åˆåˆ™å†æ¬¡ä½¿ç”¨ARPç¡®è®¤IPåœ°å€æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œç¡®è®¤æˆåŠŸåå°†æ­¤IPåœ°å€åº”ç”¨(æœ‰ä¸€å®šç§Ÿçº¦)ã€‚ å®¢æˆ·ä½¿ç”¨ç§Ÿç”¨åˆ°çš„IPåœ°å€ä¹‹å‰ï¼Œä¸»æœºè¿˜ä¼šä½¿ç”¨ARPæ£€æµ‹è¯¥IPåœ°å€æ˜¯å¦å·²è¢«ç½‘ç»œä¸­å…¶ä»–ä¸»æœºå ç”¨ã€‚ è‹¥è¢«å ç”¨:ç»™DHCPæœåŠ¡å™¨å‘é€:â€DHCP DECLINEâ€ è°¢ç»æŠ¥æ–‡æ’¤é”€IPåœ°å€ç§Ÿçº¦ï¼Œå¹¶é‡æ–°å‘é€â€œDHCP DISCOVERâ€å‘ç°æŠ¥æ–‡; è‹¥æœªè¢«å ç”¨:å¯ä»¥ä½¿ç”¨ç§Ÿçº¦ä¸­çš„IPåœ°å€ä¸ç½‘ç»œä¸­å…¶ä»–ä¸»æœºé€šä¿¡äº†ã€‚ å½“IPåœ°å€ç§Ÿç”¨æœŸè¾¾åˆ°0.5å€æ—¶é—´æ—¶ï¼Œå®¢æˆ·æœºä¼šå†æ¬¡å‘ DHCP æœåŠ¡å™¨å‘é€è¯·æ±‚æŠ¥æ–‡ï¼Œè¯·æ±‚æ›´æ–°ç§Ÿç”¨æœŸã€‚ æºIPåœ°å€ä¸ºä¹‹å‰ç§Ÿç”¨åˆ°çš„åœ°å€ã€‚ç›®çš„IPåœ°å€ä¸ºæœåŠ¡å™¨åœ°å€ã€‚ æ­¤æ—¶ DHCP æœåŠ¡å™¨ä¼šå‡ºç°ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š æ”¶åˆ°è¯·æ±‚åï¼Œè‹¥DCHPæœåŠ¡å™¨åŒæ„ï¼Œåˆ™è¿”å›ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œå…¶ä¸­æœ‰æ–°çš„IPåœ°å€ç§ŸæœŸ æ”¶åˆ°è¯·æ±‚åï¼Œè¿”å›å¦è®¤æŠ¥æ–‡ï¼Œåˆ™å®¢æˆ·æœºæ”¶åˆ°åç«‹åˆ»åœæ­¢ä½¿ç”¨IPåœ°å€å¹¶é‡æ–°å‘é€â€DHCPå‘ç°â€æŠ¥æ–‡ ä¸å“åº”ã€‚åˆ™åœ¨ç§ŸæœŸè¾¾åˆ°0.875å€æ—¶ï¼ŒDHCPå®¢æˆ·å¿…é¡»é‡æ–°å‘é€â€DHCPè¯·æ±‚â€œæŠ¥æ–‡ï¼Œç»§ç»­ç­‰å¾…DHCPæœåŠ¡å™¨å¯èƒ½åšå‡ºçš„ååº”ã€‚è‹¥ä¾ç„¶æ— ååº”ï¼Œåˆ™ç§Ÿç”¨æœŸåˆ°åï¼Œå®¢æˆ·æœºå¿…é¡»ç«‹åˆ»åœæ­¢ä½¿ç”¨å½“å‰IPåœ°å€ï¼Œå¹¶é‡æ–°ç”³è¯·æ–°çš„IPåœ°å€ã€‚ å®¢æˆ·ç«¯å¯éšæ—¶ç»ˆæ­¢DHCPæœåŠ¡å™¨æä¾›çš„ç§Ÿç”¨æœŸï¼Œè¿™æ—¶åªéœ€è¦å‘DHCPæœåŠ¡å™¨å‘é€DHCPé‡Šæ”¾æŠ¥æ–‡å³å¯ã€‚æºåœ°å€0.0.0.0ï¼Œç›®çš„åœ°å€255.255.255.255 æ¦‚æ‹¬ï¼š å®¢æˆ·ï¼šå¯»æ‰¾DHCPæœåŠ¡å™¨ â€”â€” å‘ç°æŠ¥æ–‡ æœåŠ¡å™¨ï¼šå‘å®¢æˆ·æä¾›IPåœ°å€ç§Ÿç”¨ â€”â€” æä¾›æŠ¥æ–‡ ç»™å®¢æˆ·æŒ‘é€‰IPåœ°å€æ—¶ï¼Œä½¿ç”¨ARPç¡®ä¿IPæœªè¢«å ç”¨ã€‚ å®¢æˆ·ï¼šæ¥å—IPåœ°å€ç§Ÿçº¦ â€”â€” è¯·æ±‚æŠ¥æ–‡ æœåŠ¡å™¨ï¼šç¡®è®¤IPåœ°å€ç§Ÿçº¦ â€”â€” ç¡®è®¤æŠ¥æ–‡ å®¢æˆ·ï¼šä½¿ç”¨ IP åœ°å€ ä½¿ç”¨IPåœ°å€ä¹‹å‰ï¼Œä½¿ç”¨ARPæ£€æµ‹IPæ˜¯å¦è¢«å ç”¨ã€‚ è‹¥è¢«å ç”¨: ç»™DHCPæœåŠ¡å™¨å‘é€:â€DHCP DECLINEâ€ è°¢ç»æŠ¥æ–‡æ’¤é”€IPåœ°å€ç§Ÿçº¦ï¼Œ å¹¶é‡æ–°å‘é€â€œDHCP DISCOVERâ€å‘ç°æŠ¥æ–‡ã€‚ å®¢æˆ·ï¼šåç»­çš„ IPåœ°å€ç»­çº¦ éšæ—¶è§£é™¤IPåœ°å€ç»­çº¦ DHCPä¸­ç»§ä»£ç† åº”ç”¨åœºæ™¯ï¼š å³è¾¹ä¸¤å°ä¸»æœºè·å–ä¸åˆ°IPåœ°å€ã€‚ å› ä¸ºå¹¿æ’­çš„ DHCPå‘ç°æŠ¥æ–‡ä¸ä¼šè¢«è·¯ç”±å™¨è½¬å‘ï¼Œè€Œæ˜¯ä¸¢å¼ƒã€‚ è§£å†³æ–¹æ³•ï¼š ç»™è¯¥è·¯ç”±å™¨é…ç½®DHCPæœåŠ¡å™¨çš„IPåœ°å€ï¼Œå¹¶ä½¿ä¹‹æˆä¸ºDHCPä¸­ç»§ä»£ç†ã€‚ è¿™æ ·ï¼Œè·¯ç”±å™¨æ”¶åˆ°å¹¿æ’­çš„DHCPå‘ç°æŠ¥æ–‡ï¼Œä¼šå°†å…¶å•æ’­è½¬å‘ç»™DHCPæœåŠ¡å™¨ã€‚ æœ‰äº†ä¸­ç»§ä»£ç†ï¼Œç½‘ç»œä¸­å„ä¸»æœºå°±å¯ä»¥é€šè¿‡DHCPè‡ªåŠ¨è·å–ç½‘ç»œé…ç½®ä¿¡æ¯äº†ã€‚ åŸå› ï¼š æˆ‘ä»¬å¹¶ä¸æ„¿æ„åœ¨æ¯ä¸€ä¸ªç½‘ç»œä¸Šéƒ½è®¾ç½®ä¸€ä¸ªDHCPæœåŠ¡å™¨,å› ä¸ºè¿™æ ·ä¼šä½¿DHCPæœåŠ¡å™¨çš„æ•°é‡å¤ªå¤šã€‚ åŸŸåç³»ç»ŸDNS æˆ‘ä»¬é€šè¿‡è¾“å…¥åŸŸåç½‘å€æ¥è®¿é—®ç½‘é¡µï¼Œå¯å®é™…ä¸Šè®¡ç®—æœºé—´çš„é€šä¿¡æ˜¯é€šè¿‡IPåœ°å€ï¼Œæ‰€ä»¥åŸŸåç½‘å€çš„æœ¬è´¨ä¸Šæ˜¯IPåœ°å€ï¼Œå°†åŸŸåç½‘å€ä¸IPåœ°å€æ˜ å°„èµ·æ¥å°±æ˜¯DNSçš„ä½œç”¨ å› ç‰¹ç½‘æ˜¯å¦å¯ä»¥åªé€‚ç”¨ä¸€å°DNSæœåŠ¡å™¨ï¼Ÿ è¿™ç§åšæ³•ä¸å¯å–ã€‚å› ä¸ºå› ç‰¹ç½‘çš„è§„æ¨¡å¾ˆå¤§ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªæœåŠ¡å™¨ï¼Œè‚¯å®šä¼šå› ä¸ºè¶…è´Ÿè·è€Œæ— æ³•æ­£å¸¸å·¥ä½œã€‚é‚£ä¹ˆä¸€æ—¦å…¶å‡ºç°æ•…éšœï¼Œæ•´ä¸ªå› ç‰¹ç½‘å°±ä¼šç˜«ç—ª å› æ­¤ç°å®ä¸­é‡‡ç”¨å±‚æ¬¡ç»“æ„çš„å‘½åæ ‘ä½œä¸ºä¸»æœºçš„åå­—(å³åŸŸå)ï¼Œå¹¶ä½¿ç”¨åˆ†å¸ƒå¼çš„åŸŸåç³»ç»ŸDNS DNSä½¿å¤§å¤šæ•°åŸŸåéƒ½åœ¨æœ¬åœ°è§£æï¼Œä»…å°‘é‡è§£æéœ€è¦åœ¨å› ç‰¹ç½‘ä¸Šé€šä¿¡ï¼Œå› æ­¤ç³»ç»Ÿæ•ˆç‡å¾ˆé«˜ã€‚ç”±äºDNSæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå³ä½¿å•ä¸ªè®¡ç®—æœºå‡ºäº†æ•…éšœï¼Œä¹Ÿä¸ä¼šå¦¨ç¢æ•´ä¸ªç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œ åŸŸåç»“æ„ å› ç‰¹ç½‘é‡‡ç”¨å±‚æ¬¡æ ‘çŠ¶ç»“æ„çš„åŸŸåç»“æ„ã€‚ åŸŸåçš„ç»“æ„ç”±è‹¥å¹²ä¸ªåˆ†é‡ç»„æˆï¼Œå„åˆ†é‡ä¹‹é—´ç”¨â€œç‚¹â€éš”å¼€ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçº§åˆ«çš„åŸŸåã€‚ â€¦ .ä¸‰çº§åŸŸå.äºŒçº§åŸŸå.é¡¶çº§åŸŸå ä¸€çº§çš„åŸŸåéƒ½ç”±è‹±æ–‡å­—æ¯å’Œæ•°å­—ç»„æˆï¼Œä¸è¶…è¿‡63ä¸ªå­—ç¬¦ï¼Œä¸åŒºåˆ†å¤§å°å†™å­—æ¯ã€‚ çº§åˆ«æœ€ä½çš„åŸŸåå†™åœ¨æœ€å·¦è¾¹ï¼Œè€Œçº§åˆ«æœ€é«˜çš„é¡¶çº§åŸŸåå†™åœ¨æœ€å³è¾¹ã€‚ å®Œæ•´çš„åŸŸåä¸è¶…è¿‡255ä¸ªå­—ç¬¦ã€‚ åŸŸåç³»ç»Ÿæ—¢ä¸è§„å®šä¸€ä¸ªåŸŸåéœ€è¦åŒ…å«å¤šå°‘ä¸ªä¸‹çº§åŸŸåï¼Œä¹Ÿä¸è§„å®šæ¯ä¸€çº§çš„åŸŸåä»£è¡¨ä»€ä¹ˆæ„æ€ å„çº§åŸŸåç”±å…¶ä¸Šä¸€çº§çš„åŸŸåç®¡ç†æœºæ„ç®¡ç†ï¼Œè€Œæœ€é«˜çš„é¡¶çº§åŸŸååˆ™ç”±å› ç‰¹ç½‘åç§°ä¸æ•°å­—åœ°å€åˆ†é…æœºæ„ICANNè¿›è¡Œç®¡ç† ã€ä¸¾ä¾‹ã€‘æ¹–å—ç§‘æŠ€å¤§å­¦ç½‘ç»œä¿¡æ¯ä¸­å¿ƒçš„åŸŸå nic.hnust.edu.cn cn : é¡¶çº§åŸŸåï¼Œè¡¨ç¤ºä¸­å›½ edu ï¼šåœ¨ cn å…¶ä¸‹æ³¨å†Œçš„äºŒçº§åŸŸåï¼Œè¡¨ç¤ºæ•™è‚²æœºæ„ hnust : edu ä¸‹æ³¨å†Œçš„ä¸‰çº§åŸŸåï¼Œè¡¨ç¤ºæ¹–å—ç§‘æŠ€å¤§å­¦ nic : è¯¥æ ¡è‡ªè¡Œç®¡ç†çš„å››çº§åŸŸåï¼Œè¡¨ç¤ºç½‘ç»œä¿¡æ¯ä¸­å¿ƒ åŸŸåå‘½ååˆ†ç±» é¡¶çº§åŸŸåTLD(Top Level Domain)åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»: å›½å®¶é¡¶çº§åŸŸånTLDï¼šé‡‡ç”¨IS0 3166çš„è§„å®šã€‚å¦‚cnè¡¨ç¤ºä¸­å›½ï¼Œusè¡¨ç¤ºç¾å›½ï¼Œukè¡¨ç¤ºè‹±å›½ã€ç­‰ç­‰ã€‚ é€šç”¨é¡¶çº§åŸŸågTLDï¼šæœ€å¸¸è§çš„é€šç”¨é¡¶çº§åŸŸåæœ‰ä¸ƒä¸ªï¼Œå³:com(å…¬å¸ä¼ä¸š)ã€net(ç½‘ç»œæœåŠ¡æœºedu(ç¾å›½æ•™è‚²ç»“æ„)ã€æ„)ã€org(éè¥åˆ©æ€§ç»„ç»‡)ã€int(å›½é™…ç»„ç»‡)ã€gov(ç¾å›½æ”¿åºœéƒ¨é—¨)ã€mil(ç¾å›½å†›äº‹éƒ¨é—¨) åå‘åŸŸarpa ï¼šç”¨äºåå‘åŸŸåè§£æï¼Œå³IPåœ°å€åå‘è§£æä¸ºåŸŸå åœ¨å›½å®¶é¡¶çº§åŸŸåä¸‹æ³¨å†Œçš„äºŒçº§åŸŸåå‡ç”±è¯¥å›½å®¶è‡ªè¡Œç¡®å®šã€‚ ä¾‹å¦‚ï¼Œé¡¶çº§åŸŸåä¸ºjpçš„æ—¥æœ¬ï¼Œå°†å…¶æ•™è‚²å’Œä¼ä¸šæœºæ„çš„äºŒçº§åŸŸåå®šä¸ºacå’Œcoï¼Œè€Œä¸ç”¨ edu å’Œ comã€‚ æˆ‘å›½åˆ™å°†äºŒçº§åŸŸååˆ’åˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»: ç±»åˆ«åŸŸåï¼šå…±7ä¸ª ac(ç§‘ç ”æœºæ„) com(å·¥ã€å•†ã€é‡‘èç­‰ä¼ä¸š) æ³¨æ„åŒºåˆ†ï¼šä¸é€šç”¨é¡¶çº§åŸŸåç»™TLDåŒºåˆ†ã€‚ edu(æ•™è‚²æœºæ„) gov(æ”¿åºœéƒ¨é—¨) net(æä¾›ç½‘ç»œæœåŠ¡çš„æœºæ„) mil(å†›äº‹æœºæ„) org(éè¥åˆ©æ€§ç»„ç»‡)ã€‚ è¡Œæ”¿åŒºåŸŸåå…±34ä¸ªï¼Œé€‚ç”¨äºæˆ‘å›½çš„å„çœã€è‡ªæ²»åŒºã€ç›´è¾–å¸‚ã€‚ ä¾‹å¦‚:bjä¸ºåŒ—äº¬å¸‚ã€shä¸ºä¸Šæµ·å¸‚jsä¸ºæ±Ÿè‹çœï¼Œç­‰ç­‰ã€‚ åŸŸåæœåŠ¡å™¨åŒºåˆ« åŸŸåå’ŒIPåœ°å€çš„æ˜ å°„å…³ç³»å¿…é¡»ä¿å­˜åœ¨åŸŸåæœåŠ¡å™¨ä¸­ï¼Œä¾›æ‰€æœ‰å…¶ä»–åº”ç”¨æŸ¥è¯¢ã€‚ æ˜¾ç„¶ä¸èƒ½å°†æ‰€æœ‰ä¿¡æ¯éƒ½å‚¨å­˜åœ¨ä¸€å°åŸŸåæœåŠ¡å™¨ä¸­ã€‚DNSä½¿ç”¨åˆ†å¸ƒåœ¨å„åœ°çš„åŸŸåæœåŠ¡å™¨æ¥å®ç°åŸŸååˆ°IPåœ°å€çš„è½¬æ¢ã€‚åŸŸåæœåŠ¡å™¨å¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å››ç§ä¸åŒçš„ç±»å‹: æ ¹åŸŸåæœåŠ¡å™¨ æ ¹åŸŸåæœåŠ¡å™¨æ˜¯æœ€é«˜å±‚æ¬¡çš„åŸŸåæœåŠ¡å™¨ã€‚æ¯ä¸ªæ ¹åŸŸåæœåŠ¡å™¨éƒ½çŸ¥é“æ‰€æœ‰çš„é¡¶çº§åŸŸåæœåŠ¡å™¨çš„åŸŸååŠå…¶IPåœ°å€ã€‚å› ç‰¹ç½‘ä¸Šå…±æœ‰13ä¸ªä¸åŒIPåœ°å€çš„æ ¹åŸŸåæœåŠ¡å™¨ã€‚å°½ç®¡æˆ‘ä»¬å°†è¿™13ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ä¸­çš„æ¯ä¸€ä¸ªéƒ½è§†ä¸ºå•ä¸ªçš„æœåŠ¡å™¨ï¼Œä½†â€œæ¯å°æœåŠ¡å™¨â€å®é™…ä¸Šæ˜¯ç”±è®¸å¤šåˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°çš„è®¡ç®—æœºæ„æˆçš„æœåŠ¡å™¨ç¾¤é›†ã€‚å½“æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨å‘å‡ºæŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œè·¯ç”±å™¨å°±æŠŠæŸ¥è¯¢è¯·æ±‚æŠ¥æ–‡è½¬å‘åˆ°ç¦»è¿™ä¸ªDNSå®¢æˆ·æœ€è¿‘çš„ä¸€ä¸ªæ ¹åŸŸåæœåŠ¡å™¨ã€‚è¿™å°±åŠ å¿«äº†DNSçš„æŸ¥è¯¢è¿‡ç¨‹ï¼ŒåŒæ—¶ä¹Ÿæ›´åˆç†åœ°åˆ©ç”¨äº†å› ç‰¹ç½‘çš„èµ„æºã€‚æ ¹åŸŸåæœåŠ¡å™¨é€šå¸¸å¹¶ä¸ç›´æ¥å¯¹åŸŸåè¿›è¡Œè§£æï¼Œè€Œæ˜¯è¿”å›è¯¥åŸŸåæ‰€å±é¡¶çº§åŸŸåçš„é¡¶çº§åŸŸåæœåŠ¡å™¨çš„IPåœ°å€ã€‚ é¡¶çº§åŸŸåæœåŠ¡å™¨è¿™äº›åŸŸåæœåŠ¡å™¨è´Ÿè´£ç®¡ç†åœ¨è¯¥é¡¶çº§åŸŸåæœåŠ¡å™¨æ³¨å†Œçš„æ‰€æœ‰äºŒçº§åŸŸåã€‚å½“æ”¶åˆ°DNSæŸ¥è¯¢è¯·æ±‚æ—¶å°±ç»™å‡ºç›¸åº”çš„å›ç­”(å¯èƒ½æ˜¯æœ€åçš„ç»“æœï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸‹ä¸€çº§æƒé™åŸŸåæœåŠ¡å™¨çš„IPåœ°å€)ã€‚ æƒé™åŸŸåæœåŠ¡å™¨è¿™äº›åŸŸåæœåŠ¡å™¨è´Ÿè´£ç®¡ç†æŸä¸ªåŒºçš„åŸŸåã€‚æ¯ä¸€ä¸ªä¸»æœºçš„åŸŸåéƒ½å¿…é¡»åœ¨æŸä¸ªæƒé™åŸŸåæœåŠ¡å™¨å¤„æ³¨å†Œç™»è®°ã€‚å› æ­¤æƒé™åŸŸåæœåŠ¡å™¨çŸ¥é“å…¶ç®¡è¾–çš„åŸŸåä¸IPåœ°å€çš„æ˜ å°„å…³ç³»ã€‚å¦å¤–ï¼Œæƒé™åŸŸåæœåŠ¡å™¨è¿˜çŸ¥é“å…¶ä¸‹çº§åŸŸåæœåŠ¡å™¨çš„åœ°å€ã€‚ æœ¬åœ°åŸŸåæœåŠ¡å™¨ æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸å±äºä¸Šè¿°çš„åŸŸåæœåŠ¡å™¨çš„ç­‰çº§ç»“æ„ã€‚å½“ä¸€ä¸ªä¸»æœºå‘å‡ºDNSè¯·æ±‚æŠ¥æ–‡æ—¶ï¼Œè¿™ä¸ªæŠ¥æ–‡å°±é¦–å…ˆè¢«é€å¾€è¯¥ä¸»æœºçš„æœ¬åœ°åŸŸåæœåŠ¡å™¨ã€‚**æœ¬åœ°åŸŸåæœåŠ¡å™¨èµ·ç€ä»£ç†çš„ä½œç”¨ï¼Œä¼šå°†è¯¥æŠ¥æ–‡è½¬å‘åˆ°ä¸Šè¿°çš„åŸŸåæœåŠ¡å™¨çš„ç­‰çº§ç»“æ„ä¸­ã€‚æ¯ä¸€ä¸ªå› ç‰¹ç½‘æœåŠ¡æä¾›è€…ISPï¼Œä¸€ä¸ªå¤§å­¦ï¼Œç”šè‡³ä¸ªå¤§å­¦é‡Œçš„å­¦é™¢ï¼Œéƒ½å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªæœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼Œå®ƒæœ‰æ—¶ä¹Ÿç§°ä¸ºé»˜è®¤åŸŸåæœåŠ¡å™¨ã€‚**æœ¬åœ°åŸŸåæœåŠ¡å™¨ç¦»ç”¨æˆ·è¾ƒè¿‘ï¼Œä¸€èˆ¬ä¸è¶…è¿‡å‡ ä¸ªè·¯ç”±å™¨çš„è·ç¦»ï¼Œä¹Ÿæœ‰å¯èƒ½å°±åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­ã€‚æœ¬åœ°åŸŸåæœåŠ¡å™¨çš„IPåœ°å€éœ€è¦ç›´æ¥é…ç½®åœ¨éœ€è¦åŸŸåè§£æçš„ä¸»æœºä¸­ã€‚ åŸŸåè§£æè¿‡ç¨‹ é€’å½’æŸ¥è¯¢ï¼šå¤§ç¯è·¯ï¼Œä»ä¸»æœºä¸Šè¯¢é—®æ—¶ï¼Œç”±è¯¢é—®æœåŠ¡å™¨ç»§ç»­å‘ä¸Šè¯¢é—®ï¼Œç›´åˆ°é¡¶çº§æœåŠ¡å™¨é€çº§å‘ä¸‹å›å¤ã€‚ è¿­ä»£æŸ¥è¯¢ï¼šå‘ä¸Šçº§è¯¢é—®åï¼Œè¢«è¯¢é—®æœåŠ¡å™¨è¿”å›IPåœ°å€åˆ°æœ¬çº§ï¼Œç”±æœ¬çº§æœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ã€‚ è´Ÿæ‹…å¤§ï¼šå› ä¸ºæ ¹åŸŸåæœåŠ¡å™¨è¦æœåŠ¡å¾ˆå¤šæœºå™¨ï¼Œç”¨é€’å½’æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ï¼Œä¿¡æ¯ä¼šæ»ç•™åœ¨æœåŠ¡å™¨ä¸­ç­‰å¾…ç»“æœï¼Œæ‰€ä»¥è´Ÿæ‹…å¤§ï¼Œæœ¬åœ°åŸŸåæœåŠ¡å™¨åªæœåŠ¡å°‘é‡è®¾å¤‡ã€‚ ä½¿ç”¨é€’å½’æŸ¥è¯¢ï¼Œæ ¹åŸŸåæ²¡æ”¶åˆ°é¡¶çº§åŸŸåæ¢å¤ï¼Œå¾—ä¸€ç›´listené¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œè¿­ä»£æŸ¥è¯¢è¿”å›ä¸€ä¸ªipæ ¹æœåŠ¡å™¨å°±æ²¡å•¥äº‹äº†ã€‚ æ³¨æ„ï¼š ä¸ºäº†æé«˜DNSçš„æŸ¥è¯¢æ•ˆç‡ï¼Œå¹¶å‡è½»æ ¹åŸŸåæœåŠ¡å™¨çš„è´Ÿè·å’Œå‡å°‘å› ç‰¹ç½‘ä¸Šçš„DNSæŸ¥è¯¢æŠ¥æ–‡æ•°é‡ï¼Œåœ¨åŸŸåæœåŠ¡å™¨ä¸­å¹¿æ³›åœ°ä½¿ç”¨äº†é«˜é€Ÿç¼“å­˜ã€‚é«˜é€Ÿç¼“å­˜ç”¨æ¥å­˜æ”¾æœ€è¿‘æŸ¥è¯¢è¿‡çš„åŸŸåä»¥åŠä»ä½•å¤„è·å¾—åŸŸåæ˜ å°„ä¿¡æ¯çš„è®°å½•ã€‚ ç”±äºåŸŸååˆ°IPåœ°å€çš„æ˜ å°„å…³ç³»å¹¶ä¸æ˜¯æ°¸ä¹…ä¸å˜ï¼Œä¸ºä¿æŒé«˜é€Ÿç¼“å­˜ä¸­çš„å†…å®¹æ­£ç¡®ï¼ŒåŸŸåæœåŠ¡å™¨åº”ä¸ºæ¯é¡¹å†…å®¹è®¾ç½®è®¡æ—¶å™¨å¹¶åˆ é™¤è¶…è¿‡åˆç†æ—¶é—´çš„é¡¹(ä¾‹å¦‚ï¼Œæ¯ä¸ªé¡¹ç›®åªå­˜æ”¾ä¸¤å¤©)ã€‚ ä¸ä½†åœ¨æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸­éœ€è¦é«˜é€Ÿç¼“å­˜ï¼Œåœ¨ç”¨æˆ·ä¸»æœºä¸­ä¹Ÿå¾ˆéœ€è¦ã€‚ è®¸å¤šç”¨æˆ·ä¸»æœºåœ¨å¯åŠ¨æ—¶ä»æœ¬åœ°åŸŸåæœåŠ¡å™¨ä¸‹è½½åŸŸåå’ŒIPåœ°å€çš„å…¨éƒ¨æ•°æ®åº“ï¼Œç»´æŠ¤å­˜æ”¾è‡ªå·±æœ€è¿‘ä½¿ç”¨çš„åŸŸåçš„é«˜é€Ÿç¼“å­˜ï¼Œå¹¶ä¸”åªåœ¨ä»ç¼“å­˜ä¸­æ‰¾ä¸åˆ°åŸŸåæ—¶æ‰å‘åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ã€‚åŒç†ï¼Œä¸»æœºä¹Ÿéœ€è¦ä¿æŒé«˜é€Ÿç¼“å­˜ä¸­å†…å®¹çš„æ­£ç¡®æ€§ã€‚ æ–‡ä»¶ä¼ é€åè®®FTP å°†æŸå°è®¡ç®—æœºä¸­çš„æ–‡ä»¶é€šè¿‡ç½‘ç»œä¼ é€åˆ°å¯èƒ½ç›¸è·å¾ˆè¿œçš„å¦ä¸€å°è®¡ç®—æœºä¸­ï¼Œæ˜¯ä¸€é¡¹åŸºæœ¬çš„ç½‘ç»œåº”ç”¨ï¼Œå³æ–‡ä»¶ä¼ é€ æ–‡ä»¶ä¼ é€åè®®FTP(File Transfer Protocol)æ˜¯å› ç‰¹ç½‘ä¸Šä½¿ç”¨å¾—æœ€å¹¿æ³›çš„æ–‡ä»¶ä¼ é€åè®®ã€‚ FTPæä¾›äº¤äº’å¼çš„è®¿é—®ï¼Œè¿è¡Œå®¢æˆ·æŒ‡æ˜æ–‡ä»¶çš„ç±»å‹ä¸æ ¼å¼(å¦‚æŒ‡æ˜æ˜¯å¦ä½¿ç”¨ASCIIç )ï¼Œå¹¶å…è®¸æ–‡ä»¶å…·æœ‰å­˜å–æƒé™(å¦‚è®¿é—®æ–‡ä»¶çš„ç”¨æˆ·å¿…é¡»ç»è¿‡æˆæƒï¼Œå¹¶è¾“å…¥æœ‰æ•ˆçš„å£ä»¤) FTPå±è”½äº†å„è®¡ç®—æœºç³»ç»Ÿçš„ç»†èŠ‚ï¼Œå› è€Œé€‚åˆäºåœ¨å¼‚æ„ç½‘ç»œä¸­ä»»æ„è®¡ç®—æœºä¹‹é—´ä¼ é€æ–‡ä»¶ åœ¨å› ç‰¹ç½‘å‘å±•çš„æ—©æœŸé˜¶æ®µï¼Œç”¨FTPä¼ é€æ–‡ä»¶çº¦å æ•´ä¸ªå› ç‰¹ç½‘çš„é€šä¿¡é‡çš„ä¸‰åˆ†ä¹‹ä¸€ï¼Œè€Œç”±ç”µå­é‚®ä»¶å’ŒåŸŸåç³»ç»Ÿæ‰€äº§ç”Ÿçš„é€šä¿¡é‡è¿˜è¦å°äºFTPæ‰€äº§ç”Ÿçš„é€šä¿¡é‡ã€‚åªæ˜¯åˆ°äº†1995å¹´ï¼Œä¸‡ç»´ç½‘WWWçš„é€šä¿¡é‡æ‰é¦–æ¬¡è¶…è¿‡äº†FTPã€‚ ä½¿ç”¨TCPä¼ è¾“ï¼ŒåŸºäºå®¢æˆ·â€”â€”â€”æœåŠ¡å™¨ï¼ˆCSï¼‰æ¨¡å‹è€Œè®¾è®¡çš„ï¼Œåªèƒ½æ˜¯CSç½‘ç»œé€šä¿¡æ–¹å¼ã€‚ FTPçš„å¸¸è§ç”¨é€”ï¼š åœ¨è®¡ç®—æœºä¹‹é—´ä¼ è¾“æ–‡ä»¶ï¼Œå°¤å…¶æ˜¯ç”¨äºæ‰¹é‡ä¼ è¾“æ–‡ä»¶ã€‚ è®©ç½‘ç«™è®¾è®¡è€…å°†æ„æˆç½‘ç«™å†…å®¹çš„å¤§é‡æ–‡ä»¶æ‰¹é‡ä¸Šä¼ åˆ°ä»–ä»¬çš„WebæœåŠ¡å™¨ å·¥ä½œåŸç† ä¸»åŠ¨æ¨¡å¼ï¼š è¿æ¥æ—¶ï¼ŒFTPå®¢æˆ·ä½¿ç”¨éšæœºé€‰æ‹©çš„ä¸´æ—¶ç«¯å£å·ç‡å…ˆå‘èµ·TCPè¿æ¥ï¼Œç›®çš„ç«¯å£æ˜¯FTPæœåŠ¡å™¨çš„21ç«¯å£å·ã€‚ é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹åï¼ŒæœåŠ¡å™¨åŒæ„è¿æ¥ã€‚åŒæ–¹æ„å»ºèµ·ç”¨äºä¼ é€æ§åˆ¶å‘½ä»¤çš„TCPè¿æ¥ã€‚ å³è¿™æ¡TCPè¿æ¥æ˜¯FTPå®¢æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´çš„å‘½ä»¤é€šé“ã€‚ æœ‰æ•°æ®è¦ä¼ è¾“æ—¶ï¼ŒFTPå®¢æˆ·é€šè¿‡å‘½ä»¤é€šé“å‘ŠçŸ¥FTPæœåŠ¡å™¨æ¥ä¸è‡ªå·±çš„å¦ä¸€ä¸ªä¸´æ—¶ç«¯å£å·å»ºç«‹TCPè¿æ¥ï¼Œå»ºç«‹æ•°æ®é€šé“ã€‚ æœåŠ¡å™¨çš„20ç«¯å£å·ï¼Œä¸ä½¿ç”¨å¦ä¸€ä¸ªéšæœºç«¯å£å·çš„FTPå®¢æˆ·ï¼Œå‘èµ·TCPè¿æ¥å»ºç«‹æ•°æ®é€šé“ã€‚ è¿™æ¡TCPè¿æ¥æ˜¯FTPå®¢æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®é€šé“ï¼Œç”¨äºä¼ é€æ–‡ä»¶ã€‚ ç”±äºå»ºç«‹æ•°æ®é€šé“æ—¶ï¼ŒFTPæœåŠ¡å™¨ä¸»åŠ¨è¿æ¥FTPå®¢æˆ·ï¼Œæ‰€ä»¥ç§°ä¸ºä¸»åŠ¨æ¨¡å¼ã€‚ æ³¨æ„ï¼š ç”¨äºä¼ é€æ§åˆ¶å‘½ä»¤çš„TCPè¿æ¥åœ¨æ•´ä¸ªä¼šè¯è¿‡ç¨‹éƒ½ä¿æŒå¼€å¯çŠ¶æ€ ç”¨äºä¼ é€æ•°æ®çš„TCPè¿æ¥åªä¼šåœ¨æœ‰æ•°æ®ä¼ é€æ—¶å¼€å¯ï¼Œæ•°æ®ç»“æŸä¼ é€åå°±å…³é—­ è¢«åŠ¨æ¨¡å¼ï¼š FTPæœåŠ¡å™¨ä¸FTPå®¢æˆ·ä¹‹é—´å‘½ä»¤é€šé“çš„å»ºç«‹ï¼Œä¸ä¸»åŠ¨æ¨¡å¼æ²¡ä»€ä¹ˆä¸åŒã€‚ ä¸åŒä¹‹å¤„åœ¨äºï¼šæœ‰æ•°æ®è¦ä¼ è¾“æ—¶ï¼ŒFTPå®¢æˆ·é€šè¿‡å‘½ä»¤é€šé“å‘ŠçŸ¥FTPæœåŠ¡å™¨å¼€å¯æŸä¸ªåå•†å¥½çš„ä¸´æ—¶ç«¯å£ï¼Œè¢«åŠ¨ç­‰å¾…TCPè¿æ¥ï¼Œå»ºç«‹æ•°æ®é€šé“ã€‚ ç”±äºå»ºç«‹æ•°æ®é€šé“æ—¶ï¼ŒFTPæœåŠ¡å™¨è¢«åŠ¨ç­‰å¾…FTPå®¢æˆ·çš„è¿æ¥ï¼Œå› æ­¤ç§°ä¸ºè¢«åŠ¨æ¨¡å¼ã€‚ ç”µå­é‚®ä»¶èƒŒæ™¯ï¼š ç”µå­é‚®ä»¶(E-mail)æ˜¯å› ç‰¹ç½‘ä¸Šæœ€æ—©æµè¡Œçš„ä¸€ç§åº”ç”¨ï¼Œå¹¶ä¸”ä»ç„¶æ˜¯å½“ä»Šå› ç‰¹ç½‘ä¸Šæœ€é‡è¦ã€æœ€å®ç”¨çš„åº”ç”¨ä¹‹ä¸€ã€‚ ä¼ ç»Ÿçš„ç”µè¯é€šä¿¡å±äºå®æ—¶é€šä¿¡ï¼Œå­˜åœ¨ä»¥ä¸‹ä¸¤ä¸ªç¼ºç‚¹: ç”µè¯é€šä¿¡çš„ä¸»å«å’Œè¢«å«åŒæ–¹å¿…é¡»åŒæ—¶åœ¨åœº; ä¸€äº›ä¸æ˜¯ååˆ†ç´§è¿«çš„ç”µè¯ä¹Ÿå¸¸å¸¸ä¸å¿…è¦åœ°æ‰“æ–­äººä»¬çš„å·¥ä½œæˆ–ä¼‘æ¯ã€‚ è€Œç”µå­é‚®ä»¶ä¸é‚®æ”¿ç³»ç»Ÿçš„å¯„ä¿¡ç›¸ä¼¼ã€‚â‘ )å‘ä»¶äººå°†é‚®ä»¶å‘é€åˆ°è‡ªå·±ä½¿ç”¨çš„é‚®ä»¶æœåŠ¡å™¨â‘¡)å‘ä»¶äººçš„é‚®ä»¶æœåŠ¡å™¨å°†æ”¶åˆ°çš„é‚®ä»¶æŒ‰å…¶ç›®çš„åœ°å€è½¬å‘åˆ°æ”¶ä»¶äººé‚®ä»¶æœåŠ¡å™¨ä¸­çš„æ”¶ä»¶äººé‚®ç®±â‘¢)æ”¶ä»¶äººåœ¨æ–¹ä¾¿çš„æ—¶å€™è®¿é—®æ”¶ä»¶äººé‚®ä»¶æœåŠ¡å™¨ä¸­è‡ªå·±çš„é‚®ç®±ï¼Œè·å–æ”¶åˆ°çš„ç”µå­é‚®ä»¶ã€‚ ç”µå­é‚®ä»¶ä½¿ç”¨æ–¹ä¾¿ã€ä¼ é€’è¿…é€Ÿè€Œä¸”è´¹ç”¨ä½å»‰ã€‚å®ƒä¸ä»…å¯ä»¥ä¼ é€æ–‡å­—ä¿¡æ¯ï¼Œè€Œä¸”è¿˜å¯é™„ä¸Šå£°éŸ³å’Œå›¾åƒã€‚ ç”±äºç”µå­é‚®ä»¶çš„å¹¿æ³›ä½¿ç”¨ï¼Œç°åœ¨è®¸å¤šå›½å®¶å·²ç»æ­£å¼å–æ¶ˆäº†ç”µæŠ¥ä¸šåŠ¡ã€‚åœ¨æˆ‘å›½ï¼Œç”µä¿¡å±€çš„ç”µæŠ¥ä¸šåŠ¡ä¹Ÿå› ç”µå­é‚®ä»¶çš„æ™®åŠè€Œæ¿’ä¸´æ¶ˆå¤±ã€‚ ç”µå­é‚®ä»¶ç³»ç»Ÿé‡‡ç”¨å®¢æˆ·æœåŠ¡å™¨æ–¹å¼ æ„æˆ ç”µå­é‚®ä»¶ç³»ç»Ÿçš„ä¸‰ä¸ªä¸»è¦ç»„æˆæ„ä»¶ï¼šç”¨æˆ·ä»£ç†ï¼Œé‚®ä»¶æœåŠ¡å™¨ï¼Œä»¥åŠç”µå­é‚®ä»¶æ‰€éœ€çš„åè®® ç”¨æˆ·ä»£ç†æ˜¯ç”¨æˆ·ä¸ç”µå­é‚®ä»¶ç³»ç»Ÿçš„æ¥å£ï¼Œåˆç§°ä¸ºç”µå­é‚®ä»¶å®¢æˆ·ç«¯è½¯ä»¶ é‚®ä»¶æœåŠ¡å™¨æ˜¯ç”µå­é‚®ä»¶ç³»ç»Ÿçš„åŸºç¡€è®¾æ–½ã€‚å› ç‰¹ç½‘ä¸Šæ‰€æœ‰çš„ISPéƒ½æœ‰é‚®ä»¶æœåŠ¡å™¨ï¼Œå…¶åŠŸèƒ½æ˜¯å‘é€å’Œæ¥æ”¶é‚®ä»¶ï¼ŒåŒæ—¶è¿˜è¦è´Ÿè´£ç»´æŠ¤ç”¨æˆ·çš„é‚®ç®± åè®®åŒ…æ‹¬é‚®ä»¶å‘é€åè®®(å¦‚SMTP)å’Œé‚®ä»¶è¯»å–åè®®(å¦‚POP3ï¼ŒIMAP) å·¥ä½œè¿‡ç¨‹ SMTPåè®® ç®€å•é‚®ä»¶å‘é€åè®®ï¼ˆSimple Mail Transfer Protocolï¼‰ å·¥ä½œåŸç† ä¿¡æ¯æ ¼å¼ ç”µå­é‚®ä»¶çš„ä¿¡æ¯æ ¼å¼å¹¶ä¸æ˜¯ç”±SMTPå®šä¹‰çš„ï¼Œè€Œæ˜¯åœ¨RFC822ä¸­å•ç‹¬å®šä¹‰çš„ã€‚è¿™ä¸ªRFCæ–‡æ¡£å·²åœ¨2008å¹´æ›´æ–°ä¸ºRFC 5322ã€‚ ä¸€ä¸ªç”µå­é‚®ä»¶æœ‰ä¿¡å°å’Œå†…å®¹ä¸¤éƒ¨åˆ†ã€‚è€Œå†…å®¹åˆç”±é¦–éƒ¨å’Œä¸»ä½“ä¸¤éƒ¨åˆ†æ„æˆã€‚ é¦–éƒ¨å’Œä¸»ä½“çš„ä¿¡æ¯éƒ½éœ€è¦ç”±ç”¨æˆ·æ¥å¡«å†™ã€‚ é¦–éƒ¨ä¸­åŒ…å«ä¸€äº›å…³é”®å­—ï¼Œåé¢åŠ ä¸Šå†’å·ã€‚ ä¾‹å¦‚ï¼š å…³é”®å­—FROM ï¼Œåé¢å¡«å…¥å‘ä»¶äººçš„ç”µå­é‚®ä»¶åœ°å€ï¼Œä¸€èˆ¬ç”±é‚®ä»¶ç³»ç»Ÿè‡ªåŠ¨å¡«å…¥ã€‚ å…³é”®å­—TOï¼Œåé¢å¡«å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ”¶ä»¶äººçš„ç”µå­é‚®ä»¶åœ°å€ã€‚ å…³é”®å­—Ccï¼Œåé¢å¡«å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ”¶ä»¶äººä»¥å¤–çš„æŠ„é€äººçš„ç”µå­é‚®ä»¶åœ°å€ï¼Œ æŠ„é€äººæ”¶åˆ°é‚®ä»¶åå¯çœ‹å¯ä¸çœ‹é‚®ä»¶ï¼Œå¯å›å¯ä¸å› å…³é”®å­— Subjectï¼Œåé¢å¡«å…¥é‚®ä»¶ä¸»é¢˜ï¼Œåæ˜ äº†é‚®ä»¶ä¸»è¦å†…å®¹ã€‚ Toå’ŒSubjectæœ€é‡è¦ï¼Œå¾€å¾€æ˜¯å¿…å¡«å†…å®¹ã€‚ é‚®ä»¶ç³»ç»Ÿå°†è‡ªåŠ¨åœ°å°†ä¿¡å°æ‰€éœ€çš„ä¿¡æ¯æå–å‡ºæ¥å¹¶å†™åœ¨ä¿¡å°ä¸Šï¼Œæ‰€ä»¥ç”¨æˆ·ä¸éœ€è¦å¡«å†™ç”µå­é‚®ä»¶ä¿¡å°ä¸Šçš„ä¿¡æ¯ã€‚ ç”¨æˆ·è¿˜éœ€æ’°å†™é‚®ä»¶çš„ä¸»ä½“éƒ¨åˆ†ã€‚è¿™æ˜¯æ­£æ–‡æ ¸å¿ƒä¿¡æ¯ã€‚ ç‰¹ç‚¹ï¼š SMTPåè®®åªèƒ½ä¼ é€ASCIIç æ–‡æœ¬æ•°æ®ï¼Œä¸èƒ½ä¼ é€å¯æ‰§è¡Œæ–‡ä»¶æˆ–å…¶ä»–çš„äºŒè¿›åˆ¶å¯¹è±¡ã€‚ æ³¨æ„ï¼šASCIIç ä¸€å…±åªæœ‰ä¸ƒæ¯”ç‰¹ã€‚ ASCIIç ä½¿ç”¨7ä¸ªæ¯”ç‰¹ä½(bit)è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦,å› æ­¤å®ƒçš„ç¼–ç èŒƒå›´æ˜¯0-127,å…±128ä¸ªå­—ç¬¦ã€‚ SMTPä¸èƒ½æ»¡è¶³ä¼ é€å¤šåª’ä½“é‚®ä»¶(ä¾‹å¦‚å¸¦æœ‰å›¾ç‰‡ã€éŸ³é¢‘æˆ–è§†é¢‘æ•°æ®)çš„éœ€è¦ã€‚å¹¶ä¸”è®¸å¤šå…¶ä»–éè‹±è¯­å›½å®¶çš„æ–‡å­—(ä¾‹å¦‚ä¸­æ–‡ã€ä¿„æ–‡ã€ç”šè‡³å¸¦æœ‰é‡éŸ³ç¬¦å·çš„æ³•æ–‡æˆ–å¾·æ–‡)ä¹Ÿæ— æ³•ç”¨SMTPä¼ é€ã€‚ ä¸ºè§£å†³SMTPä¼ é€éASCIç æ–‡æœ¬çš„é—®é¢˜ï¼Œæå‡ºäº†å¤šç”¨é€”å› ç‰¹ç½‘é‚®ä»¶æ‰©å±•MIME(Multipurpose Intemet Mail Extensions) SMTPçš„è½¬å‘è¿‡ç¨‹éœ€è¦MIMEçš„è½¬æ¢ä¸é€†è½¬æ¢ã€‚ å¢åŠ äº†5ä¸ªæ–°çš„é‚®ä»¶é¦–éƒ¨å­—æ®µï¼Œè¿™äº›å­—æ®µæä¾›äº†æœ‰å…³é‚®ä»¶ä¸»ä½“çš„ä¿¡æ¯ã€‚ å®šä¹‰äº†è®¸å¤šé‚®ä»¶å†…å®¹çš„æ ¼å¼ï¼Œå¯¹å¤šåª’ä½“ç”µå­é‚®ä»¶çš„è¡¨ç¤ºæ–¹æ³•è¿›è¡Œäº†æ ‡å‡†åŒ–ã€‚ å®šä¹‰äº†ä¼ é€ç¼–ç ï¼Œå¯å¯¹ä»»ä½•å†…å®¹æ ¼å¼è¿›è¡Œè½¬æ¢ï¼Œè€Œä¸ä¼šè¢«é‚®ä»¶ç³»ç»Ÿæ”¹å˜ã€‚ å®é™…ä¸Šï¼ŒMIMEä¸ä»…ä»…ç”¨äºSMTPï¼Œä¹Ÿç”¨äºåæ¥çš„åŒæ ·é¢å‘ASCIIå­—ç¬¦çš„HTTPã€‚ **é‚®ä»¶è¯»å–åè®®(POP)**IMAPå¸¸ç”¨çš„é‚®ä»¶è¯»å–åè®®æœ‰ä»¥ä¸‹ä¸¤ä¸ª: é‚®å±€åè®®POP(Post Office Protocol)ï¼ŒPOP3æ˜¯å…¶ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ç‰¹ç½‘æ­£å¼æ ‡å‡†ã€‚ éå¸¸ç®€å•ã€åŠŸèƒ½æœ‰é™çš„é‚®ä»¶è¯»å–åè®®ã€‚ç”¨æˆ·åªèƒ½ä»¥ä¸‹è½½å¹¶åˆ é™¤æ–¹å¼æˆ–ä¸‹è½½å¹¶ä¿ç•™æ–¹å¼ä»é‚®ä»¶æœåŠ¡å™¨ä¸‹è½½é‚®ä»¶åˆ°ç”¨æˆ·æ–¹è®¡ç®—æœºã€‚ä¸å…è®¸ç”¨æˆ·åœ¨é‚®ä»¶æœåŠ¡å™¨ä¸Šç®¡ç†è‡ªå·±çš„é‚®ä»¶ã€‚(ä¾‹å¦‚åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¯¹é‚®ä»¶è¿›è¡Œåˆ†ç±»ç®¡ç†ç­‰)ã€‚ å› ç‰¹ç½‘é‚®ä»¶è®¿é—®åè®®IMAP(InteretMessage AccessProtocol)ï¼ŒIMAP4æ˜¯å…¶ç¬¬å››ä¸ªç‰ˆæœ¬ï¼Œç›®å‰è¿˜åªæ˜¯å› ç‰¹ç½‘å»ºè®®æ ‡å‡†ã€‚ IMAP4æ˜¯åŠŸèƒ½æ¯”POP3å¼ºå¤§çš„é‚®ä»¶è¯»å–åè®®ã€‚ç”¨æˆ·åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šå°±å¯ä»¥æ“æ§é‚®ä»¶æœåŠ¡å™¨ä¸­çš„é‚®ç®±ï¼Œå°±åƒåœ¨æœ¬åœ°æ“æ§ä¸€æ ·ï¼Œå› æ­¤IMAPæ˜¯ä¸€ä¸ªè”æœºåè®®ã€‚ POP3å’ŒIMAP4éƒ½é‡‡ç”¨åŸºäºTCPè¿æ¥çš„å®¢æˆ·æœåŠ¡å™¨æ–¹å¼ã€‚POP3ä½¿ç”¨ç†ŸçŸ¥ç«¯å£110ï¼ŒIMAP4ä½¿ç”¨ç†ŸçŸ¥ç«¯å£143ã€‚ åŸºäºä¸‡ç»´ç½‘çš„ç”µå­é‚®ä»¶ é€šè¿‡æµè§ˆå™¨ç™»å½•(æä¾›ç”¨æˆ·åå’Œå£ä»¤)é‚®ä»¶æœåŠ¡å™¨ä¸‡ç»´ç½‘ç½‘ç«™å°±å¯ä»¥æ’°å†™ã€æ”¶å‘ã€é˜…è¯»å’Œç®¡ç†ç”µå­é‚®ä»¶ã€‚è¿™ç§å·¥ä½œæ¨¡å¼ä¸IMAPå¾ˆç±»ä¼¼ï¼Œä¸åŒçš„æ˜¯ç”¨æˆ·è®¡ç®—æœºæ— éœ€å®‰è£…ä¸“é—¨çš„ç”¨æˆ·ä»£ç†ç¨‹åºï¼Œåªéœ€è¦ä½¿ç”¨é€šç”¨çš„ä¸‡ç»´ç½‘æµè§ˆå™¨ã€‚ é‚®ä»¶æœåŠ¡å™¨ç½‘ç«™é€šå¸¸éƒ½æä¾›éå¸¸å¼ºå¤§å’Œæ–¹ä¾¿çš„é‚®ä»¶ç®¡ç†åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥åœ¨é‚®ä»¶æœåŠ¡å™¨ç½‘ç«™ä¸Šç®¡ç†å’Œå¤„ç†è‡ªå·±çš„é‚®ä»¶ï¼Œè€Œä¸éœ€è¦å°†é‚®ä»¶ä¸‹è½½åˆ°æœ¬åœ°è¿›è¡Œç®¡ç†ã€‚ ä¸‡ç»´ç½‘WWW ä¸‡ç»´ç½‘å¹¶éæŸç§ç‰¹æ®Šçš„è®¡ç®—æœºç½‘ç»œã€‚å®ƒæ˜¯ä¸€ä¸ªå¤§è§„æ¨¡çš„ã€è”æœºå¼çš„ä¿¡æ¯å‚¨è—æ‰€ï¼Œæ˜¯è¿è¡Œåœ¨å› ç‰¹ç½‘ä¸Šçš„ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨ ä¸‡ç»´ç½‘åˆ©ç”¨ç½‘é¡µä¹‹é—´çš„è¶…é“¾æ¥å°†ä¸åŒç½‘ç«™çš„ç½‘é¡µé“¾æ¥æˆä¸€å¼ é€»è¾‘ä¸Šçš„ä¿¡æ¯ç½‘ æµè§ˆå™¨æœ€é‡è¦çš„éƒ¨åˆ†æ˜¯æ¸²æŸ“å¼•æ“ï¼Œä¹Ÿå°±æ˜¯æµè§ˆå™¨å†…æ ¸ã€‚è´Ÿè´£å¯¹ç½‘é¡µå†…å®¹è¿›è¡Œè§£æå’Œæ˜¾ç¤º ä¸åŒçš„æµè§ˆå™¨å†…æ ¸å¯¹ç½‘é¡µå†…å®¹çš„è§£æä¹Ÿæœ‰ä¸åŒï¼Œå› æ­¤åŒä¸€ç½‘é¡µåœ¨ä¸åŒå†…æ ¸çš„æµè§ˆå™¨é‡Œæ˜¾ç¤ºçš„æ•ˆæœå¯èƒ½ä¸åŒ ç½‘é¡µç¼–å†™è€…éœ€è¦åœ¨ä¸åŒå†…æ ¸çš„æµè§ˆå™¨ä¸­æµ‹è¯•ç½‘é¡µæ˜¾ç¤ºæ•ˆæœ ä¸ºäº†æ–¹ä¾¿åœ°è®¿é—®åœ¨ä¸–ç•ŒèŒƒå›´çš„æ–‡æ¡£ï¼Œä¸‡ç»´ç½‘ä½¿ç”¨**ç»Ÿä¸€èµ„æºå®šä½ç¬¦URL**æ¥æŒ‡æ˜å› ç‰¹ç½‘ä¸Šä»»ä½•ç§ç±»â€èµ„æºâ€çš„ä½ç½® URLçš„ä¸€èˆ¬å½¢å¼ç”±ä»¥ä¸‹å››ä¸ªéƒ¨åˆ†ç»„æˆ åè®®://ä¸»æœº:ç«¯å£/è·¯å¾„ ä¸¾ä¾‹ï¼šhttp://www.hnust.cn:80/index.htm åœ¨åŒä¸€ç½‘ç«™ä¸‹åˆ‡æ¢ä¸åŒç½‘é¡µæ—¶ï¼Œåè®®ã€ä¸»æœºå’Œç«¯å£ä¸ç½‘ç«™é¦–é¡µç›¸åŒ,ä¸åŒçš„æ˜¯è·¯å¾„å’Œç½‘é¡µæ–‡ä»¶ã€‚ HTML : è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€HTML(HyperText Markup Language) ä½œç”¨ï¼šä½¿ç”¨å¤šç§â€œæ ‡ç­¾â€æ¥æè¿°ç½‘é¡µçš„ç»“æ„å’Œå†…å®¹ CSS : å±‚å æ ·å¼è¡¨CSS(Cascading Style Sheets) ä½œç”¨ï¼šä»å®¡ç¾çš„è§’åº¦æ¥æè¿°ç½‘é¡µçš„æ ·å¼ã€‚ JavaScript ï¼šä¸€ç§è„šæœ¬è¯­è¨€(å’ŒJavaæ²¡æœ‰ä»»ä½•å…³ç³») ä½œç”¨ï¼šæ§åˆ¶ç½‘é¡µçš„è¡Œä¸º ç”±HTMLã€CSSã€JavaScriptç¼–å†™çš„ä¸‡ç»´ç½‘æ–‡æ¡£ , ç”±æµè§ˆå™¨å†…æ ¸è´Ÿè´£è§£æ ‡å’Œæ¸²æŸ“ã€‚ è¶…æ–‡æœ¬ä¼ è¾“åè®®HTTP HTTP(HyperText Markup Language)å®šä¹‰äº†æµè§ˆå™¨(å³ä¸‡ç»´ç½‘è¿›ç¨‹)æ€æ ·å‘ä¸‡ç»´ç½‘æœåŠ¡å™¨è¯·æ±‚ä¸‡ç»´ç½‘æ–‡æ¡£ï¼Œä»¥åŠä¸‡ç»´ç½‘æœåŠ¡å™¨æ€æ ·æŠŠä¸‡ç»´ç½‘æ–‡æ¡£ä¼ é€ç»™æµè§ˆå™¨ã€‚ HTTP1.0é‡‡ç”¨éæŒç»­è¿æ¥æ–¹å¼ã€‚åœ¨è¯¥æ–¹å¼ä¸‹ï¼Œæ¯æ¬¡æµè§ˆå™¨è¦è¯·æ±‚ä¸€ä¸ªæ–‡ä»¶éƒ½è¦ä¸æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥å½“æ”¶åˆ°å“åº”åå°±ç«‹å³å…³é—­è¿æ¥ã€‚ æ¯è¯·æ±‚ä¸€ä¸ªæ–‡æ¡£å°±è¦æœ‰ä¸¤å€çš„RTTçš„å¼€é”€ã€‚è‹¥ä¸€ä¸ªç½‘é¡µä¸Šæœ‰å¾ˆå¤šå¼•ç”¨å¯¹è±¡(ä¾‹å¦‚å›¾ç‰‡ç­‰)ï¼Œé‚£ä¹ˆè¯·æ±‚æ¯ä¸€ä¸ªå¯¹è±¡éƒ½éœ€è¦èŠ±è´¹2RTTçš„æ—¶é—´ã€‚ ä¸ºäº†å‡å°æ—¶å»¶ï¼Œæµè§ˆå™¨é€šå¸¸ä¼šå»ºç«‹å¤šä¸ªå¹¶è¡Œçš„TCPè¿æ¥åŒæ—¶è¯·æ±‚å¤šä¸ªå¯¹è±¡ã€‚ä½†æ˜¯ï¼Œè¿™ä¼šå¤§é‡å ç”¨ä¸‡ç»´ç½‘æœåŠ¡å™¨çš„èµ„æºï¼Œç‰¹åˆ«æ˜¯ä¸‡ç»´ç½‘æœåŠ¡å™¨å¾€å¾€è¦åŒæ—¶æœåŠ¡äºå¤§é‡å®¢æˆ·çš„è¯·æ±‚ï¼Œè¿™ä¼šä½¿å…¶è´Ÿæ‹…å¾ˆé‡ã€‚ HTTP1.1é‡‡ç”¨æŒç»­è¿æ¥æ–¹å¼ã€‚ åœ¨è¯¥æ–¹å¼ä¸‹ï¼Œä¸‡ç»´ç½‘æœåŠ¡å™¨åœ¨å‘é€å“åº”åä»ç„¶ä¿æŒè¿™æ¡è¿æ¥ï¼Œä½¿åŒä¸€ä¸ªå®¢æˆ·(æµè§ˆå™¨)å’Œè¯¥æœåŠ¡å™¨å¯ä»¥ç»§ç»­åœ¨è¿™æ¡è¿æ¥ä¸Šä¼ é€åç»­çš„HTTPè¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ã€‚ è¿™å¹¶ä¸å±€é™äºä¼ é€åŒä¸€ä¸ªé¡µé¢ä¸Šå¼•ç”¨çš„å¯¹è±¡ï¼Œè€Œæ˜¯åªè¦è¿™äº›æ–‡æ¡£éƒ½åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šå°±è¡Œã€‚ ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ•ˆç‡ï¼ŒHTTP1.1çš„æŒç»­è¿æ¥è¿˜å¯ä»¥ä½¿ç”¨æµæ°´çº¿æ–¹å¼å·¥ä½œï¼Œå³æµè§ˆå™¨åœ¨æ”¶åˆ°HTTPçš„å“åº”æŠ¥æ–‡ä¹‹å‰å°±èƒ½å¤Ÿè¿ç»­å‘é€å¤šä¸ªè¯·æ±‚æŠ¥æ–‡ã€‚è¿™æ ·çš„ä¸€ä¸ªæ¥ä¸€ä¸ªçš„è¯·æ±‚æŠ¥æ–‡åˆ°è¾¾æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨å°±å‘å›ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å“åº”æŠ¥æ–‡ã€‚è¿™æ ·å°±èŠ‚çœäº†å¾ˆå¤šä¸ªRTTæ—¶é—´ï¼Œä½¿TCPè¿æ¥ä¸­çš„ç©ºé—²æ—¶é—´å‡å°‘ï¼Œæé«˜äº†ä¸‹è½½æ–‡æ¡£çš„æ•ˆç‡ã€‚ HTTPæ˜¯é¢å‘æ–‡æœ¬çš„ï¼Œå…¶æŠ¥æ–‡ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½æ˜¯ä¸€äº›ASCIIç ä¸²ï¼Œå¹¶ä¸”æ¯ä¸ªå­—æ®µçš„é•¿åº¦éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚ HTTPè¯·æ±‚æŠ¥æ–‡ HTTPæŠ¥æ–‡æ”¯æŒä»¥ä¸‹æ–¹æ³•ï¼š HTTPå“åº”æŠ¥æ–‡ æ”¯æŒçš„çŠ¶æ€ç ï¼š ä¸€èˆ¬æ¥è¯´ï¼Œæµè§ˆå™¨å¹¶ä¸ä¼šç›´æ¥æ˜¾ç¤ºå‡ºæœåŠ¡å™¨å‘é€æ¥çš„è¿™äº›çŠ¶æ€è¡Œä¿¡æ¯ï¼Œè€Œæ˜¯æœ‰æ›´å‹å¥½çš„ç•Œé¢ã€‚ ä¾‹å¦‚æµè§ˆå™¨è¿æ¥è¶…å¸‚æˆ–æ‰¾ä¸åˆ°é¡µé¢æ˜¾ç¤ºçš„ä¸€äº›çŠ¶æ€ä¿¡æ¯ã€‚ å…¶èƒŒåçš„æœ¬è´¨æ˜¯æµè§ˆå™¨æ”¶åˆ°äº†åŒ…å«è¿™æ¡çŠ¶æ€è¡Œçš„å“åº”æŠ¥æ–‡ Cookieä½¿ç”¨Cookieåœ¨æœåŠ¡å™¨ä¸Šè®°å½•ç”¨æˆ·ä¿¡æ¯ æ—©æœŸçš„ä¸‡ç»´ç½‘åº”ç”¨éå¸¸ç®€å•ï¼Œä»…ä»…æ˜¯ç”¨æˆ·æŸ¥çœ‹å­˜æ”¾åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šçš„å„ç§é™æ€çš„æ–‡æ¡£ã€‚å› æ­¤HTTPè¢«è®¾è®¡ä¸º-ç§æ— çŠ¶æ€çš„åè®®ã€‚è¿™æ ·å¯ä»¥ç®€åŒ–æœåŠ¡å™¨çš„è®¾è®¡ã€‚ ç°åœ¨ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ä¸‡ç»´ç½‘å®ç°å„ç§å¤æ‚çš„åº”ç”¨ï¼Œå¦‚ç½‘ä¸Šè´­ç‰©ã€ç”µå­å•†åŠ¡ç­‰ã€‚è¿™äº›åº”ç”¨å¾€å¾€éœ€è¦ä¸‡ç»´ç½‘æœåŠ¡å™¨èƒ½å¤Ÿè¯†åˆ«ç”¨æˆ·ã€‚ Cookieæä¾›äº†ä¸€ç§æœºåˆ¶ä½¿å¾—ä¸‡ç»´ç½‘æœåŠ¡å™¨èƒ½å¤Ÿâ€è®°ä½â€ç”¨æˆ·ï¼Œè€Œæ— éœ€ç”¨æˆ·ä¸»åŠ¨æä¾›ç”¨æˆ·æ ‡è¯†ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCookieæ˜¯ä¸€ç§å¯¹æ— çŠ¶æ€çš„HTTPè¿›è¡ŒçŠ¶æ€åŒ–çš„æŠ€æœ¯ å·¥ä½œåŸç† ç”¨æˆ·ä¸»æœºä¸­çš„æµè§ˆå™¨è¿›ç¨‹ï¼Œé¦–å…ˆä¸ä¸‡ç»´ç½‘æœåŠ¡å™¨ä¸­çš„æœåŠ¡å™¨è¿›ç¨‹å»ºç«‹TCPè¿æ¥ã€‚ å½“ç”¨æˆ·çš„æµè§ˆå™¨è¿›ç¨‹åˆæ¬¡å‘æœåŠ¡å™¨è¿›ç¨‹å‘é€HTTPè¯·æ±‚æŠ¥æ–‡æ—¶ï¼ŒæœåŠ¡å™¨è¿›ç¨‹å°±ä¼šä¸ºå…¶äº§ç”Ÿä¸€ä¸ªå”¯ä¸€çš„Cookieè¯†åˆ«ç ã€‚å¹¶ä»¥æ­¤ä¸ºç´¢å¼•åœ¨æœåŠ¡å™¨çš„åç«¯æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç”¨æ¥è®°å½•è¯¥ç”¨æˆ·è®¿é—®è¯¥ç½‘ç«™çš„å„ç§ä¿¡æ¯ã€‚ æ¥ç€æœåŠ¡å™¨å‘å›HTTPå“åº”æŠ¥æ–‡ã€‚ å½“æµè§ˆå™¨è¿›ç¨‹æ”¶åˆ°è¯¥å“åº”æŠ¥æ–‡åï¼Œå°±åœ¨ä¸€ä¸ªç‰¹å®šçš„Cookieæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼Œè®°å½•è¯¥æœåŠ¡å™¨çš„åŸŸåå’ŒCookieè¯†åˆ«ç ã€‚ å½“ç”¨æˆ·å†æ¬¡ä½¿ç”¨è¯¥æµè§ˆå™¨è®¿é—®è¿™ä¸ªç½‘ç«™æ—¶ï¼Œæ¯å‘é€ä¸€ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ï¼Œæµè§ˆå™¨éƒ½ä¼šä»Cookieæ–‡ä»¶ä¸­è¯»å–è¯¥ç½‘ç«™çš„Cookieè¯†åˆ«ç ï¼Œå¹¶æ”¾åˆ°HTTPè¯·æ±‚æŠ¥æ–‡çš„Cookieé¦–éƒ¨è¡Œä¸­ã€‚æœåŠ¡å™¨æ ¹æ®Cookieè¯†åˆ«ç å°±å¯ä»¥è¯†åˆ«å‡ºè¯¥ç”¨æˆ·ï¼Œå¹¶è¿”å›è¯¥ç”¨æˆ·çš„ä¸ªæ€§åŒ–ç½‘é¡µã€‚ åœ¨å“åº”æŠ¥æ–‡ä¸­ï¼ŒåŒ…å«æœ‰ä¸€ä¸ªé¦–éƒ¨å­—æ®µä¸ºSet-Cookieçš„é¦–éƒ¨è¡Œ,è¯¥å­—æ®µçš„å–å€¼å°±æ˜¯Cookieè¯†åˆ«ç . ä¸‡ç»´ç½‘ç¼“å†²ä¸ä»£ç†æœåŠ¡å™¨ åœ¨ä¸‡ç»´ç½‘ä¸­è¿˜å¯ä»¥ä½¿ç”¨ç¼“å­˜æœºåˆ¶ä»¥æé«˜ä¸‡ç»´ç½‘çš„æ•ˆç‡ã€‚ ä¸‡ç»´ç½‘ç¼“å­˜åˆç§°ä¸ºWebç¼“å­˜(WebCache)ï¼Œå¯ä½äºå®¢æˆ·æœºï¼Œä¹Ÿå¯ä½äºä¸­é—´ç³»ç»Ÿä¸Šï¼Œä½äºä¸­é—´ç³»ç»Ÿä¸Šçš„Webç¼“å­˜åˆç§°ä¸ºä»£ç†æœåŠ¡å™¨(ProxyServer)ã€‚ Webç¼“å­˜æŠŠæœ€è¿‘çš„ä¸€äº›è¯·æ±‚å’Œå“åº”æš‚å­˜åœ¨æœ¬åœ°ç£ç›˜ä¸­ã€‚å½“æ–°è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œè‹¥å‘ç°è¿™ä¸ªè¯·æ±‚ä¸æš‚æ—¶å­˜æ”¾çš„è¯·æ±‚ç›¸åŒï¼Œå°±è¿”å›æš‚å­˜çš„å“åº”ï¼Œè€Œä¸éœ€è¦æŒ‰URLçš„åœ°å€å†æ¬¡å»å› ç‰¹ç½‘è®¿é—®è¯¥èµ„æºã€‚ å·¥ä½œè¿‡ç¨‹ï¼š æ ¡å›­ç½‘ä¸­æŸå°ä¸»æœºè®¿é—®å› ç‰¹ç½‘ä¸ŠåŸå§‹æœåŠ¡å™¨ï¼Œå…ˆå‘æ ¡å›­ç½‘é‡Œçš„ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚ è‹¥ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜é‡Œæœ‰è¯·æ±‚å¯¹è±¡ï¼Œ åˆ™å‘å›åŒ…å«è¯¥è¯·æ±‚å¯¹è±¡çš„å“åº”ã€‚ æ²¡æœ‰çš„è¯ï¼Œåˆ™ä»£ç†æœåŠ¡å™¨ä¼šå‘å› ç‰¹ç½‘ä¸Šçš„åŸå§‹æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚ åŸå§‹æœåŠ¡å™¨å°†åŒ…å«æœ‰æ‰€è¯·æ±‚å¯¹è±¡çš„å“åº”å‘å›ç»™ä»£ç†æœåŠ¡å™¨ï¼Œä»£ç†æœåŠ¡å™¨å°†è¯¥å“åº”å­˜å…¥Webç¼“å­˜ï¼Œç„¶åç»™ä¸»æœºå‘å›è¯¥å“åº”ã€‚ è‹¥Webç¼“å­˜çš„å‘½ä¸­ç‡æ¯”è¾ƒé«˜,å¤§å¤§å‡å°‘äº†è¯¥é“¾è·¯ä¸Šçš„é€šä¿¡é‡å› è€Œå‡å°‘äº†è®¿é—®å› ç‰¹ç½‘çš„æ—¶å»¶ã€‚ é—®é¢˜ï¼š å¦‚æœæœ¬åœ°ç£ç›˜æˆ–ä¸­é—´ç³»ç»Ÿä¸Šçš„çš„Webç¼“å­˜å‰¯æœ¬ï¼Œå’Œå› ç‰¹ç½‘æœåŠ¡å™¨ï¼ˆåŸå§‹æœåŠ¡å™¨ï¼‰ä¸­çš„ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œè¯¥å¦‚ä½•æ›´æ–°ï¼Ÿ å›ç­”ï¼š åŸå§‹æœåŠ¡å™¨é€šå¸¸ä¼šä¸ºæ¯ä¸ªå“åº”çš„å¯¹è±¡è®¾å®šä¸€ä¸ªä¿®æ”¹æ—¶é—´å­—æ®µå’Œä¸€ä¸ªæœ‰æ•ˆæ—¥æœŸå­—æ®µã€‚ åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å«æœ‰ä¸€ä¸ªé¦–éƒ¨å­—æ®µä¸ºlf-modified-sinceçš„é¦–éƒ¨è¡Œï¼Œè¯¥å­—æ®µçš„å–å€¼å°±æ˜¯è¯¥æ–‡æ¡£çš„ä¿®æ”¹æ—¥æœŸã€‚ å½“æ ¡å›­ç½‘ä¸­çš„æŸå°ä¸»æœºè¦è¯·æ±‚åŸå§‹æœåŠ¡å™¨ä¸­çš„è¯¥æ–‡æ¡£æ—¶ï¼Œå®ƒé¦–å…ˆå‘æ ¡å›­ç½‘ä¸­çš„ä»£ç†æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼› è‹¥ä»£ç†æœåŠ¡å™¨ä¸­çš„è¯¥æ–‡æ¡£æœªè¿‡æœŸï¼Œåˆ™ä»£ç†æœåŠ¡å™¨å°†å…¶å°è£…åœ¨å“åº”æŠ¥æ–‡ä¸­å‘å›ç»™ä¸»æœºã€‚ è‹¥ä»£ç†æœåŠ¡å™¨ä¸­çš„è¯¥æ–‡æ¡£å·²è¿‡æœŸï¼Œåˆ™ä»£ç†æœåŠ¡å™¨ä¼šå‘å› ç‰¹ç½‘ä¸Šçš„åŸå§‹æœåŠ¡å™¨å‘é€è¯·æ±‚ã€‚ åŸå§‹æœåŠ¡å™¨æ ¹æ®è¯¥æ–‡æ¡£çš„ä¿®æ”¹æ—¥æœŸï¼Œå°±å¯åˆ¤æ–­å‡ºä»£ç†æœåŠ¡å™¨ä¸­å­˜å‚¨çš„è¯¥æ–‡æ¡£æ˜¯å¦ä¸è‡ªå·±å­˜å‚¨çš„è¯¥æ–‡æ¡£ä¸€è‡´ã€‚ å¦‚æœä¸€è‡´ï¼Œåˆ™ç»™ä»£ç†æœåŠ¡å™¨å‘é€ä¸åŒ…å«å®ä½“ä¸»ä½“çš„å“åº”ï¼ŒçŠ¶æ€ç ä¸º304ï¼ŒçŸ­è¯­ä¸ºNot Modified; ä»£ç†æœåŠ¡å™¨é‡æ–°æ›´æ–°è¯¥æ–‡æ¡£çš„æœ‰æ•ˆæ—¥æœŸï¼Œç„¶åå°†è¯¥æ–‡æ¡£å°è£…åœ¨å“åº”æŠ¥æ–‡ä¸­å‘å›ç»™ä¸»æœºã€‚ å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™ç»™ä»£ç†æœåŠ¡å™¨å‘é€å°è£…æœ‰è¯¥æ–‡æ¡£çš„å“åº”æŠ¥æ–‡ï¼Œè¿™æ ·ä»£ç†æœåŠ¡å™¨å°±æ›´æ–°äº†è¯¥æ–‡æ¡£ï¼Œç„¶åå°†æ›´æ–°åçš„è¯¥æ–‡æ¡£å°è£…åœ¨å“åº”æŠ¥æ–‡ä¸­å‘å›ç»™ä¸»æœºã€‚ é—®é¢˜ï¼š æŒ‰è¿™ä¸ªè¯´ï¼Œä¸»æœºè¯·æ±‚ç½‘å€ï¼Œä»£ç†æœåŠ¡å™¨éœ€è¦åˆ¤æ–­ç¼“å­˜æ–‡æ¡£æ˜¯å¦è¿‡æœŸã€‚åˆ¤æ–­æ–¹å¼å°±æ˜¯å’ŒåŸå§‹æœåŠ¡å™¨ç¡®è®¤ã€‚ è¿™æ„å‘³ç€æ¯æ¬¡è¯·æ±‚éƒ½å¾—æœ‰ä¸€æ¬¡ä»£ç†æœåŠ¡å™¨å’ŒåŸå§‹æœåŠ¡å™¨çš„é€šä¿¡æ¥å›ã€‚å¯æ˜¯ä¸ç”¨ç¼“å­˜ï¼Œä¸»æœºç›´æ¥å’ŒåŸå§‹æœåŠ¡å™¨é€šä¿¡ï¼Œä¹Ÿæ˜¯ä¸€æ¬¡æ¥å›å•Šã€‚é‚£ç¼“å­˜è¿™ä¸ªæœºåˆ¶å°±æ²¡å•¥ç”¨å¤„äº†å•Š? å›ç­” å› ä¸ºåŸå§‹æœåŠ¡å™¨æœ‰ä¿®æ”¹æ—¶é—´å’Œæœ‰æ•ˆæ—¶é—´ï¼Œä»£ç†æœåŠ¡å™¨åœ¨è¶…è¿‡äº†æœ‰æ•ˆæ—¶é—´åæ‰å’ŒåŸå§‹æœåŠ¡å™¨é‡Œé¢çš„å†…å®¹æ¯”è¾ƒæ˜¯å¦è¿‡æœŸã€‚ ä¾‹é¢˜ é˜²ç«å¢™é˜²ç«å¢™ é˜²ç«å¢™ä¸»è¦ç”¨äºä¿æŠ¤ä¸€ä¸ªç½‘ç»œåŒºåŸŸå…å—æ¥è‡ªå¦ä¸€ä¸ªç½‘ç»œåŒºåŸŸçš„ç½‘ç»œæ”»å‡»å’Œç½‘ç»œå…¥ä¾µè¡Œä¸ºï¼Œä¸»è¦éƒ¨ç½²åœ¨ç½‘ç»œè¾¹ç•Œï¼Œå¯¹è¿›å‡ºç½‘ç»œçš„è®¿é—®è¡Œä¸ºè¿›è¡Œæ§åˆ¶ï¼Œå®‰å…¨é˜²æŠ¤æ˜¯å…¶æ ¸å¿ƒç‰¹æ€§ï¼Œæ¯”å¦‚åœ¨ä¼ä¸šç½‘ä¸­ï¼Œåœ¨ä¸Internetæ¥å£å¤„å¸ƒç½®é˜²ç«å¢™ï¼Œå¯ä»¥èµ·åˆ°è¿‡æ»¤ç—…æ¯’ã€é˜»æ­¢é»‘å®¢æ”»å‡»ç­‰å¥½å¤„ã€‚ é»˜è®¤å®‰å…¨é¢†åŸŸ åä¸ºé˜²ç«å¢™çš„é»˜è®¤å®‰å…¨åŒºåŸŸï¼šTrustã€DMZå’ŒUntrust åŒºåŸŸå å—ä¿¡ä»»ç¨‹åº¦ å®‰å…¨çº§åˆ« ä½•æ—¶ä½¿ç”¨ Trust é«˜ 85 å®šä¹‰å†…éƒ¨ç”¨æˆ·æ‰€åœ¨ç½‘ç»œ DMZ ä¸­ç­‰ 50 å®šä¹‰å†…éƒ¨æœåŠ¡å™¨æ‰€åœ¨ç½‘ç»œ Untrust ä½ 5 å®šä¹‰Internetç­‰ä¸å®‰å…¨çš„ç½‘ç»œ Local ä»£è¡¨é˜²ç«å¢™æœ¬èº« 100 å‡¡æ˜¯é˜²ç«å¢™ä¸»åŠ¨å‘å‡ºçš„æŠ¥æ–‡å‡å¯è®¤ä¸ºæ˜¯LocalåŒºåŸŸå‘å‡ºçš„ï¼Œå‡¡æ˜¯éœ€è¦é˜²ç«å¢™å“åº”å¹¶å¤„ç†çš„æŠ¥æ–‡å‡å¯è®¤ä¸ºæ˜¯LocalåŒºåŸŸæ¥æ”¶ã€‚Localä¸èƒ½æ·»åŠ æ¥å£ï¼Œ å› ä¸ºé˜²ç«å¢™çš„æ‰€æœ‰æ¥å£éƒ½éšå«å±äºLocalåŒºåŸŸ åœ¨ç½‘ç»œæ•°é‡è¾ƒå°‘ç½‘ç»œä¸­ï¼Œä½¿ç”¨é»˜è®¤çš„å®‰å…¨åŒºåŸŸå°±å¯ä»¥æ»¡è¶³åˆ’åˆ†ç½‘ç»œçš„éœ€æ±‚ï¼Œåä¹‹ï¼Œåˆ™éœ€è¦åˆ›å»ºæ–°çš„å®‰å…¨åŒºåŸŸã€‚ å®‰å…¨åŒºé—´ å®‰å…¨åŸŸé—´æ˜¯ä¸¤ä¸ªå®‰å…¨åŒºåŸŸçš„å”¯ä¸€é“è·¯ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æè¿°æµé‡çš„ä¼ è¾“é€šé“ï¼Œä»»æ„ä¸¤ä¸ªå®‰å…¨åŒºåŸŸéƒ½å¯æ„æˆä¸€ä¸ªå®‰å…¨åŸŸé—´ã€‚å¦‚æœå¸Œæœ›å¯¹ç»è¿‡è¿™æ¡é€šé“çš„æµé‡è¿›è¡Œæ§åˆ¶ï¼Œå°±å¿…é¡»é…ç½®å®‰å…¨ç­–ç•¥ã€‚ æŠ¥æ–‡åœ¨ä¸¤ä¸ªå®‰å…¨åŒºåŸŸä¹‹é—´æµåŠ¨æ—¶ï¼ŒæŠ¥æ–‡ä»ä½çº§åˆ«çš„å®‰å…¨åŒºåŸŸå‘é«˜çº§åˆ«çš„å®‰å…¨åŒºåŸŸæµåŠ¨æ—¶ä¸ºå…¥æ–¹å‘Inboundï¼ŒæŠ¥æ–‡ä»é«˜çº§åˆ«çš„å®‰å…¨åŒºåŸŸå‘ä½çº§åˆ«çš„å®‰å…¨åŒºåŸŸæµåŠ¨æ—¶ä¸ºå‡ºæ–¹å‘Outboundã€‚ é€šä¿¡åŒæ–¹ä¸€å®šä¼šäº¤äº’æŠ¥æ–‡ï¼Œå³å®‰å…¨åŒºåŸŸçš„ä¸¤ä¸ªæ–¹å‘ä¸Šéƒ½æœ‰æŠ¥æ–‡çš„ä¼ è¾“ï¼Œé€šè¿‡è®¾ç½®å®‰å…¨åŒºåŸŸï¼Œé˜²ç«å¢™çš„å®‰å…¨åŒºåŸŸä¹‹é—´æœ‰ç­‰çº§æ˜ç¡®çš„åŸŸé—´å…³ç³»ï¼Œä¸åŒçš„å®‰å…¨åŒºåŸŸä»£è¡¨ä¸åŒç½‘ç»œï¼Œé˜²ç«å¢™æˆä¸ºè¿æ¥å„ä¸ªç½‘ç»œçš„èŠ‚ç‚¹ï¼Œä»¥æ­¤ä¸ºåŸºç¡€ï¼Œé˜²ç«å¢™å¯ä»¥å¯¹å„ç½‘ç»œä¹‹é—´æµåŠ¨çš„æŠ¥æ–‡å®æ–½ç®¡æ§ã€‚ ä¸‰ç§å·¥ä½œæ¨¡å¼ è·¯ç”±æ¨¡å¼ï¼šé‡‡ç”¨è·¯ç”±æ¨¡å¼æ—¶ï¼Œå¯ä»¥å®ŒæˆACLåŒ…è¿‡æ»¤ã€NATè½¬æ¢ç­‰åŠŸèƒ½ï¼ŒTrustä¸UntruståŒºåŸŸé—´æœ‰ä¸€å°é˜²æŠ¤å¢™ï¼Œé˜²ç«å¢™å·¦å³æ¥å£IPä¸åŒï¼Œéœ€è¦ä½¿ç”¨è·¯ç”±è¡¨æŒ‡å¯¼æŠ¥æ–‡çš„è½¬å‘ï¼Œæ­¤ç§æ¨¡å¼å°±æ˜¯è·¯ç”±ã€‚ é€æ˜æ¨¡å¼ï¼šé€æ˜æ¨¡å¼çš„é˜²ç«å¢™æ”¯æŒACLè§„åˆ™æ£€æŸ¥ï¼Œé˜²æ”»å‡»æ£€æŸ¥ã€æµé‡ç›‘æ§ç­‰åŠŸèƒ½ï¼ŒæŠ¥æ–‡åœ¨é˜²ç«å¢™å½“ä¸­ä¸ä»…ä»…åƒæ˜¯äº¤æ¢æœºçš„äºŒå±‚å¤„ç†ï¼Œè¿˜ä¼šå¯¹æŠ¥æ–‡è¿›è¡Œé«˜å±‚åˆ†æå¤„ç†ï¼Œä¸¤ä¸ªåŒºåŸŸIPå±äºåŒä¸€ç½‘æ®µï¼Œé˜²ç«å¢™æ¥å£æ²¡æœ‰é…ç½®IPï¼Œå·¥ä½œæˆäº¤æ¢æœºæ¨¡å¼ã€‚ æ··åˆæ¨¡å¼ï¼šTrustä¸UntruståŒºåŸŸéƒ½ä½¿ç”¨åŒä¸€ç½‘æ®µï¼Œä¸¤å°é˜²ç«å¢™ï¼Œç»„æˆä¸»å¤‡å…³ç³»ï¼Œé˜²ç«å¢™å·¥ä½œä¸ºè·¯ç”±æ¨¡å¼ï¼Œå·¦å³æµé‡æ˜¯äºŒå±‚è½¬å‘ï¼Œä¸Šä¸‹æµé‡æ˜¯ä¸‰å±‚è½¬å‘ã€‚"},{"title":"æ¹–ç§‘å¤§(4)ç½‘ç»œå±‚","path":"/wiki/network/æ¹–ç§‘å¤§(4)ç½‘ç»œå±‚.html","content":"ç½‘ç»œå±‚ ç”±äºTCPIPä½“ç³»ç»“æ„çš„å› ç‰¹ç½‘çš„ç½‘é™…å±‚æä¾›çš„æ˜¯ç®€å•çµæ´»ã€æ— è¿æ¥çš„ã€å°½æœ€å¤§åŠªåŠ›äº¤ä»˜çš„æ•°æ®æŠ¥æœåŠ¡ï¼Œå› æ­¤æœ¬ç« ä¸»è¦å›´ç»•ç½‘é™…å±‚å¦‚ä½•ä¼ é€IPæ•°æ®æŠ¥è¿™ä¸ªä¸»é¢˜è¿›è¡Œè®¨è®ºã€‚ ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡ é¢å‘è¿æ¥çš„è™šç”µè·¯æœåŠ¡ å¯é çš„é€šä¿¡ç”±ç½‘ç»œæ¥ä¿è¯ å¿…é¡»å»ºç«‹ç½‘ç»œå±‚çš„è¿æ¥â€”-è™šç”µè·¯VC(Virtual Circuit) æ³¨æ„ï¼šè™šç”µè·¯è¡¨ç¤ºè¿™æ˜¯ä¸€æ¡é€»è¾‘ä¸Šçš„è¿æ¥ï¼Œæ•°æ®åˆ†ç»„éƒ½æ²¿ç€è¿™æ¡é€»è¾‘é“¾æ¥æŒ‰ç…§å­˜å‚¨è½¬å‘æ–¹å¼ä¼ é€ã€‚æ‰€ä»¥è¿™ä¸æ˜¯çœŸæ­£å»ºç«‹ä¸€æ¡ç‰©ç†è¿æ¥ã€‚ é‡‡ç”¨ç”µè·¯äº¤æ¢çš„ç”µè¯é€šä¿¡ï¼Œåˆ™æ˜¯å…ˆå»ºç«‹ä¸€æ¡çœŸæ­£çš„è¿æ¥ã€‚ å› æ­¤åˆ†ç»„äº¤æ¢çš„è™šè¿æ¥ä¸ç”µè·¯äº¤æ¢çš„è¿æ¥åªæ˜¯ç±»ä¼¼ï¼Œä½†å¹¶ä¸å®Œå…¨ä¸€æ ·ã€‚ é€šä¿¡åŒæ–¹æ²¿ç€å·²å»ºç«‹çš„è™šç”µè·¯å‘é€åˆ†ç»„ ç›®çš„ä¸»æœºçš„åœ°å€ä»…åœ¨è¿æ¥å»ºç«‹é˜¶æ®µä½¿ç”¨ï¼Œä¹‹åæ¯ä¸ªåˆ†ç»„çš„é¦–éƒ¨åªéœ€æºå¸¦ä¸€æ¡è™šç”µè·¯çš„ç¼–å·(æ„æˆè™šç”µè·¯çš„æ¯ä¸€æ®µé“¾è·¯éƒ½æœ‰ä¸€ä¸ªè™šç”µè·¯ç¼–å·)ã€‚ è¿™ç§é€šä¿¡æ–¹å¼å¦‚æœå†ä½¿ç”¨å¯é ä¼ è¾“çš„ç½‘ç»œåè®®ï¼Œå°±å¯ä½¿æ‰€å‘é€çš„åˆ†ç»„æœ€ç»ˆæ­£ç¡®åˆ°è¾¾æ¥æ”¶æ–¹(æ— å·®é”™æŒ‰åºåˆ°è¾¾ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤)ã€‚ é€šä¿¡ç»“æŸåï¼Œéœ€è¦é‡Šæ”¾ä¹‹å‰æ‰€å»ºç«‹çš„è™šç”µè·¯ å¾ˆå¤šå¹¿åŸŸåˆ†ç»„äº¤æ¢ç½‘éƒ½ä½¿ç”¨é¢å‘è¿æ¥çš„è™šç”µè·¯æœåŠ¡ï¼Œä¾‹å¦‚ï¼Œæ›¾ç»çš„X.25å’Œé€æ¸è¿‡æ—¶çš„å¸§ä¸­ç»§FRã€å¼‚æ­¥ä¼ è¾“æ¨¡å¼ATMç­‰ã€‚ æ— è¿æ¥çš„æ•°æ®æŠ¥æœåŠ¡ å¯é é€šä¿¡åº”å½“ç”±ç”¨æˆ·ä¸»æœºæ¥ä¿è¯ ä¸éœ€è¦å»ºç«‹ç½‘ç»œå±‚è¿æ¥ æ¯ä¸ªåˆ†ç»„å¯èµ°ä¸åŒè·¯å¾„ æ¯ä¸ªåˆ†ç»„çš„é¦–éƒ¨å¿…é¡»æºå¸¦ç›®çš„ä¸»æœºçš„å®Œæ•´åœ°å€ è¿™ç§é€šä¿¡æ–¹å¼æ‰€ä¼ é€çš„åˆ†ç»„å¯èƒ½è¯¯ç ã€ä¸¢å¤±ã€é‡å¤å’Œå¤±åº ç”±äºç½‘ç»œæœ¬èº«ä¸æä¾›ç«¯åˆ°ç«¯çš„å¯é ä¼ è¾“æœåŠ¡ï¼Œè¿™å°±ä½¿ç½‘ç»œä¸­çš„è·¯ç”±å™¨å¯ä»¥åšå¾—æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”ä»·æ ¼ä½å»‰ å› ç‰¹ç½‘é‡‡ç”¨äº†è¿™ç§è®¾è®¡æ€æƒ³ï¼Œä¹Ÿå°±æ˜¯å°†å¤æ‚çš„ç½‘ç»œå¤„ç†åŠŸèƒ½ç½®äºå› ç‰¹ç½‘çš„è¾¹ç¼˜(ç”¨æˆ·ä¸»æœºå’Œå…¶å†…éƒ¨çš„è¿è¾“å±‚)ï¼Œè€Œå°†ç›¸å¯¹ç®€å•çš„å°½æœ€å¤§åŠªåŠ›çš„åˆ†ç»„äº¤ä»˜åŠŸèƒ½ç½®äºå› ç‰¹ç½‘æ ¸å¿ƒã€‚665 IPv4å®šä¹‰ï¼š IPv4åœ°å€å°±æ˜¯ç»™å› ç‰¹ç½‘(Internet)ä¸Šçš„ æ¯ä¸€å°ä¸»æœº(æˆ–è·¯ç”±å™¨)çš„æ¯ä¸€ä¸ªæ¥å£ ** åˆ†é…ä¸€ä¸ª åœ¨å…¨ä¸–ç•ŒèŒƒå›´å†…æ˜¯å”¯ä¸€çš„32æ¯”ç‰¹çš„æ ‡è¯†ç¬¦**ã€‚ IPåœ°å€ç”±å› ç‰¹ç½‘åå­—å’Œæ•°å­—åˆ†é…æœºæ„ICANN(Internet Corporation for Assigned Names and Numbers)è¿›è¡Œåˆ†é…ã€‚ æˆ‘å›½ç”¨æˆ·å¯å‘äºšå¤ªç½‘ç»œä¿¡æ¯ä¸­å¿ƒAPNIC(Asia Pacifc Network Information Center)ç”³è¯·IPåœ°å€ï¼Œéœ€è¦ç¼´è´¹ã€‚ 2011å¹´2æœˆ3æ—¥ï¼Œäº’è”ç½‘å·ç åˆ†é…ç®¡ç†å±€IANA(ç”±ICANNè¡Œä½¿èŒèƒ½)å®£å¸ƒï¼ŒIPv4åœ°å€å·²ç»åˆ†é…å®Œæ¯• æˆ‘å›½åœ¨2014è‡³2015å¹´ä¹Ÿé€æ­¥åœæ­¢äº†å‘æ–°ç”¨æˆ·å’Œåº”ç”¨åˆ†é…IPv4åœ°å€ã€‚åŒæ—¶å…¨é¢å¼€å±•å•†ç”¨éƒ¨ç½²IPv6. è¡¨ç¤ºæ–¹æ³•ï¼š æ¯å…«ä¸ªæ¯”ç‰¹ä¸€ç»„ï¼Œé‡‡ç”¨ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºæ–¹æ³•ã€‚ IPv4çš„åœ°å€ç¼–åˆ¶æ–¹æ³•ç»å†ä¸‰ä¸ªå†å²é˜¶æ®µï¼š åˆ†ç±»ç¼–å€ åŒºåˆ†ï¼š æ³¨æ„ Aã€Bã€Cç±»åœ°å€çš„äºŒè¿›åˆ¶å‰ç¼€ï¼Œä»¥åŠå¯¹åº”çš„ç½‘ç»œå·å’Œä¸»æœºå·ä½æ•°ã€‚ Aç±»åœ°å€ç½‘ç»œå·ç¬¬1ä½å›ºå®šä¸º0ï¼Œç½‘ç»œå·åé¢éƒ¨åˆ†ä¸èƒ½å…¨0ï¼Œä¹Ÿä¸èƒ½å…¨1ï¼Œæ‰€ä»¥ç½‘ç»œå·èŒƒå›´æ˜¯1~126 å¯æŒ‡æ´¾ç½‘ç»œæ•°é‡ï¼š2^(8-1)^-2 126 (å‡ 2ï¼šé™¤å»æœ€å°ç½‘ç»œå·0å’Œæœ€å¤§ç½‘ç»œå·127) æ¯ä¸ªç½‘ç»œä¸­å¯åˆ†é…IPåœ°å€æ•°é‡ï¼š2^24^-2ï¼ˆ(å‡2ï¼šé™¤å»ä¸»æœºå·ä¸ºå…¨0çš„ç½‘ç»œåœ°å€å’Œå…¨1çš„å¹¿æ’­åœ°å€) Bç±»åœ°å€ç½‘ç»œå·å‰2ä½å›ºå®šä¸º10ï¼Œç½‘ç»œå·åé¢éƒ¨åˆ†å¯ä»¥å…¨å–0æˆ–1ï¼Œæ‰€ä»¥ç½‘ç»œå·èŒƒå›´æ˜¯128.0~191.255 å¯æŒ‡æ´¾ç½‘ç»œæ•°é‡ï¼š2^(16-2)^ 126 (å¹‚å‡ 2ï¼šé™¤å»å‰ç¼€çš„å‰ä¸¤ä½ï¼‰ æ¯ä¸ªç½‘ç»œä¸­å¯åˆ†é…IPåœ°å€æ•°é‡ï¼š2^16^-2 65534ï¼ˆå‡2ï¼šé™¤å»ä¸»æœºå·ä¸ºå…¨0çš„ç½‘ç»œåœ°å€å’Œå…¨1çš„å¹¿æ’­åœ°å€) ï¼ˆæ ¹æ®2002å¹´9æœˆå‘è¡¨çš„RFC3330æ–‡æ¡£ï¼ŒBç±»åœ°å€ä¸éœ€è¦ä¿ç•™ç½‘ç»œå·ï¼Œä¹Ÿå°±æ˜¯ 128.0 å·²ç»å¯ä»¥åˆ†é…äº†ã€‚ï¼‰ Cç±»åœ°å€ç½‘ç»œå·å‰3ä½å›ºå®šä¸º110ï¼Œç½‘ç»œååé¢éƒ¨åˆ†å¯ä»¥å…¨å–0æˆ–1ï¼Œæ‰€ä»¥ç½‘ç»œå·èŒƒå›´æ˜¯192.0.0~223.255.255 1æŒ‡æ´¾ç½‘ç»œæ•°é‡ï¼š2^(24-3)^ 126 (å¹‚å‡ 2ï¼šé™¤å»å‰ç¼€çš„å‰ä¸¤ä½ï¼‰ æ¯ä¸ªç½‘ç»œä¸­å¯åˆ†é…IPåœ°å€æ•°é‡ï¼š2^8^-2 65534ï¼ˆå‡2ï¼šé™¤å»ä¸»æœºå·ä¸ºå…¨0çš„ç½‘ç»œåœ°å€å’Œå…¨1çš„å¹¿æ’­åœ°å€) ï¼ˆæ ¹æ®2002å¹´9æœˆå‘è¡¨çš„RFC3330æ–‡æ¡£ï¼ŒBç±»åœ°å€ä¸éœ€è¦ä¿ç•™ç½‘ç»œå·ï¼Œä¹Ÿå°±æ˜¯ 192.0 å·²ç»å¯ä»¥åˆ†é…äº†ã€‚ï¼‰ Dç±»åœ°å€ä¸ºå¤šæ’­åœ°å€ï¼ŒIPåœ°å€ä¸º224.0.0.0~239.255.255.255 æ³¨æ„ï¼š [æ¯ç±»åœ°å€]éƒ½æœ‰ä¸€ä¸ªæœ€å°ç½‘ç»œå· 0ï¼Œå³ç½‘ç»œä½å…¨ä¸º 0 çš„åœ°å€ä¿ç•™ä¸æŒ‡æ´¾ã€‚éƒ½æœ‰ä¸€ä¸ªæœ€å¤§ç½‘ç»œå· 255ï¼Œä½œä¸ºå¹¿æ’­åœ°å€ä¸æŒ‡æ´¾ã€‚ ç¬¬ä¸€ä¸ªå¯æŒ‡æ´¾ç½‘ç»œå·ä¸º1ï¼Œæœ€åä¸€ä¸ªç½‘ç»œå·ä¸º254ã€‚ [A ç±»åœ°å€]çš„æœ€å¤§ç½‘ç»œå·127 ä¿ç•™ï¼Œä½œä¸ºæœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ï¼Œä¸æŒ‡æ´¾ã€‚ æœ€å°çš„æœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ä¸º 127.0.0.1 æœ€å¤§çš„æœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ä¸º 127.255.255.254 åˆ’åˆ†å­ç½‘åº”ç”¨åœºæ™¯ï¼š æ¯”å¦‚ä¸€ä¸ªå•ä½æœ‰300å°ä¸»æœºï¼Œæ­¤æ—¶éœ€è¦ç”³è¯·ä¸€ä¸ªBç±»ç½‘ç»œåœ°å€ï¼Œä¹Ÿå°±æ˜¯æœ‰65534ä¸ªIPåœ°å€ã€‚å¾ˆå®¹æ˜“å¾—çŸ¥ï¼Œåˆ†é…å‡ºå»300ä¸ªIPåœ°å€åï¼Œç”³è¯·å¾—åˆ°çš„Bç±»ç½‘ç»œè¿˜å‰©ä¸‹å¾ˆå¤šIPåœ°å€ã€‚è¿™äº›å‰©ä½™IPåœ°å€åªèƒ½ç”±è¯¥å•ä½çš„åŒä¸€ä¸ªç½‘ç»œä½¿ç”¨ã€‚ å½“å•ä½æ‰©å¤§è§„æ¨¡ï¼Œéœ€è¦å†æ·»åŠ ä¸¤ä¸ªå­ç½‘çš„æ—¶ï¼Œåˆè¦ä¸ºè¿™ä¸¤ä¸ªå­ç½‘åˆ†åˆ«ç”³è¯·Bç±»åœ°å€ï¼Œè¿™ä¼šèŠ±è´¹ä¸€äº›ä¸å¿…è¦çš„æ”¯å‡ºï¼Œå®é™…ä¸Šå­ç½‘1ç”³è¯·åˆ°çš„Bç±»åœ°å€è¿˜æœ‰å¾ˆå¤šæ²¡ç”¨åˆ°ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå°†è¿™äº›å‰©ä½™åœ°å€åº”ç”¨åˆ°å…¶ä»–å­ç½‘ä¸­(èŠ‚çº¦åœ°å€)ã€‚ ä¸ºæ–°å¢ç½‘ç»œç”³è¯·æ–°çš„ç½‘ç»œå·ä¼šå¸¦æ¥ä»¥ä¸‹å¼Šç«¯: éœ€è¦ç­‰å¾…æ—¶é—´å’ŒèŠ±è´¹æ›´å¤šçš„è´¹ç”¨ ä¼šå¢åŠ å…¶ä»–è·¯ç”±å™¨ä¸­è·¯ç”±è¡¨è®°å½•çš„æ•°é‡ æµªè´¹åŸæœ‰ç½‘ç»œä¸­å‰©ä½™çš„å¤§é‡IPåœ°å€ åˆ’åˆ†å­ç½‘ï¼š çµé­‚æ˜¯å­ç½‘æ©ç ã€‚ é€šè¿‡ä¸€ä¸ª32æ¯”ç‰¹çš„å­ç½‘æ©ç å¯ä»¥è¡¨æ˜åˆ†ç±»IPåœ°å€çš„ä¸»æœºå·éƒ¨åˆ†è¢«å€Ÿç”¨äº†å‡ ä¸ªæ¯”ç‰¹ä½œä¸ºå­ç½‘å· å­ç½‘æ©ç ä½¿ç”¨è¿ç»­çš„**æ¯”ç‰¹1å¯¹åº”ç½‘ç»œå·+å­ç½‘å·(**å­ç½‘å·æ¥è‡ªåŸå…ˆçš„ä¸€éƒ¨åˆ†ä¸»æœºå·) å­ç½‘æ©ç ä½¿ç”¨è¿ç»­çš„æ¯”ç‰¹0å¯¹åº”ä¸»æœºå· å°†åˆ’åˆ†å­ç½‘çš„IPv4åœ°å€ä¸å…¶ç›¸åº”çš„å­ç½‘æ©ç è¿›è¡Œ**(é€»è¾‘ä¸è¿ç®—)ã€å³æ©ç æ˜¯1çš„éƒ¨åˆ†ã€‘**å°±å¯å¾—åˆ°IPv4åœ°å€æ‰€åœ¨å­ç½‘çš„ç½‘ç»œåœ°å€ æ— åˆ†ç±»ç¼–å€åº”ç”¨åœºæ™¯ï¼š åˆ’åˆ†å­ç½‘åœ¨ä¸€å®šç¨‹åº¦ä¸Šç¼“è§£äº†å› ç‰¹ç½‘å‘å±•ä¸­é‡åˆ°çš„å›°éš¾ï¼Œä½†æ˜¯æ•°é‡å·¨å¤§çš„Cç±»ç½‘å› ä¸ºå…¶åœ°å€ç©ºé—´å¤ªå°å¹¶æ²¡æœ‰å¾—åˆ°å……åˆ†ä½¿ç”¨ï¼Œè€Œå› ç‰¹ç½‘çš„IPåœ°å€ä»åœ¨åŠ é€Ÿæ¶ˆè€—ï¼Œæ•´ä¸ªIPv4åœ°å€ç©ºé—´é¢ä¸´å…¨éƒ¨è€—å°½çš„å¨èƒã€‚ 1993å¹´ï¼ŒIETFå‘å¸ƒäº†æ— åˆ†ç±»åŸŸé—´è·¯ç”±é€‰æ‹©CIDR CIDRæ¶ˆé™¤äº†ä¼ ç»Ÿçš„Aç±»ã€Bç±»å’ŒCç±»åœ°å€ï¼Œä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µ CIDRå¯ä»¥æ›´åŠ æœ‰æ•ˆåœ°åˆ†é…IPv4åœ°å€ç©ºé—´ CIDRä½¿ç”¨**â€œæ–œçº¿è®°æ³•â€**ï¼Œæˆ–ç§°CIDRè®°æ³•ã€‚å³åœ¨IPv4åœ°å€åé¢åŠ ä¸Šæ–œçº¿â€â€œï¼Œåœ¨æ–œçº¿åé¢å†™ä¸Šç½‘ç»œå‰ç¼€æ‰€å æ¯”ç‰¹æ•°é‡ CIDRå®é™…ä¸Šæ˜¯å°†ç½‘ç»œå‰ç¼€éƒ½ç›¸åŒçš„è¿ç»­IPåœ°å€ç»„æˆä¸€ä¸ªâ€CIDRåœ°å€å—â€ æˆ‘ä»¬åªè¦çŸ¥é“CIDRåœ°å€å—ä¸­çš„ä»»ä½•ä¸€ä¸ªåœ°å€ï¼Œå°±å¯ä»¥çŸ¥é“è¯¥åœ°å€å—çš„å…¨éƒ¨ç»†èŠ‚: åœ°å€å—çš„æœ€å°åœ°å€ åœ°å€å—çš„æœ€å¤§åœ°å€ åœ°å€å—ä¸­çš„åœ°å€æ•°é‡ åœ°å€å—èšåˆæŸç±»ç½‘ç»œ(Aç±»ã€Bç±»æˆ–Cç±»)çš„æ•°é‡ åœ°å€æ©ç (ä¹Ÿå¯ç»§ç»­ç§°ä¸ºå­ç½‘æ©ç ) IPv4åˆ’åˆ†åœ°å€å—çš„ä¸åŒåº”ç”¨ ç»™å®šä¸€ä¸ªIPv4åœ°å€å—ï¼Œå¦‚ä½•å°†å…¶åˆ’åˆ†æˆå‡ ä¸ªæ›´å°çš„åœ°å€å—ï¼Œå¹¶å°†è¿™äº›åœ°å€å—åˆ†é…ç»™äº’è”ç½‘ä¸­çš„ä¸åŒç½‘ç»œï¼Œè¿›è€Œå¯ä»¥ç»™ä¸ªç½‘ç»œä¸­çš„ä¸»æœºå’Œè·¯ç”±å™¨æ¥å£åˆ†é…IPv4åœ°å€ã€‚ å¦‚ä½•åˆ’åˆ†ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š å®šé•¿çš„å­ç½‘æ©ç FLSMï¼ˆFixed Length Subnet Maskï¼‰ ä½¿ç”¨åŒä¸€ä¸ªå­ç½‘æ©ç æ¥åˆ’åˆ†å­ç½‘ï¼Œæ¯ä¸ªå­ç½‘æ‰€åˆ†é…çš„IPåœ°å€æ•°é‡ç›¸åŒï¼Œé€ æˆIPåœ°å€çš„æµªè´¹ã€‚ å˜é•¿çš„å­ç½‘æ©ç VLSMï¼ˆVariable Length Subnet Maskï¼‰ ä½¿ç”¨ä¸åŒçš„å­ç½‘æ©ç æ¥åˆ’åˆ†å­ç½‘ï¼Œæ¯ä¸ªå­ç½‘æ‰€åˆ†é…çš„IPåœ°å€æ•°é‡å¯ä»¥ä¸åŒï¼Œå°½å¯èƒ½å‡å°‘å¯¹IPåœ°å€çš„æµªè´¹ã€‚ ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ï¼š å®šé•¿æ€è·¯ å˜é•¿æ€è·¯ â€å‡è®¾ç”³è¯·åˆ°çš„åœ°å€å—ä¸º218.75.230.024ï¼Œè¯·ä½¿ç”¨å˜é•¿çš„å­ç½‘æ©ç ç»™ä¸‹å›¾æ‰€ç¤ºçš„å°å‹äº’è”ç½‘ä¸­çš„å„è®¾å¤‡åˆ†é…IPåœ°å€â€œ åˆ†æä¸»æœºå·ä½æ•°å’Œç½‘ç»œå‰ç¼€ä½æ•°ã€‚ åˆ†æåå¯çŸ¥ï¼Œåˆ’åˆ†éœ€æ±‚æ˜¯ï¼šä»åœ°å€å—218.75.230.024ä¸­å–å‡º5ä¸ªåœ°å€å—ï¼š (1ä¸ªâ€œ27â€åœ°å€å—ï¼Œ3ä¸ªâ€œ28â€åœ°å€å—ï¼Œ1ä¸ªâ€œ30â€åœ°å€å—)ï¼ŒæŒ‰éœ€åˆ†é…ç»™ä¸‹å›¾æ‰€ç¤ºçš„5ä¸ªç½‘ç»œã€‚ æŒ‰ç…§å…ˆç»™å¤§å­å—åˆ†é…ï¼ˆç½‘ç»œåœ°å€å—å°‘ï¼Œä¸»æœºåœ°å€æ•°é‡å¤šï¼Œï¼‰çš„åŸåˆ™ï¼Œå…ˆç»™ç½‘ç»œN2åˆ’åˆ†ã€‚ æ‰€ä»¥ä»¥ç½‘ç»œN2ä¸ºä¾‹ï¼š 218.75.230.0 æ˜¯ç½‘ç»œN2çš„ç½‘ç»œåœ°å€ï¼Œ218.75.230.31æ˜¯ç½‘ç»œN2çš„å¹¿æ’­åœ°å€ã€‚ ä¸­é—´å³æ˜¯ç½‘ç»œN2çš„å¯åˆ†é…åœ°å€ã€‚ ä»¥æ­¤ç±»æ¨â€¦â€¦. IPæ•°æ®æŠ¥å‘é€è½¬å‘è¿‡ç¨‹åŒä¸€ä¸ªç½‘ç»œä¹‹é—´çš„ä¸»æœºå¯ä»¥ç›´æ¥é€šä¿¡ï¼Œä¸åŒç½‘ç»œä¹‹é—´çš„ä¸»æœºé€šä¿¡éœ€è¦è·¯ç”±å™¨ä¸­è½¬ã€‚ ç›´æ¥äº¤ä»˜ä¸é—´æ¥äº¤ä»˜ åŒä¸€ç½‘ç»œä¸­çš„ä¸»æœºä¹‹é—´å¯ä»¥ç›´æ¥é€šä¿¡ï¼Œå±äºç›´æ¥äº¤ä»˜ã€‚ ä¸åŒç½‘ç»œä¹‹é—´çš„ä¸»æœºé€šä¿¡ï¼Œéœ€è¦è·¯ç”±å™¨ä¸­è½¬ï¼Œå±äºé—´æ¥äº¤ä»˜ã€‚ æºä¸»æœºå¦‚ä½•åˆ¤æ–­ç›®çš„ä¸»æœºæ˜¯å¦å’Œè‡ªå·±åœ¨åŒä¸€ä¸ªç½‘ç»œä¸­ï¼Ÿ å°†è‡ªèº«IPåœ°å€ä¸å­ç½‘æ©ç ç›¸ä¸å¾—åˆ°è‡ªèº«çš„ç½‘ç»œå·1ï¼Œå†å°†ç›®çš„IPåœ°å€ä¸è‡ªèº«å­ç½‘æ©ç ç›¸ä¸å¾—åˆ°ç½‘ç»œå·2ã€‚è‹¥ä¸¤ä¸ªç½‘ç»œå·ç›¸ç­‰ï¼Œåˆ™è¯´æ˜å¤„åœ¨åŒä¸€ä¸ªç½‘ç»œï¼Œä¸èƒ½åˆ™ä¸å†åŒä¸€ç½‘ç»œï¼Œå±äºé—´æ¥äº¤ä»˜ã€‚ ä¸»æœºå¦‚ä½•çŸ¥é“åº”è¯¥æŠŠIPæ•°æ®æŠ¥äº¤ç»™å“ªä¸ªè·¯ç”±å™¨è¿›è¡Œè½¬å‘å‘¢ï¼Ÿ ç”¨æˆ·ä¸ºäº†èƒ½è®©æœ¬ç½‘ç»œä¸»æœºä¸å…¶ä»–ç½‘ç»œä¸»æœºè¿›è¡Œé€šä¿¡ï¼Œå°±å¿…é¡»ç»™å…¶æŒ‡å®šæœ¬ç½‘ç»œä¸­çš„ä¸€ä¸ªè·¯ç”±å™¨ï¼Œç”±è¯¥è·¯ç”±å™¨è¿›è¡Œå¸®å¿™è½¬å‘ã€‚ æ‰€æŒ‡å®šçš„è·¯ç”±å™¨ï¼Œç§°ä¸ºé»˜è®¤ç½‘å…³ã€‚ æ‰€è°“é»˜è®¤ç½‘å…³ï¼Œå³å½“è·¯ç”±è¡¨ä¸­æŸ¥ä¸åˆ°æ•°æ®æ—¶ä¼šå°†æ•°æ®å‘å¾€çš„è·¯ç”±å™¨ç«¯å£IPåœ°å€ã€‚ è·¯ç”±å™¨æ”¶åˆ°IPæ•°æ®åŒ…åå¦‚ä½•è½¬å‘ï¼Ÿ è·¯ç”±å™¨é¦–å…ˆä¼šæ£€æŸ¥IPæ•°æ®æŠ¥çš„é¦–éƒ¨æ˜¯å¦å‡ºé”™: è‹¥å‡ºé”™ï¼Œä¸¢å¼ƒè¯¥IPæ•°æ®åŒ…å¹¶é€šå‘Šæºä¸»æœºï¼› æœªå‡ºé”™ï¼Œåˆ™è¿›è¡Œè½¬å‘ã€‚ æ ¹æ®IPæ•°æ®åŒ…çš„ç›®çš„åœ°å€ï¼Œåœ¨è·¯ç”±è¡¨ä¸­æŸ¥æ‰¾åŒ¹é…çš„æ¡ç›®ï¼š è‹¥æ‰¾åˆ°åŒ¹é…æ¡ç›®ï¼Œåˆ™è½¬å‘ç»™æ¡ç›®ä¸­æŒ‡ç¤ºçš„å“ä¸€è·³ï¼› è‹¥æ‰¾ä¸åˆ°ï¼Œåˆ™ä¸¢å¼ƒè¯¥IPæ•°æ®åŒ…å¹¶é€šå‘Šæºä¸»æœºã€‚ å†²çªåŸŸå’Œå¹¿æ’­åŸŸ ä¸­ç»§å™¨å’Œé›†çº¿å™¨å·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œæ—¢ä¸éš”ç¦»å†²çªåŸŸä¹Ÿä¸éš”ç¦»å¹¿æ’­åŸŸã€‚ é›†çº¿å™¨ã€ç½‘æ¡¥å’Œäº¤æ¢æœº(å¤šç«¯å£ç½‘æ¡¥)å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼Œå¯ä»¥éš”ç¦»å†²çªåŸŸï¼Œä¸èƒ½éš”ç¦»å¹¿æ’­åŸŸã€‚ è·¯ç”±å™¨å·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œæ—¢éš”ç¦»å†²çªåŸŸï¼Œä¹Ÿéš”ç¦»å¹¿æ’­åŸŸã€‚ è·¯ç”±å™¨éš”ç¦»å¹¿æ’­åŸŸã€‚å¦åˆ™ä¼šæœ‰å¹¿æ’­é£æš´ã€‚ è·¯ç”±èšåˆå¦‚è·¯ç”±å™¨Aä¸Šè¿æ¥åŒä¸€ç½‘ç»œçš„å¤šå°ä¸»æœºï¼Œè·¯ç”±å™¨Bä¸Aç›¸è¿ã€‚è‹¥Aå°†æ‰€æœ‰ä¸»æœºçš„å…·ä½“IPåœ°å€éƒ½æŠ¥ç»™Bï¼Œåˆ™è·¯ç”±å™¨Bä¸­ä¼šå¢åŠ å¤šé¡¹è·¯ç”±æ¡ç›®ã€‚ å¯å®é™…ä¸ŠBå‘Aä¸­ä»»æ„ä¸€ä¸ªä¸»æœºè½¬å‘æ•°æ®çš„æ—¶éƒ½æ˜¯èµ°åŒä¸€ä¸ªç«¯å£ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†è¿™äº›ç½‘ç»œçš„å…±åŒå‰ç¼€æå–å‡ºæ¥æˆä¸ºæ–°çš„ç½‘ç»œå·ï¼ŒåŒæ—¶å°†å‰©ä½™ä¸»æœºå·ç½®0æ”¾å…¥è·¯ç”±å™¨Bä¸­ å¦‚ï¼šAè¿æ¥äº†172.1.4.0/25å’Œ172.1.7.0/24ï¼Œåˆ™æå–å…¬å…±å‰ç¼€èšåˆåå˜ä¸º172.1.4.0/22 IPv4æ•°æ®æŠ¥é¦–éƒ¨æ ¼å¼ ç‰ˆæœ¬ å 4æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPåè®®ç‰ˆæœ¬ã€‚é€šä¿¡åŒæ–¹ä½¿ç”¨çš„IPåè®®ç‰ˆæœ¬å¿…é¡»ä¸€è‡´ã€‚ç›®å‰å¹¿æ³›ä½¿ç”¨çš„IPåè®®ç‰ˆæœ¬ä¸ºå·ä¸º4(IPv4) é¦–éƒ¨é•¿åº¦ å 4æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥é¦–éƒ¨é•¿åº¦ã€‚è¯¥å­—æ®µå–å€¼ä»¥4å­—èŠ‚ä¸ºå•ä½ æœ€å°åè¿›åˆ¶å–å€¼ä¸º5ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥é¦–éƒ¨åªæœ‰20å­—èŠ‚ã€4å­—èŠ‚å•ä½ï¼Œæ‰€ä»¥å–å€¼5å¯¹åº”20å­—èŠ‚ã€‘å›ºå®šéƒ¨åˆ† æœ€å¤§åè¿›åˆ¶å–å€¼ä¸º15ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥é¦–éƒ¨åŒ…å«20å­—èŠ‚å›ºå®šéƒ¨åˆ†å’Œæœ€å¤§40å­—èŠ‚å¯å˜éƒ¨åˆ† å¯é€‰å­—æ®µ é•¿åº¦ä»1åˆ°40ä¸ªå­—èŠ‚ä¸ç­‰ã€‚ç”¨æ¥æ”¯æŒæ’é”™ã€æµ‹é‡åŠå®‰å…¨ç­‰æªæ–½ å¯é€‰å­—æ®µå¢åŠ äº†IPæ•°æ®æŠ¥çš„åŠŸèƒ½ï¼Œä½†è¿™åŒæ—¶ä¹Ÿä½¿å¾—IPæ•°æ®æŠ¥çš„é¦–éƒ¨é•¿åº¦æˆä¸ºå¯å˜çš„ã€‚è¿™å°±å¢åŠ äº†æ¯ä¸€ä¸ªè·¯ç”±å™¨å¤„ç†IPæ•°æ®æŠ¥çš„å¼€é”€ã€‚å®é™…ä¸Šå¯é€‰å­—æ®µå¾ˆå°‘è¢«ä½¿ç”¨ å¡«å……å­—æ®µ ç¡®ä¿é¦–éƒ¨é•¿åº¦ä¸º4å­—èŠ‚é•¿åº¦çš„æ•´æ•°å€ï¼Œä½¿ç”¨å…¨0è¿›è¡Œå¡«å…… åŒºåˆ†æœåŠ¡ å 8æ¯”ç‰¹ï¼Œåˆ©ç”¨è¯¥å­—æ®µçš„ä¸åŒæ•°å€¼å¯æä¾›ä¸åŒç­‰çº§çš„æœåŠ¡è´¨é‡ï¼Œåªæœ‰åœ¨ä½¿ç”¨åŒºåˆ†æœåŠ¡æ—¶ï¼Œè¯¥å­—æ®µæ‰èµ·ä½œç”¨ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä½¿ç”¨è¯¥å­—æ®µ æ€»é•¿åº¦ å 16æ¯”ç‰¹ï¼Œè¡¨ç¤ºIPæ•°æ®æŠ¥çš„æ€»é•¿åº¦ã€é¦–éƒ¨+æ•°æ®è½½è·ã€‘ï¼Œæœ€å¤§å–å€¼ä¸ºåè¿›åˆ¶65535ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ æ ‡è¯† å 16æ¯”ç‰¹ï¼Œå±äºåŒä¸€ä¸ªæ•°æ®æŠ¥çš„å„åˆ†ç‰‡æ•°æ®æŠ¥åº”è¯¥å…·æœ‰ç›¸åŒçš„æ ‡è¯†ã€å¯ç†è§£ä¸ºIDã€‘ IPè½¯ä»¶ç»´æŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯äº§ç”Ÿä¸€ä¸ªæ•°æ®æŠ¥ï¼Œè®¡æ•°å™¨å€¼+1ï¼Œå¹¶å°†æ­¤å€¼èµ‹ç»™æ ‡è¯†å­—æ®µ æ ‡å¿— å 3æ¯”ç‰¹ï¼Œå„æ¯”ç‰¹å«ä¹‰å¦‚ä¸‹ DFä½ï¼š1è¡¨ç¤ºä¸å…è®¸åˆ†ç‰‡ï¼Œ0è¡¨ç¤ºå…è®¸ MFä½ï¼š1è¡¨ç¤ºâ€åé¢è¿˜æœ‰åˆ†ç‰‡â€ï¼Œ0è¡¨ç¤ºâ€è¿™æ˜¯æœ€åä¸€ä¸ªåˆ†ç‰‡â€ ä¿ç•™ä½ï¼šå¿…é¡»ä¸º0 ç‰‡åç§»(å¿…é¡»æ˜¯æ•´æ•°) å 13æ¯”ç‰¹ï¼ŒæŒ‡å‡ºåˆ†ç‰‡æ•°æ®æŠ¥çš„æ•°æ®è½½è·éƒ¨åˆ†åç§»å…¶åœ¨åŸæ•°æ®æŠ¥çš„ä½ç½®æœ‰å¤šå°‘å•ä½ ç‰‡åç§»ä»¥8ä¸ªå­—èŠ‚ä¸ºå•ä½ ä¸¾ä¾‹å­ï¼š ç”Ÿå­˜æ—¶é—´ å 8æ¯”ç‰¹ï¼Œæœ€åˆä»¥ç§’ä¸ºå•ä½ï¼Œæœ€å¤§ç”Ÿå­˜å‘¨æœŸä¸º255ç§’ï¼›è·¯ç”±å™¨è½¬å‘IPæ•°æ®æŠ¥æ—¶ï¼Œå°†IPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„è¯¥å­—æ®µå€¼å‡å»IPæ•°æ®æŠ¥åœ¨æœ¬è·¯ç”±å™¨ä¸Šè€—è´¹çš„æ—¶é—´ï¼Œè‹¥ä¸ä¸º0ã€è¯´æ˜è·¯ç”±å™¨æ¶ˆè€—æ—¶é—´åè¿˜æ´»ç€ã€‘å°±è½¬å‘ï¼Œå¦åˆ™ä¸¢å¼ƒ ç°åœ¨ä»¥â€è·³æ•°â€ä¸ºå•ä½ï¼Œè·¯ç”±å™¨è½¬å‘IPæ•°æ®æŠ¥æ—¶ï¼Œå°†IPæ•°æ®æŠ¥é¦–éƒ¨ä¸­çš„è¯¥å­—æ®µå€¼å‡1ï¼Œè‹¥ä¸ä¸º0å°±è½¬å‘ï¼Œå¦åˆ™ä¸¢å¼ƒã€é˜²æ­¢å…œåœˆã€‘ åè®® å 8æ¯”ç‰¹ï¼ŒæŒ‡æ˜IPv4æ•°æ®æŠ¥çš„æ•°æ®éƒ¨åˆ†æ˜¯ä½•ç§åè®®æ•°æ®å•å…ƒ é¦–éƒ¨æ£€éªŒå’Œ å 16æ¯”ç‰¹ï¼Œç”¨æ¥æ£€æµ‹é¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°å·®é”™ï¼Œæ¯”CRCæ£€éªŒç ç®€å•ï¼Œç§°ä¸ºå› ç‰¹ç½‘æ£€éªŒå’Œ IPæ•°æ®æŠ¥æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œè·¯ç”±å™¨éƒ½è¦é‡æ–°è®¡ç®—é¦–éƒ¨æ£€éªŒå’Œï¼Œå› ä¸ºæŸäº›å­—æ®µã€ç”Ÿå­˜æ—¶é—´ã€æ ‡å¿—ã€ç‰‡åç§»ç­‰ã€‘çš„å–å€¼å¯èƒ½å‘ç”Ÿå˜åŒ– ç”±äºIPå±‚æœ¬èº«ä¸æä¾›å¯é ä¼ è¾“æœåŠ¡ï¼Œå¹¶ä¸”è®¡ç®—é¦–éƒ¨æ ¡éªŒå’Œæ˜¯ä¸€é¡¹è€—æ—¶çš„æ“ä½œï¼Œå› æ­¤åœ¨IPv6ä¸­ï¼Œè·¯ç”±å™¨ä¸å†è®¡ç®—é¦–éƒ¨æ ¡éªŒå’Œï¼Œä»è€Œæ›´å¿«è½¬å‘IPæ•°æ®æŠ¥ æºIPåœ°å€å’Œç›®çš„IPåœ°å€ å„å 32æ¯”ç‰¹ï¼Œç”¨æ¥å¡«å†™å‘é€è¯¥IPæ•°æ®æŠ¥çš„æºä¸»æœºIPåœ°å€å’Œæ¥æ”¶è¯¥IPæ•°æ®æŠ¥çš„ç›®çš„ä¸»æœº è·¯ç”±é€‰æ‹©åè®®æ¦‚è¿°è·¯ç”±é€‰æ‹©åˆ†ä¸ºé™æ€è·¯ç”±é€‰æ‹©ä¸åŠ¨æ€è·¯ç”±é€‰æ‹©ã€‚ é™æ€è·¯ç”±é€‰æ‹©ï¼š 1.ç”±äººå·¥é…ç½®çš„ç½‘ç»œè·¯ç”±ã€é»˜è®¤è·¯ç”±ã€ç‰¹å®šä¸»æœºè·¯ç”±ã€é»‘æ´è·¯ç”±ç­‰éƒ½å±äºé™æ€è·¯ç”±ã€‚2.è¿™ç§äººå·¥é…ç½®æ–¹å¼ç®€å•ã€å¼€é”€å°ã€‚ä½†ä¸èƒ½åŠæ—¶é€‚åº”ç½‘ç»œçŠ¶æ€(æµé‡ã€æ‹“æ‰‘ç­‰)çš„å˜åŒ–ã€‚3.ä¸€èˆ¬åªåœ¨å°è§„æ¨¡ç½‘ç»œä¸­é‡‡ç”¨ã€‚ åŠ¨æ€è·¯ç”±é€‰æ‹©ï¼š 1.è·¯ç”±å™¨é€šè¿‡è·¯ç”±é€‰æ‹©åè®®è‡ªåŠ¨è·å–è·¯ç”±ä¿¡æ¯ã€‚2.æ¯”è¾ƒå¤æ‚ã€å¼€é”€æ¯”è¾ƒå¤§ã€‚èƒ½è¾ƒå¥½åœ°é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–ã€‚3.é€‚ç”¨äºå¤§è§„æ¨¡ç½‘ç»œã€‚ é™æ€è·¯ç”±é…ç½® **æ¦‚å¿µï¼š**æ˜¯æŒ‡ç”¨æˆ·æˆ–ç½‘ç»œç®¡ç†å‘˜ä½¿ç”¨è·¯ç”±å™¨çš„ç›¸å…³å‘½ä»¤ç»™è·¯ç”±å™¨äººå·¥é…ç½®è·¯ç”±è¡¨ å¯èƒ½ç”±äºï¼šâ‘ é…ç½®é”™è¯¯ â‘¡èšåˆäº†ä¸å­˜åœ¨çš„ç½‘ç»œ â‘¢ç½‘ç»œæ•…éšœ è€Œå‡ºç°è·¯ç”±ç¯è·¯é”™è¯¯ é»˜è®¤è·¯ç”±ä¸ºï¼š0.0.0.00ã€‚ ä½œç”¨æ˜¯å½“è·¯ç”±è¡¨ä¸çŸ¥é“å¾€å“ªé‡Œè½¬å‘æ—¶ï¼Œå°±ä¼šå¾€é»˜è®¤è·¯ç”±æŒ‡å®šçš„ä¸‹ä¸€è·³ä½ç½®è½¬å‘ã€‚ æ ¹æ®ç½‘ç»œå·æœ€é•¿åŒ¹é…åŸç†ï¼Œé»˜è®¤è·¯ç”±ç½‘ç»œå·é•¿åº¦ä¸º0ï¼Œå› æ­¤ä¸€å®šæ˜¯æœ€åä¸€ä¸ªè¢«åŒ¹é…çš„æ¡ç›®ã€‚ ç‰¹å®šä¸»æœºè·¯ç”±ï¼šå…·ä½“ä¸»æœºIP32ã€‚ç½‘ç»œå·å‰ç¼€é•¿åº¦32ä¿è¯äº†è¿™æ˜¯ç¬¬ä¸€ä¸ªè¢«åŒ¹é…çš„é™æ€æ¡ç›®ã€‚ å¦‚ä½•é˜²æ­¢é”™è¯¯è·¯ç”±å¯¼è‡´IPæ•°æ®æŠ¥æ°¸ä¹…å…œåœˆï¼Ÿ åœ¨IPæ•°æ®æŠ¥é¦–éƒ¨è®¾ç½®ç”Ÿå­˜æ—¶é—´TTLå­—æ®µIPæ•°æ®æŠ¥è¿›å…¥è·¯ç”±å™¨åï¼ŒTTLå­—æ®µçš„å€¼å‡1ã€‚è‹¥TTLçš„å€¼ä¸ç­‰äº0ï¼Œåˆ™è¢«è·¯ç”±å™¨è½¬å‘ï¼Œå¦åˆ™è¢«ä¸¢å¼ƒå¯¹äºèšåˆåæˆ–ç”±äºç½‘ç»œæ•…éšœè€Œä¸å­˜åœ¨çš„è·¯ç”±æ¡ç›®è®¾ç½®é»‘æ´è·¯ç”±æ‰€è°“é»‘æ´è·¯ç”±ï¼Œå³è·¯ç”±å™¨åº”è¯¥ä¸¢å¼ƒçš„è·¯ç”±ã€‚ è·¯ç”±å™¨åŸºæœ¬ç»“æ„ è·¯ç”±é€‰æ‹©éƒ¨åˆ†çš„æ ¸å¿ƒéƒ¨ä»¶ï¼šè·¯ç”±é€‰æ‹©å¤„ç†æœº ä»»åŠ¡ï¼šæ ¹æ®æ‰€ä½¿ç”¨çš„è·¯ç”±é€‰æ‹©åè®®å‘¨æœŸæ€§åœ°ä¸å…¶ä»–è·¯ç”±å™¨è¿›è¡Œè·¯ç”±ä¿¡æ¯äº¤äº’ï¼Œæ¥æ›´æ–°è·¯ç”±è¡¨ã€‚ åˆ†ç»„è½¬å‘éƒ¨åˆ†ï¼š åˆ†ä¸‰éƒ¨åˆ† 1.äº¤æ¢ç»“æ„ 2.ä¸€ç»„è¾“å…¥ç«¯å£ 2.ä¸€ç»„è¾“å‡ºç«¯å£ã€‚ ä¸€äº›å±æ€§ï¼š è·¯ç”±å™¨å¤„ç†ä¸åŒä¿¡æ¯æ—¶ï¼š å½“ä¿¡å·ä»æŸä¸ªç«¯å£è¿›å…¥è·¯ç”±å™¨æ—¶ï¼Œè·¯ç”±å™¨ä¼šå°†ä¿¡å·ä»è¾“å…¥ç«¯å£æŸ¥è¡¨è½¬å‘åˆ°å¯¹åº”è¾“å‡ºç«¯å£ã€‚ è€Œå¦‚æœæ˜¯è·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯çš„è·¯ç”±æŠ¥æ–‡ï¼Œåˆ™å°†è¿™ç±»åˆ†ç»„é€äº¤è·¯ç”±é€‰æ‹©å¤„ç†æœºã€‚ è·¯ç”±é€‰æ‹©å¤„ç†æœºæ ¹æ®åˆ†ç»„çš„å†…å®¹æ¥æ›´æ–°è‡ªå·±çš„è·¯ç”±è¡¨ã€‚ è·¯ç”±è¡¨ä¸€èˆ¬ä»…åŒ…å«ä»ç›®çš„ç½‘ç»œåˆ°ä¸‹ä¸€è·³çš„æ˜ å°„ è·¯ç”±è¡¨éœ€è¦å¯¹ç½‘ç»œæ‹“æ‰‘å˜åŒ–çš„è®¡ç®—æœ€ä¼˜åŒ– è½¬å‘è¡¨æ˜¯ä»è·¯ç”±è¡¨å¾—å‡ºçš„ è½¬å‘è¡¨çš„ç»“æ„åº”å½“ä½¿æŸ¥æ‰¾è¿‡ç¨‹æœ€ä¼˜åŒ– æœ¬è¯¾ä¸ä¸¥æ ¼åŒºåˆ†è·¯ç”±è¡¨ä¸è½¬å‘è¡¨ã€‚ è·¯ç”±é€‰æ‹©å¤„ç†æœºé™¤äº†å¤„ç†æ”¶åˆ°çš„è·¯ç”±æŠ¥æ–‡å¤–ï¼Œè¿˜ä¼šå‘¨æœŸæ€§ç»™å…¶ä»–è·¯ç”±å™¨å‘é€è‡ªå·±æ‰€çŸ¥é“çš„è·¯ç”±ä¿¡æ¯ã€‚ è·¯ç”±å™¨å„ç«¯å£è¿˜åº”å…·æœ‰è¾“å…¥ç¼“å†²åŒºå’Œè¾“å‡ºç¼“å†²åŒºã€‚ è¾“å…¥ç¼“å†²åŒºç”¨æ¥æš‚å­˜æ–°è¿›å…¥è·¯ç”±å™¨ä½†è¿˜æ¥ä¸åŠå¤„ç†çš„åˆ†ç»„ã€‚ è¾“å‡ºç¼“å†²åŒºç”¨æ¥æš‚å­˜å·²ç»å¤„ç†å®Œæ¯•ä½†è¿˜æ¥ä¸åŠå‘é€çš„åˆ†ç»„ã€‚ è·¯ç”±å™¨çš„ç«¯å£ä¸€èˆ¬éƒ½å…·æœ‰è¾“å…¥å’Œè¾“å‡ºçš„åŠŸèƒ½ã€‚ è·¯ç”±é€‰æ‹©åè®®å› ç‰¹ç½‘æ‰€é‡‡ç”¨çš„çš„è·¯ç”±é€‰æ‹©åè®®ä¸»è¦ç‰¹ç‚¹ è‡ªé€‚åº”ï¼šåŠ¨æ€è·¯ç”±é€‰æ‹©ï¼Œèƒ½è¾ƒå¥½åœ°é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ– åˆ†å¸ƒå¼ï¼šè·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œå…±åŒå®Œæˆè·¯ç”±ä¿¡æ¯è·å–å’Œæ›´æ–°ã€‚ åˆ†å±‚æ¬¡ï¼šå°†æ•´ä¸ªå› ç‰¹ç½‘åˆ’åˆ†ä¸ºè®¸å¤šè¾ƒå°çš„ç½‘ç»œç¾¤è‡ªæ²»ç³»ç»ŸAS åŸŸé—´è·¯ç”±é€‰æ‹©ä½¿ç”¨å¤–éƒ¨ç½‘å…³åè®® EGP æ—©æœŸç”¨ç½‘å…³ä»£æ›¿è·¯ç”±å™¨ï¼Œç°åœ¨å¯ä»¥ç”¨ERPä»£æ›¿EGPã€‚ åŸŸå†…è·¯ç”±é€‰æ‹©ä½¿ç”¨å†…éƒ¨ç½‘å…³åè®® IGP ç°åœ¨å¯ä»¥ç”¨IRPä»£æ›¿EGPã€‚ EGP å’Œ IGP åªæ˜¯è·¯ç”±é€‰æ‹©åè®®çš„åˆ†ç±»åç§°ï¼Œä¸æ˜¯å…·ä½“åè®®ã€‚ IGP ä½¿ç”¨çš„åè®®å…·æœ‰ç‹¬ç«‹æ€§ï¼Œå’Œå…¶ä»– IGPä¸ç›¸å…³ã€‚ è·¯ç”±ä¿¡æ¯åè®®RIPç‰¹ç‚¹ï¼š è·¯ç”±ä¿¡æ¯åè®®RIP(Routing Information Protocol)æ˜¯å†…éƒ¨ç½‘å…³åè®®IGPä¸­æœ€å…ˆå¾—åˆ°å¹¿æ³›ä½¿ç”¨çš„åè®®ä¹‹ä¸€ï¼Œå…¶ç›¸å…³æ ‡å‡†æ–‡æ¡£ä¸ºRFC 1058ã€‚ RIP è¦æ±‚è‡ªæ²»ç³»ç»ŸASå†…çš„æ¯ä¸€ä¸ªè·¯ç”±å™¨éƒ½è¦ç»´æŠ¤ä»å®ƒè‡ªå·±åˆ°ASå†…å…¶ä»–æ¯ä¸€ä¸ªç½‘ç»œçš„è·ç¦»è®°å½•ã€‚è¿™æ˜¯ä¸€ç»„è·ç¦»ï¼Œç§°ä¸ºâ€œè·ç¦»å‘é‡D-V(Distance-Vector)â€ RIPä½¿ç”¨è·³æ•°ä½œä¸ºåº¦é‡æ¥è¡¡é‡åˆ°è¾¾ç›®çš„ç½‘ç»œçš„è·ç¦» è·¯ç”±å™¨åˆ°ç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸º1 è·¯ç”±å™¨åˆ°éç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸ºæ‰€ç»è¿‡çš„è·¯ç”±å™¨æ•°+1 å…è®¸ä¸€æ¡è·¯å¾„æœ€å¤šåªèƒ½åŒ…å«15ä¸ªè·¯ç”±å™¨ã€‚â€œè·ç¦»â€ç­‰äº16æ—¶ç›¸å½“äºä¸å¯è¾¾ã€‚å› æ­¤ï¼ŒRIPåªé€‚ç”¨äºå°å‹äº’è”ç½‘ RIPè®¤ä¸ºå¥½çš„è·¯ç”±å°±æ˜¯â€è·ç¦»çŸ­â€çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯æ‰€é€šè¿‡è·¯ç”±å™¨æ•°é‡æœ€å°‘çš„è·¯ç”±ã€‚ å½“åˆ°è¾¾åŒä¸€ç›®çš„ç½‘ç»œæœ‰å¤šæ¡â€è·ç¦»ç›¸ç­‰â€çš„è·¯ç”±æ—¶ï¼Œå¯ä»¥è¿›è¡Œç­‰ä»·è´Ÿè½½å‡è¡¡ã€‚ RIPåŒ…å«ä»¥ä¸‹ä¸‰ä¸ªè¦ç‚¹ å’Œè°äº¤æ¢ä¿¡æ¯ ä»…å’Œç›¸é‚»è·¯ç”±å™¨äº¤æ¢ä¿¡æ¯ äº¤æ¢ä»€ä¹ˆä¿¡æ¯ äº¤æ¢çš„æ˜¯è‡ªå·±è·¯ç”±è¡¨çš„ä¿¡æ¯ ä½•æ—¶äº¤æ¢ä¿¡æ¯ å‘¨æœŸæ€§äº¤æ¢ä¿¡æ¯ï¼ˆä¾‹å¦‚æ¯30ç§’ï¼‰ RIPå­˜åœ¨çš„é—®é¢˜ å­˜åœ¨â€åæ¶ˆæ¯ä¼ æ’­å¾ˆæ…¢â€çš„é—®é¢˜ï¼Œåˆç§°ä¸ºè·¯ç”±ç¯è·¯(ä¸¤ä¸ªè·¯ç”±å™¨ç›¸äº’å­¦ä¹ é”™è¯¯è·¯ç”±ï¼Œé€ æˆå¾ªç¯)æˆ–è·ç¦»æ— ç©·è®¡æ•°é—®é¢˜ã€‚ è¿™æ˜¯è·ç¦»å‘é‡ç®—æ³•çš„ä¸€ä¸ªå›ºæœ‰é—®é¢˜ï¼Œå¯ä»¥é‡‡å–å¤šç§æªæ–½å‡å°‘å‡ºç°è¯¥é—®é¢˜çš„æ¦‚ç‡æˆ–å‡å°è¯¥é—®é¢˜å¸¦æ¥çš„å±å®³ã€‚ å‡å°‘é—®é¢˜çš„æªæ–½ï¼š é™åˆ¶æœ€å¤§è·¯å¾„è·ç¦»ä¸º15(16è¡¨ç¤ºä¸å¯è¾¾)ã€‚ å½“è·¯ç”±è¡¨å‘ç”Ÿå˜åŒ–æ—¶å°±ç«‹å³å‘é€æ›´æ–°æŠ¥æ–‡(å³â€è§¦å‘æ›´æ–°â€)ï¼Œè€Œä¸æ˜¯å‘¨æœŸæ€§å‘é€ã€‚ è®©è·¯ç”±å™¨è®°å½•æ”¶åˆ°æŸç‰¹å®šè·¯ç”±ä¿¡æ¯çš„æ¥å£ï¼Œè€Œä¸è®©åŒä¸€è·¯ç”±ä¿¡æ¯å†é€šè¿‡æ­¤æ¥å£åæ–¹å‘ä¼ é€(å³**â€œæ°´å¹³åˆ†å‰²â€â€œæ¯’æ€§åè½¬â€**)ã€‚ å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆOSPFå±æ€§ å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆOSPF(0pen Shortest Path First)ï¼Œæ˜¯ä¸ºå…‹æœRIPçš„ç¼ºç‚¹åœ¨1989å¹´å¼€å‘å‡ºæ¥çš„ã€‚ â€œå¼€æ”¾â€è¡¨æ˜OSPFåè®®ä¸æ˜¯å—æŸä¸€å®¶å‚å•†æ§åˆ¶ï¼Œè€Œæ˜¯å…¬å¼€å‘è¡¨çš„ã€‚â€œ**æœ€çŸ­è·¯å¾„ä¼˜å…ˆâ€**æ˜¯å› ä¸ºä½¿ç”¨äº†Dijkstraæå‡ºçš„æœ€çŸ­è·¯å¾„ç®—æ³•SPFã€‚ ç®€å•æ¥è¯´å°±æ˜¯å¾—åˆ°ä¸€ä¸ªå¸¦æƒæœ‰å‘å›¾ï¼Œä»¥å½“å‰è·¯ç”±å™¨ä¸ºèµ·ç‚¹ï¼Œé€šè¿‡è¿ªæ°æ–¯ç‰¹æ‹‰ç®—æ³•å¾—åˆ°åˆ°è¾¾æŸä¸ªç‚¹çš„æœ€çŸ­è·¯å¾„ OSPFåŸºäºé“¾è·¯çŠ¶æ€ï¼Œè€Œä¸åƒRIPé‚£æ ·æ˜¯åŸºäºè·ç¦»å‘é‡ã€‚ é‡‡ç”¨SPFç®—æ³•è®¡ç®—è·¯ç”±ï¼Œä»ç®—æ³•ä¸Šä¿è¯äº†ä¸ä¼šäº§ç”Ÿè·¯ç”±ç¯è·¯ã€‚ OSPFä¸é™åˆ¶ç½‘ç»œè§„æ¨¡ï¼Œæ›´æ–°æ•ˆç‡é«˜ï¼Œæ”¶æ•›é€Ÿåº¦å¿« é“¾è·¯çŠ¶æ€æ˜¯æŒ‡æœ¬è·¯ç”±å™¨éƒ½å’Œå“ªäº›è·¯ç”±å™¨ç›¸é‚»ï¼Œä»¥åŠç›¸åº”é“¾è·¯çš„â€ä»£ä»·â€ â€œä»£ä»·â€çš„æ„æ€æ˜¯è´¹ç”¨ã€è·ç¦»ã€æ—¶å»¶ã€å¸¦å®½ç­‰ï¼Œè¿™äº›ç”±ç½‘ç»œç®¡ç†äººå‘˜ç¡®å®šã€‚ OSPFäº”ç§åˆ†ç»„ é—®å€™(Hello)åˆ†ç»„ ç”¨æ¥å‘ç°å’Œç»´æŠ¤é‚»å±…è·¯ç”±å™¨çš„å¯è¾¾æ€§ æ•°æ®åº“æè¿°(Database Description)åˆ†ç»„ å‘é‚»å±…è·¯ç”±å™¨ç»™å‡ºè‡ªå·±çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“ä¸­çš„æ‰€æœ‰é“¾è·¯çŠ¶æ€é¡¹ç›®çš„æ‘˜è¦ä¿¡æ¯ é“¾è·¯çŠ¶æ€è¯·æ±‚ä¿¡æ¯(Link State Request)åˆ†ç»„ å‘é‚»å±…è·¯ç”±å™¨è¯·æ±‚å‘é€ç‰¹å®šé“¾è·¯çŠ¶æ€é¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯ é“¾è·¯çŠ¶æ€æ›´æ–°LSU(Link State Update)åˆ†ç»„ è·¯ç”±å™¨ä½¿ç”¨è¿™ç§åˆ†ç»„å°†å…¶é“¾è·¯çŠ¶æ€è¿›è¡Œæ´ªæ³›å‘é€ï¼Œå³ç”¨æ´ªæ³›æ³•å¯¹å…¨ç½‘æ›´æ–°é“¾è·¯çŠ¶æ€ é“¾è·¯çŠ¶æ€ç¡®è®¤(Link State Acknowledgement)åˆ†ç»„ è¿™æ˜¯å¯¹é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„ åŸºæœ¬å·¥ä½œåŸç† OSPFç›¸é‚»è·¯ç”±å™¨ä¹‹é—´é€šè¿‡äº¤äº’é—®å€™(Hello)åˆ†ç»„ï¼Œå»ºç«‹å’Œç»´æŠ¤é‚»å±…å…³ç³»ã€‚ Helloåˆ†ç»„å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œå‘å¾€ç»„æ’­åœ°å€224.0.0.5ï¼› å‘é€å‘¨æœŸä¸º10ç§’ï¼› 40ç§’æœªæ”¶åˆ°æ¥è‡ªé‚»å±…è·¯ç”±å™¨çš„Helloåˆ†ç»„ï¼Œåˆ™è®¤ä¸ºè¯¥é‚»å±…è·¯ç”±å™¨ä¸å¯è¾¾ ä½¿ç”¨OSPFçš„æ¯ä¸ªè·¯ç”±å™¨éƒ½ä¼šäº§ç”Ÿé“¾è·¯çŠ¶æ€é€šå‘ŠLSA(link state advertisement)ï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ ç›´è¿ç½‘ç»œçš„é“¾è·¯çŠ¶æ€ä¿¡æ¯ é‚»å±…è·¯ç”±å™¨çš„é“¾è·¯çŠ¶æ€ä¿¡æ¯ LSAè¢«å°è£…åœ¨é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„LSUï¼ˆupdate groupï¼‰ä¸­ï¼Œé‡‡ç”¨æ´ªæ³›æ³•å‘é€ æ´ªæ³›æ³•æ„å‘³ç€å…¶ä»–è·¯ç”±å™¨æ”¶åˆ°è¯¥ LSU ï¼Œä¹Ÿä¼šä»è‡ªå·±å…¶ä»–æ‰€æœ‰æ¥å£è½¬å‘è¯¥åˆ†ç»„ã€‚ ä½¿ç”¨OSPFçš„æ¯ä¸ªè·¯ç”±å™¨éƒ½æœ‰ä¸€ä¸ªé“¾è·¯çŠ¶æ€æ•°æ®åº“LSDBï¼Œç”¨äºå­˜å‚¨LSA é€šè¿‡å„è·¯ç”±å™¨æ´ªæ³›æ³•å‘é€å°è£…æœ‰è‡ªå·±LSAçš„LSUåˆ†ç»„ï¼Œå„è·¯ç”±å™¨çš„LSDBæœ€ç»ˆè¾¾åˆ°ä¸€è‡´ ä½¿ç”¨OSPFçš„å„è·¯ç”±å™¨åŸºäºLSDBè¿›è¡Œæœ€çŸ­è·¯å¾„ä¼˜å…ˆSPFè®¡ç®—ï¼Œæ„å»ºå‡ºå„ç§åˆ°è¾¾å…¶ä»–å„è·¯ç”±å™¨çš„æœ€çŸ­è·¯å¾„ï¼Œå³æ„å»ºå„è‡ªçš„è·¯ç”±è¡¨ OSPFåŸºæœ¬å·¥ä½œè¿‡ç¨‹ ç›¸é‚»è·¯ç”±å™¨ä¹‹é—´å‘¨æœŸæ€§äº¤äº’å‘é€é—®å€™åˆ†ç»„(Hello)ï¼Œä»¥ä¾¿å»ºç«‹å’Œç»´æŠ¤é‚»å±…å…³ç³»ã€‚ å»ºç«‹é‚»å±…å…³ç³»åï¼Œç»™é‚»å±…è·¯ç”±å™¨å‘é€æ•°æ®åº“æè¿°åˆ†ç»„(DD)ï¼Œä¹Ÿå°±æ˜¯å°†è‡ªå·±é“¾è·¯çŠ¶æ€æ•°æ®åº“ä¸­çš„æ‰€æœ‰é“¾è·¯çŠ¶æ€é¡¹ç›®çš„æ‘˜è¦ä¿¡æ¯å‘é€ç»™é‚»å±…è·¯ç”±å™¨ã€‚ R1 æ”¶åˆ° R2 çš„æ•°æ®åº“æè¿°åˆ†ç»„åï¼Œè‹¥å‘ç°è‡ªå·±ç¼ºå°‘å…¶ä¸­æŸäº›é“¾è·¯çŠ¶æ€é¡¹ç›®ï¼ŒR1 åˆ™ä¼šå‘é€é“¾è·¯çŠ¶æ€è¯·æ±‚åˆ†ç»„(LSR)ã€‚ R2 æ”¶åˆ°é“¾è·¯çŠ¶æ€è¯·æ±‚åˆ†ç»„åï¼Œåˆ™ä¼šå°†å…¶æ‰€ç¼ºå°‘çš„é“¾è·¯çŠ¶æ€é¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯å°è£…åœ¨**é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„(LSU)**ä¸­å‘é€ç»™ R1 å›å»ã€‚ R1 æ”¶åˆ°é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„åï¼Œå°†è¿™äº›ä¿¡æ¯æ·»åŠ åˆ°è‡ªå·±çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“ä¸­ã€‚ R1 ç»™ R2 å‘é€é“¾è·¯çŠ¶æ€ç¡®è®¤åˆ†ç»„ã€‚ R2ä¹Ÿå¯ä»¥ç»™ R1 è¯·æ±‚è‡ªå·±æ‰€ç¼ºå°‘çš„é“¾è·¯çŠ¶æ€é¡¹ç›®çš„ç›¸ä¿¡ä¿¡æ¯ã€‚ æœ€ç»ˆï¼ŒR1 å’Œ R2 çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“å°†è¾¾åˆ°ä¸€è‡´ï¼ˆåŒæ­¥ï¼‰ã€‚ æ¯30åˆ†é’Ÿæˆ–é“¾è·¯çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè·¯ç”±å™¨éƒ½ä¼šå‘é€é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„ï¼Œæ”¶åˆ°è¯¥åˆ†ç»„çš„å…¶ä»–è·¯ç”±å™¨ä¹Ÿä¼šæ´ªæ³›è½¬å‘å¹¶è¿”å›LSç¡®è®¤åˆ†ç»„ã€‚ è¿™åˆç§°ä¸ºæ–°æƒ…å†µä¸‹çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“åŒæ­¥ã€‚ é‚»å±…å…³ç³»çš„å»ºç«‹ ä¸€æ¡æ€»çº¿ä¸Šæœ‰å¤šå°ä¸»æœºï¼Œåˆ™å®ƒä»¬äº’ä¸ºé‚»å±…ï¼Œå› æ­¤æ¯ä¸ªè·¯ç”±å™¨éƒ½è¦å‘å…¶ä»–è·¯ç”±å™¨å‘é€é—®å€™åˆ†ç»„å’Œé“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„ã€‚ä¸ºäº†å‡å°‘æ‰€å‘é€åˆ†ç»„çš„æ•°é‡ï¼Œåˆ™éœ€è¦ç”¨ç›¸åº”æ–¹æ³•å¯¹é‚»å±…å…³ç³»è¿›è¡Œåˆ å‡ã€‚ OSPFé‡‡ç”¨é€‰ä¸¾æŒ‡å®šè·¯ç”±å™¨DR(Designated Router)å’Œ**å¤‡ç”¨çš„æŒ‡å®šè·¯ç”±å™¨BDR(**Backup Designated Router)çš„æ–¹æ³•å‡å°‘é‚»å±…æ•°ç›® æ‰€æœ‰çš„éDRBDRåªä¸DRBDRå»ºç«‹é‚»å±…å…³ç³» éDRBDRä¹‹é—´é€šè¿‡DRBDRäº¤æ¢ä¿¡æ¯ å½“DRå¤±æ•ˆæ—¶ç”±BDRé¡¶ä¸Š è¿™ä¸äº¤æ¢æœºç”Ÿæˆæ ‘åè®®é€‰ä¸¾æ ¹äº¤æ¢æœºç±»ä¼¼ã€‚ åŒºåŸŸ ä¸ºäº†ä½¿OSPFèƒ½å¤Ÿç”¨äºè§„æ¨¡å¾ˆå¤§çš„ç½‘ç»œï¼ŒOSPFæŠŠä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ›´å°çš„èŒƒå›´ï¼Œå«åšåŒºåŸŸ(Area)ã€‚ æ ¼å¼ï¼š æ¯ä¸ªåŒºåŸŸéƒ½æœ‰ä¸€ä¸ª32æ¯”ç‰¹çš„åŒºåŸŸæ ‡è¯†ç¬¦ ä¸»å¹²åŒºåŸŸç”¨äºè¿é€šå…¶ä»–åŒºåŸŸã€‚å…¶ä»–åŒºåŸŸçš„æ ‡è¯†ç¬¦ä¸èƒ½ä¸º0ä¸”äº’ä¸ç›¸åŒ æ¯ä¸ªåŒºåŸŸçš„è§„æ¨¡ä¸èƒ½å¤ªå¤§ï¼Œä¸€èˆ¬æ‰€åŒ…å«çš„è·¯ç”±å™¨ä¸èƒ½è¶…è¿‡200ä¸ªã€‚ å¥½å¤„ï¼šæŠŠåˆ©ç”¨æ´ªæ³›æ³•äº¤æ¢é“¾è·¯çŠ¶æ€ä¿¡æ¯çš„èŒƒå›´å±€é™äºæ¯ä¸€ä¸ªåŒºåŸŸè€Œä¸æ˜¯æ•´ä¸ªè‡ªæ²»ç³»ç»Ÿã€‚è¿™æ ·å‡å°‘äº†æ•´ä¸ªç½‘ç»œä¸Šçš„é€šä¿¡é‡ã€‚ å‘½åï¼š å¦‚æœè·¯ç”±å™¨çš„æ‰€æœ‰æ¥å£éƒ½åœ¨åŒä¸€ä¸ªåŒºåŸŸå†…,åˆ™è¯¥è·¯ç”±å™¨ç§°ä¸ºåŒºåŸŸå†…è·¯ç”±å™¨IR(internal router)ã€‚ ä¸ºäº†æœ¬åŒºåŸŸå¯ä»¥å’Œè‡ªæ²»ç³»ç»Ÿå†…çš„å…¶ä»–åŒºåŸŸè¿é€šï¼Œæ¯ä¸ªåŒºåŸŸéƒ½ä¼šæœ‰ä¸€ä¸ªåŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ABR(area border router)ã€‚ åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨çš„ä¸€ä¸ªæ¥å£è¿æ¥è‡ªèº«æ‰€åœ¨åŒºåŸŸï¼Œå¦ä¸€ä¸ªæ¥å£è¿æ¥ä¸»å¹²åŒºåŸŸã€‚ **ä¸»å¹²åŒºåŸŸå†…è·¯ç”±å™¨ç§°ä¸ºä¸»å¹²è·¯ç”±å™¨ã€‚**åŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ä¸€å®šæ˜¯ä¸»å¹²è·¯ç”±å™¨ã€‚ ä¸»å¹²åŒºåŸŸå†…è¿˜è¦æœ‰ä¸€ä¸ªè·¯ç”±å™¨ä¸“é—¨å’Œæœ¬è‡ªæ²»åŒºå¤–çš„å…¶ä»–è‡ªæ²»ç³»ç»Ÿäº¤æ¢è·¯ç”±ä¿¡æ¯ã€‚è¿™ä¸ªè·¯ç”±å™¨ç§°ä¸ºè‡ªæ²»ç³»ç»Ÿè¾¹ç•Œè·¯ç”±å™¨ASBR(AS border router)ã€‚ å·¥ä½œè¿‡ç¨‹ï¼š è¾¹ç•ŒåŒºåŸŸå‘ä¸»å¹²åŒºåŸŸå‘é€è‡ªå·±æ‰€åœ¨åŒºåŸŸçš„é“¾è·¯çŠ¶æ€é€šå‘Šï¼Œå‘è‡ªå·±æ‰€åœ¨åŒºåŸŸå‘é€åŒºåŸŸ0ï¼Œ1ï¼Œ2çš„é“¾è·¯çŠ¶æ€é€šå‘Šã€‚ åˆ†å±‚æ¬¡åˆ’åˆ†åŒºåŸŸï¼Œå¢åŠ äº†äº¤æ¢ä¿¡æ¯ç§ç±»ï¼Œè®©OSPFåè®®æ›´å¤æ‚äº†ã€‚ä½†è¿™ä¹Ÿä½¿æ¯ä¸ªåŒºåŸŸå†…éƒ¨äº¤æ¢è·¯ç”±ä¿¡æ¯çš„é€šä¿¡é‡å¤§å¤§å‡å°ã€‚å› æ­¤OSPFèƒ½å¤Ÿä½¿ç”¨åœ¨è§„æ¨¡å¾ˆå¤§çš„è‡ªæ²»ç³»ç»Ÿä¸­ã€‚ è¾¹ç•Œç½‘å…³åè®®BGPåº”ç”¨åœºæ™¯: 1.å†…éƒ¨ç½‘å…³åè®®IGP(å¦‚è·¯ç”±ä¿¡æ¯åè®®RIPæˆ–æœ€çŸ­è·¯å¾„ä¼˜å…ˆOSPF): è®¾æ³•ä½¿åˆ†ç»„åœ¨ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†…å°½å¯èƒ½æœ‰æ•ˆåœ°ä»æºç½‘ç»œä¼ è¾“åˆ°ç›®çš„ç½‘ç»œ æ— éœ€è€ƒè™‘è‡ªæ²»ç³»ç»Ÿå¤–éƒ¨å…¶ä»–æ–¹é¢çš„ç­–ç•¥ 2.å¤–éƒ¨ç½‘å…³åè®®EGP(å¦‚è¾¹ç•Œç½‘å…³åè®®BGP): åœ¨ä¸åŒè‡ªæ²»ç³»ç»Ÿå†…ï¼Œåº¦é‡è·¯ç”±çš„â€ä»£ä»·â€(è·ç¦»ï¼Œå®½å¸¦ï¼Œè´¹ç”¨ç­‰)å¯èƒ½ä¸åŒã€‚å› æ­¤ï¼Œå¯¹äºè‡ªæ²»ç³»ç»Ÿä¹‹é—´çš„è·¯ç”±é€‰æ‹©ï¼Œä½¿ç”¨â€ä»£ä»·â€ä½œä¸ºåº¦é‡æ¥å¯»æ‰¾æœ€ä½³è·¯ç”±æ˜¯ä¸è¡Œçš„ æ¯”å¦‚Aç³»ç»Ÿè·¯ç”±é€‰æ‹©åº¦é‡æ˜¯è·ç¦»ï¼ŒBç³»ç»Ÿæ˜¯å¸¦å®½â€¦â€¦é‚£ä¹ˆAåˆ°ç³»ç»ŸEçš„è·¯ç”±æ€æ ·èµ°æœ€å¥½å‘¢ï¼Ÿç”±äºæ²¡æœ‰ç»Ÿä¸€åº¦é‡ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥å¾—åˆ°æœ€ä½³è·¯ç”± è‡ªæ²»ç³»ç»Ÿä¹‹é—´çš„è·¯ç”±é€‰æ‹©å¿…é¡»è€ƒè™‘ç›¸å…³ç­–ç•¥(æ”¿æ²»ã€ç»æµã€å®‰å…¨ç­‰) å¦‚ä¸­å›½çš„æ•°æ®æŠ¥å°½é‡è¦ç»•å¼€ç¾å›½çš„è‡ªæ²»ç³»ç»Ÿ BGPåªèƒ½æ˜¯åŠ›æ±‚å¯»æ‰¾ä¸€æ¡èƒ½å¤Ÿåˆ°è¾¾ç›®çš„ç½‘ç»œä¸”æ¯”è¾ƒå¥½çš„è·¯ç”±(ä¸èƒ½å…œåœˆå­)è€Œå¹¶éè¦å¯»æ‰¾ä¸€æ¡æœ€ä½³è·¯ç”± åŸºæœ¬å·¥ä½œåŸç† åœ¨é…ç½®BGPæ—¶ï¼Œæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿçš„ç®¡ç†å‘˜è¦é€‰æ‹©è‡³å°‘ä¸€ä¸ªè·¯ç”±å™¨ä½œä¸ºè¯¥è‡ªæ²»ç³»ç»Ÿçš„BGPå‘è¨€äºº ä¸åŒè‡ªæ²»ç³»ç»Ÿçš„BGPå‘è¨€äººè¦äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼š é¦–å…ˆå¿…é¡»å»ºç«‹TCPè¿æ¥ï¼Œç«¯å£å·ä¸º179 åœ¨æ­¤TCPè¿æ¥ä¸Šäº¤æ¢BGPæŠ¥æ–‡ä»¥å»ºç«‹BGPä¼šè¯ åˆ©ç”¨BGPä¼šè¯äº¤æ¢è·¯ç”±ä¿¡æ¯(ä¾‹å¦‚ï¼Œå¢åŠ æ–°çš„è·¯ç”±ï¼Œæˆ–æ’¤é”€è¿‡æ—¶çš„è·¯ç”±ï¼Œä»¥åŠæŠ¥å‘Šå‡ºé”™çš„æƒ…å†µç­‰) ä½¿ç”¨TCPè¿æ¥äº¤æ¢è·¯ç”±ä¿¡æ¯çš„ä¸¤ä¸ªBGPå‘è¨€äººï¼Œå½¼æ­¤ç§°ä¸ºå¯¹æ–¹çš„é‚»ç«™(neighbor)æˆ–å¯¹ç­‰ç«™(peer) BGPå‘è¨€äººé™¤äº†è¿è¡ŒBGPå¤–ï¼Œè¿˜å¿…é¡»è¿è¡Œè‡ªå·±æ‰€åœ¨è‡ªæ²»ç³»ç»Ÿæ‰€ä½¿ç”¨çš„å†…éƒ¨ç½‘å…³åè®®IGPï¼Œä¾‹å¦‚OSPFæˆ–RIP BGPå‘è¨€äººäº¤æ¢ç½‘ç»œå¯è¾¾æ€§çš„ä¿¡æ¯(è¦åˆ°è¾¾æŸä¸ªç½‘ç»œæ‰€è¦ç»è¿‡çš„ä¸€ç³»åˆ—è‡ªæ²»ç³»ç»Ÿ) å½“BGPå‘è¨€äººäº’ç›¸äº¤æ¢äº†ç½‘ç»œå¯è¾¾æ€§çš„ä¿¡æ¯åï¼Œå„BGPå‘è¨€äººå°±æ ¹æ®æ‰€é‡‡ç”¨çš„ç­–ç•¥ä»æ”¶åˆ°çš„è·¯ç”±ä¿¡æ¯ä¸­æ‰¾å‡ºåˆ°è¾¾å„è‡ªæ²»ç³»ç»Ÿçš„è¾ƒå¥½è·¯ç”±ã€‚ä¹Ÿå°±æ˜¯æ„é€ å‡ºæ ‘å½¢ç»“æ„(é˜²ç¯è·¯)çš„è‡ªæ²»ç³»ç»Ÿè¿é€šå›¾ BGP-4ä¸­çš„æŠ¥æ–‡ OPEN(æ‰“å¼€)æŠ¥æ–‡ï¼šç”¨æ¥ä¸ç›¸é‚»çš„å¦ä¸€ä¸ªBGPå‘è¨€äººå»ºç«‹å…³ç³»ï¼Œä½¿é€šä¿¡åˆå§‹åŒ– UPDATE(æ›´æ–°)æŠ¥æ–‡ï¼šç”¨æ¥é€šå‘ŠæŸä¸€è·¯ç”±çš„ä¿¡æ¯ï¼Œä»¥åŠåˆ—å‡ºè¦æ’¤é”€çš„å¤šæ¡è·¯ç”± KEEPALIVE(ä¿æ´»)æŠ¥æ–‡ï¼šç”¨æ¥å‘¨æœŸæ€§åœ°è¯å®é‚»ç«™çš„è¿é€šæ€§ NOTIFICATION(é€šçŸ¥)æŠ¥æ–‡ï¼šç”¨æ¥å‘é€æ£€æµ‹åˆ°çš„å·®é”™ BGPåè®®åˆšåˆšè¿è¡Œæ—¶ï¼ŒBGPçš„é‚»ç«™äº¤æ¢æ•´ä¸ªBGPè·¯ç”±è¡¨ï¼Œä»¥ååªåœ¨å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°å˜åŒ–éƒ¨åˆ†ã€‚ ç½‘é™…æ§åˆ¶æŠ¥æ–‡ICMP ä¸ºäº†æ›´æœ‰æ•ˆåœ°è½¬å‘IPæ•°æ®æŠ¥å’Œæé«˜äº¤ä»˜æˆåŠŸçš„æœºä¼šï¼Œåœ¨ç½‘é™…å±‚ä½¿ç”¨äº†ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMPï¼ˆInternet Control Message Protocolï¼‰ ä¸»æœºæˆ–è·¯ç”±å™¨ä½¿ç”¨ICMPæ¥å‘é€å·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’Œè¯¢é—®æŠ¥æ–‡ ICMPæŠ¥æ–‡è¢«å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­å‘é€ å›ç­”æŠ¥æ–‡ç±»å‹ ç»ˆç‚¹ä¸å¯è¾¾ å½“è·¯ç”±å™¨æˆ–ä¸»æœºä¸èƒ½äº¤ä»˜æ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€ç»ˆç‚¹ä¸å¯è¾¾æŠ¥æ–‡ã€‚å…·ä½“å¯å†æ ¹æ®ICMPçš„ä»£ç å­—æ®µç»†åˆ†ä¸ºç›®çš„ç½‘ç»œä¸å¯è¾¾ã€ç›®çš„ä¸»æœºä¸å¯è¾¾ã€ç›®çš„åè®®ä¸å¯è¾¾ã€ç›®çš„ç«¯å£ä¸å¯è¾¾ã€ç›®çš„ç½‘ç»œä½ç½®ã€ç›®çš„ä¸»æœºæœªçŸ¥ç­‰13ç§é”™è¯¯ æºç‚¹æŠ‘åˆ¶ å½“è·¯ç”±å™¨æˆ–ä¸»æœºç”±äºæ‹¥å¡è€Œä¸¢å¼ƒæ•°æ®æŠ¥æ—¶ï¼Œå°±å‘æºç‚¹å‘é€æºç‚¹æŠ‘åˆ¶æŠ¥æ–‡ï¼Œä½¿æºç‚¹çŸ¥é“åº”å½“æŠŠæ•°æ®æŠ¥å‘é€é€Ÿç‡æ”¾æ…¢ æ—¶é—´è¶…è¿‡ å½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªç›®çš„IPåœ°å€ä¸æ˜¯è‡ªå·±çš„IPæ•°æ®æŠ¥ï¼Œä¼šå°†å…¶ç”Ÿå­˜æ—¶é—´TTLå­—æ®µå€¼å‡1ã€‚è‹¥ç»“æœä¸ä¸º0ï¼Œåˆ™å°†è¯¥IPæ•°æ®æŠ¥è½¬å‘å‡ºå»ï¼›è‹¥ç»“æœä¸º0ï¼Œé™¤ä¸¢å¼ƒè¯¥IPæ•°æ®æŠ¥å¤–ï¼Œè¿˜è¦å‘æºç‚¹å‘é€æ—¶é—´è¶…è¿‡æŠ¥æ–‡ å½“ç»ˆç‚¹åœ¨é¢„å…ˆè§„å®šçš„æ—¶é—´å†…ä¸èƒ½æ”¶åˆ°ä¸€ä¸ªæ•°æ®æŠ¥çš„å…¨éƒ¨æ•°æ®æŠ¥ç‰‡æ—¶ï¼Œå°±æŠŠå·²æ”¶åˆ°çš„æ•°æ®æŠ¥ç‰‡éƒ½ä¸¢å¼ƒï¼Œä¹Ÿä¼šå‘æºç‚¹å‘é€æ—¶é—´è¶…è¿‡æŠ¥æ–‡ å‚æ•°é—®é¢˜ å½“è·¯ç”±å™¨æˆ–ç›®çš„ä¸»æœºæ”¶åˆ°IPæ•°æ®æŠ¥åï¼Œæ ¹æ®å…¶é¦–éƒ¨ä¸­çš„æ£€éªŒå’Œå­—æ®µå‘ç°é¦–éƒ¨åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†è¯¯ç ï¼Œå°±ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ï¼Œå¹¶å‘æºç‚¹å‘é€å‚æ•°é—®é¢˜æŠ¥æ–‡ æ”¹å˜è·¯ç”±(é‡å®šå‘) è·¯ç”±å™¨æŠŠæ”¹å˜è·¯ç”±æŠ¥æ–‡å‘é€ç»™ä¸»æœºï¼Œè®©ä¸»æœºçŸ¥é“ä¸‹æ¬¡åº”å°†æ•°æ®æŠ¥å‘é€ç»™å¦å¤–çš„è·¯ç”±å™¨(å¯é€šè¿‡æ›´å¥½çš„è·¯ç”±) å¦‚ä¸»æœº1çš„é»˜è®¤è·¯ç”±æ˜¯R1ï¼Œä¿¡æ¯ç»è¿‡R1æ—¶ï¼ŒR1å‘ç°æœ€ä½³è·¯ç”±ä¸æ˜¯è‡ªå·±ï¼Œè€Œæ˜¯R2ï¼Œæ‰€ä»¥é€šè¿‡ICMPå‘ŠçŸ¥ä¸»æœº1 ä¸å‘é€ICMPçš„æƒ…å†µ å¯¹ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ä¸å†å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ å¯¹ç¬¬ä¸€ä¸ªåˆ†ç‰‡çš„æ•°æ®æŠ¥ç‰‡çš„æ‰€æœ‰åç»­æ•°æ®æŠ¥ç‰‡éƒ½ä¸å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ å¯¹å…·æœ‰å¤šæ’­åœ°å€çš„æ•°æ®æŠ¥éƒ½ä¸å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ å¯¹å…·æœ‰ç‰¹æ®Šåœ°å€(å¦‚127.0.0.0æˆ–0.0.0.0)çš„æ•°æ®æŠ¥ä¸å‘é€ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ è¯¢é—®æŠ¥æ–‡ç±»å‹ å›é€è¯·æ±‚å’Œå›ç­” ICMPå›é€è¯·æ±‚æŠ¥æ–‡æ˜¯ç”±ä¸»æœºæˆ–è·¯ç”±å™¨å‘ä¸€ä¸ªç‰¹å®šçš„ç›®çš„ä¸»æœºå‘å‡ºçš„è¯¢é—® æ”¶åˆ°æ­¤æŠ¥æ–‡çš„ä¸»æœºå¿…é¡»ç»™æºä¸»æœºæˆ–è·¯ç”±å™¨å‘é€ICMPå›é€å›ç­”æŠ¥æ–‡ è¿™ç§è¯¢é—®æŠ¥æ–‡ç”¨æ¥æµ‹è¯•ç›®çš„ç«™æ˜¯å¦å¯è¾¾åŠäº†è§£å…¶æœ‰å…³çŠ¶æ€ æ—¶é—´æˆ³è¯·æ±‚å’Œå›ç­” ICMPæ—¶é—´æˆ³è¯·æ±‚æŠ¥æ–‡æ˜¯è¯·æŸä¸ªä¸»æœºæˆ–è·¯ç”±å™¨å›ç­”å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ åœ¨ICMPæ—¶é—´æˆ³å›ç­”æŠ¥æ–‡ä¸­æœ‰ä¸€ä¸ª32æ¯”ç‰¹çš„å­—æ®µï¼Œå…¶ä¸­å†™å…¥çš„æ•´æ•°ä»£è¡¨ä»1900å¹´1æœˆ1æ—¥èµ·åˆ°å½“å‰æ—¶åˆ»ä¸€å…±æœ‰å¤šå°‘ç§’ è¿™ç§è¯¢é—®æŠ¥æ–‡ç”¨æ¥è¿›è¡Œæ—¶é’ŸåŒæ­¥å’Œæµ‹é‡æ—¶é—´ ICMPåº”ç”¨ä¸¾ä¾‹ åˆ†ç»„ç½‘é—´æ¢æµ‹PING ç”¨æ¥æµ‹è¯•ä¸»æœºæˆ–è·¯ç”±å™¨é—´çš„è¿é€šæ€§ã€eNSPçš„pingå‘½ä»¤ã€‘ åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚çš„ICMP(æ²¡æœ‰é€šè¿‡è¿è¾“å±‚çš„TCPæˆ–UDP) ä½¿ç”¨ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ è·Ÿè¸ªè·¯ç”±tracerouce ç”¨æ¥æµ‹è¯•IPæ•°æ®æŠ¥ä»æºä¸»æœºåˆ°è¾¾ç›®çš„ä¸»æœºè¦ç»è¿‡å“ªäº›è·¯ç”±å™¨ Windowsç‰ˆæœ¬ tracertå‘½ä»¤ åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚ICMP ä½¿ç”¨äº†ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ä»¥åŠå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ Unixç‰ˆæœ¬ traceroute å‘½ä»¤ åœ¨è¿è¾“å±‚ä½¿ç”¨UDPåè®® ä»…ä½¿ç”¨ ICMPå·®é”™æŠ¥å‘ŠæŠ¥æ–‡ å®ç°æ–¹æ³• ç”±ä¸»æœºå‘é€å‡ºå»çš„æ•°æ®åŒ…ä¸­çš„ç”Ÿå­˜æ—¶é—´å­—æ®µTTLç”±1å¼€å§‹é€æ¸å¢åŠ ï¼Œæ¯ä¸ªè·¯ç”±å™¨éƒ½ä¼šè¿”å›ä¸€ä¸ªæ—¶é—´è¶…è¿‡æŠ¥æ–‡ï¼Œç”±æ­¤è¾¾åˆ°è·Ÿè¸ªè·¯ç”±å™¨çš„ç›®çš„ è™šæ‹Ÿä¸“ç”¨ç½‘VPNå’Œç½‘ç»œåœ°å€è½¬æ¢NATè™šæ‹Ÿä¸“ç”¨ç½‘VPNåˆ©ç”¨å…¬ç”¨çš„å› ç‰¹ç½‘ä½œä¸ºæœ¬æœºæ„å„ä¸“ç”¨ç½‘ä¹‹é—´çš„é€šä¿¡è½½ä½“ï¼Œè¿™æ ·çš„ä¸“ç”¨ç½‘åˆç§°ä¸ºè™šæ‹Ÿä¸“ç”¨ç½‘ã€‚ ç”±äºIPv4åœ°å€çš„ç´§ç¼ºï¼Œä¸€ä¸ªæœºæ„èƒ½å¤Ÿç”³è¯·åˆ°çš„IPv4åœ°å€æ•°é‡å¾€å¾€è¿œå°äºæœ¬æœºæ„æ‰€æ‹¥æœ‰çš„ä¸»æœºæ•°é‡ã€‚ å› æ­¤ï¼Œè™šæ‹Ÿä¸“ç”¨ç½‘ä¸­çš„å„ä¸»æœºæ‰€åˆ†é…çš„åœ°å€åº”è¯¥æ˜¯æœ¬æœºæ„å¯è‡ªç”±åˆ†é…çš„ä¸“ç”¨åœ°å€ï¼Œè€Œä¸æ˜¯éœ€è¦ç”³è¯·çš„ã€åœ¨å› ç‰¹ç½‘ä¸Šä½¿ç”¨çš„å…¬æœ‰åœ°å€ã€‚ ä¸“ç”¨(ç§æœ‰)åœ°å€: 10.0.0.0~10.255.255.255(108åœ°å€å—) 172.16.0.0~172.31.255.255(172.1612åœ°å€å—) 192.168.0.0~192.168.255.255(192.16816åœ°å€å—) æ³¨æ„ï¼šç§æœ‰åœ°å€åªèƒ½ç”¨äºä¸€ä¸ªæœºæ„çš„å†…éƒ¨é€šä¿¡ï¼Œè€Œä¸èƒ½ç”¨äºå’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºé€šä¿¡ã€‚ å³ç§æœ‰åœ°å€åªèƒ½ç”¨ä½œæœ¬åœ°åœ°å€è€Œä¸èƒ½ç”¨ä½œå…¨çƒåœ°å€ã€‚ æ‰€ä»¥æ‰€æœ‰è·¯ç”±å™¨å¯¹ç›®çš„åœ°å€æ˜¯ç§æœ‰åœ°å€çš„IPæ•°æ®æŠ¥ä¸€å¾‹ä¸è¿›è¡Œè½¬å‘ã€‚ æ‰€æœ‰æ¯ä¸ªæœºæ„è‡³å°‘éœ€è¦ä¸€ä¸ªè·¯ç”±å™¨å…·æœ‰åˆæ³•çš„å…¨çƒIPåœ°å€ã€‚è¿™æ ·å„è‡ªçš„ä¸“ç”¨ç½‘æ‰èƒ½åˆ©ç”¨å…¬ç”¨çš„å› ç‰¹ç½‘è¿›è¡Œé€šä¿¡ã€‚ ä¸¤ä¸ªä¸“ç”¨ç½‘å†…çš„ä¸»æœºé—´å‘é€çš„æ•°æ®æŠ¥ï¼Œæ˜¯é€šè¿‡äº†å…¬ç”¨çš„å› ç‰¹ç½‘ï¼Œä½†åœ¨æ•ˆæœä¸Šå°±å¥½åƒæ˜¯åœ¨æœ¬æœºæ„çš„ä¸“ç”¨ç½‘ä¸Šä¼ é€ä¸€æ ·ã€‚ æ•°æ®æŠ¥åœ¨å› ç‰¹ç½‘ä¸­å¯èƒ½è¦ç»è¿‡å¤šä¸ªç½‘ç»œå’Œè·¯ç”±å™¨ï¼Œä½†ä»é€»è¾‘ä¸Šçœ‹ï¼ŒR1å’ŒR2ä¹‹é—´å¥½åƒæ˜¯ä¸€æ¡ç›´é€šçš„ç‚¹å¯¹ç‚¹é“¾è·¯ï¼Œå› æ­¤ä¹Ÿè¢«ç§°ä¸ºIPéš§é“æŠ€æœ¯ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒåŒä¸€æœºæ„å†…ä¸åŒéƒ¨é—¨çš„å†…éƒ¨ç½‘ç»œæ‰€æ„æˆçš„è™šæ‹Ÿä¸“ç”¨ç½‘VPNåˆç§°ä¸ºå†…è”ç½‘VPNã€‚ æœ‰æ—¶ä¸€ä¸ªæœºæ„çš„VPNéœ€è¦æœ‰æŸäº›å¤–éƒ¨æœºæ„(é€šå¸¸å°±æ˜¯åˆä½œä¼™ä¼´)å‚åŠ è¿›æ¥ã€‚è¿™æ ·çš„VPNå°±ç§°ä¸ºå¤–è”ç½‘VPNã€‚ åœ¨å¤–åœ°å·¥ä½œçš„å‘˜å·¥éœ€è¦è®¿é—®å…¬å¸å†…éƒ¨çš„ä¸“ç”¨ç½‘ç»œæ—¶ï¼Œåªè¦åœ¨ä»»ä½•åœ°ç‚¹æ¥å…¥åˆ°å› ç‰¹ç½‘ï¼Œè¿è¡Œé©»ç•™åœ¨å‘˜å·¥PCä¸­çš„VPNè½¯ä»¶ï¼Œåœ¨å‘˜å·¥çš„PCå’Œå…¬å¸çš„ä¸»æœºä¹‹é—´å»ºç«‹VPNéš§é“ï¼Œå³å¯è®¿é—®ä¸“ç”¨ç½‘ç»œä¸­çš„èµ„æºã€‚è¿™ç§VPNç§°ä¸ºè¿œç¨‹æ¥å…¥VPNã€‚ ç½‘ç»œåœ°å€è½¬æ¢NATåº”ç”¨åœºæ™¯ï¼š è™½ç„¶å› ç‰¹ç½‘é‡‡ç”¨äº†æ— åˆ†ç±»ç¼–å€æ–¹å¼æ¥å‡ç¼“IPv4åœ°å€ç©ºé—´è€—å°½çš„é€Ÿåº¦ï¼Œä½†ç”±äºå› ç‰¹ç½‘ç”¨æˆ·æ•°ç›®çš„æ¿€å¢ï¼Œç‰¹åˆ«æ˜¯å¤§é‡å°å‹åŠå…¬å®¤ç½‘ç»œå’Œå®¶åº­ç½‘ç»œæ¥å…¥å› ç‰¹ç½‘çš„éœ€æ±‚ä¸æ–­å¢åŠ ï¼ŒIPv4åœ°å€ç©ºé—´å³å°†é¢ä¸´è€—å°½çš„å±é™©ä»ç„¶æ²¡æœ‰è¢«è§£é™¤ã€‚1994å¹´æå‡ºäº†ä¸€ç§ç½‘ç»œåœ°å€è½¬æ¢NATçš„æ–¹æ³•å†æ¬¡ç¼“è§£äº†IPv4åœ°å€ç©ºé—´å³å°†è€—å°½çš„é—®é¢˜ã€‚ NATèƒ½ä½¿å¤§é‡ä½¿ç”¨å†…éƒ¨ä¸“ç”¨åœ°å€çš„ä¸“ç”¨ç½‘ç»œç”¨æˆ·å…±äº«å°‘é‡å¤–éƒ¨å…¨çƒåœ°å€æ¥è®¿é—®å› ç‰¹ç½‘ä¸Šçš„ä¸»æœºå’Œèµ„æºã€ä¸ºäº†èŠ‚çœIPv4åœ°å€ã€‘ é—®é¢˜ï¼šè¯¥è½¬æ¢æ–¹æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜:å¦‚æœNATè·¯ç”±å™¨å…·æœ‰Nä¸ªå…¨çƒIPåœ°å€ï¼Œé‚£ä¹ˆè‡³å¤šåªèƒ½æœ‰Nä¸ªå†…ç½‘ä¸»æœºèƒ½å¤ŸåŒæ—¶å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºé€šä¿¡ã€‚ è§£å†³ï¼šç”±äºç»å¤§å¤šæ•°çš„ç½‘ç»œåº”ç”¨éƒ½æ˜¯ä½¿ç”¨è¿è¾“å±‚åè®®TCPæˆ–UDPæ¥ä¼ é€æ•°æ®ï¼Œå› æ­¤å¯ä»¥åˆ©ç”¨è¿è¾“å±‚çš„ç«¯å£å·å’ŒIPåœ°å€ä¸€èµ·è¿›è¡Œè½¬æ¢ã€‚ è¿™æ ·ï¼Œç”¨ä¸€ä¸ªå…¨çƒIPåœ°å€å°±å¯ä»¥ä½¿å¤šä¸ªæ‹¥æœ‰æœ¬åœ°åœ°å€çš„ä¸»æœºåŒæ—¶å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚è¿™ç§å°†ç«¯å£å·å’ŒIPåœ°å€ä¸€èµ·è¿›è¡Œè½¬æ¢çš„æŠ€æœ¯å«ä½œç½‘ç»œåœ°å€ä¸ç«¯å£å·è½¬æ¢NAPT æ‚é¡¹è·¯ç”±å™¨éš”ç¦»å¹¿æ’­åŸŸ è·¯ç”±å™¨å±äºç½‘ç»œå±‚è®¾å¤‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸å¯¹å¹¿æ’­æ•°æ®åŒ…è¿›è¡Œè½¬å‘ï¼Œå› æ­¤è‡ªç„¶è¾¾åˆ°éš”ç¦»çš„æ•ˆæœã€‚ è·¯ç”±å™¨æ˜¯è¿æ¥ä¸åŒç½‘ç»œçš„ï¼Œå¹¿æ’­åªæ˜¯åœ¨ä¸€ä¸ªç½‘ç»œé‡Œé¢ï¼Œæ‰€ä»¥è·¯ç”±å™¨éš”ç¦»å¼€äº†ä¸åŒç½‘ç»œä¹‹é—´çš„å¹¿æ’­ä¿¡å·ã€‚ å¹¿æ’­æ˜¯æ•°æ®é“¾è·¯å±‚çš„å¹¿æ’­ï¼Œç½‘ç»œå±‚åªæœ‰ç‚¹å¯¹ç‚¹ã€‚ æ•´ç† SMTPé‚®ä»¶å‘é€æ˜¯TGPï¼Œè§†é¢‘é€šè¯æ˜¯UDP æœåŠ¡è®¿é—®ç‚¹ï¼šé‚»å±‚å®ä½“ä¹‹é—´çš„é€»è¾‘æ¥å£ã€‚ å„å±‚æœåŠ¡è®¿é—®ç‚¹ SAP åº”ç”¨å±‚ ï¼šç”¨æˆ·ç•Œé¢ è¿è¾“å±‚ï¼šç«¯å£å· ç½‘ç»œå±‚ï¼šIPåœ°å€ æ•°æ®é“¾è·¯å±‚ï¼šMacåœ°å€ ç‰©ç†å±‚ï¼šç½‘å¡ å„å±‚åè®®æ•°æ®å•å…ƒ åº”ç”¨å±‚ï¼šæŠ¥æ–‡(message) ä¼ è¾“å±‚ï¼šæŠ¥æ–‡æ®µ(segment)ï¼šï¼ˆTCPæŠ¥æ–‡æ®µï¼ŒUDPæ•°æ®æŠ¥ï¼‰ ç½‘ç»œå±‚ï¼šåˆ†ç»„packetï¼ˆå¦‚æœæ— è¿æ¥æ–¹å¼ï¼šæ•°æ®æŠ¥ datagramï¼‰ æ•°æ®é“¾è·¯å±‚ï¼šå¸§(frame) æ•°æ®é“¾è·¯å±‚åˆå¯åˆ†ä¸ºä¸¤å±‚ Macå±‚å’Œllcå±‚LLCå±‚æ˜¯ä¸»è¦å‘ä¸Šå±‚æä¾›æœåŠ¡çš„,Macåœ°å€æ˜¯ç½‘å¡åœ°å€ã€‚ ç‰©ç†å±‚ï¼šä½(bit)"},{"title":"æ¹–ç§‘å¤§(3)æ•°æ®é“¾è·¯å±‚","path":"/wiki/network/æ¹–ç§‘å¤§(3)æ•°æ®é“¾è·¯å±‚.html","content":"æ•°æ®é“¾è·¯å±‚æ¦‚è¿°é“¾è·¯(link)ï¼šä»ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»èŠ‚ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ï¼Œè€Œä¸­é—´æ²¡æœ‰ä»»ä½•å…¶ä»–çš„äº¤æ¢ç»“ç‚¹ã€‚ æ•°æ®é“¾è·¯(Data Link) ï¼šæ˜¯æŒ‡æŠŠå®ç°é€šä¿¡åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šï¼Œå°±æ„æˆäº†æ•°æ®é“¾è·¯ã€‚ æ•°æ®é“¾è·¯å±‚ä»¥å¸§ä¸ºå•ä½ä¼ è¾“å’Œå¤„ç†æ•°æ® æ„ä¹‰ï¼šåœ¨ç‰©ç†å±‚æä¾›æœåŠ¡çš„åŸºç¡€ä¸Šå‘ç½‘ç»œå±‚æä¾›æœåŠ¡ã€‚ **æ•°æ®é“¾è·¯å±‚çš„åŠŸèƒ½ï¼š**åŠ å¼ºç‰©ç†å±‚ä¼ è¾“åŸå§‹æ¯”ç‰¹æµçš„åŠŸèƒ½ï¼Œå°†å¯èƒ½å‡ºé”™çš„ç‰©ç†è¿æ¥æ”¹é€ ä¸ºé€»è¾‘ä¸Šæ— å·®é”™çš„æ•°æ®é“¾è·¯ï¼Œä½¿ä¹‹å¯¹ç½‘ç»œå±‚è¡¨ç°ä¸ºä¸€æ¡æ— å·®é”™çš„é“¾è·¯ã€‚ æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªä¿¡é“ï¼š 1.ç‚¹å¯¹ç‚¹ä¿¡é“ï¼ˆæˆ‘ä»¬åœ¨ä»‹ç»æ—¶ä¸€èˆ¬ä½¿ç”¨ï¼‰ 2.äº¤æ¢å¼å±€åŸŸç½‘ 3.å…±äº«å¼å±€åŸŸç½‘ï¼ˆä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚ï¼‰ äº¤æ¢å¼å±€åŸŸç½‘åœ¨æœ‰çº¿é¢†åŸŸå·²ç»å®Œå…¨å–ä»£äº†å…±äº«å¼ã€‚ ç”±äºæ— çº¿ä¿¡é“çš„å¹¿æ’­å¤©æ€§ï¼Œæ— çº¿å±€åŸŸç½‘ä½¿ç”¨çš„ä»ç„¶æ˜¯å…±äº«ä¿¡é“æŠ€æœ¯ã€‚ ä½¿ç”¨ç‚¹å¯¹ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚ ä¸‰ä¸ªé‡è¦é—®é¢˜ï¼š å°è£…æˆå¸§ï¼šåœ¨ä¸€æ®µæ•°æ®çš„å‰ååˆ†åˆ«æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œç„¶åå°±æ„æˆäº†ä¸€ä¸ªå¸§ã€‚ä¸€ä¸ªä½œç”¨æ˜¯å¸§å®šç•Œã€‚ å·®é”™æ£€æµ‹ï¼šåˆ¤æ–­ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦å‡ºç°è¯¯ç ï¼ˆ1å˜0ï¼Œ0å˜1ï¼‰ å¯é ä¼ è¾“ï¼šå®ç°å‘é€æ–¹å‘é€ä»€ä¹ˆï¼Œæ¥æ”¶æ–¹å°±èƒ½æ”¶åˆ°ä»€ä¹ˆ ä½¿ç”¨ç‚¹å¯¹ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚ ä¸¤ä¸ªé‡è¦é—®é¢˜ï¼š å…±äº«å¼ä»¥å¤ªç½‘çš„åª’ä½“æ¥å…¥æ§åˆ¶åè®®CSMACD 802.11å±€åŸŸç½‘çš„åª’ä½“æ¥å…¥æ§åˆ¶åè®®CSMACA æ•°æ®é“¾è·¯å±‚çš„äº’è¿è®¾å¤‡ ç½‘æ¡¥å’Œäº¤æ¢æœºçš„å·¥ä½œåŸç† é›†çº¿å™¨(ç‰©ç†å±‚äº’è¿è®¾å¤‡) ä¸äº¤æ¢æœºçš„åŒºåˆ« å°è£…æˆå¸§å°è£…æˆå¸§æ˜¯æŒ‡æ•°æ®é“¾è·¯å±‚ç»™ä¸Šå±‚äº¤ä»˜çš„åè®®æ•°æ®å•å…ƒæ·»åŠ å¸§å¤´å’Œå¸§å°¾ä½¿ä¹‹æˆä¸ºå¸§ã€‚ å¸§å¤´å’Œå¸§å°¾ä¸­å«æœ‰é‡è¦çš„æ§åˆ¶ä¿¡æ¯ å¸§å¤´å¸§å°¾çš„ä½œç”¨ä¹‹ä¸€å°±æ˜¯å¸§å®šç•Œ (å˜æˆæ¯”ç‰¹ä¼ è¾“åæ®æ­¤åŒºåˆ†æ¯ä¸ªå¸§çš„èµ·å§‹å’Œç»“æŸ) ä¸ºäº†æé«˜å¸§çš„ä¼ è¾“æ•ˆç‡ï¼Œåº”å½“ä½¿å¸§çš„æ•°æ®éƒ¨åˆ†é•¿åº¦å°½å¯èƒ½å¤§ è€ƒè™‘åˆ°å·®é”™æ§åˆ¶ç­‰å¤šç§å› ç´ ï¼Œæ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®éƒ½è§„å®šäº†å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦ä¸Šé™ï¼Œå³æœ€å¤§ä¼ é€å•å…ƒMTUï¼ˆMaximum Transfer Unitï¼‰ å‰å¯¼ç  ä½†æ¯”ä¸æ˜¯æ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®çš„å¸§éƒ½åŒ…å«æœ‰å¸§å®šç•Œæ ‡å¿—ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‰å¯¼ç : å‰å¯¼ç  å‰åŒæ­¥ç ï¼šä½œç”¨æ˜¯ä½¿æ¥æ”¶æ–¹çš„æ—¶é’ŸåŒæ­¥ å¸§å¼€å§‹å®šç•Œç¬¦ï¼šè¡¨æ˜å…¶åé¢ç´§è·Ÿç€çš„å°±æ˜¯MACå¸§ å¦å¤–ä»¥å¤ªç½‘è¿˜è§„å®šäº†å¸§é—´é—´éš”ä¸º96æ¯”ç‰¹æ—¶é—´ï¼Œå› æ­¤ï¼ŒMACå¸§ä¸éœ€è¦å¸§ç»“æŸå®šç•Œç¬¦ é€æ˜ä¼ è¾“ é€æ˜ï¼šæŒ‡æŸä¸€ä¸ªå®é™…å­˜åœ¨çš„äº‹ç‰©çœ‹èµ·æ¥å´å¥½åƒä¸å­˜åœ¨ä¸€æ ·ã€‚ é€æ˜ä¼ è¾“æ˜¯æŒ‡æ•°æ®é“¾è·¯å±‚å¯¹ä¸Šå±‚äº¤ä»˜çš„ä¼ è¾“æ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œå¥½åƒæ•°æ®é“¾è·¯å±‚ä¸å­˜åœ¨ä¸€æ ·ã€‚ å¸§ç•Œå®šæ ‡å¿—ä¹Ÿå°±æ˜¯ä¸ªç‰¹å®šæ•°æ®å€¼ï¼Œå¦‚æœåœ¨ä¸Šå±‚äº¤ä»˜çš„åè®®æ•°æ®å•å…ƒä¸­ï¼Œ æ°å¥½ä¹ŸåŒ…å«è¿™ä¸ªç‰¹å®šæ•°å€¼ï¼Œæ¥æ”¶æ–¹å°±ä¸èƒ½æ­£ç¡®æ¥æ”¶ã€‚ æ‰€ä»¥å¿…é¡»è¦ç¡®ä¿å¸§çš„å”¯ä¸€æ€§ã€‚ è§£å†³æ–¹æ³•ï¼š é¢å‘å­—èŠ‚çš„ç‰©ç†é“¾è·¯ä½¿ç”¨å­—èŠ‚å¡«å…… (byte stuffing) ï¼ˆåˆç§°å­—ç¬¦å¡«å…… character stuffingï¼‰ã€‚ å‘é€ç«¯çš„æ•°æ®é“¾è·¯å±‚åœ¨æ•°æ®ä¸­å‡ºç°æ§åˆ¶å­—ç¬¦â€œSOHâ€æˆ–â€œEOTâ€çš„å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦â€œESCâ€(å…¶åå…­è¿›åˆ¶ç¼–ç æ˜¯1B)ã€‚ æ¥æ”¶ç«¯çš„æ•°æ®é“¾è·¯å±‚åœ¨å°†æ•°æ®é€å¾€ç½‘ç»œå±‚ä¹‹å‰åˆ é™¤æ’å…¥çš„è½¬ä¹‰å­—ç¬¦ã€‚ å¦‚æœè½¬ä¹‰å­—ç¬¦ä¹Ÿå‡ºç°åœ¨æ•°æ®å½“ä¸­ï¼Œé‚£ä¹ˆåº”åœ¨è½¬ä¹‰å­—ç¬¦å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ ESCã€‚å½“æ¥æ”¶ç«¯æ”¶åˆ°è¿ç»­çš„ä¸¤ä¸ªè½¬ä¹‰å­—ç¬¦æ—¶ï¼Œå°±åˆ é™¤å…¶ä¸­å‰é¢çš„ä¸€ä¸ªã€‚ é¢å‘æ¯”ç‰¹çš„ç‰©ç†é“¾è·¯ä½¿ç”¨æ¯”ç‰¹å¡«å……çš„æ–¹æ³•å®ç°é€æ˜ä¼ è¾“ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾å¸§æ˜¯0111110 ï¼Œå‘é€å‰å¯¹æ•°æ®å•å…ƒè¿›è¡Œæ‰«æï¼Œæ¯5ä¸ªè¿ç»­çš„1åé¢æå‰æ’å…¥ä¸€ä¸ª0ã€‚æ¥æ”¶æ–¹åœ¨æ¥å—æ—¶ï¼Œå°†é‚£ä¸ªå¢è¡¥çš„0å‰”é™¤å³å¯ã€‚ å·®é”™æ£€æµ‹ å®é™…çš„é€šä¿¡é“¾è·¯éƒ½ä¸æ˜¯ç†æƒ³çš„ï¼Œæ¯”ç‰¹åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå·®é”™ï¼š1å¯èƒ½å˜æˆ0ï¼Œ0å¯èƒ½å˜æˆ1ã€‚è¿™å«æ¯”ç‰¹å·®é”™ åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹å æ‰€ä¼ è¾“æ¯”ç‰¹æ€»æ•°çš„æ¯”ç‡ç§°ä¸ºè¯¯ç ç‡BER(Big Error Rate) é”™è¯¯æ¯”ç‰¹æ€»æ¯”ç‰¹ çš„æ¯”ç‡å³è¯¯ç ç‡ ä½¿ç”¨å·®é”™æ£€æµ‹ç (å¦‚Macå¸§å°¾çš„FCS)æ¥æ£€æµ‹æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦äº§ç”Ÿäº†æ¯”ç‰¹å·®é”™ï¼Œæ˜¯æ•°æ®é“¾è·¯å±‚æ‰€è¦è§£å†³çš„é‡è¦é—®é¢˜ä¹‹ä¸€ã€ å¥‡å¶æ ¡éªŒç åœ¨å¾…å‘é€çš„æ•°æ®åé¢æ·»åŠ 1ä½å¥‡å¶æ ¡éªŒä½ï¼Œä½¿æ•´ä¸ªæ•°æ®(åŒ…æ‹¬æ‰€æ·»åŠ çš„æ ¡éªŒä½åœ¨å†…)ä¸­â€1â€çš„ä¸ªæ•°ä¸ºå¥‡æ•°(å¥‡æ ¡éªŒ)æˆ–ä¸ºå¶æ•°(å¶æ ¡éªŒ) æ¯”å¦‚å‘é€æ•°æ®001 è‹¥æ˜¯å¥‡æ ¡éªŒï¼Œåˆ™åœ¨æ•°æ®åæ·»åŠ 0ï¼Œä½¿å…¶æˆä¸º0001,1çš„ä¸ªæ•°ä¸ºå¥‡æ•°ã€‚ å¦‚æœä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿäº†1ä½è¯¯ç ï¼Œåˆ™1çš„ä¸ªæ•°ä¼šå˜æˆå¶æ•°ï¼Œæ®æ­¤åˆ¤æ–­æ˜¯å¦å‘ç”Ÿè¯¯ç ï¼›ä½†æ˜¯è‹¥å‘ç”Ÿäº†2ä¸ªè¯¯ç ï¼Œ1çš„ä¸ªæ•°ä¾ç„¶ä¸ºå¥‡æ•°ï¼Œå› æ­¤æ£€æŸ¥ä¸å‡ºæ¥ è‹¥ä¸ºå¶æ ¡éªŒï¼Œåˆ™åœ¨æ•°æ®åæ·»åŠ 1ï¼Œä½¿å…¶æˆä¸º1001,1çš„ä¸ªæ•°ä¸ºå¶æ•°ï¼Œå…¶ä»–æƒ…å†µä¸å¥‡æ ¡éªŒç±»ä¼¼ ä½†ä¸ç®¡æ˜¯å¥‡æ ¡éªŒè¿˜æ˜¯å¶æ ¡éªŒï¼Œå¦‚æœæœ‰å¥‡æ•°ä¸ªä½å‘ç”Ÿè¯¯ç ï¼Œåˆ™å¯ä»¥æ£€æŸ¥å‡ºè¯¯ç ï¼Œå› ä¸ºå¥‡å¶æ€§å‘ç”Ÿå˜åŒ–ï¼›å¦‚æœæœ‰å¶æ•°ä¸ªä½å‘ç”Ÿè¯¯ç ï¼Œåˆ™ä¸èƒ½æ£€æŸ¥å‡ºè¯¯ç (æ¼æ£€),å› ä¸ºå¥‡å¶æ€§ä¸å‘ç”Ÿå˜åŒ–ã€‚ å¾ªç¯å†—ä½™ç CRC æ”¶å‘åŒæ–¹çº¦å®šå¥½ä¸€ä¸ªç”Ÿæˆå¤šé¡¹å¼G(x) å‘é€æ–¹åŸºäºå¾…å‘é€çš„æ•°æ®å’Œç”Ÿæˆå¤šé¡¹å¼è®¡ç®—å‡ºå·®é”™æ£€æµ‹ç **(å†—ä½™ç )**ï¼Œå°†å…¶æ·»åŠ åˆ°å¾…ä¼ è¾“æ•°æ®çš„åé¢ä¸€èµ·ä¼ è¾“ æ¥æ”¶æ–¹é€šè¿‡ç”Ÿæˆå¤šé¡¹å¼æ¥è®¡ç®—æ”¶åˆ°çš„æ•°æ®æ˜¯å¦äº§ç”Ÿäº†è¯¯ç  CRCæœ‰å¾ˆå¥½çš„æ£€é”™èƒ½åŠ›(æ¼æ£€ç‡éå¸¸ä½)ï¼Œè™½ç„¶è®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œä½†æ˜“äºç”¨ç¡¬ä»¶å®ç°ï¼Œå› æ­¤è¢«å¹¿æ³›åº”ç”¨äºæ•°æ®é“¾è·¯å±‚ æ£€é”™ç åªèƒ½æ£€æµ‹å‡ºå¸§åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°äº†å·®é”™ï¼Œä½†å¹¶ä¸èƒ½å®šä½é”™è¯¯ï¼Œå› æ­¤æ— æ³•çº æ­£é”™è¯¯ã€‚è¦æƒ³çº æ­£ä¼ è¾“ä¸­çš„å·®é”™ï¼Œå¯ä»¥ä½¿ç”¨å†—ä½™ä¿¡æ¯æ›´å¤šçš„çº é”™ç è¿›è¡Œå‰å‘çº é”™ã€‚ä½†çº é”™ç çš„å¼€é”€æ¯”è¾ƒå¤§ï¼Œåœ¨è®¡ç®—æœºç½‘ç»œä¸­è¾ƒå°‘ä½¿ç”¨ã€‚ åœ¨è®¡ç®—æœºç½‘ç»œä¸­é€šå¸¸é‡‡ç”¨æ£€é”™é‡ä¼ æ–¹å¼æ¥çº æ­£ä¼ è¾“ä¸­çš„å·®é”™ï¼Œæˆ–è€…ä»…ä»…æ˜¯ä¸¢å¼ƒæ£€æµ‹åˆ°å·®é”™çš„å¸§ï¼Œè¿™å–å†³äºæ•°æ®é“¾è·¯å±‚å‘å…¶ä¸Šå±‚æä¾›çš„æ˜¯å¯é ä¼ è¾“æœåŠ¡è¿˜æ˜¯ä¸å¯é ä¼ è¾“æœåŠ¡ å¯é ä¼ è¾“ä¸å¯é ä¼ è¾“æœåŠ¡ï¼šä»…ä»…ä¸¢å¼ƒæœ‰è¯¯ç çš„å¸§ï¼Œå…¶ä»–ä»€ä¹ˆä¹Ÿä¸åšå¯é ä¼ è¾“ï¼šæƒ³åŠæ³•å®ç°å‘é€ç«¯å‘é€ä»€ä¹ˆï¼Œæ¥æ”¶ç«¯å°±æ”¶åˆ°ä»€ä¹ˆ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰çº¿é“¾è·¯çš„è¯¯ç ç‡æ¯”è¾ƒä½ï¼Œä¸ºäº†å‡å°å¼€é”€ï¼Œå¹¶ä¸è¦æ±‚æ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“æœåŠ¡ã€‚å³ä½¿å‡ºç°äº†è¯¯ç ï¼Œå¯é ä¼ è¾“çš„é—®é¢˜ç”±å…¶ä¸Šå±‚å¤„ç†ã€‚ æ— çº¿é“¾è·¯æ˜“å—å¹²æ‰°ï¼Œè¯¯ç ç‡æ¯”è¾ƒé«˜ï¼Œå› æ­¤è¦æ±‚æ•°æ®é“¾è·¯å±‚å¿…é¡»å‘ä¸Šå±‚æä¾›å¯é ä¼ è¾“æœåŠ¡ æ¯”ç‰¹å·®é”™åªæ˜¯ä¼ è¾“å·®é”™ä¸­çš„ä¸€ç§ï¼Œä»æ•´ä¸ªè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„æ¥çœ‹ï¼Œä¼ è¾“å·®é”™è¿˜åŒ…æ‹¬åˆ†ç»„ä¸¢å¤±ã€åˆ†ç»„å¤±åºä»¥åŠåˆ†ç»„é‡å¤åˆ†ç»„ä¸¢å¤±ã€åˆ†ç»„å¤±åºä»¥åŠåˆ†ç»„é‡å¤è¿™äº›ä¼ è¾“å·®é”™ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°åœ¨æ•°æ®é“¾è·¯å±‚ï¼Œè€Œä¼šå‡ºç°åœ¨å…¶ä¸Šå±‚ã€‚ å¯é ä¼ è¾“æœåŠ¡å¹¶ä¸ä»…å±€é™äºæ•°æ®é“¾è·¯å±‚ï¼Œå…¶ä»–å„å±‚å‡å¯é€‰æ‹©å®ç°å¯é ä¼ è¾“ å¯é ä¼ è¾“çš„å®ç°æ¯”è¾ƒå¤æ‚ï¼Œå¼€é”€ä¹Ÿæ¯”è¾ƒå¤§ï¼Œæ˜¯å¦ä½¿ç”¨å¯é ä¼ è¾“å–å†³äºåº”ç”¨éœ€æ±‚ åœæ­¢ç­‰å¾…åè®®SWï¼ˆstop-waitï¼‰å‘é€æ–¹å‘é€æ•°æ®DATAï¼Œæ¥æ”¶æ–¹æ¥æ”¶æ—¶è¿›è¡Œå·®é”™æ£€æµ‹â‘ å¦‚æœæ²¡æœ‰å‡ºç°è¯¯ç ï¼Œåˆ™æ¥æ”¶ä¿¡æ¯å¹¶è¿”å›ACKç¡®è®¤åˆ†ç»„ç»™å‘é€æ–¹ï¼Œå‘é€æ–¹æ”¶åˆ°ACKåï¼Œä¸€æ¬¡é€šä¿¡ç»“æŸâ‘¡å¦‚æœå‡ºç°è¯¯ç ï¼Œåˆ™ä¸¢å¼ƒä¿¡æ¯å¹¶è¿”å›NAKæ‹’ç»åˆ†ç»„ç»™å‘é€æ–¹ï¼Œå‘é€æ–¹æ”¶åˆ°NAKåï¼Œé‡ä¼ DATAï¼Œç›´è‡³å‡ºç°æ­¥éª¤â‘ çš„æƒ…å†µ å‘é€æ–¹æ²¡æœ‰æ”¶åˆ°ACKç¡®è®¤åˆ†ç»„ï¼Œå°±ä¸ä¼šè¿›è¡Œä¸‹ä¸€æ¬¡é€šä¿¡ã€‚æ•…åâ€œåœæ­¢ç­‰å¾…â€œã€‚ æœºåˆ¶è¡¥å……ï¼š å¦‚æœDATAä¼ é€è¿‡ç¨‹ä¸­ä¸¢å¤±äº†ï¼Œå³æ¥æ”¶ç«¯ä¸€ç›´ç­‰DATAï¼Œå‘é€ç«¯ä¸€ç›´ç­‰ACKï¼Œé€ æˆæ­»é”ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ å¯ä»¥å¼•å…¥è¶…æ—¶é‡ä¼ æœºåˆ¶ã€‚å¯ä»¥åœ¨å‘é€ç«¯è®¾ç½®ä¸€è®¡æ—¶å™¨(å¤§çº¦å‘é€æ¥æ”¶çš„å¹³å‡æ—¶é—´)ï¼Œå½“å‘é€ç«¯åœ¨è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ACKæˆ–NAKæ—¶ï¼Œå°±ä¼šåˆ¤æ–­DATAä¸¢å¤±ï¼Œä»è€Œå†æ¬¡å‘é€DATAï¼Œæ‰“ç ´æ­»é” å¦‚æœACKå‘é€ä¸­ä¸¢å¤±äº†ï¼Œå³æ¥æ”¶æ–¹æ”¶ä¸åˆ°ACKå°±å°†æ•°æ®é‡æ–°å‘é€ï¼Œè€Œæ•°æ®å®é™…ä¸Šæ¥æ”¶æ–¹å·²ç»æœ‰äº†ï¼Œå› æ­¤é‡å¤æ¥æ”¶ï¼Œå¹¶è¿”å›ACKï¼Œé€ æˆé”™è¯¯ï¼Œæ€ä¹ˆåŠï¼Ÿ å¯ä»¥å¯¹æ¯æ¬¡å‘çš„DATAéƒ½åŠ ä¸Šåºå·ï¼Œè¿™æ ·æ¥æ”¶ç«¯å°±å¯ä»¥åˆ¤æ–­å½“å‰çš„æ•°æ®æ˜¯å¦æœ‰æ¥æ”¶è¿‡ï¼Œä»è€Œå†³å®šå…¶å»ç•™ å¦‚æœå‘é€ç«¯å‘é€DATA 0ï¼Œå¦‚æœACKç”±äºæŸäº›åŸå› ä½¿å…¶åˆ°è¾¾æ¥æ”¶ç«¯çš„æ—¶é—´å˜é•¿äº†ï¼Œé‚£ä¹ˆæ ¹æ®è¶…æ—¶é‡ä¼ ï¼ŒDATA 0ä¼šå†æ¬¡å‘é€ï¼Œè€Œæ­¤æ—¶ACKåˆ°è¾¾ï¼Œåˆ™å‘é€æ–¹ä¼šè®¤ä¸ºè¿™æ˜¯åä¸€æ¬¡DATA 0çš„ç¡®è®¤åˆ†ç»„ï¼Œäºæ˜¯é©¬ä¸Šå‘é€DATA 1ã€‚è€Œç¬¬äºŒæ¬¡å‘é€çš„DATA 0æ­¤æ—¶è¿”å›ACKï¼Œå‘é€æ–¹è¯¯ä»¥ä¸ºæ˜¯DATA 1çš„ACKï¼Œå› æ­¤åˆä¼šå‘é€DATA2ï¼Œè€Œå®é™…ä¸ŠDATA 1çš„æ˜¯å¦è¯¯ç ç­‰æƒ…å†µè¿˜ä¸çŸ¥é“ï¼Œå› æ­¤å‡ºç°äº†é”™è¯¯ï¼Œè¿™ç§æƒ…å†µæ€ä¹ˆåŠï¼Ÿ å¯ä»¥ä¸ºACKåŠ ä¸Šç¼–å·ã€‚åˆ™æ¯ä¸ªACKçš„ç›¸äº’ä½œç”¨å°±ä¸ä¼šäº’ä¸²äº†ã€‚ã€å¯¹äºæ•°æ®é“¾è·¯å±‚ç‚¹å¯¹ç‚¹ä¿¡é“ï¼Œå¾€è¿”æ—¶é—´æ¯”è¾ƒå›ºå®šï¼Œä¸ä¼šå‡ºç°ç¡®è®¤è¿Ÿåˆ°çš„æƒ…å†µï¼Œå› æ­¤å¯ä»¥ä¸ç»™ç¡®è®¤åˆ†ç»„ç¼–å·ã€‘ å›é€€Nå¸§åè®®GBN(Go-Back-N)èƒŒæ™¯ åœæ­¢-ç­‰å¾…åè®®çš„ä¿¡é“åˆ©ç”¨ç‡å¤ªä½äº†ï¼Œå¦‚æœåŠ ä¸Šè¶…æ—¶é‡ä¼ ï¼Œåˆ©ç”¨ç‡æ›´ä½äº†ï¼ ä¹‹æ‰€ä»¥ä½è¿˜æ˜¯å› ä¸ºâ€åœæ­¢ç­‰å¾…â€œã€‚ æ‰€ä»¥GBNé‡‡ç”¨æµæ°´çº¿ä¼ è¾“ï¼Œä¸€æ¬¡åˆ†ç»„ä¼ è¾“å¤šä¸ªä¿¡æ¯ã€‚ å›é€€Nå¸§ï¼šæˆæ‰¹å‘é€æ•°æ®åˆ†ç»„ã€‚ä½†å½“ä¸€æ‰¹æ•°æ®åˆ†ç»„åˆ°è¾¾æ¥æ”¶æ–¹åï¼Œå…¶ä¸­ä¸€ä¸ªåˆ†ç»„å‡ºç°è¯¯ç ï¼Œå…¶ä»–çš„æ­£ç¡®åˆ†ç»„ä¹Ÿä¼šå—åˆ°ç‰µè¿ã€‚ æ‰€ä»¥é€šä¿¡çº¿è·¯è´¨é‡ä¸å¥½æ—¶ï¼ŒGBNçš„ä¿¡é“åˆ©ç”¨ç‡ä¸æ¯”SWå¥½å¤šå°‘ ä¸‰ä¸ªå…³é”®ä¿¡æ¯ æ¯”ç‰¹æ•°ç›®ï¼šæ¯”ç‰¹æ•°ç›®å†³å®šå…è®¸ä¸€æ¬¡å‘é€çš„åºå·æ•°é‡ã€‚ å¦‚ï¼Œ3ä¸ªæ¯”ç‰¹å¯ä»¥è¡¨ç¤ºåºå· 0~7 ã€‚ å‘é€çª—å£å°ºå¯¸WTå–å€¼ï¼šlW= ï¼ˆ2^nï¼‰-1 n å³æ¯”ç‰¹æ•° æ¥æ”¶çª—å£å°ºå¯¸WRå–å€¼ï¼šWr = 1 å¦‚æœæ˜¯2åŠä»¥ä¸Šï¼Œå°±å˜æˆé€‰æ‹©é‡ä¼ äº†ã€‚ æ³¨æ„ï¼šWtã€Wr æ˜¯ç‹¬ç«‹äºå‘é€åºå·çš„ï¼Œä¸”å—å‘é€éœ€è¦çš„é™åˆ¶ï¼ˆå¿…é¡»å°äºåºå·ä¸ªæ•°-1ï¼‰. ç´¯è®¡ç¡®è®¤ æ¥æ”¶æ–¹å¯¹æ”¶åˆ°çš„æ•°æ®åˆ†ç»„ä¸ä¸€å®šè¦é€ä¸ªå‘é€ç¡®è®¤ï¼Œè€Œæ˜¯å¯ä»¥åœ¨æ”¶åˆ°å‡ ä¸ªæ•°æ®åˆ†ç»„å (ç”±å…·ä½“å®ç°å†³å®š)å¯¹æŒ‰åºåˆ°è¾¾çš„æœ€åä¸€ä¸ªæ•°æ®åˆ†ç»„å‘é€ç¡®è®¤ã€‚ å³ï¼šACKnè¡¨ç¤ºåºå·ä¸ºnåŠä»¥å‰çš„æ‰€æœ‰æ•°æ®åˆ†ç»„éƒ½å·²æ­£ç¡®æ¥æ”¶ã€‚ ä¼˜ç‚¹ï¼š èŠ‚çœèµ„æº å³ä½¿ç¡®è®¤åˆ†ç»„ä¸¢å¤±ï¼Œå‘é€æ–¹ä¹Ÿå¯èƒ½ä¸å¿…é‡ä¼ ã€‚ æ³¨æ„æ˜¯ç¡®è®¤åˆ†ç»„ï¼Œä¸æ˜¯æ•°æ®ã€‚ä¸è¦æ··æ·†ã€‚ ç¼ºç‚¹ï¼šä¸èƒ½å‘å‘é€æ–¹åŠæ—¶åæ˜ å‡ºæ¥æ”¶æ–¹å·²ç»æ¥å—çš„æ­£ç¡®åˆ†ç»„ä¿¡æ¯ã€‚ æœºåˆ¶è¡¥å……ï¼š å‘é€çš„æ•°æ®å‡ºç°é—®é¢˜ï¼Ÿ æ¥æ”¶æ–¹é€šè¿‡æ£€é”™ç ï¼Œå‘ç°æœ‰æ•°æ®å‡ºé”™ï¼Œåˆ™ä¸¢å¼ƒè¯¥æ•°æ®åˆ†ç»„ã€‚ç»§è€Œå‘å‘é€æ–¹å‘é€ä¹‹å‰æ¥å—çš„æ­£ç¡®åˆ†ç»„åºå·x ã€‚ é”™è¯¯åˆ†ç»„ä¹‹åçš„æ•°æ®ï¼Œæœ‰å¤šå°‘ä¸ªï¼Œå°±å‘å‘é€æ–¹å‘é€å¤šå°‘ä¸ªç¡®è®¤ x çš„ACKã€‚ äºæ˜¯å‘é€æ–¹æ”¶åˆ°é‡å¤ç¡®è®¤å°±çŸ¥é“å‡ºç°äº†å·®é”™ï¼Œå³å¯è¶Šè¿‡è¶…æ—¶è®¡æ—¶å™¨ï¼Œç«‹å³é‡ä¼ ã€‚ ï¼ˆæ”¶åˆ°å‡ ä¸ªé‡å¤ç¡®è®¤å°±ç«‹å³é‡ä¼ ç”±å…·ä½“å®ç°å†³å®šï¼‰ è‹¥Wtè¶…è¿‡å–å€¼èŒƒå›´ï¼Œä¾‹å¦‚Wr8ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µ? æ¥æ”¶æ–¹æ— æ³•åˆ†è¾¨æ–°æ—§æ•°æ®åˆ†ç»„ï¼ å‡è®¾ç¬¬ä¸€æ¬¡å‘é€æ•°æ®ï¼Œæ¥æ”¶æ–¹æˆåŠŸæ¥æ”¶ã€‚ä½†æ¥å—ç¡®è®¤ARKä¸¢å¤±äº†ã€‚è¿™æ—¶å‘é€æ–¹è¶…æ—¶é‡ä¼ ï¼Œæ¥æ”¶æ–¹æ¥å—åˆ°æ•°æ®åˆ†ç»„åï¼Œå› ä¸ºWrè¶…è¿‡èŒƒå›´ï¼Œä½¿çª—å£å†…æ•°æ®åºå·å‰åé‡åˆäº†ï¼Œåˆ™æ¥æ”¶æ–¹éš¾ä»¥åˆ¤æ–­æœ¬æ¬¡æ•°æ®æ˜¯ç¬¬ä¸€æ¬¡å‘é€çš„è¿˜æ˜¯ç¬¬äºŒæ¬¡å‘é€çš„ã€‚ é€‰æ‹©é‡ä¼ åè®®SRï¼ˆSelective Repeatï¼‰èƒŒæ™¯ï¼š å›é€€Nå¸§åè®®çš„æ¥æ”¶çª—å£å°ºå¯¸Wråªèƒ½ç­‰äº1ï¼Œå› æ­¤æ¥æ”¶æ–¹åªèƒ½æŒ‰åºæ¥æ”¶æ­£ç¡®åˆ°è¾¾çš„æ•°æ®åˆ†ç»„ã€‚ ä¸€ä¸ªæ•°æ®åˆ†ç»„çš„è¯¯ç å°±ä¼šå¯¼è‡´å…¶åç»­å¤šä¸ªæ•°æ®åˆ†ç»„ä¸èƒ½è¢«æ¥æ”¶æ–¹æŒ‰åºæ¥æ”¶è€Œä¸¢å¼ƒ (å°½ç®¡å®ƒä»¬æ— ä¹±åºå’Œè¯¯ç )ã€‚è¿™å¿…ç„¶ä¼šé€ æˆå‘é€æ–¹å¯¹è¿™äº›æ•°æ®åˆ†ç»„çš„è¶…æ—¶é‡ä¼ ï¼Œè¿™æ˜¯å¯¹é€šä¿¡èµ„æºçš„æå¤§æµªè´¹ã€‚ é€‰æ‹©é‡ä¼ åè®®ï¼š ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå¯è®¾æ³•åªé‡ä¼ å‡ºç°è¯¯ç çš„æ•°æ®åˆ†ç»„ã€‚å› æ­¤ï¼Œæ¥æ”¶çª—å£çš„å°ºå¯¸WRä¸åº”å†ç­‰äº1 (è€Œåº”å¤§äº1)ï¼Œä»¥ä¾¿æ¥æ”¶æ–¹å…ˆæ”¶ä¸‹å¤±åºåˆ°è¾¾ä½†æ— è¯¯ç å¹¶ä¸”å¸­å·è½åœ¨æ¥æ”¶çª—å£å†…çš„é‚£äº›æ•°æ®åˆ†ç»„ï¼Œç­‰åˆ°æ‰€ç¼ºåˆ†ç»„æ”¶é½åå†ä¸€å¹¶é€äº¤ä¸Šå±‚ã€‚ è¿™å°±æ˜¯é€‰æ‹©é‡ä¼ åè®®ã€‚ æ³¨æ„ï¼šé€‰æ‹©é‡ä¼ åè®®ä¸ºäº†ä½¿å‘é€æ–¹ä»…é‡ä¼ å‡ºç°å·®é”™çš„åˆ†ç»„ï¼Œæ¥æ”¶æ–¹ä¸å†é‡‡ç”¨ç´¯ç§¯ç¡®è®¤ï¼Œè€Œéœ€å¯¹æ­£ç¡®æ¥æ”¶åˆ°çš„æ•°æ˜åˆ†ç»„è¿›è¡Œé€ä¸€ç¡®è®¤ã€‚ ä¸‰ä¸ªå…³é”®ä¿¡æ¯ æ¯”ç‰¹æ•°ç›®ï¼šæ¯”ç‰¹æ•°ç›®å†³å®šå…è®¸ä¸€æ¬¡å‘é€çš„åºå·æ•°é‡ã€‚ å¦‚ï¼Œ3ä¸ªæ¯”ç‰¹å¯ä»¥è¡¨ç¤ºåºå· 0~7 ã€‚ å‘é€çª—å£å°ºå¯¸WTå–å€¼ï¼šlW= 2^ï¼ˆn-1ï¼‰ è‹¥ Wt 1 ï¼šä¸åœæ­¢ç­‰å¾…åè®®ç›¸åŒ è‹¥ Wt 2^(n-1) ï¼šé€ æˆæ¥æ”¶æ–¹æ— æ³•åˆ†è¾¨æ–°ã€æ—§æ•°æ®åˆ†ç»„çš„é—®é¢˜ æ¥æ”¶çª—å£å°ºå¯¸WRå–å€¼ï¼šWr = Wt ä¸€èˆ¬æƒ…å†µä¸å‘é€çª—å£å°ºå¯¸ç›¸åŒã€‚ è‹¥ Wr 1 ï¼šä¸å›é€€Nå¸§åè®®ç›¸åŒ è‹¥ Wr 2^(n-1) ï¼šæ²¡æ„ä¹‰ï¼Œæ²¡ç”¨å¤„ã€‚å’Œä¸è¶…å‡ºä¸€æ ·ã€‚ å‘é€æ–¹æ”¶åˆ°ä¸€ä¸ªç¡®è®¤åˆ†ç»„å°±å¾€åæ»‘åŠ¨ä¸€ä½ã€‚é™¤éè¯¥æ»‘åŠ¨åˆ†ç»„å‰æœ‰æœªç¡®è®¤åˆ†ç»„ã€‚ å¦‚æœæ”¶åˆ°ç¡®è®¤åˆ†ç»„å´æœªæ»‘åŠ¨ï¼Œåˆ™æ ‡è®°è¯¥åˆ†ç»„ä¸ºå·²æˆåŠŸå‘é€ï¼Œç­‰å¾…å‘é€è¯¥åˆ†ç»„å‰æœªç¡®è®¤å‘é€çš„åˆ†ç»„ã€‚ æ¥æ”¶æ–¹æ”¶åˆ°ä¸€ä¸ªæ­£ç¡®åˆ†ç»„å°±å¾€åæ»‘åŠ¨ä¸€ä½ã€‚é™¤éè¯¥æ»‘åŠ¨åˆ†ç»„å‰æœ‰é”™è¯¯(æœªæ¥æ”¶)åˆ†ç»„ã€‚ å¦‚æœæ”¶åˆ°æ­£ç¡®åˆ†ç»„å´æœªæ»‘åŠ¨ï¼Œåˆ™æ ‡è®°è¯¥åˆ†ç»„ä¸ºå·²æˆåŠŸæ¥æ”¶ï¼Œç­‰å¾…å‘é€è¯¥åˆ†ç»„å‰æœªæˆåŠŸæ¥æ”¶çš„åˆ†ç»„ã€‚ æœºåˆ¶è¡¥å……ï¼š ä¸ºä»€ä¹ˆWtçš„æœ€å¤§å€¼æ˜¯2^(n-1) è€Œä¸æ˜¯å’ŒGBNä¸­çš„ (2^n)-1 ä¸€æ ·? å› ä¸ºæ— è®ºæ˜¯GBNè¿˜æ˜¯SRï¼Œéƒ½è¦æ±‚æ¥æ”¶æ–¹æ¥å—æ•°æ®åˆ†ç»„æ—¶èƒ½åˆ†è¾¨æ–°æ—§æ•°æ®åˆ†ç»„ã€‚ è€ŒGBNä¸­çš„æ¥æ”¶çª—å£å›ºå®šä¸º1ï¼ŒSRä¸­çš„æ¥æ”¶çª—å£ä¸å®šã€‚ è¿™é‡Œçš„2^(n-1) å¯ä»¥æ‹†åˆ†æˆ å‘é€çª—å£+æ¥å—çª—å£ 2^n é»˜è®¤å‘é€çª—å£å’Œæ¥æ”¶çª—å£å¤§å°ä¸€æ ·çš„æƒ…å†µä¸‹ï¼ŒWt Wr 2^(n-1) æ­¤æ—¶ Wt + Wr 2^(n-1) + 2^(n-1) 2^nã€‚ å³ä½¿ä¸ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œä¹Ÿè¦æ±‚Wt + Wr 2^nã€‚ é‚£ä¸ºä»€ä¹ˆæ»¡è¶³è¿™ä¸ªæ¡ä»¶å°±èƒ½ä¿è¯æ–°æ—§æ•°ç»„çš„åŒºåˆ†å‘¢ï¼Ÿ åˆ†è¾¨æ–°æ—§æ•°æ®åˆ†ç»„çš„å…³é”®åœ¨äºï¼Œæ–°åˆ†ç»„å’Œæ—§åˆ†ç»„çš„åºå·ä¸ä¸€è‡´ï¼ˆä¸ç›¸åŒï¼‰ã€‚ æ¥æ”¶æ–¹å¯¹æ—§åˆ†ç»„çš„æ¥å—ç¡®è®¤ARKä¸¢å¤±ï¼Œå†æ¬¡æ¥å—å‘é€æ–¹è¶…æ—¶é‡ä¼ çš„æ•°æ®æ—¶ï¼Œåªæœ‰å‘ç°åºå·ä¸ä¸€è‡´ï¼Œæ‰èƒ½å‘ç°ARKä¸¢å¤±ï¼Œä»è€Œé‡æ–°å‘å›æ¥å—ç¡®è®¤ARKï¼Œæ–¹ä¾¿ä¸‹ä¸€æ­¥ä¼ è¾“ã€‚ è€Œ Wt + Wr 2^n çš„æƒ…å†µä¸‹ï¼Œç”±äºçª—å£å†…åºå·ä¸ªæ•° æ€»çš„åºå·è¡¨ç¤ºä¸ªæ•°ï¼ŒåŠ¿å¿…ä¼šå‘ç”Ÿåºå·ç›¸åŒçš„æƒ…å†µï¼Œä¹Ÿå°±éš¾ä»¥åˆ†è¾¨äº†ã€‚ PPPåè®® ï¼ˆPoint to Point Protocolæœ¬èº«æ˜¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®ï¼Œç”¨äºè§„å®šå¸§æ ¼å¼ã€‚ åº”ç”¨åœºæ™¯ï¼š ä¸€èˆ¬ç”¨æˆ·æ¥å…¥å› ç‰¹ç½‘ï¼Œéœ€è¦é€šè¿‡è¿æ¥æŸä¸ªå› ç‰¹ç½‘æœåŠ¡æä¾›è€… ISP(Internet Service Provider)æ¥è¿›å…¥å› ç‰¹ç½‘ã€‚ ä¸­å›½ ISP ï¼ˆè¿è¥å•†ï¼‰: ä¸­å›½è”é€šï¼Œä¸­å›½ç”µä¿¡ï¼Œä¸­å›½ç§»åŠ¨ã€‚ å› ä¸ºè¿™äº› ISP å·²ç»ä»å› ç‰¹ç½‘ç®¡ç†æœºæ„ç”³è¯·åˆ°äº†ä¸€æ‰¹ IP åœ°å€ã€‚ç”¨æˆ·çš„è®¡ç®—æœºåªæœ‰è·å–åˆ° ISP æ‰€åˆ†é…çš„åˆæ³• IP åœ°å€åï¼Œæ‰èƒ½æˆä¸º internet ä¸Šçš„ä¸»æœºã€‚ ç”¨æˆ·è®¡ç®—æœºä¸ ISP è¿›è¡Œé€šä¿¡æ—¶ï¼Œæ‰€ä½¿ç”¨çš„æ•°æ®é“¾è·¯å±‚åè®®å°±æ˜¯ PPP åè®®ã€‚ 1999å¹´å…¬å¸ƒçš„å†ä»¥å¤ªç½‘ä¸Šè¿è¡Œçš„PPPåè®®ï¼Œå³ PPP over Ethernet ï¼Œç®€ç§° PPPoE ã€‚å®ƒä½¿å¾— ISP å¯ä»¥é€šè¿‡ DSLã€ç”µè·¯è°ƒåˆ¶è§£è°ƒå™¨ã€ä»¥å¤ªç½‘ç­‰å®½å¸¦æ¥å…¥æŠ€æœ¯ï¼Œä»¥ä»¥å¤ªç½‘æ¥å£çš„å½¢å¼ä¸ºç”¨æˆ·æä¾›æ¥å…¥æœåŠ¡ã€‚ ç‚¹å¯¹ç‚¹æœåŠ¡PPP ä¹Ÿå¹¿æ³›åº”ç”¨äºå¹¿åŸŸç½‘è·¯ç”±å™¨ä¹‹é—´çš„ä¸“ç”¨çº¿è·¯ã€‚ PPPåè®®ä¸ºåœ¨ç‚¹å¯¹ç‚¹é“¾è·¯ä¼ è¾“å„ç§åè®®æ•°æ®æŠ¥æä¾›äº†ä¸€ä¸ªæ ‡å‡†æ–¹æ³•ï¼Œä¸»è¦ç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†æ„æˆ: å°è£…æˆå¸§ï¼šå¯¹å„ç§åè®®æ•°æ®æŠ¥çš„å°è£…æ–¹æ³•ã€‚ é“¾è·¯æ§åˆ¶åè®®LCPï¼šç”¨äºå»ºç«‹ã€é…ç½®ä»¥åŠæµ‹è¯•æ•°æ®é“¾è·¯çš„è¿æ¥ã€‚ ä¸€å¥—ç½‘ç»œæ§åˆ¶åè®®NCPs ï¼š å…¶ä¸­çš„æ¯ä¸€ä¸ªåè®®æ”¯æŒä¸åŒçš„ç½‘ç»œå±‚åè®®ã€‚ æ”¯æŒä¸åŒç±»å‹ç½‘ç»œå±‚åè®®ï¼šTCPIP ä¸­çš„IPã€Novell NetWare ç½‘ç»œOSä¸­çš„ IPXã€è‹¹æœå…¬å¸çš„Apple Talkã€‚ æ”¯æŒåœ¨å¤šç§ç±»å‹çš„ç‚¹å¯¹ç‚¹é“¾è·¯ï¼ˆç‰©ç†å±‚ï¼‰ä¸Šè¿è¡Œï¼šé¢å‘å­—èŠ‚çš„å¼‚æ­¥é“¾è·¯ã€é¢å‘æ¯”ç‰¹çš„åŒæ­¥é“¾è·¯ã€‚ å¸§æ ¼å¼ï¼š é€æ˜ä¼ è¾“ å­—èŠ‚å¡«å……æ³• é¢å‘å­—èŠ‚çš„å¼‚æ­¥é“¾è·¯é‡‡ç”¨æ’å…¥è½¬ä¹‰å­—ç¬¦çš„å­—èŠ‚å¡«å……æ³•ã€‚ å¦‚PPPå¸§çš„æ ‡å¿—å­—æ®µå–å€¼ä¸º7E(16è¿›åˆ¶)ï¼Œå¦‚æœæ•°æ®ä¸­å‡ºç°7Eåˆ™éœ€è¦åœ¨æ•°æ®å‰æ’å…¥è½¬ä¹‰å­—ç¬¦7D(16è¿›åˆ¶)ï¼Œå¹¶å°†åŸæ¥çš„7Eå‡20(16è¿›åˆ¶)ï¼Œæ‰€ä»¥7Eåœ¨æ•°æ®ä¸­æœ€ç»ˆä¼šå˜æˆ7D5Eã€‚ å¦‚æœæ•°æ®ä¸­æœ‰è½¬ä¹‰å­—ç¬¦7Dæ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥åœ¨è½¬ä¹‰å­—ç¬¦7Då‰å†åŠ ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦7Dï¼Œå¹¶å°†æ•°æ®çš„7Då‡20(16è¿›åˆ¶)ï¼Œäºæ˜¯è½¬ä¹‰å­—ç¬¦7Dåœ¨æ•°æ®ä¸­æœ€ç»ˆä¼šå˜æˆ7D5Dã€‚ æ•°æ®ä¸­å‡ºç°çš„æ¯ä¸€ä¸ªASCIIç æ§åˆ¶å­—ç¬¦ã€æ•°å€¼å°äº20(16è¿›åˆ¶)çš„å­—ç¬¦ã€‘ï¼Œåˆ™åœ¨è¯¥å­—ç¬¦å‰æ’å…¥ä¸€ä¸ª7Dï¼ŒåŒæ—¶å°†è¯¥å­—ç¬¦çš„ç¼–ç åŠ ä¸Š20(16è¿›åˆ¶)ã€‚ æ¥æ”¶æ–¹åªéœ€è¦åå˜æ¢å³å¯æ¢å¤å‡ºåŸæ¥çš„å¸§çš„æ•°æ®éƒ¨åˆ†ã€‚ æ¯”ç‰¹å¡«å……æ³• é¢å‘æ¯”ç‰¹çš„åŒæ­¥é“¾è·¯é‡‡ç”¨æ’å…¥æ¯”ç‰¹0çš„æ¯”ç‰¹å¡«å……æ³• å‘é€æ–¹ï¼šå¯¹å¸§çš„æ•°æ®éƒ¨åˆ†è¿›è¡Œæ‰«æ(ä¸€èˆ¬ç”±ç¡¬ä»¶å®ç°)ã€‚åªè¦å‘ç°5ä¸ªè¿ç»­çš„æ¯”ç‰¹1ï¼Œåˆ™ç«‹å³å¡«å……1ä¸ªæ¯”ç‰¹0ã€‚ æ¥æ”¶æ–¹ï¼šå¯¹å¸§çš„æ•°æ®éƒ¨åˆ†è¿›è¡Œæ‰«æ(ä¸€èˆ¬ç”±ç¡¬ä»¶å®ç°)ã€‚åªè¦å‘ç°5ä¸ªè¿ç»­çš„æ¯”ç‰¹1ï¼Œå°±æŠŠå…¶åçš„1ä¸ªæ¯”ç‰¹0åˆ é™¤ã€‚ å·®é”™æ£€æµ‹ æ¥æ”¶æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªPPPå¸§ï¼Œå°±è¿›è¡ŒCRCæ£€éªŒ(å¤šé¡¹å¼)ã€‚è‹¥CRCæ£€éªŒæ­£ç¡®ï¼Œå°±æ”¶ä¸‹è¿™ä¸ªå¸§ï¼›åä¹‹å°±ä¸¢å¼ƒè¿™ä¸ªå¸§(ä¸å¯é ä¼ è¾“æœåŠ¡)ã€‚æ£€éªŒç”±å°¾éƒ¨çš„FCSå®ç° ç”¨äºæ£€éªŒçš„å¤šé¡¹å¼ä¸ºX^16^ + X^12^+X^5^+1 RFC1662 çš„é™„å½•éƒ¨åˆ†ï¼Œç»™äº†FCSçš„Cè¯­è¨€å®ç°ï¼ˆæŸ¥è¡¨æ³•ï¼‰ æœ€åï¼Œä»¥æ‹¨å·æ¥å…¥ä¸ºä¾‹ï¼Œä»‹ç»PPPåè®®çš„å·¥ä½œçŠ¶æ€ã€‚ è¿™é‡Œçœ‹ä¹¦æˆ–è€…çœ‹åŸè§†é¢‘ã€‚ åª’ä½“æ¥å…¥æ§åˆ¶ åœºæ™¯ï¼šä»¥æ€»çº¿å‹å±€åŸŸç½‘ä¸ºä¾‹ï¼Œä¸€æ ¹åŒè½´ç”µç¼†ä¸Šçš„å¤šå°ä¸»æœºåŒæ—¶å‘é€æ•°æ®ï¼Œè‚¯å®šä¼šå‘ç”Ÿç¢°æ’ã€‚ å…±äº«ä¿¡é“è¦ç€é‡è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚ä½•åè°ƒå¤šä¸ªå‘é€å’Œæ¥æ”¶ç«™ç‚¹å¯¹ä¸€ä¸ªå…±äº«ä¼ è¾“åª’ä½“çš„å ç”¨ï¼Œå³åª’ä½“æ¥å…¥æ§åˆ¶MAC(Medium Access Control) é›†ä¸­æ§åˆ¶æœ‰å¤šç‚¹è½®è¯¢åè®®ï¼Œåˆ†æ•£æ§åˆ¶æœ‰ä»¤ç‰Œä¼ é€’åè®®ã€‚ é™æ€åˆ’åˆ†ä¿¡é“å¤ç”¨(Multiplexing)ï¼šé€šè¿‡ä¸€æ¡ç‰©ç†çº¿è·¯åŒæ—¶ä¼ è¾“å¤šè·¯ç”¨æˆ·çš„ä¿¡å·ã€‚å½“ç½‘ç»œä¸­ä¼ è¾“åª’ä½“çš„ä¼ è¾“å®¹é‡å¤§äºå¤šæ¡å•ä¸€ä¿¡é“çš„æ€»é€šä¿¡é‡æ—¶ï¼Œå¯åˆ©ç”¨å¤ç”¨æŠ€æœ¯åœ¨ä¸€æ¡ç‰©ç†çº¿è·¯ä¸Šå»ºç«‹å¤šæ¡é€šä¿¡ä¿¡é“æ¥å……åˆ†åˆ©ç”¨ä¼ è¾“åª’ä½“çš„å¸¦å®½ã€‚ åˆ†ä¸ºå››ç±»ï¼šé¢‘åˆ†ã€æ—¶åˆ†ã€ç åˆ†ã€æ³¢åˆ†ã€‚ é¢‘åˆ†ï¼šä¸€æ¡è·¯åŒä¸€æ—¶é—´èµ°ä¸¤ç§è½¦ï¼›è½¦ä¸è½¦ä¹‹é—´é—´éš”åŒºåˆ†ã€‚ æ—¶åˆ†ï¼šä¸€æ¡è·¯ä¸€ç§è½¦åªèƒ½åœ¨å±äºä»–çš„æ—¶é—´é—´éš™ç»è¿‡ï¼›ä¹Ÿå°±æ˜¯ä¾æ¬¡æŒ‰åºä¸²è¡Œã€‚ æ³¢åˆ†ã€ç åˆ†ï¼šç»™ä¸¤ç§è½¦åˆ†åˆ«ç¼–å·ï¼ˆç¼–ç ï¼‰ï¼Œåˆ°äº†ç»ˆç‚¹å†æ ¹æ®ç¼–å·åŒºåˆ†ï¼› TDMAï¼ŒFDMAï¼ŒCDMAæ˜¯å¸¸è§çš„ç‰©ç†å±‚ä¿¡é“å¤ç”¨æŠ€æœ¯ï¼Œå±äºé™æ€åˆ’åˆ†ä¿¡é“ï¼Œç”¨äºå¤šç”¨æˆ·å…±äº«ä¿¡é“ï¼Œä¸ä¼šå‘ç”Ÿå†²çªã€‚ é¢‘åˆ†å¤ç”¨FDMå°†ä¼ è¾“çº¿è·¯çš„é¢‘å¸¦èµ„æºåˆ’åˆ†æˆå¤šä¸ªå­é¢‘å¸¦ï¼Œå½¢æˆå¤šä¸ªå­ä¿¡é“ã€‚å„å­ä¿¡é“ä¹‹é—´ç•™å‡ºéš”ç¦»é¢‘å¸¦ï¼Œä»¥å…é€ æˆå­ä¿¡é“é—´å¹²æ‰°ã€‚ å½“å¤šä¸ªä¿¡å·è¾“å…¥ä¸€ä¸ªå¤šè·¯å¤ç”¨å™¨æ—¶ï¼Œè¿™ä¸ªå¤ç”¨å™¨å°†æ¯ä¸€ä¸ªä¿¡å·è°ƒåˆ¶åˆ°ä¸åŒé¢‘ç‡çš„è½½æ³¢ä¸Šï¼Œæ¥æ”¶ç«¯ç”±ç›¸åº”çš„åˆ†ç”¨å™¨é€šè¿‡æ»¤æ³¢å°†å„è·¯ä¿¡å·åˆ†éš”å¼€ï¼Œå°†åˆæˆçš„å¤ç”¨ä¿¡å·æ¢å¤æˆåŸå§‹çš„å¤šè·¯ä¿¡å·ã€‚ æ—¶åˆ†å¤ç”¨TDMå°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ªæ—¶éš™ï¼Œå°†å¸¦å®½èµ„æºæŒ‰ç…§æ—¶éš™è½®æµåˆ†é…ç»™ä¸åŒçš„ç”¨æˆ·ï¼Œæ¯å¯¹ç”¨æˆ·åªåœ¨æ‰€åˆ†é…æ—¶éš™é‡Œä½¿ç”¨çº¿è·¯ä¼ è¾“æ•°æ®ã€‚ æ—¶åˆ†å¤ç”¨æŠ€æœ¯å°†æ—¶é—´åˆ’åˆ†ä¸ºä¸€æ®µæ®µç­‰é•¿çš„æ—¶åˆ†å¤ç”¨å¸§ï¼Œæ¯ä¸€ä¸ªæ—¶åˆ†å¤ç”¨çš„ç”¨æˆ·åœ¨æ¯ä¸€ä¸ªæ—¶åˆ†å¤ç”¨å¸§ä¸­å ç”¨å›ºå®šåºå·çš„æ—¶éš™ã€‚æ¯ä¸ªç”¨æˆ·æ‰€å çš„æ—¶éš™æ˜¯å‘¨æœŸæ€§å‡ºç°çš„ï¼Œå…¶å‘¨æœŸå°±æ˜¯æ—¶åˆ†å¤ç”¨å¸§çš„é•¿åº¦ æ³¢åˆ†å¤ç”¨WDMæ³¢åˆ†å¤ç”¨å…¶å®å°±æ˜¯å…‰çš„é¢‘åˆ†å¤ç”¨ã€‚ç»è¿‡å…‰å¤ç”¨å™¨(åˆæ³¢å™¨)çš„å…‰è°ƒåˆ¶ï¼Œåˆ†åˆ«å°†å…‰è½½æ³¢å˜æ¢åˆ°ä¸åŒæ³¢é•¿ã€‚è¿™äº›å…‰æ³¢ç»è¿‡å…‰å¤ç”¨å™¨å°±å¯ä»¥åœ¨ä¸€æ ¹å…‰çº¤ä¸­ä¼ è¾“ã€‚åˆ°è¾¾ç»ˆç‚¹åç”¨å…‰åˆ†ç”¨å™¨å°†ä¸åŒæ³¢é•¿çš„å…‰è¿›è¡Œè¿˜åŸå¾—åˆ°ä¿¡æ¯ å…‰ä¿¡å·ä¼ è¾“ä¸€æ®µè·ç¦»åä¼šè¡°å‡ï¼Œå¯¹è¡°å‡çš„å…‰ä¿¡å·å¿…é¡»è¿›è¡Œæ”¾å¤§æ‰èƒ½ç»§ç»­ä¼ è¾“ã€‚æ”¾å¤§çš„å·¥å…·æ˜¯æºé•‡å…‰çº¤æ”¾å¤§å™¨EDFAã€‚ ç åˆ†å¤ç”¨CDM CDMçš„æ¯ä¸€ä¸ªç”¨æˆ·å¯ä»¥åœ¨åŒæ ·çš„æ—¶é—´ä½¿ç”¨åŒæ ·çš„é¢‘å¸¦è¿›è¡Œé€šä¿¡ï¼Œè¿™æ˜¯å› ä¸ºå„ç”¨æˆ·ä½¿ç”¨äº†ç»è¿‡**ç‰¹æ®ŠæŒ‘é€‰çš„ä¸åŒç å‹ï¼Œ**å› æ­¤å„ç”¨æˆ·ä¹‹é—´ä¸ä¼šé€ æˆå¹²æ‰°ã€‚ é¢‘è°±ç±»ä¼¼ç™½å™ªå£°ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼ºã€‚æœ€åˆç”¨äºå†›äº‹é€šä¿¡ã€‚åæ¥æŠ€æœ¯å‘å±•æˆæœ¬ä½äº†ï¼Œä¹Ÿç”¨äºæ°‘ç”¨é€šä¿¡ã€‚ ç ç‰‡(chip)ï¼š åœ¨CDMAä¸­ï¼Œæ¯ä¸€ä¸ªæ¯”ç‰¹æ—¶é—´å†åˆ’åˆ†ä¸ºmä¸ªçŸ­çš„é—´éš”ï¼Œç§°ä¸ºç ç‰‡ã€‚é€šå¸¸mçš„å€¼æ˜¯64æˆ–128ï¼› ä½¿ç”¨CDMAçš„æ¯ä¸€ä¸ªç«™è¢«æŒ‡æ´¾ä¸€ä¸ªå”¯ä¸€çš„m bitç ç‰‡åºåˆ—ã€‚ ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹1ï¼Œåˆ™å‘é€å®ƒè‡ªå·±çš„m bitç ç‰‡åºåˆ—ï¼› ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹0ï¼Œåˆ™å‘é€å®ƒè‡ªå·±çš„m bitç ç‰‡åºåˆ—äºŒè¿›åˆ¶åç ã€‚a è¿™ç§é€šä¿¡æ–¹å¼åˆç§°â€ç›´æ¥åºåˆ—æ‰©é¢‘DSSSâ€œ å¤ç”¨å’Œåˆ†å€ï¼š ç”±äºç åˆ†å¤ç”¨ä¸»è¦ç”¨äºå¤šå€æ¥å…¥ï¼Œäººä»¬æ›´å¸¸ç”¨çš„åè¯æ˜¯ç åˆ†å¤šå€CDMAã€‚ é¢‘åˆ†å¤ç”¨FDMå’Œæ—¶åˆ†å¤ç”¨TDMåŒæ ·å¯ç”¨äºå¤šå€æ¥å…¥ï¼Œ ç›¸åº”çš„åè¯æ˜¯é¢‘åˆ†å¤šå€FDMA(Frequency Division Multiple Access)å’Œæ—¶åˆ†å¤šå€TDMA(Time Division Multiple Access)ã€‚ å¤ç”¨ï¼šå°†å•ä¸€åª’ä½“çš„é¢‘å¸¦èµ„æºåˆ’åˆ†æˆå¾ˆå¤šå­ä¿¡é“ï¼Œè¿™äº›å­ä¿¡é“ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ã€‚ä»åª’ä½“çš„æ•´ä½“é¢‘å¸¦èµ„æºä¸Šçœ‹ï¼Œæ¯ä¸ªå­ä¿¡é“åªå ç”¨è¯¥åª’ä½“é¢‘å¸¦èµ„æºçš„ä¸€éƒ¨åˆ†ã€‚ å¤šå€(å¤šç‚¹æ¥å…¥)ï¼šå¤„ç†çš„æ˜¯åŠ¨æ€åˆ†é…ä¿¡é“ç»™ç”¨æˆ·ã€‚è¿™åœ¨ç”¨æˆ·ä»…ä»…æš‚æ—¶æ€§åœ°å ç”¨ä¿¡é“çš„åº”ç”¨ä¸­æ˜¯å¿…é¡»çš„ï¼Œè€Œæ‰€æœ‰çš„ç§»åŠ¨é€šä¿¡ç³»ç»ŸåŸºæœ¬ä¸Šéƒ½å±äºè¿™ç§æƒ…å†µã€‚ç›¸åï¼Œåœ¨ä¿¡é“æ°¸ä¹…æ€§åœ°åˆ†é…ç»™ç”¨æˆ·çš„åº”ç”¨ä¸­ï¼Œå¤šå€æ˜¯ä¸éœ€è¦çš„ (å¯¹äºæ— çº¿å¹¿æ’­æˆ–ç”µè§†å¹¿æ’­ç«™å°±æ˜¯è¿™æ ·)ã€‚ å¤šå€å¯ä»¥ç†è§£ä¸ºå¹¶å‘ï¼Œå¤ç”¨å³å¹¶è¡Œã€‚ CSMACDåè®®ï¼ˆéšæœºæ¥å…¥ï¼‰æ€»çº¿å±€åŸŸç½‘ä½¿ç”¨ã€‚ è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥ç¢°æ’æ£€æµ‹ CSMACD (Carrier Sense Multiple AccessCollision Detection) CSMACDåè®®æ›¾ç»ç”¨äºå„ç§æ€»çº¿ç»“æ„ä»¥å¤ªç½‘å’ŒåŒç»çº¿ä»¥å¤ªç½‘çš„æ—©æœŸç‰ˆæœ¬ä¸­ç°åœ¨çš„ä»¥å¤ªç½‘åŸºäºäº¤æ¢æœºå’Œå…¨åŒå·¥è¿æ¥ï¼Œä¸ä¼šæœ‰ç¢°æ’ï¼Œå› æ­¤æ²¡æœ‰å¿…è¦ä½¿ç”¨CSMACDåè®®ã€‚ å¤šå€æ¥å…¥MAï¼šå¤šä¸ªç«™è¿æ¥åœ¨ä¸€æ¡æ€»çº¿ä¸Šï¼Œç«äº‰ä½¿ç”¨æ€»çº¿ã€‚ è½½æ³¢ç›‘å¬CSï¼šæ¯ä¸€ä¸ªç«™åœ¨å‘é€å¸§ä¹‹å‰å…ˆè¦æ£€æµ‹ä¸€ä¸‹æ€»çº¿ä¸Šæ˜¯å¦æœ‰å…¶ä»–ç«™ç‚¹åœ¨å‘é€å¸§(â€œå…ˆå¬åè¯´â€) : è‹¥æ£€æµ‹åˆ°æ€»çº¿ç©ºé—²96æ¯”ç‰¹æ—¶é—´åˆ™å‘é€è¿™ä¸ªå¸§;è‹¥æ£€æµ‹åˆ°æ€»çº¿å¿™ï¼Œåˆ™ç»§ç»­æ£€æµ‹å¹¶ç­‰å¾…æ€»çº¿è½¬ä¸ºç©ºé—²96æ¯”ç‰¹æ—¶é—´ï¼Œç„¶åå‘é€è¿™ä¸ªå¸§ã€‚ 96æ¯”ç‰¹æ—¶é—´æ˜¯æŒ‡å‘é€96æ¯”ç‰¹æ‰€è€—è´¹çš„æ—¶é—´ï¼Œä¹Ÿç§°å¸§é—´æœ€å°é—´éš”ã€‚ ä½œç”¨æ˜¯ä½¿æ¥æ”¶æ–¹å¯ä»¥æ£€æµ‹å‡ºä¸€ä¸ªå¸§çš„ç»“æŸï¼ŒåŒæ—¶ä¹Ÿä½¿å¾—æ‰€æœ‰å…¶ä»–ç«™ç‚¹éƒ½èƒ½æœ‰æœºä¼šå¹³ç­‰ç«äº‰ä¿¡é“å¹¶å‘é€å¸§ã€‚ **ç¢°æ’æ£€æµ‹ï¼š**æ¯ä¸€ä¸ªæ­£åœ¨å‘é€å¸§çš„ç«™è¾¹å‘é€è¾¹æ£€æµ‹ç¢°æ’ (â€œè¾¹è¯´è¾¹å¬â€) ã€‚ ä¸€æ—¦å‘ç°æ€»çº¿ä¸Šå‡ºç°ç¢°æ’ï¼Œåˆ™ç«‹å³åœæ­¢å‘é€ï¼Œé€€é¿ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å‘é€ (â€œä¸€æ—¦å†²çªï¼Œç«‹å³åœè¯´ç­‰å¾…æ—¶æœºï¼Œé‡æ–°å†è¯´â€) å› ä¸ºä¸»æœºBå…ˆå‘é€ä¸€æ®µæ—¶é—´ï¼Œæ‰€ä»¥ä¸»æœºCæ¯”ä¸»æœºBæ›´æ—©æ£€æµ‹åˆ°ç¢°æ’ã€‚ äº‰ç”¨æœŸ æœ€å°å¸§é•¿ä¸ºä»€ä¹ˆéœ€è¦è§„å®šæœ€å°å¸§é•¿ï¼Ÿ å‡è®¾Aå‘Då‘é€å¸§ï¼Œå¦‚æœå¸§å¾ˆçŸ­çš„è¯ï¼Œåœ¨2 Ï„ (tau)å†…å°±ä¼šå°†å¸§å‘é€å®Œæ¯•ï¼Œå¸§å‘é€å®Œæ¯•åä¸ä¼šè¿›è¡Œç¢°æ’æ£€æµ‹ï¼Œè€Œæ­¤æ—¶ä¾ç„¶æœ‰å‘ç”Ÿç¢°æ’çš„å¯èƒ½ã€‚æ‰€ä»¥å¿…é¡»ä¿è¯åœ¨2 Ï„ æ—¶é—´å†…å¸§ä¸ä¼šè¢«å‘é€å®Œï¼Œåœ¨è¿™æ®µæ—¶é—´é‡Œèƒ½å¤Ÿä¿æŒç¢°æ’æ£€æµ‹ã€‚ ä»¥å¤ªç½‘è§„å®šæœ€å°å¸§é•¿ä¸º64å­—èŠ‚ï¼Œå³512æ¯”ç‰¹(512æ¯”ç‰¹å³äº‰ç”¨æœŸ) å¦‚æœè¦å‘é€çš„æ•°æ®éå¸¸å°‘ï¼Œé‚£ä¹ˆå¿…é¡»åŠ å…¥ä¸€äº›å¡«å……å­—èŠ‚ï¼Œä½¿å¸§é•¿ä¸å°äº64å­—èŠ‚ ä»¥å¤ªç½‘çš„æœ€å°å¸§é•¿ä¿è¯äº†ä¸»æœºå¯åœ¨å¸§å‘é€å®Œæˆä¹‹å‰å°±æ£€æµ‹åˆ°è¯¥å¸§çš„å‘é€è¿‡ç¨‹ä¸­æ˜¯å¦é­é‡äº†ç¢°æ’ è¿™ä¿è¯äº†ä¸¤ç‚¹ï¼š å¦‚æœåœ¨äº‰ç”¨æœŸæ²¡æœ‰æ£€æµ‹åˆ°ç¢°æ’ï¼Œé‚£ä¹ˆåç»­å‘é€çš„æ•°æ®å°±ä¸€å®šä¸ä¼šå‘ç”Ÿç¢°æ’ã€‚ å¦‚æœåœ¨äº‰ç”¨æœŸæ£€æµ‹åˆ°ç¢°æ’å°±ç«‹å³ä¸­æ­¢å‘é€ï¼Œè¿™æ—¶å·²ç»å‘é€å‡ºå»çš„æ•°æ®ä¸€å®šå°äº64å­—èŠ‚ï¼Œå› æ­¤å‡¡é•¿åº¦å°äº64å­—èŠ‚çš„å¸§éƒ½æ˜¯ç”±äºç¢°æ’æ£€æµ‹è€Œå¼‚å¸¸ä¸­æ­¢çš„æ— æ•ˆå¸§ã€‚ æ ¹æ®ç½‘ç»œè·¨è·ï¼ˆç«¯åˆ°ç«¯ä¼ æ’­æ—¶å»¶tauï¼‰å’Œæ•°æ®ä¼ è¾“é€Ÿç‡é™å®šæœ€å°å¸§é•¿ã€‚ äº‰ç”¨æœŸ * æ•°æ®ä¼ è¾“é€Ÿç‡ æœ€å°å¸§é•¿ æœ€å¤§å¸§é•¿ ä¸ºä»€ä¹ˆéœ€è¦è§„å®šæœ€å¤§å¸§é•¿ï¼Ÿ å½“å¸§è¿‡é•¿æ—¶ï¼Œå…¶ä»–çº¿è·¯ä¼šè¿Ÿè¿Ÿå¾—ä¸åˆ°èµ„æºï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½å¯¼è‡´æ¥æ”¶æ–¹ç¼“å†²åŒºæº¢å‡ºï¼Œå› æ­¤å¸§çš„æœ€å¤§é•¿åº¦ä¹Ÿæœ‰è§„å®šã€‚ é€€é¿ç®—æ³• å½“å¸§å‘é€ç¢°æ’åä¼šåœæ­¢å‘é€ï¼Œéš”ä¸€æ®µæ—¶é—´åå†æ¬¡å‘é€ï¼Œè€Œå…·ä½“éš”å¤šå°‘æ—¶é—´å†å‘é€éœ€è¦æ ¹æ®é€€é¿ç®—æ³•å¾—å‡º ä¿¡é“åˆ©ç”¨ç‡ æ¯å¸§çš„å‘é€æ—¶å»¶ä¸ºT0 ï¼Œä¼ æ’­æ—¶å»¶ä¸ºÏ„ ï¼Œå ç”¨ä¿¡é“çš„æ—¶é—´ä¸ºT0+Ï„ ã€‚ å¸§æ¥æ”¶æµç¨‹ ä¸èƒ½ç”¨äºæ— çº¿ç½‘ç»œ åŸå› ï¼š æ— çº¿ä¿¡é“ä¸Šå†²çªæ£€æµ‹ä»£ä»·å¤§ å­˜åœ¨ä¿¡å·è¡°å‡é—®é¢˜ å­˜åœ¨éšè—ç«™ç‚¹é—®é¢˜ å­˜åœ¨æš´éœ²ç«™ç‚¹é—®é¢˜ CSMACAåè®®ï¼ˆéšæœºæ¥å…¥ï¼‰æ— çº¿å±€åŸŸç½‘ä½¿ç”¨ã€‚ è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥ç¢°æ’é¿å… CSMACA(Carrier Sense Multiple AccessCollision Avoidance) èƒŒæ™¯ï¼š æ—¢ç„¶CSMACDåè®®å·²ç»æˆåŠŸåœ°åº”ç”¨äºä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æœ‰çº¿å±€åŸŸç½‘ï¼Œé‚£ä¹ˆåŒæ ·ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ— çº¿å±€åŸŸç½‘èƒ½ä¸èƒ½ä¹Ÿä½¿ç”¨CSMACDåè®®å‘¢? å¯¹äºCSMAï¼š åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥CSMAï¼Œå³åœ¨å‘é€å¸§ä¹‹å‰å…ˆå¯¹ä¼ è¾“åª’ä½“è¿›è¡Œè½½æ³¢ç›‘å¬ã€‚è‹¥å‘ç°æœ‰å…¶ä»–ç«™åœ¨å‘é€å¸§ï¼Œå°±æ¨è¿Ÿå‘é€ä»¥é¿å…ç¢°æ’ å¯¹äºCDï¼š åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ç¢°æ’æ£€æµ‹CDï¼ŒåŸå› å¦‚ä¸‹ï¼š ç”±äºæ— çº¿ä¿¡é“çš„ä¼ è¾“æ¡ä»¶ç‰¹æ®Šï¼Œå…¶ä¿¡å·å¼ºåº¦çš„åŠ¨æ€èŒƒå›´éå¸¸å¤§ï¼Œæ— çº¿ç½‘å¡ä¸Šæ¥æ”¶åˆ°çš„ä¿¡å·å¼ºåº¦å¾€å¾€ä¼šè¿œè¿œå°äºå‘é€ä¿¡å·çš„å¼ºåº¦(å¯èƒ½å·®ç™¾ä¸‡å€)ã€‚å¦‚æœè¦åœ¨æ— çº¿ç½‘å¡ä¸Šå®ç°ç¢°æ’æ£€æµ‹CDï¼Œå¯¹ç¡¬ä»¶çš„è¦æ±‚ç‰¹åˆ«é«˜ã€‚ å³ä½¿èƒ½å¤Ÿåœ¨ç¡¬ä»¶ä¸Šå®ç°æ— çº¿å±€åŸŸç½‘çš„ç¢°æ’æ£€æµ‹åŠŸèƒ½ï¼Œä½†ç”±äºæ— çº¿ç”µæ³¢ä¼ æ’­çš„ç‰¹æ®Šæ€§(å­˜åœ¨éšè”½ç«™çš„é—®é¢˜)ï¼Œè¿›è¡Œç¢°æ’æ£€æµ‹çš„æ„ä¹‰ä¹Ÿä¸å¤§(å¦‚ä¸‹)ã€‚ è€Œæœ‰çº¿ç½‘ç»œä¸­ä¿¡å·ä¼šéšç€æ€»çº¿åˆ°è¾¾å„ä¸ªåœ°æ–¹ï¼Œä¸ä¼šå‡ºç°éšè”½ç«™ã€‚ å¼•å…¥ï¼š CSMACAæ˜¯æŒ‡è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥ç¢°æ’é¿å…ï¼Œæ˜¯802.11å±€åŸŸç½‘é‡‡ç”¨çš„æ— çº¿ä¿¡é“è®¿é—®æ§åˆ¶åè®®ã€‚ 802.11å±€åŸŸç½‘åœ¨ä½¿ç”¨CSMACAçš„åŒæ—¶ï¼Œè¿˜ä½¿ç”¨åœæ­¢-ç­‰å¾…åè®®ã€‚è¿™æ˜¯å› ä¸ºæ— çº¿ä¿¡é“çš„é€šä¿¡è´¨é‡è¿œä¸å¦‚æœ‰çº¿ä¿¡é“ï¼Œå› æ­¤æ— çº¿ç«™ç‚¹æ¯å‘é€å®Œä¸€ä¸ªæ•°æ®å¸§åï¼Œè¦ç­‰åˆ°æ”¶åˆ°å¯¹æ–¹çš„ç¡®è®¤å¸§åæ‰èƒ½ç»§ç»­å‘é€ä¸‹ä¸€å¸§; æ‰€ä»¥ç”±äºä¸å¯èƒ½é¿å…æ‰€æœ‰çš„ç¢°æ’å¹¶ä¸”æ— çº¿ä¿¡é“è¯¯ç ç‡è¾ƒé«˜,802.11æ ‡å‡†ä½¿ç”¨äº†æ•°æ®é“¾è·¯å±‚ç¡®è®¤æœºåˆ¶ (åœæ­¢-ç­‰å¾…åè®®) æ¥ä¿è¯æ•°æ®è¢«æ­£ç¡®æ¥æ”¶ã€‚ 802.11æ— çº¿å±€åŸŸç½‘ä½¿ç”¨CSMACAåè®®ï¼Œåœ¨CSMAçš„åŸºç¡€ä¸Šå¢åŠ äº†ä¸€ä¸ªç¢°æ’é¿å…CAåŠŸèƒ½è€Œä¸å†å®ç°ç¢°æ’æ£€æµ‹åŠŸèƒ½ã€‚ 802.11çš„MACå±‚ æ ‡å‡†å®šä¹‰äº†ä¸¤ç§ä¸åŒçš„åª’ä½“æ¥å…¥æ§åˆ¶æ–¹å¼ï¼š åˆ†å¸ƒå¼åè°ƒåŠŸèƒ½DCF(Distributed Coordination Function)ã€‚ åœ¨DCFæ–¹å¼ä¸‹ï¼Œæ²¡æœ‰ä¸­å¿ƒæ§åˆ¶ç«™ç‚¹ï¼Œæ¯ä¸ªç«™ç‚¹ä½¿ç”¨CSMACAåè®®é€šè¿‡äº‰ç”¨ä¿¡é“æ¥è·å–å‘é€æƒï¼Œè¿™æ˜¯802.11å®šä¹‰çš„é»˜è®¤æ–¹å¼ ç‚¹åè°ƒåŠŸèƒ½PCF(Point Coordination Function)ã€‚ PCFæ–¹å¼ä½¿ç”¨é›†ä¸­æ§åˆ¶çš„æ¥å…¥ç®—æ³•(ä¸€èˆ¬åœ¨æ¥å…¥ç‚¹APå®ç°é›†ä¸­æ§åˆ¶)ï¼Œæ˜¯802.11å®šä¹‰çš„å¯é€‰æ–¹å¼ï¼Œåœ¨å®é™…ä¸­è¾ƒå°‘ä½¿ç”¨ å¸§é—´é—´éš”IFSï¼š 802.11æ ‡å‡†è§„å®šï¼Œæ‰€æœ‰çš„ç«™ç‚¹å¿…é¡»åœ¨æŒç»­æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²ä¸€æ®µæŒ‡å®šæ—¶é—´åæ‰èƒ½å‘é€å¸§ï¼Œè¿™æ®µæ—¶é—´ç§°ä¸ºå¸§é—´é—´éš”IFSã€‚ å¸§é—´é—´éš”çš„é•¿çŸ­å–å†³äºè¯¥ç«™ç‚¹è¦å‘é€çš„å¸§çš„ç±»å‹ é«˜ä¼˜å…ˆçº§å¸§éœ€è¦ç­‰å¾…çš„æ—¶é—´è¾ƒçŸ­ï¼Œå› æ­¤å¯ä¼˜å…ˆè·å¾—å‘é€æƒ ä½ä¼˜å…ˆçº§å¸§éœ€è¦ç­‰å¾…çš„æ—¶é—´è¾ƒé•¿ã€‚è‹¥æŸä¸ªç«™çš„ä½ä¼˜å…ˆçº§å¸§è¿˜æ²¡æ¥å¾—åŠå‘é€ï¼Œè€Œå…¶ä»–ç«™çš„é«˜ä¼˜å…ˆçº§å¸§å·²å‘é€åˆ°ä¿¡é“ä¸Šï¼Œåˆ™ä¿¡é“å˜ä¸ºå¿™æ€ï¼Œå› è€Œä½ä¼˜å…ˆçº§å¸§å°±åªèƒ½å†æ¨è¿Ÿå‘é€äº†ã€‚è¿™æ ·å°±å‡å°‘äº†å‘é€ç¢°æ’çš„æœºä¼šã€‚ å¸¸ç”¨çš„ä¸¤ç§å¸§é—´é—´éš”å¦‚ä¸‹ çŸ­å¸§é—´é—´éš”SIFS(28Î¼m)ã€‚è¿™æ˜¯æœ€çŸ­çš„å¸§é—´é—´éš”ï¼Œç”¨æ¥åˆ†éš”å¼€å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ã€‚ä¸€ä¸ªç«™ç‚¹åº”å½“èƒ½å¤Ÿåœ¨è¿™æ®µæ—¶é—´å†…ä»å‘é€æ–¹å¼åˆ‡æ¢åˆ°æ¥æ”¶æ–¹å¼ã€‚ä½¿ç”¨SIFSçš„å¸§ç±»å‹ç”±ACKå¸§ã€CTSå¸§ã€ç”±è¿‡é•¿çš„MACå¸§åˆ†ç‰‡åçš„æ•°æ®å¸§ã€ä»¥åŠæ‰€æœ‰å›ç­”APæ¢è¯¢çš„å¸§å’Œåœ¨PCFæ–¹å¼ä¸­æ¥å…¥ç‚¹APå‘é€å‡ºçš„ä»»ä½•å¸§ DCFå¸§é—´é—´éš”DIFS(128Î¼s)ã€‚å®ƒæ¯”çŸ­å¸§é—´é—´éš”SIFSè¦é•¿å¾—å¤šï¼Œåœ¨DCFæ–¹å¼ä¸­ç”¨æ¥å‘é€æ•°æ®å¸§å’Œç®¡ç†å¸§ å·¥ä½œåŸç† DIFSæ—¶é—´ : ä¸ºä»€ä¹ˆæºç«™æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²åï¼Œè¿˜éœ€è¦ç­‰å¾…DIFSæ—¶é—´æ‰å°†å¸§å‘é€å‘¢ï¼Ÿ å› ä¸ºå…¶ä»–ç«™æ­¤æ—¶å¯èƒ½æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å¸§éœ€è¦å‘é€ï¼Œå› æ­¤æœ‰DIFSæ—¶é—´è¿›è¡Œç¼“å†²ï¼Œè‹¥è¿™ä¸ªæ—¶é—´å†…æ²¡æœ‰é«˜ä¼˜å…ˆçº§çš„å¸§è¦å‘é€ï¼Œåˆ™è¯´æ˜ä¿¡é“æ˜¯çœŸæ­£çš„ç©ºé—² SIFSæ—¶é—´ : ä¸ºä»€ä¹ˆç›®çš„ç«™æ¥æ”¶åˆ°å¸§åè¿˜éœ€è¦ç­‰åˆ°SIFSæ—¶é—´æ‰è¿”å›ACKç¡®è®¤å¸§å‘¢ï¼Ÿ SIFSæ˜¯æœ€çŸ­çš„å¸§é—´é—´éš”ï¼Œç”¨æ¥åˆ†éš”å¼€å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ã€‚è¿™æ®µæ—¶é—´å†…ä¸€ä¸ªç«™ç‚¹åº”å½“èƒ½å¤Ÿä»å‘é€æ–¹å¼åˆ‡æ¢åˆ°æ¥æ”¶æ–¹å¼ éšæœºæ—¶é—´ : å½“å…¶ä»–ç«™è¦å‘é€æ•°æ®ï¼Œä½†æ˜¯å‘ç°æ­¤æ—¶ä¿¡é“æ­£å¿™æ—¶å°±ä¼šé€€é¿ä¸€æ®µæ—¶é—´ï¼Œç­‰ä¿¡é“ä¸å¿™åå†è¿›è¡Œæ“ä½œï¼Œæ¥ç€ç­‰å¾…DIFSæ—¶é—´(ä¸â‘ åŒç†)ï¼Œä½†ä¸ºä»€ä¹ˆç­‰å¾…äº†DIFSæ—¶é—´åè¿˜è¦é€€é¿ä¸€æ®µéšæœºæ—¶é—´å‘¢ï¼Ÿ å› ä¸ºå¯èƒ½æœ‰å¤šä¸ªç«™ç‚¹åœ¨ä¿¡é“å¿™æ—¶éƒ½æƒ³å‘é€å¸§ï¼Œå› æ­¤å®ƒä»¬éƒ½ä¼šè¢«æç½®ç›´è‡³ä¿¡é“ä¸å¿™ï¼Œåœ¨DIFSæ—¶é—´åä»–ä»¬ä¼šåŒæ—¶å‘é€ï¼Œè€Œå®é™…ä¸Šå¤šä¸ªç«™ç‚¹åŒæ—¶å‘é€æ•°æ®ä¼šç¢°æ’ã€‚å› æ­¤éœ€è¦ä¸€ä¸ªéšæœºæ—¶é—´å°†ä»–ä»¬è¿›è¡Œé”™å³°å‘é€ã€‚ é€€é¿ç®—æ³• å¤šä¸ªç«™ç‚¹å‘é€å†²çªæ—¶ï¼Œå„ä¸ªç«™ç‚¹éœ€è¦é€€é¿ä¸€æ®µéšæœºæ—¶é—´å†è¿›è¡Œæ“ä½œ ä»¥ä¸‹æƒ…å†µå¿…é¡»ä½¿ç”¨é€€é¿ç®—æ³• åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰æ£€æµ‹åˆ°ä¿¡é“å¤„äºå¿™çŠ¶æ€æ—¶ï¼› åœ¨æ¯ä¸€æ¬¡é‡ä¼ ä¸€ä¸ªæ•°æ®å¸§æ—¶ï¼› åœ¨æ¯ä¸€æ¬¡**æˆåŠŸå‘é€åè¦è¿ç»­å‘é€ä¸‹ä¸€ä¸ªå¸§æ—¶(**è¿™æ˜¯ä¸ºäº†é¿å…ä¸€ä¸ªç«™ç‚¹é•¿æ—¶é—´å ç”¨é€šé“) è¿‡ç¨‹ åœ¨æ‰§è¡Œé€€é¿ç®—æ³•æ—¶ï¼Œç«™ç‚¹ä¸ºé€€é¿è®¡æ—¶å™¨è®¾ç½®ä¸€ä¸ªéšæœºçš„é€€é¿æ—¶é—´ å½“é€€é¿è®¡æ—¶å™¨çš„æ—¶é—´å‡å°åˆ°0ï¼Œå°±å¼€å§‹å‘é€æ•°æ® å½“é€€é¿è®¡æ—¶å™¨çš„æ—¶é—´è¿˜æœªå‡å°åˆ°0æ—¶ä¿¡é“åˆè½¬å˜ä¸ºå¿™çŠ¶æ€ï¼Œè¿™æ—¶å°±å†»ç»“é€€é¿è®¡æ—¶å™¨çš„æ•°å€¼ï¼Œé‡æ–°ç­‰å¾…ä¿¡é“å˜ä¸ºç©ºé—²ï¼Œå†ç»è¿‡DIFSåï¼Œç»§ç»­å¯åŠ¨é€€é¿è®¡æ—¶å™¨ åœ¨è¿›è¡Œç¬¬iæ¬¡é€€é¿æ—¶ï¼Œé€€é¿æ—¶é—´åœ¨æ—¶éš™ç¼–å·{0,1,2,4, â€¦ , 2^i+1^-1}ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªï¼Œç„¶åä¹˜ä»¥åŸºæœ¬é€€é¿æ—¶é—´(ä¹Ÿå°±æ˜¯ä¸€ä¸ªæ—¶éš™çš„é•¿åº¦)å°±å¯ä»¥å¾—åˆ°éšæœºçš„é€€é¿æ—¶é—´ã€‚è¿™æ ·åšæ—¶ä¸ºäº†ä½¿ä¸åŒç«™ç‚¹é€‰æ‹©ç›¸åŒé€€é¿æ—¶é—´çš„æ¦‚ç‡å‡å°‘ã€‚å½“æ—¶éš™ç¼–å·è¾¾åˆ°255æ—¶(å¯¹åº”ç¬¬6æ¬¡é€€é¿)å°±ä¸å†å¢åŠ äº†ã€‚ ä¿¡é“é¢„çº¦ ä¸ºäº†å°½å¯èƒ½å‡å°‘ç¢°æ’çš„æ¦‚ç‡å’Œé™ä½ç¢°æ’çš„å½±å“ï¼Œ802.11æ ‡å‡†å…è®¸è¦å‘é€æ•°æ®çš„ç«™ç‚¹å¯¹ä¿¡é“è¿›è¡Œé¢„çº¦ ä¸‹é¢æˆ‘ä»¬åˆ†äº”æ­¥è®¨è®ºä¿¡é“é¢„çº¦çš„è¿‡ç¨‹ï¼š æºç«™åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰å…ˆå‘é€ä¸€ä¸ªçŸ­çš„æ§åˆ¶å¸§ï¼Œç§°ä¸ºè¯·æ±‚å‘ç”ŸRTSï¼Œå®ƒåŒ…æ‹¬æºåœ°å€ã€ç›®çš„åœ°å€ä»¥åŠè¿™æ¬¡é€šä¿¡(åŒ…æ‹¬ç›¸åº”çš„ç¡®è®¤å¸§)æ‰€éœ€çš„æŒç»­æ—¶é—´ è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°æºç«™å‘æ¥çš„RTSå¸§ï¼Œä¸”åª’ä½“ç©ºé—²ï¼Œå°±å‘é€ä¸€ä¸ªå“åº”æ§åˆ¶å¸§ï¼Œç§°ä¸ºå…è®¸å‘é€CTS,å®ƒä¹ŸåŒ…æ‹¬è¿™æ¬¡é€šä¿¡æ‰€éœ€çš„æŒç»­æ—¶é—´ä»RTSå¸§ä¸­å°†æ­¤æŒç»­æ—¶é—´å¤åˆ¶åˆ°CTSå¸§ä¸­ã€‚ æºç«™æ”¶åˆ°CTSå¸§åï¼Œå†ç­‰å¾…ä¸€æ®µæ—¶é—´SIFSåï¼Œå°±å¯å‘é€å…¶æ•°æ®å¸§ å¦‚æœRTSå¸§å‘é€ç¢°æ’ï¼Œæºç«™å°±æ”¶ä¸åˆ°CTSå¸§ï¼Œéœ€æ‰§è¡Œé€€é¿ç®—æ³•é‡ä¼ RTSå¸§ã€‚ **ç”±äºRTSå¸§å’ŒCTSå¸§å¾ˆçŸ­ï¼Œå‘ç”Ÿç¢°æ’çš„æ¦‚ç‡ã€ç¢°æ’äº§ç”Ÿçš„å¼€é”€åŠæœ¬èº«çš„å¼€é”€éƒ½å¾ˆå°ã€‚**è€Œå¯¹äºä¸€èˆ¬çš„æ•°æ®å¸§ï¼Œå…¶å‘é€æ—¶å»¶å¾€å¾€å¤§äºä¼ æ’­æ—¶å»¶(å› ä¸ºæ˜¯å±€åŸŸç½‘)ï¼Œç¢°æ’çš„æ¦‚ç‡å¾ˆå¤§ï¼Œä¸”ä¸€æ—¦å‘ç”Ÿç¢°æ’è€Œå¯¼è‡´æ•°æ®å¸§é‡å‘å°±ä¼šæµªè´¹å¾ˆå¤šæ—¶é—´ï¼Œå› æ­¤ç”¨å¾ˆå°çš„ä»£ä»·å¯¹ä¿¡é“è¿›è¡Œé¢„çº¦å¾€å¾€æ˜¯å€¼å¾—çš„ã€‚ 802.11æ ‡å‡†è§„å®šäº†3ç§æƒ…å†µä¾›ç”¨æˆ·é€‰æ‹©: ä½¿ç”¨RTSå¸§å’ŒCTSå¸§ ä¸ä½¿ç”¨RTSå¸§å’ŒCTSå¸§ åªæœ‰å½“æ•°æ®å¸§çš„é•¿åº¦è¶…è¿‡æŸä¸€æ•°å€¼æ—¶æ‰ä½¿ç”¨RTSå¸§å’ŒCTSå¸§ è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°äº†æºç«™å‘æ¥çš„æ•°æ®å¸§ï¼Œåœ¨ç­‰å¾…æ—¶é—´SIFSåï¼Œå°±å‘æºç«™å‘é€ç¡®è®¤å¸§ACK é™¤æºç«™å’Œç›®çš„ç«™ä»¥å¤–çš„å…¶ä»–å„ç«™ï¼Œåœ¨æ”¶åˆ°CTSå¸§(æˆ–æ•°æ®å¸§)åå°±æ¨è¿Ÿæ¥å…¥åˆ°æ— çº¿å±€åŸŸç½‘ä¸­ã€‚è¿™æ ·å°±ä¿è¯äº†æºç«™å’Œç›®çš„ç«™ä¹‹é—´çš„é€šä¿¡ä¸ä¼šæ”¶åˆ°å…¶ä»–ç«™çš„å¹²æ‰°ã€‚ è™šæ‹Ÿè½½æ³¢ç›‘å¬ é™¤RTSå¸§å’ŒCTSå¸§ä¼šæºå¸¦é€šä¿¡éœ€è¦æŒç»­çš„æ—¶é—´ï¼Œæ•°æ®å¸§ä¹Ÿèƒ½æºå¸¦é€šä¿¡éœ€è¦æŒç»­çš„æ—¶é—´ï¼Œè¿™ç§°ä¸º802.11çš„è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶ ç”±äºåˆ©ç”¨è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶ï¼Œ**ç«™ç‚¹åªè¦ç›‘å¬åˆ°RTSå¸§ã€CTSå¸§æˆ–æ•°æ®å¸§ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå°±èƒ½çŸ¥é“ä¿¡é“è¢«å ç”¨çš„æŒç»­æ—¶é—´ï¼Œ**è€Œä¸éœ€è¦çœŸæ­£ç›‘å¬åˆ°ä¿¡é“ä¸Šçš„ä¿¡å·ï¼Œå› æ­¤è™šæ‹Ÿè½½æ³¢ç›‘å¬æœºåˆ¶èƒ½å‡å°‘éšè”½ç«™å¸¦æ¥çš„ç¢°æ’é—®é¢˜ å¦‚ä¸‹å›¾ï¼ŒAä¸Cè™½ç„¶äº’ç›¸è¦†ç›–ä¸åˆ°ï¼Œä½†æ˜¯Cå¯æ”¶åˆ°Bå‘å‡ºçš„å…³äºAçš„CTSå¸§ï¼Œä»è€Œå¾—çŸ¥Aéœ€è¦å ç”¨ä¿¡é“çš„æ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´é‡Œï¼ŒCä¸å‘é€æ•°æ®ï¼Œä»è€Œè§£å†³éšè”½ç«™å¸¦æ¥çš„ç¢°æ’é—®é¢˜ MACåœ°å€ã€IPåœ°å€å’ŒARPåè®® MACåœ°å€æ˜¯ä»¥å¤§ç½‘çš„MACå­å±‚æ‰€ä½¿ç”¨çš„åœ°å€ï¼› IPåœ°å€æ˜¯TCPIPä½“ç³»ç»“æ„ç½‘é™…å±‚æ‰€ä½¿ç”¨çš„åœ°å€ï¼› ARPåè®®å±äºTCPIPä½“ç³»ç»“æ„çš„ç½‘é™…å±‚ï¼Œå…¶ä½œç”¨æ˜¯å·²çŸ¥è®¾å¤‡æ‰€åˆ†é…åˆ°çš„IPåœ°å€ï¼Œä½¿ç”¨ARPåè®®å¯ä»¥é€šè¿‡è¯¥IPåœ°å€è·å–åˆ°è®¾å¤‡çš„MACåœ°å€ã€‚ MACåœ°å€å±äºæ•°æ®é“¾è·¯å±‚ IPåœ°å€å’ŒARPåè®®å±äºç½‘é™…å±‚ å°½ç®¡IPåœ°å€å’ŒARPåè®®å±äºTCPIPä½“ç³»ç»“æ„çš„ç½‘é™…å±‚(è€Œä¸å±äºæ•°æ®é“¾è·¯å±‚)ï¼Œä½†æ˜¯å®ƒä»¬ä¸MACåœ°å€å­˜åœ¨ä¸€å®šçš„å…³ç³»ï¼Œå¹¶ä¸”æˆ‘ä»¬æ—¥å¸¸çš„ç½‘ç»œåº”ç”¨éƒ½ç¦»ä¸å¼€MACåœ°å€ã€IPåœ°å€ä»¥åŠARPåè®®å› æ­¤ï¼Œæˆ‘ä»¬å°†è¿™ä¸‰è€…æ”¾åœ¨ä¸€èµ·è®¨è®ºã€‚ MACåœ°å€åº”ç”¨åœºæ™¯ï¼š åªæœ‰ä¸€æ¡è·¯å¾„çš„ä¿¡é“ä¸éœ€è¦åœ°å€ï¼Œå› ä¸ºæ²¡å¾—é€‰ã€‚ å½“å¤šä¸ªä¸»æœºè¿æ¥åœ¨åŒä¸€ä¸ªå¹¿æ’­ä¿¡é“ä¸Šï¼Œè¦æƒ³å®ç°ä¸¤ä¸ªä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œåˆ™æ¯ä¸ªä¸»æœºéƒ½å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼Œå³ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚åœ°å€ã€‚ åœ¨æ¯ä¸ªä¸»æœºå‘é€çš„å¸§ä¸­å¿…é¡»æºå¸¦æ ‡è¯†å‘é€ä¸»æœºå’Œæ¥æ”¶ä¸»æœºçš„åœ°å€ã€‚ç”±äºè¿™ç±»åœ°å€æ˜¯ç”¨äºåª’ä½“æ¥å…¥æ§åˆ¶MAC(Media Access Control)ï¼Œå› æ­¤è¿™ç±»åœ°å€è¢«ç§°ä¸ºMACåœ°å€ MACåœ°å€ä¸€èˆ¬è¢«å›ºåŒ–åœ¨ç½‘å¡(ç½‘ç»œé€‚é…å™¨)çš„ç”µå¯æ“¦å¯ç¼–ç¨‹åªè¯»å­˜å‚¨å™¨EEPROMä¸­ï¼Œå› æ­¤MACåœ°å€ä¹Ÿè¢«ç§°ä¸ºç¡¬ä»¶åœ°å€ã€‚ MACåœ°å€æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºç‰©ç†åœ°å€ã€‚ä½†æ˜¯MACåœ°å€ä¸å±äºç‰©ç†å±‚è€Œæ˜¯å±äºæ•°æ®é“¾è·¯å±‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¸»æœºä¼šåŒ…å«ä¸¤ä¸ªç½‘ç»œé€‚é…å™¨ï¼š æœ‰çº¿å±€åŸŸç½‘é€‚é…å™¨(æœ‰çº¿ç½‘å¡) æ— çº¿å±€åŸŸç½‘é€‚é…å™¨(æ— çº¿ç½‘å¡) **æ¯ä¸ªç½‘ç»œé€‚é…å™¨éƒ½æœ‰ä¸€ä¸ªå…¨çƒå”¯ä¸€çš„MACåœ°å€ã€‚**è€Œäº¤æ¢æœºå’Œè·¯ç”±å™¨å¾€å¾€æ‹¥æœ‰æ›´å¤šçš„ç½‘ç»œæ¥å£ï¼Œæ‰€ä»¥ä¼šæ‹¥æœ‰æ›´å¤šçš„MACåœ°å€ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œä¸¥æ ¼æ¥è¯´ï¼ŒMACåœ°å€æ˜¯å¯¹ç½‘ç»œä¸Šå„æ¥å£çš„å”¯ä¸€æ ‡è¯†ï¼Œè€Œä¸æ˜¯å¯¹ç½‘ç»œä¸Šå„è®¾å¤‡çš„å”¯ä¸€æ ‡è¯†ã€‚ å•æ’­åœ°å€ã€å¹¿æ’­åœ°å€ä¸å¤šæ’­åœ°å€ å•æ’­MACåœ°å€ï¼šæ˜ç¡®çš„ç›®çš„MACåœ°å€ã€‚å°†æ­¤åœ°å€å¡«å…¥å¸§çš„ç›®çš„åœ°å€æ ä¸­ï¼Œæ¥æ”¶åˆ°è¯¥å¸§çš„ä¸»æœºå°†æ­¤åœ°å€ä¸è‡ªèº«MACåœ°å€è¿›è¡ŒåŒ¹é…ï¼Œè‹¥ç›¸åŒåˆ™æ¥æ”¶ï¼Œä¸åŒåˆ™ä¸¢å¼ƒã€‚ å¹¿æ’­MACåœ°å€ï¼šFF-FF-FF-FF-FF-FFï¼Œå°†æ­¤åœ°å€å¡«å…¥å¸§çš„ç›®çš„åœ°å€æ ä¸­ï¼Œæ¥æ”¶åˆ°è¯¥å¸§çš„ä¸»æœºæ£€ç´¢è¯¥åœ°å€å‘ç°æ˜¯å¹¿æ’­åœ°å€ï¼Œå› æ­¤æ¥æ”¶è¯¥å¸§ã€‚ å¤šæ’­åœ°å€ï¼š MACåœ°å€çš„ç¬¬ä¸€å­—èŠ‚ç¬¬ä¸€ä½ï¼šå–0ä¸ºå•æ’­ï¼Œå–1ä¸ºå¤šæ’­ï¼ˆç»„æ’­ï¼‰ã€‚ ç¬¬ä¸€å­—èŠ‚ç¬¬äºŒä½ï¼šå–0ä¸ºå…¨çƒç®¡ç†ï¼ˆå…¨çƒå”¯ä¸€ï¼‰ï¼Œå–1ä¸ºæœ¬åœ°ç®¡ç†ã€‚ æ‰€ä»¥MACåœ°å€ä¸­ç¬¬ä¸€å­—èŠ‚å4æ¯”ç‰¹ä¸º(1,3,5,7,9,B,D,F)æ—¶ï¼ŒMACåœ°å€æ˜¯å¤šæ’­åœ°å€ã€‚(ç¬¬ä¸€ä½åå…­è¿›åˆ¶æ•°ä¸èƒ½é™¤äºŒæ—¶) å°†æ­¤åœ°å€å¡«å…¥å¸§çš„ç›®çš„åœ°å€æ ä¸­ï¼Œæ¥æ”¶åˆ°è¯¥å¸§çš„ä¸»æœºå°†æ­¤å¤šæ’­åœ°å€ä¸è‡ªå·±å¤šæ’­ç»„åˆ—è¡¨ä¸­çš„åœ°å€è¿›è¡Œé€ä¸€é…å¯¹ï¼Œå¦‚æœæœ‰åŒ¹é…çš„é¡¹ï¼Œåˆ™æ¥æ”¶ï¼Œå¦åˆ™ä¸¢å¼ƒã€‚ æ¯ä¸ªç”¨æˆ·éƒ½ä¼šç»™è‡ªå·±çš„ä¸»æœºé…ç½®å¤šæ’­ç»„åˆ—è¡¨ã€‚ æ³¨æ„ï¼šç»™ä¸»æœºé…ç½®å¤šæ’­ç»„åˆ—è¡¨è¿›è¡Œç§æœ‰åº”ç”¨æ—¶ï¼Œä¸å¾—ä½¿ç”¨å…¬æœ‰çš„æ ‡å‡†å¤šæ’­åœ°å€ã€‚ æ‰€ä»¥ä¸€å…±æœ‰å››ç§ç±»å‹çš„å¤šæ’­åœ°å€ï¼š å…¨çƒç®¡ç†-å•æ’­åœ°å€ï¼šå‚å•†ç”Ÿäº§ç½‘ç»œè®¾å¤‡æ—¶ç»™è®¾å¤‡çš„å„ç½‘ç»œæ¥å£å›ºåŒ–çš„MACåœ°å€ã€‚ å…¨çƒç®¡ç†-å¤šæ’­åœ°å€ï¼šæ˜¯æ ‡å‡†ç½‘ç»œè®¾å¤‡æ‰€åº”æ”¯æŒçš„å¤šæ’­åœ°å€ï¼Œç”¨äºç‰¹å®šåŠŸèƒ½ã€‚ ä¾‹å¦‚äº¤æ¢æœºç”Ÿæˆæ ‘åè®®æ‰€éœ€è¦çš„å¤šæ’­åœ°å€ã€‚ æœ¬åœ°ç®¡ç†-å•æ’­åœ°å€ï¼šæœ‰ç½‘ç»œç®¡ç†å‘˜åˆ†é…ï¼Œä¼šè¦†ç›–ç½‘ç»œæ¥å£çš„å…¨çƒç®¡ç†å•æ’­åœ°å€ï¼ˆä¼˜å…ˆçº§é«˜ï¼‰ã€‚ æœ¬åœ°ç®¡ç†-å¤šæ’­åœ°å€ï¼šç”¨æˆ·å¯¹ä¸»æœºè¿›è¡Œè½¯ä»¶é…ç½®ï¼Œä»¥è¡¨æ˜å…¶å±äºå“ªäº›å¤šæ’­ç»„ã€‚ æ³¨æ„ï¼šå‰©ä½™46ä½å…¨ä¸º1æ—¶ï¼Œå°±æ˜¯å¹¿æ’­åœ°å€FF-FF-FF-FF-FF-F F MACåœ°å€ç”±48ä¸ªæ¯”ç‰¹æ„æˆï¼Œæ‰€ä»¥æ€»åœ°å€æ•°é‡ï¼š2^48^ï¼Œè¿™å››ç±»MACåœ°å€å„å å››åˆ†ä¹‹ä¸€ã€‚ éšæœºMACåœ°å€ IPåœ°å€ åº”ç”¨åœºæ™¯ï¼š MACåœ°å€åªèƒ½åŒºåˆ†åŒä¸€ç½‘ç»œä¸­çš„ä¸åŒä¸»æœºï¼Œä¸å…·å¤‡åŒºåˆ†ä¸åŒç½‘ç»œçš„åŠŸèƒ½ï¼Œè€ŒIPåœ°å€å¯ä»¥é€šè¿‡ç½‘ç»œå·åšåˆ°ã€‚ å¦‚æœåªæ˜¯ä¸€ä¸ªå•ç‹¬ç½‘ç»œï¼Œä¸æ¥å…¥å› ç‰¹ç½‘ï¼Œåˆ™ä½¿ç”¨MACåœ°å€å°±è¶³å¤Ÿäº†(è¿™ä¸æ˜¯ä¸€èˆ¬ç”¨æˆ·çš„åº”ç”¨æ–¹å¼)å¦‚æœä¸»æœºæ‰€åœ¨çš„ç½‘ç»œè¦æ¥å…¥å› ç‰¹ç½‘ï¼Œåˆ™IPåœ°å€å’ŒMACåœ°å€éƒ½éœ€è¦ä½¿ç”¨ IPåœ°å€æ˜¯TCPIPä½“ç³»ç»“æ„çš„ç½‘é™…å±‚æ‰€ä½¿ç”¨çš„çš„åœ°å€ã€‚ IPåœ°å€æ˜¯Internetä¸Šçš„ä¸»æœºå’Œè·¯ç”±å™¨æ‰€ä½¿ç”¨çš„çš„åœ°å€ï¼Œç”±ä¸¤éƒ¨åˆ†ä¿¡æ¯æ„æˆ ç½‘ç»œç¼–å·ï¼šæ ‡è¯†å› ç‰¹ç½‘ä¸Šæ•°ä»¥ç™¾ä¸‡è®¡çš„ç½‘ç»œ ä¸»æœºç¼–å·ï¼šæ ‡è¯†åŒä¸€ç½‘ç»œä¸Šä¸åŒä¸»æœº(æˆ–è·¯ç”±å™¨å„æ¥å£) æ•°æ®æŠ¥è½¬å‘è¿‡ç¨‹ä¸­æºIPåœ°å€å’Œç›®çš„IPåœ°å€ä¿æŒä¸å˜ã€‚ æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ä¸­æºMACåœ°å€å’Œç›®çš„MACåœ°å€**(ç”±ARPåè®®è·å¾—)**é€ä¸ªé“¾è·¯æ”¹å˜ã€‚ è·¯ç”±å™¨ä¸Šæœ‰è·¯ç”±è¡¨ï¼Œè®°å½•äº†è¦åˆ°ç›®çš„IPåœ°å€ï¼Œå…ˆè¦èµ°å“ªäº›è·¯(å³ä¸‹ä¸€è·³ä½ç½®)ã€‚æ‰€ä»¥H1èµ·åˆåªå¸¦æœ‰ç›®çš„IPåœ°å€ï¼ŒæŸ¥è¯¢è·¯ç”±è¡¨åè·¯ç”±å™¨æŒ‡è·¯ï¼Œä»è€ŒçŸ¥é“ä¸‹ä¸€æ­¥è¯¥å¾€å“ªé‡Œèµ°ï¼Œä»è€Œä¸æ–­è½¬å‘ç›´è‡³åˆ°è¾¾ç›®çš„åœ°ã€‚ ARPåè®® åœ°å€è§£æåè®®ARPå±äºTCPIPä½“ç³»ç»“æ„çš„ç½‘é™…å±‚ï¼Œå…¶ä½œç”¨æ˜¯å·²çŸ¥è®¾å¤‡æ‰€åˆ†é…åˆ°çš„IPåœ°å€ï¼Œä½¿ç”¨ARPåè®®å¯ä»¥é€šè¿‡è¯¥IPåœ°å€è·å–åˆ°è®¾å¤‡çš„MACåœ°å€ æ•°æ®çš„å‘é€éœ€è¦ç»è¿‡é“¾è·¯ï¼Œä»…ä»…çŸ¥é“IPåœ°å€æ˜¯æ— æ³•åœ¨æ•°æ®é“¾è·¯å±‚å®ç°ä¼ è¾“çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¾—åˆ°IPåœ°å€ä¸MACåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œå³åœ°å€è§£æã€‚ æ¯å°ä¸»æœºéƒ½ä¼šæœ‰ä¸€ä¸ªARPé«˜é€Ÿç¼“å­˜è¡¨ï¼Œè®°å½•æœ‰IPåœ°å€ä¸MACåœ°å€çš„å¯¹åº”å…³ç³» åˆå§‹ARPé«˜é€Ÿç¼“å­˜è¡¨ä¸ºç©ºï¼Œå‡è®¾æ­¤æ—¶BçŸ¥é“Cçš„IPåœ°å€ï¼Œå‡†å¤‡å‘é€ä¿¡æ¯ï¼Œä½†æ˜¯ç”±äºä¸çŸ¥é“Cçš„MACåœ°å€ï¼Œå› æ­¤æ— æ³•å°è£…æ•°æ®å¸§ï¼Œæ‰€ä»¥æ­¤æ—¶ä¼šå¹¿æ’­ä¸€ä¸ªARPè¯·æ±‚æŠ¥æ–‡(å°è£…åœ¨MACå¸§ä¸­ï¼Œç›®çš„åœ°å€ä¸ºå¹¿æ’­åœ°å€FF-FF-FF-FF-FF-FF)ï¼Œå†…å®¹å¦‚ä¸‹ï¼š æˆ‘çš„IPåœ°å€æ˜¯ï¼šxxx ï¼›æˆ‘çš„MACåœ°å€æ˜¯ï¼šXXXï¼›æˆ‘æƒ³çŸ¥é“Cä¸»æœºçš„MACåœ°å€æ˜¯å¤šå°‘ï¼Ÿ è¿™ä¸ªå¹¿æ’­å¸§ä¼šè¢«è¯¥å¹¿æ’­åŸŸçš„æ‰€æœ‰ä¸»æœºæ”¶åˆ° Aä¸»æœºæ”¶åˆ°åäº¤ç”±ä¸Šå±‚å¤„ç†ï¼Œå‘ç°Bé—®çš„ä¸æ˜¯ä»–ï¼Œæ‰€ä»¥ä¸äºˆç†ä¼š Cæ”¶åˆ°åäº¤ç”±ä¸Šå±‚å¤„ç†ï¼Œå‘ç°è¿™ä¸ªIPåœ°å€æ­£æ˜¯è‡ªå·±ï¼Œå› æ­¤: é¦–å…ˆå°†Bçš„MACåœ°å€å’ŒIPåœ°å€çš„å¯¹åº”å…³ç³»è®°å½•åˆ°è‡ªå·±çš„é«˜é€Ÿç¼“å­˜è¡¨ä¸­ï¼Œ æ¥ç€ç»™ Bè¿”å›ARPå“åº”æŠ¥æ–‡(å°è£…åœ¨MACå¸§ä¸­ï¼Œç›®çš„åœ°å€ä¸ºBçš„MACåœ°å€)ï¼Œå…¶ä¸­åŒ…å«è‡ªå·±çš„MACåœ°å€ã€‚ ARPé«˜é€Ÿç¼“å­˜æ¡ç›®æœ‰é™æ€ä¸åŠ¨æ€ä¸¤ç§ç±»å‹: åŠ¨æ€ä»£è¡¨æ˜¯é€šè¿‡å¹¿æ’­è‡ªåŠ¨è·å–çš„æ¡ç›®ï¼Œç”Ÿå‘½å‘¨æœŸé»˜è®¤ä¸ºä¸¤åˆ†é’Ÿ IP ä¸ MAC çš„å¯¹åº”å…³ç³»ä¸æ˜¯æ°¸ä¹…çš„ã€‚è¯¥ä¸»æœºå¯èƒ½æ›´æ¢ç½‘å¡ã€‚ é™æ€æ˜¯æ‰‹å·¥è®¾ç½®çš„æ¡ç›®ï¼Œä¸åŒæ“ä½œç³»ç»Ÿä¸‹çš„ç”Ÿå‘½å‘¨æœŸä¸åŒã€‚ ARPåè®®åªèƒ½åœ¨ä¸€æ®µé“¾è·¯æˆ–ä¸€ä¸ªç½‘ç»œä¸Šä½¿ç”¨ã€‚ é›†çº¿å™¨ä¸äº¤æ¢æœºçš„åŒºåˆ« åœºæ™¯ï¼š æ—©æœŸçš„æ€»çº¿å‹ä»¥å¤ªç½‘ä½¿ç”¨ç»†åŒè½´ç”µç¼†ï¼Œæ™®éä½¿ç”¨æ— æºç”µç¼†çº¿ã€‚ ä½†ç”µç¼†çº¿å’Œå¤§é‡æœºæ¢°æ¥å£çš„æ€»çº¿å‹ä»¥å¤ªç½‘å¹¶ä¸å¯é ã€‚ ä½¿ç”¨åŒç»çº¿å’Œé›†çº¿å™¨HUBçš„æ˜Ÿå‹ä»¥å¤ªç½‘ï¼Œå¯é æ€§æ›´é«˜ï¼ŒåŒç»çº¿ä¹Ÿæ›´ä¾¿å®œã€‚ åŒç»çº¿ç”µç¼†ä¸­çš„ RJ-45 æ¥å¤´æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„æ°´æ™¶å‹æ¥å¤´ é›†çº¿å™¨ é›†çº¿å™¨HUBçš„ä¸»è¦åŠŸèƒ½æ˜¯å¯¹æ¥æ”¶åˆ°çš„ä¿¡å·è¿›è¡Œå†ç”Ÿæ•´å½¢æ”¾å¤§ï¼Œä»¥æ‰©å¤§ç½‘ç»œçš„ä¼ è¾“è·ç¦»ï¼ŒåŒæ—¶æŠŠæ‰€æœ‰èŠ‚ç‚¹é›†ä¸­åœ¨ä»¥å®ƒä¸ºä¸­å¿ƒçš„èŠ‚ç‚¹ä¸Šã€‚ ä½¿ç”¨é›†çº¿å™¨çš„ä»¥å¤ªç½‘åœ¨é€»è¾‘ä¸Šä»æ˜¯ä¸€ä¸ªæ€»çº¿ç½‘ï¼Œå„ç«™å…±äº«æ€»çº¿èµ„æºï¼Œä½¿ç”¨çš„è¿˜æ˜¯CSMA/CDåè®® é›†çº¿å™¨åªå·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œå®ƒçš„æ¯ä¸ªæ¥å£ä»…ç®€å•åœ°è½¬å‘æ¯”ç‰¹ï¼Œä¸è¿›è¡Œç¢°æ’æ£€æµ‹(ç”±å„ç«™ç½‘å¡æ£€æµ‹) **é›†çº¿å™¨ä¸€èˆ¬éƒ½æœ‰å°‘é‡çš„å®¹é”™èƒ½åŠ›å’Œç½‘ç»œç®¡ç†åŠŸèƒ½ã€‚**ä¾‹å¦‚ï¼Œè‹¥ç½‘ç»œä¸­æŸä¸ªç½‘å¡å‡ºäº†æ•…éšœï¼Œä¸åœåœ°å‘é€å¸§ã€‚æ­¤æ—¶ï¼Œé›†çº¿å™¨å¯ä»¥æ£€æµ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œåœ¨å†…éƒ¨æ–­å¼€ä¸å‡ºæ•…éšœç½‘å¡çš„è¿çº¿ï¼Œä½¿æ•´ä¸ªä»¥å¤ªç½‘ä»ç„¶èƒ½æ­£å¸¸å·¥ä½œ é›†çº¿å™¨æ˜¯åŠåŒå·¥æ¨¡å¼ï¼Œæ”¶å‘ä¸èƒ½åŒæ—¶è¿›è¡Œï¼Œæ”¶åˆ°å¸§åä¼šå¹¿æ’­åˆ°é™¤æœ¬èº«æ¥å£å¤–çš„å„ä¸ªæ¥å£ã€‚ é›†çº¿å™¨å¯ä»¥åœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘ï¼Œä¹Ÿå°±æ˜¯æ‰©å¤§ç¢°æ’åŸŸã€‚ äº¤æ¢æœº äº¤æ¢æœºæ˜¯ä¸€ç§è´Ÿè´£è½¬å‘ä¿¡å·çš„ç½‘ç»œè®¾å¤‡ï¼Œå¯ä»¥ä¸ºæ¥å…¥äº¤æ¢æœºçš„ä»»æ„ä¸¤ä¸ªç½‘ç»œèŠ‚ç‚¹æä¾›ç‹¬äº«çš„ç”µä¿¡å·é€šè·¯ ä»¥å¤ªç½‘äº¤æ¢æœºé€šå¸¸æœ‰å¤šä¸ªæ¥å£ï¼Œæ¯ä¸ªæ¥å£éƒ½å¯ä»¥ç›´æ¥ä¸ä¸€å°ä¸»æœºæˆ–å¦ä¸€ä¸ªä»¥å¤ªç½‘äº¤æ¢æœºç›¸è¿ã€‚ä¸€èˆ¬éƒ½å·¥ä½œåœ¨å…¨åŒå·¥æ–¹å¼ ä»¥å¤ªç½‘äº¤æ¢æœºå…·æœ‰å¹¶è¡Œæ€§ï¼Œèƒ½åŒæ—¶è¿é€šå¤šå¯¹æ¥å£ï¼Œä½¿å¤šå¯¹ä¸»æœºèƒ½åŒæ—¶é€šä¿¡ï¼Œæ— ç¢°æ’(ä¸ä½¿ç”¨CSMACDåè®®) ä»¥å¤ªç½‘äº¤æ¢æœºä¸€èˆ¬éƒ½å…·æœ‰å¤šç§é€Ÿç‡çš„æ¥å£ã€‚ ä»¥å¤ªç½‘äº¤æ¢æœºå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚(ä¹ŸåŒ…æ‹¬ç‰©ç†å±‚)ï¼Œå®ƒæ”¶åˆ°å¸§åï¼Œåœ¨å¸§äº¤æ¢è¡¨ä¸­æŸ¥æ‰¾å¸§çš„ç›®çš„MACåœ°å€æ‰€å¯¹åº”çš„æ¥å£å·ï¼Œç„¶åé€šè¿‡è¯¥æ¥å£è½¬å‘å¸§ã€‚ ä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯ä¸€ç§å³æ’å³ç”¨çš„è®¾å¤‡ï¼Œå…¶å†…éƒ¨çš„å¸§äº¤æ¢è¡¨æ˜¯é€šè¿‡è‡ªå­¦ä¹ ç®—æ³•è‡ªåŠ¨åœ°é€æ¸å»ºç«‹èµ·æ¥çš„ å¸§çš„ä¸¤ç§è½¬å‘æ–¹å¼ å­˜å‚¨è½¬å‘ï¼šå…ˆç¼“å­˜å†å¤„ç†ã€‚ ç›´é€šäº¤æ¢ï¼šé‡‡ç”¨åŸºäºç¡¬ä»¶çš„äº¤å‰çŸ©é˜µ(äº¤æ¢æ—¶å»¶éå¸¸å°ï¼Œä½†ä¸æ£€æŸ¥æ˜¯å¦æœ‰å·®é”™è€Œç›´æ¥å‘å‡ºå»)ã€‚ äº¤æ¢æœºæ¯ä¸ªæ¥å£æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¢°æ’åŸŸã€‚ ç»¼ä¸Šï¼šé›†çº¿å™¨æ‰©å¤§å¹¿æ’­åŸŸçš„åŒæ—¶ï¼Œæ‰©å¤§äº†ç¢°æ’åŸŸã€‚ äº¤æ¢æœºæ‰©å¤§å¹¿æ’­åŸŸçš„åŒæ—¶ï¼Œéš”ç¦»ç¢°æ’åŸŸã€‚ å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚çš„äº¤æ¢æœºï¼Œæ€§èƒ½è¿œè¶…è¿‡å·¥ä½œåœ¨ç‰©ç†å±‚çš„é›†çº¿å™¨ã€‚ ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„è¿‡ç¨‹ï¼š MACåœ°å€è¡¨ä¸­çš„æ¯æ¡è®°å½•éƒ½æœ‰è‡ªå·±çš„æœ‰æ•ˆæ—¶é—´ï¼Œåˆ°æœŸè‡ªåŠ¨åˆ é™¤ã€‚è¿™æ˜¯å› ä¸ºMACåœ°å€ä¸äº¤æ¢æœºæ¥å£çš„å¯¹åº”å…³ç³»å¹¶ä¸æ˜¯æ°¸ä¹…æ€§çš„ã€‚ å¦‚æœåˆšåˆšå­¦ä¹ åˆ°çš„MACåœ°å€Gæ¥è‡ªæ¥å£1ï¼ŒåŒæ—¶äº¤æ¢æœºå‘ç°æ¥å£1ä¹Ÿæ˜¯æ¥æºï¼Œå°±ä¼šä¸¢å¼ƒè¯¥å¸§ã€‚ STPç”Ÿæˆæ ‘åè®® STPå¯ä»¥åœ¨å¢åŠ å†—ä½™é“¾è·¯æ¥æé«˜ç½‘ç»œå¯é æ€§çš„åŒæ—¶åˆé¿å…ç½‘ç»œç¯è·¯å¸¦æ¥çš„å„ç§é—®é¢˜ åº”ç”¨åœºæ™¯ï¼š å½“äº¤æ¢æœºä¹‹é—´é“¾è·¯è¾ƒå°‘æ—¶ï¼ŒæŸä¸€æ¡é“¾è·¯å‘é€æ•…éšœï¼Œä¼šå¯¼è‡´å…¶ä¸­æœ‰äº›ä¸»æœºæ— æ³•é€šä¿¡ï¼Œå³é“¾è·¯ä¸å¯é ã€‚å¦‚ä¸‹å›¾ï¼ŒAä¸Bä¹‹é—´çš„é“¾è·¯å‘é€æ•…éšœåï¼ŒH1ä¾¿æ— æ³•ä¸H2å’ŒH3è¿›è¡Œé€šä¿¡ è§£å†³æ–¹æ³•æ˜¯æ·»åŠ å†—ä½™é“¾è·¯ï¼Œå¦‚åœ¨Bä¸Cä¹‹é—´å¤šæ‹‰ä¸€æ¡é“¾è·¯ï¼Œè¿™æ ·å³ä½¿Aä¸Bä¹‹é—´çš„é“¾è·¯å‘é€æ•…éšœï¼ŒH1ã€H2ã€H3ä¹‹é—´è¿˜æ˜¯èƒ½å¤Ÿç›¸äº’é€šä¿¡ã€‚ä½†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡ºç°äº†æ–°çš„é—®é¢˜ï¼š å¸§ä¼šåœ¨äº¤æ¢æœºä¸­ä¸åœè½¬å‘ï¼Œç©¶å…¶åŸå› æ˜¯å› ä¸ºç½‘ç»œå½¢æˆäº†ç¯è·¯ï¼Œç½‘ç»œç¯è·¯ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ å¹¿æ’­é£æš´ å¤§é‡æ¶ˆè€—ç½‘ç»œèµ„æºï¼Œä½¿å¾—ç½‘ç»œæ— æ³•æ­£å¸¸è½¬å‘å…¶ä»–æ•°æ®å¸§ ä¸»æœºæ”¶åˆ°é‡å¤çš„å¹¿æ’­å¸§ å¤§é‡æ¶ˆè€—ä¸»æœºèµ„æº äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨éœ‡è¡(å†…å®¹ä¸æ–­æ›´æ–°) è§£å†³æ–¹æ³•ï¼šä»¥å¤ªç½‘äº¤æ¢æœºä½¿ç”¨ç”Ÿæˆæ ‘åè®®STP(Spanning Tree Protocol)ã€‚ å¯ä»¥åœ¨å¢åŠ å†—ä½™é“¾è·¯æ¥æé«˜ç½‘ç»œå¯é æ€§çš„åŒæ—¶åˆé¿å…ç½‘ç»œç¯è·¯å¸¦æ¥çš„å„ç§é—®é¢˜ã€‚ ç”Ÿæˆæ ‘åŸç†ï¼š ä¸è®ºäº¤æ¢æœºä¹‹é—´é‡‡ç”¨æ€æ ·çš„ç‰©ç†è¿æ¥ï¼Œäº¤æ¢æœºéƒ½èƒ½å¤Ÿè‡ªåŠ¨è®¡ç®—å¹¶æ„å»ºä¸€ä¸ªé€»è¾‘ä¸Šæ²¡æœ‰ç¯è·¯çš„ç½‘ç»œï¼Œå…¶é€»è¾‘æ‹“æ‰‘ç»“æ„å¿…é¡»æ˜¯æ ‘å‹çš„(æ— é€»è¾‘ç¯è·¯) æœ€ç»ˆç”Ÿæˆæ ‘çš„é€»è¾‘æ‹“æ‰‘è¦ç¡®ä¿è¿é€šæ•´ä¸ªç½‘ç»œ å½“é¦–æ¬¡è¿æ¥äº¤æ¢æœºæˆ–ç½‘ç»œç‰©ç†æ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶(æœ‰å¯èƒ½æ˜¯äººä¸ºæ”¹å˜æˆ–æ•…éšœ)ï¼Œäº¤æ¢æœºéƒ½å°†è¿›è¡Œç”Ÿæˆæ ‘é‡æ–°è®¡ç®— VLANè™šæ‹Ÿå±€åŸŸç½‘ ä¸€ç§å°†å±€åŸŸç½‘å†…çš„è®¾å¤‡åˆ’åˆ†æˆä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„çš„æŠ€æœ¯ï¼Œè¿™äº›é€»è¾‘ç»„å…·æœ‰æŸäº›å…±åŒçš„éœ€æ±‚ï¼Œæ¯ä¸ªVLANå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¹¿æ’­åŸŸ åº”ç”¨åœºæ™¯ï¼š éšç€äº¤æ¢å¼ä»¥å¤ªç½‘è§„æ¨¡çš„æ‰©å¤§ï¼Œå¹¿æ’­åŸŸç›¸åº”æ‰©å¤§ï¼Œè€Œå·¨å¤§çš„å¹¿æ’­åŸŸä¼šå¸¦æ¥å¾ˆå¤šå¼Šç«¯ å¹¿æ’­é£æš´ å¦‚æ•°å°äº¤æ¢æœºè¿æ¥äº†æ•°å°ä¸»æœºï¼Œå½“ä¸»æœºAè¦å‘ä¸»æœºBå‘é€æ•°æ®å¸§ï¼Œæ­¤æ—¶å„äº¤æ¢æœºçš„MACè¡¨å‡ä¸ºç©ºï¼Œå› æ­¤å¸§æ¯åˆ°ä¸€ä¸ªäº¤æ¢æœºå°±ä¼šè¿›è¡Œæ³›æ´ªï¼Œç”±äºç½‘ç»œå·¨å¤§ï¼Œå› æ­¤æ³›æ´ªçš„èŒƒå›´ä¹Ÿå·¨å¤§ éš¾ä»¥ç®¡ç†å’Œç»´æŠ¤ æ½œåœ¨çš„å®‰å…¨é£é™© ä½†å³ä¾¿å¦‚æ­¤ï¼Œç½‘ç»œä¸­è¿˜æ˜¯ä¼šé¢‘ç¹å‡ºç°å¹¿æ’­ä¿¡æ¯ï¼š TCPIPåè®®æ ˆä¸­çš„å¾ˆå¤šåè®®éƒ½ä¼šä½¿ç”¨å¹¿æ’­: åœ°å€è§£æåè®®ARP(å·²çŸ¥IPåœ°å€ï¼Œæ‰¾å‡ºå…¶ç›¸åº”çš„MACåœ°å€) è·¯ç”±ä¿¡æ¯åè®®RIP(ä¸€ç§å°å‹çš„å†…éƒ¨è·¯ç”±åè®®) åŠ¨æ€ä¸»æœºé…ç½®åè®®DHCP(ç”¨äºè‡ªåŠ¨é…ç½®IPåœ°å€) NetBEUl:Widnowsä¸‹ä½¿ç”¨çš„å¹¿æ’­å‹åè®® IPXSPX:Novellç½‘ç»œçš„åè®®æ ˆ Apple Talk:Appleå…¬å¸çš„ç½‘ç»œåè®®æ ˆ è§£å†³æ–¹æ³•ï¼šåˆ†å‰²å¹¿æ’­åŸŸ ä¸¤ç§æ–¹æ³•ï¼š è·¯ç”±å™¨éš”ç¦»å¹¿æ’­åŸŸ ç”±äºè·¯ç”±å™¨å±äºç½‘ç»œå±‚è®¾å¤‡ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸å¯¹å¹¿æ’­æ•°æ®åŒ…è¿›è¡Œè½¬å‘ï¼Œå› æ­¤è‡ªç„¶è¾¾åˆ°éš”ç¦»çš„æ•ˆæœã€‚ä½†æ˜¯æˆæœ¬è¾ƒé«˜ï¼Œå±€åŸŸç½‘å†…éƒ¨å…¨é è·¯ç”±å™¨åˆ†å‰²å¹¿æ’­åŸŸæ˜¯ä¸ç°å®çš„ã€‚ è™šæ‹Ÿå±€åŸŸç½‘ VLANï¼ˆVirtual Local Area Networkï¼‰ æŠ€æœ¯:å°†å±€åŸŸç½‘å†…çš„è®¾å¤‡åˆ’åˆ†æˆä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„çš„æŠ€æœ¯ï¼Œè¿™äº›é€»è¾‘ç»„å…·æœ‰æŸäº›å…±åŒçš„éœ€æ±‚ã€‚ å®ç°æœºåˆ¶ï¼š 1.å¸§æ ¼å¼ 2.äº¤æ¢æœºç«¯å£ç±»å‹ å¸§æ ¼å¼ VLANæ ‡è®°çš„æœ€å12æ¯”ç‰¹ç§°ä¸ºVLANæ ‡è¯†ç¬¦VIDï¼Œå®ƒå”¯ä¸€åœ°æ ‡å¿—äº†ä»¥å¤ªç½‘å¸§å±äºå“ªä¸€ä¸ªVLAN VIDçš„å–å€¼èŒƒå›´æ˜¯0~4095 0å’Œ4095éƒ½ä¸ç”¨æ¥è¡¨ç¤ºVLANï¼Œå› æ­¤ç”¨äºè¡¨ç¤ºVLANçš„VIDçš„æœ‰æ•ˆèŒƒå›´æ˜¯1~4094 802.1Qå¸§æ—¶ç”±äº¤æ¢æœºæ¥å¤„ç†çš„ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ä¸»æœºæ¥å¤„ç†çš„ å½“äº¤æ¢æœºæ”¶åˆ°æ™®é€šçš„ä»¥å¤ªç½‘å¸§æ—¶ï¼Œä¼šå°†å…¶æ’å…¥4å­—èŠ‚çš„VLANæ ‡è®°è½¬å˜ä¸º802.1Qï¼Œç®€ç§°**â€œæ‰“æ ‡ç­¾â€** å½“äº¤æ¢æœºè½¬å‘802.1Qå¸§æ—¶ï¼Œå¯èƒ½ä¼šåˆ é™¤å…¶4å­—èŠ‚VLANæ ‡è®°è½¬å˜ä¸ºæ™®é€šä»¥å¤ªç½‘å¸§ï¼Œç®€ç§°**â€œå»æ ‡ç­¾â€** ç«¯å£ç±»å‹ Access Trunk Hybridï¼ˆæ€ç§‘äº¤æ¢æœºæ²¡æœ‰è¿™ä¸ªç«¯å£ï¼‰ äº¤æ¢æœºä¸ªç«¯å£çš„ç¼ºçœ VLAN IDï¼š åœ¨æ€ç§‘äº¤æ¢æœºä¸Šç§°ä¸ºNative VLANï¼Œå³æœ¬å¾VLANã€‚ åœ¨åä¸ºäº¤æ¢æœºä¸Šç§°ä¸ºPort VLAN IDï¼Œå³ç«¯å£VLANIDï¼Œç®€è®°ä¸ºPVIDã€‚ äº¤æ¢æœºæ¯ä¸ªç«¯å£æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªPVIDã€‚ Access æ¥å£ Accessç«¯å£ä¸€èˆ¬ç”¨äºç»ˆç«¯è®¾å¤‡ä¸äº¤æ¢æœºä¹‹é—´ æ³¨æ„ï¼šäº¤æ¢æœºä¸è·¯ç”±å™¨è¿æ¥çš„æ¥å£ä¹Ÿéœ€è¦ä½¿ç”¨accessæ¥å£ã€‚è¿™æ˜¯å› ä¸ºè·¯ç”±å™¨ä¸­çš„æ¶ˆæ¯ä¹Ÿä¸å¸¦VLANæ ‡ç­¾ï¼Œå°±åƒç»ˆç«¯ä¸€æ ·ï¼Œä¿è¯è·¯ç”±å™¨çš„æ•°æ®èƒ½å¤Ÿè¿›å…¥äº¤æ¢æœºé¢†åŸŸï¼Œæ•°æ®ç”±è·¯ç”±å™¨è¿›å…¥äº¤æ¢æœºæ˜¯ä¼šè¢«æ‰“ä¸Šé»˜è®¤æ ‡ç­¾ï¼Œæ¥ç€çŒœæŒ‰ç…§äº¤æ¢æœºé—´VLANçš„è§„åˆ™è¡Œèµ°ã€‚ç®€å•ç†è§£å°±æ˜¯æŠŠè·¯ç”±å™¨å½“ä½œç»ˆç«¯ã€‚ äº¤æ¢æœºåˆå§‹ç«¯å£ç±»å‹æ˜¯Access Accessç«¯å£åªèƒ½å±äºä¸€ä¸ªVLAN Accessç«¯å£çš„PVIDå€¼ä¸ç«¯å£æ‰€å±VLANçš„IDç›¸åŒ(é»˜è®¤ä¸º1) Accessç«¯å£æ¥æ”¶æ–¹æ³• ä¸€èˆ¬åªæ¥æ”¶â€æœªæ‰“æ ‡ç­¾â€çš„æ™®é€šä»¥å¤ªç½‘MACå¸§ã€‚æ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£PVIDå€¼ç»™å¸§â€æ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚çš„VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£PVIDå–å€¼ç›¸ç­‰ã€‚ Accessç«¯å£å‘é€å¤„ç†æ–¹æ³• è‹¥å¸§ä¸­çš„VIDä¸ç«¯å£çš„PVIDç›¸ç­‰ï¼Œåˆ™â€å»æ ‡ç­¾â€å¹¶è½¬å‘è¯¥å¸§ï¼›å¦åˆ™ä¸è½¬å‘ã€‚ Trunk æ¥å£ Trunkç«¯å£ä¸€èˆ¬ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿ Trunkç«¯å£å¯ä»¥å±äºå¤šä¸ªVLAN ç”¨æˆ·å¯ä»¥è®¾ç½®Trunkç«¯å£çš„PVIDå€¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒTrunkç«¯å£PVIDå€¼ä¸º1 Trunkç«¯å£å‘é€å¤„ç†æ–¹æ³•ï¼š å¯¹VIDç­‰äºPVIDçš„å¸§ï¼Œâ€œå»æ ‡ç­¾ï¼Œå†è½¬å‘â€ å¯¹VIDä¸ç­‰äºPVIDçš„å¸§ï¼Œç›´æ¥è½¬å‘ Trunkç«¯å£æ¥æ”¶å¤„ç†æ–¹æ³•ï¼š é’ˆå¯¹â€æœªæ‰“æ ‡ç­¾â€çš„å¸§ã€‚æ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€æ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚çš„VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ é’ˆå¯¹â€å·²æ‰“æ ‡ç­¾çš„å¸§â€ç›´æ¥æ¥å—ã€‚ Hybrid æ¥å£ Hybridç«¯å£æ—¢å¯ä»¥ç”¨äºäº¤æ¢æœºä¹‹é—´æˆ–äº¤æ¢æœºä¸è·¯ç”±å™¨ä¹‹é—´çš„äº’è¿(åŒTrunkç«¯å£)ï¼Œä¹Ÿå¯ç”¨äºäº¤æ¢æœºä¸ç”¨æˆ·è®¡ç®—æœºä¹‹é—´çš„äº’è¿(åŒAccessç«¯å£) Hybridç«¯å£å¯ä»¥å±äºå¤šä¸ªVLAN(åŒTrunkç«¯å£) ç”¨æˆ·å¯ä»¥è®¾ç½®Hybridç«¯å£çš„PVIDå€¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHybridç«¯å£çš„PVIDå€¼ä¸º1 Hybridç«¯å£å‘é€å¤„ç†æ–¹æ³•ï¼š æŸ¥çœ‹å¸§çš„VIDæ˜¯å¦åœ¨ç«¯å£çš„â€å»æ ‡ç­¾â€åˆ—è¡¨ä¸­ è‹¥å­˜åœ¨ï¼Œåˆ™â€å»æ ‡ç­¾â€åè½¬å‘ è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è½¬å‘ Hybridç«¯å£æ¥æ”¶å¤„ç†æ–¹æ³•(åŒTrunk)ï¼š æ¥æ”¶â€æœªæ‰“æ ‡ç­¾â€çš„å¸§ï¼Œæ ¹æ®æ¥æ”¶å¸§çš„ç«¯å£çš„PVIDç»™å¸§â€æ‰“æ ‡ç­¾â€ï¼Œå³æ’å…¥4å­—èŠ‚VLANæ ‡è®°å­—æ®µï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDå–å€¼ç›¸ç­‰ æ¥æ”¶â€å·²æ‰“æ ‡ç­¾çš„å¸§â€ æ‚é¡¹ä¼ æ’­æ—¶å»¶å’Œä¼ è¾“æ—¶å»¶ ä¼ è¾“æ—¶å»¶åˆç§°å‘é€æ—¶å»¶ã€‚ ä¼ æ’­æ—¶å»¶è·ç¦»ä¿¡å·è½¬æ’­é€Ÿç‡(ms) å‘é€æ—¶å»¶ï¼ˆä¼ è¾“æ—¶å»¶ï¼‰æ•°æ®å—é•¿åº¦ï¼ˆæ¯”ç‰¹ï¼‰å‘é€é€Ÿç‡ï¼ˆåˆç§°å¸¦å®½æˆ–æ•°æ®ä¼ è¾“é€Ÿç‡ï¼‰(bits) ä¼ è¾“æ—¶å»¶æ˜¯æŒ‡ä¸€ä¸ªç«™ç‚¹ä»å¼€å§‹å‘é€æ•°æ®å¸§åˆ°æ•°æ®å¸§å‘é€å®Œæ¯•æ‰€éœ€è¦çš„å…¨éƒ¨æ—¶é—´ï¼Œä¼ æ’­æ—¶å»¶æ˜¯æŒ‡å‘é€ç«¯å¼€å§‹å‘é€æ•°æ®åˆ°æ¥æ”¶ç«¯æ”¶åˆ°æ•°æ®æ‰€éœ€è¦çš„å…¨éƒ¨æ—¶é—´ã€‚ä¼ è¾“æ—¶å»¶å’Œå‘é€æ•°æ®å¸§å¤§å°æœ‰å…³ï¼Œè€Œä¼ æ’­æ—¶å»¶å’Œä¼ è¾“è·ç¦»ç›¸å…³ã€‚"},{"title":"çˆ¬è™«å…¥é—¨2","path":"/wiki/python/çˆ¬è™«å…¥é—¨2.html","content":"çº¿ç¨‹åº“ï¼šthreading æ¦‚å¿µï¼š åŒºåˆ†çº¿ç¨‹å’Œè¿›ç¨‹ çº¿ç¨‹ï¼šæ‰§è¡Œå•ä½ã€‚ å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¿›ç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ çº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚ ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶å‘å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚ è¿›ç¨‹ï¼šèµ„æºå•ä½ã€‚è¿›ç¨‹æ˜¯ç¨‹åºçš„å®ä½“ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½è¦å ç”¨ä¸€å®šå†…å­˜ã€‚ è®¡ç®—æœºä¸­çš„ç¨‹åºå…³äºæŸæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯æ“ä½œç³»ç»Ÿç»“æ„çš„åŸºç¡€ã€‚ è¿›ç¨‹é‡Œå¿…å®šæœ‰è‡³å°‘ä¸€ä¸ªçº¿ç¨‹ã€‚è¿›ç¨‹å¦‚åŒé¡¹ç›®ï¼Œçº¿ç¨‹å¦‚åŒå‘˜å·¥ï¼Œé¡¹ç›®çš„è¿ä½œè‡³å°‘éœ€è¦ä¸€ä¸ªå‘˜å·¥ã€‚ å¤šè¿›ç¨‹åº”ç”¨ï¼š æ–¹æ³• from threading import Threaddef func(): for i in range(1,1000): print(fChild :i)t = Thread(target= func) # t ä¸ºçº¿ç¨‹å¯¹è±¡ï¼ŒThreadé‡Œçš„targetå‚æ•°è®¾ç½®å·¥ä½œå†…å®¹t.start() #è®¾ç½®çº¿ç¨‹çŠ¶æ€ä¸º å¼€å§‹ ï¼ˆåªæ˜¯çŠ¶æ€ï¼Œå®é™…æ‰§è¡Œæ—¶é—´ç”±CPUå†³å®šï¼‰if __name__ = __main__: for i in range(1,1000): print(fBase :i) ç±» from threading import Threadclass Mythread(Thread): #ç»§æ‰¿ Thread ç±» def run(self): #å›ºå®šæ ¼å¼ï¼Œçº¿ç¨‹çŠ¶æ€å¼€å¯ï¼Œè‡ªåŠ¨è¿è¡Œ for i in range(1, 1000): print(fChild :i)if __name__ == __main__: t = Mythread() #t.run #ç›´æ¥è°ƒç”¨ï¼Œä¸ºå½“å‰çº¿ç¨‹çš„å•çº¿ç¨‹æ‰§è¡Œ t.start() #å¼€å¯çº¿ç¨‹ for i in range(1,1000): print(fBase :i) é‡åˆ°å‚æ•°ï¼š æ–¹æ³• from threading import Threaddef func(dj): for i in range(1,1000): print(dj,i)#args å‚æ•°å¿…é¡»ä»¥å…ƒç»„å½¢å¼å‘å‡ºt1 = Thread(target= func,args=(Jay_Z, )) t1.start()t2 = Thread(target= func,args=(kan_ye, ))t2.start() ç±» from threading import Threaddef func(dj): for i in range(1,1000): print(dj,i)#args å‚æ•°å¿…é¡»ä»¥å…ƒç»„å½¢å¼å‘å‡ºt1 = Thread(target= func,args=(Jay_Z, )) t1.start()t2 = Thread(target= func,args=(kan_ye, ))t2.start() å¤šè¿›ç¨‹ å¤šçº¿ç¨‹åº”ç”¨çš„APIå’Œå¤šè¿›ç¨‹ä¸€æ ·ï¼Œåªæ˜¯ä½¿ç”¨åº“ä¸º multiprocessing . Process from multiprocessing import Process (è¿™åªæ˜¯å› ä¸ºPythonæ–¹ä¾¿ç”¨æˆ·è®¾ç½®çš„ï¼Œå®é™…ä¸¤è€…åº•å±‚åŸç†å®Œå…¨ä¸åŒ) çº¿ç¨‹æ± çº¿ç¨‹æ± ï¼šä¸€æ¬¡æ€§å¼€è¾Ÿä¸€äº›çº¿ç¨‹ï¼Œç”¨æˆ·ç›´æ¥ç»™çº¿ç¨‹æ± å­æäº¤ä»»åŠ¡ï¼Œçº¿ç¨‹ä»»åŠ¡çš„è°ƒåº¦äº¤ç»™çº¿ç¨‹æ± æ¥å®Œæˆ from concurrent.futures import ThreadPoolExecutor ,#æ‰“ä¸ªæ¯”å–»ï¼Œè¿™é‡Œ50ä¸ªçº¿ç¨‹å¯ä»¥ç†è§£æˆ50ä¸ªäººï¼Œfor...range(100)ç›¸å½“äºæœ‰100ä¸ªä»»åŠ¡ï¼Œ#æ¯ä¸ªä»»åŠ¡æ˜¯ä»1æ•°åˆ°1000ï¼Œåªè¦ä¸€ä¸ªäººï¼ˆçº¿ç¨‹ï¼‰æ•°å®Œäº†ï¼ˆæ‰§è¡Œå®Œ1-1000ï¼‰ï¼Œå°±å¯ä»¥ç»§ç»­æ•°ä¸‹ä¸€ä¸ªä»»åŠ¡def fn(name): for i in range(1000): print(name, i)if __name__ ==__main__: #åˆ›å»ºçº¿ç¨‹æ±  (è¯¥ä¾‹ä¸­æœ‰50ä¸ªçº¿ç¨‹) with ThreadPoolExecutor(50) as t: for i in range(100): t.submit(fn, name=fçº¿ç¨‹i) #çº¿ç¨‹æ± ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæ¯•åï¼Œæ‰ç»§ç»­æ‰§è¡Œ(å®ˆæŠ¤) print(over) è¿›ç¨‹æ± ï¼š å¯ä»¥æä¾›æŒ‡å®šæ•°é‡çš„è¿›ç¨‹ç»™ç”¨æˆ·ä½¿ç”¨, å³å½“æœ‰æ–°çš„è¯·æ±‚æäº¤åˆ°è¿›ç¨‹æ± ä¸­æ—¶ï¼Œå¦‚æœæ± æœªæ»¡ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ç”¨æ¥æ‰§è¡Œè¯¥è¯·æ±‚; åä¹‹ï¼Œå¦‚æœæ± ä¸­è¿›ç¨‹æ•°ä¸ºæœ€å¤§å€¼ï¼Œåˆ™è¯·æ±‚ç­‰å¾…ï¼›æ± ä¸­æœ‰è¿›ç¨‹ç©ºé—²ï¼Œåˆ™è¯·æ±‚å¾—åˆ°æ‰§è¡Œã€‚ çº¿ç¨‹æ± ç¤ºä¾‹ï¼šæ–°å‘åœ°èœå¸‚åœºä»·æ ¼çˆ¬å– # 1. å¦‚ä½•æå–å•ä¸ªé¡µé¢çš„æ•°æ®# 2. ä¸Šçº¿ç¨‹æ± ,å¤šä¸ªé¡µé¢åŒæ—¶æŠ“å–import requestsfrom lxml import etreeimport csvfrom concurrent.futures import ThreadPoolExecutorf = open(data.csv, mode=w, encoding=utf-8)csvwriter = csv.writer(f)def download_one_page(url): # æ‹¿åˆ°é¡µé¢æºä»£ç  resp = requests.get(url) html = etree.HTML(resp.text) table = html.xpath(/html/body/div[2]/div[4]/div[1]/table)[0] trs = table.xpath(./tr[position()1]) # æ‹¿åˆ°æ¯ä¸ªtr for tr in trs: txt = tr.xpath(./td/text()) # å¯¹æ•°æ®åšç®€å•çš„å¤„ç†: â€œ\\\\â€ï¼Œ â€œ/â€å»æ‰ txt = (item.replace(\\\\, ).replace(/, ) for item in txt) # æŠŠæ•°æ®å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ csvwriter.writerow(txt) print(url, æå–å®Œæ¯•!)if __name__ == __main__: # åˆ›å»ºçº¿ç¨‹æ±  with ThreadPoolExecutor(50) as t: for i in range(1, 200): # 199 * 20 = 3980 # æŠŠä¸‹è½½ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ±  t.submit(download_one_page, fhttp://www.xinfadi.com.cn/marketanalysis/0/list/i.shtml) print(å…¨éƒ¨ä¸‹è½½å®Œæ¯•!) åç¨‹æ¦‚å¿µï¼šå½“ç¨‹åºé‡è§äº†IOæ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©æ€§åˆ‡æ¢åˆ°å…¶ä»–ä»»åŠ¡ä¸Šã€‚ è¿™ç§åˆ‡æ¢ï¼š å¾®è§‚ä¸Šæ˜¯ä¸€ä¸ªä»»åŠ¡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ å®è§‚ä¸Šåˆ™æ˜¯å¤šä»»åŠ¡å¼‚æ­¥æ“ä½œï¼šå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œï¼ˆå› ä¸ºåˆ‡æ¢é€Ÿåº¦å¤ªå¿«ï¼‰ åˆ‡æ¢çš„æ“ä½œï¼šinputï¼Œrequest.get()ç½‘ç»œè¯·æ±‚è¿”å›æ•°æ®ï¼Œsleepç­‰ã€‚ ä»£ç ç¤ºä¾‹ï¼š import time,asyncioasync def func1(): print(ä»»åŠ¡ä¸€ 1) #time.sleep(3) # time.sleepä¸ºåŒæ­¥æ“ä½œï¼Œæ­¤æ—¶å¼‚æ­¥æ“ä½œä¼šä¸­æ–­ await asyncio.sleep(3) print(ä»»åŠ¡ä¸€ 2)async def func2(): print(ä»»åŠ¡äºŒ 1) await asyncio.sleep(4) print(ä»»åŠ¡äºŒ 2)async def func3(): print(ä»»åŠ¡ä¸‰ 1) await asyncio.sleep(5) print(ä»»åŠ¡ä¸‰ 2)if __name__ == __main__: # tasks = [func1(),func2(),func3()] #è¿™ç§å†™æ³•3.8ä»¥åä¼šæœ‰è­¦å‘Š tasks = [ asyncio.create_task(func1) asyncio.create_task(func2) asyncio.create_task(func2) ] t1 = time.time() asyncio.run(asyncio.wait(tasks)) t2 = time.time() print(t2-t1) # å•è¿›ç¨‹åŒæ­¥æ“ä½œï¼š12.028307676315308 # å¤šè¿›ç¨‹å¼‚æ­¥æ“ä½œï¼š5.009987115859985 create_taské—®é¢˜ï¼šè¿™ä¸ªé—®é¢˜å¯¹åº”è­¦å‘Šï¼ˆDeprecationWarning: The explicit passing of coroutine objects to asyncio.wait() is deprecated since Python 3.8, and scheduled for removal in Python 3.11ï¼‰ æŠŠåç¨‹å¯¹è±¡åˆ›å»ºæˆä¸€ä¸ªä»»åŠ¡ï¼Œå³taskå¯¹è±¡ï¼Œå°†å¤šä¸ªtaskå¯¹è±¡åŒ…è£…åœ¨ä¸€èµ·å°±æ²¡é—®é¢˜äº†ã€‚ (åŸæ¥æ˜¯åŒ…è£…å¥½å‡†å¤‡åç¨‹å¯¹è±¡ååŒæ—¶æ‰§è¡Œï¼Œç°åœ¨å†™æ³•æ˜¯é€ä¸ªæ‰§è¡Œ) 2.await æŒ‚èµ·æ“ä½œ ï¼šå¿…é¡»åœ¨ async å‡½æ•°é‡Œï¼Œä¸”è¦æ”¾åœ¨åç¨‹å¯¹è±¡å‰é¢ å¼‚æ­¥åˆæ¶‰ï¼šå¼‚æ­¥httpè¯·æ±‚aiohttpæ¨¡å—è®²è§£è¯·æ±‚è¿æ¥æ“ä½œä¸Šï¼Œrequest æ˜¯åŒæ­¥ä»£ç  ï¼Œå¼‚æ­¥ä»£ç ä½ å¾—ç”¨ aiohttp æ¨¡å—ä¸­çš„ aiohttp.ClientSession() (ä¹Ÿè®¸ä½ ä¼šæƒ³åˆ° cookie ä¸­çš„ä¼šè¯) ç¤ºä¾‹ï¼ˆçˆ¬å–å”¯ç¾å›¾ç‰‡ï¼‰ import aiohttpimport asynciourls = [ http://kr.shanghai-jiuxin.com/file/2022/0607/0d0208537886e225a5902e1001b2c702.jpg, http://kr.shanghai-jiuxin.com/file/2022/0607/b690bb5677be51cf12fe5b7638faf6b9.jpg, http://kr.shanghai-jiuxin.com/file/2022/0607/b3238e128301a37d24f65157d25fe3a9.jpg]async def download(url): name = url.rsplit(/,1)[1] #æ‡’å¾—èµ·åå­— async with aiohttp.ClientSession() as S: #1. å‘é€è¯·æ±‚ async with S.get(url) as resp: #2. å¾—åˆ°å†…å®¹ with open(name, mode=wb) as f: #3. ä¸‹è½½å›¾ç‰‡ f.write(await resp.content.read()) #è¯»å–å†…å®¹æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œè¦æŒ‚èµ· await print(name,æ–‡ä»¶å·²ä¸‹è½½) #S.get() / S.post() == request.get() / .post() #S.text()/json() == resp.text() /.post()async def main(): tasks = [] for url in urls: tasks.append(asyncio.create_task(download(url)))\t#åŒ…è£…é“¾æ¥ï¼ˆä»»åŠ¡ç½‘å€ï¼‰ä¸ºä¸€ä¸ªåˆ—è¡¨ await asyncio.wait(tasks)if __name__ == __main__: asyncio.run(main()) ç®€å•çš„å¼‚æ­¥çˆ¬è™«çˆ¬å–ç™¾åº¦å°è¯´å†…å®¹ 1.åŒæ­¥æ“ä½œï¼šè¿æ¥ç›®å½•ç½‘å€ï¼Œæ‹¿åˆ°cidå’Œbook_id #def getId2.å¼‚æ­¥æ“ä½œï¼š æ ¹æ®cidå’Œbook_id è¿æ¥å†…å®¹ç½‘å€ï¼Œæ‹¿åˆ°å°è¯´å†…å®¹ 3.ä¸‹è½½ #def getContendimport jsonimport aiofiles import aiohttpimport requestsimport asynciourl1 = http://dushu.baidu.com/api/pc/getCatalog?data=book_id:4306063500url2 = http://dushu.baidu.com/api/pc/getChapterContent?data=book_id:4306063500,cid:4306063500|1569782244,need_bookinfo:1async def getContend(book_id,cid,title): data = book_id:book_id , cid:fbook_id|cid , need_bookinfo:1 data = json.dumps(data) url = fhttp://dushu.baidu.com/api/pc/getChapterContent?data=data async with aiohttp.ClientSession() as s: async with s.get(url) as resp: dic = await resp.json() # åç¨‹å¯¹è±¡ async with aiofiles.open(title+.txt, mode=w,newline= ,encoding=utf8) as f: await f.write(dic[data][novel][content])async def getId(): tasks = [] resp = requests.get(url1) dic = resp.json() book_id = dic[data][novel][book_id] print(book_id) for it in dic[data][novel][items][0:5]: #åˆ‡ä¸ªç‰‡ title = it[title] cid = it[cid] tasks.append(asyncio.create_task(getContend(book_id,cid,title))) await asyncio.wait(tasks)if __name__ == __main__: asyncio.run(getId()) ä¸€èˆ¬è§†é¢‘çˆ¬è™«æ€è·¯ç½‘ç«™æœåŠ¡å™¨æŠŠæ•´ä¸ªæºè§†é¢‘å‘é€ç»™å®¢æˆ·ç«¯æ˜¯å¾ˆå°‘è§çš„ï¼š ä¼ è¾“æ•´ä¸ªè§†é¢‘æ–‡ä»¶å¤ªå¤§ï¼Œä¼ è¾“é€Ÿåº¦å¾ˆæ…¢ ï¼ŒèŠ±è´¹æµé‡é«˜ ç”¨æˆ·ä¼šæ‹‰è¿›åº¦æ¡ï¼Œå­˜åœ¨èµ„æºæµªè´¹ ä¸€èˆ¬è§†é¢‘ç½‘ç«™å­˜å‚¨æ€è·¯ï¼š ç”¨æˆ·ä¸Šä¼  â€”â€” è½¬ç ï¼ˆä¸åŒæ¸…æ™°åº¦ï¼‰ â€”â€” åˆ‡ç‰‡ï¼ˆå°†å¤§æ–‡ä»¶è§†é¢‘åˆ‡æˆè¿ç»­çš„ä¸€å°æ®µï¼‰ åˆ‡ç‰‡æ„å‘³ç€éœ€è¦ä¸€ä¸ªæ–‡ä»¶æ¥ä¿è¯ç‰‡æ®µçš„æœ‰åºæ€§ï¼Œä¹Ÿå°±æ˜¯è®°å½• è§†é¢‘æ’­æ”¾é¡ºåºå’Œè§†é¢‘å­˜æ”¾è·¯å¾„ã€‚å½“ç„¶è¿™ä¸ªæ–‡ä»¶è¿˜å¯ä»¥é™„åŠ è§†é¢‘ç ç‡ç­‰å…¶ä»–ä¿¡æ¯ã€‚ é€šå¸¸è¯¥æ–‡ä»¶æ ¼å¼ä¸º M3U8 ã€‚ ç¤ºä¾‹ï¼š #EXTM3U#EXT-X-VERSION:3#EXT-X-TARGETDURATION:4 #æ¯ä¸ªè§†é¢‘åˆ‡ç‰‡æœ€å¤§æ—¶é•¿#EXT-X-PLAYLIST-TYPE:VOD#EXT-X-MEDIA-SEQUENCE:0#EXT-X-KEY:METHOD=AES-128,URI=*/key.key#åˆ‡ç‰‡æ–‡ä»¶åŠ å¯†æ–¹å¼å’Œç§˜é’¥åœ°å€ï¼ˆå¦‚æœæœ‰åŠ å¯†ï¼Œåˆ™è¦å…ˆè§£å¯†æ‰èƒ½æ’­æ”¾ï¼‰#EXTINF:2, #æŒç»­æ—¶é—´https://hey07.cjkypo.com/20220505/9BS0wTIh/1100kb/hls/dsZ27s7p.ts #tsæ–‡ä»¶çš„åœ°å€#EXTINF:2,https://hey07.cjkypo.com/20220505/9BS0wTIh/1100kb/hls/Gw8DtNn5.ts#EXTINF:2,https://hey07.cjkypo.com/20220505/9BS0wTIh/1100kb/hls/EZ0UlXoC.ts#EXTINF:2,https://hey07.cjkypo.com/20220505/9BS0wTIh/1100kb/hls/MNb9yXCB.ts#EXTINF:2,https://hey07.cjkypo.com/20220505/9BS0wTIh/1100kb/hls/JisT83Nx.ts åçˆ¬ï¼ˆç¤ºä¾‹ç½‘ç«™ï¼š91è§†é¢‘ï¼‰ï¼š m3u8æ–‡ä»¶çš„å“åº”å¤´ url å’Œè§†é¢‘ç½‘å€æºä»£ç ä¸­çš„urlæœ‰æ‰€å·®åˆ«ï¼š response header: https://m3api.awenhao.com/index.php?note=kkRphqrd5sykfam43wzx1raw=1n.m3u8source code: https://m3api.awenhao.com/index.php?note=kkRtxaw975rd6qcbnz3jfraw=1n.m3u8 note ä¸­é—´éƒ¨åˆ†ä¼šæœ‰éƒ¨åˆ†å­—ç¬¦ä¸²ä¸åŒçš„æƒ…å†µï¼ˆåŠ¨æ€ï¼‰ã€‚è¿™æ˜¯åçˆ¬çš„ä¸€ç§æœºåˆ¶ï¼ˆä»…å°±ç¤ºä¾‹è€Œè¨€ï¼‰ã€‚ æ’­æ”¾è§†é¢‘æœ‰ä¸¤æ­¥ï¼š å®¢æˆ·ç«¯è®¿é—®htmlè¯·æ±‚åˆ°æœåŠ¡å™¨ â€”â€” æœåŠ¡å™¨è¿”å›htmlé¡µé¢æºä»£ç  å®¢æˆ·ç«¯è¯·æ±‚å¾—åˆ°m3u8æ–‡ä»¶æ’­æ”¾è§†é¢‘ â€”â€” æœåŠ¡å™¨è¿”å›m3u8æ–‡ä»¶ åœ¨ç¬¬ä¸€æ­¥è¿›è¡Œæ—¶ï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªåŠ¨æ€å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¼šèµ‹å€¼åˆ°æ¥ä¸‹æ¥çš„m3u8æ–‡ä»¶ï¼Œä¸¤è€…äº’ç›¸å¯¹åº”ã€‚ è¿™æ ·èƒ½ä¿è¯å…ˆè¿›è¡Œhtmlé¡µé¢è¯·æ±‚ï¼Œå†è¯·æ±‚m3u8çš„æ­£å¸¸æµç¨‹ã€‚ç›´æ¥è¯·æ±‚m3u8çš„çˆ¬è™«æœºåˆ¶ä¼šå› ä¸ºåŠ¨æ€å­—ç¬¦ä¸²ä¸åŒ¹é…è¢«é©³å›ã€‚ ï¼ˆåŠ¨æ€å­—ç¬¦ä¸²æœ‰æ—¶æ•ˆæ€§ï¼Œå¦‚åŒ5åˆ†é’ŸéªŒè¯ç è¿™ç§ã€‚é¡µé¢é•¿æ—¶é—´æ²¡æœ‰è¯·æ±‚m3u8æ–‡ä»¶æ“ä½œï¼Œä¹Ÿä¼šé€ æˆm3u8å“åº”å¤±æ•ˆï¼Œéœ€è¦åˆ·æ–°ç½‘å€é‡æ–°è¯·æ±‚ï¼‰ æŠ“å–è§†é¢‘æ€è·¯ï¼š æ‰¾åˆ° m3u8 ï¼ˆå„ç§æ‰‹æ®µï¼‰ é€šè¿‡ m3u8 ä¸‹è½½ ts æ–‡ä»¶ é€šè¿‡å„ç§æ‰‹æ®µæŠŠ ts æ–‡ä»¶åˆå¹¶åˆ°ä¸€èµ· ç¤ºä¾‹ä»£ç (91çœ‹å‰§çˆ¬å–ts)ï¼š #resp çš„ text / content ï¼Œå­—èŠ‚æµå’Œå­—ç¬¦ä¸²çš„æ ¼å¼å˜æ¢å¤ªéš¾å—äº†ï¼Œè¿™æ®µä»£ç ä»…ä¾›å‚è€ƒï¼Œå®æ“æœªæˆåŠŸimport requestsimport reurl = http://91kanju2.com/vod-play/47487-1-1.htmlresp = requests.get(url)obj = re.compile(rurl: (?Purl.*?),,re.S)m3u8_url = obj.search(resp.text).group(url)resp.close()resp2 = requests.get(m3u8_url)#è¿™é‡Œç›¸å½“åå·ï¼Œä¸å…·å¤‡æ™®é€‚æ€§ã€‚ä½†æ¢ç©¶ç²¾ç¥å€¼å¾—å€Ÿé‰´ã€‚resp3 = requests.get(https://v4.cdtlas.com/+ resp2.text.split(/,1)[1].rstrip()) s = resp3.content.decode(utf-8)n = 0for line in s line = line.strip() if line.startswith(#): continue print(line) resp4 = requests.get(line) with open(fn.ts,mode=wb) as f: f.write(resp4.text) resp4.close() n += 1resp3.close()resp2.close() ä¸¤ä¸ªå¤§ä½œä¸šæ™®é€šçˆ¬è™«çˆ¬å–ç½‘æ˜“äº‘éŸ³ä¹è¯„è®º91è§†é¢‘selenium"}]